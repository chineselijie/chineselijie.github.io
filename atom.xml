<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Li Jie&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/chineselijie/"/>
  <updated>2019-08-23T16:37:16.010Z</updated>
  <id>https://github.com/chineselijie/</id>
  
  <author>
    <name>Li Jie</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>子网划分</title>
    <link href="https://github.com/chineselijie/2020/03/12/1.%E7%BD%91%E7%BB%9C--%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/"/>
    <id>https://github.com/chineselijie/2020/03/12/1.%E7%BD%91%E7%BB%9C--%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/</id>
    <published>2020-03-12T11:40:33.431Z</published>
    <updated>2019-08-23T16:37:16.010Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h3><blockquote><p>半吊子水准，大神请赐教，小白请阅</p><p>​                                —写在前面的话</p></blockquote><p>不扯犊子，直接开始</p><p>首先，我们要懂得IP地址的类别</p><h5 id="IP地址："><a href="#IP地址：" class="headerlink" title="IP地址："></a>IP地址：</h5><ul><li>IP地址是可以局部表示唯一的主机</li><li>IP地址是由4个字节，每个字节有8位bit，共32位bit组成</li><li>IP地址分为网络部分和主机部分</li><li>IP地址分为A、B、C、D、E类地址，其中D、E类地址用于科研，我们平常使用的也只有A、B、C三类地址，所以在此我也只列出A、B、C三类地址</li></ul><h5 id="A类地址："><a href="#A类地址：" class="headerlink" title="A类地址："></a>A类地址：</h5><p>前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位</p><p>地址范围：1.0.0.0–126.255.255.255<br>(00000001.00000000.00000000.00000000–01111110.111111111.11111111.11111111）</p><p>A类私有地址:10.0.0.0–10.255.255.255</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(00000001.00000000.00000000.00000000--01111110.111111111.11111111.11111111）</span><br><span class="line"><span class="comment"># 此处不懂没关系，后面会讲到</span></span><br></pre></td></tr></table></figure><h5 id="B类地址："><a href="#B类地址：" class="headerlink" title="B类地址："></a>B类地址：</h5><p>前2个字节（前16位bit）为网络位，后2个字节（后16位bit）为主机位</p><p>地址范围：128.0.0.0–191.255.255.255<br>（10000000.00000000.00000000.00000000–10111111.11111111.11111111.11111111）</p><p>B类私有地址：172.16.0.0–172.31.255.255</p><h5 id="C类地址："><a href="#C类地址：" class="headerlink" title="C类地址："></a>C类地址：</h5><p>前3个字节（前24位bit）为网络位，后1个字节（后8位bit）为主机位</p><p>地址范围：192.0.0.0–223.255.255.255<br>（11000000.00000000.00000000.00000000–11011111.11111111.11111111.11111111）</p><p>C类私有地址：192.168.0.0–192.168.255.255</p><h5 id="环回地址："><a href="#环回地址：" class="headerlink" title="环回地址："></a>环回地址：</h5><p>地址范围：127.0.0.0–127.255.255.255<br>（01111111.00000000.00000000.00000000–01111111.11111111.11111111.11111111） #一般用于Windows系统，可检测电脑网卡是否正常</p><p>然后，我们来理解一下十进制与二进制之间的转换</p><h5 id="十进制与二进制之间的转换："><a href="#十进制与二进制之间的转换：" class="headerlink" title="十进制与二进制之间的转换："></a>十进制与二进制之间的转换：</h5><table><thead><tr><th align="center">第八位</th><th align="center">第七位</th><th align="center">第六位</th><th align="center">第五位</th><th align="center">第四位</th><th align="center">第三位</th><th align="center">第二位</th><th align="center">第一位</th></tr></thead><tbody><tr><td align="center">128</td><td align="center">64</td><td align="center">32</td><td align="center">16</td><td align="center">8</td><td align="center">4</td><td align="center">2</td><td align="center">1</td></tr></tbody></table><h6 id="十进制转二进制："><a href="#十进制转二进制：" class="headerlink" title="十进制转二进制："></a>十进制转二进制：</h6><p>例如：11001100</p><p>我们从右往左数，</p><p>第一位为0     第二位为0      第三位为1</p><p>第四位为1     第五位为0      第六位为0</p><p>第七位为1     第八位为1</p><p>我们可以把0看作没有，1看作有，然后我们对照着表中，把有的数字相加在一起，</p><p>所以就等于4+8+64+128=204</p><p>例如：11111111</p><p>从右往左数，都为1，所以我们对照表中，</p><p>依次相加就等于1+2+4+8+16+32+64+128=255</p><h6 id="二进制转十进制："><a href="#二进制转十进制：" class="headerlink" title="二进制转十进制："></a>二进制转十进制：</h6><p>例如：172</p><p>同等于消消乐，从左往右，只要剩余的数字能减这一位的数字则为1，不能减则为0，跳过去减下一位，直到减到没有，</p><p>第八位128 能减，则为1，172-128=44.</p><p>第七位64   不能减，则为0.</p><p>第六位32   能减，则为1，44-32=12.</p><p>第五位16   不能减，则为0.</p><p>第四位8     能减，则为1，12-8=4.</p><p>第三位4     能减，则为1，4-4=0.</p><p>第二位2     不能减，则为0.</p><p>第一位1     不能减，则为0.</p><p>那么即可得出：10101100</p><p>例如：192</p><p>第八位128 能减，则为1，192-128=64.</p><p>第七位64   能减，则为1，64-64=0.</p><p>第六位32   不能减，则为0.</p><p>第五位16   不能减，则为0.</p><p>第四位8     不能减，则为0.</p><p>第三位4     不能减，则为0.</p><p>第二位2     不能减，则为0.</p><p>第一位1     不能减，则为0.</p><p>那么即可得出：11000000</p><blockquote><p> 为什么要分类：合理的利用网络地址资源       # 网上一大片一大片的文章，其意思就是要合理的利用地址资源，避免浪费，可能他们的更官方，更实用</p></blockquote><h5 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h5><ul><li>子网掩码是用来区分网络部分和主机部分</li></ul><p>如何区分？网络部分为1，主机部分为0</p><p>例如：10.1.1.1</p><p>首先我们看出这个地址是一个A类地址【前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位】</p><p>IP地址：00001010.00000001.00000001.00000001</p><p>子网掩码：11111111.00000000.00000000.00000000 (255.0.0.0或者在IP地址后接/8)</p><blockquote><p>/8表示前8位为网络位</p></blockquote><p>例如：172.16.1.1</p><p>首先我们看出这个地址是一个B类地址【前2个字节（前16位bit）为网络位，后2个字节（后16位bit）为主机位】</p><p>IP地址：10101100.00010000.00000001.00000001</p><p>子网掩码：11111111.11111111.00000000.00000000 (255.255.0.0或者在IP地址后接/16)</p><blockquote><p> /16表示前16位为网络位</p></blockquote><p>例如：192.168.10.1</p><p>首先我们看出这是一个C类地址【前3个字节（前24位bit）为网络位，后1个字节（后8位bit）为主机位】</p><p>IP地址：11000000.10101000.00001010.00000001</p><p>子网掩码：11111111.11111111.11111111.00000000 (255.255.255.0或者在IP地址后接/24)</p><blockquote><p> /24表示前24位为网络位</p></blockquote><h5 id="网络地址与广播地址"><a href="#网络地址与广播地址" class="headerlink" title="网络地址与广播地址"></a>网络地址与广播地址</h5><ol><li>网络地址：网络位any（任意数），主机位为0</li><li>广播地址：网络位any（任意数），主机位为1</li></ol><p>例如：10.1.1.1</p><p>首先我们看出这是一个A类地址【前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位】</p><p>网络地址：00001010.00000001.00000001.00000001 (10.0.0.0)</p><p>广播地址：00001010.11111111.11111111.11111111 (10.255.255.255)</p><blockquote><p>网络地址相当于一个范围，不能用于主机。网络地址就是限制IP在本网络范围中</p></blockquote><p>例如：192.168.1.1的网络地址为192.168.1.0/24（/24代表前24位为网络位）</p><p>可用主机地址：1–254（主机为255，此为广播风暴，所以255不能用）</p><h5 id="子网划分五步骤"><a href="#子网划分五步骤" class="headerlink" title="子网划分五步骤"></a>子网划分五步骤</h5><ol><li><p>确定划分多少个网络，根据划分网络的数量来确定子网掩码</p><p>​    2的n次方(n代表借的主机位）</p><p>​    2的n次方大于或等于(要划分多少个子网)</p></li><li><p>确定每个子网容纳的IP地址数量</p><p> ​    2的n次方（n代表剩余的主机位）</p></li><li><p>确定可用的主机数量</p><p> ​    2的n次方减2（n代表剩余的主机位）</p></li><li><p>确定IP地址范围</p></li><li><p>确定网络地址与广播地址</p></li></ol><p>例如：192.168.1.0/24    这个网络要划分出4个子网，请写出4个子网的网络地址、子网掩码以及广播地址以及可容纳主机数。</p><p>192.168.1.00000000/24</p><p>第一步：借两位     2的2次方大于或等于4      </p><p>答：四个子网，需借走主机位两位来充当网络位，子网掩码为255.255.255.192</p><p>第二步：   8-2(借走了两位)=6       2的6次方 =64 </p><p>答：每个子网容纳的IP地址数量为64</p><p>第三部： 2的6次方-2=64-2=62 （减去一个网络地址，减去一个广播地址）</p><p>答：可用的主机数量为：62台主机</p><p>第四步：</p><p>IP地址范围：</p><ul><li>192.168.1.00000000/26–192.168.1.00111111/26  [192.168.1.0/26–192.168.1.63/26]</li><li>192.168.1.01000000/26–192.168.1.01111111/26  [192.168.1.64/26–192.168.1.127/26]</li><li>192.168.1.10000000/26–192.168.1.10111111/26  [192.168.1.128/26–192.168.1.191/26]</li><li>192.168.1.11000000/26–192.168.1.11111111/26  [192.168.1.192/26–192.168.1.255/26]</li></ul><p>第五步：</p><p>网络地址：192.168.1.0/26     192.168.1.64/26     192.168.1.128/26    192.168.1.192/26</p><p>广播地址：192.168.1.63/26   192.168.1.127/26   192.168.1.191/26    192.168.1.255/26</p><p>例如：192.168.1.0/24    这个网络要划分出4个子网，第一个子网要求能容纳100台电脑，第二个子网要求容纳50台电脑，第三个子网要求容纳25台电脑，第四个子网要求容纳20台电脑。请列出四个子网、子网掩码、网络地址、广播地址以及主机地址范围</p><ul><li>192.168.1.00000000/24–192.168.1.01111111/24 [192.168.1.0/24–192.168.1.127/24]</li></ul><p>网络地址：192.168.1.0/24            子网掩码：255.255.255.0      </p><p>广播地址：192.168.1.127/25        主机地址范围：1—126</p><ul><li>192.168.1.10000000/25–192.168.1.10111111/25 [192.168.1.128/25–192.168.1.191/25]</li></ul><p>网络地址：192.168.1.128/25            子网掩码：255.255.255.128     </p><p>广播地址：192.168.1.191/25            主机地址范围：129–190</p><ul><li>192.168.1.11000000/26–192.168.1.11011111/26 [192.168.1.192/26–192.168.1.223/26]</li></ul><p>网络地址：192.168.1.192/26            子网掩码：255.255.255.192    </p><p>广播地址：192.168.1.223/26            主机地址范围：193–222</p><ul><li>192.168.1.11100000/27–192.168.1. 11111111/27 [192.168.1.224/27–192.168.1.225/27]</li></ul><p>网络地址：192.168.1.224            子网掩码：255.255.255.224  </p><p>广播地址：192.168.1.255           主机地址范围：225–254</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote><p>有句俗话叫做师傅领进门，修行靠个人。说到底还得自己去学，只有不断地去做，孰能生巧，自然而然的你就会了子网划分，本篇博文2K左右，例题就占比一大部分，记录下一来是为了正在学习子网划分的小白一种参考，有可能写的不是很好。二来是为了我自生的巩固，只有当你把他写出来了，能讲出来，才证明你已经会了。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
    
      <category term="子网划分" scheme="https://github.com/chineselijie/tags/%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/"/>
    
  </entry>
  
  <entry>
    <title>python实现图书管理系统的借阅</title>
    <link href="https://github.com/chineselijie/2020/03/12/6.python%E5%AE%9E%E7%8E%B0%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%80%9F%E9%98%85/"/>
    <id>https://github.com/chineselijie/2020/03/12/6.python%E5%AE%9E%E7%8E%B0%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%80%9F%E9%98%85/</id>
    <published>2020-03-12T11:40:08.120Z</published>
    <updated>2020-03-11T09:00:47.044Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><ul><li>python实现图书管理系统的借阅</li></ul><h2 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,author,comment,state=<span class="number">0</span>)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.author = author</span><br><span class="line">        self.comment = comment</span><br><span class="line">        self.state = state</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        status = <span class="string">'未借出'</span></span><br><span class="line">        <span class="keyword">if</span> self.state == <span class="number">1</span>:</span><br><span class="line">            status = <span class="string">'已借出'</span></span><br><span class="line">        <span class="keyword">return</span><span class="string">'名称:《%s》\t作者：%s\n推荐语：%s\n状态:%s'</span>%(self.name,self.author,self.comment,status)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookManager</span>:</span></span><br><span class="line">    books = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        book1 = Book(<span class="string">'小王子'</span>,<span class="string">'安托万·德·圣埃克絮佩里'</span>,<span class="string">'所述的飞行员坠机于撒哈拉沙漠的情节明显取材于圣埃克苏佩里的亲身经历。'</span>)</span><br><span class="line">        book2 = Book(<span class="string">'悲惨世界'</span>,<span class="string">'维克多·雨果'</span>,<span class="string">'描绘19世纪初20年间几个法国人物的生活背景，涵盖拿破仑战争和1832年巴黎共和党人起义等政治现象叙述。'</span>)</span><br><span class="line">        book3 = Book(<span class="string">'霍乱时期的爱情'</span>,<span class="string">'加西亚·马尔克斯'</span>,<span class="string">'讲述了一段跨越半个多世纪的爱情故事：男女主人公在二十岁的时候没能结婚，因为他们太年轻了；经过各种人生曲折之后，到了八十岁，他们还是没能结婚，因为他们太老了。'</span>)</span><br><span class="line">        self.books.append(book1)</span><br><span class="line">        self.books.append(book2)</span><br><span class="line">        self.books.append(book3)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">menu</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'欢迎使用贝多芬图书管理系统，周恩来说过：“书籍是人类进步的阶梯！”。\n'</span>) </span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>: </span><br><span class="line">            print(<span class="string">'1.查询所有书籍\n2.添加书籍\n3.借阅书籍\n4.归还书籍\n5.退出系统\n'</span>)</span><br><span class="line">            choice = int(input(<span class="string">'请输入数字选择对应功能：'</span>))</span><br><span class="line">            <span class="keyword">if</span> choice == <span class="number">1</span>:</span><br><span class="line">                self.show_all_book()</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">2</span>:</span><br><span class="line">                self.add_book()</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">3</span>:</span><br><span class="line">                self.lend_book()</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">4</span>:</span><br><span class="line">                self.return_book()</span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="number">5</span>:</span><br><span class="line">                print(<span class="string">'欢迎下次使用，谢谢，祝您阅读愉快！'</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_all_book</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> book <span class="keyword">in</span> self.books:</span><br><span class="line">            print(book)</span><br><span class="line">            print(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_book</span><span class="params">(self)</span>:</span></span><br><span class="line">        new_name = input(<span class="string">'请输入书籍名称：'</span>)</span><br><span class="line">        new_author = input(<span class="string">'请输入作者：'</span>)</span><br><span class="line">        new_comment = input(<span class="string">'请输入推荐语：'</span>)</span><br><span class="line">        new_book = Book(new_name,new_author,new_comment)</span><br><span class="line"></span><br><span class="line">        self.books.append(new_book)</span><br><span class="line">        print(<span class="string">'恭喜！书籍录入成功！\n'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_book</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> book <span class="keyword">in</span> self.books:</span><br><span class="line">            <span class="keyword">if</span> book.name == name:</span><br><span class="line">                <span class="keyword">return</span> book</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lend_book</span><span class="params">(self)</span>:</span></span><br><span class="line">        name = input(<span class="string">'请输入想要借阅书的书名：'</span>)</span><br><span class="line">        res = self.check_book(name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> res != <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> res.state == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">'你来晚了一步，这本书被借走了哟！'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'借阅成功，为期一个月，请按时还书哟！'</span>)</span><br><span class="line">                res.state = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'非常抱歉，本图书馆暂时还未收纳本书！'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">return_book</span><span class="params">(self)</span>:</span></span><br><span class="line">        name = input(<span class="string">'请输入归还书籍的名称：'</span>)</span><br><span class="line">        rem = self.check_book(name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> rem != <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">if</span> rem.state == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">'归还成功，欢迎下次借阅！'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'不需归还，请核实信息'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'这本书暂时没用在系统中！'</span>)</span><br><span class="line">manager = BookManager()</span><br><span class="line">manager.menu()</span><br></pre></td></tr></table></figure><h2 id="实践功能"><a href="#实践功能" class="headerlink" title="实践功能"></a>实践功能</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">欢迎使用贝多芬图书管理系统，周恩来说过：“书籍是人类进步的阶梯！”</span><br><span class="line"></span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：1</span><br><span class="line">名称:《小王子》 作者：安托万·德·圣埃克絮佩里</span><br><span class="line">推荐语：所述的飞行员坠机于撒哈拉沙漠的情节明显取材于圣埃克苏佩里的亲身经历。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《悲惨世界》       作者：维克多·雨果</span><br><span class="line">推荐语：描绘19世纪初20年间几个法国人物的生活背景，涵盖拿破仑战争和1832年巴黎共和党人起义等政治现象叙述。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《霍乱时期的爱情》 作者：加西亚·马尔克斯</span><br><span class="line">推荐语：讲述了一段跨越半个多世纪的爱情故事：男女主人公在二十岁的时候没能结婚，因为他们太年轻了；经过各种人生曲折之后，到了八十岁，他们还是没能结婚，</span><br><span class="line">因为他们太老了。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：2</span><br><span class="line">请输入书籍名称：围城</span><br><span class="line">请输入作者：钱钟书</span><br><span class="line">请输入推荐语：是中国现代文学史上一部风格独特的讽刺小说。被誉为“新儒林外史”。</span><br><span class="line">恭喜！书籍录入成功！</span><br><span class="line"></span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：1</span><br><span class="line">名称:《小王子》 作者：安托万·德·圣埃克絮佩里</span><br><span class="line">推荐语：所述的飞行员坠机于撒哈拉沙漠的情节明显取材于圣埃克苏佩里的亲身经历。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《悲惨世界》       作者：维克多·雨果</span><br><span class="line">推荐语：描绘19世纪初20年间几个法国人物的生活背景，涵盖拿破仑战争和1832年巴黎共和党人起义等政治现象叙述。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《霍乱时期的爱情》 作者：加西亚·马尔克斯</span><br><span class="line">推荐语：讲述了一段跨越半个多世纪的爱情故事：男女主人公在二十岁的时候没能结婚，因为他们太年轻了；经过各种人生曲折之后，到了八十岁，他们还是没能结婚，</span><br><span class="line">因为他们太老了。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《围城》   作者：钱钟书</span><br><span class="line">推荐语：是中国现代文学史上一部风格独特的讽刺小说。被誉为“新儒林外史”。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：3</span><br><span class="line">请输入想要借阅书的书名：小王子</span><br><span class="line">借阅成功，为期一个月，请按时还书哟！</span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：4</span><br><span class="line">请输入归还书籍的名称：shdfash</span><br><span class="line">这本书暂时没用在系统中！</span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：1</span><br><span class="line">名称:《小王子》 作者：安托万·德·圣埃克絮佩里</span><br><span class="line">推荐语：所述的飞行员坠机于撒哈拉沙漠的情节明显取材于圣埃克苏佩里的亲身经历。</span><br><span class="line">状态:已借出</span><br><span class="line"></span><br><span class="line">名称:《悲惨世界》       作者：维克多·雨果</span><br><span class="line">推荐语：描绘19世纪初20年间几个法国人物的生活背景，涵盖拿破仑战争和1832年巴黎共和党人起义等政治现象叙述。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《霍乱时期的爱情》 作者：加西亚·马尔克斯</span><br><span class="line">推荐语：讲述了一段跨越半个多世纪的爱情故事：男女主人公在二十岁的时候没能结婚，因为他们太年轻了；经过各种人生曲折之后，到了八十岁，他们还是没能结婚，</span><br><span class="line">因为他们太老了。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">名称:《围城》   作者：钱钟书</span><br><span class="line">推荐语：是中国现代文学史上一部风格独特的讽刺小说。被誉为“新儒林外史”。</span><br><span class="line">状态:未借出</span><br><span class="line"></span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：4</span><br><span class="line">请输入归还书籍的名称：小王子</span><br><span class="line">归还成功，欢迎下次借阅！</span><br><span class="line">1.查询所有书籍</span><br><span class="line">2.添加书籍</span><br><span class="line">3.借阅书籍</span><br><span class="line">4.归还书籍</span><br><span class="line">5.退出系统</span><br><span class="line"></span><br><span class="line">请输入数字选择对应功能：5</span><br><span class="line">欢迎下次使用，谢谢，祝您阅读愉快！</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python内置函数</title>
    <link href="https://github.com/chineselijie/2020/03/12/5.python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/"/>
    <id>https://github.com/chineselijie/2020/03/12/5.python%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/</id>
    <published>2020-03-12T11:40:08.109Z</published>
    <updated>2019-09-23T14:05:22.949Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="数学运算函数："><a href="#数学运算函数：" class="headerlink" title="数学运算函数："></a>数学运算函数：</h2><p><code>abs()</code>   返回数字的绝对值<br><code>divmod()</code>    计算两个数的商和余数，用元组返回<br><code>pow()</code>   返回 xy（x的y次方） 的值<br><code>sum()</code>   求和计算<br><code>bin()</code>   返回一个整数 int 或者长整数 long int 的二进制表示<br><code>oct()</code>   将一个整数转换成8进制字符串<br><code>round()</code> 返回浮点数x的四舍五入值<br><code>long()</code>  将数字或字符串转换为一个长整型<br><code>hex()</code>   将10进制整数转换成16进制整数</p><h2 id="类型转换函数："><a href="#类型转换函数：" class="headerlink" title="类型转换函数："></a>类型转换函数：</h2><p><code>str()</code>   函数将对象转化为String的形式<br><code>int()</code>   函数用于将一个字符串会数字转换为整型<br><code>tuple()</code> 将列表转换为元组<br><code>bool()</code>  参数转换为布尔类型，如果没有参数，返回False<br><code>float()</code> 将整数和字符串转换成浮点数<br><code>list()</code>  将元组转换为列表</p><h2 id="序列操作函数："><a href="#序列操作函数：" class="headerlink" title="序列操作函数："></a>序列操作函数：</h2><p><code>min()</code>         返回给定参数的最小值，参数可以为序列<br><code>sorte()</code>     对所有可迭代的对象进行排序操作<br><code>len()</code>         返回对象（字符、列表、元组等）长度或项目个数<br><code>filter()</code>     用于过滤序列，过滤掉不符合条件的元素，返回由符合条件元素组成的新列表<br><code>set()</code>         创建一个无序不重复元素集，可进行关系测试，删除重复数据，还可以计算交集、差集、并集等。<br><code>zip()</code>         用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个元组，然后返回由这些元组组成的列表。 如果各个迭代器的元素个数不一致，则返回列表长度与最短的对象相同，利用<code>*</code>号操作符，可以将元组解压为列表。<br><code>reversed()</code>     用于反向排序列表中元素<br><code>enumerate()</code>     将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在<code>for</code>循环当中</p><h2 id="输入输出函数："><a href="#输入输出函数：" class="headerlink" title="输入输出函数："></a>输入输出函数：</h2><p><code>input()</code>     用来获取控制台输入，输入的值必须是一个合法的python表达式<br><code>print()</code>     用于打印输出<br><code>open()</code>     打开一个文件，创建一个<code>file</code>对象<br><code>file()</code>     用于创建一个<code>file</code>对象，它有一个别名叫<code>open()</code><br><code>raw_input()</code>     接收控制台输入的内容，可接收所有的类型     </p><h2 id="创建函数："><a href="#创建函数：" class="headerlink" title="创建函数："></a>创建函数：</h2><p><code>iter()</code>        用来生成迭代器<br><code>range()</code>        创建一个整数列表，一般用在<code>for</code>循环中。<br><code>dict()</code>        用于创建一个字典<br><code>exec()</code>        执行储存在字符串或文件中的Python语句，相比于<code>eval</code>，<code>exec</code>可以执行更复杂的Python代码<br><code>bytearray()</code>    返回一个新字节数组。这个数组里的元素是可变的，并且每个元素的值范围:<code>0&lt;=x&lt;256</code><br><code>complex()</code>        创建一个值为<code>real+imag*j</code>的复数或者转化一个字符串或数为复数,如果第一个参数为字符串，则不需要指定第二个参数<br><code>xrange()</code>        用法与<code>range</code>完全相同，所不同的是生成的不是一个数组，而是一个生成器。</p><h2 id="获取函数："><a href="#获取函数：" class="headerlink" title="获取函数："></a>获取函数：</h2><p><code>id()</code>    用于获取对象的内存地址<br><code>getattr()</code>   返回一个对象属性值<br><code>help()</code>  用于查看函数或模块用途的详细说明<br><code>next()</code>  返回迭代器的下一个项目<br><code>memoryview()</code>    返回给定参数的内存查看对象(Momory view)<br><code>hash()</code>  用于获取取一个对象（字符串或者数值等）的哈希值<br><code>vars()</code>  返回对象object的属性和属性值的字典对象<br><code>globals()</code>   以字典类型返回当前位置的全部全局变量<br><code>max()</code>   返回给定参数的最大值，参数可以为序列<br><code>property()</code>  在新式类中返回属性值<br><code>ord()</code>   返回一个字符对应的ASCII或者Unicode值<br><code>staticmethod()</code>  返回函数的静态方法<br><code>frozenset()</code> 返回一个不可变的集合，不能再添加或删除任何元素<br><code>locals()</code>    以字典类型返回当前位置的全部局部变量<br><code>unichr()</code>    返回<code>unicode</code>字符<br><code>map()</code>   根据提供的函数对指定序列做映射。 第一个参数<code>function</code>以参数序列中的每一个元素调用<code>function</code>函数，返回包含每次<code>function</code>函数返回值的新列表<br><code>dir()</code>   函数不带参数时，返回当前范围内的变量、方法和定义的类型列表；带参数时，返回参数的属性、方法列表。如果参数包含方法<code>__dir__()</code>，该方法将被调用。如果参数不包含<code>__dir__()</code>，该方法将最大限度地收集参数信息</p><h2 id="判断函数："><a href="#判断函数：" class="headerlink" title="判断函数："></a>判断函数：</h2><p><code>issubclass()</code>    判断参数<code>class</code>是否是类型参数<code>classinfo</code>的子类<br><code>hasattr()</code>   用于判断对象是否包含对应的属性。<br><code>isinstance()</code>    判断一个对象是否是一个已知的类型，类似<code>type()</code><br><code>any()</code>   用于判断给定的可迭代参数<code>iterable</code>是否全部为空对象，如果都为空、0、false，则返回 False，如果不都为空、0、false，则返回True<br><code>all()</code>   函数用于判断给定的可迭代参数<code>iterable</code>中的所有元素是否不为 0、’’、False 或者<code>iterable</code>为空，如果是返回 True，否则返回 False<br><code>callable()</code>  检查一个对象是否是可调用的。如果返回True，<code>object</code>仍然可能调用失败；但如果返回False，调用对象<code>ojbect</code>绝对不会成功<br><code>cmp()</code>     用于比较2个对象，如果<code>x &lt; y</code>返回-1, 如果<code>x == y</code>返回 0, 如果<code>x &gt; y</code>返回 1</p><h2 id="操作函数："><a href="#操作函数：" class="headerlink" title="操作函数："></a>操作函数：</h2><p><code>delattr()</code>     用于删除属性。<br><code>setattr()</code>     对应函数<code>getatt()</code>，用于设置属性值，该属性必须存在。<br><code>slice()</code>     切片分割对象，用在切片操作函数里的参数传递。<br><code>repr()</code>     将对象转化为供解释器读取的形式。<br><code>compile()</code>     将一个字符串编译为字节代码。<br><code>eval()</code>     执行一个字符串表达式，并返回表达式的值<br><code>execfile()</code>     用来执行一个文件。<br><code>super()</code>     调用下一个父类(超类)并返回该父类实例的方法<br><code>reload()</code>     重新载入之前载入的模块<br><code>type()</code>     如果你只有第一个参数则返回对象的类型，三个参数返回新的类型对象。<br><code>format()</code>     格式化字符串的函数<code>str.format()</code>，它增强了字符串格式化的功能。<br><code>basestring()</code>     是<code>str</code>和<code>unicode</code>的超类（父类），也是抽象类，因此不能被调用和实例化，但可以被用来判断一个对象是否为<code>str</code>或者<code>unicode</code>的实例<br><code>classmethod()</code>     <code>classmethod</code>修饰符对应的函数不需要实例化，不需要<code>self</code>参数，但第一个参数需要是表示自身类的<code>cls</code>参数，可以来调用类的属性，类的方法，实例化对象等。<br><code>chr()</code>     用一个范围在<code>range (256)</code>内的就是(0～255)整数作参数，返回一个对应的字符<br><code>__import__()</code>     动态加载类和函数。 如果一个模块经常变化就可以使用 <code>__import__()</code> 来动态载入。<br><code>reduce()</code>     对参数序列中元素进行累积。 函数将一个数据集合（链表，元组等）中的所有数据进行下列操作：用传给<code>reduce</code>中的函数 <code>function</code>（有两个参数）先对集合中的第 1、2 个元素进行操作，得到的结果再与第三个数据用 <code>function</code> 函数运算，最后得到一个结果。</p><h2 id="函数的详细介绍"><a href="#函数的详细介绍" class="headerlink" title="函数的详细介绍:"></a>函数的详细介绍:</h2><h3 id="函数名：abs"><a href="#函数名：abs" class="headerlink" title="函数名：abs()"></a>函数名：abs()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">abs(x)</span><br><span class="line">参数：数值表达式</span><br><span class="line">返回值：函数返回x（数字）的绝对值。</span><br><span class="line">代码示例：</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"abs(-45) : "</span>, abs(<span class="number">-45</span>))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"abs(100.12) : "</span>, abs(<span class="number">100.12</span>))</span><br></pre></td></tr></table></figure><h3 id="函数名：divmod"><a href="#函数名：divmod" class="headerlink" title="函数名：divmod()"></a>函数名：divmod()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">divmod(a, b)</span><br><span class="line">参数：a,b均为数值</span><br><span class="line">返回值：一个包含商和余数的元组 例如（<span class="number">3</span>，<span class="number">1</span>），其中<span class="number">3</span>是商，<span class="number">1</span>是余数</span><br><span class="line">代码示例：</span><br><span class="line">divmod(<span class="number">7</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：pow"><a href="#函数名：pow" class="headerlink" title="函数名：pow()"></a>函数名：pow()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">pow(x, y)</span><br><span class="line">参数：x,y均为数值</span><br><span class="line">返回值：返回结果值，为数值类型</span><br><span class="line">代码示例：</span><br><span class="line">pow(<span class="number">7</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：sum"><a href="#函数名：sum" class="headerlink" title="函数名：sum()"></a>函数名：sum()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">sum(a,b)</span><br><span class="line">参数：a为元素为数值的可迭代的对象， b为一个数值类型的参数，b可不写，不写时默认为<span class="number">0</span></span><br><span class="line">返回值：返回值为迭代对象相加的和加上第二个参数，为数值类型</span><br><span class="line">代码示例：</span><br><span class="line">a = sum((<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>),<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：bin"><a href="#函数名：bin" class="headerlink" title="函数名：bin()"></a>函数名：bin()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">bin(x)</span><br><span class="line">参数：x为数值类型</span><br><span class="line">返回值：返回值为二进制的表示，是字符串类型</span><br><span class="line">代码示例：</span><br><span class="line">bin(<span class="number">12</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：oct"><a href="#函数名：oct" class="headerlink" title="函数名：oct()"></a>函数名：oct()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">oct(x)</span><br><span class="line">参数：x为数值类型</span><br><span class="line">返回值：返回值为八进制表示，是字符串类型</span><br><span class="line">代码示例：</span><br><span class="line">oct(<span class="number">11</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：round"><a href="#函数名：round" class="headerlink" title="函数名：round()"></a>函数名：round()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">round(m,n)</span><br><span class="line">参数：m为要四舍五入的值，为数值类型，n是保留的位数，为int类型</span><br><span class="line">返回值：返回值为数值类型</span><br><span class="line">代码示例：</span><br><span class="line">round(<span class="number">10.265</span> ,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：long"><a href="#函数名：long" class="headerlink" title="函数名：long()"></a>函数名：long()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">long(x, y)</span><br><span class="line">参数：x为字符串或数值类型，b为进制数，默认<span class="number">10</span></span><br><span class="line">返回值：结果为数值类型</span><br><span class="line">代码示例：</span><br><span class="line">long(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：hex"><a href="#函数名：hex" class="headerlink" title="函数名：hex()"></a>函数名：hex()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">hex(x)</span><br><span class="line">参数：x为十进制数值</span><br><span class="line">返回值：十六进制的字符串</span><br><span class="line">代码示例：</span><br><span class="line">hex(<span class="number">11</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：str"><a href="#函数名：str" class="headerlink" title="函数名：str()"></a>函数名：str()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">str(x)</span><br><span class="line">参数：x为对象</span><br><span class="line">返回值：返回字符串</span><br><span class="line">代码示例：</span><br><span class="line">str(object)</span><br></pre></td></tr></table></figure><h3 id="函数名：int"><a href="#函数名：int" class="headerlink" title="函数名：int()"></a>函数名：int()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">int(x,y)</span><br><span class="line">参数：x为字符串类型</span><br><span class="line">返回值：数值类型</span><br><span class="line">代码示例：</span><br><span class="line">int(<span class="string">"111111"</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：tuple"><a href="#函数名：tuple" class="headerlink" title="函数名：tuple()"></a>函数名：tuple()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">tuple( seq )</span><br><span class="line">参数：seq为列表</span><br><span class="line">返回值：返回元组</span><br><span class="line">代码示例：</span><br><span class="line">tuple([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure><h3 id="函数名：bool"><a href="#函数名：bool" class="headerlink" title="函数名：bool()"></a>函数名：bool()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">bool(x)</span><br><span class="line">参数：x为要转换的参数，可以是数值或者string</span><br><span class="line">返回值：返回值为boolean类型，当参数为<span class="number">0</span>或者空或者<span class="string">""</span>的时候，返回false</span><br><span class="line">代码示例：</span><br><span class="line">bool(<span class="string">""</span>)</span><br><span class="line">bool(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：float"><a href="#函数名：float" class="headerlink" title="函数名：float()"></a>函数名：float()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">float(x)</span><br><span class="line">参数：x为数值或者String</span><br><span class="line">返回值：返回值为浮点数</span><br><span class="line">代码示例：</span><br><span class="line">float(<span class="string">"1"</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：list"><a href="#函数名：list" class="headerlink" title="函数名：list()"></a>函数名：list()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">list( seq )</span><br><span class="line">参数：seq为元组</span><br><span class="line">返回值：返回数组</span><br><span class="line">代码示例：</span><br><span class="line">list((<span class="string">"12"</span>,<span class="string">"456"</span>,<span class="string">"789"</span>))</span><br></pre></td></tr></table></figure><h3 id="函数名：min"><a href="#函数名：min" class="headerlink" title="函数名：min()"></a>函数名：min()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">min( x, y, z, .... )</span><br><span class="line">参数：参数为序列或者集合</span><br><span class="line">返回值：返回最小值</span><br><span class="line">代码示例：</span><br><span class="line">min((<span class="string">"12"</span>,<span class="string">"456"</span>,<span class="string">"789"</span>))</span><br></pre></td></tr></table></figure><h3 id="函数名：sorted"><a href="#函数名：sorted" class="headerlink" title="函数名：sorted()"></a>函数名：sorted()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">sorted(iterable, cmp, key, reverse)</span><br><span class="line">参数：iterable为要排序的序列，cmp为比较函数，key为用来进行比较的元素，reverse为升序或者降序，默认为false降序</span><br><span class="line">返回值：返回排好序的序列</span><br><span class="line">代码示例：</span><br><span class="line"><span class="comment">#对元组进行排序</span></span><br><span class="line">sorted((<span class="number">12</span>,<span class="number">123</span>,<span class="number">56</span>),reverse = <span class="literal">True</span>)</span><br><span class="line"><span class="comment">#利用cmp函数排序</span></span><br><span class="line">sorted([(<span class="string">'b'</span>,<span class="number">2</span>),(<span class="string">'a'</span>,<span class="number">1</span>),(<span class="string">'c'</span>,<span class="number">3</span>),(<span class="string">'d'</span>,<span class="number">4</span>)], cmp=<span class="keyword">lambda</span> x,y:cmp(x[<span class="number">1</span>],y[<span class="number">1</span>]))</span><br><span class="line"><span class="comment">#利用key排序</span></span><br><span class="line">sorted([(<span class="string">'b'</span>,<span class="number">2</span>),(<span class="string">'a'</span>,<span class="number">1</span>),(<span class="string">'c'</span>,<span class="number">3</span>),(<span class="string">'d'</span>,<span class="number">4</span>)], key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><h3 id="函数名：len"><a href="#函数名：len" class="headerlink" title="函数名：len()"></a>函数名：len()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">len( s )</span><br><span class="line">参数：s为字符、列表元组等</span><br><span class="line">返回值：返回数值类型</span><br><span class="line">代码示例：</span><br><span class="line">len(<span class="string">"xtyz"</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：filter"><a href="#函数名：filter" class="headerlink" title="函数名：filter()"></a>函数名：filter()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">filter(function, iterable)</span><br><span class="line">参数：第一个参数为函数，函数返回布尔类型， 第二个参数为可迭代对象</span><br><span class="line">返回值：返回过滤后的集合</span><br><span class="line">代码示例：</span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">tt</span> <span class="params">(parm)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> parm &lt; <span class="number">7</span></span><br><span class="line"></span><br><span class="line">a = filter(tt, [<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>])</span><br><span class="line"> </span><br><span class="line">print(list(a))</span><br></pre></td></tr></table></figure><h3 id="函数名：set"><a href="#函数名：set" class="headerlink" title="函数名：set()"></a>函数名：set()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">set(x)</span><br><span class="line">参数：x为可迭代对象</span><br><span class="line">返回值：返回一个不重复的元素集合</span><br><span class="line">代码示例：</span><br><span class="line">a = set(<span class="string">"9876554321"</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#可以用来计算交集，并集，差集等</span></span><br><span class="line">x = set(<span class="string">"987654"</span>)</span><br><span class="line">y = set(<span class="string">"654321"</span>)</span><br><span class="line"></span><br><span class="line">print(x&amp;y)<span class="comment">#交集</span></span><br><span class="line">print(x|y)<span class="comment">#并集</span></span><br><span class="line">print(x-y)<span class="comment">#差集</span></span><br></pre></td></tr></table></figure><h3 id="函数名：zip"><a href="#函数名：zip" class="headerlink" title="函数名：zip()"></a>函数名：zip()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">zip(a,b,c,d.....)</span><br><span class="line">参数：参数为多个可迭代对象</span><br><span class="line">返回值：返回打包好的元组集合,元素合数与长度最短的迭代对象相同</span><br><span class="line">代码示例：</span><br><span class="line">x = <span class="string">"987654"</span></span><br><span class="line">y = <span class="string">"654321"</span></span><br><span class="line">print(list(zip(x,y)))</span><br><span class="line"></span><br><span class="line">x = [<span class="number">1</span>,<span class="number">2.3</span>]</span><br><span class="line">y = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">print(list(zip(x,y)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#解压</span></span><br><span class="line">z = zip(x,y)</span><br><span class="line">print(zip(*z))</span><br></pre></td></tr></table></figure><h3 id="函数名：reverse"><a href="#函数名：reverse" class="headerlink" title="函数名：reverse()"></a>函数名：reverse()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">list.reverse()</span><br><span class="line">参数：没有参数</span><br><span class="line">返回值：没有返回值</span><br><span class="line">代码示例：</span><br><span class="line">x = (<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">x.reverse()</span><br><span class="line">print(x)<span class="comment">#注意，是反向排列，不是按照大小排序</span></span><br></pre></td></tr></table></figure><h3 id="函数名：enumerate"><a href="#函数名：enumerate" class="headerlink" title="函数名：enumerate()"></a>函数名：enumerate()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">enumerate(sequence)</span><br><span class="line">参数：参数为可迭代对象</span><br><span class="line">返回值：返回 enumerate(枚举) 对象</span><br><span class="line">代码示例：</span><br><span class="line">seasons = [<span class="string">'Spring'</span>, <span class="string">'Summer'</span>, <span class="string">'Fall'</span>, <span class="string">'Winter'</span>]</span><br><span class="line">print(list(enumerate(seasons)))</span><br></pre></td></tr></table></figure><h3 id="函数名：input"><a href="#函数名：input" class="headerlink" title="函数名：input()"></a>函数名：input()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">input()</span><br><span class="line">参数：参数无</span><br><span class="line">返回值：返回输入值的类型（<span class="number">3</span> .x里 input() 默认接收到的是str 类型）</span><br><span class="line">代码示例：</span><br><span class="line">a = input(<span class="string">"输入"</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><h3 id="函数名：print"><a href="#函数名：print" class="headerlink" title="函数名：print()"></a>函数名：print()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">print(*objects, sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=sys.stdout)</span><br><span class="line">参数：objects 为输出对象，可为多个，用，分隔； sep为间隔符，默认为<span class="string">" "</span>; end为结尾的符号。默认是换行符<span class="string">"\n"</span>;file为要写入的文件对象</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line">print(<span class="string">"111"</span>,<span class="string">"222"</span>,<span class="string">"333"</span>,sep =<span class="string">"==="</span>,end = <span class="string">"////////"</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：open"><a href="#函数名：open" class="headerlink" title="函数名：open()"></a>函数名：open()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">open(name, mode, buffering)</span><br><span class="line">参数：name为要访问的文件或者创建的文件的字符串，可以包含路径，model为打开文件的模式，buffering : 缓冲区大小，设为<span class="number">0</span>不会有寄存，设为<span class="number">1</span>表示寄存行，大于<span class="number">1</span>的整数，表示寄存去缓冲区的大小，</span><br><span class="line"></span><br><span class="line">设置为负数，则为系统默认大小,文件打开模式如下</span><br><span class="line">r    <span class="comment">#以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">rb   <span class="comment">#以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">r+   <span class="comment">#打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">rb+  <span class="comment">#以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">w    <span class="comment">#打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb   <span class="comment">#以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">w+   <span class="comment">#打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb+  <span class="comment">#以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">a    <span class="comment">#打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">ab   <span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">a+   <span class="comment">#打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</span></span><br><span class="line">ab+  <span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</span></span><br><span class="line"></span><br><span class="line">返回值：file对象</span><br><span class="line"></span><br><span class="line">代码示例：</span><br><span class="line">f = open(<span class="string">'test.txt'</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：file"><a href="#函数名：file" class="headerlink" title="函数名：file()"></a>函数名：file()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：同open()</span><br><span class="line">参数：同open()</span><br><span class="line">返回值：同open()</span><br><span class="line">代码示例：</span><br><span class="line">file(<span class="string">'test.txt'</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：raw-input"><a href="#函数名：raw-input" class="headerlink" title="函数名：raw_input()"></a>函数名：raw_input()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">raw_input(x)</span><br><span class="line">参数：x为String，可不写，会在控制台输出x内容</span><br><span class="line">返回值：返回输入的内容</span><br><span class="line">代码示例：</span><br><span class="line">raw_input_A = raw_input(<span class="string">"raw_input:"</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：iter"><a href="#函数名：iter" class="headerlink" title="函数名：iter()"></a>函数名：iter()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">iter(x)</span><br><span class="line">参数：x为支持迭代的集合对象</span><br><span class="line">返回值：迭代器对象</span><br><span class="line">代码示例：</span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> iter(lst):</span><br><span class="line">     print(i)</span><br></pre></td></tr></table></figure><h3 id="函数名：range"><a href="#函数名：range" class="headerlink" title="函数名：range()"></a>函数名：range()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">range(start, stop, step)</span><br><span class="line">参数：start为计数开始点，默认为<span class="number">0</span>；stop为计数结束点，但不包括stop；step，步长，默认为<span class="number">1</span></span><br><span class="line">返回值：列表对象</span><br><span class="line">代码示例：</span><br><span class="line">range(<span class="number">10</span>)</span><br><span class="line">range(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">range(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：dict"><a href="#函数名：dict" class="headerlink" title="函数名：dict()"></a>函数名：dict()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">参数：</span><br><span class="line">返回值：字典对象</span><br><span class="line">代码示例：</span><br><span class="line">a = dict()                        <span class="comment"># 创建空字典</span></span><br><span class="line">print(a)</span><br><span class="line">a =  dict(a=<span class="string">'a'</span>, b=<span class="string">'b'</span>, t=<span class="string">'t'</span>)     <span class="comment"># 传入关键字</span></span><br><span class="line">print(a)</span><br><span class="line">a =  dict(zip([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))   <span class="comment"># 映射函数方式来构造字典</span></span><br><span class="line">print(a)</span><br><span class="line">a =  dict([(<span class="string">'one'</span>, <span class="number">1</span>), (<span class="string">'two'</span>, <span class="number">2</span>), (<span class="string">'three'</span>, <span class="number">3</span>)])    <span class="comment"># 可迭代对象方式来构造字典</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><h3 id="函数名：exec"><a href="#函数名：exec" class="headerlink" title="函数名：exec()"></a>函数名：exec()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line"><span class="keyword">exec</span> x</span><br><span class="line">参数：x为可执行的字符串代码</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line"><span class="keyword">exec</span> <span class="string">"print 'runoob.com'"</span></span><br></pre></td></tr></table></figure><h3 id="函数名：bytearray"><a href="#函数名：bytearray" class="headerlink" title="函数名：bytearray()"></a>函数名：bytearray()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">bytearray(source, encoding, errors)</span><br><span class="line">参数：source 可以是整数、字符串、可迭代对象</span><br><span class="line">返回值：字节数数组</span><br><span class="line">代码示例：</span><br><span class="line">bytearray([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure><h3 id="函数名：complex"><a href="#函数名：complex" class="headerlink" title="函数名：complex()"></a>函数名：complex()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">complex(real, imag)</span><br><span class="line">参数：real 可以是 int, long, float或字符串，image可以是 int，long，float</span><br><span class="line">返回值：返回一个复数</span><br><span class="line">代码示例：</span><br><span class="line">complex(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：xrange"><a href="#函数名：xrange" class="headerlink" title="函数名：xrange()"></a>函数名：xrange()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">xrange(start, stop, step)</span><br><span class="line">参数：start开始数，stop结束数，step步长</span><br><span class="line">返回值：返回生成器</span><br><span class="line">代码示例：</span><br><span class="line">xrange(<span class="number">8</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：id"><a href="#函数名：id" class="headerlink" title="函数名：id()"></a>函数名：id()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">id(object)</span><br><span class="line">参数：object为对象</span><br><span class="line">返回值：对象的内存地址</span><br><span class="line">代码示例：</span><br><span class="line">a = <span class="string">'test'</span></span><br><span class="line">print(id(a))</span><br></pre></td></tr></table></figure><h3 id="函数名：getattr"><a href="#函数名：getattr" class="headerlink" title="函数名：getattr()"></a>函数名：getattr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">getattr(object, name, default)</span><br><span class="line">参数：object为对象，那么为属性名，default为默认值，如果属性不存在，返回默认值</span><br><span class="line">返回值：属性值</span><br><span class="line">代码示例：</span><br><span class="line">getattr(a, <span class="string">'bar2'</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：help"><a href="#函数名：help" class="headerlink" title="函数名：help()"></a>函数名：help()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">help(x)</span><br><span class="line">参数：x为对象</span><br><span class="line">返回值：返回对象的帮助信息</span><br><span class="line">代码示例：</span><br><span class="line">help(<span class="string">'sys'</span>)             <span class="comment"># 查看 sys 模块的帮助</span></span><br></pre></td></tr></table></figure><h3 id="函数名：next"><a href="#函数名：next" class="headerlink" title="函数名：next()"></a>函数名：next()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">next(a, default)</span><br><span class="line">参数：a为可迭代对象，default为没有下一个元素时返回的值</span><br><span class="line">返回值：可迭代对象的内容</span><br><span class="line">代码示例：</span><br><span class="line"><span class="comment"># 首先获得Iterator对象:</span></span><br><span class="line">it = iter([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="comment"># 循环:</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 获得下一个值:</span></span><br><span class="line">        x = next(it)</span><br><span class="line">        print(x)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        <span class="comment"># 遇到StopIteration就退出循环</span></span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h3 id="函数名：memoryview"><a href="#函数名：memoryview" class="headerlink" title="函数名：memoryview()"></a>函数名：memoryview()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">memoryview(obj)</span><br><span class="line">参数：obj为对象</span><br><span class="line">返回值：返回元组列表</span><br><span class="line">代码示例：</span><br><span class="line">a = memoryview(<span class="string">b'babcefg'</span>)</span><br><span class="line">print(a[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><h3 id="函数名：hash"><a href="#函数名：hash" class="headerlink" title="函数名：hash()"></a>函数名：hash()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">hash(x)</span><br><span class="line">参数：x 为对象</span><br><span class="line">返回值: 返回对象的hash值</span><br><span class="line">代码示例：</span><br><span class="line">a = hash(<span class="string">'test'</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><h3 id="函数名：vars"><a href="#函数名：vars" class="headerlink" title="函数名：vars()"></a>函数名：vars()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">vars(obj)</span><br><span class="line">参数：obj为对象，如果没有的话，返回当前调用位置的属性和属性值</span><br><span class="line">返回值：返回对象属性和属性值的字典对象</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Runoob</span>:</span></span><br><span class="line">     a = <span class="number">1</span></span><br><span class="line">print(vars(Runoob))</span><br><span class="line">代码示例：</span><br></pre></td></tr></table></figure><h3 id="函数名：globals"><a href="#函数名：globals" class="headerlink" title="函数名：globals()"></a>函数名：globals()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">globals()</span><br><span class="line">参数：无</span><br><span class="line">返回值：当前位置的全局变量</span><br><span class="line">代码示例：</span><br><span class="line">print(globals())</span><br></pre></td></tr></table></figure><h3 id="函数名：max"><a href="#函数名：max" class="headerlink" title="函数名：max()"></a>函数名：max()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法</span><br><span class="line">max(a,b,x.....)</span><br><span class="line">参数：数值表达式</span><br><span class="line">返回值：返回参数最大值</span><br><span class="line">代码示例：</span><br><span class="line">print(max(<span class="number">80</span>, <span class="number">100</span>, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h3 id="函数名：property"><a href="#函数名：property" class="headerlink" title="函数名：property()"></a>函数名：property()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">property</span><span class="params">(fget, fset, fdel, doc)</span></span></span><br><span class="line"><span class="class">参数：</span></span><br><span class="line"><span class="class"><span class="title">fget</span> -- 获取属性值的函数</span></span><br><span class="line"><span class="class"><span class="title">fset</span> -- 设置属性值的函数</span></span><br><span class="line"><span class="class"><span class="title">fdel</span> -- 删除属性值函数</span></span><br><span class="line"><span class="class"><span class="title">doc</span> -- 属性描述信息</span></span><br><span class="line"><span class="class">返回值：返回类属性</span></span><br><span class="line"><span class="class">代码示例：</span></span><br></pre></td></tr></table></figure><h3 id="函数名：ord"><a href="#函数名：ord" class="headerlink" title="函数名：ord()"></a>函数名：ord()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">ord(c)</span><br><span class="line">参数：c为字符</span><br><span class="line">返回值：对应的十进制数</span><br><span class="line">代码示例：</span><br><span class="line">ord(<span class="string">'a'</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：abs-1"><a href="#函数名：abs-1" class="headerlink" title="函数名：abs()"></a>函数名：abs()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">abs( x )</span><br><span class="line">参数：x为数值表达式</span><br><span class="line">返回值：x的绝对值</span><br><span class="line">代码示例：</span><br><span class="line">abs( <span class="number">-8</span> )</span><br></pre></td></tr></table></figure><h3 id="函数名：staticmethod"><a href="#函数名：staticmethod" class="headerlink" title="函数名：staticmethod()"></a>函数名：staticmethod()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">staticmethod(function)</span><br><span class="line">参数：无</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">'runoob'</span>);</span><br><span class="line"> </span><br><span class="line">C.f();          <span class="comment"># 静态方法无需实例化</span></span><br><span class="line">cobj = C()</span><br><span class="line">cobj.f()        <span class="comment"># 也可以实例化后调用</span></span><br></pre></td></tr></table></figure><h3 id="函数名：frozenset"><a href="#函数名：frozenset" class="headerlink" title="函数名：frozenset()"></a>函数名：frozenset()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">frozenset([iterable])</span><br><span class="line">参数：可迭代对象</span><br><span class="line">返回值：一个冻结的集合，不能修改或者删除</span><br><span class="line">代码示例：</span><br><span class="line">frozenset(range(<span class="number">10</span>))</span><br></pre></td></tr></table></figure><h3 id="函数名：locals"><a href="#函数名：locals" class="headerlink" title="函数名：locals()"></a>函数名：locals()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">locals()</span><br><span class="line">参数：无</span><br><span class="line">返回值：返回当前位置的所有局部变量</span><br><span class="line">代码示例：</span><br><span class="line">locals()</span><br></pre></td></tr></table></figure><h3 id="函数名：unichr"><a href="#函数名：unichr" class="headerlink" title="函数名：unichr()"></a>函数名：unichr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">unichr(i)</span><br><span class="line">参数：十进制或者十六进制的数字</span><br><span class="line">返回值：unicode 的字符。</span><br><span class="line">代码示例：</span><br><span class="line">unichr(<span class="number">97</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：map"><a href="#函数名：map" class="headerlink" title="函数名：map()"></a>函数名：map()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">map(function, iterable, ...)</span><br><span class="line">参数：</span><br><span class="line">function -- 函数，有两个参数</span><br><span class="line">iterable -- 一个或多个序列</span><br><span class="line">返回值：返回列表</span><br><span class="line">代码示例：</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(x)</span> :</span>            <span class="comment"># 计算平方数</span></span><br><span class="line">     <span class="keyword">return</span> x ** <span class="number">2</span></span><br><span class="line">a = map(square, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure><h3 id="函数名：dir"><a href="#函数名：dir" class="headerlink" title="函数名：dir()"></a>函数名：dir()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">dir([object])</span><br><span class="line">参数：对象</span><br><span class="line">返回值：返回属性列表</span><br><span class="line">代码示例：</span><br></pre></td></tr></table></figure><h3 id="函数名：issubclass"><a href="#函数名：issubclass" class="headerlink" title="函数名：issubclass()"></a>函数名：issubclass()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">issubclass(class, classinfo)</span><br><span class="line">参数：</span><br><span class="line"><span class="class"><span class="keyword">class</span>--<span class="title">class</span>类， <span class="title">classinfo</span>---<span class="title">classifo</span>类</span></span><br><span class="line"><span class="class">返回值：如果 <span class="title">class</span> 是 <span class="title">classinfo</span> 的子类返回 <span class="title">True</span>，否则返回 <span class="title">False</span>。</span></span><br><span class="line"><span class="class">代码示例：</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>  </span><br><span class="line">print(issubclass(B,A))    <span class="comment"># 返回 True</span></span><br></pre></td></tr></table></figure><h3 id="函数名：hasattr"><a href="#函数名：hasattr" class="headerlink" title="函数名：hasattr()"></a>函数名：hasattr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">hasattr(object, name)</span><br><span class="line">参数：object为对象，那么为属性名</span><br><span class="line">返回值：如果对象内有这个属性，返回true，否则false、</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span>:</span></span><br><span class="line">    x = <span class="number">10</span></span><br><span class="line">    y = <span class="number">-5</span></span><br><span class="line">    z = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">point1 = Coordinate() </span><br><span class="line">print(hasattr(point1, <span class="string">'x'</span>))</span><br><span class="line">print(hasattr(point1, <span class="string">'y'</span>))</span><br><span class="line">print(hasattr(point1, <span class="string">'z'</span>))</span><br><span class="line">print(hasattr(point1, <span class="string">'no'</span>))  <span class="comment"># 没有该属性</span></span><br></pre></td></tr></table></figure><h3 id="函数名：isinstance"><a href="#函数名：isinstance" class="headerlink" title="函数名：isinstance()"></a>函数名：isinstance()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">isinstance(object, classinfo)</span><br><span class="line">参数：</span><br><span class="line">object -- 实例对象。</span><br><span class="line">classinfo -- 可以是直接或间接类名、基本类型或者有它们</span><br><span class="line">返回值：如果对象的类型与参数二的类型（classinfo）相同则返回 <span class="literal">True</span>，否则返回 <span class="literal">False</span>。。</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line">isinstance(A(), A)    <span class="comment"># returns True</span></span><br><span class="line">type(A()) == A        <span class="comment"># returns True</span></span><br><span class="line">isinstance(B(), A)    <span class="comment"># returns True</span></span><br><span class="line">type(B()) == A        <span class="comment"># returns False</span></span><br></pre></td></tr></table></figure><h3 id="函数名：any"><a href="#函数名：any" class="headerlink" title="函数名：any()"></a>函数名：any()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">any(iterable)</span><br><span class="line">参数：元组或者列表</span><br><span class="line">返回值：如果都为空、<span class="number">0</span>、false，则返回false，如果不都为空、<span class="number">0</span>、false，则返回true。</span><br><span class="line">代码示例：</span><br><span class="line">any([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])  <span class="comment"># 列表list，元素都不为空或0</span></span><br></pre></td></tr></table></figure><h3 id="函数名：all"><a href="#函数名：all" class="headerlink" title="函数名：all()"></a>函数名：all()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">all(iterable)</span><br><span class="line">参数：元组或列表</span><br><span class="line">返回值：如果iterable的所有元素不为<span class="number">0</span>、<span class="string">''</span>、<span class="literal">False</span>或者iterable为空，all(iterable)返回<span class="literal">True</span>，否则返回<span class="literal">False</span>；</span><br><span class="line">代码示例：</span><br><span class="line">all([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])  <span class="comment"># 列表list，元素都不为空或0</span></span><br></pre></td></tr></table></figure><h3 id="函数名：callable"><a href="#函数名：callable" class="headerlink" title="函数名：callable()"></a>函数名：callable()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">callable(object)</span><br><span class="line">参数：对象</span><br><span class="line">返回值：可调用返回 <span class="literal">True</span>，否则返回 <span class="literal">False</span>。</span><br><span class="line">代码示例：callable(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：cmp"><a href="#函数名：cmp" class="headerlink" title="函数名：cmp()"></a>函数名：cmp()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">cmp( x, y )</span><br><span class="line">参数：都是数值表达式</span><br><span class="line">返回值：如果 x &lt; y 返回 <span class="number">-1</span>, 如果 x == y 返回 <span class="number">0</span>, 如果 x &gt; y 返回 <span class="number">1</span>。</span><br><span class="line">代码示例：</span><br><span class="line">cmp(<span class="number">80</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：delattr"><a href="#函数名：delattr" class="headerlink" title="函数名：delattr()"></a>函数名：delattr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">参数：</span><br><span class="line">返回值：</span><br><span class="line">代码示例：</span><br></pre></td></tr></table></figure><h3 id="函数名：setattr"><a href="#函数名：setattr" class="headerlink" title="函数名：setattr()"></a>函数名：setattr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">setattr(object, name, value)</span><br><span class="line">参数：</span><br><span class="line">object -- 对象。</span><br><span class="line">name -- 字符串，对象属性。</span><br><span class="line">value -- 属性值。</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">     bar = <span class="number">1</span></span><br><span class="line">     </span><br><span class="line">a = A()</span><br><span class="line">getattr(a, <span class="string">'bar'</span>)          <span class="comment"># 获取属性 bar 值</span></span><br><span class="line"></span><br><span class="line">setattr(a, <span class="string">'bar'</span>, <span class="number">5</span>)       <span class="comment"># 设置属性 bar 值</span></span><br><span class="line">a.bar</span><br></pre></td></tr></table></figure><h3 id="函数名：slice"><a href="#函数名：slice" class="headerlink" title="函数名：slice()"></a>函数名：slice()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">slice(start, stop, step)</span><br><span class="line">参数：</span><br><span class="line">start -- 起始位置</span><br><span class="line">stop -- 结束位置</span><br><span class="line">step -- 间距</span><br><span class="line">返回值：一个切片对象</span><br><span class="line">代码示例：</span><br><span class="line">slice(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：repr"><a href="#函数名：repr" class="headerlink" title="函数名：repr()"></a>函数名：repr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">repr(object)</span><br><span class="line">参数：对象</span><br><span class="line">返回值：对象的String格式</span><br><span class="line">代码示例：</span><br><span class="line">s = <span class="string">'RUNOOB'</span></span><br><span class="line">repr(s)</span><br></pre></td></tr></table></figure><h3 id="函数名：compile"><a href="#函数名：compile" class="headerlink" title="函数名：compile()"></a>函数名：compile()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">compile(source, filename, mode, flags, dont_inherit)</span><br><span class="line">参数：</span><br><span class="line">source -- 字符串或者AST（Abstract Syntax Trees）对象。。</span><br><span class="line">filename -- 代码文件名称，如果不是从文件读取代码则传递一些可辨认的值。</span><br><span class="line">mode -- 指定编译代码的种类。可以指定为 <span class="keyword">exec</span>, eval, single。</span><br><span class="line">flags -- 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。。</span><br><span class="line">flags和dont_inherit是用来控制编译源码时的标志</span><br><span class="line">返回值：</span><br><span class="line">代码示例：</span><br></pre></td></tr></table></figure><h3 id="函数名：eval"><a href="#函数名：eval" class="headerlink" title="函数名：eval()"></a>函数名：eval()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">eval(expression, globals, locals)</span><br><span class="line">参数：</span><br><span class="line">expression -- 表达式。</span><br><span class="line">globals -- 变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</span><br><span class="line">locals -- 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</span><br><span class="line">返回值：表达式执行结果</span><br><span class="line">代码示例：</span><br><span class="line">eval( <span class="string">'3 * x'</span> )</span><br></pre></td></tr></table></figure><h3 id="函数名：execfile"><a href="#函数名：execfile" class="headerlink" title="函数名：execfile()"></a>函数名：execfile()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">execfile(filename, globals, locals)</span><br><span class="line">参数：</span><br><span class="line">filename -- 文件名。</span><br><span class="line">globals -- 变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</span><br><span class="line">locals -- 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</span><br><span class="line">返回值：执行结果</span><br><span class="line">代码示例：</span><br><span class="line">execfile(<span class="string">'hello.py'</span>) <span class="comment">#需要有hello.py</span></span><br></pre></td></tr></table></figure><h3 id="函数名：super"><a href="#函数名：super" class="headerlink" title="函数名：super()"></a>函数名：super()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">super(type[, object-<span class="keyword">or</span>-type])</span><br><span class="line">参数：</span><br><span class="line">type -- 类。</span><br><span class="line">object-<span class="keyword">or</span>-type -- 类，一般是 self</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooParent</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.parent = <span class="string">'I\'m the parent.'</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'Parent'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self,message)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"%s from Parent"</span> % message)</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooChild</span><span class="params">(FooParent)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># super(FooChild,self) 首先找到 FooChild 的父类（就是类 FooParent），然后把类B的对象 FooChild 转换为类 FooParent 的对象</span></span><br><span class="line">        super(FooChild,self).__init__()    </span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'Child'</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self,message)</span>:</span></span><br><span class="line">        super(FooChild, self).bar(message)</span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'Child bar fuction'</span>)</span><br><span class="line">        <span class="keyword">print</span> (self.parent)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    fooChild = FooChild()</span><br><span class="line">    fooChild.bar(<span class="string">'HelloWorld'</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：reload"><a href="#函数名：reload" class="headerlink" title="函数名：reload()"></a>函数名：reload()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">reload(module)</span><br><span class="line">参数：模块对象</span><br><span class="line">返回值：返回模块对象</span><br><span class="line">代码示例：</span><br><span class="line">reload(sys)</span><br></pre></td></tr></table></figure><h3 id="函数名：type"><a href="#函数名：type" class="headerlink" title="函数名：type()"></a>函数名：type()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">type(name, bases, dict)</span><br><span class="line">参数：</span><br><span class="line">name -- 类的名称。</span><br><span class="line">bases -- 基类的元组。</span><br><span class="line">dict -- 字典，类内定义的命名空间变量。</span><br><span class="line">返回值：一个参数返回对象类型, 三个参数，返回新的类型对象。</span><br><span class="line">代码示例：</span><br><span class="line"></span><br><span class="line">type(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">type(<span class="string">'runoob'</span>)</span><br><span class="line"></span><br><span class="line">type([<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">type(&#123;<span class="number">0</span>:<span class="string">'zero'</span>&#125;)</span><br><span class="line"></span><br><span class="line">x = <span class="number">1</span>          </span><br><span class="line">type( x ) == int    <span class="comment"># 判断类型是否相等</span></span><br><span class="line">print(x)</span><br><span class="line"><span class="comment"># 三个参数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span><span class="params">(object)</span>:</span></span><br><span class="line">      a = <span class="number">1</span></span><br><span class="line">X = type(<span class="string">'X'</span>, (object,), dict(a=<span class="number">1</span>))  <span class="comment"># 产生一个新的类型 X</span></span><br><span class="line">print(X)</span><br></pre></td></tr></table></figure><h3 id="函数名：format"><a href="#函数名：format" class="headerlink" title="函数名：format()"></a>函数名：format()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">语法：String.format()</span><br><span class="line">参数：</span><br><span class="line">返回值：格式化之后的字符串</span><br><span class="line">代码示例：</span><br><span class="line"><span class="string">"&#123;&#125; &#123;&#125;"</span>.format(<span class="string">"hello"</span>, <span class="string">"world"</span>)    <span class="comment"># 不设置指定位置，按默认顺序</span></span><br><span class="line"><span class="string">"&#123;0&#125; &#123;1&#125;"</span>.format(<span class="string">"hello"</span>, <span class="string">"world"</span>)  <span class="comment"># 设置指定位置</span></span><br><span class="line"><span class="string">"&#123;1&#125; &#123;0&#125; &#123;1&#125;"</span>.format(<span class="string">"hello"</span>, <span class="string">"world"</span>)  <span class="comment"># 设置指定位置</span></span><br><span class="line"><span class="comment"># 通过字典设置参数</span></span><br><span class="line">site = &#123;<span class="string">"name"</span>: <span class="string">"菜鸟教程"</span>, <span class="string">"url"</span>: <span class="string">"www.runoob.com"</span>&#125;</span><br><span class="line">print(<span class="string">"网站名：&#123;name&#125;, 地址 &#123;url&#125;"</span>.format(**site))</span><br><span class="line"></span><br><span class="line">my_list = [<span class="string">'菜鸟教程'</span>, <span class="string">'www.runoob.com'</span>]</span><br><span class="line">print(<span class="string">"网站名：&#123;0[0]&#125;, 地址 &#123;0[1]&#125;"</span>.format(my_list))  <span class="comment"># "0" 是可选的</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssignValue</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.value = value</span><br><span class="line">my_value = AssignValue(<span class="number">6</span>)</span><br><span class="line">print(<span class="string">'value 为: &#123;0.value&#125;'</span>.format(my_value))  <span class="comment"># "0" 是可选的</span></span><br></pre></td></tr></table></figure><h3 id="函数名：basestring"><a href="#函数名：basestring" class="headerlink" title="函数名：basestring()"></a>函数名：basestring()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">basestring()</span><br><span class="line">参数：无</span><br><span class="line">返回值：无</span><br><span class="line">代码示例：</span><br><span class="line">isinstance(<span class="string">"Hello world"</span>, basestring)<span class="comment">#判断一个对象是否为 str 或者 unicode 的实例</span></span><br></pre></td></tr></table></figure><h3 id="函数名：classmethod"><a href="#函数名：classmethod" class="headerlink" title="函数名：classmethod()"></a>函数名：classmethod()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">classmethod</span><br><span class="line">参数：无</span><br><span class="line">返回值：返回函数的类方法</span><br><span class="line">代码示例：</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    bar = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'foo'</span>) </span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">(cls)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'func2'</span>)</span><br><span class="line">        <span class="keyword">print</span> (cls.bar)</span><br><span class="line">        cls().func1()   <span class="comment"># 调用 foo 方法</span></span><br><span class="line"> </span><br><span class="line">A.func2()               <span class="comment"># 不需要实例化</span></span><br></pre></td></tr></table></figure><h3 id="函数名：chr"><a href="#函数名：chr" class="headerlink" title="函数名：chr()"></a>函数名：chr()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">chr(i)</span><br><span class="line">参数：十进制或者十六进制的数字,<span class="number">0</span><span class="number">-255</span>之间</span><br><span class="line">返回值：对应的ASCLL字符</span><br><span class="line">代码示例：</span><br><span class="line">chr(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><h3 id="函数名：import"><a href="#函数名：import" class="headerlink" title="函数名：import()"></a>函数名：<strong>import</strong>()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">__import__(name)</span><br><span class="line">参数：模块名</span><br><span class="line">返回值：元组数组</span><br><span class="line">代码示例：</span><br><span class="line"><span class="keyword">import</span> sys  </span><br><span class="line">__import__(<span class="string">'a'</span>)        <span class="comment"># 导入 a.py 模块</span></span><br></pre></td></tr></table></figure><h3 id="函数名：reduce"><a href="#函数名：reduce" class="headerlink" title="函数名：reduce()"></a>函数名：reduce()</h3><p><code>python语法：reduce(function, iterable, initializer)参数：function -- 函数，有两个参数iterable -- 可迭代对象initializer -- 可选，初始参数返回值：返回计算结果代码示例：def add(x, y) :            # 两数相加    return x + yreduce(add, [1,2,3,4,5])   # 计算列表和：1+2+3+4+5reduce(lambda x, y: x+y, [1,2,3,4,5])  # 使用 lambda 匿名函数</code>python</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python文件处理</title>
    <link href="https://github.com/chineselijie/2020/03/12/4.python%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"/>
    <id>https://github.com/chineselijie/2020/03/12/4.python%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/</id>
    <published>2020-03-12T11:40:08.090Z</published>
    <updated>2019-08-25T13:18:34.634Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h1 id="python文件处理"><a href="#python文件处理" class="headerlink" title="python文件处理"></a>python文件处理</h1><p>python对文件处理分为两种，一种是本地处理，而另外一种就是通过网络数据处理（也就是爬虫相关），而本地的数据处理，主要是通过文件的都和写完成</p><blockquote><p> 我们先想一想平时对文件处理一般遇到过哪些问题:</p><ul><li>如何读取一个文件的内容，然后处理，最后写到一个新的文件</li><li>如何更改一个文件夹下面的某一些文件名</li></ul></blockquote><p>python的文件处理简单来说分为以下几点：</p><ul><li>文件的读写和关闭</li><li>文件的模式</li><li>文件的读取位置</li></ul><h2 id="文件的读取和关闭"><a href="#文件的读取和关闭" class="headerlink" title="文件的读取和关闭"></a>文件的读取和关闭</h2><p>python中想要获取文件里的内容，先要打开文件，然后才能都和写，而且写完之后一定要记得关闭</p><p>python中对文件的打开是通过open函数来获取一个句柄</p><ul><li>获取<code>读</code>的句柄，可以用<code>f.read()</code>进行读入</li><li>获取<code>写</code>的句柄<code>f</code>之后，就可以<code>f.weite()</code>进行写入</li><li>当你文件处理完毕之后，要关闭文件</li></ul><blockquote><p>应该会有人和博主思考的问题一样：为什么要关闭文件？</p><p>因为如果不正常关闭文件，缓冲在内存中的数据就不能真正地写入到文件中，可能造成数据丢失的现象</p></blockquote><h3 id="文件的打开"><a href="#文件的打开" class="headerlink" title="文件的打开"></a>文件的打开</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_obj=open(filename,mode=<span class="string">'r'</span>,buffering=<span class="number">-1</span>)</span><br><span class="line"><span class="comment"># 这里一共有3个参数，第一个是强制参数，后面两个是可选的</span></span><br><span class="line"><span class="comment"># mode可以是读，也可以是写，或者是追加，一般默认的是读文件</span></span><br><span class="line"><span class="comment"># buffering主要是设置缓冲区，一般我们都是用-1表示系统默认的缓冲区，若写100，则表示缓冲区为100</span></span><br></pre></td></tr></table></figure><h3 id="文件的读取"><a href="#文件的读取" class="headerlink" title="文件的读取"></a>文件的读取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">f.readline() <span class="comment"># 表示读文件的一行</span></span><br><span class="line">f.readlines() <span class="comment"># 表示把文件从头到位都读出来，并保存为一个列表</span></span><br></pre></td></tr></table></figure><blockquote><p>例如我们现在在D盘的python目录里面新建</p><p>123321.txt</p><p>123321.py</p><p>打开123321.txt输入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>打开123321.py，写入代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">print(f.readline())</span><br><span class="line">print(f.readlines())</span><br></pre></td></tr></table></figure><p>运行结果如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123456789</span></span><br><span class="line"></span><br><span class="line">[<span class="string">'ABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>]</span><br></pre></td></tr></table></figure><h3 id="文件的写入"><a href="#文件的写入" class="headerlink" title="文件的写入"></a>文件的写入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt,'</span>w<span class="string">')</span></span><br><span class="line"><span class="string">f.write() # 表示把字符串写入</span></span><br><span class="line"><span class="string">f.writelines() # 表示把一个列表写入</span></span><br><span class="line"><span class="string">f.close() # 表示关闭文件</span></span><br></pre></td></tr></table></figure><blockquote><p>例如我们现在在D盘的python目录里面新建</p><p>ABCCBA.txt</p><p>ABCCBA.py</p></blockquote><p>打开ABCCBA.py，写入代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'ABCCBA.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">f.write(<span class="string">'123321'</span>)</span><br><span class="line">f.writelines([<span class="string">'\nABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>])</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><blockquote><p>此处在后面如果没写入<code>f.close()</code>,那么在最后你打开ABCCBA.txt文件后是看不到你写入的内容的</p></blockquote><p>运行结果：</p><p>打开D盘的python目录下的ABCCBA.txt文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123321</span></span><br><span class="line">ABCDEFGHI</span><br><span class="line">IHGFEDCBA</span><br></pre></td></tr></table></figure><h3 id="文件的关闭"><a href="#文件的关闭" class="headerlink" title="文件的关闭"></a>文件的关闭</h3><blockquote><p>此处我介绍两种关闭方法</p></blockquote><p>1）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">.............</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>2）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">r'somefile.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.readlines()</span><br></pre></td></tr></table></figure><blockquote><p>with用法是python极力推荐的一种使用方法，因为它能够自动帮你关掉文件，你只需要专注对文件的处理就可以了</p></blockquote><h2 id="文件的模式"><a href="#文件的模式" class="headerlink" title="文件的模式"></a>文件的模式</h2><p>在上面我仅仅只列举了python的读和写，那么其他的模式该怎么办呢？</p><p>其实python只需要改变一下open里面的模式参数就可以了</p><p>​                                    open函数中的模式参数</p><table><thead><tr><th align="center">值</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">‘r’</td><td align="center">读模式</td></tr><tr><td align="center">‘w’</td><td align="center">写模式</td></tr><tr><td align="center">‘a’</td><td align="center">追加模式</td></tr><tr><td align="center">‘b’</td><td align="center">二进制模式</td></tr><tr><td align="center">‘+’</td><td align="center">读/写模式</td></tr><tr><td align="center">‘r+’</td><td align="center">以读写模式打开</td></tr><tr><td align="center">‘w+’</td><td align="center">以读写模式打开</td></tr><tr><td align="center">‘a+’</td><td align="center">以读写模式打开</td></tr><tr><td align="center">‘rb’</td><td align="center">以二进制读模式打开</td></tr></tbody></table><h2 id="文件的读取位置"><a href="#文件的读取位置" class="headerlink" title="文件的读取位置"></a>文件的读取位置</h2><p>有时候我们就只想读取文件中的某一部分，或者我们需要从文章的某一部分开始读取</p><p>那么这就要用到<code>seek()</code>函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_obj.seek(offset,whence=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># seek 主要是在文件中移动指针，从`whence`(0表示文件的开头，1表示当前位置，2表示文件的末尾)偏移offset个字符</span></span><br></pre></td></tr></table></figure><blockquote><p>例如在D盘python目录下的123321.txt文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="从头读取3个字符"><a href="#从头读取3个字符" class="headerlink" title="从头读取3个字符"></a>从头读取3个字符</h3><p>在当前目录下创建seek1.py文件，写入代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h3 id="从尾部读取3个字符"><a href="#从尾部读取3个字符" class="headerlink" title="从尾部读取3个字符"></a>从尾部读取3个字符</h3><p>在当前目录下创建seek2.py文件，写入代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">b'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">-3</span>,<span class="number">2</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="实战1"><a href="#实战1" class="headerlink" title="实战1"></a>实战1</h2><blockquote><p>在D盘python目录里面创建2019.txt文件，写入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; hahaha</span><br><span class="line">&gt; hary</span><br><span class="line">&gt; natasha</span><br><span class="line">&gt; mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>请把2019.txt文件里面的内容都出来，写到一个新的文件，文件名：9102.txt，格式按照下面这种：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">1</span>:hahaha</span><br><span class="line">&gt; <span class="number">2</span>:hary</span><br><span class="line">&gt; <span class="number">3</span>:natasha</span><br><span class="line">&gt; <span class="number">4</span>:mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>在当前目录下创建test.py，代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">'2019.txt'</span>) <span class="comment"># 打开文件</span></span><br><span class="line">count=f.readlines() <span class="comment"># 从文件中把内容都读出来，保存到列表中</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(count)): <span class="comment"># 关闭文件</span></span><br><span class="line">    count[i]=str(i+<span class="number">1</span>)+<span class="string">'：'</span>+count[i] <span class="comment"># 遍历列表，将每一行都加上下标</span></span><br><span class="line">print(count)</span><br><span class="line">f.close() <span class="comment"># 关闭文件</span></span><br><span class="line"></span><br><span class="line">f=open(<span class="string">'9102.txt'</span>,<span class="string">'w'</span>) <span class="comment"># 打开文件</span></span><br><span class="line">f.writelines(count) <span class="comment"># 把新的内容写入文件</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>优化重构代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_File</span><span class="params">()</span>:</span>    <span class="comment"># 把读文件抽成一个函数</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'2019.txt'</span>,<span class="string">'r'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        read_lines_from_file=f.readlines()</span><br><span class="line">        <span class="keyword">return</span> read_lines_from_file</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_File</span><span class="params">(count=[])</span>:</span>   <span class="comment"># 把写文件抽成一个函数</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'9102.txt'</span>,<span class="string">'w'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        f.writelines(count)</span><br><span class="line"></span><br><span class="line">new_lines=[]</span><br><span class="line"><span class="comment"># 遍历列表，将每一行都加上下标</span></span><br><span class="line"><span class="keyword">for</span> index,line <span class="keyword">in</span> enumerate(read_File()):</span><br><span class="line">    new_lines.append(str(index+<span class="number">1</span>)+<span class="string">'：'</span>+line)</span><br><span class="line"></span><br><span class="line">write_File(new_lines)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;1：hahaha\n&apos;, &apos;2：hary\n&apos;, &apos;3：natasha\n&apos;, &apos;4：mary&apos;]</span><br></pre></td></tr></table></figure><p>打开9102.txt文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>：hahaha</span><br><span class="line"><span class="number">2</span>：hary</span><br><span class="line"><span class="number">3</span>：natasha</span><br><span class="line"><span class="number">4</span>：mary</span><br></pre></td></tr></table></figure><h2 id="实战2"><a href="#实战2" class="headerlink" title="实战2"></a>实战2</h2><blockquote><p>在D盘python目录下创建hahaha文件夹，网上下载几张图片放进去，用代码将全部照片重命名为1.jpg，2.jpg，3.jpg,…….以此类推</p></blockquote><p>在D盘python目录下创建test2.py，代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">renameall</span><span class="params">()</span>:</span></span><br><span class="line">    fileList = os.listdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#待修改文件夹</span></span><br><span class="line">    print(<span class="string">"修改前："</span>+str(fileList))  <span class="comment">#输出文件夹中包含的文件</span></span><br><span class="line">    currentpath = os.getcwd()  <span class="comment">#得到进程当前工作目录</span></span><br><span class="line">    os.chdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#将当前工作目录修改为待修改文件夹的位置</span></span><br><span class="line">    num=<span class="number">1</span>  <span class="comment">#名称变量</span></span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> fileList:  <span class="comment">#遍历文件夹中所有文件</span></span><br><span class="line">        pat=<span class="string">".+\.(jpg|png|gif)"</span>  <span class="comment">#匹配文件名正则表达式</span></span><br><span class="line">        pattern = re.findall(pat,fileName)  <span class="comment">#进行匹配</span></span><br><span class="line">        os.rename(fileName,(str(num)+<span class="string">'.'</span>+pattern[<span class="number">0</span>]))  <span class="comment">#文件重新命名</span></span><br><span class="line">        num = num+<span class="number">1</span>  <span class="comment">#改变编号，继续下一项</span></span><br><span class="line">    print(<span class="string">"---------------------------------------------------"</span>)</span><br><span class="line">    os.chdir(currentpath)  <span class="comment">#改回程序运行前的工作目录</span></span><br><span class="line">    sys.stdin.flush()  <span class="comment">#刷新</span></span><br><span class="line">    print(<span class="string">"修改后："</span>+str(os.listdir(<span class="string">r"D:\python\hahaha"</span>)))  <span class="comment">#输出修改后文件夹中包含的文件</span></span><br><span class="line">renameall()</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改前：[<span class="string">'ACG.GY_01.jpg'</span>, <span class="string">'ACG.GY_02.jpg'</span>, <span class="string">'ACG.GY_03.jpg'</span>, <span class="string">'ACG.GY_04.jpg'</span>, <span class="string">'ACG.GY_05.jpg'</span>, <span class="string">'ACG.GY_06.jpg'</span>, <span class="string">'ACG.GY_07.jpg'</span>, <span class="string">'ACG.GY_08.jpg'</span>, <span class="string">'ACG.GY_09.jpg'</span>, <span class="string">'ACG.GY_10.jpg'</span>, <span class="string">'ACG.GY_11.jpg'</span>, <span class="string">'ACG.GY_12.jpg'</span>, <span class="string">'ACG.GY_13.jpg'</span>, <span class="string">'ACG.GY_14.jpg'</span>, <span class="string">'ACG.GY_15.jpg'</span>, <span class="string">'ACG.GY_16.jpg'</span>, <span class="string">'ACG.GY_17.jpg'</span>, <span class="string">'ACG.GY_18.jpg'</span>, <span class="string">'ACG.GY_19.jpg'</span>, <span class="string">'ACG.GY_20.jpg'</span>, <span class="string">'ACG.GY_21.jpg'</span>, <span class="string">'ACG.GY_22.jpg'</span>, <span class="string">'ACG.GY_23.jpg'</span>, <span class="string">'ACG.GY_24.jpg'</span>]</span><br><span class="line">---------------------------------------------------</span><br><span class="line">修改后：[<span class="string">'1.jpg'</span>, <span class="string">'2.jpg'</span>, <span class="string">'3.jpg'</span>, <span class="string">'4.jpg'</span>, <span class="string">'5.jpg'</span>, <span class="string">'6.jpg'</span>, <span class="string">'7.jpg'</span>, <span class="string">'8.jpg'</span>, <span class="string">'9.jpg'</span>, <span class="string">'10.jpg'</span>, <span class="string">'11.jpg'</span>, <span class="string">'12.jpg'</span>, <span class="string">'13.jpg'</span>, <span class="string">'14.jpg'</span>, <span class="string">'15.jpg'</span>, <span class="string">'16.jpg'</span>, <span class="string">'17.jpg'</span>, <span class="string">'18.jpg'</span>, <span class="string">'19.jpg'</span>, <span class="string">'20.jpg'</span>, <span class="string">'21.jpg'</span>, <span class="string">'22.jpg'</span>, <span class="string">'23.jpg'</span>, <span class="string">'24.jpg'</span>]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>谈Python变量和数据类型</title>
    <link href="https://github.com/chineselijie/2020/03/12/3.Python%E5%8F%98%E9%87%8F%E5%92%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>https://github.com/chineselijie/2020/03/12/3.Python%E5%8F%98%E9%87%8F%E5%92%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</id>
    <published>2020-03-12T11:40:08.078Z</published>
    <updated>2019-08-24T17:41:18.900Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>Python的变量类型非常简单，主要分为：</p><ul><li>numbers：分为整数int和浮点数float</li></ul><p>整数：比如1，200，400，-1000，0，通常也有用十六进制表示的，比如0xff00等</p><p>浮点数：比如1.11，12.13，-10.02，也有比较大的浮点数，比如2.12x10^9</p><ul><li>string：单引号，双引号，三引号</li></ul><p>python的字符串以<code>&#39;&#39;</code>或者<code>”“</code>或者<code>&quot;&quot;&quot;</code>括起来的随意文本都是字符串</p><p>例如：</p><p><code>&#39;abcd&#39;</code>    <code>&quot;hello world&quot;</code>    <code>&quot;&quot;&quot;This is an apple.”&quot;&quot;</code></p><blockquote><p>有一点需要注意：若字符串里面包含特殊字符，可以用转义符<code>\</code>进行转义</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊字符转义</span></span><br><span class="line"><span class="comment"># hahaha = 'xiao ming said "I'am full"'</span></span><br><span class="line">hahaha = <span class="string">'xiao ming said \"I\'am full\"'</span></span><br><span class="line">print(hahaha)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiao ming said <span class="string">"I'am full"</span></span><br></pre></td></tr></table></figure><blockquote><p>说到字符串，这里需要讲一下python的字符串format格式，一般分为两种</p><p>1）%操作符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># %操作符</span></span><br><span class="line">&gt; name = <span class="string">"natasha"</span></span><br><span class="line">&gt; age = <span class="number">18</span></span><br><span class="line">&gt; print(<span class="string">"your name is %s,age is %d."</span>%(name,age))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; your name <span class="keyword">is</span> natasha,age <span class="keyword">is</span> <span class="number">18.</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>2) format</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># format</span></span><br><span class="line">&gt; name = <span class="string">'harry'</span></span><br><span class="line">&gt; age = <span class="number">18</span></span><br><span class="line">&gt; print(<span class="string">"your name is &#123;0&#125;,age is &#123;1&#125;."</span>.format(name,age))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; your name <span class="keyword">is</span> harry,age <span class="keyword">is</span> <span class="number">18.</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><ul><li>布尔值</li></ul><p>python中的布尔值，只有True和False两种（切记一定要注意大小写）</p><p>布尔值的运算可以用<code>and</code>，<code>or</code>和<code>not</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a <span class="keyword">and</span> b <span class="comment"># 表示a和b都为True，最后的运算结果才是True，否则为False</span></span><br><span class="line">a <span class="keyword">or</span> b <span class="comment"># 表示a或者b其中有一个为True,最后的运算结果才是True，否则为False</span></span><br><span class="line"><span class="keyword">not</span> <span class="comment"># 是非运算，它是一个单目的运算，就是把True变成False，把False变成True</span></span><br></pre></td></tr></table></figure><ul><li>空值</li></ul><p>python的值是用None表示，None不是0，也不是空字符串，也不是False，它是一个特殊的空值，我们可以用python的内置函数type来看一下，然后分别用0，空字符，False来比较一下，看看它到底是为何物</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># type</span></span><br><span class="line">print(type(<span class="literal">None</span>))</span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 空字符</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="string">''</span>)</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="literal">False</span>)</span><br><span class="line">print(<span class="literal">None</span> == <span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">NoneType</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">True</span></span></span><br></pre></td></tr></table></figure><h2 id="Python的变量命名"><a href="#Python的变量命名" class="headerlink" title="Python的变量命名"></a>Python的变量命名</h2><p>python的变量名必须是大小写的英文字母，数字和下划线<code>_</code>的组合，切记不能使用数字开头</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 变量命名</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">print(a)</span><br><span class="line">n_1 = <span class="number">100</span></span><br><span class="line">print(n_1)</span><br><span class="line">a = <span class="string">'sdfdsff'</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line">sdfdsff</span><br></pre></td></tr></table></figure><blockquote><p>python是动态语言，它不像java是强制类型语言，是静态语言，也就是说你在定义变量的时候就要指定类型，而python是动态语言，是边编译边执行，这样正如蛇的含义所在–灵活。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python 计算机数据存储与进制</title>
    <link href="https://github.com/chineselijie/2020/03/12/2.python--%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E8%BF%9B%E5%88%B6/"/>
    <id>https://github.com/chineselijie/2020/03/12/2.python--%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E8%BF%9B%E5%88%B6/</id>
    <published>2020-03-12T11:40:08.071Z</published>
    <updated>2019-08-21T16:09:46.509Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"👆以上是不完整的我"</span>) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h1 id="计算机数据存储与进制"><a href="#计算机数据存储与进制" class="headerlink" title="计算机数据存储与进制"></a>计算机数据存储与进制</h1><p>[TOC]</p><h2 id="python软件安装"><a href="#python软件安装" class="headerlink" title="python软件安装"></a>python软件安装</h2><blockquote><p> 链接：<a href="https://pan.baidu.com/s/1WrbMwSLbyeXLyDWzhaFnLA" target="_blank" rel="noopener">https://pan.baidu.com/s/1WrbMwSLbyeXLyDWzhaFnLA</a><br> 提取码：wzvn </p></blockquote><p>内涵：pycharm专业版、python3.6以及安装介绍</p><h2 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h2><p>在前面 我们首先思考一下，</p><p><strong>1.为什么要使用计算机？</strong></p><p>当然是为了存储数据、处理数据</p><p><strong>2.数据存在哪里？</strong></p><p>数据存储在内存当中</p><p><strong>3.那么内存是如何存储数据的呢？</strong></p><p>首先得先要弄清楚怎么存储数字</p><h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p><strong>内存</strong>是计算机存储数据的一个<strong>介质</strong></p><p><strong>抽象内存</strong>：一个开关，有两种状态，一种为开，一种为关，我们把开对应为1，把关对应为0。把8个开关丢入到一个房间里，那么就可以称这个房间为一个字节。一个开关代表的是一位数，每个房间都有门牌号，可以看作成地址。把无数个房间罗列起来组成一个摩天大厦，把摩天大厦看做成内存。</p><p><strong>单位</strong>：</p><p>​    1bit    </p><p>​    8bit    ==    1字节</p><p>​    1024字节    ==    1K</p><p>​    1024K    ==    1M</p><p>​    1024M    ==    1G</p><p>​    1024G    ==    1T</p><h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><h3 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h3><p>​            逢二进一</p><p>​            0    1</p><p>​            1 + 1 = 10</p><h3 id="八进制"><a href="#八进制" class="headerlink" title="八进制"></a>八进制</h3><p>​            逢八进一</p><p>​            0    1    2    3    4    5    6    7</p><p>​            1 + 7 = 10</p><h3 id="十进制"><a href="#十进制" class="headerlink" title="十进制"></a>十进制</h3><p>​            逢十进一</p><p>​            0    1    2    3    4    5    6    7    8    9</p><p>​            1 + 9 = 10</p><h3 id="十六进制"><a href="#十六进制" class="headerlink" title="十六进制"></a>十六进制</h3><p>​            逢十六进一</p><p>​            0    1    2    3    4    5    6    7    8    9    a    b    c    d    e    f    </p><p>​            1 + f = 10</p><h2 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h2><h3 id="十进制转二进制"><a href="#十进制转二进制" class="headerlink" title="十进制转二进制"></a>十进制转二进制</h3><p>​    公式：倒除法，余数逆序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">55</span> </span><br><span class="line"><span class="number">55</span>除以<span class="number">2</span>得<span class="number">27</span>   余数<span class="number">1</span></span><br><span class="line"><span class="number">27</span>除以<span class="number">2</span>得<span class="number">13</span>   余数<span class="number">1</span></span><br><span class="line"><span class="number">13</span>除以<span class="number">2</span>得<span class="number">6</span> 余数<span class="number">1</span></span><br><span class="line"><span class="number">6</span>除以<span class="number">2</span>得<span class="number">3</span> 余数<span class="number">0</span></span><br><span class="line"><span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span> 余数<span class="number">1</span></span><br><span class="line">那么逆序可得<span class="number">110111</span></span><br></pre></td></tr></table></figure><h3 id="二进制转十进制"><a href="#二进制转十进制" class="headerlink" title="二进制转十进制"></a>二进制转十进制</h3><p>​    公式：当前的数字(0、1)乘以2的位数次方，然后相加</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">110111</span></span><br><span class="line"><span class="number">1</span> x <span class="number">2</span>^<span class="number">5</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">4</span> + <span class="number">0</span> x <span class="number">2</span>^<span class="number">3</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">1</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">0</span></span><br><span class="line">= <span class="number">32</span> + <span class="number">16</span> + <span class="number">0</span> + <span class="number">4</span> + <span class="number">2</span> + <span class="number">1</span> </span><br><span class="line">= <span class="number">55</span></span><br></pre></td></tr></table></figure><h3 id="八进制转二进制"><a href="#八进制转二进制" class="headerlink" title="八进制转二进制"></a>八进制转二进制</h3><p>​    公式: [一转三位] 八进制的一位相当于二进制的三位，计算时按十进制转换，不足三位高位补0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">65</span></span><br><span class="line"><span class="number">6</span> _ _ _  计算：<span class="number">6</span>除以<span class="number">2</span>得<span class="number">3</span>，余数<span class="number">0</span>，<span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">1.</span> 那么<span class="number">6</span>可以化为 <span class="number">1</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">5</span> _ _ _  计算：<span class="number">5</span>除以<span class="number">2</span>得<span class="number">2</span>，余数<span class="number">1</span>，<span class="number">2</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">0.</span> 那么<span class="number">5</span>可以化为 <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">总结可得<span class="number">65</span>为<span class="number">110101</span></span><br></pre></td></tr></table></figure><h3 id="二进制转八进制"><a href="#二进制转八进制" class="headerlink" title="二进制转八进制"></a>二进制转八进制</h3><p>​    公式: [三位一取] 从低位开始，每三位得到一个八进制数字，最后高位不足则补0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">110101</span></span><br><span class="line"><span class="number">0110</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">1</span>x2^<span class="number">1</span>+<span class="number">0x2</span>^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">2</span>+<span class="number">0</span>=<span class="number">6</span></span><br><span class="line"><span class="number">0101</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">0x2</span>^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">0</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">综上述可得<span class="number">110101</span>为<span class="number">65</span></span><br></pre></td></tr></table></figure><h3 id="十六进制转二进制"><a href="#十六进制转二进制" class="headerlink" title="十六进制转二进制"></a>十六进制转二进制</h3><p>公式: [一转四位] 十六进制的一位相当于二进制的四位，计算时按十进制转换，不足四位高位补0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">75</span></span><br><span class="line"><span class="number">7</span> _ _ _ _ 计算：<span class="number">7</span>除以<span class="number">2</span>得<span class="number">3</span>，余数<span class="number">1</span>，<span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">1.</span> 那么<span class="number">7</span>可以化为 <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">5</span> _ _ _ _ 计算：<span class="number">5</span>除以<span class="number">2</span>得<span class="number">2</span>，余数<span class="number">1</span>，<span class="number">2</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">0.</span> 那么<span class="number">5</span>可以化为 <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">总结可得<span class="number">75</span>为<span class="number">01110101</span></span><br></pre></td></tr></table></figure><h3 id="二进制转十六进制"><a href="#二进制转十六进制" class="headerlink" title="二进制转十六进制"></a>二进制转十六进制</h3><p>公式: [四位一取] 从低位开始，每四位得到一个十六进制数字，最后高位不足则补0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">01110101</span></span><br><span class="line"><span class="number">0111</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">1</span>x2^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">2</span>+<span class="number">1</span>=<span class="number">7</span></span><br><span class="line"><span class="number">0101</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">0x2</span>^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">0</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">综上述可得<span class="number">01110101</span>为<span class="number">75</span></span><br></pre></td></tr></table></figure><blockquote><p>其实我们可使用一个简便得方法</p><p>叫做8 4 2 1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; 例如 <span class="number">01100101</span></span><br><span class="line">&gt; <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">&gt; ---------------</span><br><span class="line">&gt; <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span> <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 可得出<span class="number">4</span>+<span class="number">2</span>=<span class="number">6</span> <span class="number">4</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">&gt; 得出<span class="number">65</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 例如 <span class="number">01110101</span></span><br><span class="line">&gt; <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">&gt; ---------------</span><br><span class="line">&gt; <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span> <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 可得出<span class="number">4</span>+<span class="number">2</span>+<span class="number">1</span>=<span class="number">7</span> <span class="number">4</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">&gt; 得出<span class="number">75</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="进制对应表"><a href="#进制对应表" class="headerlink" title="进制对应表"></a>进制对应表</h3><table><thead><tr><th align="center">十进制</th><th align="center">二进制</th><th align="center">八进制</th><th align="center">十六进制</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">2</td><td align="center">10</td><td align="center">2</td><td align="center">2</td></tr><tr><td align="center">3</td><td align="center">11</td><td align="center">3</td><td align="center">3</td></tr><tr><td align="center">4</td><td align="center">100</td><td align="center">4</td><td align="center">4</td></tr><tr><td align="center">5</td><td align="center">101</td><td align="center">5</td><td align="center">5</td></tr><tr><td align="center">6</td><td align="center">110</td><td align="center">6</td><td align="center">6</td></tr><tr><td align="center">7</td><td align="center">111</td><td align="center">7</td><td align="center">7</td></tr><tr><td align="center">8</td><td align="center">1000</td><td align="center">10</td><td align="center">8</td></tr><tr><td align="center">9</td><td align="center">1001</td><td align="center">11</td><td align="center">9</td></tr><tr><td align="center">10</td><td align="center">1010</td><td align="center">12</td><td align="center">a</td></tr><tr><td align="center">11</td><td align="center">1011</td><td align="center">13</td><td align="center">b</td></tr><tr><td align="center">12</td><td align="center">1100</td><td align="center">14</td><td align="center">c</td></tr><tr><td align="center">13</td><td align="center">1101</td><td align="center">15</td><td align="center">d</td></tr><tr><td align="center">14</td><td align="center">1110</td><td align="center">16</td><td align="center">e</td></tr><tr><td align="center">15</td><td align="center">1111</td><td align="center">17</td><td align="center">f</td></tr></tbody></table><h2 id="存储数据的方式"><a href="#存储数据的方式" class="headerlink" title="存储数据的方式"></a>存储数据的方式</h2><p>内存中存储的是数据的二进制形式<br>存储数据：<br>    1、计算机先开辟空间，在存储数据，计算机开辟空间的最小单位是字节<br>    2、在数据存储时，用最高位标识符号位，0表示正数，1表示复数</p><h2 id="原码"><a href="#原码" class="headerlink" title="原码"></a>原码</h2><p>原码：规定了字节数，写明了符号位，得到了数据的原码<br>    思考：内存是以数据原码的形式存储的吗？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">     <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+    <span class="number">1000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">---------------------------------------------------</span><br><span class="line">     <span class="number">1000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0010</span>   <span class="number">-2</span></span><br></pre></td></tr></table></figure><p>结论：不以原码的形式存储数据</p><h2 id="反码"><a href="#反码" class="headerlink" title="反码"></a>反码</h2><p>反码：正数的反码就是其原码，负数的反码事其原码的符号位不变其他位取反<br>    思考：内存是以数据反码的形式存储的吗？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+   <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1110</span></span><br><span class="line">--------------------------------------------------- </span><br><span class="line">    <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span></span><br></pre></td></tr></table></figure><p>结论：不以反码的形式存储数据</p><h2 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h2><p>补码：正数的补码是其原码(正数三码合一)，负数的补码是反码加1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+   <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span></span><br><span class="line">---------------------------------------------------  </span><br><span class="line">  <span class="number">1</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span></span><br><span class="line"><span class="comment"># 加法最后得到的1溢出了，没有存储到内存中</span></span><br></pre></td></tr></table></figure><p>结论：以补码的形式存储数据</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python基础理论讲解</title>
    <link href="https://github.com/chineselijie/2020/03/12/1.python%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3/"/>
    <id>https://github.com/chineselijie/2020/03/12/1.python%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3/</id>
    <published>2020-03-12T11:40:08.029Z</published>
    <updated>2019-08-21T16:11:09.498Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"👆以上是不完整的我"</span>) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>一种面向对象的解释型计算机程序设计语言</strong></p><ul><li><strong>解释类：解释器</strong><ul><li>通过解释器来翻译，类似于同声传译人员</li><li>优点：更灵活</li><li>缺点：效率相对低一些</li><li>python属于解释型</li></ul></li><li><strong>编译类：编译器</strong><ul><li>先通过高级语言把程序写出来通过编译器解释成计算机能够看读懂的语言</li><li>类似于笔译人员</li><li>优点：效率更高</li><li>缺点：内容有修改时需重新写，过程比较漫长</li></ul></li></ul><h2 id="python-历史"><a href="#python-历史" class="headerlink" title="python 历史"></a>python 历史</h2><ul><li><strong>作者：Guido van Rossum(龟叔)</strong></li><li>语言诞生：Python是“蟒蛇”的意思。在1989年圣诞节期间，Guido身处阿姆斯特<br> 丹。这个都市的美丽和繁华没能填满Guido空虚的内心，周边的喧闹使他内心的寂 寞无处安放（夜的黑已不再纯粹，哈哈）。为了打发这种无趣，Guido决心为他之前孕育的ABC语言开发一个插件，这个插件就是大名鼎鼎的Python（男人因为孤独而优秀啊！）。一个新的脚本解释程序就此诞生。在给这个孩子起名字的时候，Guido取其所爱的一个叫Monty Python的喜剧团体的“Python”。</li><li>版本：Python2.0版本将会在2020年停止维护，Python3.0版本将是学习和开发的主流。</li></ul><p><strong>设计哲学与定位</strong></p><ul><li>优雅</li><li>简单</li><li>明确</li></ul><h2 id="python-特点"><a href="#python-特点" class="headerlink" title="python 特点"></a>python 特点</h2><ul><li>1.易于学习：Python有相对较少的关键字，结构简单，和一个明确定义的语法，学习起来更加简单。</li><li>2.易于阅读：Python代码定义的更清晰。</li><li>3.易于维护：Python的成功在于它的源代码是相当容易维护的。</li><li>4.一个广泛的标准库：Python的最大的优势之一是丰富的库，跨平台的，在UNIX，Windows和Macintosh兼容很好。</li><li>5.互动模式：互动模式的支持，您可以从终端输入执行代码并获得结果的语言，互动的测试和调试代码片断。</li><li>6.可移植：基于其开放源代码的特性，Python已经被移植（也就是使其工作）到许多平台。</li><li>7.可扩展：如果你需要一段运行很快的关键代码，或者是想要编写一些不愿开放的算法，你可以使用C或C++完成那部分程序，然后从你的Python程序中调用。</li><li>8.数据库：Python提供所有主要的商业数据库的接口。</li><li>9.GUI编程：Python支持GUI可以创建和移植到许多系统调用。</li><li>10.可嵌入: 你可以将Python嵌入到C/C++程序，让你的程序的用户获得”脚本化”的能力。</li></ul><h2 id="Python应用场景"><a href="#Python应用场景" class="headerlink" title="Python应用场景"></a>Python应用场景</h2><ul><li>数据分析</li><li>人工智能</li><li>网络爬虫</li><li>自动化运维</li><li>GUI（桌面编程）</li><li>WEB编程（网站后台开发 PHP、JSP、.net）</li><li>数据库编程</li><li>数学及科学计算（大数据领域）</li></ul><h2 id="编程特性"><a href="#编程特性" class="headerlink" title="编程特性"></a>编程特性</h2><p>• 面向过程<br> • 面向对象<br> • 函数式编程</p><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><p> 数据结构就是通过某种方式（例如对元素进行编号）组织在一起的数据元素的集合。这些数据元素可以是数字或者字符，甚至可以是其它类型的嵌套的数据结构</p><p>  python的最基本数据结构是序列</p><p>  序列中的每个元素被分配一个序号——即元素的位置，也称为索引。索引从0开始编号</p><p>  python包含6种内建的数据序列：</p><p>​    列表</p><p>​    元组</p><p>​    字符串</p><p>​    Unicode字符串</p><p>​    buffer对象</p><p>​    xrange对象</p><blockquote><p>基本的几种数据类型</p><p>1Intergral类型：</p><p>​    整型：不可变类型（-257，201624583371143）</p><p>​    布尔型：True、False</p><p>  2 浮点类型：</p><p>​    浮点数（3.1415926）</p><p>​    复数（3+6j）</p><p>​    十进制数字</p><p>  3.字符串：不可变类型</p><p>​    ‘GNU is Not Unix’,”hello”,’’’world’’’</p></blockquote><h2 id="程序执行过程"><a href="#程序执行过程" class="headerlink" title="程序执行过程"></a>程序执行过程</h2><p><img src="https://s3.51cto.com/wyfs02/M00/8C/21/wKioL1hjRnjggNxGAABZ4RoPwvU877.jpg" alt></p><h2 id="编写与执行python代码"><a href="#编写与执行python代码" class="headerlink" title="编写与执行python代码"></a>编写与执行python代码</h2><p><strong>可以通过两种方式来执行python代码：</strong> </p><ul><li><p>交互式解释器</p></li><li><p>python程序文件</p><p><strong>交互式解释器与python程序文件的利弊：</strong></p></li></ul><p>​    交互式模式下的程序执行完后难以再次运行，但是执行的代码可以立马看到效果；</p><p>​    将编写的程序保存至文件（.py）中可以方便多次运行，但无法立马看到执行效果。</p><p>  <strong>python的程序文件分类：</strong></p><p>​    包含一系列预编写好的语句的程序文件称作“模块”；</p><p>​    能够直接运行的模块文件通常称作脚本（即程序的顶层文件）</p><h2 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h2><p>  and  与</p><p>  or   或</p><p>  not  非</p><h2 id="控制流语句"><a href="#控制流语句" class="headerlink" title="控制流语句"></a>控制流语句</h2><p>  if、for、while、try</p><h2 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h2><p>  +、-、<em>、/、+=、-=、</em>=、/=</p><h2 id="语句和语法"><a href="#语句和语法" class="headerlink" title="语句和语法"></a>语句和语法</h2><p>​    <strong>注释：</strong></p><p>​      #：可以从一行的任何地方开始</p><p>​    <strong>续行：</strong></p><p>​      \：只能在行尾</p><p>​      ‘’’：闭合操作符，单一语句跨多行。实现多行注释、内置文档等功能</p><p>​    <strong>代码组：</strong></p><p>​      缩进相同的一组语句构成的一个代码块</p><p>​      首行以关键字开始，如if、while等，以冒号结束</p><p>​      python使用缩进来分隔代码组，同一代码组的代码行必须严格左对齐，否则会造成语法错误</p><p>​    <strong>同一行放置多个语句：</strong></p><p>​      ;：以分号作为分隔符</p><p>​    <strong>模块：</strong></p><p>​      每个python脚本文件都可以被当成是一个模块</p><p>​      模块里的代码可以是一段直接执行的脚本，也可以是一些类似库函数的代码从而可由别的模块执行导入（import）</p><p>​      每一个模块被导入时会被直接执行（仅第一次），因此纯模块文件中通常不会定义函数以外的代码，否则在import时就会被执行</p><p>  <strong>标识符</strong></p><p>​    标识符是计算机语言中允许作为名字的有效字符串集合：</p><p>​      其中有一部分是关键字，它们是语言的标识符，因此是保留字，不能用于其它用途</p><p>​        python3的关键字有以下这些：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">False</span> <span class="class"><span class="keyword">class</span> <span class="title">finally</span> <span class="title">is</span> <span class="title">return</span> <span class="title">None</span> <span class="title">continue</span><span class="title">for</span><span class="title">lambda</span> <span class="title">try</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">True</span> <span class="title">def</span> <span class="title">from</span> <span class="title">nonlocal</span> <span class="title">while</span> <span class="title">and</span> <span class="title">del</span> <span class="title">global</span><span class="title">not</span><span class="title">with</span> <span class="title">as</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">elif</span> <span class="title">if</span><span class="title">or</span> <span class="title">yield</span> <span class="title">assert</span><span class="title">else</span> <span class="title">import</span><span class="title">pass</span> <span class="title">break</span> <span class="title">except</span> <span class="title">in</span> <span class="title">raise</span></span></span><br></pre></td></tr></table></figure><p>​     python还有称为”内建”的标识符集合，虽不是保留字，仍不推荐使用这些特别的名字</p><p>​    <strong>python标识符：</strong></p><p>​      第一个字符只能使用字母或下划线；</p><p>​      余下的字符可以使用字母、数字或下划线；</p><p>​      区分字符大小写</p><p>  <strong>基本编程风格</strong></p><p>​    注释：既不能缺少注释，亦要避免过度注释</p><p>​    文档：python允许通过<strong>doc</strong>动态获得文档字串</p><p>​    缩进：统一缩进4个字串</p><p>​    标识符名称：见名知义</p><h2 id="python的变量取名"><a href="#python的变量取名" class="headerlink" title="python的变量取名"></a>python的变量取名</h2><ul><li><p>变量名应该做到见名知义</p></li><li><p>变量名区分大小写</p></li><li><p>变量名中有多个单词时有两种方式表示</p><ul><li>单词间使用下划线分隔（官方推荐）</li><li>首单词小写，后面单词的首字母大写</li></ul></li><li><p>变量名只能是由下划线、数字、字母组成，不能是空格或者特殊字符（#？&lt;.,$!&amp;*^~）</p></li><li><p>不能以中文做变量名</p></li><li><p>不能是保留字</p><ul><li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">as  assert  <span class="built_in">break</span>  class  <span class="built_in">continue</span>  def  del  <span class="keyword">elif</span>  <span class="keyword">else</span>  except  <span class="built_in">exec</span>  finally  <span class="keyword">for</span>  from  global  <span class="keyword">if</span>  import  <span class="keyword">in</span>  is  lamda  not  or  pass  <span class="built_in">print</span>  raise  <span class="built_in">return</span>  try  <span class="keyword">while</span>  with  yield</span><br></pre></td></tr></table></figure></li></ul></li><li><p>所有字母都是大写表示常量</p></li></ul><h2 id="python的变量赋值"><a href="#python的变量赋值" class="headerlink" title="python的变量赋值"></a>python的变量赋值</h2><p>​    name = ‘tom’</p><p>​    Name2 = name</p><ul><li>把变量名理解为门牌号，而把其值理解为某一个房间内存回收机制</li><li>变量引用值为0时自动进行内存回收</li><li>如何·使用变量引用值变为0</li><li>del 变量名</li><li>重新给变量赋值新值</li></ul><blockquote><p>最后，给大家来一个简单的python游戏–<code>猜数字.py</code></p></blockquote><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment">#!/usr/bin/python</span></span><br><span class="line">&gt; print(<span class="string">"-------这是一个猜数字的小游戏-----------"</span>)</span><br><span class="line">&gt; guess= int(input(<span class="string">"猜数字:"</span>))</span><br><span class="line">&gt; i=<span class="number">0</span></span><br><span class="line">&gt; <span class="keyword">while</span>(guess!=<span class="number">8</span> <span class="keyword">and</span> i&lt;<span class="number">3</span>):</span><br><span class="line">&gt;     i=i+<span class="number">1</span></span><br><span class="line">&gt;     print(i)</span><br><span class="line">&gt;     <span class="keyword">if</span> guess&gt;<span class="number">8</span>:</span><br><span class="line">&gt;         print(<span class="string">'大了'</span>)</span><br><span class="line">&gt;         <span class="keyword">if</span> i==<span class="number">3</span>:</span><br><span class="line">&gt;             i=i+<span class="number">1</span></span><br><span class="line">&gt;         <span class="keyword">else</span>:</span><br><span class="line">&gt;             guess=int(input(<span class="string">'请重新输入：'</span>))</span><br><span class="line">&gt;     <span class="keyword">else</span>:</span><br><span class="line">&gt;         print(<span class="string">'小了'</span>)</span><br><span class="line">&gt;         <span class="keyword">if</span> i==<span class="number">3</span>:</span><br><span class="line">&gt;             i=i+<span class="number">1</span></span><br><span class="line">&gt;         <span class="keyword">else</span>:</span><br><span class="line">&gt;             guess=int(input(<span class="string">'请重新输入:'</span>))</span><br><span class="line">&gt;     <span class="keyword">if</span> guess==<span class="number">8</span>:</span><br><span class="line">&gt;         print(<span class="string">'猜对了，结束此游戏'</span>)</span><br><span class="line">&gt;     <span class="keyword">else</span>:</span><br><span class="line">&gt;         print(<span class="string">'你的次数已到'</span>)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h2><p>以上文本部分选自 <a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener">廖雪峰</a>老师的博客</p><p><strong>廖雪峰</strong>：十年软件开发经验，业余产品经理，精通Java/Python/Ruby/Scheme/Objective C等，对开源框架有深入研究，著有《Spring 2.0核心技术与最佳实践》一书，多个业余开源项目托管在<a href="https://github.com/michaelliao">GitHub</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="python" scheme="https://github.com/chineselijie/categories/python/"/>
    
    
      <category term="python" scheme="https://github.com/chineselijie/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>PXE无人值守安装服务器</title>
    <link href="https://github.com/chineselijie/2020/03/12/33.linux--PXE%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://github.com/chineselijie/2020/03/12/33.linux--PXE%E6%97%A0%E4%BA%BA%E5%80%BC%E5%AE%88%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2020-03-12T11:38:49.913Z</published>
    <updated>2019-09-22T15:34:56.845Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="PXE"><a href="#PXE" class="headerlink" title="PXE"></a>PXE</h2><p><strong>什么是PXE？</strong></p><p>严格来说，PXE 并不是一种安装方式，而是一种引导的方式。<br>进行 PXE 安装的必要条件是要安装的计算机中包含一个 PXE 支持的网卡（NIC）<br>即网卡中必须要有 PXE Client。PXE （Pre-boot Execution Environment）协议使计算机可以通过网络启动。</p><p>协议分为 client 和 server 端，PXE client 在网卡的 ROM 中，<br>当计算机引导时，BIOS 把 PXE client 调入内存执行，<br>由 PXE client 将放置在远端的文件通过网络下载到本地运行。</p><p>运行 PXE 协议需要设置 DHCP 服务器 和 TFTP 服务器。<br>DHCP 服务器用来给 PXE client（将要安装系统的主机）分配一个 IP 地址，<br>由于是给 PXE client 分配 IP 地址，<br>所以在配置 DHCP 服务器时需要增加相应的 PXE 设置。</p><p>此外，在 PXE client 的 ROM 中，已经存在了 TFTP Client。<br>PXE Client 通过 TFTP 协议到 TFTP Server 上下载所需的文件。</p><h2 id="kickdtart"><a href="#kickdtart" class="headerlink" title="kickdtart"></a>kickdtart</h2><p><strong>什么是kickdtart？</strong></p><p>KickStart是一种无人职守安装方式。<br>KickStart的工作原理是通过记录典型的安装过程中所需人工干预填写的各种参数，并生成一个名为 ks.cfg的文件；</p><p>在其后的安装过程中（不只局限于生成KickStart安装文件的机器）<br>当出现要求填写参数的情况时，安装程序会首先去查找 KickStart生成的文件<br>当找到合适的参数时，就采用找到的参数，<br>当没有找到合适的参数时，才需要安装者手工干预。</p><p>这样，如果KickStart文件涵盖了安装过程中出现的所有需要填写的参数时，<br>安装者完全可以只告诉安装程序从何处取ks.cfg文件，然后去忙自己的事情。<br>等安装完毕，安装程序会根据ks.cfg中设置的重启选项来重启系统，并结束安装。</p><blockquote><p>首先 我们要知道BIOS引导顺序为硬盘（在前）、网络（在后）<br>我们不必要更改BIOS引导顺序，只需要设置快速启动为网络就行</p></blockquote><h2 id="准备内容"><a href="#准备内容" class="headerlink" title="准备内容"></a>准备内容</h2><p><strong>执行 PXE + KickStart安装需要准备内容：</strong></p><ul><li>DHCP 服务器用来给客户机分配IP； </li><li>TFTP 服务器用来存放PXE的相关文件，比如：系统引导文件； </li><li>FTP 服务器用来存放系统安装文件； </li><li>KickStart所生成的ks.cfg配置文件； </li><li>带有一个 PXE 支持网卡的将安装的主机；</li></ul><h2 id="配置基本环境"><a href="#配置基本环境" class="headerlink" title="配置基本环境"></a>配置基本环境</h2><h3 id="搭建本地yum源"><a href="#搭建本地yum源" class="headerlink" title="搭建本地yum源"></a>搭建本地yum源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># cat bendi.repo</span></span><br><span class="line">[bendi]</span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># mount -a</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.7G   13G   28% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   24K  199M    1% /run/user/0</span><br></pre></td></tr></table></figure><h3 id="安装ftp服务以及开机服务，设置开机自启动"><a href="#安装ftp服务以及开机服务，设置开机自启动" class="headerlink" title="安装ftp服务以及开机服务，设置开机自启动"></a>安装ftp服务以及开机服务，设置开机自启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum install vsftpd -y</span></span><br><span class="line">·····过程省略·······</span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># systemctl start vsftpd</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># systemctl enable vsftpd</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.</span><br></pre></td></tr></table></figure><h3 id="安装tftp-修改tftp配置文件及开启服务"><a href="#安装tftp-修改tftp配置文件及开启服务" class="headerlink" title="安装tftp,修改tftp配置文件及开启服务"></a>安装tftp,修改tftp配置文件及开启服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum install tftp tftp-server xinetd -y</span></span><br><span class="line">·····过程省略······</span><br><span class="line"><span class="comment"># 配置tftp服务器：</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># vim /etc/xinetd.d/tftp</span></span><br><span class="line"><span class="comment"># 将13行以及14行改为一下内容</span></span><br><span class="line"> 13         server_args             = -s /tftpboot</span><br><span class="line"> 14         <span class="built_in">disable</span>                 = no</span><br><span class="line">[root@server222 yum.repos.d]<span class="comment">#  mkdir /tftpboot</span></span><br></pre></td></tr></table></figure><blockquote><p> server_args = -s /tftpboot 表示服务器默认的目录是/tftpboot</p></blockquote><h5 id="启动xinetd服务，查看端口是否开启"><a href="#启动xinetd服务，查看端口是否开启" class="headerlink" title="启动xinetd服务，查看端口是否开启"></a>启动xinetd服务，查看端口是否开启</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># systemctl  start xinetd</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># lsof -i :69</span></span><br><span class="line">COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">xinetd  3220 root    5u  IPv4  38515      0t0  UDP *:tftp</span><br></pre></td></tr></table></figure><blockquote><p>若没有lsof这个命令，就安装，命令：yum install lsof -y</p></blockquote><h3 id="安装dhcp，修改配置文件及开启服务"><a href="#安装dhcp，修改配置文件及开启服务" class="headerlink" title="安装dhcp，修改配置文件及开启服务"></a>安装dhcp，修改配置文件及开启服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum install dhcp -y</span></span><br><span class="line"><span class="comment"># 配置DHCP服务</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># cp /usr/share/doc/dhcp-4.2.5/dhcpd.conf.example /etc/dhcp/dhcpd.conf</span></span><br><span class="line">cp：是否覆盖<span class="string">"/etc/dhcp/dhcpd.conf"</span>？ y</span><br></pre></td></tr></table></figure><blockquote><p>给DHCP服务添加一张VMNET4网卡，IP设置为192.168.1.10</p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/u9WmUs.jpg" alt="u9WmUs.jpg"></p><p><img src="https://s2.ax1x.com/2019/09/22/u9WN5R.jpg" alt="u9WN5R.jpg"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:42:82:3a brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.176.222/24 brd 192.168.176.255 scope global ens33</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::1bd0:d77:f2c2:6f3/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN qlen 1000</span><br><span class="line">    link/ether 52:54:00:3a:c5:62 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN qlen 1000</span><br><span class="line">    link/ether 52:54:00:3a:c5:62 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">6: ens37: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:42:82:44 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet6 fe80::e149:fe60:a92f:1d60/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><blockquote><p>此时就会发现ens37这个网卡，下面来给此网卡配一个IP</p></blockquote><p>[root@server222 yum.repos.d]# ifconfig ens37 192.168.1.10/24</p><blockquote><p>下面就可以更改配置文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yum.repos.d]<span class="comment"># cd /etc/dhcp/</span></span><br><span class="line">[root@server222 dhcp]<span class="comment"># ls</span></span><br><span class="line">dhclient.d  dhclient-exit-hooks.d  dhcpd6.conf  dhcpd.conf  scripts</span><br><span class="line">[root@server222 dhcp]<span class="comment"># &gt; dhcpd.conf</span></span><br><span class="line">[root@server222 dhcp]<span class="comment"># vim dhcpd.conf</span></span><br><span class="line">[root@server222 dhcp]<span class="comment"># cat dhcpd.conf</span></span><br><span class="line">subnet 192.168.1.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 192.168.1.100 192.168.1.200; <span class="comment"># 地址池</span></span><br><span class="line">  option domain-name-servers 192.168.1.1; <span class="comment"># dns</span></span><br><span class="line">  option domain-name <span class="string">"internal.example.org"</span>; <span class="comment"># 域名</span></span><br><span class="line">  option routers 192.168.1.1; <span class="comment"># 默认网关</span></span><br><span class="line">  option broadcast-address 192.168.1.255; <span class="comment"># 广播地址</span></span><br><span class="line">  default-lease-time 600; <span class="comment"># 默认租约期限</span></span><br><span class="line">  max-lease-time 7200; <span class="comment"># 最大租约期限</span></span><br><span class="line">  next-server 192.168.1.10; <span class="comment"># 下一跳</span></span><br><span class="line">  filename <span class="string">"pxelinux.0"</span>; <span class="comment"># 定义pxe</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@server222 dhcp]<span class="comment">#</span></span><br></pre></td></tr></table></figure><blockquote><p>此处配置完，先不启动DHCP ，等所有的软件安装好，最后来启动。</p></blockquote><h2 id="配置使用PXE启动所需相关文件"><a href="#配置使用PXE启动所需相关文件" class="headerlink" title="配置使用PXE启动所需相关文件"></a>配置使用PXE启动所需相关文件</h2><p>[root@server222 dhcp]# yum install system-config-kickstart syslinux -y</p><h3 id="准备tftp需要共享出去的文件"><a href="#准备tftp需要共享出去的文件" class="headerlink" title="准备tftp需要共享出去的文件"></a>准备tftp需要共享出去的文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 dhcp]<span class="comment"># cd /tftpboot/</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># mkdir pxelinux.cfg</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># ls</span></span><br><span class="line">pxelinux.cfg</span><br><span class="line">[root@server222 tftpboot]<span class="comment"># cp /usr/share/syslinux/pxelinux.0 /tftpboot/</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># cp /mnt/cdrom/images/pxeboot/initrd.img /tftpboot/</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># cp /mnt/cdrom/images/pxeboot/vmlinuz /tftpboot/</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># cp /mnt/cdrom/isolinux/isolinux.cfg /tftpboot/pxelinux.cfg/default</span></span><br></pre></td></tr></table></figure><blockquote><p><code>/usr/share/syslinux/pxelinux.0</code> 开机启动引导文件<br><code>/mnt/cdrom/images/pxeboot/initrd.img</code> 内核初始化文件（在镜像里面）<br> <code>/mnt/cdrom/images/pxeboot/vmlinuz</code> 内核初始化文件<br><code>/mnt/cdrom/isolinux/isolinux.cfg</code> 开机引导文件</p></blockquote><h3 id="修改default，指定安装操作系统的方式和ks-cfg文件路径"><a href="#修改default，指定安装操作系统的方式和ks-cfg文件路径" class="headerlink" title="修改default，指定安装操作系统的方式和ks.cfg文件路径"></a>修改default，指定安装操作系统的方式和ks.cfg文件路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tftpboot]<span class="comment"># vim /tftpboot/pxelinux.cfg/default</span></span><br><span class="line"> 1 default linux    <span class="comment"># 指定默认入口名称</span></span><br><span class="line"> 64 append initrd=initrd.img inst.repo=ftp://192.168.1.10/pub inst.ks=ftp://192.168.1.10/ks.cfg <span class="comment"># 通过ftp服务器方式来访问kickstart文件</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment">#</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># chmod 644 /tftpboot/pxelinux.cfg/default</span></span><br></pre></td></tr></table></figure><h3 id="将光盘挂在到pub目录下-并更改源位置"><a href="#将光盘挂在到pub目录下-并更改源位置" class="headerlink" title="将光盘挂在到pub目录下,并更改源位置"></a>将光盘挂在到pub目录下,并更改源位置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tftpboot]<span class="comment"># mount /dev/cdrom /var/ftp/pub/</span></span><br><span class="line">mount: /dev/sr0 写保护，将以只读方式挂载</span><br><span class="line">[root@server222 tftpboot]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">/dev/cdrom      /var/ftp/pub    iso9660                 defaults        0 0</span><br><span class="line">[root@server222 tftpboot]<span class="comment"># </span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># vim /etc/yum.repos.d/bendi.repo</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># cat /etc/yum.repos.d/bendi.repo</span></span><br><span class="line">[development]       <span class="comment"># 此处要改成development</span></span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///var/ftp/pub</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 tftpboot]<span class="comment"># </span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># umount /mnt/cdrom/</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># mount -a</span></span><br><span class="line">[root@server222 tftpboot]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.8G   13G   28% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   20K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /var/ftp/pub</span><br><span class="line">[root@server222 tftpboot]<span class="comment">#</span></span><br></pre></td></tr></table></figure><blockquote><p>确保<code>/etc/yum.repos.d/</code>目录下仅仅只有一个配置文件</p></blockquote><h3 id="安装system-config-kickstart软件包"><a href="#安装system-config-kickstart软件包" class="headerlink" title="安装system-config-kickstart软件包"></a>安装system-config-kickstart软件包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tftpboot]<span class="comment"># system-config-kickstart</span></span><br></pre></td></tr></table></figure><blockquote><p>如果报出一下错误，请在图形界面中打开终端进行再次输入命令，因为文本界面弹不出来一个界面<br>Could not open display because no X server is running.<br>Try running ‘system-config-kickstart –help’ for a list of options.</p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/uCkLzn.png" alt="uCkLzn.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCkjs0.png" alt="uCkjs0.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCkzZT.png" alt="uCkzZT.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAKFe.png" alt="uCAKFe.png"></p><blockquote><p>网络配置以及防火墙配置可以先不用配置，默认自动分配IP</p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/uCAaFg.png" alt="uCAaFg.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAwWj.png" alt="uCAwWj.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCADln.png" alt="uCADln.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAsO0.png" alt="uCAsO0.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAXfH.png" alt="uCAXfH.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAx1A.png" alt="uCAx1A.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCKsd1.png" alt="uCKsd1.png"></p><p><img src="https://s2.ax1x.com/2019/09/22/uCAz6I.png" alt="uCAz6I.png"></p><blockquote><p>脚本文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'[rhel-source]</span></span><br><span class="line"><span class="string">name=Red Hat Enterprise Linux</span></span><br><span class="line"><span class="string">baseurl=file:///mnt/cdrom</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0'</span> &gt; /etc/yum.repos.d/rhel7.repo</span><br></pre></td></tr></table></figure><blockquote><p>ctrl + s 保存并退出</p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/uCEM7T.png" alt="uCEM7T.png"></p><h3 id="将ks-cfg复制进pub目录"><a href="#将ks-cfg复制进pub目录" class="headerlink" title="将ks.cfg复制进pub目录"></a>将ks.cfg复制进pub目录</h3><blockquote><p>ks.cfg就是无人值守安装时要用的Kickstart文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 pub]<span class="comment"># cd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       ks.cfg  模板  图片  下载  桌面</span><br><span class="line">initial-setup-ks.cfg  公共    视频  文档  音乐</span><br><span class="line">[root@server222 ~]<span class="comment"># cp ks.cfg /var/ftp/</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart vsftpd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl start dhcpd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable vsftpd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable dhcpd</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/dhcpd.service to /usr/lib/systemd/system/dhcpd.service.</span><br></pre></td></tr></table></figure><h2 id="关闭selinux以及防火墙"><a href="#关闭selinux以及防火墙" class="headerlink" title="关闭selinux以及防火墙"></a>关闭selinux以及防火墙</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server222 ~]<span class="comment"># awk -F '=' 'NR==7 &#123;print $2&#125;' /etc/selinux/config</span></span><br><span class="line">disabled</span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl stop firewalld.service</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl disable firewalld.service</span></span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span><br><span class="line">Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span><br></pre></td></tr></table></figure><h2 id="无人安装系统"><a href="#无人安装系统" class="headerlink" title="无人安装系统"></a>无人安装系统</h2><blockquote><p>如果是服务器，请忽略这步创建虚拟机</p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/uCe54O.png" alt="uCe54O.png"></p><blockquote><p>创建虚拟机的步骤不再演示，只演示重要部分</p></blockquote><blockquote><p>此处网卡需要vmnet4，另外硬盘最好单个文件，给30GB<br><img src="https://s2.ax1x.com/2019/09/22/uCevUf.png" alt="uCevUf.png"></p></blockquote><blockquote><p>开始识别tftp，然后装系统<br><img src="https://s2.ax1x.com/2019/09/22/uCm8Vx.png" alt="uCm8Vx.png"></p></blockquote><p><img src="https://s2.ax1x.com/2019/09/22/uCmBqI.png" alt="uCmBqI.png"></p><h2 id="至此PXE无人安装操作系统已经安装完成"><a href="#至此PXE无人安装操作系统已经安装完成" class="headerlink" title="至此PXE无人安装操作系统已经安装完成"></a>至此PXE无人安装操作系统已经安装完成</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/categories/linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/tags/linux%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>LAMP</title>
    <link href="https://github.com/chineselijie/2020/03/12/32.linux--LAMP/"/>
    <id>https://github.com/chineselijie/2020/03/12/32.linux--LAMP/</id>
    <published>2020-03-12T11:38:49.903Z</published>
    <updated>2019-08-30T16:17:56.666Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h2><p><strong>LAMP</strong>是指一组通常一起使用来运行动态网站或者服务器的<a href="https://baike.baidu.com/item/自由软件" target="_blank" rel="noopener">自由软件</a>名称首字母缩写。</p><ul><li><a href="https://baike.baidu.com/item/Linux" target="_blank" rel="noopener"><strong>L</strong>inux</a>，<a href="https://baike.baidu.com/item/操作系统" target="_blank" rel="noopener">操作系统</a></li><li><a href="https://baike.baidu.com/item/Apache" target="_blank" rel="noopener"><strong>A</strong>pache</a>，网页服务器</li><li><a href="https://baike.baidu.com/item/MariaDB" target="_blank" rel="noopener"><strong>M</strong>ariaDB</a>或<a href="https://baike.baidu.com/item/MySQL" target="_blank" rel="noopener"><strong>M</strong>ySQL</a>，<a href="https://baike.baidu.com/item/数据库管理系统" target="_blank" rel="noopener">数据库管理系统</a>（或者<a href="https://baike.baidu.com/item/数据库服务器" target="_blank" rel="noopener">数据库服务器</a>）</li><li><a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener"><strong>P</strong>HP</a>、<a href="https://baike.baidu.com/item/Perl" target="_blank" rel="noopener"><strong>P</strong>erl</a>或<a href="https://baike.baidu.com/item/Python" target="_blank" rel="noopener"><strong>P</strong>ython</a>，<a href="https://baike.baidu.com/item/脚本语言" target="_blank" rel="noopener">脚本语言</a></li></ul><p>虽然这些<a href="https://baike.baidu.com/item/开放源代码" target="_blank" rel="noopener">开放源代码</a>程序本身并不是专门设计成同另几个程序一起工作的，但由于它们的廉价和普遍，这个组合开始流行（大多数<a href="https://baike.baidu.com/item/Linux发行版本" target="_blank" rel="noopener">Linux发行版本</a>捆绑了这些软件）。当一起使用的时候，它们表现的像一个具有活力的“解决方案包”（Solution Packages）。其他的方案包有<a href="https://baike.baidu.com/item/苹果" target="_blank" rel="noopener">苹果</a>的<a href="https://baike.baidu.com/item/WebObjects" target="_blank" rel="noopener">WebObjects</a>（最初是<a href="https://baike.baidu.com/item/应用服务器" target="_blank" rel="noopener">应用服务器</a>），<a href="https://baike.baidu.com/item/Java" target="_blank" rel="noopener">Java</a>/<a href="https://baike.baidu.com/item/J2EE" target="_blank" rel="noopener">J2EE</a>和<a href="https://baike.baidu.com/item/微软" target="_blank" rel="noopener">微软</a>的<a href="https://baike.baidu.com/item/.NET" target="_blank" rel="noopener">.NET</a>架构。</p><p>“LAMP包”的脚本组件中包括了<a href="https://baike.baidu.com/item/CGI" target="_blank" rel="noopener">CGI</a><a href="https://baike.baidu.com/item/web" target="_blank" rel="noopener">web</a>接口，它在90年代初期变得流行。这个技术允许<a href="https://baike.baidu.com/item/网页浏览器" target="_blank" rel="noopener">网页浏览器</a>的用户在服务器上执行一个程序，并且和接受静态的内容一样接受动态的内容。程序员使用<a href="https://baike.baidu.com/item/脚本语言" target="_blank" rel="noopener">脚本语言</a>来创建这些程序因为它们能很容易有效的操作文本流，甚至当这些文本流并非源自程序自身时也是。正是由于这个原因系统设计者经常称这些脚本语言为<a href="https://baike.baidu.com/item/胶水语言" target="_blank" rel="noopener">胶水语言</a>。</p><p>Michael Kunze在一篇为德国计算机杂志《c’t》（1998，第12期，230页）而写的文章中使用了缩略语“LAMP”。这篇文章意在展示一系列的自由软件成为了商业包的替换物。由于IT世界众所周知的对缩写的爱好，Kunze提出“LAMP”这一容易被市场接受的术语来普及自由软件的使用。</p><h2 id="web服务"><a href="#web服务" class="headerlink" title="web服务"></a>web服务</h2><p><strong>WEB</strong>服务器也称为WWW(WORLD WIDE WEB，万维网)服务器，主要功能是提供网上信息浏览服务。</p><p><strong>常见web服务器（web）：</strong></p><p> httpd（apache）、nginx+PHP</p><p>tomcat：   jsp + htm</p><p>win:IIS</p><p>客户端：IE 、firefox、chrome、手机（浏览器）Browser</p><h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><p><strong>Apache HTTPD Server</strong> 简称 Apache，是 Apache 软件基金会的一个开源的网页服务器， 可以在大多数计算机操作系统中运行，由于其多平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。它快速、可靠并且可通过简单的 API 扩展，将 Perl/Python 等解释器编 译到服务器中！Apache HTTP 服务器是一个模块化的服务器,各个功能使用模块化进行插拔！ 目前支持 Windows，Linux，Unix 等平台！</p><p><strong>Apache</strong> 软件基金会（也就是 Apache Software Foundation，简称为 ASF），是专门为运 作一个开源软件项目的 Apache 的团体提供支持的非盈利性组织，这个开源软件项目就是 Apache 项目！那么我们的 HTTPD 也只是 Apache 的开源项目之一！</p><p><strong>主要的开源项目</strong>：HTTP Server，Ant，DB，iBATIS，Jakarta，Logging，Maven，Struts， Tomcat，Tapestry,Hadoop 等等。只是最有名的是 HTTP Server，所以现在所说的 Apache 已 经就是 HTTPD Server 的代号了! 我们还见的比较多的是 Tomcat，Hadoop 等项目</p><p>官方网站：<a href="http://www.apache.org/" target="_blank" rel="noopener">Apache</a></p><p>httpd：<a href="http://httpd.apache.org/" target="_blank" rel="noopener">httpd.apache</a></p><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p><strong>MySQL</strong>是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 旗下公司，他也是最流行的关系型数据库管理系统！特别是在 WEB 应用方面！</p><p><strong>关系型数据库</strong>：它通过数据、关系和对数据的约束三者组成的数据模型来存放和管理数据</p><p>官方网站：<a href="http://www.mysql.com/" target="_blank" rel="noopener">mysql</a></p><h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><p><strong>PHP</strong>（外文名:PHP: Hypertext Preprocessor，中文名：“超文本预处理器”）是一种通 用开源脚本语言。语法吸收了 C 语言、Java 和 Perl 的特点，利于学习，使用广泛，主要适 用于 Web 开发领域。PHP 独特的语法混合了 C、Java、Perl 以及 PHP 自创的语法。它可以 比 CGI 或者 Perl 更快速地执行动态网页。用 PHP 做出的动态页面与其他的编程语言相比， PHP 是将程序嵌入到 HTML（标准通用标记语言下的一个应用）文档中去执行，执行效率比 完全生成 HTML 标记的 CGI 要高许多；PHP 还可以执行编译后代码，编译可以达到加密和 优化代码运行，使代码运行更快。</p><p>简单的说，PHP 就是一个脚本解释器！ </p><p>官方网站：<a href="http://php.net/" target="_blank" rel="noopener">php</a></p><h2 id="LAMP工作原理"><a href="#LAMP工作原理" class="headerlink" title="LAMP工作原理"></a>LAMP工作原理</h2><p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1566921823529.png" alt="1566921823529"></p><p><strong>Web 服务器的工作模式和端口</strong></p><p>工作模式是：B/S 模式</p><p>工作端口是：80/http 正常端口443/https SSL 端口</p><p><strong>搭建网易yum源</strong></p><blockquote><p>准备之前我们需要搭建一下网易的yum源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server222 ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span></span><br><span class="line">&gt; [root@server222 ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">&gt; [root@server222 yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">&gt; [root@server222 yum.repos.d]<span class="comment"># yum makecache</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="源码编译安装Apache"><a href="#源码编译安装Apache" class="headerlink" title="源码编译安装Apache"></a>源码编译安装Apache</h2><blockquote><p>下载传到<code>/usr/local/src/</code>目录下面</p></blockquote><p><strong>安装gcc、pcre-devel</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># yum install gcc -y</span></span><br><span class="line">[root@server222 src]<span class="comment"># yum install pcre pcre-devel -y</span></span><br></pre></td></tr></table></figure><p><strong>apr源码包编译</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># tar -xzvf apr-1.6.5.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd apr-1.6.5/</span></span><br><span class="line">[root@server222 apr-1.6.5]<span class="comment"># ./configure --prefix=/usr/local/apr ; make ; make install</span></span><br></pre></td></tr></table></figure><p><strong>apr-util源码包编译</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 apr-1.6.5]<span class="comment"># cd ..</span></span><br><span class="line">[root@server222 src]<span class="comment"># tar -xzvf apr-util-1.6.1.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd apr-util-1.6.1/</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr ; make ; make install</span></span><br></pre></td></tr></table></figure><blockquote><p>如果在编译途中遇到这样的错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; 编译中断。</span><br><span class="line">&gt; make[1]: *** [xml/apr_xml.lo] 错误 1</span><br><span class="line">&gt; make[1]: 离开目录“/usr/<span class="built_in">local</span>/src/apr-util-1.6.1”</span><br><span class="line">&gt; make: *** [all-recursive] 错误 1</span><br><span class="line">&gt; /bin/sh /usr/<span class="built_in">local</span>/apr/build-1/libtool --silent --mode=compile gcc -g -O2 -pthread   -DHAVE_CONFIG_H  -DLINUX -D_REENTRANT -D_GNU_SOURCE   -I/usr/<span class="built_in">local</span>/src/apr-util-1.6.1/include -I/usr/<span class="built_in">local</span>/src/apr-util-1.6.1/include/private  -I/usr/<span class="built_in">local</span>/apr/include/apr-1    -o xml/apr_xml.lo -c xml/apr_xml.c &amp;&amp; touch xml/apr_xml.lo</span><br><span class="line">&gt; xml/apr_xml.c:35:19: 致命错误：expat.h：没有那个文件或目录</span><br><span class="line">&gt;  <span class="comment">#include &lt;expat.h&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>请运行<code>yum install expat-devel -y</code> 这么一个命令</p><p>再次编译就好了</p></blockquote><p><strong>创建用户与组</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># groupadd -r apache</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># useradd -r -g apache apache -s /sbin/nologin</span></span><br></pre></td></tr></table></figure><p><strong>httpd源码包编译</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># cd ..</span></span><br><span class="line">[root@server222 src]<span class="comment"># tar -xzvf httpd-2.4.38.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd httpd-2.4.38/</span></span><br><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># ./configure --prefix=/usr/local/apache --sysconfdir=/etc/httpd24 --enable-so --enable-ssl --enable-cgi --enable-rewrite --with-zlib --with-pcre --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util --enable-modules=most --enable-mpms-shared=all --with-mpm=prefork</span></span><br></pre></td></tr></table></figure><blockquote><p>若遇到这种情况：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; configure: WARNING: OpenSSL version is too old</span><br><span class="line">&gt; no</span><br><span class="line">&gt; checking whether to <span class="built_in">enable</span> mod_ssl... configure: error: mod_ssl has been requested but can not be built due to prerequisite failures</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>请执行<code>yum install openssl-devel -y</code>一条命令</p><p>再次执行上一步编译</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># make ; make install</span></span><br></pre></td></tr></table></figure><p><strong>启动服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># /usr/local/apache/bin/apachectl</span></span><br><span class="line">AH00558: httpd: Could not reliably determine the server<span class="string">'s fully qualified domain name, using fe80::1bd0:d77:f2c2:6f3. Set the '</span>ServerName<span class="string">' directive globally to suppress this message</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.38]# /usr/local/apache/bin/apachectl</span></span><br><span class="line"><span class="string">AH00558: httpd: Could not reliably determine the server'</span>s fully qualified domain name, using fe80::1bd0:d77:f2c2:6f3. Set the <span class="string">'ServerName'</span> directive globally to suppress this message</span><br><span class="line">httpd (pid 114412) already running</span><br><span class="line"><span class="comment"># 此处出来这么一大串鬼东西，其实httpd已经在运行了</span></span><br><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># netstat -antup | grep httpd</span></span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      114412/httpd</span><br></pre></td></tr></table></figure><blockquote><p>此处教一下字符界面的浏览器，命令<code>yum install elinks.x86_64 -y</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># yum install elinks.x86_64 -y</span></span><br><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># elinks 192.168.176.222</span></span><br></pre></td></tr></table></figure><blockquote><p>第一次访问点击OK，之后就可以看到页面显示“<strong>It works!</strong>”，到此处 Apache搭建完成</p></blockquote><h2 id="添加systemd的服务脚本"><a href="#添加systemd的服务脚本" class="headerlink" title="添加systemd的服务脚本"></a>添加systemd的服务脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 httpd-2.4.38]<span class="comment"># cd /usr/lib/systemd/system</span></span><br><span class="line">[root@server222 system]<span class="comment"># vim httpd.service</span></span><br><span class="line">[root@server222 system]<span class="comment"># cat httpd.service</span></span><br><span class="line"><span class="comment"># 添加内容如下</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=The Apache HTTP Server</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line">Documentation=man:httpd(8)</span><br><span class="line">Documentation=man:apachectl(8)</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/apache/bin/httpd -DFOREGROUND</span><br><span class="line">ExecReload=/usr/<span class="built_in">local</span>/apache/bin/httpd -k graceful</span><br><span class="line">ExecStop=/bin/<span class="built_in">kill</span> -WINCH <span class="variable">$&#123;MAINPID&#125;</span></span><br><span class="line"></span><br><span class="line">KillSignal=SIGCONT</span><br><span class="line">PrivateTmp=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p><strong>启动服务测试</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 system]<span class="comment"># systemctl start httpd</span></span><br><span class="line">[root@server222 system]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@server222 system]<span class="comment"># systemctl status httpd</span></span><br><span class="line">● httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 五 2019-08-30 20:31:20 CST; 1s ago</span><br><span class="line">     Docs: man:httpd(8)</span><br><span class="line">           man:apachectl(8)</span><br><span class="line">  Process: 114744 ExecStop=/bin/<span class="built_in">kill</span> -WINCH <span class="variable">$&#123;MAINPID&#125;</span> (code=exited, status=1/FAILURE)</span><br><span class="line"> Main PID: 114756 (httpd)</span><br><span class="line">   CGroup: /system.slice/httpd.service</span><br><span class="line">           └─114756 /usr/<span class="built_in">local</span>/apache/bin/httpd -DFOREGROUND</span><br><span class="line"></span><br><span class="line">8月 30 20:31:20 server222 systemd[1]: Started The Apache HTTP Server.</span><br><span class="line">8月 30 20:31:20 server222 systemd[1]: Starting The Apache HTTP Server...</span><br></pre></td></tr></table></figure><h2 id="YUM安装LAMP环境"><a href="#YUM安装LAMP环境" class="headerlink" title="YUM安装LAMP环境"></a>YUM安装LAMP环境</h2><p><strong>LAMP=Linux（存在）+Apache（HTTPD   已安装）</strong>+Mysql+PHP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># yum -y install httpd mariadb mariadb-server php php-mysql</span></span><br><span class="line">[root@server222 src]<span class="comment"># systemctl start mariadb.service</span></span><br><span class="line">[root@server222 src]<span class="comment"># systemctl enable mariadb.service</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</span><br></pre></td></tr></table></figure><p><strong><strong>初始化数据库</strong></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># mysql_secure_installation</span></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MariaDB to secure it, we<span class="string">'ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you'</span>ve just installed MariaDB, and</span><br><span class="line">you haven<span class="string">'t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Enter current password for root (enter for none):</span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MariaDB</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Set root password? [Y/n]</span></span><br><span class="line"><span class="string">New password:</span></span><br><span class="line"><span class="string">Re-enter new password:</span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MariaDB installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MariaDB without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n]</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from '</span>localhost<span class="string">'.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n]</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MariaDB comes with a database named '</span><span class="built_in">test</span><span class="string">' that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n]</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n]</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Cleaning up...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">All done!  If you'</span>ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using MariaDB!</span><br></pre></td></tr></table></figure><p><strong>测试数据库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># mysql -uroot -p123456</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 11</span><br><span class="line">Server version: 5.5.60-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><p><strong>测试apache是否支持PHP</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># cd /var/www/html/</span></span><br><span class="line">[root@server222 html]<span class="comment"># vim index.php</span></span><br><span class="line">[root@server222 html]<span class="comment"># cat index.php</span></span><br><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line">[root@server222 html]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@server222 html]<span class="comment"># elinks 192.168.176.222</span></span><br></pre></td></tr></table></figure><h2 id="修改配置文件，实战举例"><a href="#修改配置文件，实战举例" class="headerlink" title="修改配置文件，实战举例"></a>修改配置文件，实战举例</h2><p>例1： 搭建一台测试web服务器</p><p>案例：</p><p>部门内部搭建一台WEB服务器，采用的IP地址和端口为192.168.0.63:80，首页采用index.html</p><p>文件。管理员E-mail地址为 <a href="mailto:775531910@qq.com" target="_blank" rel="noopener">775531910@qq.com</a>，网页的编码类型采用UTF-8，所有网站资源都存放在/var/www/html目录下，并将Apache的配置文件根目录设置为/etc/httpd目录。</p><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 html]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line"> 31 ServerRoot <span class="string">"/etc/httpd"</span>  <span class="comment">#apache配置文件的根目录 </span></span><br><span class="line"> 42 Listen 80  <span class="comment">#监听的端口</span></span><br><span class="line"> 86 ServerAdmin r775531910@qq.com   <span class="comment">#设置管理员，e-mail 地址</span></span><br><span class="line"> 95 <span class="comment">#ServerName www.example.com:80   #服务器主机名</span></span><br><span class="line">119 DocumentRoot <span class="string">"/var/www/html"</span>   <span class="comment">#网站页面根目录</span></span><br><span class="line">144 Options Indexes FollowSymLinks  <span class="comment">#当一个目录没有默认首页时，允许显示此目录列表</span></span><br><span class="line">164 DirectoryIndex index.html index.php  <span class="comment">#指定默认首页</span></span><br></pre></td></tr></table></figure><p><strong>取消apache默认欢迎页：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 html]<span class="comment"># vim /etc/httpd/conf.d/welcome.conf</span></span><br><span class="line"><span class="comment"># 将下面的四行注释掉</span></span><br><span class="line"><span class="comment">#&lt;LocationMatch "^/+$"&gt;</span></span><br><span class="line"><span class="comment">#    Options -Indexes</span></span><br><span class="line"><span class="comment">#    ErrorDocument 403 /.noindex.html</span></span><br><span class="line"><span class="comment">#&lt;/LocationMatch&gt;</span></span><br></pre></td></tr></table></figure><p><strong>创建首页：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 html]<span class="comment"># systemctl restart httpd.service</span></span><br><span class="line">[root@server222 html]<span class="comment"># echo 'welcome to haahahahahah775531910'  &gt; /var/www/html/index.html</span></span><br><span class="line">[root@server222 html]<span class="comment"># systemctl restart httpd.service</span></span><br></pre></td></tr></table></figure><p><strong>测试</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 html]<span class="comment"># elinks 192.168.176.222</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/categories/linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/tags/linux%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>zabbix</title>
    <link href="https://github.com/chineselijie/2020/03/12/31.linux--zabbix/"/>
    <id>https://github.com/chineselijie/2020/03/12/31.linux--zabbix/</id>
    <published>2020-03-12T11:38:49.851Z</published>
    <updated>2019-08-28T15:16:47.920Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="zabbix"><a href="#zabbix" class="headerlink" title="zabbix"></a>zabbix</h2><p>官方网站：<a href="http://www.zabbix.com/" target="_blank" rel="noopener">zabbix</a></p><p><strong>zabbix</strong>（[`zæbiks]）是一个基于WEB界面的提供分布式<a href="https://baike.baidu.com/item/系统监视" target="_blank" rel="noopener">系统监视</a>以及网络监视功能的企业级的开源解决方案。</p><p>zabbix能监视各种网络参数，保证<a href="https://baike.baidu.com/item/服务器系统/2997788" target="_blank" rel="noopener">服务器系统</a>的安全运营；并提供灵活的通知机制以让<a href="https://baike.baidu.com/item/系统管理员/1503845" target="_blank" rel="noopener">系统管理员</a>快速定位/解决存在的各种问题。</p><p>zabbix由2部分构成，zabbix server与可选组件zabbix agent。</p><p>zabbix server可以通过<a href="https://baike.baidu.com/item/SNMP" target="_blank" rel="noopener">SNMP</a>，zabbix agent，<a href="https://baike.baidu.com/item/ping/6235" target="_blank" rel="noopener">ping</a>，端口监视等方法提供对远程服务器/网络状态的监视，<a href="https://baike.baidu.com/item/数据收集/2245693" target="_blank" rel="noopener">数据收集</a>等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。</p><p><strong>zabbix</strong>（音同 zæbix）是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。</p><p>zabbix能监视各种网络参数，保证服务器系统的安全运营；并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。</p><p>zabbix由2部分构成，zabbix server与可选组件zabbix agent</p><p><strong>zabbix server</strong>可以通过SNMP，zabbix agent，ping，端口监视等方法提供对远程服务器/网络状态的监视，数据收集等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。</p><p><strong>zabbix agent</strong>需要安装在被监视的目标服务器上，它主要完成对硬件信息或与操作系统有关的内存，CPU等信息的收集。</p><p><strong>zabbix server</strong>可以单独监视远程服务器的服务状态；同时也可以与zabbix agent配合，可以轮询zabbix agent主动接收监视数据（trapping方式），同时还可被动接收zabbix agent发送的数据（trapping方式）。</p><h2 id="zabbix主要特点"><a href="#zabbix主要特点" class="headerlink" title="zabbix主要特点"></a>zabbix主要特点</h2><ul><li>安装与配置简单，学习成本低</li><li>支持多语言（包括中文）</li><li>免费开源</li><li>自动发现服务器与网络设备</li><li>分布式监视以及WEB集中管理功能</li><li>可以无agent监视</li><li>用户安全认证和柔软的授权方式</li><li>通过WEB界面设置或查看监视结果</li><li>email等通知功能</li></ul><h2 id="zabbix主要功能"><a href="#zabbix主要功能" class="headerlink" title="zabbix主要功能"></a>zabbix主要功能</h2><ul><li>CPU负荷</li><li>内存使用</li><li>磁盘使用</li><li>网络状况</li><li>端口监视</li><li>日志监视</li><li>插件开发自定义</li></ul><h2 id="zabbix运行机制"><a href="#zabbix运行机制" class="headerlink" title="zabbix运行机制"></a>zabbix运行机制</h2><p>Zabbix Server 和 Zabbix agent</p><p>Zabbix Server 可以通过 SNMP，Zabbix agent，Ping，端口监视等你方法提供对远程服务器/网络状态的 监视，数据收集功能，可以在运行 Linux，Solaris，HP-UX，AIX，FreeBSD，OpenBSD，OX X，Windows 多 平台。</p><p>Zabbix Agent 安装在需要被监控的目标服务器上，主要完成对硬件信息与操作系统有关的内存，CPU 等你 信息收集。</p><p>Zabbix Server 可以单独监视远程服务器的服务状态，同时也可以与 Zabbix Agent 结合。可以轮询 Zabbix Agent 主动接收监视数据（trapping 传递 方式），同时还可以被动接收 Zabbix Agent 发送的数据。</p><h2 id="zabbix运行过程图"><a href="#zabbix运行过程图" class="headerlink" title="zabbix运行过程图"></a>zabbix运行过程图</h2><p><img src="https://s2.ax1x.com/2019/08/26/mfbKJJ.png" alt></p><p>Zabbix 支持多种网络方式下的监控，可以通过分布式的部署和安装监控代理 Zabbix，通过 C/S 模式采集数据，通过 B/S 模式在 Web 端展示和配置！Agent 监控端口 10050</p><p>服务端安装 Zabbix Server 和 Zabbix Agent 两个服务，客户端只安装 Zabbix Agent 一个服务，监控原理 就是 Zabbix Agent 服务将从系统中获取的相关数据传送给 Zabbix Server，然后 Zabbix Server 服务奖数据分 析之后以 PHP 页面展示出来！</p><h2 id="源码编译LNMP"><a href="#源码编译LNMP" class="headerlink" title="源码编译LNMP"></a>源码编译LNMP</h2><blockquote><p>如果不知道LNMP是什么的，可以看下这篇博文：<a href="https://chineselijie.github.io/2019/08/22/1.linux--LNMP/" target="_blank" rel="noopener">搭建LNMP</a></p></blockquote><h2 id="搭建网易yum源"><a href="#搭建网易yum源" class="headerlink" title="搭建网易yum源"></a>搭建网易yum源</h2><blockquote><p>此处如果不搭建网易的yum源，后面安装依赖包有一个在本地yum源中是没有的</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span></span><br><span class="line">[root@server222 ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure><h2 id="zabbix安装"><a href="#zabbix安装" class="headerlink" title="zabbix安装"></a>zabbix安装</h2><p><strong>安装依赖包</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum -y install net-snmp-devel libevent-devel</span></span><br></pre></td></tr></table></figure><p><strong>上传zabbix源码包到<code>/usr/local/src/</code>目录</strong></p><blockquote><p>源码包：</p><p>链接：<a href="https://pan.baidu.com/s/1g2fs-4VRmsnjk1egj9VQJQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1g2fs-4VRmsnjk1egj9VQJQ</a><br>提取码：euq4<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p></blockquote><p><strong>解压zabbix</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src/</span></span><br><span class="line">[root@server222 src]<span class="comment"># tar -zxvf zabbix-4.0.3.tar.gz</span></span><br></pre></td></tr></table></figure><p><strong>创建用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># groupadd zabbix</span></span><br><span class="line">[root@server222 src]<span class="comment"># useradd -s /sbin/nologin -g zabbix zabbix</span></span><br></pre></td></tr></table></figure><p><strong>配置zabbix数据库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># mysql -uroot -p123456</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 13</span><br><span class="line">Server version: 5.6.19 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; create database zabbix;</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant all on zabbix.* to zabbix@localhost identified by <span class="string">'zabbix'</span>;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line">[root@server222 src]<span class="comment"># cd zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/schema.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/images.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/data.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p><strong>编译安装zabbix</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># ./configure --prefix=/usr/local/zabbix --enable-server --enable-agent --with-mysql=/usr/local/mysql/bin/mysql_config --with-net-snmp --with-libcurl</span></span><br></pre></td></tr></table></figure><blockquote><p>如果出现这样一个界面就表示编译完成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; ***********************************************************</span><br><span class="line">&gt; *            Now run <span class="string">'make install'</span>                       *</span><br><span class="line">&gt; *                                                         *</span><br><span class="line">&gt; *            Thank you <span class="keyword">for</span> using Zabbix!                  *</span><br><span class="line">&gt; *              &lt;http://www.zabbix.com&gt;                    *</span><br><span class="line">&gt; ***********************************************************</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># make install</span></span><br></pre></td></tr></table></figure><p><strong>编译成功会产生</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># ls /usr/local/zabbix/</span></span><br><span class="line">bin  etc  lib  sbin  share</span><br></pre></td></tr></table></figure><h2 id="配置zabbix"><a href="#配置zabbix" class="headerlink" title="配置zabbix"></a>配置zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/zabbix/etc/zabbix_server.conf</span></span><br><span class="line"></span><br><span class="line">85 DBHost=localhost</span><br><span class="line"></span><br><span class="line">94 DBName=zabbix</span><br><span class="line"></span><br><span class="line">110 DBUser=zabbix</span><br><span class="line"></span><br><span class="line">118 DBPassword= zabbix</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/zabbix/etc/zabbix_agentd.conf</span></span><br><span class="line"> </span><br><span class="line">94 Server=127.0.0.1</span><br><span class="line"> </span><br><span class="line">135 ServerActive=127.0.0.1</span><br><span class="line"></span><br><span class="line">146 Hostname=Zabbix server</span><br><span class="line"></span><br><span class="line">281 UnsafeUserParameters=1</span><br></pre></td></tr></table></figure><h2 id="启动zabbix"><a href="#启动zabbix" class="headerlink" title="启动zabbix"></a>启动zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/zabbix/sbin/zabbix_server</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/zabbix/sbin/zabbix_agentd</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># netstat -antup | grep zabbix</span></span><br><span class="line">tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      120622/zabbix_agent</span><br><span class="line">tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      120471/zabbix_serve</span><br></pre></td></tr></table></figure><blockquote><p>server 运行端口 10051</p></blockquote><h2 id="或者脚本启动zabbix"><a href="#或者脚本启动zabbix" class="headerlink" title="或者脚本启动zabbix"></a>或者脚本启动zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 etc]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/misc/init.d/</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># cp fedora/core/*  /etc/rc.d/init.d/</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># vim /etc/init.d/zabbix_server </span></span><br><span class="line"><span class="comment"># BASEDIR=/usr/local/zabbix  #找到此行，并修改</span></span><br><span class="line"> 21         <span class="comment"># Zabbix-Directory</span></span><br><span class="line"> 22         BASEDIR=/usr/<span class="built_in">local</span>/zabbix</span><br><span class="line">[root@server222 init.d]<span class="comment"># vim /etc/init.d/zabbix_agentd</span></span><br><span class="line"><span class="comment"># BASEDIR=/usr/local/zabbix  #找到此行，并修改</span></span><br><span class="line"> 21         <span class="comment"># Zabbix-Directory</span></span><br><span class="line"> 22         BASEDIR=/usr/<span class="built_in">local</span>/zabbix</span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/zabbix_agentd start</span></span><br><span class="line">Reloading systemd:                                         [  确定  ]</span><br><span class="line">Starting zabbix_agentd (via systemctl):                    [  确定  ]</span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/zabbix_server start</span></span><br><span class="line">Starting zabbix_server (via systemctl):                    [  确定  ]</span><br><span class="line">[root@server222 init.d]<span class="comment"># chkconfig zabbix_server on</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># chkconfig zabbix_agentd on</span></span><br></pre></td></tr></table></figure><h2 id="zabbix的web界面"><a href="#zabbix的web界面" class="headerlink" title="zabbix的web界面"></a>zabbix的web界面</h2><p><strong>编辑PHP页面</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 etc]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># cp -r /usr/local/src/zabbix-4.0.3/frontends/php/* /usr/local/nginx/html/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line"> 43         location / &#123;</span><br><span class="line"> 44             root   html;</span><br><span class="line"> 45             index index.html index.htm index.php;</span><br><span class="line"> 46         &#125;</span><br></pre></td></tr></table></figure><p><strong>重启nginx服务与php-fpm服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/nginx/sbin/nginx -s reload;</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /etc/init.d/zabbix_server restart</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>火狐浏览器打开输入：<code>192.168.176.222/index.php</code></p><p><img src="https://s2.ax1x.com/2019/08/28/mH6BFJ.png" alt></p><blockquote><p>点击下一步</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/28/mH6ReO.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/php/etc/php.ini</span></span><br><span class="line">375 max_execution_time = 300</span><br><span class="line">.......</span><br><span class="line">385 max_input_time = 300</span><br><span class="line">.......</span><br><span class="line">663 post_max_size = 16M</span><br><span class="line">.......</span><br><span class="line">689 always_populate_raw_post_data = On</span><br><span class="line">.......</span><br><span class="line">913 date.timezone = Asia/Shanghai</span><br><span class="line">.......</span><br><span class="line">1188 mysqli.default_socket = /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure><blockquote><p>将页面刷新</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/28/mHc10O.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># cd /usr/local/src/php-5.5.14/ext/</span></span><br><span class="line">[root@server222 ext]<span class="comment"># cd ldap/</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># /usr/local/php/bin/phpize</span></span><br><span class="line">Configuring <span class="keyword">for</span>:</span><br><span class="line">PHP Api Version:         20121113</span><br><span class="line">Zend Module Api No:      20121212</span><br><span class="line">Zend Extension Api No:   220121212</span><br><span class="line">[root@server222 ldap]<span class="comment"># ./configure --with-php-config=/usr/local/php/bin/php-config --with-ldap</span></span><br><span class="line">........</span><br><span class="line">configure: error: Cannot find ldap libraries <span class="keyword">in</span> /usr/lib.</span><br></pre></td></tr></table></figure><blockquote><p>此时会提醒报错</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># yum install openldap-devel openldap -y</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># rsync -avz /usr/lib64/libldap* /usr/lib/</span></span><br><span class="line">sending incremental file list</span><br><span class="line">libldap-2.3.so.0 -&gt; libldap-2.3.so.0.2.31</span><br><span class="line">libldap-2.3.so.0.2.31</span><br><span class="line">libldap-2.4.so.2 -&gt; libldap-2.4.so.2.10.7</span><br><span class="line">libldap-2.4.so.2.10.7</span><br><span class="line">libldap.so -&gt; libldap-2.4.so.2.10.7</span><br><span class="line">libldap_r-2.3.so.0 -&gt; libldap_r-2.3.so.0.2.31</span><br><span class="line">libldap_r-2.3.so.0.2.31</span><br><span class="line">libldap_r-2.4.so.2 -&gt; libldap_r-2.4.so.2.10.7</span><br><span class="line">libldap_r-2.4.so.2.10.7</span><br><span class="line">libldap_r.so -&gt; libldap_r-2.4.so.2.10.7</span><br><span class="line"></span><br><span class="line">sent 564824 bytes  received 106 bytes  1129860.00 bytes/sec</span><br><span class="line">total size is 1277076  speedup is 2.26</span><br></pre></td></tr></table></figure><blockquote><p>这时我们再进行编译</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># ./configure --with-php-config=/usr/local/php/bin/php-config --with-ldap</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># make ; make install</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># vim /usr/local/php/etc/php.ini</span></span><br><span class="line"><span class="comment"># 在文件的末尾处添加</span></span><br><span class="line">1940 extension=ldap.so</span><br><span class="line"></span><br><span class="line">[root@server222 ldap]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/08/28/mHgi8A.png" alt></p><blockquote><p>然后点击下一步</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">密码：zabbix</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/08/28/mHgEKP.png" alt></p><blockquote><p>然后点击下一步</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/28/mHgdPJ.png" alt></p><p>先点击<code>Download the configuration file</code>下载文件</p><blockquote><p>我下载之后在<code>下载</code>目录里面</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 下载]<span class="comment"># mv zabbix.conf.php /usr/local/nginx/html/conf/zabbix.conf.php</span></span><br></pre></td></tr></table></figure><blockquote><p>然后我们点击刷新</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/28/mHgBx1.png" alt></p><blockquote><p>然后点击下一步</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用admin账号登陆，密码zabbix</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/08/28/mHgOiQ.png" alt></p><blockquote><p>点击登陆</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">点击右上角用户，进行更改语言</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/08/28/mHRGAU.png" alt></p><p><img src="https://s2.ax1x.com/2019/08/28/mHRDHK.png" alt></p><p>》 点击人头像，再点击<code>Language</code>，选择中文，最后点击<code>update</code></p><blockquote><p>最后的界面</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/28/mHWl2d.png" alt></p><p><img src="https://s2.ax1x.com/2019/08/28/mHWXJe.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/categories/linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/tags/linux%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>rsync</title>
    <link href="https://github.com/chineselijie/2020/03/12/30.linux--rsync/"/>
    <id>https://github.com/chineselijie/2020/03/12/30.linux--rsync/</id>
    <published>2020-03-12T11:38:49.843Z</published>
    <updated>2019-08-23T17:17:04.748Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h2><p>rsync是linux系统下的数据<a href="https://baike.baidu.com/item/镜像" target="_blank" rel="noopener">镜像</a><a href="https://baike.baidu.com/item/备份" target="_blank" rel="noopener">备份</a>工具。使用快速增量备份工具Remote Sync可以远程同步，支持本地复制，或者与其他SSH、rsync主机同步。</p><h2 id="rsync特性"><a href="#rsync特性" class="headerlink" title="rsync特性"></a>rsync特性</h2><p>它的特性如下：</p><ul><li><p>可以<a href="https://baike.baidu.com/item/镜像" target="_blank" rel="noopener">镜像</a>保存整个目录树和文件系统。</p></li><li><p>可以很容易做到保持原来文件的权限、时间、软硬链接等等。</p></li><li><p>无须特殊权限即可安装。</p></li><li><p>快速：第一次同步时 rsync 会复制全部内容，但在下一次只传输修改过的文件。rsync 在传输数据的过程中可以实行压缩及<a href="https://baike.baidu.com/item/解压缩" target="_blank" rel="noopener">解压缩</a>操作，因此可以使用更少的带宽。</p></li><li><p>安全：可以使用scp、ssh等方式来传输文件，当然也可以通过直接的socket连接。</p></li><li><p>支持匿名传输，以方便进行网站镜像。</p></li></ul><p>rsync官网：<a href="http://rsync.samba.org" target="_blank" rel="noopener">rsysc</a></p><h2 id="与scp命令比较"><a href="#与scp命令比较" class="headerlink" title="与scp命令比较"></a>与scp命令比较</h2><p>优点： </p><ul><li><p>支持增量备份。</p></li><li><p>选择性的保持 ： 符号链接，硬链接，文件属性，权限 及时间 等。</p></li><li><p>传输前执行压缩。适用亍异地备份 ，镜像服务器等应用 。</p></li><li><p>使用ssh做为传输端口。 sftp ，ssh</p></li></ul><p>区别：</p><p>当文件数据很大时候： </p><ul><li>scp 无法备份大量数据， 特点： 先统一信息，像windows复制。</li><li>rsync 边复制，边比较，边统计。</li></ul><p>端口： 873<br>模式：C/S 。 如果直接使用命令rsync，就是点到点传输。</p><h2 id="备份源"><a href="#备份源" class="headerlink" title="备份源"></a>备份源</h2><blockquote><p>何为备份源？</p><p>在远程同步任务中，负责发起rsync同步操作的客户机称为发起端，而负责响应来自客机的rsync同步操作的服务器称为备份源。</p></blockquote><h2 id="安装rsync"><a href="#安装rsync" class="headerlink" title="安装rsync"></a>安装rsync</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># rpm -qf `which rsync`</span></span><br><span class="line">rsync-3.0.9-18.el7.x86_64</span><br><span class="line">[root@server222 ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.r            pm</span></span><br><span class="line">警告：/mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.rpm: 头V3 RSA/SHA256 Signatu            re, 密钥 ID f4a80eb5: NOKEY</span><br><span class="line">准备中...                          <span class="comment">################################# [100%]</span></span><br><span class="line">        软件包 rsync-3.0.9-18.el7.x86_64 已经安装</span><br></pre></td></tr></table></figure><h3 id="安装xinetd服务来管理rsync服务"><a href="#安装xinetd服务来管理rsync服务" class="headerlink" title="安装xinetd服务来管理rsync服务"></a>安装xinetd服务来管理rsync服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cdrom]# rpm -ivh /mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm</span><br><span class="line">警告：/mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY</span><br><span class="line">准备中...                          ################################# [100%]</span><br><span class="line">正在升级/安装...</span><br><span class="line">   1:xinetd-2:2.3.15-13.el7           ################################# [100%]</span><br></pre></td></tr></table></figure><h2 id="开启rsync-服务"><a href="#开启rsync-服务" class="headerlink" title="开启rsync 服务"></a>开启rsync 服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# systemctl restart rsyncd</span><br><span class="line">[root@server222 ~]# systemctl status rsyncd</span><br><span class="line">● rsyncd.service - fast remote file copy program daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rsyncd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 四 2019-08-22 23:57:10 CST; 2s ago</span><br><span class="line"> Main PID: 14359 (rsync)</span><br><span class="line">   CGroup: /system.slice/rsyncd.service</span><br><span class="line">           └─14359 /usr/bin/rsync --daemon --no-detach</span><br><span class="line"></span><br><span class="line">8月 22 23:57:10 server222 systemd[1]: Started fast remote file copy program ...n.</span><br><span class="line">8月 22 23:57:10 server222 systemd[1]: Starting fast remote file copy program.....</span><br><span class="line">8月 22 23:57:11 server222 rsyncd[14359]: rsyncd version 3.0.9 starting, liste...3</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br></pre></td></tr></table></figure><h2 id="监听端口"><a href="#监听端口" class="headerlink" title="监听端口"></a>监听端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># netstat -antup | grep 873</span></span><br><span class="line">tcp        0      0 0.0.0.0:873             0.0.0.0:*               LISTEN      14359/rsync</span><br><span class="line">tcp6       0      0 :::873                  :::*                    LISTEN      14359/rsync</span><br></pre></td></tr></table></figure><h2 id="rsync-命令的基本用法"><a href="#rsync-命令的基本用法" class="headerlink" title="rsync 命令的基本用法"></a>rsync 命令的基本用法</h2><p>格式：<code>rsync</code> 【选项】 源文件 目标文件</p><p>常见的选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-a，--archive(存档) 归档模式，表示以递归的方式传输文件，并且保持文件属性，等同亍加了参数-rlptgoD</span><br><span class="line">-r，–recursive 对子目彔以递归模式处理</span><br><span class="line">-l,--links 表示拷贝链接文件</span><br><span class="line">-p , --perms 表示保持文件原有权限</span><br><span class="line">-t , --<span class="built_in">times</span> 表示保持文件原有时间</span><br><span class="line">-g , --group 表示保持文件原有属用户组</span><br><span class="line">-o , --owner 表示保持文件原有属主</span><br><span class="line">-D , --devices 表示块设备文件信息</span><br><span class="line">-z , --compress 表示压缩传输</span><br><span class="line">-H 表示硬连接文件</span><br><span class="line">-A 保留ACL 属性信息</span><br><span class="line">-P 显示传输进度</span><br><span class="line">-u, --update 仅仅进行更新，也就是跳过所有已经存在亍目标位置，并且文件时间晚亍要备份的文件。(丌</span><br><span class="line">覆盖更新的文件)</span><br><span class="line">--port=PORT 指定其他的rsync服务端口 873</span><br><span class="line">--delete 删除那些目标位置有而原始位置没有的文件</span><br><span class="line">--password-file=FILE 从FILE 中得到密码</span><br><span class="line">--bwlimit=KBPS 限制I/O 带宽，Kbytes /second</span><br><span class="line">--filter “- 文件名”需要过滤的文件</span><br><span class="line">--exclude= ：需要过滤的文件</span><br><span class="line">-v 显示同步过程的详细信息</span><br></pre></td></tr></table></figure><blockquote><p>–delete 删除那些目标位置有而原始位置没有的文件</p><p>例如 目彔/web : /back a.txt</p></blockquote><h2 id="实战1："><a href="#实战1：" class="headerlink" title="实战1："></a>实战1：</h2><p>client111：192.168.176.111</p><p>server222：192.168.176.222</p><blockquote><p>备份server222的/mnt 目录到client111 的/root/mnt。<br>创建用户hary用于下载、读；创建用户natasha 用于上传、写。</p></blockquote><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># useradd hary</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin hary</span></span><br><span class="line">更改用户 hary 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin natasha</span></span><br><span class="line">更改用户 natasha 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br></pre></td></tr></table></figure><h3 id="设置权限"><a href="#设置权限" class="headerlink" title="设置权限"></a>设置权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:hary:r-x /mnt</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:natasha:rwx /mnt</span></span><br></pre></td></tr></table></figure><h3 id="创建测试数据"><a href="#创建测试数据" class="headerlink" title="创建测试数据"></a>创建测试数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mnt]<span class="comment"># echo "123qwe" &gt; 123qwe</span></span><br><span class="line">[root@server222 mnt]<span class="comment"># ls</span></span><br><span class="line">123qwe  cdrom</span><br><span class="line">[root@server222 mnt]<span class="comment"># cat 123qwe</span></span><br><span class="line">123qwe</span><br></pre></td></tr></table></figure><h3 id="client111同步数据"><a href="#client111同步数据" class="headerlink" title="client111同步数据"></a>client111同步数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># mkdir /root/mnt</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cd /root/mnt/</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># rsync -azP --delete natasha@192.168.176.222:/mnt/ /root/mnt</span></span><br><span class="line">natasha@192.168.176.222<span class="string">'s password:</span></span><br><span class="line"><span class="string">..........</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sent 74971 bytes  received 4361814808 bytes  10918372.41 bytes/sec</span></span><br><span class="line"><span class="string">total size is 4515096809  speedup is 1.04</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ls</span></span><br><span class="line"><span class="string">123qwe  cdrom</span></span><br><span class="line"><span class="string">[root@client111 mnt]# cat 123qwe</span></span><br><span class="line"><span class="string">123qwe</span></span><br></pre></td></tr></table></figure><h2 id="实战2："><a href="#实战2：" class="headerlink" title="实战2："></a>实战2：</h2><blockquote><p>使用ssh 密钥实现无交亏备份。做成脚本，将server222上的数据，定期备份到client111上。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh-keygen</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):<span class="comment">#直接回库</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):<span class="comment">#直接回库</span></span><br><span class="line">Enter same passphrase again:<span class="comment">#直接回库</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:SsPRWpKt+9+YLYH4IcfSGFsH/rKlKFxb3QzwqC/DdMs root@client111</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|       +o        |</span></span><br><span class="line"><span class="string">|      +.+=       |</span></span><br><span class="line"><span class="string">|     ..*+ +      |</span></span><br><span class="line"><span class="string">|      *XS= +     |</span></span><br><span class="line"><span class="string">|     .X+X = o    |</span></span><br><span class="line"><span class="string">|   . +o% B .     |</span></span><br><span class="line"><span class="string">|    o *.E .=     |</span></span><br><span class="line"><span class="string">|     . o..+.o    |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh copy id hary@192.168.176.222</span></span><br><span class="line"><span class="string">ssh: Could not resolve hostname copy: Name or service not known</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh-copy-id hary@192.168.176.222</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">hary@192.168.176.222'</span>s password:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'hary@192.168.176.222'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure><blockquote><p>测试hary登陆server222</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh hary@192.168.176.222</span></span><br><span class="line">Last failed login: Sat Aug 24 00:59:25 CST 2019 from 192.168.176.111 on ssh:notty</span><br><span class="line">There were 2 failed login attempts since the last successful login.</span><br><span class="line">[hary@server222 ~]$</span><br></pre></td></tr></table></figure><h3 id="编写脚本"><a href="#编写脚本" class="headerlink" title="编写脚本"></a>编写脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># vim /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># cat /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">rsync -az --delete hary@192.168.176.222:/mnt/ /root/mnt/</span><br></pre></td></tr></table></figure><h3 id="测试脚本"><a href="#测试脚本" class="headerlink" title="测试脚本"></a>测试脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># chmod +x /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># rm -rf /root/mnt/*</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># ls</span></span><br><span class="line">[root@client111 mnt]<span class="comment">#</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># /root/rsync-ssh-get-mnt.sh</span></span><br></pre></td></tr></table></figure><h3 id="定期备份"><a href="#定期备份" class="headerlink" title="定期备份"></a>定期备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># crontab -e</span></span><br><span class="line">no crontab <span class="keyword">for</span> root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@client111 ~]<span class="comment"># crontab -l</span></span><br><span class="line">01 3 * * * /root/rsync-ssh-get-mnt.sh &amp;</span><br><span class="line"><span class="comment"># 每天的凌晨3点10分执行脚本</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/categories/linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/tags/linux%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>LNMP</title>
    <link href="https://github.com/chineselijie/2020/03/12/29.linux--LNMP/"/>
    <id>https://github.com/chineselijie/2020/03/12/29.linux--LNMP/</id>
    <published>2020-03-12T11:38:49.801Z</published>
    <updated>2019-08-23T16:40:22.809Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h1 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h1><p>LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。</p><p>Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。</p><p><a href="https://baike.baidu.com/item/Nginx" target="_blank" rel="noopener">Nginx</a>是一个高性能的HTTP和<a href="https://baike.baidu.com/item/反向代理" target="_blank" rel="noopener">反向代理</a>服务器，也是一个IMAP/POP3/SMTP代理服务器。</p><p>Mysql是一个小型<a href="https://baike.baidu.com/item/关系型数据库管理系统" target="_blank" rel="noopener">关系型数据库管理系统</a>。</p><p><a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>是一种在服务器端执行的嵌入HTML文档的脚本语言。</p><p>这四种软件均为免费开源软件，组合到一起，成为一个免费、高效、扩展性强的网站服务系统。</p><h2 id="LNMP特点"><a href="#LNMP特点" class="headerlink" title="LNMP特点"></a>LNMP特点</h2><p>​        LNMP动态网站部署架构是一套由Linux + Nginx + MySQL + PHP组成的动态网站系统解决方案，具有免费、高效、扩展性强且资源消耗低等优良特性。</p><p>​        Nginx是一款相当优秀的用于部署动态网站的轻量级服务程序，它最初是为俄罗斯门户站点而开发的，因其稳定性、功能丰富、占用内存少且并发能力强而备受用户的信赖。目前国内诸如新浪、网易、腾讯等门户站点均已使用了此服务。</p><p>Nginx服务程序的稳定性源自于采用了分阶段的资源分配技术，降低了CPU与内存的占用率，所以使用Nginx程序部署的动态网站环境不仅十分稳定、高效，而且消耗的系统资源也很少。此外，Nginx具备的模块数量与Apache具备的模块数量几乎相同，而且现在已经完全支持proxy、rewrite、mod_fcgi、ssl、vhosts等常用模块。更重要的是，Nginx还支持热部署技术，可以7×24不间断提供服务，还可以在不暂停服务的情况下直接对Nginx服务程序进行升级。</p><p>坦白来讲，虽然Nginx程序的代码质量非常高，代码很规范，技术成熟，模块扩展也很容易，但依然存在不少问题，比如是由俄罗斯人开发的，所以在资料文档方面还并不完善，中文资料的质量更是鱼龙混杂。但是Nginx服务程序在近年来增长势头迅猛，相信会在轻量级Web服务器市场具有不错的未来。</p><p>​    </p><p>​        PHP（Hypertxt Preprocessor，超文本预处理器）是一种通用的开源脚本语言，发明于1995年，它吸取了C语言、Java语言及Perl语言的很多优点，具有开源、免费、快捷、跨平台性强、效率高等优良特性，是目前Web开发领域最常用的语言之一。</p><h2 id="LNMP优点"><a href="#LNMP优点" class="headerlink" title="LNMP优点"></a>LNMP优点</h2><p>作为 Web 服务器：相比 Apache，Nginx 使用更少的资源，支持更多的并发连接，体现更高的效率。</p><p>作为负载均衡服务器：Nginx 既可以在内部直接支持<a href="https://baike.baidu.com/item/Rails" target="_blank" rel="noopener">Rails</a>和<a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>，也可以支持作为 HTTP<a href="https://baike.baidu.com/item/代理服务器" target="_blank" rel="noopener">代理服务器</a>对外进行服务。Nginx 用C编写，不论是系统资源开销还是CPU使用效率都比Perlbal要好的多。</p><p>作为邮件代理服务器：Nginx同时也是一个非常优秀的邮件代理服务器（最早开发这个产品的目的之一也是作为邮件代理服务器），Last/fm 描述了成功并且美妙的使用经验。</p><p>Nginx 安装非常的简单，配置文件非常简洁（还能够支持<a href="https://baike.baidu.com/item/perl" target="_blank" rel="noopener">perl</a>语法）。Nginx支持平滑加载新的配置，还能够在不间断服务的情况下进行软件版本的升级。</p><p><img src="https://s2.ax1x.com/2019/08/12/mpSbTK.jpg" alt></p><h2 id="源码包安装"><a href="#源码包安装" class="headerlink" title="源码包安装"></a>源码包安装</h2><p>在使用源码包安装服务程序之前，首先要让安装主机具备编译程序源码的环境，他需要具备C语言、C++语言、Perl语言的编译器，以及各种常见的编译支持函数库程序。因此请先配置妥当Yum软件仓库</p><h3 id="配置yum仓库"><a href="#配置yum仓库" class="headerlink" title="配置yum仓库"></a>配置yum仓库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# tail -n 1 /etc/fstab</span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]# vim /etc/yum.repos.d/bendi.repo</span><br><span class="line">[root@server222 ~]# cat /etc/yum.repos.d/bendi.repo</span><br><span class="line">[bendi]</span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 ~]# mount -a</span><br></pre></td></tr></table></figure><h3 id="安装软件包"><a href="#安装软件包" class="headerlink" title="安装软件包"></a>安装软件包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# yum install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* wget zlib-devel</span><br></pre></td></tr></table></figure><h3 id="下载源码包以及系统软件包"><a href="#下载源码包以及系统软件包" class="headerlink" title="下载源码包以及系统软件包"></a>下载源码包以及系统软件包</h3><p>​        然后我们安装LNMP动态网站部署架构所需的16个软件源码包和1个用于检查效果的论坛网站系统软件包</p><blockquote><p> 此处建议把要安装的软件包存放在/usr/local/src目录中。</p></blockquote><p>首先我们创建<code>/usr/local/src</code>目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# mkdir /usr/local/src</span><br></pre></td></tr></table></figure><p>源码包文件已经放到百度云盘里面，下载下来传到Linux系统里面<code>/usr/local/src</code>目录即可</p><blockquote><p>链接：<a href="https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA" target="_blank" rel="noopener">https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA</a><br>提取码：ox0w<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/13/mCjFoT.png" alt></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src</span></span><br><span class="line">[root@server222 src]<span class="comment"># ls</span></span><br><span class="line">cmake-2.8.11.2.tar.gz   libpng-1.6.12.tar.gz   php-5.5.14.tar.gz</span><br><span class="line">Discuz_X3.2_SC_GBK.zip  libvpx-v1.3.0.tar.bz2  t1lib-5.1.2.tar.gz</span><br><span class="line">freetype-2.5.3.tar.gz   mysql-5.6.19.tar.gz    tiff-4.0.3.tar.gz</span><br><span class="line">jpegsrc.v9a.tar.gz      nginx-1.6.0.tar.gz     yasm-1.2.0.tar.gz</span><br><span class="line">libgd-2.1.0.tar.gz      openssl-1.0.1h.tar.gz  zlib-1.2.8.tar.gz</span><br><span class="line">libmcrypt-2.5.8.tar.gz  pcre-8.35.tar.gz</span><br></pre></td></tr></table></figure><blockquote><p>如果是17个包就算OK，差一个都不行</p></blockquote><h2 id="安装编译工具"><a href="#安装编译工具" class="headerlink" title="安装编译工具"></a>安装编译工具</h2><p>cmake是Linux系统中一款常用的编译工具。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># tar xzvf cmake-2.8.11.2.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd cmake-2.8.11.2/</span></span><br><span class="line">[root@server222 cmake-2.8.11.2]<span class="comment"># ./configure ; make ; make install</span></span><br></pre></td></tr></table></figure><blockquote><p>此处命令<code>./configure ; make ; make install</code> </p><p>格式为 <code>命令A ; 命令B ; 命令C</code></p><p>这里意思是先执行命令A再执行命令B最后执行命令C</p></blockquote><h2 id="配置MySQL服务"><a href="#配置MySQL服务" class="headerlink" title="配置MySQL服务"></a>配置MySQL服务</h2><p>​       在使用Yum软件仓库安装服务程序时，系统会自动根据RPM软件包中的指令集完整软件配置等工作。但是一旦选择使用源码包的方式来安装，这一切就需要自己来完成了。针对MySQL数据库来讲，我们需要在系统中创建一个名为mysql的用户，专门用于负责运行MySQL数据库。请记得要把这类账户的Bash终端设置成nologin解释器，避免黑客通过该用户登录到服务器中，从而提高系统安全性。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cmake-2.8.11.2]# cd ..</span><br><span class="line">[root@server222 src]# useradd mysql -s /sbin/nologin</span><br></pre></td></tr></table></figure><p>​       创建一个用于保存MySQL数据库程序和数据库文件的目录，并把该目录的所有者和所属组身份修改为mysql。其中，/usr/local/mysql是用于保存MySQL数据库服务程序的目录，/usr/local/mysql/var则是用于保存真实数据库文件的目录。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# mkdir -p /usr/local/mysql/var</span><br><span class="line">[root@server222 src]# chown -Rf mysql:mysql /usr/local/mysql</span><br></pre></td></tr></table></figure><p>​        接下来解压、编译、安装MySQL数据库服务程序。在编译数据库时使用的是cmake命令</p><p>-DCMAKE_INSTALL_PREFIX参数用于定义数据库服务程序的保存目录</p><p>-DMYSQL_DATADIR参数用于定义真实数据库文件的目录</p><p>-DSYSCONFDIR则是定义MySQL数据库配置文件的保存目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf mysql-5.6.19.tar.gz</span><br><span class="line">[root@server222 src]# cd mysql-5.6.19/</span><br><span class="line">[root@server222 mysql-5.6.19]# cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etc ; make ; make install</span><br></pre></td></tr></table></figure><p>​        为了让MySQL数据库程序正常运转起来，需要先删除/etc目录中的默认配置文件，然后在MySQL数据库程序的保存目录scripts内找到一个名为mysql_install_db的脚本程序，执行这个脚本程序并使用–user参数指定MySQL服务的对应账号名称（在前面步骤已经创建），使用–basedir参数指定MySQL服务程序的保存目录，使用–datadir参数指定MySQL真实数据库的文件保存目录，这样即可生成系统数据库文件，也会生成出新的MySQL服务配置文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql-5.6.19]# rm -rf /etc/my.cnf</span><br><span class="line">[root@server222 mysql-5.6.19]# cd /usr/local/mysql</span><br><span class="line">[root@server222 mysql]# ./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure><p>​        把系统新生成的MySQL数据库配置文件链接到/etc目录中，然后把程序目录中的开机程序文件复制到/etc/rc.d/init.d目录中，以便通过service命令来管理MySQL数据库服务程序。记得把数据库脚本文件的权限修改成755以便于让用户有执行该脚本的权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# ln -s my.cnf /etc/my.cnf</span><br><span class="line">[root@server222 mysql]# cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line">[root@server222 mysql]# chmod 755 /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure><p>​        编辑刚复制的MySQL数据库脚本文件，把第46、47行的basedir与datadir参数分别修改为MySQL数据库程序的保存目录和真实数据库的文件内容。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/rc.d/init.d/mysqld</span><br><span class="line"> 45 </span><br><span class="line"> 46 basedir=/usr/local/mysql</span><br><span class="line"> 47 datadir=/usr/local/mysql/var</span><br><span class="line"> 48</span><br></pre></td></tr></table></figure><blockquote><p>:set nu 查看行</p></blockquote><p>​        配置好脚本文件后便可以用service命令启动mysqld数据库服务了。mysqld是MySQL数据库程序的服务名称，注意不要写错。顺带再使用chkconfig命令把mysqld服务程序加入到开机启动项中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# service mysqld start</span><br><span class="line">Starting MySQL. SUCCESS!</span><br><span class="line">[root@server222 mysql]# chkconfig mysqld on</span><br></pre></td></tr></table></figure><p>​       MySQL数据库程序自带了许多命令，但是Bash终端的PATH变量并不会包含这些命令所存放的目录，因此我们也无法顺利地对MySQL数据库进行初始化，也就不能使用MySQL数据库自带的命令了。想要把命令所保存的目录永久性地定义到PATH变量中，需要编辑/etc/profile文件并写入追加的命令目录，这样当物理设备在下一次重启时就会永久生效了。如果不想通过重启设备的方式来生效，也可以使用source命令加载一下/ect/profile文件，此时新的PATH变量也可以立即生效了。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 mysql]# source /etc/profile</span><br></pre></td></tr></table></figure><p>​        MySQL数据库服务程序还会调用到一些程序文件和函数库文件。由于当前是通过源码包方式安装MySQL数据库，因此现在也必须以手动方式把这些文件链接过来。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mkdir /var/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/lib/mysql /usr/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/include/mysql /usr/include/mysql</span><br></pre></td></tr></table></figure><p>​        现在，MySQL数据库服务程序已经启动，调用的各个函数文件已经就位，PATH环境变量中也加入了MySQL数据库命令的所在目录。接下来准备对MySQL数据库进行初始化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mysql_secure_installation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MySQL to secure it, we'll need the current</span><br><span class="line">password for the root user.  If you've just installed MySQL, and</span><br><span class="line">you haven't set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MySQL</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y  （要为root管理员设置数据库的密码）</span><br><span class="line">New password:  输入要为root管理员设置的数据库密码</span><br><span class="line">Re-enter new password:   再输入一次密码</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MySQL without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y  （删除匿名账户）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from 'localhost'.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] y （禁止root管理员从远程登录）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named 'test' that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y （删除test数据库并取消对其的访问权限）</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y （刷新授权表，让初始化后的设定立即生效）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">All done!  If you've completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MySQL!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure><h2 id="配置Nginx服务"><a href="#配置Nginx服务" class="headerlink" title="配置Nginx服务"></a>配置Nginx服务</h2><p>​        在正式安装Nginx服务程序之前，我们还需要为其解决相关的软件依赖关系，下面来解压、编译、生成、安装Nginx服务程序的源码文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf pcre-8.35.tar.gz</span><br><span class="line">[root@server222 src]# cd pcre-8.35</span><br><span class="line">[root@server222 pcre-8.35]# ./configure --prefix=/usr/local/pcre ；make ; make install</span><br></pre></td></tr></table></figure><p>​        openssl软件包是用于提供网站加密证书服务的程序文件，在安装该程序时需要自定义服务程序的安装目录，以便于稍后调用它们的时候更可控。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf openssl-1.0.1h.tar.gz</span><br><span class="line">[root@server222 src]# cd openssl-1.0.1h</span><br><span class="line">[root@server222 openssl-1.0.1h]# ./config --prefix=/usr/local/openssl ; make ; make install</span><br></pre></td></tr></table></figure><p>​        openssl软件包安装后默认会在/usr/local/openssl/bin目录中提供很多的可用命令，我们需要像前面的操作那样，将这个目录添加到PATH环境变量中，并写入到配置文件中，最后执行source命令以便让新的PATH环境变量内容可以立即生效：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin:/usr/local/openssl/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 openssl-1.0.1h]# source /etc/profile</span><br></pre></td></tr></table></figure><blockquote><p> 使用:set  nu 命令显示数字        </p></blockquote><p>​        zlib软件包是用于提供压缩功能的函数库文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf zlib-1.2.8.tar.gz</span><br><span class="line">[root@server222 src]# cd zlib-1.2.8</span><br><span class="line">[root@server222 zlib-1.2.8]# ./configure --prefix=/usr/local/zlib ; make ; make install</span><br></pre></td></tr></table></figure><p>​        在安装部署好具有依赖关系的软件包之后，创建一个用于执行Nginx服务程序的账户。账户名称可以自定义，但一定别忘记，因为在后续需要用到</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zlib-1.2.8]# cd ..</span><br><span class="line">[root@server222 src]# useradd www -s /sbin/nologin</span><br></pre></td></tr></table></figure><p>​        在使用命令编译Nginx服务程序时，需要设置特别多的参数</p><p>–prefix参数用于定义服务程序稍后安装到的位置</p><p>–user与–group参数用于指定执行Nginx服务程序的用户名和用户组</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf nginx-1.6.0.tar.gz</span><br><span class="line">[root@server222 src]# cd nginx-1.6.0/</span><br><span class="line">[root@server222 nginx-1.6.0]# ./configure --prefix=/usr/local/nginx --without-http_memcached_module --user=www --group=www --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-openssl=/usr/local/src/openssl-1.0.1h --with-zlib=/usr/local/src/zlib-1.2.8 --with-pcre=/usr/local/src/pcre-8.35 ; make ; make install</span><br></pre></td></tr></table></figure><p>​        要想启动Nginx服务程序以及将其加入到开机启动项中，也需要有脚本文件。可惜的是，在安装完Nginx软件包之后默认并没有为用户提供脚本文件</p><blockquote><p>此处代码复制粘贴即可</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# vim /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# cat /etc/rc.d/init.d/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: - 85 15</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Nginx is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> proxy and IMAP/POP3 proxy server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> processname: nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pidfile: /usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Source <span class="keyword">function</span> library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"><span class="meta">#</span><span class="bash"> Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"><span class="meta">#</span><span class="bash"> Check that networking is up.</span></span><br><span class="line">[ "$NETWORKING" = "no" ] &amp;&amp; exit 0</span><br><span class="line">nginx="/usr/local/nginx/sbin/nginx"</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line">NGINX_CONF_FILE="/usr/local/nginx/conf/nginx.conf"</span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line">make_dirs() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash"> make required directories</span></span><br><span class="line">user=`$nginx -V 2&gt;&amp;1 | grep "configure arguments:" | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -`</span><br><span class="line">        if [ -z "`grep $user /etc/passwd`" ]; then</span><br><span class="line">                useradd -M -s /bin/nologin $user</span><br><span class="line">        fi</span><br><span class="line">options=`$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'`</span><br><span class="line">for opt in $options; do</span><br><span class="line">        if [ `echo $opt | grep '.*-temp-path'` ]; then</span><br><span class="line">                value=`echo $opt | cut -d "=" -f 2`</span><br><span class="line">                if [ ! -d "$value" ]; then</span><br><span class="line">                        # echo "creating" $value</span><br><span class="line">                        mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">start() &#123;</span><br><span class="line">[ -x $nginx ] || exit 5</span><br><span class="line">[ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">make_dirs</span><br><span class="line">echo -n $"Starting $prog: "</span><br><span class="line">daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">stop() &#123;</span><br><span class="line">echo -n $"Stopping $prog: "</span><br><span class="line">killproc $prog -QUIT</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">restart() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">stop</span><br><span class="line">sleep 1</span><br><span class="line">start</span><br><span class="line">&#125;</span><br><span class="line">reload() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">echo -n $"Reloading $prog: "</span><br><span class="line">killproc $nginx -HUP</span><br><span class="line">RETVAL=$?</span><br><span class="line">echo</span><br><span class="line">&#125;</span><br><span class="line">force_reload() &#123;</span><br><span class="line">restart</span><br><span class="line">&#125;</span><br><span class="line">configtest() &#123;</span><br><span class="line"><span class="meta">$</span><span class="bash">nginx -t -c <span class="variable">$NGINX_CONF_FILE</span></span></span><br><span class="line">&#125;</span><br><span class="line">rh_status() &#123;</span><br><span class="line">status $prog</span><br><span class="line">&#125;</span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">restart|configtest)</span><br><span class="line"><span class="meta">$</span><span class="bash">1</span></span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">echo $"Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span><br><span class="line">exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>保存脚本文件后记得为其赋予755权限，以便能够执行这个脚本</p><p>然后以绝对路径的方式执行这个脚本，通过restart参数重启Nginx服务程序</p><p>最后再使用chkconfig命令将Nginx服务程序添加至开机启动项中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# chmod 755 /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# /etc/rc.d/init.d/nginx restart</span><br><span class="line">Reloading systemd:                                         [  确定  ]</span><br><span class="line">Restarting nginx (via systemctl):                          [  确定  ]</span><br><span class="line">[root@server222 nginx-1.6.0]# chkconfig nginx on</span><br></pre></td></tr></table></figure><p>Nginx服务程序在启动后就可以在浏览器中输入服务器的IP地址来查看到默认网页了。相较于Apache服务程序的红色默认页面，Nginx服务程序的默认页面显得更加简洁。</p><p><img src="https://s2.ax1x.com/2019/08/12/mp8724.png" alt></p><h2 id="配置PHP服务"><a href="#配置PHP服务" class="headerlink" title="配置PHP服务"></a>配置PHP服务</h2><p>解决PHP的程序包和其他软件的依赖关系。</p><p>需要先安装部署将近十个用于搭建网站页面的软件程序包，然后才能正式安装PHP程序。</p><blockquote><p><code>yasm  libmcrypt  libvpx  tiff  libpng  freetype  jpeg  libgd  t1lib</code></p></blockquote><p><code>yasm</code>源码包是一款常见的开源汇编器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf yasm-1.2.0.tar.gz</span><br><span class="line">[root@server222 src]# cd yasm-1.2.0</span><br><span class="line">[root@server222 yasm-1.2.0]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure><p><code>libmcrypt</code>源码包是用于加密算法的扩展库程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yasm-1.2.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libmcrypt-2.5.8.tar.gz</span><br><span class="line">[root@server222 src]# cd libmcrypt-2.5.8</span><br><span class="line">[root@server222 libmcrypt-2.5.8]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure><p><code>libvpx</code>源码包是用于提供视频编码器的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libmcrypt-2.5.8]# cd ..</span><br><span class="line">[root@server222 src]# tar xjvf libvpx-v1.3.0.tar.bz2</span><br><span class="line">[root@server222 src]# cd libvpx-v1.3.0</span><br><span class="line">[root@server222 libvpx-v1.3.0]# ./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9 ; make ; make install</span><br></pre></td></tr></table></figure><p><code>tiff</code>源码包是用于提供标签图像文件格式的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libvpx-v1.3.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf tiff-4.0.3.tar.gz</span><br><span class="line">[root@server222 src]# cd tiff-4.0.3</span><br><span class="line">[root@server222 tiff-4.0.3]# ./configure --prefix=/usr/local/tiff --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure><p><code>libpng</code>源码包是用于提供png图片格式支持函数库的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tiff-4.0.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libpng-1.6.12.tar.gz</span><br><span class="line">[root@server222 src]# cd libpng-1.6.12</span><br><span class="line">[root@server222 libpng-1.6.12]# ./configure --prefix=/usr/local/libpng --enable-shared ；make ; make install</span><br></pre></td></tr></table></figure><p><code>freetype</code>源码包是用于提供字体支持引擎的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libpng-1.6.12]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf freetype-2.5.3.tar.gz</span><br><span class="line">[root@server222 src]# cd freetype-2.5.3</span><br><span class="line">[root@server222 freetype-2.5.3]# ./configure --prefix=/usr/local/freetype --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure><p><code>jpeg</code>源码包是用于提供jpeg图片格式支持函数库的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 freetype-2.5.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf jpegsrc.v9a.tar.gz</span><br><span class="line">[root@server222 src]# cd jpeg-9a</span><br><span class="line">[root@server222 jpeg-9a]# ./configure --prefix=/usr/local/jpeg --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure><p><code>libgd</code>源码包是用于提供图形处理的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 jpeg-9a]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libgd-2.1.0.tar.gz</span><br><span class="line">[root@server222 src]# cd libgd-2.1.0</span><br><span class="line">[root@server222 libgd-2.1.0]# ./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpx ; make ; make install</span><br></pre></td></tr></table></figure><p><code>t1lib</code>源码包是用于提供图片生成函数库的服务程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libgd-2.1.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf t1lib-5.1.2.tar.gz</span><br><span class="line">[root@server222 src]# cd t1lib-5.1.2</span><br><span class="line">[root@server222 t1lib-5.1.2]# ./configure --prefix=/usr/local/t1lib --enable-shared ; make ; make install</span><br><span class="line">[root@server222 t1lib-5.1.2]# ln -s /usr/lib64/libltdl.so /usr/lib/libltdl.so</span><br><span class="line">[root@server222 t1lib-5.1.2]# cp -frp /usr/lib64/libXpm.so* /usr/lib/</span><br></pre></td></tr></table></figure><p>​        在开始编译php源码包之前，先定义一个名为LD_LIBRARY_PATH的全局环境变量，该环境变量的作用是帮助系统找到指定的动态链接库文件，这些文件是编译php服务源码包的必须元素之一。编译php服务源码包时，除了定义要安装到的目录以外，还需要依次定义配置php服务程序配置文件的保存目录、MySQL数据库服务程序所在目录、MySQL数据库服务程序配置文件所在目录，以及libpng、jpeg、freetype、libvpx、zlib、t1lib等服务程序的安装目录路径，并通过参数启动php服务程序的诸多默认功能</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 t1lib-5.1.2]# cd ..</span><br><span class="line">[root@server222 src]# tar -zvxf php-5.5.14.tar.gz</span><br><span class="line">[root@server222 src]# cd php-5.5.14</span><br><span class="line">[root@server222 php-5.5.14]# export LD_LIBRARY_PATH=/usr/local/libgd/lib</span><br><span class="line">[root@server222 php-5.5.14]# ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctype ; make ; make install</span><br></pre></td></tr></table></figure><p>​        在php源码包程序安装完成后，需要删除当前默认的配置文件，然后将php服务程序目录中相应的配置文件复制过来</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# rm -rf /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php.ini /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf</span><br></pre></td></tr></table></figure><p>​        php-fpm.conf是php服务程序重要的配置文件之一，我们需要启用该配置文件中第25行左右的pid文件保存目录，然后分别将第148和149行的user与group参数分别修改为www账户和用户组名称</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php-fpm.conf</span><br><span class="line">24 ; Default Value: none</span><br><span class="line">25 pid = run/php-fpm.pid</span><br><span class="line">26 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">147 ; will be used.</span><br><span class="line">148 user = www</span><br><span class="line">149 group = www</span><br><span class="line">150</span><br></pre></td></tr></table></figure><blockquote><p>:set nu 可查看行数</p></blockquote><p>​        配置妥当后便可把用于管理php服务的脚本文件复制到/etc/rc.d/init.d中了。为了能够执行脚本，请记得为脚本赋予755权限。最后把php-fpm服务程序加入到开机启动项中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chmod 755 /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure><p>​        由于php服务程序的配置参数直接会影响到Web服务服务的运行环境，因此，如果默认开启了一些不必要且高危的功能（如允许用户在网页中执行Linux命令），则会降低网站被入侵的难度，入侵人员甚至可以拿到整台Web服务器的管理权限。因此我们需要编辑php.ini配置文件，在305行的disable_functions参数后面追加上要禁止的功能。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line">304 ; http://php.net/disable-functions</span><br><span class="line">305 disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</span><br></pre></td></tr></table></figure><p>​        这样就把php服务程序配置妥当了。最后，还需要编辑Nginx服务程序的主配置文件，把第2行的井号（#）删除，然后在后面写上负责运行Nginx服务程序的账户名称和用户组名称；在第45行的index参数后面写上网站的首页名称。</p><p>​        最后是将第65～71行参数前的井号（#）删除来启用参数，主要是修改第69行的脚本名称路径参数，其中$document_root变量即为网站信息存储的根目录路径，若没有设置该变量，则Nginx服务程序无法找到网站信息，因此会提示“404页面未找到”的报错信息。在确认参数信息填写正确后便可重启Nginx服务与php-fpm服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line"> 1 </span><br><span class="line"> 2 user www www;</span><br><span class="line"> 3 worker_processes 1;</span><br><span class="line"> 4 </span><br><span class="line"> </span><br><span class="line"> 44 root html;</span><br><span class="line"> 45 index index.html index.htm index.php forum.php;</span><br><span class="line"> 46 &#125;</span><br><span class="line"> 47 </span><br><span class="line"> </span><br><span class="line"> 64         #</span><br><span class="line"> 65         location ~ \.php$ &#123;</span><br><span class="line"> 66             root           html;</span><br><span class="line"> 67             fastcgi_pass   127.0.0.1:9000;</span><br><span class="line"> 68             fastcgi_index  index.php;</span><br><span class="line"> 69         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line"> 70             include        fastcgi_params;</span><br><span class="line"> 71         &#125;</span><br><span class="line"> 72</span><br><span class="line"> 73         # deny access to .htaccess files, if Apache's document root</span><br><span class="line"></span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart nginx</span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure><blockquote><p>从65行到71行的注释需要去掉</p></blockquote><p>至此，LNMP动态网站环境架构的配置实验全部结束。</p><h2 id="搭建Discuz-论坛"><a href="#搭建Discuz-论坛" class="headerlink" title="搭建Discuz!论坛"></a>搭建Discuz!论坛</h2><p>​        为了检验LNMP动态网站环境是否配置妥当，可以使用在上面部署Discuz!系统，然后查看结果。如果能够在LNMP动态网站环境中成功安装使用Discuz!论坛系统，也就意味着这套架构是可用的。Discuz! X3.2是国内最常见的社区论坛系统，在经过十多年的研发后已经成为了全球成熟度最高、覆盖率最广的论坛网站系统之一。</p><p>​        Discuz! X3.2软件包的后缀是.zip格式，因此应当使用专用的unzip命令来进行解压。解压后会在当前目录中出现一个名为upload的文件目录，这里面保存的就是Discuz！论坛的系统程序。我们把Nginx服务程序网站根目录的内容清空后，就可以把这些这个目录中的文件都复制进去了。记得把Nginx服务程序的网站根目录的所有者和所属组修改为本地的www用户，并为其赋予755权限以便于能够读、写、执行该论坛系统内的文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cd /usr/local/src/</span><br><span class="line">[root@server222 src]# unzip Discuz_X3.2_SC_GBK.zip</span><br><span class="line">[root@server222 src]# rm -rf /usr/local/nginx/html/&#123;index.html,50x.html&#125;*</span><br><span class="line">[root@server222 src]# mv upload/* /usr/local/nginx/html/</span><br><span class="line">[root@server222 src]# chown -Rf www:www /usr/local/nginx/html</span><br><span class="line">[root@server222 src]# chmod -Rf 755 /usr/local/nginx/html</span><br></pre></td></tr></table></figure><blockquote><p> 之后在浏览器输入<code>192.168.176.222/install</code></p></blockquote><p><img src="https://s2.ax1x.com/2019/08/13/mPeM2n.png" alt></p><blockquote><p>依次按照傻瓜式步骤下一步</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/13/mPe4Mt.png" alt></p><blockquote><p>使用admin管理员账户登录</p></blockquote><p><img src="https://s2.ax1x.com/2019/08/13/mPe1K0.png" alt></p><blockquote><p> 到此结束LNMP动态网站部署，如果您觉得不懂，可私信给我，后期将写一些部署docker容器虚拟化平台</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/categories/linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="linux运维" scheme="https://github.com/chineselijie/tags/linux%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>RHCE 7版本认证考试练习</title>
    <link href="https://github.com/chineselijie/2020/03/12/28.linux--RHCE%207%E7%89%88%E6%9C%AC%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E7%BB%83%E4%B9%A0/"/>
    <id>https://github.com/chineselijie/2020/03/12/28.linux--RHCE%207%E7%89%88%E6%9C%AC%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95%E7%BB%83%E4%B9%A0/</id>
    <published>2020-03-12T11:38:40.266Z</published>
    <updated>2020-03-12T11:34:06.699Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>写在前面的话：考试练习不等于真实考试考题，里面的数据可能也与您考试练习的数据不一样，请认真仔细。祝愿RHCE取得好成绩！！</p></blockquote><p>[TOC]</p><h2 id="模拟考前配置"><a href="#模拟考前配置" class="headerlink" title="模拟考前配置"></a>模拟考前配置</h2><blockquote><p>准备前</p></blockquote><p>首先我们要将三台虚拟机开启<br>classroom是172.25.0.254</p><p>desktop是172.25.0.10</p><p>server是172.25.0.11</p><p>前提是三个主机能互相ping通</p><p>然后我们在本地上远程到classroom</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ ssh root@172.25.0.254</span><br><span class="line">Last login: Sat Jul  6 09:08:15 2019 from 172.25.0.250</span><br><span class="line">[root@classroom ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>等待远程过去之后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># tail /etc/httpd/logs/error_log</span></span><br></pre></td></tr></table></figure><p>将那段字母复制(NSS开头，off结尾的那段，具体我也不是带清楚)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># vim /etc/httpd/conf.d/nss.conf</span></span><br></pre></td></tr></table></figure><p>将你复制的那段粘贴到最底部，然后保存并退出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># cd /var/www/html/pub/</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige 在 server 上配置一个 web 站点" &gt; example.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige 在 server 上扩展您的 WEB 服务器" &gt; www.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige web 访问控制“ &gt; private.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># vim webapp.wsgi</span></span><br><span class="line">[root@classroom pub]<span class="comment"># cat webapp.wsgi </span></span><br><span class="line">def application(environ, start_response):</span><br><span class="line">    status = <span class="string">'200 OK'</span></span><br><span class="line">    output = <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line">    response_headers = [(<span class="string">'Content-type'</span>, <span class="string">'text/plain'</span>),</span><br><span class="line">                        (<span class="string">'Content-Length'</span>, str(len(output)))]</span><br><span class="line">    start_response(status, response_headers)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> [output]</span><br><span class="line"></span><br><span class="line">[root@classroom pub]<span class="comment"># vim user</span></span><br><span class="line">[root@classroom pub]<span class="comment"># cat user</span></span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br><span class="line">user5</span><br><span class="line"></span><br><span class="line">[root@foundation0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@foundation0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br><span class="line">[root@foundation0 ~]<span class="comment"># ssh root@172.25.0.10</span></span><br><span class="line">Last login: Sat Jul  6 09:08:15 2019 from 172.25.0.10</span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br><span class="line">[root@foundation0 ~]<span class="comment"># ssh root@172.25.0.11</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br></pre></td></tr></table></figure><p>更改网卡在本地切换到root用户（此题需要做后面的链路聚合）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ su -</span><br><span class="line">Password: </span><br><span class="line">[root@foundation0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><blockquote><p>密码是：Asimov</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation0 ~]<span class="comment"># virt-manager</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/07/08/ZDoh6K.png" alt></p><p><img src="https://s2.ax1x.com/2019/07/08/ZDoWSx.png" alt></p><p><img src="https://s2.ax1x.com/2019/07/08/ZDobtA.png" alt></p><p><img src="https://s2.ax1x.com/2019/07/08/ZDIdqe.png" alt></p><p><img src="https://s2.ax1x.com/2019/07/08/ZDofl6.png" alt></p><blockquote><p>按照这种方式，在server 和 desktop两台虚拟机里面添加两块网卡，保证有三快网卡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><blockquote><p>然后直接将整个大虚拟机重启</p></blockquote><blockquote><p>数据库文件因过繁多内容，此处数据库文件请找我进行拷贝。</p></blockquote><p>打开火狐浏览器输入：<a href="http://classroom.example.com/" target="_blank" rel="noopener">http://classroom.example.com/</a></p><blockquote><p>以上是模拟考试前需要做的，真实考试不需要配置以上步骤</p><p>下面就开始模拟考题</p></blockquote><h2 id="开始考题"><a href="#开始考题" class="headerlink" title="开始考题"></a>开始考题</h2><blockquote><p>请注意：由于本机环境原因上述模拟考前配置是正式考试前不需要做的，考者切记正式考试是不用做前面的东西</p><p> 现在正式开始你的考试:</p></blockquote><h3 id="配置信息"><a href="#配置信息" class="headerlink" title="配置信息"></a>配置信息</h3><p>您在考试中将使用到两个系统的信息如下：</p><p><strong>desktop0.example.com : 作为服务器</strong></p><p><strong>server0.example.com : 作为客户端</strong></p><p><strong>两个系统</strong>的<strong>root密码</strong>为<strong>redhat</strong></p><p>系统的IP地址有DHCP提供，您可以视为正常，或者您可以按照一下信息重新设置未静态IP：</p><p><strong>server0.example.com ： 172.24.8.11/24</strong></p><p><strong>desktop0.example.com ： 172.24.8.10/24</strong></p><p>两个系统均为DNS域example.com的成员。除非特别知名，所有要求配置的网络服务都必须能被该域的系统访问。</p><p>classroom.example.com提供了集中认证的服务器为example.com。两个系统desktop0和server0都已经预先配置成此域的客户端。</p><p>classroom.example.com 提供了YUM软件仓库，URL是 <a href="http://classroom.example.com/content/rhel7.0/x86_64/dvd/" target="_blank" rel="noopener">http://classroom.example.com/content/rhel7.0/x86_64/dvd/</a> .</p><p>防火墙是默认打开的，在您认为适当的时候可以关闭。其他防火墙的设置可能在单独的要求中。</p><p>my133.org(172.13.0.0/24)作为不可信网络。</p><p>》 》 》 》 》》》》》》》》》》》》》》》》》》》》》》》》</p><h2 id="参考答案"><a href="#参考答案" class="headerlink" title="参考答案"></a>参考答案</h2><h4 id="1-配置-YUM"><a href="#1-配置-YUM" class="headerlink" title="1.配置 YUM"></a>1.配置 YUM</h4><blockquote><p> 配置yum源考试时候是不作为考题的，需要考者自己去阅读配置文档，里面有说明</p></blockquote><ul><li>分别在 server 和 desktop 上配置 YUM,指向:</li></ul><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[rhce]</span><br><span class="line">name=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">baseurl=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p><strong>desktop0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[rhce]</span><br><span class="line">name=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">baseurl=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure><blockquote><p>这一题是在真实考试中不做考题，您需要自己配置，yum源就在文中的信息当中，包括后面的各个域名的所归属的网段。您需要去阅读配置信息，这里配置信息在本博客开头部分。</p></blockquote><h4 id="2-配置-SELinux"><a href="#2-配置-SELinux" class="headerlink" title="2.配置 SELinux"></a>2.配置 SELinux</h4><ul><li>SElinux 有三种模式,请将 server 与 desktop 运行于强制模式</li></ul><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/selinux/config | grep SELINUX=en</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line">[root@server0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><p><strong>desktop0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/selinux/config | grep SELINUX=en</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line">[root@desktop0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><blockquote><p>其实可以不用reboot重启虚拟机，两边改完配置文件之后</p><p>我们可以这样</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># setenforce 1</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># getenforce</span></span><br><span class="line">&gt; Enforcing</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>配置文件也改为enforcing</p><p>同样我们也临时获取到Enforcing权限</p><p>接下来可不要忘记了另外一台虚拟机了哦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># setenforce 1</span></span><br><span class="line">&gt; [root@server0 ~]<span class="comment"># getenforce</span></span><br><span class="line">&gt; Enforcing</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="3-配置-SSH"><a href="#3-配置-SSH" class="headerlink" title="3.配置 SSH"></a>3.配置 SSH</h4><ul><li>用户能够从域 example.com 内的客户端通过 SSH 访问您的两个虚拟机系统</li><li>在域 my133t.org 内的客户端不能访问您的两个虚拟机系统</li></ul><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># systemctl stop iptables ebtables</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl disable iptables ebtables</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl mask iptables ebtables</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/iptables.service'</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/ebtables.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart firewalld</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable firewalld</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --remove-service=ssh --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=ssh accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><p><strong>desktop0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># systemctl stop iptables ebtables</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl disable iptables ebtables</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl mask iptables ebtables</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/iptables.service'</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/ebtables.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart firewalld</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable firewalld</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --remove-service=ssh --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=ssh accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><blockquote><p>做完这些操作之后，我们可以列出来查看一下，看看是否与我们想的一致</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>从此处我们可以看出ssh这个服务没有了，从而添加上了允许172.25.0.0/24这个网段的主机去访问，与我们所想的一致，接下来看看另外一个</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="4-命令别名及IP-转发"><a href="#4-命令别名及IP-转发" class="headerlink" title="4.命令别名及IP 转发"></a>4.命令别名及IP 转发</h4><p><strong>1）在系统 server 和 desktop 上创建自定义命令为 tk,此自定义命令将执行/bin/ps aux,此命令对系统中所有用户有效</strong></p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/bashrc</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/bashrc </span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># bash</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># which tk</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">/bin/ps</span><br></pre></td></tr></table></figure><p><strong>desktop0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/bashrc </span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail -n 1 /etc/bashrc</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># bash</span></span><br><span class="line">[root@server0 ~]<span class="comment"># which tk</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">/bin/ps</span><br></pre></td></tr></table></figure><blockquote><p>此题过于简单，这里就不过多解释</p></blockquote><p><strong>2）开启 IP 转发功能</strong></p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># cat /etc/sysctl.conf </span></span><br><span class="line"><span class="comment"># System default settings live in /usr/lib/sysctl.d/00-system.conf.</span></span><br><span class="line"><span class="comment"># To override those settings, enter new settings here, or in an </span></span><br><span class="line">.........................................</span><br><span class="line">[root@server0 ~]<span class="comment"># vim /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /usr/lib/sysctl.d/00-system.conf </span></span><br><span class="line">........................................</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1 <span class="comment">#在此处添加</span></span><br><span class="line"></span><br><span class="line">........................................</span><br><span class="line">[root@server0 ~]<span class="comment"># sysctl -p /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1      <span class="comment">#有这个表示成功</span></span><br><span class="line">kernel.shmmax = 4294967295</span><br><span class="line">kernel.shmall = 268435456</span><br></pre></td></tr></table></figure><blockquote><p>同样在desktop 这台虚拟机上也要做，此处不做过多演示</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/sysctl.conf </span></span><br><span class="line"><span class="comment"># System default settings live in /usr/lib/sysctl.d/00-system.conf.</span></span><br><span class="line"><span class="comment"># To override those settings, enter new settings here, or in an /etc/sysctl.d/&lt;name&gt;.conf file</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, see sysctl.conf(5) and sysctl.d(5).</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># sysctl -p /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">kernel.shmmax = 4294967295</span><br><span class="line">kernel.shmall = 268435456</span><br><span class="line">[root@desktop0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h4 id="5-端口转发"><a href="#5-端口转发" class="headerlink" title="5.端口转发"></a>5.端口转发</h4><ul><li>在 server 上配置端口转发,在 172.25.0.0/24 中的系统,访问 server 的本地端口 9527 将被转发到 80,此设置永久生效</li></ul><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 forward-port port=9527 protocol=tcp to-port=80' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><blockquote><p>可以用<code>firewall-cmd --list-all</code>命令来查看是否添加上去</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> forward-port port=<span class="string">"9527"</span> protocol=<span class="string">"tcp"</span> to-port=<span class="string">"80"</span></span><br><span class="line">&gt; rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>切记：此题需要之在<strong>server0</strong>上面操作，而且考试中题目需要你在那操作就在那操作，切勿心急盲目</p></blockquote><h4 id="6-聚合网络"><a href="#6-聚合网络" class="headerlink" title="6.聚合网络"></a>6.聚合网络</h4><p>在 server 和 desktop 之间配置链路聚合</p><p>此链路使用接口 slave1 和 slave2</p><p>此链路在一个接口失效后,仍然能工作</p><p>此链路在 server 上使用地址 192.168.0.1/24</p><p>此链路在 desktop 上使用地址 192.168.0.2/24</p><p>此链路在系统重启后依然保持正常状态</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># nmcli device </span></span><br><span class="line">DEVICE  TYPE      STATE         CONNECTION  </span><br><span class="line">eth0    ethernet  connected     System eth0 </span><br><span class="line">eth1    ethernet  disconnected  --          </span><br><span class="line">eth2    ethernet  disconnected  --          </span><br><span class="line">lo      loopback  unmanaged     --          </span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team con-name team0 ifname team0 config '&#123;"runner":&#123;"name":"activebackup"&#125;&#125;'</span></span><br><span class="line">Connection <span class="string">'team0'</span> (f816c00c-0488-455e-8d17-d66004112ef7) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection modify team0 ipv4.addresses "192.168.0.1/24" ipv4.method manual connection.autoconnect yes</span></span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave1 ifname eth1 master team0 </span></span><br><span class="line">Connection <span class="string">'slave1'</span> (5276955f-cbd6-4ec3-82dc-daf6b0073998) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave2 ifname eth2 master team0 </span></span><br><span class="line">Connection <span class="string">'slave2'</span> (26009b44-7428-4cb4-a2b6-41d5aa5f3cac) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection up team0</span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure><p><strong>desktop</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># nmcli device </span></span><br><span class="line">DEVICE  TYPE      STATE         CONNECTION  </span><br><span class="line">eth0    ethernet  connected     System eth0 </span><br><span class="line">eth1    ethernet  disconnected  --          </span><br><span class="line">eth2    ethernet  disconnected  --          </span><br><span class="line">lo      loopback  unmanaged     --          </span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team con-name team0 ifname team0 config '&#123;"runner":&#123;"name":"activebackup"&#125;&#125;'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection modify team0 ipv4.addresses "192.168.0.2/24" ipv4.method manual connection.autoconnect yes</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave1 ifname eth1 master team0 </span></span><br><span class="line">Connection <span class="string">'slave1'</span> (5c6c05b2-63b9-4aca-b991-ab570f4e23bd) successfully added.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave2 ifname eth2 master team0  </span></span><br><span class="line">Connection <span class="string">'slave2'</span> (546bc410-6a94-4fff-9bef-398e54b2feff) successfully added.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection up team0 </span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure><blockquote><p>最后我们验证以下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping 192.168.0.1</span></span><br><span class="line">&gt; PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=1 ttl=64 time=1.17 ms</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=2 ttl=64 time=0.301 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>然后我们断掉一个接口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># nmcli connection down slave1</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping 192.168.0.1</span></span><br><span class="line">&gt; PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=1 ttl=64 time=0.582 ms</span><br><span class="line">&gt; ^C</span><br><span class="line">&gt; --- 192.168.0.1 ping statistics ---</span><br><span class="line">&gt; 1 packets transmitted, 1 received, 0% packet loss, time 0ms</span><br><span class="line">&gt; rtt min/avg/max/mdev = 0.582/0.582/0.582/0.000 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>我们down掉其中一个接口，还能ping通</p></blockquote><h4 id="7-IPv6-设置"><a href="#7-IPv6-设置" class="headerlink" title="7.IPv6 设置"></a>7.IPv6 设置</h4><p>在您的考试系统上配置接口,在你的默认网卡上使用如下 IPv6 地址</p><p>server 上的 IP 地址应该是 fd00:ba5e:ba11:10::1/64</p><p>desktop 上的 IP 地址应该是 fd00:ba5e:ba11:10::2/64</p><p>两个系统必须能与网络 fd00:ba5e:ba11:10::cc 内的系统通信</p><p>地址必须在重启后依然生效</p><p>两个系统保持当前的 IPv4 地址并能通信</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># nmcli connection show </span></span><br><span class="line">NAME         UUID                                  TYPE            DEVICE </span><br><span class="line">slave1       5276955f-cbd6-4ec3-82dc-daf6b0073998  802-3-ethernet  eth1   </span><br><span class="line">team0        f816c00c-0488-455e-8d17-d66004112ef7  team            team0  </span><br><span class="line">System eth0  5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03  802-3-ethernet  eth0   </span><br><span class="line">slave2       26009b44-7428-4cb4-a2b6-41d5aa5f3cac  802-3-ethernet  eth2   </span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection modify "System eth0" ipv6.addresses fd00:ba5e:ba11:10::1/64 ipv6.method manual connection.autoconnect yes</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure><p><strong>desktop</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection show </span></span><br><span class="line">NAME         UUID                                  TYPE            DEVICE </span><br><span class="line">slave1       5c6c05b2-63b9-4aca-b991-ab570f4e23bd  802-3-ethernet  eth1   </span><br><span class="line">team0        8ccca14c-7275-4996-9d06-9bfd33cf7b3e  team            team0  </span><br><span class="line">System eth0  5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03  802-3-ethernet  eth0   </span><br><span class="line">slave2       546bc410-6a94-4fff-9bef-398e54b2feff  802-3-ethernet  eth2   </span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection modify "System eth0" ipv6.addresses "fd00:ba5e:ba11:10::2/64" ipv6.method manual connection.autoconnect yes</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping6 fd00:ba5e:ba11:10::1</span></span><br><span class="line">&gt; PING fd00:ba5e:ba11:10::1(fd00:ba5e:ba11:10::1) 56 data bytes</span><br><span class="line">&gt; 64 bytes from fd00:ba5e:ba11:10::1: icmp_seq=1 ttl=64 time=4.55 ms</span><br><span class="line">&gt; 64 bytes from fd00:ba5e:ba11:10::1: icmp_seq=2 ttl=64 time=0.413 ms</span><br><span class="line">&gt; ^C</span><br><span class="line">&gt; --- fd00:ba5e:ba11:10::1 ping statistics ---</span><br><span class="line">&gt; 2 packets transmitted, 2 received, 0% packet loss, time 1003ms</span><br><span class="line">&gt; rtt min/avg/max/mdev = 0.413/2.485/4.558/2.073 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>有好多考者都在思考这么一个问题，</p><p>两个系统必须能与网络 fd00:ba5e:ba11:10::cc 内的系统通信</p><p>请问：你电脑能平通自己的网段吗，考题说的是能与这个网络里面得系统</p></blockquote><h4 id="8-邮件服务"><a href="#8-邮件服务" class="headerlink" title="8.邮件服务"></a>8.邮件服务</h4><p>在 server 上配置邮件服务</p><p>这些系统不接受外部发来的邮件</p><p>在这些系统上本地发送任何邮件都会被路由到 server1.example.com</p><p>从这些系统上发送的邮件显示来自于 example.com</p><p>您可以通过发送邮件到 harry 来测试您的配置</p><p>您可以通过访问 <a href="http://server1.example.com/email/harry" target="_blank" rel="noopener">http://server1.example.com/email/harry</a> 来验证您的配置(模拟环境上面没有这个地址，所以此题验证不了)</p><p>发给 harry 的邮件同时能被 natasha 收到</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/postfix/main.cf </span></span><br><span class="line">myorigin = example.com    <span class="comment">#大概在99行</span></span><br><span class="line">inet_interfaces = localhost <span class="comment">#大概在117行，默认是localhost</span></span><br><span class="line">mydestination = <span class="comment">#大概在165行，将=号后面的删掉</span></span><br><span class="line">mynetworks =  127.0.0.0/8<span class="comment">#大概在265行，仅需要127.0.0.0/8</span></span><br><span class="line">relayhost = [server1.example.com]<span class="comment">#大概在319行</span></span><br><span class="line"><span class="comment">#保存并退出</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim  /etc/aliases</span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail -n 1 /etc/aliases</span></span><br><span class="line">harry:harry,natasha</span><br><span class="line">[root@server0 ~]<span class="comment"># useradd harry</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart postfix.service </span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable postfix.service </span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-service=smtp --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><blockquote><p>因为环境原因此题无法验证，真实考试环境中是可以验证的具体验证如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># echo "hello" | mail -s testmail harry</span></span><br><span class="line">&gt; [root@server0 ~]<span class="comment"># curl http://server1.example.com/email/harry</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>然后在最下面可以看到一个hello</p><p>配置文件具体解释：</p><p>myorigin = example.com    #来自哪里<br>mynetworks =  127.0.0.0/8    # 邮件信息仅本地环回<br>relayhost = [server1.example.com]    # 类似中间站，例如B在A和C的中间，A发给C的消息B就会收到。</p></blockquote><h4 id="9-Samba-服务"><a href="#9-Samba-服务" class="headerlink" title="9.Samba 服务"></a>9.Samba 服务</h4><p>在 server 上配置 SAMBA 服务</p><p>您的 samba 服务器必须是 STAFF 工作组的一个成员</p><p>共享/common 目录,共享名为 common</p><p>只有 example.com 域内的客户端可以访问 common 共享</p><p>common 必须是可以浏览的</p><p>用户 natasha 必须能够读取共享中的内容,如果需要的话,验证密码是:tangkai</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install -y samba*</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /common</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/samba/smb.conf </span></span><br><span class="line"><span class="comment">#找到：</span></span><br><span class="line">[global]</span><br><span class="line">workgroup = STAFF <span class="comment">#将=后面改为STAFF</span></span><br><span class="line">..................</span><br><span class="line">..................</span><br><span class="line"><span class="comment">#在最下面，新加入：</span></span><br><span class="line">[common]</span><br><span class="line">        path = /common</span><br><span class="line">        browseable = yes</span><br><span class="line">        valid users = natasha</span><br><span class="line"><span class="comment"># 保存并退出</span></span><br><span class="line">[root@server0 ~]<span class="comment"># getsebool -a | grep samba</span></span><br><span class="line">samba_create_home_dirs --&gt; off</span><br><span class="line">samba_domain_controller --&gt; off</span><br><span class="line">samba_enable_home_dirs --&gt; off</span><br><span class="line">samba_export_all_ro --&gt; off</span><br><span class="line">samba_export_all_rw --&gt; off</span><br><span class="line">samba_portmapper --&gt; off</span><br><span class="line">samba_run_unconfined --&gt; off</span><br><span class="line">samba_share_fusefs --&gt; off</span><br><span class="line">samba_share_nfs --&gt; off</span><br><span class="line">sanlock_use_samba --&gt; off</span><br><span class="line">use_samba_home_dirs --&gt; off</span><br><span class="line">virt_sandbox_use_samba --&gt; off</span><br><span class="line">virt_use_samba --&gt; off</span><br><span class="line">[root@server0 ~]<span class="comment"># setsebool -P samba_enable_home_dirs 1</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chcon -Rt samba_share_t /common/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=samba accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=samba-client accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># id natasha</span></span><br><span class="line">uid=1002(natasha) gid=1002(natasha) groups=1002(natasha)</span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a natasha</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user natasha.</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br></pre></td></tr></table></figure><blockquote><p>我们要养成一种习惯，不管之前有没有加入启动项，在每次重启之后，我们都要顺手把他加入到开机启动项里面</p></blockquote><blockquote><p>验证:需要到desktop0里面验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># yum install -y cifs-util*</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># mount -t cifs -o username=natasha,password=tangkai //172.25.0.11/common /media/</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">&gt; Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">&gt; /dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">&gt; devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">&gt; tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">&gt; tmpfs                 921M   17M  904M   2% /run</span><br><span class="line">&gt; tmpfs                 921M     0  921M   0% /sys/fs/cgroup</span><br><span class="line">&gt; //172.25.0.11/common   10G  3.1G  7.0G  31% /media</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="10-多用户-samba-挂载"><a href="#10-多用户-samba-挂载" class="headerlink" title="10.多用户 samba 挂载"></a>10.多用户 samba 挂载</h4><p>在 server 上通过 samba 共享目录/storage</p><p>共享名为 share</p><p>共享目录只能被 example.com 域内的客户端使用</p><p>共享目录 share 必须可以被浏览</p><p>用户 sarah 能以读的方式访问此共享,访问密码是 tangkai</p><p>用户 kitty 能以读写的方式访问此共享,访问密码是 tangkai</p><p>此共享永久挂载在 desktop 上的/mnt/dev 目录,并使用用户 sarah 进行认证,任何用户可临时通过 kitty 来获得读写权限</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/samba/smb.conf </span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail n 6 /etc/samba/smb.conf </span></span><br><span class="line">[share]</span><br><span class="line">path = /storage</span><br><span class="line">browseable = yes</span><br><span class="line">    valid users = sarah,kitty</span><br><span class="line">writable = no</span><br><span class="line">write list = kitty</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /storage</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd sarah</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd kitty</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chcon -Rt samba_share_t /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># setfacl -m u:sarah:r-x /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># setfacl -m u:kitty:rwx /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a sarah</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user sarah.</span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a kitty</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user kitty.</span><br></pre></td></tr></table></figure><p><strong>desktop</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/fstab </span></span><br><span class="line">//172.25.0.11/share/mnt/devcifs multiuser,username=sarah,password=tangkai,sec=ntlmssp 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/dev</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">tmpfs                 921M   17M  904M   2% /run</span><br><span class="line">tmpfs                 921M     0  921M   0% /sys/fs/cgroup</span><br><span class="line">//172.25.0.11/common   10G  3.1G  7.0G  31% /media</span><br><span class="line">//172.25.0.11/share    10G  3.1G  7.0G  31% /mnt/dev</span><br></pre></td></tr></table></figure><h4 id="11-配置-NFS-服务"><a href="#11-配置-NFS-服务" class="headerlink" title="11.配置 NFS 服务"></a>11.配置 NFS 服务</h4><p>1.) 在 server 上配置 NFS<br>以只读的方式共享/public,同时只能被 example.com 内用户访问</p><p>以读写的方式共享/protected 能被 example.com 内用户访问</p><p>访问/protected 需要通过 kerberos 安全加密,您可以使用下边链接的秘钥: <a href="http://classroom.example.com/pub/keytabs/server0.keytab" target="_blank" rel="noopener">http://classroom.example.com/pub/keytabs/server0.keytab</a></p><p>目录/protected 应该包含名为 project 拥有人为 ldapuser12 的子目录</p><p>用户 ldapuser12 能以读写的方式访问/protected/project</p><p><strong>server0</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/exports</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/exports</span></span><br><span class="line">/public172.25.0.0/24(ro)</span><br><span class="line">/protected 172.25.0.0/24(rw,sec=krb5p)</span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /public</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /protected</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /protected/project</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这一栏的步骤有可能考试不需要你操作，但我们要以防万一</span></span><br><span class="line">[root@server0 ~]<span class="comment"># yum install -y krb5* sssd* authconfig*</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /etc/openldap/</span></span><br><span class="line">[root@server0 openldap]<span class="comment"># ls</span></span><br><span class="line">certs  ldap.conf  schema</span><br><span class="line">[root@server0 openldap]<span class="comment"># mkdir cacerts</span></span><br><span class="line">[root@server0 openldap]<span class="comment"># cd cacerts/</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># wget http://classroom.example.com/pub/example-ca.crt</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># authconfig-tui </span></span><br><span class="line"><span class="comment"># 过程在考rhcse的时候有描述，这里就不再介绍</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># su - ldapuser12</span></span><br><span class="line">su: warning: cannot change directory to /home/guests/ldapuser12: No such file or directory</span><br><span class="line">mkdir: cannot create directory <span class="string">'/home/guests'</span>: Permission denied</span><br><span class="line">-bash-4.2$</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># chown ldapuser12 /protected/project</span></span><br><span class="line">[root@server0 ~]<span class="comment"># wget -O /etc/krb5.keytab  http://classroom.example.com/pub/keytabs/server0.keytab</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/sysconfig/nfs</span></span><br><span class="line">RPCNFSDARGS=<span class="string">"-V 4.2"</span>  <span class="comment"># 在第13行，引号里面加入-V 4.2</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable nfs-secure nfs-secure-server nfs-server</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure.service'</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure-server.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure-server.service'</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-server.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-server.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl start nfs-secure nfs-secure-server nfs-server</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=nfs accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=rpc-bind accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><p><strong>2.)</strong><br><strong>在 desktop 上挂载来自于 server0 的 NFS 共享</strong></p><p>/public 挂载在目录/mnt/nfsmount 上</p><p>/protected 挂载在目录/mnt/nfssecure,并使用安全的方式,秘钥：</p><p><a href="http://classroom.example.com/pub/keytabs/desktop0.keytab" target="_blank" rel="noopener">http://classroom.example.com/pub/keytabs/desktop0.keytab</a></p><p>用户 ldapuser12 能在/mnt/nfssecure/project 上创建文件</p><p>这些文件系统在系统启动时自动挂载</p><p><strong>desktop</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/nfsmount</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/nfssecure</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这一栏的步骤有可能考试不需要你操作，但我们要以防万一</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># yum install sssd* krb5* authconfig* -y</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cd /etc/openldap/</span></span><br><span class="line">[root@desktop0 openldap]<span class="comment"># ls</span></span><br><span class="line">certs  ldap.conf</span><br><span class="line">[root@desktop0 openldap]<span class="comment"># mkdir cacerts</span></span><br><span class="line">[root@desktop0 openldap]<span class="comment"># cd cacerts/</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># wget http://classroom.example.com/pub/example-ca.crt</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># authconfig-tui</span></span><br><span class="line"><span class="comment"># 过程在考rhcse的时候有描述，这里就不再介绍</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># su - ldapuser12</span></span><br><span class="line">su: warning: cannot change directory to /home/guests/ldapuser12: No such file or directory</span><br><span class="line">mkdir: cannot create directory <span class="string">'/home/guests'</span>: Permission denied</span><br><span class="line">-bash-4.2$</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># wget -O /etc/krb5.keytab http://classroom.example.com/pub/keytabs/desktop0.keytab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/sysconfig/nfs</span></span><br><span class="line">RPCNFSDARGS=<span class="string">"-V 4.2"</span>  <span class="comment"># 在第13行，引号里面加入-V 4.2</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable nfs-secure</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl start nfs-secure</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 2 /etc/fstab </span></span><br><span class="line">172.25.0.11:/public /mnt/nfsmount nfs ro,v4.2 0 0</span><br><span class="line">172.25.0.11:/protected /mnt/nfssecure nfs defaults,v4.2,sec=krb5p 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure><h4 id="12-在-server-上配置一个-web-站点-http-server-example-com"><a href="#12-在-server-上配置一个-web-站点-http-server-example-com" class="headerlink" title="12.在 server 上配置一个 web 站点 http://server.example.com"></a>12.在 server 上配置一个 web 站点 <a href="http://server.example.com" target="_blank" rel="noopener">http://server.example.com</a></h4><p>从<a href="http://classroom.example.com/pub/example.html" target="_blank" rel="noopener">http://classroom.example.com/pub/example.html</a> 下载文件,</p><p>并重命名为 index.html，不要修改文件内容。</p><p>将文件 index.html 拷贝到您的 DocumentRoot 目录下</p><p>来自于 example.com 的客户端可以访问该 web 服务器</p><p>来自于 my133t.org 的客户端的访问会被拒绝</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install httpd -y</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /var/www/html/</span></span><br><span class="line">[root@server0 html]<span class="comment"># ls</span></span><br><span class="line">[root@server0 html]<span class="comment"># wget -O  index.html http://classroom.example.com/pub/example.html</span></span><br><span class="line">[root@server0 html]<span class="comment"># ls</span></span><br><span class="line">index.html</span><br><span class="line">[root@server0 html]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@server0 html]<span class="comment"># systemctl enable httpd</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/httpd.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/httpd.service'</span></span><br><span class="line">[root@server0 html]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=http accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 html]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;[root@server0 html]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige 在 server 上配置一个 web 站点</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><h4 id="13-为站点-http-server-example-com-配置-TLS-加密"><a href="#13-为站点-http-server-example-com-配置-TLS-加密" class="headerlink" title="13.为站点 http://server.example.com 配置 TLS 加密"></a>13.为站点 <a href="http://server.example.com" target="_blank" rel="noopener">http://server.example.com</a> 配置 TLS 加密</h4><p>已签名证书从 <a href="http://classroom.example.com/pub/tls/certs/server0.crt" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/certs/server0.crt</a> 获取</p><p>证书的秘钥从 <a href="http://classroom.example.com/pub/tls/private/server0.key" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/private/server0.key</a> 获取</p><p>证书的签名授权信息从 <a href="http://classroom.example.com/pub/tls/certs/www0.crt" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/certs/www0.crt</a> 获取</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 html]<span class="comment"># yum -y install mod_ssl.x86_64</span></span><br><span class="line">[root@server0 html]<span class="comment"># cd /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># vim ssl.conf </span></span><br><span class="line"><span class="comment">#到120行左右</span></span><br><span class="line">SSLCertificateFile /etc/pki/tls/certs/localhost.crt</span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/localhost.key</span><br><span class="line"><span class="comment">#SSLCACertificateFile /etc/pki/tls/certs/ca-bundle.crt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将这三个的后面的文件名改掉，然后将最后一个的#号去掉，效果如下：</span></span><br><span class="line">SSLCertificateFile /etc/pki/tls/certs/server0.crt</span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/server0.key</span><br><span class="line">SSLCACertificateFile /etc/pki/tls/certs/www0.crt</span><br><span class="line"><span class="comment"># 记住这三个路径之后保存并退出</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># cd /etc/pki/tls/certs/</span></span><br><span class="line">[root@server0 certs]<span class="comment"># wget http://classroom.example.com/pub/tls/certs/server0.crt</span></span><br><span class="line">[root@server0 certs]<span class="comment"># cd /etc/pki/tls/private/</span></span><br><span class="line">[root@server0 private]<span class="comment"># wget http://classroom.example.com/pub/tls/private/server0.key</span></span><br><span class="line">[root@server0 private]<span class="comment"># cd /etc/pki/tls/certs/</span></span><br><span class="line">[root@server0 certs]<span class="comment"># wget http://classroom.example.com/pub/tls/certs/www0.crt</span></span><br><span class="line"></span><br><span class="line">[root@server0 certs]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 certs]<span class="comment"># systemctl enable httpd.service </span></span><br><span class="line">[root@server0 certs]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=https accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 certs]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 certs]<span class="comment"># curl -k https://server.example.com</span></span><br><span class="line">&gt; zheshi yige 在 server 上配置一个 web 站点</span><br><span class="line">&gt; [root@server0 certs]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige 在 server 上配置一个 web 站点</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="14-在-server-上扩展您的-WEB-服务器"><a href="#14-在-server-上扩展您的-WEB-服务器" class="headerlink" title="14.在 server 上扩展您的 WEB 服务器"></a>14.在 server 上扩展您的 WEB 服务器</h4><ol><li>为站点 <a href="http://www.example.com" target="_blank" rel="noopener">http://www.example.com</a> 创建一个虚拟主机</li><li>设置 DocumentRoot 为/var/www/virtual</li><li>从 <a href="http://classroom.example.com/pub/www.html" target="_blank" rel="noopener">http://classroom.example.com/pub/www.html</a> 下载文件,并重命名为 index.html,不要修改文件内容。</li><li>将文件 index.html 拷贝到 DocumentRoot 目录下</li><li>确保 floyd 用户能够在/var/www/virtual 下创建文件</li></ol><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># find / -name *vhosts.conf</span></span><br><span class="line">/usr/share/doc/httpd-2.4.6/httpd-vhosts.conf</span><br><span class="line">[root@server0 ~]<span class="comment"># cp /usr/share/doc/httpd-2.4.6/httpd-vhosts.conf /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># vim httpd-vhosts.conf </span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># tail -n 8 httpd-vhosts.conf </span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/html"</span></span><br><span class="line">    ServerName server.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/virtual"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /var/www/virtual</span></span><br><span class="line">oot@server0 ~]<span class="comment"># cd /var/www/virtual/</span></span><br><span class="line">[root@server0 virtual]<span class="comment"># wget -O index.html http://classroom.example.com/pub/www.html</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># useradd floyd</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># setfacl -m u:floyd:rwx /var/www/virtual</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl www.example.com </span></span><br><span class="line">&gt; zheshi yige 在 server 上扩展您的 WEB 服务器</span><br><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl -k https://server.example.com</span></span><br><span class="line">&gt; zheshi yige 在 server 上配置一个 web 站点</span><br><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige 在 server 上配置一个 web 站点</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote></blockquote><h4 id="15-web-访问控制"><a href="#15-web-访问控制" class="headerlink" title="15.web 访问控制"></a>15.web 访问控制</h4><p>在您 server 上的 web 服务器的 DocumentRoot 目录下创建一个名为 private 的目录</p><p>从<a href="http://classroom.example.com/pub/private.html" target="_blank" rel="noopener">http://classroom.example.com/pub/private.html</a> 下载文件到这个目录,并重命名为index.html,不要修改文件内容</p><p>从 server 上,任何人都可以浏览 private 的内容,但是从其他系统不能访问这个目录的内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 conf.d]<span class="comment"># cd /var/www/html/</span></span><br><span class="line">[root@server0 html]<span class="comment"># mkdir private</span></span><br><span class="line">[root@server0 html]<span class="comment"># cd private/</span></span><br><span class="line">[root@server0 private]<span class="comment"># wget -O index.html http://classroom.example.com/pub/private.</span></span><br><span class="line">[root@server0 private]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment">#搜索Requ，复制</span></span><br><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride none</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">[root@server0 private]<span class="comment"># vim /etc/httpd/conf.d/httpd-vhosts.conf</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/html"</span></span><br><span class="line">    ServerName server.example.com</span><br><span class="line">   <span class="comment">#&lt;Directory "/var/www/html/private"&gt;</span></span><br><span class="line">   <span class="comment">#    Require ip 172.25.0.11</span></span><br><span class="line">   <span class="comment">#&lt;/Directory&gt;</span></span><br><span class="line">&lt;/VirtualHost&gt; </span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/virtual"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="comment"># 这里#号表示加在这里三个，不要照着敲，把#号都敲进去了</span></span><br><span class="line"></span><br><span class="line">[root@server0 private]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 private]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 private]<span class="comment"># curl server.example.com/private/ </span></span><br><span class="line">&gt; zheshi yige web 访问控制</span><br><span class="line">&gt; <span class="comment"># 然后我们用客户端去访问</span></span><br><span class="line">&gt; root@desktop0 ~]<span class="comment"># curl server.example.com/private/</span></span><br><span class="line">&gt; &lt;!DOCTYPE HTML PUBLIC <span class="string">"-//IETF//DTD HTML 2.0//EN"</span>&gt;</span><br><span class="line">&gt; &lt;html&gt;&lt;head&gt;</span><br><span class="line">&gt; &lt;title&gt;403 Forbidden&lt;/title&gt;</span><br><span class="line">&gt; &lt;/head&gt;&lt;body&gt;</span><br><span class="line">&gt; &lt;h1&gt;Forbidden&lt;/h1&gt;</span><br><span class="line">&gt; &lt;p&gt;You don<span class="string">'t have permission to access /private/</span></span><br><span class="line"><span class="string">&gt; on this server.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&gt; &lt;/body&gt;&lt;/html&gt;</span></span><br><span class="line"><span class="string">&gt;</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="16-在-server-上实现动态-web-内容"><a href="#16-在-server-上实现动态-web-内容" class="headerlink" title="16.在 server 上实现动态 web 内容"></a>16.在 server 上实现动态 web 内容</h4><p>动态内容由名为 alt.example.com 的虚拟主机提供虚拟主机侦听端口为 8909</p><p>从 <a href="http://classroom.example.com/pub/webapp.wsgi" target="_blank" rel="noopener">http://classroom.example.com/pub/webapp.wsgi</a> 下载一个脚本,然后放在适当的位置,不要修改文件内容</p><p>客户端访问 <a href="http://alt.example.com:8909" target="_blank" rel="noopener">http://alt.example.com:8909</a> 时,应该接收到动态生成的 web 页面此 <a href="http://alt.example.com:8909" target="_blank" rel="noopener">http://alt.example.com:8909</a> 必须能被 example.com 内所有的系统访问</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 private]<span class="comment"># yum install mod_wsgi.x86_64 -y</span></span><br><span class="line">[root@server0 private]<span class="comment"># cd /var/www/</span></span><br><span class="line">[root@server0 www]<span class="comment"># mkdir wsgi</span></span><br><span class="line">[root@server0 www]<span class="comment"># cd wsgi/</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># wget http://classroom.example.com/pub/webapp.wsgi</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># vim /etc/httpd/conf.d/httpd-vhosts.conf </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># tail -n 5 /etc/httpd/conf.d/httpd-vhosts.conf </span></span><br><span class="line">Listen 8909</span><br><span class="line">&lt;VirtualHost *:8909&gt;</span><br><span class="line">    WSGIScriptAlias / <span class="string">"/var/www/wsgi/webapp.wsgi"</span></span><br><span class="line">    ServerName alt.example.com:8909</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 port port=8909 protocol=tcp accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># curl alt.example.com:8909</span></span><br><span class="line">curl: (7) Failed connect to alt.example.com:8909; Connection refused</span><br><span class="line">[root@server0 wsgi]<span class="comment"># semanage port -l | grep http</span></span><br><span class="line">http_cache_port_t              tcp      8080, 8118, 8123, 10001-10010</span><br><span class="line">http_cache_port_t              udp      3130</span><br><span class="line">http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000</span><br><span class="line">pegasus_http_port_t            tcp      5988</span><br><span class="line">pegasus_https_port_t           tcp      5989</span><br><span class="line">[root@server0 wsgi]<span class="comment"># semanage port -a -t http_port_t -p tcp 8909</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure><blockquote><p>验证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 wsgi]<span class="comment"># curl http://alt.example.com:8909</span></span><br><span class="line">&gt; Hello World!</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="17-配置-server-提供一个-iSCSI-共享服务"><a href="#17-配置-server-提供一个-iSCSI-共享服务" class="headerlink" title="17.配置 server 提供一个 iSCSI 共享服务"></a>17.配置 server 提供一个 iSCSI 共享服务</h4><p>磁盘名为 iqn.2014-09.com.example:server</p><p>服务端口为 3260</p><p>使用 iscsi_store 作为其后端卷其大小为 3G</p><p>此服务只能被 desktop.example.com 访问</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 wsgi]<span class="comment"># yum install targetcli* -y</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">└─vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">[root@server0 wsgi]<span class="comment"># fdisk /dev/vdb</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (2048-20971519, default 2048): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-20971519, default 20971519): +3G</span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">[root@server0 wsgi]<span class="comment"># partprobe </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">└─vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">└─vdb1 253:17   0   3G  0 part </span><br><span class="line">[root@server0 wsgi]<span class="comment"># targetcli </span></span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ................................................ [...]</span><br><span class="line">  o- backstores ..................................... [...]</span><br><span class="line">  | o- block ........................................ [Storage Objects: 0]</span><br><span class="line">  | o- fileio ....................................... [Storage Objects: 0]</span><br><span class="line">  | o- pscsi ........................................ [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ...................................... [Storage Objects: 0]</span><br><span class="line">  o- iscsi .......................................... [Targets: 0]</span><br><span class="line">  o- loopback ....................................... [Targets: 0]</span><br><span class="line">/&gt; <span class="built_in">cd</span> /backstores/block </span><br><span class="line">/backstores/block&gt; create iscsi_store /dev/vdb1</span><br><span class="line">Created block storage object iscsi_store using /dev/vdb1.</span><br><span class="line">/backstores/block&gt; <span class="built_in">cd</span> /iscsi </span><br><span class="line">/iscsi&gt; create iqn.2014-09.com.example:server</span><br><span class="line">Created target iqn.2014-09.com.example:server.</span><br><span class="line">Created TPG 1.</span><br><span class="line">/iscsi&gt; ls</span><br><span class="line">o- iscsi ........................................... [Targets: 1]</span><br><span class="line">  o- iqn.2014-09.com.example:server ................ [TPGs: 1]</span><br><span class="line">    o- tpg1 ........................................ [no-gen-acls, no-auth]</span><br><span class="line">      o- acls ...................................... [ACLs: 0]</span><br><span class="line">      o- luns ...................................... [LUNs: 0]</span><br><span class="line">      o- portals ................................... [Portals: 0]</span><br><span class="line">/iscsi&gt; <span class="built_in">cd</span> iqn.2014-09.com.example:server/tpg1/acls </span><br><span class="line">/iscsi/iqn.20...ver/tpg1/acls&gt; create iqn.2014-09.com.example:desktop</span><br><span class="line">Created Node ACL <span class="keyword">for</span> iqn.2014-09.com.example:desktop</span><br><span class="line">/iscsi/iqn.20...ver/tpg1/acls&gt; <span class="built_in">cd</span> /iscsi/iqn.2014-09.com.example:server/tpg1/luns </span><br><span class="line">/iscsi/iqn.20...ver/tpg1/luns&gt; create /backstores/block/iscsi_store </span><br><span class="line">Created LUN 0.</span><br><span class="line">Created LUN 0-&gt;0 mapping <span class="keyword">in</span> node ACL iqn.2014-09.com.example:desktop</span><br><span class="line">/iscsi/iqn.20...ver/tpg1/luns&gt; <span class="built_in">cd</span> /iscsi/iqn.2014-09.com.example:server/tpg1/portals </span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; create 172.25.0.11 3260</span><br><span class="line">Using default IP port 3260</span><br><span class="line">Created network portal 172.25.0.11:3260.</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; <span class="built_in">exit</span></span><br><span class="line">Global pref auto_save_on_exit=<span class="literal">true</span></span><br><span class="line">Last 10 configs saved <span class="keyword">in</span> /etc/target/backup.</span><br><span class="line">Configuration saved to /etc/target/saveconfig.json</span><br><span class="line"></span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --add-rich-rule 'rule family="ipv4" source address="172.25.0.0/24" port port=3260 protocol=tcp accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl restart target</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl enable target</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/target.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/target.service'</span></span><br></pre></td></tr></table></figure><blockquote><p>这一题的验证是下一题</p></blockquote><h4 id="18-配置-desktop-使其能连接在-server-上提供的-iscsi"><a href="#18-配置-desktop-使其能连接在-server-上提供的-iscsi" class="headerlink" title="18.配置 desktop 使其能连接在 server 上提供的 iscsi"></a>18.配置 desktop 使其能连接在 server 上提供的 iscsi</h4><p>iSCSI 设备在系统启动的期间自动加载</p><p>块设备 iSCSI 上包含一个大小 1500MiB 的分区,并格式化为 ext4</p><p>此分区挂载在/mnt/netdev 上同时在系统启动的期间自动加载</p><p><strong>desktop</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># yum install -y iscsi-init*</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/netdev</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/iscsi/initiatorname.iscsi </span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/iscsi/initiatorname.iscsi </span></span><br><span class="line">InitiatorName=iqn.2014-09.com.example:desktop</span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart iscsi iscsid</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable iscsi iscsid</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/iscsid.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/iscsid.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># iscsiadm -m discovery -t st -p 172.25.0.11</span></span><br><span class="line">172.25.0.11:3260,1 iqn.2014-09.com.example:server</span><br><span class="line">[root@desktop0 ~]<span class="comment"># iscsiadm -m node -l</span></span><br><span class="line">Logging <span class="keyword">in</span> to [iface: default, target: iqn.2014-09.com.example:server, portal: 172.25.0.11,3260] (multiple)</span><br><span class="line">Login to [iface: default, target: iqn.2014-09.com.example:server, portal: 172.25.0.11,3260] successful.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   3G  0 disk </span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">└─vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">[root@desktop0 ~]<span class="comment"># fdisk /dev/sda</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (8192-6291455, default 8192): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (8192-6291455, default 6291455): +1500M</span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">[root@desktop0 ~]<span class="comment"># partprobe</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkfs.ext4 /dev/sda1</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># blkid | grep sda</span></span><br><span class="line">/dev/sda1: UUID=<span class="string">"142c6ec3-0d06-4f89-91e3-8201e8186d37"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab </span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/fstab </span></span><br><span class="line">UUID=<span class="string">"142c6ec3-0d06-4f89-91e3-8201e8186d37"</span>/mnt/netdevext4 defaults,_netdev 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">/dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">.............................</span><br><span class="line">/dev/sda1             1.5G  4.5M  1.4G   1% /mnt/netdev</span><br></pre></td></tr></table></figure><h4 id="19-编写一个位于-root-program-的-shell-脚本"><a href="#19-编写一个位于-root-program-的-shell-脚本" class="headerlink" title="19.编写一个位于/root/program 的 shell 脚本"></a>19.编写一个位于/root/program 的 shell 脚本</h4><p>当执行/root/program tang 时,终端显示 kai</p><p>当执行/root/program kai 时,终端显示 tang</p><p>当仅执行/root/program 不加参数,或者加上其他参数时,终端显示标准错误输出/root/program tang|kai</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /root/program</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /root/program </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    tang)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"kai"</span></span><br><span class="line">;;</span><br><span class="line">    kai)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"tang"</span></span><br><span class="line">;;</span><br><span class="line">    *)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/root/program tang|kai"</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chmod +x /root/program</span></span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program tang </span></span><br><span class="line">kai</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program kai</span></span><br><span class="line">tang</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program</span></span><br><span class="line">/root/program tang|kai</span><br></pre></td></tr></table></figure><h4 id="20-写一个创建用户的脚本"><a href="#20-写一个创建用户的脚本" class="headerlink" title="20.写一个创建用户的脚本"></a>20.写一个创建用户的脚本</h4><p>脚本名为/root/mkuser,脚本执行时需要添加一个参数,</p><p>请在 <a href="http://classroom.example.com/pub/user" target="_blank" rel="noopener">http://classroom.example.com/pub/user</a> 下载下来,这个 user 就是参数</p><p>如果没有参数,将提示:Usage:/root/mkuser</p><p>如果参数为不存在的文件,则提示:Input file not found</p><p>如果存在,则创建用户,用户不需要设置密码,用户的 shell 为/bin/flase</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /root/mkuser</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /root/mkuser </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Usage:/root/mkuser"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$1</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> $(cat <span class="variable">$1</span>);<span class="keyword">do</span></span><br><span class="line">useradd -s /bin/flase <span class="variable">$user</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Input file not found"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chmod +x /root/mkuser </span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /root</span></span><br><span class="line">[root@server0 ~]<span class="comment"># wget http://classroom.example.com/pub/user </span></span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser</span></span><br><span class="line">Usage:/root/mkuser</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser dfs</span></span><br><span class="line">Input file not found</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser user</span></span><br><span class="line">[root@server0 ~]<span class="comment"># id user1</span></span><br><span class="line">uid=1001(user1) gid=1001(user1) groups=1001(user1)</span><br><span class="line">[root@server0 ~]<span class="comment"># id user2</span></span><br><span class="line">uid=1002(user2) gid=1002(user2) groups=1002(user2)</span><br><span class="line">[root@server0 ~]<span class="comment"># id user3</span></span><br><span class="line">uid=1003(user3) gid=1003(user3) groups=1003(user3)</span><br><span class="line">[root@server0 ~]<span class="comment"># cat user </span></span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br><span class="line">user5</span><br><span class="line">[root@server0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h4 id="21-在你的机器上创建一个-mariadb-数据库"><a href="#21-在你的机器上创建一个-mariadb-数据库" class="headerlink" title="21.在你的机器上创建一个 mariadb 数据库;"></a>21.在你的机器上创建一个 mariadb 数据库;</h4><p>数据库名为 contacts</p><p>数据库应该包含来自数据库复制的内容。复制文件的 URL 为<br><a href="http://classroom.example.com/pub/user.mdb" target="_blank" rel="noopener">http://classroom.example.com/pub/user.mdb</a></p><p>数据库只能被 localhost 访问</p><p>除了 root 用户,此数据库只能被用户 raikon 查询,此用户密码为 redhat</p><p>root 用户密码为 redhat,同时不允许空密码登陆</p><p><strong>server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install mariadb* -y</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable mariadb</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/mariadb.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/mariadb.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line">Set root password? [Y/n] y</span><br><span class="line">New password: <span class="comment">#redhat</span></span><br><span class="line">Re-enter new password: <span class="comment">#redhat</span></span><br><span class="line">Password updated successfully!</span><br><span class="line">Remove anonymous users? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line">Disallow root login remotely? [Y/n] n</span><br><span class="line"> ... skipping.</span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] y</span><br><span class="line"> - Dropping <span class="built_in">test</span> database...</span><br><span class="line"> ... Success!</span><br><span class="line">Reload privilege tables now? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line">[root@server0 ~]<span class="comment"># wget http://classroom.example.com/pub/users.mdb</span></span><br><span class="line"></span><br><span class="line">[root@server0 ~]<span class="comment"># mysql -uroot -predhat</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 11</span><br><span class="line">Server version: 5.5.35-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database Contacts;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use Contacts;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [Contacts]&gt; <span class="built_in">source</span> /root/user.mdb;</span><br><span class="line">MariaDB [Contacts]&gt; grant select on Contacts .* to <span class="string">'raikon@localhost'</span> identified by <span class="string">'redhat'</span>;</span><br><span class="line">MariaDB [Contacts]&gt; flush privileges;</span><br><span class="line">MariaDB [Contacts]&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h4 id="24-数据库查询"><a href="#24-数据库查询" class="headerlink" title="24.数据库查询"></a>24.数据库查询</h4><p>在 system1 上使用数据库 Contacts ，并使用相应的 SQL 查询以回答下列问题：</p><p> 密码是fadora 的人的名字是什么？</p><p> 有多少人的姓名是 John ，同时居住在 Santa Clara ？</p><h3 id="system1"><a href="#system1" class="headerlink" title="system1"></a>system1</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@system1 ~]<span class="comment"># mysql -u root -predhat</span></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use Contacts;</span><br><span class="line"></span><br><span class="line">MariaDB [Contacts]&gt; SELECT u_name.firstname FROM u_name, u_passwd WHERE u_name.userid = u_passwd.uid AND u_passwd.password = <span class="string">'fadora'</span>;</span><br><span class="line">+-----------+</span><br><span class="line">| firstname |</span><br><span class="line">+-----------+</span><br><span class="line">| John      |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [Contacts]&gt; SELECT COUNT(*) FROM u_name,u_loc WHERE u_name.userid = u_loc.uid AND u_name.firstname = <span class="string">'John'</span> AND u_loc.location = <span class="string">'Santa Clara'</span>;</span><br><span class="line">+----------+</span><br><span class="line">| COUNT(*) |</span><br><span class="line">+----------+</span><br><span class="line">|        4 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>密码是fadora 的人的名字是什么？</strong></p><p>John</p><p><strong>有多少人的姓名是 John ，同时居住在 Santa Clara ？</strong></p><p> 4</p><blockquote><p>在这里，考者请切记，查询之后的答案记住一定要填写到所填写的正确地方。</p><p>不要忘记填写进去</p></blockquote><p>》》》》》》》》》》》》》》》》》》》》》》</p><blockquote><p>以上就是本次RHCE 7 版本的认证考试参考答案，如有错误请联系博主进行更改，最后祝愿大家RHCE认证取得好成绩！！！！</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;写在前面的话：考试练习不等于真实考试考题，里面的数据可能也与您考试练习的数据不一样，请认真仔细。祝愿RHCE取得好成绩！！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;模拟考前配置&quot;&gt;&lt;a href=&quot;#模拟考前配
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>ISCSI服务</title>
    <link href="https://github.com/chineselijie/2020/03/12/27.linux--ISCSI%E6%9C%8D%E5%8A%A1/"/>
    <id>https://github.com/chineselijie/2020/03/12/27.linux--ISCSI%E6%9C%8D%E5%8A%A1/</id>
    <published>2020-03-12T11:38:40.262Z</published>
    <updated>2019-08-22T12:22:16.378Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[toc]</p><h2 id="ISCSI技术概述"><a href="#ISCSI技术概述" class="headerlink" title="ISCSI技术概述"></a>ISCSI技术概述</h2><p>硬盘的接口类型</p><ul><li>IDE是一种成熟稳定、价格便宜的并行传输接口。</li><li>SATA是一种传输速度更快、数据校验更完整的串行传输接口。</li><li>SCSI是一种用于计算机和硬盘、光驱等设备之间系统级接口的通用标准，具有系统资源占用率低、转速高、传输速度快等优点。</li></ul><p>IBM公司开始研发ISCSI技术</p><p>​        这是一种将SCSI接口与以太网技术相结合的新型存储技术，可以用来在网络中传输SCSI接口的命令和数据。</p><p>iscsi = internet + scsi硬盘接口</p><p>​        这样，不仅克服了传统SCSI接口设备的物理局限性，实现了跨区域的存储资源共享，还可以在不停机的状态下扩展存储容量。</p><h2 id="配置ISCSI服务端"><a href="#配置ISCSI服务端" class="headerlink" title="配置ISCSI服务端"></a>配置ISCSI服务端</h2><h4 id="添加硬盘"><a href="#添加硬盘" class="headerlink" title="添加硬盘"></a>添加硬盘</h4><p>首先我们提前将虚拟机加入一块硬盘</p><p>开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">├─sda1            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2            8:2    0   19G  0 part</span><br><span class="line">  ├─centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure><h4 id="yum安装ISCSI服务端程序"><a href="#yum安装ISCSI服务端程序" class="headerlink" title="yum安装ISCSI服务端程序"></a>yum安装ISCSI服务端程序</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y targetd targetcli</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/targetd.service to /usr/lib/systemd/system/targetd.service.</span><br></pre></td></tr></table></figure><h4 id="配置ISCSI服务端共享资源"><a href="#配置ISCSI服务端共享资源" class="headerlink" title="配置ISCSI服务端共享资源"></a>配置ISCSI服务端共享资源</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># targetcli</span></span><br><span class="line">Warning: Could not load preferences file /root/.targetcli/prefs.bin.</span><br><span class="line">targetcli shell version 2.1.fb46</span><br><span class="line">Copyright 2011-2013 by Datera, Inc and others.</span><br><span class="line">For <span class="built_in">help</span> on commands, <span class="built_in">type</span> <span class="string">'help'</span>.</span><br><span class="line"></span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt; <span class="built_in">cd</span> backstores/block</span><br><span class="line">/backstores/block&gt; create disk1 /dev/sdb</span><br><span class="line">Created block storage object disk1 using /dev/sdb.</span><br><span class="line">/backstores/block&gt; <span class="built_in">cd</span> /</span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ..................... [/dev/sdb (20.0GiB) write-thru deactivated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h4 id="创建ISCSI-target名称以及配置共享资源"><a href="#创建ISCSI-target名称以及配置共享资源" class="headerlink" title="创建ISCSI target名称以及配置共享资源"></a>创建ISCSI target名称以及配置共享资源</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/&gt; <span class="built_in">cd</span> iscsi</span><br><span class="line">/iscsi&gt; .</span><br><span class="line">/iscsi&gt; create</span><br><span class="line">Created target iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab.</span><br><span class="line">Created TPG 1.</span><br><span class="line">Global pref auto_add_default_portal=<span class="literal">true</span></span><br><span class="line">Created default portal listening on all IPs (0.0.0.0), port 3260.</span><br><span class="line">/iscsi&gt; <span class="built_in">cd</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab/</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; ls</span><br><span class="line">o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ....... [TPGs: 1]</span><br><span class="line">  o- tpg1 ............................................... [no-gen-acls, no-auth]</span><br><span class="line">    o- acls .......................................................... [ACLs: 0]</span><br><span class="line">    o- luns .......................................................... [LUNs: 0]</span><br><span class="line">    o- portals .................................................... [Portals: 1]</span><br><span class="line">      o- 0.0.0.0:3260 ..................................................... [OK]</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; <span class="built_in">cd</span> tpg1/luns</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; create /backstores/block/disk1</span><br><span class="line">Created LUN 0.</span><br></pre></td></tr></table></figure><h4 id="设置访问控制列表（ACL）"><a href="#设置访问控制列表（ACL）" class="headerlink" title="设置访问控制列表（ACL）"></a>设置访问控制列表（ACL）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; ls</span><br><span class="line">o- tpg1 ................................................. [no-gen-acls, no-auth]</span><br><span class="line">  o- acls ............................................................ [ACLs: 0]</span><br><span class="line">  o- luns ............................................................ [LUNs: 1]</span><br><span class="line">  | o- lun0 ........................ [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  o- portals ...................................................... [Portals: 1]</span><br><span class="line">    o- 0.0.0.0:3260 ....................................................... [OK]</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> acls</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; create iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created Node ACL <span class="keyword">for</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created mapped LUN 0.</span><br></pre></td></tr></table></figure><h4 id="设置ISCSI服务端的监听IP地址和端口号"><a href="#设置ISCSI服务端的监听IP地址和端口号" class="headerlink" title="设置ISCSI服务端的监听IP地址和端口号"></a>设置ISCSI服务端的监听IP地址和端口号</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> portals/</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; ls</span><br><span class="line">o- portals ........................................................ [Portals: 1]</span><br><span class="line">  o- 0.0.0.0:3260 ......................................................... [OK]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">Using default IP port 3260</span><br><span class="line">Created network portal 192.168.176.222:3260.</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt;</span><br></pre></td></tr></table></figure><blockquote><p>此处如果报错 请执行下面一步骤 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">&gt; Using default IP port 3260</span><br><span class="line">&gt; Could not create NetworkPortal <span class="keyword">in</span> configFS</span><br><span class="line">&gt; </span><br><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; delete 0.0.0.0 3260</span><br><span class="line">&gt; Deleted network portal 0.0.0.0:3260</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h4 id="检查配置信息"><a href="#检查配置信息" class="headerlink" title="检查配置信息"></a>检查配置信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">iscsi/iqn.20.../tpg1/portals&gt; ls /</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ....................... [/dev/sdb (20.0GiB) write-thru activated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 1]</span><br><span class="line">  | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ... [TPGs: 1]</span><br><span class="line">  |   o- tpg1 ........................................... [no-gen-acls, no-auth]</span><br><span class="line">  |     o- acls ...................................................... [ACLs: 1]</span><br><span class="line">  |     | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client  [Mapped LUNs: 1]</span><br><span class="line">  |     |   o- mapped_lun0 ............................. [lun0 block/disk1 (rw)]</span><br><span class="line">  |     o- luns ...................................................... [LUNs: 1]</span><br><span class="line">  |     | o- lun0 .................. [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  |     o- portals ................................................ [Portals: 1]</span><br><span class="line">  |       o- 192.168.176.222:3260 ......................................... [OK]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; <span class="built_in">exit</span></span><br><span class="line">Global pref auto_save_on_exit=<span class="literal">true</span></span><br><span class="line">Last 10 configs saved <span class="keyword">in</span> /etc/target/backup.</span><br><span class="line">Configuration saved to /etc/target/saveconfig.json</span><br></pre></td></tr></table></figure><h4 id="配置防火墙以及重启服务"><a href="#配置防火墙以及重启服务" class="headerlink" title="配置防火墙以及重启服务"></a>配置防火墙以及重启服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># getenforce</span></span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure><h2 id="配置ISCSI客户端"><a href="#配置ISCSI客户端" class="headerlink" title="配置ISCSI客户端"></a>配置ISCSI客户端</h2><blockquote><p>客户端地址：192.168.176.111</p></blockquote><h4 id="安装ISCSI客户端服务程序initiator"><a href="#安装ISCSI客户端服务程序initiator" class="headerlink" title="安装ISCSI客户端服务程序initiator"></a>安装ISCSI客户端服务程序initiator</h4><blockquote><p>在rhel 7 系统中，ISCSI-initator-utils已经被默认安装了</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># yum install iscsi-initiator-utils</span></span><br></pre></td></tr></table></figure><h4 id="编辑initiatorname配置文件"><a href="#编辑initiatorname配置文件" class="headerlink" title="编辑initiatorname配置文件"></a>编辑initiatorname配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># vim /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cat /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">InitiatorName=iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line"></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl restart iscsid</span></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl enable iscsid</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/iscsid.service to /usr/lib/systemd/system/iscsid.service.</span><br></pre></td></tr></table></figure><h4 id="登录iSCSI服务端"><a href="#登录iSCSI服务端" class="headerlink" title="登录iSCSI服务端"></a>登录iSCSI服务端</h4><blockquote><p> iscsiadm是用于管理、查询、插入、更新或删除iSCSI数据库配置文件的命令行工具，用户需要先使用这个工具扫描发现远程iSCSI服务端，然后查看找到的服务端上有哪些可用的共享存储资源。</p><p>-m discovery参数的目的是扫描并发现可用的存储资源，</p><p>-t st参数为执行扫描操作的类型，</p><p>-p 192.168.176.222 参数为iSCSI服务端的IP地址</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m discovery -t st -p 192.168.176.222</span></span><br><span class="line">192.168.176.222:3260,1 iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab</span><br></pre></td></tr></table></figure><blockquote><p>-m node参数为将客户端所在主机作为一台节点服务器，</p><p>-T  iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80参数为要使用的存储资源 (直接复制前面命令中扫描发现的结果，以免错误)</p><p>-p 192.168.176.222参数依然为服务端iSCSI服务端的IP地址。</p><p>–login或-l参数进行登录验证。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -p 192.168.176.222 --login</span></span><br><span class="line">Logging <span class="keyword">in</span> to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] (multiple)</span><br><span class="line">Login to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure><blockquote><p>此时我们lsbak看一下</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">├─sda1            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2            8:2    0   19G  0 part</span><br><span class="line">  ├─centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure><blockquote><p>发现此处多了一个/dev/sdb的设备文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br></pre></td></tr></table></figure><h4 id="挂载设备"><a href="#挂载设备" class="headerlink" title="挂载设备"></a>挂载设备</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br><span class="line">[root@client111 ~]<span class="comment"># mkfs.xfs /dev/sdb</span></span><br><span class="line">meta-data=/dev/sdb               isize=512    agcount=4, agsize=1310720 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=5242880, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line"><span class="built_in">log</span>      =internal <span class="built_in">log</span>           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client111 ~]<span class="comment"># mkdir /iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># mount /dev/sdb /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">/dev/sdb                xfs        20G   33M   20G    1% /iscsi</span><br></pre></td></tr></table></figure><h4 id="永久挂载"><a href="#永久挂载" class="headerlink" title="永久挂载"></a>永久挂载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># blkid | grep /dev/sdb</span></span><br><span class="line">/dev/sdb: UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">[root@client111 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@client111 ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> /iscsi xfs defaults,_netdev 0 0</span><br><span class="line">[root@client111 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure><h4 id="卸载ISCSI共享资源设备"><a href="#卸载ISCSI共享资源设备" class="headerlink" title="卸载ISCSI共享资源设备"></a>卸载ISCSI共享资源设备</h4><blockquote><p> 可以用iscsiadm命令的-u参数将其设备卸载</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># umount /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -u</span></span><br><span class="line">Logging out of session [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260]</span><br><span class="line">Logout of [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1．简述iSCSI存储技术在生产环境中的作用。</p><p>2．在Linux系统中，iSCSI服务端和iSCSI客户端所使用的服务程序分别叫什么？</p><p>3．在使用targetcli命令配置iSCSI服务端配置文件时，acls与portals参数目录中分别存放什么内容？</p><p>4．iSCSI协议占用了服务器哪个协议和端口号？</p><p>5．用户在填写fstab设备挂载配置文件时，一般会把远程存储资源的UUID（而非设备的名称）填写到配置文件中。这是为什么？</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>shell脚本笔记(脚本)</title>
    <link href="https://github.com/chineselijie/2020/03/12/26.linux--shell%E8%84%9A%E6%9C%AC%E7%AC%94%E8%AE%B0(%E8%84%9A%E6%9C%AC)/"/>
    <id>https://github.com/chineselijie/2020/03/12/26.linux--shell%E8%84%9A%E6%9C%AC%E7%AC%94%E8%AE%B0(%E8%84%9A%E6%9C%AC)/</id>
    <published>2020-03-12T11:38:40.259Z</published>
    <updated>2019-08-22T12:21:18.403Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------猜数字-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入你所猜到的数字："</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"哇瑟！好厉害！"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"你猜错了，哈哈哈"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------计算年龄-------------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">age=100</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入您今年的年龄："</span> user_age</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_age</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"您输入的有误，请重新执行并且输入1-100之前任意数值！"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_age</span> -lt <span class="variable">$age</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您还可以活"</span> $[ <span class="variable">$age</span> - <span class="variable">$user_age</span> ] <span class="string">"岁。"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您输入的有误，请重新执行并且输入1-100之前任意数值！"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------输入三个数值，自动取出最大值与最小值----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 3);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"请输入一个数字："</span> num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请输入一个整数"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -gt <span class="variable">$max</span> ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -lt <span class="variable">$min</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"最大的数字为: "</span><span class="variable">$max</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"最小的数字为: "</span><span class="variable">$min</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#------成绩：90上优秀、80上良好、70上中等、60上及格、60下差-----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入您的成绩："</span> user_chengji</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_chengji</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请输入一个整数"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -gt 100 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请输入0-100以内的数值"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -ge 90 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为优秀"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 80 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为良好"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 70 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为中等"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为及格"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -le 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为差"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------case语法---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">    <span class="string">"start"</span>|<span class="string">"Start"</span>|<span class="string">"START"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"stop"</span>|<span class="string">"STOP"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">    ;;</span><br><span class="line">    <span class="string">"restart"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"status"</span>)</span><br><span class="line">        count=$(ps -ef | egrep -v <span class="string">"grep | <span class="variable">$0</span>"</span> | grep -c httpd &amp;&gt; /dev/null)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$count</span> -ne 0 ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is running."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is stopped."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage：service httpd</span></span><br><span class="line"><span class="string">        start|stop|restart|status"</span></span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp httpd /etc/init.d/</span><br><span class="line">chmod +x /etc/init.d/httpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入你的分数："</span> user_num</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_num</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请正确地输入您的分数！"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$user_num</span> <span class="keyword">in</span></span><br><span class="line">    -gt100)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"请正确输入您的分数！"</span></span><br><span class="line">    ；；</span><br><span class="line">    )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您的成绩为优秀！"</span></span><br><span class="line">    ；；</span><br><span class="line">    *）</span><br><span class="line">    ；；</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#取出/etc/passwd的用户以及UID</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"一共有<span class="variable">$(cat $Fa | wc -l)</span>个用户."</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"请输入两个或以上数字。"</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $* ; <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"无效，请输入数字，特殊字符以及字母等均无效"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        man=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$min</span> -gt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..100&#125;;<span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line">[ <span class="variable">$#</span> -eq 2 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"请输入两个或以上的数字！"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    [ $? -ne 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"请输入数字，字母、特殊字符等均无效！"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line">    [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ] &amp;&amp; man=<span class="variable">$i</span></span><br><span class="line">    [ <span class="variable">$man</span> -gt <span class="variable">$i</span> ] &amp;&amp; min=<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> -------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -ne 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 2 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> -----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 5 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">break</span> [num]</span><br><span class="line">中止循环</span><br><span class="line">    <span class="built_in">break</span>语句后面的内容不会被执行</span><br><span class="line"></span><br><span class="line"><span class="built_in">continue</span> [num]</span><br><span class="line">提前进入下一轮循环</span><br><span class="line">    <span class="built_in">continue</span>语句后面不会被执行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#变量</span></span><br><span class="line">name=tom</span><br><span class="line">passwd=123321</span><br><span class="line"></span><br><span class="line"><span class="comment">#输入用户名以及密码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=1;i&gt;=1;i++ ));<span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入用户名："</span> user_name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入用户名："</span> user_passwd</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 3 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您已三次输入有误，系统默认锁定账户，寻找管理员解锁！”</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_name</span> != <span class="variable">$name</span> ] &amp;&amp; [ <span class="variable">$passwd</span> != <span class="variable">$user_passwd</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>您的用户名或者密码有误，请重试！<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>hello <span class="variable">$user_name</span>.欢迎来到这里！<span class="string">"</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># while循环</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    ehco -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo ----</span></span><br><span class="line"><span class="string">    ((i+=2))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    if [ $[ <span class="variable">$i</span> % 2 ] -eq 0 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -lt 5 -o <span class="variable">$i</span> -gt 7 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -ge 5 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$line</span></span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; /etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#! /bin/bash</span></span><br><span class="line"><span class="string">Fa=/etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    user_name=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $1 &#125;')</span></span></span><br><span class="line"><span class="string">    user_UID=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $3 &#125;')</span></span></span><br><span class="line"><span class="string">    echo “hello! <span class="variable">$user_name</span> 您的UID是 <span class="variable">$user_UID</span>”</span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; <span class="variable">$Fa</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> %100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    read -p "</span>请输入一个数字<span class="string">" user_num</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span>　| egrep '^[0-9]+$' &amp;&gt; /dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的不是数字！请重试！<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的数字大了！<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的数字小了！<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        ehco "</span>您输入正确！<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>您一共回答了<span class="variable">$i</span>次.<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">flag=ture</span></span><br><span class="line"><span class="string">i=3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -le 50 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        flag=false</span></span><br><span class="line"><span class="string">    let i++</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#用for循环写个九九乘法表</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#！/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for i in <span class="variable">$(seq 9)</span>;do</span></span><br><span class="line"><span class="string">    for j in <span class="variable">$(seq $i)</span>;do</span></span><br><span class="line"><span class="string">        echo -en "</span><span class="variable">$&#123;j&#125;</span>x<span class="variable">$&#123;i&#125;</span>=$[<span class="variable">$i</span> * <span class="variable">$j</span>]\t<span class="string">"</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">    echo </span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">until循环猜数字随机</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bg=false</span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> % 100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">until <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    read -p "</span>请输入所猜的数字：<span class="string">" user_num</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span> | egrep '^[0-9]+$' &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的不是数字！<span class="string">"</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的数字大了！<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>您输入的数字小了！<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>猜对了！<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>您一共回答了<span class="variable">$&#123;i&#125;</span>次！<span class="string">"</span></span><br><span class="line"><span class="string">        flag=true</span></span><br><span class="line"><span class="string">        continue</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>shell脚本进阶</title>
    <link href="https://github.com/chineselijie/2020/03/12/25.linux--shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/"/>
    <id>https://github.com/chineselijie/2020/03/12/25.linux--shell%E8%84%9A%E6%9C%AC%E8%BF%9B%E9%98%B6/</id>
    <published>2020-03-12T11:38:40.257Z</published>
    <updated>2019-08-22T12:22:35.430Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="bash条件判断"><a href="#bash条件判断" class="headerlink" title="bash条件判断"></a>bash条件判断</h2><h3 id="条件测试类型"><a href="#条件测试类型" class="headerlink" title="条件测试类型"></a>条件测试类型</h3><p>条件测试分为<strong>整数测试</strong>、<strong>字符测试</strong>、<strong>文件测试</strong></p><h3 id="条件测试的表达式"><a href="#条件测试的表达式" class="headerlink" title="条件测试的表达式"></a>条件测试的表达式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ echoes ]</span><br><span class="line">[[ echoes ]]</span><br><span class="line"><span class="built_in">test</span> echoes</span><br></pre></td></tr></table></figure><h3 id="整数测试（双目）"><a href="#整数测试（双目）" class="headerlink" title="整数测试（双目）"></a>整数测试（双目）</h3><blockquote><p> -eq    测试两个整数是否相等</p><p> -ne    测试两个整数是否不等</p><p>-gt    测试一个数是否大于另一个数</p><p> -lt    测试一个数是否小于另一个数</p><p>-ge    大于或小于</p><p> -le    小于或等于</p></blockquote><h3 id="字符测试"><a href="#字符测试" class="headerlink" title="字符测试"></a>字符测试</h3><blockquote><p> ==     等值比较，检查两边的内容是否一致，切记 == 两边要有空格</p><p>!=     检查两边内容是否不一致，不一致为真，一致为假</p><p>=~    左侧字符穿能否被右侧的所匹配到，此表达式应用于双中括号[[]]中</p><p>-z “string”    测试指定字符串是否为空，空则为真，不空则为假<br>-n “string”    测试指定字符串是否不空，不空则为真，空则为假</p></blockquote><h3 id="文件测试"><a href="#文件测试" class="headerlink" title="文件测试"></a>文件测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在性测试</span></span><br><span class="line">-e测试文件是否存在</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在性及类别测试</span></span><br><span class="line">-b测试文件是否为块设备文件</span><br><span class="line">-c测试文件是否为字符设备文件</span><br><span class="line">-f测试文件是否为普通文件</span><br><span class="line">-d测试指定路径是否为目录</span><br><span class="line">-h测试文件是否为目录</span><br><span class="line">-l测试文件是否为符号链接文件</span><br><span class="line">-p测试文件是否为命名管道文件</span><br><span class="line">-s测试文件是否为套接字文件</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件权限测试</span></span><br><span class="line">-r测试当前用户对指定文件是否有读权限</span><br><span class="line">-w测试当前用户对指定文件是否有写入权限</span><br><span class="line">-x测试当前用户对指定文件是否有执行权限</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件特殊权限测试</span></span><br><span class="line">-g测试文件是否有sgid权限</span><br><span class="line">-u测试文件是否有suid权限</span><br><span class="line">-k测试文件是否有sticky权限</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件大小测试</span></span><br><span class="line">-s测试文件是否非空</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件是否打开测试</span></span><br><span class="line">-t fdfd表示的文件描述是否已经打开并且与某终端相关</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 双目测试</span></span><br><span class="line">file1 -ef file2测试文件1与文件2是否为同一文件</span><br><span class="line">file1 -ef file2测试文件1是否比文件2新</span><br><span class="line">file1 -ef file2测试文件1是否比文件2旧</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无分类</span></span><br><span class="line">-N测试文件自从上一次被录取之后是否被修改过</span><br><span class="line">-O测试文件是否存在并且被当前用户拥有</span><br><span class="line">-G测试文件是否存在并且默认组是否为当前用户组</span><br></pre></td></tr></table></figure><h3 id="组合测试条件"><a href="#组合测试条件" class="headerlink" title="组合测试条件"></a>组合测试条件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-a与关系</span><br><span class="line">-o或关系</span><br><span class="line">！非关系</span><br></pre></td></tr></table></figure><p>例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 总计个数 大于 1 与 总计个数 小于 3</span></span><br><span class="line">[ <span class="variable">$#</span> -gt 1 -a <span class="variable">$#</span> -le 3 ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 总计个数 大于 1 后再次统计 总计个数 小于 3</span></span><br><span class="line">[<span class="variable">$#</span> -gt 1 ] &amp;&amp; [<span class="variable">$#</span> -le 3]</span><br></pre></td></tr></table></figure><h3 id="条件判断，控制结构"><a href="#条件判断，控制结构" class="headerlink" title="条件判断，控制结构"></a>条件判断，控制结构</h3><h4 id="单分支if语句"><a href="#单分支if语句" class="headerlink" title="单分支if语句"></a>单分支if语句</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件；<span class="keyword">then</span></span><br><span class="line">陈述1</span><br><span class="line">陈述2</span><br><span class="line">........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h4 id="双分支if语句"><a href="#双分支if语句" class="headerlink" title="双分支if语句"></a>双分支if语句</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件；<span class="keyword">then</span></span><br><span class="line">陈述1</span><br><span class="line">陈述2</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">陈述1</span><br><span class="line">陈述2</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h5 id="if语句小游戏"><a href="#if语句小游戏" class="headerlink" title="if语句小游戏"></a>if语句小游戏</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------猜数字-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入你所猜到的数字："</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"哇瑟！好厉害！"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"你猜错了，哈哈哈"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h4 id="多分支if语句"><a href="#多分支if语句" class="headerlink" title="多分支if语句"></a>多分支if语句</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 判断条件1；<span class="keyword">then</span></span><br><span class="line">陈述1</span><br><span class="line">陈述2</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">elif</span> 判断条件2；<span class="keyword">then</span></span><br><span class="line">陈述3</span><br><span class="line">陈述4</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">陈述5</span><br><span class="line">陈述6</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id="分支选择"><a href="#分支选择" class="headerlink" title="分支选择"></a>分支选择</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $变量名 <span class="keyword">in</span>            </span><br><span class="line">value1)                </span><br><span class="line">    陈述               </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">value2)                </span><br><span class="line">    陈述                </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">*)                </span><br><span class="line">    陈述                </span><br><span class="line">    ...                </span><br><span class="line">    ;;        </span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">另：<span class="keyword">case</span>支持glob风格的通配符：</span><br><span class="line">    *       任意长度任意字符</span><br><span class="line">    ?       任意单个字符</span><br><span class="line">    []      指字范围内的任意单个字符</span><br><span class="line">    abc|bcd abc或bcd</span><br></pre></td></tr></table></figure><h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><p>循环语句通常需要有一个进入条件和一个退出条件</p><ul><li>for循环</li><li>while循环</li><li>until循环</li></ul><h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>for循环当列表不为空时进入循环，否则退出循环</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 列表; <span class="keyword">do</span></span><br><span class="line">    循环体</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((expr1;expr2;expr3))</span><br><span class="line">&#123;</span><br><span class="line">    循环体</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( expr1 ; expr2 ; expr3 ));<span class="keyword">do</span></span><br><span class="line">    循环体</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">expr1   //用于指定初始条件，给控制变量一个初始值</span><br><span class="line">expr2   //判定什么时候退出循环</span><br><span class="line">expr3   //修正expr1指定的变量的值</span><br><span class="line"></span><br><span class="line">//如何生成列表：</span><br><span class="line">    &#123;1..100&#125;</span><br><span class="line">    seq [起始数] [步进长度] 结束数</span><br></pre></td></tr></table></figure><h4 id="for循环取出-etc-passwd用户"><a href="#for循环取出-etc-passwd用户" class="headerlink" title="for循环取出/etc/passwd用户"></a>for循环取出/etc/passwd用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#------取出/etc/passwd的用户以及UID---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"一共有<span class="variable">$(cat $Fa | wc -l)</span>个用户."</span></span><br></pre></td></tr></table></figure><h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>while循环适用于循环次数未知的场景，注意要有退出条件。<br>条件满足时进入循环，条件不满足了退出循环。</p><h4 id="while循环正常用法"><a href="#while循环正常用法" class="headerlink" title="while循环正常用法"></a>while循环正常用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件; <span class="keyword">do</span></span><br><span class="line">    陈述</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h4 id="while循环特殊用法"><a href="#while循环特殊用法" class="headerlink" title="while循环特殊用法"></a>while循环特殊用法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//while循环特殊用法一：死循环</span><br><span class="line">while :;do</span><br><span class="line">    陈述</span><br><span class="line">    ...</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">//这里的冒号可以改成任何非空值</span><br><span class="line"></span><br><span class="line">while循环特殊用法二：逐行读取某文件，将值存入line变量中</span><br><span class="line">while read line;do</span><br><span class="line">    陈述</span><br><span class="line">    ...</span><br><span class="line">done &lt; /etc/passwd</span><br></pre></td></tr></table></figure><p>#####while循环脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-----while特殊用法二取用户-------</span></span><br><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line;<span class="keyword">do</span></span><br><span class="line">    user_name=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $1 &#125;'</span>)</span><br><span class="line">    user_UID=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $3 &#125;'</span>)</span><br><span class="line">    <span class="built_in">echo</span> “hello! <span class="variable">$user_name</span> 您的UID是 <span class="variable">$user_UID</span>”</span><br><span class="line">    <span class="built_in">echo</span> -------------------------</span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$Fa</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-------用while循环猜数字-------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line">num=$[<span class="variable">$RANDOM</span> %100]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line">    ((i++))</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"请输入一个数字"</span> user_num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$user_num</span>　| egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您输入的不是数字！请重试！"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您输入的数字大了！"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您输入的数字小了！"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ehco <span class="string">"您输入正确！"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"您一共回答了<span class="variable">$i</span>次."</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="until循环"><a href="#until循环" class="headerlink" title="until循环"></a>until循环</h3><p>条件不满足时进入循环，条件满足了退出循环。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until 条件; <span class="keyword">do</span></span><br><span class="line">    陈述</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="循环语句特殊情况"><a href="#循环语句特殊情况" class="headerlink" title="循环语句特殊情况"></a>循环语句特殊情况</h3><blockquote><p>break [num]：提前退出循环。当循环语句中出现break时，将提前退出循环，不再执行循环后面的语句</p><p>continue [num]：提前结束本轮循环而进入下一轮循环。当循环语句执行到continue时，continue后面的语句将不再执行，提前进入下一轮循环</p></blockquote><h2 id="定义脚本退出状态码"><a href="#定义脚本退出状态码" class="headerlink" title="定义脚本退出状态码"></a>定义脚本退出状态码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">exit</span>命令用于定义执行状态结果</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> <span class="comment">#      //此处的#号是一个数字，其范围可以是0-255</span></span><br><span class="line"></span><br><span class="line">如果脚本没有明确定义退出状态码，那么，最后执行的一条命令的退出码即为脚本的退出状态码</span><br><span class="line"></span><br><span class="line">注意：脚本中一旦遇到<span class="built_in">exit</span>命令，脚本会立即终止</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>shell脚本基础</title>
    <link href="https://github.com/chineselijie/2020/03/12/24.linux--shell%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80/"/>
    <id>https://github.com/chineselijie/2020/03/12/24.linux--shell%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80/</id>
    <published>2020-03-12T11:38:40.256Z</published>
    <updated>2019-08-22T12:20:22.235Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h1 id="shell脚本基础"><a href="#shell脚本基础" class="headerlink" title="shell脚本基础"></a>shell脚本基础</h1><h2 id="变量详解"><a href="#变量详解" class="headerlink" title="变量详解"></a>变量详解</h2><h3 id="什么是变量"><a href="#什么是变量" class="headerlink" title="什么是变量"></a>什么是变量</h3><p>变量即是可以变化的量</p><h3 id="变量的作用"><a href="#变量的作用" class="headerlink" title="变量的作用"></a>变量的作用</h3><ul><li>保存表达式运算的结果至内存，方便复用或更改</li><li>若无变量而无需复用表达式运算的结果只能重新运算，耗时较长</li><li>可以把变量理解为一个存储信息的容器</li></ul><h3 id="变量取名以及注意事项"><a href="#变量取名以及注意事项" class="headerlink" title="变量取名以及注意事项"></a>变量取名以及注意事项</h3><ul><li><p>变量名应该做到见名知义</p></li><li><p>变量名区分大小写</p></li><li><p>变量名中有多个单词时有两种方式表示</p><ul><li>单词间使用下划线分隔（官方推荐）</li><li>首单词小写，后面单词的首字母大写</li></ul></li><li><p>变量名只能是由下划线、数字、字母组成，不能是空格或者特殊字符（#？&lt;.,$!&amp;*^~）</p></li><li><p>不能以中文做变量名</p></li><li><p>不能是保留字</p><ul><li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">break</span>  <span class="built_in">continue</span>  <span class="keyword">elif</span>  <span class="keyword">else</span>  <span class="keyword">for</span>  global  <span class="keyword">if</span>  <span class="keyword">in</span>  is   not  or   <span class="keyword">while</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h3><ul><li>字符型</li><li>数值型<ul><li>整数</li><li>浮点数</li></ul></li><li>布尔型</li></ul><h3 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h3><ul><li>设置变量</li><li>引用变量</li><li>撤销变量</li></ul><blockquote><p>简述三种引号的用法</p><p>`反引号 用于命令替换 反引号里面的命令取出来是它们的值</p><p> ‘ 单引号 取本身，不完成命令替换</p><p>“ 双引号 实现命令替换，支持变量</p></blockquote><blockquote><p>切记单引号取出来是本身，</p><p>反引号和双引号取出来是他们的值</p></blockquote><h3 id="bash变量类型"><a href="#bash变量类型" class="headerlink" title="bash变量类型"></a>bash变量类型</h3><ul><li>环境变量</li><li>本地变量（局部变量）</li><li>位置变量</li><li>特殊变量（为bash内置，主要用来保存某些特殊数据的变量，也称之为系统变量）</li></ul><blockquote><p>下面介绍两种取除变量以及不取出变量的用法</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用法一：取出变量的值</span></span><br><span class="line">[root@140 ~]<span class="comment"># a=5</span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; DOF</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; DOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line">5</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用法二：不取除变量的值 </span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; 'EOF'</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; EOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line"><span class="variable">$a</span></span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></table></figure><h4 id="本地变量"><a href="#本地变量" class="headerlink" title="本地变量"></a>本地变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地变量，作为当前shell的进程，对当前shell以外的其他shell进程，包括当前shell的父shell，子shell进程均无效</span></span><br><span class="line">VAR_NAME=VALUE(值)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 局部变量，作为当前代码段，多用于函数</span></span><br><span class="line"><span class="built_in">local</span>(局部) VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作用域为当前shell进程及其子进程</span></span><br><span class="line"><span class="built_in">export</span> VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure><h4 id="位置变量"><a href="#位置变量" class="headerlink" title="位置变量"></a>位置变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$1</span>，<span class="variable">$2</span>，<span class="variable">$3</span>，....       //用来引用脚本的参数</span><br><span class="line">    <span class="built_in">shift</span> [num]         //位置变量使用完以后退出，后面的参数向前推进</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat haah.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$3</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line">[root@140 opt]<span class="comment"># bash haah.sh 1 2 3</span></span><br><span class="line">1</span><br><span class="line">------------</span><br><span class="line">2</span><br><span class="line">------------</span><br><span class="line">3</span><br><span class="line">------------</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]# cat huhu.sh </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in $*;do</span><br><span class="line">        echo $1</span><br><span class="line">        echo -----------</span><br><span class="line">        shift 2 </span><br><span class="line">done</span><br><span class="line">[root@140 opt]# bash huhu.sh 1 2 3 4 5 6</span><br><span class="line">1</span><br><span class="line">-----------</span><br><span class="line">3</span><br><span class="line">-----------</span><br><span class="line">5</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br></pre></td></tr></table></figure><h4 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$#</span>      //是传给脚本的参数个数</span><br><span class="line"><span class="variable">$0</span>      //是脚本本身的名字</span><br><span class="line">$!      //是shell最后运行的后台Process的PID</span><br><span class="line"><span class="variable">$@</span>      //是传给脚本的所有参数的列表</span><br><span class="line">$*      //是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过9个</span><br><span class="line">$$      //是脚本运行的当前进程ID号</span><br><span class="line">$?      //是显示上条命令的退出状态，0表示没有错误，其他表示有错误</span><br></pre></td></tr></table></figure><h4 id="bash中自带环境变量"><a href="#bash中自带环境变量" class="headerlink" title="bash中自带环境变量"></a>bash中自带环境变量</h4><ul><li>PATH</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure><ul><li>SHELL</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure><ul><li>UID</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $UID</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure><ul><li>HISTSIZE</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure><ul><li>HOME</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HOME</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure><ul><li>PWD</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PWD</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure><ul><li>HISTFILE</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTFILE</span></span><br><span class="line">/root/.bash_history</span><br></pre></td></tr></table></figure><ul><li>PS1</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure><h4 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不能修改值，不能销毁，只能等shell进程终止时随之消亡</span></span><br><span class="line">readonly(只读) VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure><h2 id="脚本基础"><a href="#脚本基础" class="headerlink" title="脚本基础"></a>脚本基础</h2><h3 id="什么是脚本"><a href="#什么是脚本" class="headerlink" title="什么是脚本"></a>什么是脚本</h3><p>​    脚本(script)是使用一种特定的描述性语言，依据一定的格式编写的可执行文件，又称作宏或批处理文件。脚本通常可以由应用程序临时调用并执行。</p><p>​    脚本简单地说就是一条条的文字命令，这些文字命令是我们可以看到的(如可以用记事本打开查看、编辑)，脚本程序在执行时，是由系统的一个解释器，将其一条条的翻译成机器可识别的指令，并按程序顺序执行。因为脚本在执行时多了一道翻译的过程，所以它比二进制程序执行效率要稍低一些。</p><h3 id="程序反回值"><a href="#程序反回值" class="headerlink" title="程序反回值"></a>程序反回值</h3><p>程序执行以后有两类返回值：</p><ul><li>程序执行的结果</li><li>程序状态返回代码（0-255）<ul><li>0：正确执行</li><li>1-255：错误执行，1、2、127系统预留，有特殊意义</li></ul></li></ul><h3 id="脚本测试"><a href="#脚本测试" class="headerlink" title="脚本测试"></a>脚本测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查脚本是否有语法错误</span></span><br><span class="line">bash -n scriptname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单步执行，检查脚本错在哪里（最常用）</span></span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure><blockquote><p>例如此处写个错误的脚本</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@140 opt]<span class="comment"># bash -x huhu.sh </span></span><br><span class="line">huhu.sh:行3: 未预期的符号 `<span class="keyword">do</span><span class="string">' 附近有语法错误</span></span><br><span class="line"><span class="string">huhu.sh:行3: `frr i in $*;do'</span></span><br></pre></td></tr></table></figure><h3 id="写脚本注意事项"><a href="#写脚本注意事项" class="headerlink" title="写脚本注意事项"></a>写脚本注意事项</h3><ul><li>禁止将为成功执行的代码直接写入脚本</li><li>脚本中的命令一定要用绝对路径</li></ul><h3 id="shell算术运算"><a href="#shell算术运算" class="headerlink" title="shell算术运算"></a>shell算术运算</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 变量</span></span><br><span class="line">A=30</span><br><span class="line">B=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># A加上B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A减去B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A乘以B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A除以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc</span><br></pre></td></tr></table></figure><h3 id="命令间的逻辑关系"><a href="#命令间的逻辑关系" class="headerlink" title="命令间的逻辑关系"></a>命令间的逻辑关系</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 逻辑与：&amp;&amp;</span></span><br><span class="line">含义：当前一个命令执行成功后，再次执行后面的命令</span><br><span class="line"><span class="comment"># 逻辑非：||</span></span><br><span class="line">含义：当前一个命令执行失败后，再次执行后面的命令</span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h4 id="1-写一个脚本，要求如下："><a href="#1-写一个脚本，要求如下：" class="headerlink" title="1.写一个脚本，要求如下："></a>1.写一个脚本，要求如下：</h4><ul><li>设定变量Fa的值为<code>/etc/passwd</code></li><li>设定变量line的为<code>$(cat $Fa | wc -l)</code></li><li>依次向<code>/etc/passwd</code>中的每个用户问好，并且说出对方的ID是什么。结果输出如下：<ul><li>Hello,root，your UID is 0.</li></ul></li><li>统计当前系统一个有多少个用户并输出</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line">line=$(cat <span class="variable">$Fa</span> | wc -l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取出用户名以及UID</span></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$line</span>;i++));<span class="keyword">do</span></span><br><span class="line">        username=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">        user_uid=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给每个用户问好</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"hello <span class="variable">$username</span> , your uid is <span class="variable">$user_uid</span> ."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计用户</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Cuerrent system has <span class="variable">$(cat $Fa | wc -l)</span> user."</span></span><br></pre></td></tr></table></figure><h4 id="2-写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商"><a href="#2-写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商" class="headerlink" title="2.写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商"></a>2.写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat suanfa.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 变量</span></span><br><span class="line">A=<span class="variable">$1</span></span><br><span class="line">B=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A加上B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>+<span class="variable">$B</span>=$[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A减去B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>-<span class="variable">$B</span>=$[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A乘以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>*<span class="variable">$B</span>=$[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">chuyi=$(<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># A除以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>/<span class="variable">$B</span>=<span class="variable">$chuyi</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash suanfa.sh 50 20</span></span><br><span class="line">50+20=70</span><br><span class="line">50-20=30</span><br><span class="line">50*20=1000</span><br><span class="line">50/20=2.50</span><br></pre></td></tr></table></figure><h4 id="3-写一个脚本，要求如下："><a href="#3-写一个脚本，要求如下：" class="headerlink" title="3.写一个脚本，要求如下："></a>3.写一个脚本，要求如下：</h4><ul><li>创建目录/tmp/scripts</li><li>切换至此目录中</li><li>复制/etc/pam.d目录至当前目录，并重命名为test</li><li>将当前目录的test及其里面的文件和子目录的属主改为redhat</li><li>将test及其子目录中的文件的其它用户的权限改为没有任何权限</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat mulu.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置变量</span></span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">cp=/usr/bin/cp</span><br><span class="line">chown=/usr/bin/chown</span><br><span class="line">chmod=/usr/bin/chmod</span><br><span class="line">useradd=/usr/bin/useradd</span><br><span class="line"><span class="comment"># 一条命令解决</span></span><br><span class="line">mkdir /tmp/scripts &amp;&amp; <span class="built_in">cd</span> /tmp/scripts &amp;&amp; cp -rf /etc/pam.d ./<span class="built_in">test</span> &amp;&amp; chown -Rf redhat: <span class="built_in">test</span> || useradd redhat &amp;&amp; chmod -Rf o-rwx <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash -x mulu.sh </span></span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ cp=/usr/bin/cp</span><br><span class="line">+ chown=/usr/bin/chown</span><br><span class="line">+ chmod=/usr/bin/chmod</span><br><span class="line">+ useradd=/usr/bin/useradd</span><br><span class="line">+ mkdir /tmp/scripts</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/scripts</span><br><span class="line">+ cp -rf /etc/pam.d ./<span class="built_in">test</span></span><br><span class="line">+ chown -Rf redhat: <span class="built_in">test</span></span><br><span class="line">+ chmod -Rf o-rwx <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>4.写一个脚本，要求如下：</p><ul><li>显示当前系统日期和时间，而后创建目录/tmp/lstest</li><li>切换工作目录至/tmp/lstest</li><li>创建目录a1d，b56e，6test</li><li>创建空文件xy，x2y，732</li><li>列出当前目录下以a，x或者6开头的文件或目录</li><li>列出当前目录下以字母开头，后跟一个任意数字，而后跟任意长度字符的文件或目录</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat shijian.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">date=/usr/bin/date</span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">touch=/usr/bin/touch</span><br><span class="line">ls=/usr/bin/ls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date &amp;&amp; mkdir /tmp/lstest &amp;&amp; <span class="built_in">cd</span> /tmp/lstest &amp;&amp; mkdir a1d b56e 6test &amp;&amp; touch xy x2y 732 &amp;&amp; ls a* x* 6* &amp;&amp; ls [a-z][0-9]*</span><br><span class="line">[root@140 opt]<span class="comment"># bash -x shijian.sh </span></span><br><span class="line">+ date=/usr/bin/date</span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ touch=/usr/bin/touch</span><br><span class="line">+ ls=/usr/bin/ls</span><br><span class="line">+ date</span><br><span class="line">2019年 05月 21日 星期二 22:11:10 CST</span><br><span class="line">+ mkdir /tmp/lstest</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/lstest</span><br><span class="line">+ mkdir a1d b56e 6test</span><br><span class="line">+ touch xy x2y 732</span><br><span class="line">+ ls a1d x2y xy 6test</span><br><span class="line">x2y  xy</span><br><span class="line"></span><br><span class="line">6test:</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line">+ ls a1d b56e x2y</span><br><span class="line">x2y</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line"></span><br><span class="line">b56e:</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式</title>
    <link href="https://github.com/chineselijie/2020/03/12/23.linux--%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://github.com/chineselijie/2020/03/12/23.linux--%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</id>
    <published>2020-03-12T11:38:40.255Z</published>
    <updated>2019-08-22T12:20:05.890Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="正则表达式分类"><a href="#正则表达式分类" class="headerlink" title="正则表达式分类"></a>正则表达式分类</h2><p>正则表达式：REGEXP      REGular EXPression</p><p>可分为两种：</p><ul><li>Basic REGEXP (基本正则表达式)</li><li>Extended REGEXP (扩展正则表达式)</li></ul><h2 id="基本正则表达式"><a href="#基本正则表达式" class="headerlink" title="基本正则表达式"></a>基本正则表达式</h2><ul><li>元字符</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.任意单个字符</span><br><span class="line">[]匹配指定范围内的任意单个字符</span><br><span class="line">[^]匹配指定范围外的任意单个字符</span><br></pre></td></tr></table></figure><ul><li>匹配次数（贪婪模式）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*匹配其前面的任意单个字符任意次</span><br><span class="line">.*任意长度的任意字符</span><br><span class="line">\?匹配其前面的任意单个字符1次或0次</span><br><span class="line">\+匹配其前面的任意单个字符至少1次</span><br><span class="line">\&#123;m,n\&#125;匹配其前面的任意单个字符至少m次，至多n次</span><br></pre></td></tr></table></figure><ul><li>位置锚定</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">^锚定行首，此字符后面的任意单个字符必须出现在行首</span><br><span class="line">$锚定行尾，此字符前面的任意单个字符必须出现在行尾</span><br><span class="line">^$空白行</span><br><span class="line">\&lt;或\b锚定词首，其后面的任意单个字符必须作为单词首部出现</span><br><span class="line">\&gt;或\b锚定词尾，其前面的任意单个字符必须作为单词尾部出现</span><br></pre></td></tr></table></figure><ul><li>分组</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\(\) </span><br><span class="line">例如：\(ab\)*</span><br></pre></td></tr></table></figure><ul><li>后向引用</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\1引用第一个左括号以及与之对应的右括号所包括的所有内容</span><br><span class="line">\2引用第二个左括号以及与之对应的右括号所包括的所有内容</span><br></pre></td></tr></table></figure><h2 id="扩展正则表达式"><a href="#扩展正则表达式" class="headerlink" title="扩展正则表达式"></a>扩展正则表达式</h2><ul><li>字符匹配</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.       //匹配任意单个字符</span><br><span class="line">[]      //匹配指定范围内的任意单个字符</span><br><span class="line">[^]     //匹配指定范围外的任意单个字符</span><br></pre></td></tr></table></figure><ul><li>次数匹配</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*匹配其前面的任意单个字符任意次</span><br><span class="line">?匹配其前面的任意单个字符1次或0次</span><br><span class="line">+匹配其前面的任意单个字符至少1次</span><br><span class="line">&#123;m,n&#125;匹配其前面的任意单个字符至少m次，至多n次</span><br></pre></td></tr></table></figure><ul><li>位置锚定</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">^锚定行首，此字符后面的任意单个字符必须出现在行首</span><br><span class="line">$锚定行尾，此字符前面的任意单个字符必须出现在行尾</span><br><span class="line">^$空白行</span><br><span class="line">\&lt;或\b锚定词首，其后面的任意单个字符必须作为单词首部出现</span><br><span class="line">\&gt;或\b锚定词尾，其前面的任意单个字符必须作为单词尾部出现</span><br></pre></td></tr></table></figure><ul><li>分组</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">()分组</span><br><span class="line">\1，\2，\3，....</span><br><span class="line">例如：(ab)*</span><br></pre></td></tr></table></figure><ul><li>后向引用</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\1引用第一个左括号以及与之对应的右括号所包括的所有内容</span><br><span class="line">\2引用第二个左括号以及与之对应的右括号所包括的所有内容</span><br></pre></td></tr></table></figure><ul><li>或者</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|or 默认匹配｜的整个左侧或者整个右侧的内容</span><br><span class="line">例如：C|cat表示C或者cat，要想表示Cat或者cat则需要使用分组，如(C|c)at</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>httpd服务</title>
    <link href="https://github.com/chineselijie/2020/03/12/22.linux--httpd%E6%9C%8D%E5%8A%A1/"/>
    <id>https://github.com/chineselijie/2020/03/12/22.linux--httpd%E6%9C%8D%E5%8A%A1/</id>
    <published>2020-03-12T11:38:40.253Z</published>
    <updated>2019-08-22T12:25:25.939Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[TOC]</p><h2 id="httpd简介"><a href="#httpd简介" class="headerlink" title="httpd简介"></a>httpd简介</h2><p>Apache HTTP Server（简称Apache或httpd）是Apache软件基金会的一个开放源代码的网页服务器软件，旨在为unix，windows等操作系统中提供开源httpd服务。由于其安全性、高效性及可扩展性，被广泛使用，自1996年4月以来，Apache一直是Internet上最流行的HTTP服务器。它快速、可靠并且可通过简单的API扩充，将Perl／Python等解释器等编译到httpd的相关模块中。</p><p><a href="http://httpd.apache.org/docs/2.4/install.html" target="_blank" rel="noopener"><strong>apache</strong></a></p><h2 id="httpd版本"><a href="#httpd版本" class="headerlink" title="httpd版本"></a>httpd版本</h2><p>在CentOS6.X的版本中默认是提供httpd-2.2版本的rpm包</p><p>在CentOS7.X的版本中默认师提供httpd-2.4版本的rpm包</p><blockquote><p> 本篇博文主要介绍httpd-2.4</p></blockquote><h3 id="httpd的特性"><a href="#httpd的特性" class="headerlink" title="httpd的特性"></a>httpd的特性</h3><table><thead><tr><th align="center">工作模型</th><th align="center">工作方式</th></tr></thead><tbody><tr><td align="center">prefork</td><td align="center">多进程模型，预先生成进程，一个请求用一个进程响应 一个主进程负责生成n个子进程，子进程也称为工作进程 每个子进程处理一个用户请求，即使没有用户请求，也会预先生成多个空闲进程，随时等待请求到达 最大不会超过1024个</td></tr><tr><td align="center">worker</td><td align="center">基于线程工作，一个请求用一个线程响应（启动多个进程，每个进程生成多个线程）</td></tr><tr><td align="center">event</td><td align="center">基于事件的驱动，一个进程处理多个请求</td></tr></tbody></table><h3 id="httpd-2-4新增的模块"><a href="#httpd-2-4新增的模块" class="headerlink" title="httpd-2.4新增的模块"></a>httpd-2.4新增的模块</h3><ul><li>mod_proxy_fcgi        反向代理时支持apache服务器后端的模块</li><li>mod_ratelimit        提供速率限制功能的模块</li><li>mod_remoteip        基于ip的访问控制机制被改变，不再支持使用Order，Deny，Allow来做基于IP的访问控制</li></ul><h2 id="httpd基础"><a href="#httpd基础" class="headerlink" title="httpd基础"></a>httpd基础</h2><h3 id="httpd自带的工具程序"><a href="#httpd自带的工具程序" class="headerlink" title="httpd自带的工具程序"></a>httpd自带的工具程序</h3><ul><li><p>htpasswd        basic认证基于文件实现时，用到的帐号密码生成工具</p></li><li><p>htpasswd        httpd自带的服务控制脚本，支持start，stop，restart</p></li><li><p>apxs        由httpd-devel包提供的，扩展httpd使用第三方模块的工具</p></li><li><p>rotatelogs        日志滚动工具</p></li><li><p>suexec        访问某些有特殊权限配置的资源时，临时切换至指定用户运行的工具</p></li><li><p>ab        apache benchmark，httpd的压力测试工具</p></li></ul><h3 id="rpm包安装httpd程序环境"><a href="#rpm包安装httpd程序环境" class="headerlink" title="rpm包安装httpd程序环境"></a>rpm包安装httpd程序环境</h3><p><code>/var/log/httpd/access.log</code>        访问日志</p><p><code>/var/log/httpd/error_log</code>        错误日志</p><p><code>/var/www/html/</code>        站点文档目录</p><p><code>/usr/lib64/httpd/modules/</code>        模块文件路径</p><p><code>/etc/httpd/conf/httpd.conf</code>        主配置文件</p><p><code>/etc/httpd/conf.modules.d/*.conf</code>        模块配置文件</p><p><code>/etc/httpd/conf.d/*.conf</code>        辅助配置文件</p><h3 id="web相关的命令"><a href="#web相关的命令" class="headerlink" title="web相关的命令"></a>web相关的命令</h3><h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><ul><li>curl是基于URL语法在命令行方式下工作的文件传输工具</li><li>支持FTP，FTPS，HTTP，HTTPS，GOPHER，TELNET，DICT，FILE及LDAP等协议</li><li>功能有很多：https认证、http的POST/PUT等方法、ftp上传、kerberos认证、http上传、代理服务器、cookies、用户名/密码认证等</li><li>最常用于下载</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看帮助信息</span></span><br><span class="line">[root@server222 ~]<span class="comment"># curl --help</span></span><br><span class="line"><span class="comment"># -o  把输出写到文件中</span></span><br><span class="line">[root@server222 ~]<span class="comment"># curl -o blog.html https://chineselijie.github.io/</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 13560  100 13560    0     0  15741      0 --:--:-- --:--:-- --:--:-- 15730</span><br><span class="line">[root@server222 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  initial-setup-ks.cfg  模板  图片  下载  桌面</span><br><span class="line">blog.html        公共                  视频  文档  音乐</span><br></pre></td></tr></table></figure><h4 id="httpd"><a href="#httpd" class="headerlink" title="httpd"></a>httpd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">httpd [options]</span><br><span class="line">-l查看静态编译的模块，列出核心中编译了哪些模块</span><br><span class="line">-M输出一个已经启用的模块列表</span><br><span class="line">-v  显示httpd的版本，然后退出</span><br><span class="line">-V显示httpd和apr/apr-util的版本和编译参数，然后退出</span><br><span class="line">-X以调试模式运行httpd，ctrl+c退出</span><br><span class="line">-t检查配置文件是否有语法错误</span><br></pre></td></tr></table></figure><h2 id="编译安装httpd-2-4"><a href="#编译安装httpd-2-4" class="headerlink" title="编译安装httpd-2.4"></a>编译安装httpd-2.4</h2><p>准备环境</p><ol><li>需yum安装Development Tools</li><li>需yum安装openssl-devel、pcre-devel、expat-devel、libtool</li><li>需编译安装apr-1.4、apr-util-1.4（1.4以上版本）</li><li>编译安装httpd-2.4</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装Development Tools</span></span><br><span class="line">[root@server222 ~]<span class="comment"># yum groups mark install "Development Tools"</span></span><br><span class="line"><span class="comment"># 安装apache系统用户</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd -r -M -s /sbin/nologin apache</span></span><br><span class="line">[root@server222 ~]<span class="comment"># id apache</span></span><br><span class="line">uid=990(apache) gid=985(apache) 组=985(apache)</span><br><span class="line"><span class="comment"># 安装openssl-devel、pcre-devel、expat-devel、libtool</span></span><br><span class="line">[root@server222 ~]<span class="comment"># yum -y install openssl-devel pcre-devel expat-devel libtool</span></span><br><span class="line"><span class="comment"># 下载 apr-1.7、apr-util-1.6、httpd-2.4</span></span><br><span class="line">[root@server222 ~]<span class="comment"># wget https://mirrors.tuna.tsinghua.edu.cn/apache/apr/apr-util-1.6.1.tar.bz2 https://mirrors.tuna.tsinghua.edu.cn/apache/apr/apr-1.7.0.tar.bz2 https://mirrors.tuna.tsinghua.edu.cn/apache/httpd/httpd-2.4.39.tar.bz2</span></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf apr-util-1.6.1.tar.bz2</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf apr-1.7.0.tar.bz2</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf httpd-2.4.39.tar.bz2</span></span><br><span class="line"><span class="comment"># 安装apr</span></span><br><span class="line">[root@server222 ~]<span class="comment"># cd apr-1.7.0/</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># vim configure</span></span><br><span class="line">查找/<span class="variable">$cfgfile</span></span><br><span class="line"><span class="comment">#  $RM "$cfgfile    //将这行注释</span></span><br><span class="line">保存并退出</span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># ./configure --prefix=/usr/local/apr</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># 安装apr-util</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># cd /root/apr-util-1.6.1/ </span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># 安装httpd</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># cd /root/httpd-2.4.39/</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># ./configure --prefix=/usr/local/apache \</span></span><br><span class="line">&gt; --sysconfdir=/etc/httpd24 \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-so \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-ssl \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-cgi \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-rewrite \</span><br><span class="line">&gt; --with-zlib \</span><br><span class="line">&gt; --with-pcre \</span><br><span class="line">&gt; --with-apr=/usr/<span class="built_in">local</span>/apr \</span><br><span class="line">&gt; --with-apr-util=/usr/<span class="built_in">local</span>/apr-util/ \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-modules=most \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-mpms-shared=all \</span><br><span class="line">&gt; --with-mpm=prefork</span><br><span class="line"></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># 创建http的控制脚本</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># echo 'export PATH=/usr/local/apache/bin:$PATH' &gt;/etc/profile.d/httpd.sh</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># bash</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># which httpd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/apache/bin/httpd</span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># /usr/local/apache/bin/apachectl start</span></span><br><span class="line">AH00558: httpd: Could not reliably determine the server<span class="string">'s fully qualified domain name, using fe80::1bd0:d77:f2c2:6f3%ens33. Set the '</span>ServerName<span class="string">' directive globally to suppress this message</span></span><br><span class="line"><span class="string">httpd (pid 104458) already running</span></span><br><span class="line"><span class="string"># 出现报错 解决</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# vim /etc/httpd24/httpd.conf</span></span><br><span class="line"><span class="string">查找 /ServerName www.example.com</span></span><br><span class="line"><span class="string"># ServerName www.example.com:80  //将前面的注释取消掉</span></span><br><span class="line"><span class="string">保存并退出</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# /usr/local/apache/bin/apachectl start</span></span><br><span class="line"><span class="string">httpd (pid 104458) already running</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# ss -antl</span></span><br><span class="line"><span class="string">State       Recv-Q Send-Q Local Address:Port               Peer Address:Port         </span></span><br><span class="line"><span class="string">LISTEN      0      128            *:111                        *:*</span></span><br><span class="line"><span class="string">LISTEN      0      5      192.168.122.1:53                         *:*               </span></span><br><span class="line"><span class="string">LISTEN      0      128            *:22                         *:*</span></span><br><span class="line"><span class="string">LISTEN      0      128    127.0.0.1:631                        *:*</span></span><br><span class="line"><span class="string">LISTEN      0      100    127.0.0.1:25                         *:*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::111                       :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::80                        :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::22                        :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128          ::1:631                       :::*</span></span><br><span class="line"><span class="string">LISTEN      0      100          ::1:25                        :::*</span></span><br><span class="line"><span class="string"># 可以看到80 端口已经启用</span></span><br><span class="line"><span class="string"># 关闭防护墙和SElinux</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# systemctl stop firewalld.service</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# setenforce 0</span></span><br></pre></td></tr></table></figure><p>打开火狐输入IP地址</p><p><img src="https://s2.ax1x.com/2019/06/30/ZlhJG8.png" alt></p><blockquote><p>简略解释选项含义：</p><p>–enable-so 启用动态支持</p><p>–with-zlib 使用zlib压缩库，将数据压缩再传输</p><p>–enable-modules=most 启用哪些模块</p><p>–enable-mpms-shared=all  把哪些模块做成动态共享模块</p></blockquote><h2 id="httpd常用配置"><a href="#httpd常用配置" class="headerlink" title="httpd常用配置"></a>httpd常用配置</h2><p>yum安装：/etc/httpd/conf.modules.d/00-mpm.conf：切换使用MPM（工作模型）</p><ul><li>prefork</li><li>event</li><li>worker</li></ul><p>源码安装：就在主配置文件中（/etc/httpd/httpd.conf）</p><ul><li>模块文件在/usr/local/apache/modules中以.so结尾的文件</li></ul><p>查看配置文件<code>/etc/httpd/httpd.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment"># LoadModule foo_module modules/mod_foo.so</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">LoadModule mpm_event_module modules/mod_mpm_event.so</span><br><span class="line"><span class="comment">#LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</span></span><br><span class="line"><span class="comment">#LoadModule mpm_worker_module modules/mod_mpm_worker.so</span></span><br><span class="line">LoadModule authn_file_module modules/mod_authn_file.so</span><br><span class="line"><span class="comment">#LoadModule authn_dbm_module modules/mod_authn_dbm.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_anon_module modules/mod_authn_anon.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_dbd_module modules/mod_authn_dbd.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_socache_module modules/mod_authn_socache.so</span></span><br><span class="line">LoadModule authn_core_module modules/mod_authn_core.so</span><br></pre></td></tr></table></figure><p>访问控制法则</p><ul><li>可针对全局设置，也可针对某个目录做访问控制</li></ul><table><thead><tr><th align="center">法则</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">Require all granted</td><td align="center">允许所有主机访问</td></tr><tr><td align="center">Require all denied</td><td align="center">拒绝所有主机访问</td></tr><tr><td align="center">Require ip IPADDR</td><td align="center">授权指定来源地址的主机访问</td></tr><tr><td align="center">Require not ip IPADDR</td><td align="center">拒绝指定来源地址的主机访问</td></tr><tr><td align="center">Require host HOSTNAME</td><td align="center">授权指定来源主机名的主机访问</td></tr><tr><td align="center">Require not host HOSTNAME</td><td align="center">拒绝指定来源主机名的主机访问</td></tr></tbody></table><table><thead><tr><th>IPADDR的类型</th><th>HOSTNAME的类型</th></tr></thead><tbody><tr><td>IP：192.168.1.1  Network/mask：192.168.1.0/255.255.255.0 Network/Length：192.168.1.0/24 Net：192.168</td><td>FQDN：特定主机的全名 DOMAIN：指定域内的所有主机</td></tr></tbody></table><ul><li>注意：httpd-2.4版本默认是拒绝所有主机访问的，所以安装以后必须做显示授权访问</li></ul><p><strong>禁止特殊IP访问</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/httpd.conf</span></span><br><span class="line"><span class="comment">#在最后面加上</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/usr/local/apache/htdocs"</span></span><br><span class="line">    &lt;Directory /usr/<span class="built_in">local</span>/apache/htdocs&gt;</span><br><span class="line">        &lt;RequireAll&gt;</span><br><span class="line">        Require all granted</span><br><span class="line">        Require not ip 192.168.176.111</span><br><span class="line">        &lt;/RequireAll&gt;</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># /usr/local/apache/bin/apachectl restart</span></span><br></pre></td></tr></table></figure><p>在本地主机访问：</p><p><img src="https://s2.ax1x.com/2019/06/30/Zlh5Ix.png" alt></p><p><strong>虚拟主机</strong>有三类：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install httpd -y</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">119 DocumentRoot <span class="string">"/home/wwwroot"</span></span><br><span class="line">120 </span><br><span class="line">121 <span class="comment">#</span></span><br><span class="line">122 <span class="comment"># Relax access to content within /var/www.</span></span><br><span class="line">123 <span class="comment">#</span></span><br><span class="line">124 &lt;Directory <span class="string">"/home/wwwroot"</span>&gt;</span><br></pre></td></tr></table></figure><ul><li>相同IP不同端口</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/80</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/81</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "port:80" &gt; /home/wwwroot/80/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "port:81" &gt; /home/wwwroot/81/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment">#找到Listen 80，在下一行加上Listen 81</span></span><br><span class="line">Listen 80</span><br><span class="line">Listen 81</span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 16 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222:80&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/80"</span></span><br><span class="line">ServerName <span class="string">"www.123.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/80"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.222:81&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/81"</span></span><br><span class="line">ServerName <span class="string">"www.abc.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/81"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure><ul><li>不同IP相同端口</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># vim /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 7 /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">IPADDR0=192.168.176.222</span><br><span class="line">IPADDR1=192.168.176.223</span><br><span class="line">IPADDR2=192.168.176.224</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.176.2</span><br><span class="line">DNS1=192.168.176.2</span><br><span class="line">IPV6_PRIVACY=no</span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart network</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.222</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.223</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.224</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/10</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/20</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/30</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.222" &gt; /home/wwwroot/10/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.223" &gt; /home/wwwroot/20/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.224" &gt; /home/wwwroot/30/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 24 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/10</span><br><span class="line">ServerName www.123.com</span><br><span class="line">&lt;Directory /home/wwwroot/10 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.223&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/20</span><br><span class="line">ServerName www.456.com</span><br><span class="line">&lt;Directory /home/wwwroot/20 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.224&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/30</span><br><span class="line">ServerName www.789.com</span><br><span class="line">&lt;Directory /home/wwwroot/30 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure><ul><li>相同IP相同端口不同域名(常用)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">192.168.176.222 www.123.com www.abc.com</span><br><span class="line">[root@server222 ~]<span class="comment"># ping www.123.com</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping www.abc.com</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/123</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/abc</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "WWW.123.com" &gt; /home/wwwroot/123/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "WWW.abc.com" &gt; /home/wwwroot/abc/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 16 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/123"</span></span><br><span class="line">ServerName <span class="string">"www.123.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/123"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/abc"</span></span><br><span class="line">ServerName <span class="string">"www.abc.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/abc"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1.编译安装httpd-2.4</p><p>2.配置三种不同风格的虚拟主机</p><p>3.写博客，要写明环境背景、配置步骤，要有验证截图</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title>MariaDB数据库</title>
    <link href="https://github.com/chineselijie/2020/03/12/21.linux--MariaDB%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>https://github.com/chineselijie/2020/03/12/21.linux--MariaDB%E6%95%B0%E6%8D%AE%E5%BA%93/</id>
    <published>2020-03-12T11:38:40.252Z</published>
    <updated>2019-08-22T12:25:13.396Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>关于作者</strong></p><p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p><p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p><p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>[toc]</p><h2 id="MariaDB数据库"><a href="#MariaDB数据库" class="headerlink" title="MariaDB数据库"></a>MariaDB数据库</h2><p>​        开发MariaDB数据库的开发人员以前是从事开发MySQL，但是MySQL被Oracle公司收购了，从开源软件转变为闭源软件，之后MySQL的开发者们就离开了公司，再次创建了一个名为MariaDB的数据库，可以说，MariaDB和MySQL在性能上基本保持一致，两者的操作命令也十分相似。从务实的角度来讲，在掌握了MariaDB数据库的命令和基本操作之后，在今后的工作中即使遇到MySQL数据库，也可以快速上手。</p><p><a href="https://baike.baidu.com/item/mariaDB/6466119?fr=aladdin" target="_blank" rel="noopener">MariaDB-百度百科</a></p><p><a href="https://mariadb.org/" target="_blank" rel="noopener">MariaDB</a></p><p>​        当前，谷歌、维基百科等技术领域决定将MySQL数据库上的业务转移到MariaDB数据库，Linux开源系统的领袖<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">红帽</a>公司也决定在RHEL 7、<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">CentOS</a> 7以及最新的Fedora系统中，将MariaDB作为默认的数据库管理系统，而且<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">红帽</a>公司更是首次将数据库知识加入到了<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">RHCE</a>认证的考试内容中。随后，还有数十个常见的Linux系统（如openSUSE、Slackware等）也作出了同样的表态。</p><p><img src="https://s2.ax1x.com/2019/07/01/Z819C8.png" alt></p><h2 id="初始化MariaDB服务"><a href="#初始化MariaDB服务" class="headerlink" title="初始化MariaDB服务"></a>初始化MariaDB服务</h2><p>​        相较于MySQL，MariaDB数据库管理系统有了很多新鲜的扩展特性，例如对微秒级别的支持、线程池、子查询优化、进程报告等。在配置妥当Yum软件仓库后，即可安装部署MariaDB数据库主程序及服务端程序了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y mariadb mariadb-server</span></span><br></pre></td></tr></table></figure><blockquote><p>安装完成后加入到开机启动项</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable mariadb</span></span><br></pre></td></tr></table></figure><p><strong>初始化5步骤</strong></p><ol><li>设置root管理员在数据库中的密码值（注意，该密码并非root管理员在系统中的密码，这里的密码值默认应该为空，可直接按回车键）。</li><li>设置root管理员在数据库中的专有密码。</li><li>随后删除匿名账户，并使用root管理员从远程登录数据库，以确保数据库上运行的业务的安全性。</li><li>删除默认的测试数据库，取消测试数据库的一系列访问权限。</li><li>刷新授权列表，让初始化的设定立即生效。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MariaDB to secure it, we<span class="string">'ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you'</span>ve just installed MariaDB, and</span><br><span class="line">you haven<span class="string">'t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Enter current password for root (enter for none): #当前数据库密码为空，直接回车</span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MariaDB</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Set root password? [Y/n] y</span></span><br><span class="line"><span class="string">New password: # 设置创建数据库管理员密码</span></span><br><span class="line"><span class="string">Re-enter new password: #再次输入密码</span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MariaDB installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MariaDB without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n] y #删除匿名账户</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from '</span>localhost<span class="string">'.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n] y # 禁止root管理员从远程登陆</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MariaDB comes with a database named '</span><span class="built_in">test</span><span class="string">' that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n] y #删除text数据库并取消对它的访问权限</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n] y # 刷新授权表，让初始化后的设定立即生效</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Cleaning up...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">All done!  If you'</span>ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using MariaDB!</span><br><span class="line">[root@server222 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>之后我们还要设置防火墙，使其放行对数据库服务程序的访问请求，数据库服务程序默认会占用3306端口，在防火墙策略中服务名称统一叫作mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># firewall-cmd --permanent --add-service=mysql</span></span><br><span class="line">success</span><br><span class="line">[root@server222 ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br></pre></td></tr></table></figure><p>最后，我们可以开始首次登陆MariaDB数据库</p><p>-u  指定哪一位用户登陆</p><p>-p 验证该用户在数据库中的密码值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password: <span class="comment">#此处输入您刚才设置的密码</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>在登陆MariaDB数据库执行命令时候，每一次都要在命令结尾以分号（;）结尾</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="使用数据库命令更改密码"><a href="#使用数据库命令更改密码" class="headerlink" title="使用数据库命令更改密码"></a>使用数据库命令更改密码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SET password = PASSWORD(<span class="string">'abccba'</span>);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">ERROR 1045 (28000): Access denied <span class="keyword">for</span> user <span class="string">'root'</span>@<span class="string">'localhost'</span> (using password: YES)</span><br><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br></pre></td></tr></table></figure><h2 id="管理用户以及授权"><a href="#管理用户以及授权" class="headerlink" title="管理用户以及授权"></a>管理用户以及授权</h2><h4 id="创建专用的数据库管理账户"><a href="#创建专用的数据库管理账户" class="headerlink" title="创建专用的数据库管理账户"></a>创建专用的数据库管理账户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [mysql]&gt; CREATE USER abc@localhost IDENTIFIED BY <span class="string">'123321'</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="查询账户"><a href="#查询账户" class="headerlink" title="查询账户"></a>查询账户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use mysql</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SELECT HOST,USER,PASSWORD FROM user WHERE USER=<span class="string">"abc"</span>;</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">| HOST      | USER | PASSWORD                                  |</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">| localhost | abc  | *437F1809645E0A92DAB553503D2FE21DB91270FD |</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="授权：grant"><a href="#授权：grant" class="headerlink" title="授权：grant"></a>授权：grant</h4><table><thead><tr><th align="center">命令</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">GRANT 权限 ON 数据库.表单名称 TO 用户名@主机名</td><td align="center">对某个特定数据库中的特定表单给予授权</td></tr><tr><td align="center">GRANT 权限 ON 数据库.* TO 用户名@主机名</td><td align="center">对某个特定数据库中的所有表单给予授权</td></tr><tr><td align="center">GRANT 权限 ON <em>.</em> TO 用户名@主机名</td><td align="center">对所有数据库及所有表单给予授权</td></tr><tr><td align="center">GRANT 权限1,权限2 ON 数据库.* TO 用户名@主机名</td><td align="center">对某个数据库中的所有表单给予多个授权</td></tr><tr><td align="center">GRANT ALL PRIVILEGES ON <em>.</em> TO 用户名@主机名</td><td align="center">对所有数据库及所有表单给予全部授权（需谨慎操作）</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; GRANT SELECT,UPDATE,DELETE,INSERT ON mysql.user TO abc@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SHOW GRANTS FOR abc@localhost;                                 +------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Grants for abc@localhost                                                                                   |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO &apos;abc&apos;@&apos;localhost&apos; IDENTIFIED BY PASSWORD &apos;*437F1809645E0A92DAB553503D2FE21DB91270FD&apos; |</span><br><span class="line">| GRANT SELECT, INSERT, UPDATE, DELETE ON `mysql`.`user` TO &apos;abc&apos;@&apos;localhost&apos;                                |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>经过一系列的操作，我们再切入到abc用户</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u abc -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 22</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show database;</span><br><span class="line">ERROR 1064 (42000): You have an error <span class="keyword">in</span> your SQL syntax; check the manual that corresponds to your MariaDB server version <span class="keyword">for</span> the right syntax to use near <span class="string">'database'</span> at line 1</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; show tables;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_mysql |</span><br><span class="line">+-----------------+</span><br><span class="line">| user            |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="收回权限命令：revoke"><a href="#收回权限命令：revoke" class="headerlink" title="收回权限命令：revoke"></a>收回权限命令：revoke</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 24</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SE</span><br><span class="line">SECOND              SELECT              SERIALIZABLE</span><br><span class="line">SECOND_MICROSECOND  SENSITIVE           SESSION</span><br><span class="line">SECURITY            SEPARATOR           SESSION_USER</span><br><span class="line">SEC_TO_TIME         SERIAL              SET</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SELECT</span><br><span class="line">Display all 1116 possibilities? (y or n)</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SELECT,UPDATE,DELETE,INSERT ON mysql.user FROM abc@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SHOW GRANTS FOR abc@localhost;</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Grants <span class="keyword">for</span> abc@localhost                                                                                   |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO <span class="string">'abc'</span>@<span class="string">'localhost'</span> IDENTIFIED BY PASSWORD <span class="string">'*437F1809645E0A92DAB553503D2FE21DB91270FD'</span> |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="创建数据库与表单"><a href="#创建数据库与表单" class="headerlink" title="创建数据库与表单"></a>创建数据库与表单</h2><h4 id="自定义数据库表结构"><a href="#自定义数据库表结构" class="headerlink" title="自定义数据库表结构"></a>自定义数据库表结构</h4><table><thead><tr><th align="center">用法</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">CREATE database 数据库名称。</td><td align="center">创建新的数据库</td></tr><tr><td align="center">DESCRIBE 表单名称;</td><td align="center">描述表单</td></tr><tr><td align="center">UPDATE 表单名称 SET attribute=新值 WHERE attribute &gt; 原始值;</td><td align="center">更新表单中的数据</td></tr><tr><td align="center">USE 数据库名称;</td><td align="center">指定使用的数据库</td></tr><tr><td align="center">SHOW databases;</td><td align="center">显示当前已有的数据库</td></tr><tr><td align="center">SHOW tables;</td><td align="center">显示当前数据库中的表单</td></tr><tr><td align="center">SELECT * FROM 表单名称;</td><td align="center">从表单中选中某个记录值</td></tr><tr><td align="center">DELETE FROM 表单名 WHERE attribute=值;</td><td align="center">从表单中删除某个记录值</td></tr></tbody></table><p>现在我们创建一个名为tom的数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE DATABASE tom;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| tom                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>想要创建数据表单，首先需要切换到指定的数据库中，我们现在在tom数据库中创建表单mybook。然后进行表单的初始化，即定义存储数据内容的结构。我们分别定义3个字段项，其中，长度为15个字符的字符型字段name用来存放图书名称，整型字段price和pages分别存储图书的价格和页数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use tom;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [tom]&gt; CREATE TABLE mybook (name char(15),price int,pages int);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; DESCRIBE mybook;</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| Field | Type     | Null | Key | Default | Extra |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| name  | char(15) | YES  |     | NULL    |       |</span><br><span class="line">| price | int(11)  | YES  |     | NULL    |       |</span><br><span class="line">| pages | int(11)  | YES  |     | NULL    |       |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;</span><br></pre></td></tr></table></figure><h2 id="管理表单及数据"><a href="#管理表单及数据" class="headerlink" title="管理表单及数据"></a>管理表单及数据</h2><p>​        接下来向mybook数据表单中插一条图书信息。为此需要使用INSERT命令，并在命令中写清表单名称以及对应的字段项。执行该命令之后即可完成图书写入信息。下面我们使用该命令插入一条图书信息，其中书名为gelintonghua，价格和页数分别是60元和518页。在命令执行后也就意味着图书信息已经成功写入到数据表单中，然后就可以查询表单中的内容了。我们在使用select命令查询表单内容时，需要加上想要查询的字段。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'gelintonghua'</span>,<span class="string">'60'</span>, <span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>如果想查看表单中的所有内容，则可以使用星号（*）通配符来显示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; select * from mybook;</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">| name         | price | pages |</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">| gelintonghua |    60 |   518 |</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>更改图书的价格</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; UPDATE mybook SET price=55 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; SELECT name,price FROM mybook;</span><br><span class="line">+--------------+-------+</span><br><span class="line">| name         | price |</span><br><span class="line">+--------------+-------+</span><br><span class="line">| gelintonghua |    55 |</span><br><span class="line">+--------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;</span><br></pre></td></tr></table></figure><h4 id="删除命令：delete"><a href="#删除命令：delete" class="headerlink" title="删除命令：delete"></a>删除命令：delete</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; DELETE FROM mybook;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; SELECT * FROM mybook;</span><br><span class="line">Empty <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="查询大于某一个数值的信息"><a href="#查询大于某一个数值的信息" class="headerlink" title="查询大于某一个数值的信息"></a>查询大于某一个数值的信息</h4><p>首先我们插入四条数据</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'123'</span>,<span class="string">'30'</span>,<span class="string">'518'</span>);   Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'456'</span>,<span class="string">'50'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'789'</span>,<span class="string">'80'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'101'</span>,<span class="string">'100'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="命令where"><a href="#命令where" class="headerlink" title="命令where"></a>命令where</h4><table><thead><tr><th align="center">参数</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">=</td><td align="center">相等</td></tr><tr><td align="center">&lt;&gt;或!=</td><td align="center">不相等</td></tr><tr><td align="center">&gt;</td><td align="center">大于</td></tr><tr><td align="center">&lt;</td><td align="center">小于</td></tr><tr><td align="center">&gt;=</td><td align="center">大于或等于</td></tr><tr><td align="center">&lt;=</td><td align="center">小于或等于</td></tr><tr><td align="center">BETWEEN</td><td align="center">在某个范围内</td></tr><tr><td align="center">LIKE</td><td align="center">搜索一个例子</td></tr><tr><td align="center">IN</td><td align="center">在列中搜索多个值</td></tr></tbody></table><p><strong>在mybook表单中查找出价格大于75元或价格不等于80元的图书</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; SELECT * FROM mybook WHERE price&gt;75;</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| name | price | pages |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| 789  |    80 |   518 |</span><br><span class="line">| 101  |   100 |   518 |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;  SELECT * FROM mybook WHERE price!=80;</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| name | price | pages |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| 123  |    30 |   518 |</span><br><span class="line">| 456  |    50 |   518 |</span><br><span class="line">| 101  |   100 |   518 |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="数据库的备份及恢复"><a href="#数据库的备份及恢复" class="headerlink" title="数据库的备份及恢复"></a>数据库的备份及恢复</h2><h4 id="命令mysqldump"><a href="#命令mysqldump" class="headerlink" title="命令mysqldump"></a>命令mysqldump</h4><p>​        mysqldump命令用于备份数据库数据，格式为“mysqldump [参数] [数据库名称]”。其中参数与mysql命令大致相同，-u参数用于定义登录数据库的账户名称，-p参数代表密码提示符。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line">[root@server222 ~]<span class="comment"># mysqldump -u root -p mysql &gt; /root/mysql.dump</span></span><br><span class="line">Enter password:</span><br><span class="line">[root@server222 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       mysql.dump  模板  图片  下载  桌面</span><br><span class="line">initial-setup-ks.cfg  公共        视频  文档  音乐</span><br></pre></td></tr></table></figure><p><strong>进入MariaDB数据库管理系统，删除mysql数据库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 45</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; DROP DATABASE mysql;</span><br><span class="line">Query OK, 24 rows affected, 2 warnings (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE mysql;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>恢复数据库mysql</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p mysql &gt; /root/mysql.dump</span></span><br><span class="line">Enter password:</span><br><span class="line">[root@server222 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1.搭建mysql服务<br>2.创建一个以你名字为名的数据库，并创建一张表student，该表包含三个字段（id，name，age），表结构如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student;</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| name  | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| age   | tinyint(4)   | YES  |     | NULL    |       |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>3.查看下该新建的表有无内容（用select语句）<br>4.往新建的student表中插入数据（用insert语句），结果应如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+------+</span><br><span class="line">| id | name        | age  |</span><br><span class="line">+----+-------------+------+</span><br><span class="line">|  1 | tom         |   20 |</span><br><span class="line">|  2 | jerry       |   23 |</span><br><span class="line">|  3 | wangqing    |   25 |</span><br><span class="line">|  4 | sean        |   28 |</span><br><span class="line">|  5 | zhangshan   |   26 |</span><br><span class="line">|  6 | zhangshan   |   20 |</span><br><span class="line">|  7 | lisi        | NULL |</span><br><span class="line">|  8 | chenshuo    |   10 |</span><br><span class="line">|  9 | wangwu      |    3 |</span><br><span class="line">| 10 | qiuyi       |   15 |</span><br><span class="line">| 11 | qiuxiaotian |   20 |</span><br><span class="line">+----+-------------+------+</span><br></pre></td></tr></table></figure><p>5.修改lisi的年龄为50<br>6.以age字段降序排序<br>7.查询student表中年龄最小的3位同学<br>8.查询student表中年龄最大的4位同学<br>9.查询student表中名字叫zhangshan的记录<br>10.查询student表中名字叫zhangshan且年龄大于20岁的记录<br>11.查询student表中年龄在23到30之间的记录<br>12.修改wangwu的年龄为100<br>13.删除student中名字叫zhangshan且年龄小于等于20的记录</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;关于作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;周李杰&lt;/strong&gt;，最后一批90后，现居&lt;strong&gt;湖北武汉&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。&lt;/p&gt;
&lt;p
      
    
    </summary>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/categories/linux%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="linux进阶" scheme="https://github.com/chineselijie/tags/linux%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
</feed>
