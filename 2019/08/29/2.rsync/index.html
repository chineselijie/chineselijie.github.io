<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>rsync | Li Jie&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="å…³äºä½œè€… å‘¨ææ°ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…æ¹–åŒ—æ­¦æ±‰ å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚ å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚ 12&amp;gt; print(&amp;quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&amp;quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š&amp;gt;  [TOC] rsyncrsyncæ˜¯linuxç³»ç»Ÿä¸‹çš„æ•°æ®é•œåƒå¤‡ä»½å·¥å…·ã€‚ä½¿ç”¨å¿«é€Ÿå¢é‡å¤‡ä»½å·¥å…·Remote Syncå¯ä»¥è¿œç¨‹åŒæ­¥ï¼Œæ”¯æŒæœ¬">
<meta name="keywords" content="linuxè¿ç»´">
<meta property="og:type" content="article">
<meta property="og:title" content="rsync">
<meta property="og:url" content="https://github.com/chineselijie/2019/08/29/2.rsync/index.html">
<meta property="og:site_name" content="Li Jie&#39;s blog">
<meta property="og:description" content="å…³äºä½œè€… å‘¨ææ°ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…æ¹–åŒ—æ­¦æ±‰ å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚ å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚ 12&amp;gt; print(&amp;quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&amp;quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š&amp;gt;  [TOC] rsyncrsyncæ˜¯linuxç³»ç»Ÿä¸‹çš„æ•°æ®é•œåƒå¤‡ä»½å·¥å…·ã€‚ä½¿ç”¨å¿«é€Ÿå¢é‡å¤‡ä»½å·¥å…·Remote Syncå¯ä»¥è¿œç¨‹åŒæ­¥ï¼Œæ”¯æŒæœ¬">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-23T17:17:04.748Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="rsync">
<meta name="twitter:description" content="å…³äºä½œè€… å‘¨ææ°ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…æ¹–åŒ—æ­¦æ±‰ å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚ å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚ 12&amp;gt; print(&amp;quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&amp;quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š&amp;gt;  [TOC] rsyncrsyncæ˜¯linuxç³»ç»Ÿä¸‹çš„æ•°æ®é•œåƒå¤‡ä»½å·¥å…·ã€‚ä½¿ç”¨å¿«é€Ÿå¢é‡å¤‡ä»½å·¥å…·Remote Syncå¯ä»¥è¿œç¨‹åŒæ­¥ï¼Œæ”¯æŒæœ¬">
  
    <link rel="alternate" href="/atom.xml" title="Li Jie&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li Jie&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/chineselijie"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2.rsync" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/29/2.rsync/" class="article-date">
  <time datetime="2019-08-29T15:44:18.521Z" itemprop="datePublished">2019-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿ç»´/">linuxè¿ç»´</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      rsync
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h2><p>rsyncæ˜¯linuxç³»ç»Ÿä¸‹çš„æ•°æ®<a href="https://baike.baidu.com/item/é•œåƒ" target="_blank" rel="noopener">é•œåƒ</a><a href="https://baike.baidu.com/item/å¤‡ä»½" target="_blank" rel="noopener">å¤‡ä»½</a>å·¥å…·ã€‚ä½¿ç”¨å¿«é€Ÿå¢é‡å¤‡ä»½å·¥å…·Remote Syncå¯ä»¥è¿œç¨‹åŒæ­¥ï¼Œæ”¯æŒæœ¬åœ°å¤åˆ¶ï¼Œæˆ–è€…ä¸å…¶ä»–SSHã€rsyncä¸»æœºåŒæ­¥ã€‚</p>
<h2 id="rsyncç‰¹æ€§"><a href="#rsyncç‰¹æ€§" class="headerlink" title="rsyncç‰¹æ€§"></a>rsyncç‰¹æ€§</h2><p>å®ƒçš„ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å¯ä»¥<a href="https://baike.baidu.com/item/é•œåƒ" target="_blank" rel="noopener">é•œåƒ</a>ä¿å­˜æ•´ä¸ªç›®å½•æ ‘å’Œæ–‡ä»¶ç³»ç»Ÿã€‚</p>
</li>
<li><p>å¯ä»¥å¾ˆå®¹æ˜“åšåˆ°ä¿æŒåŸæ¥æ–‡ä»¶çš„æƒé™ã€æ—¶é—´ã€è½¯ç¡¬é“¾æ¥ç­‰ç­‰ã€‚</p>
</li>
<li><p>æ— é¡»ç‰¹æ®Šæƒé™å³å¯å®‰è£…ã€‚</p>
</li>
<li><p>å¿«é€Ÿï¼šç¬¬ä¸€æ¬¡åŒæ­¥æ—¶ rsync ä¼šå¤åˆ¶å…¨éƒ¨å†…å®¹ï¼Œä½†åœ¨ä¸‹ä¸€æ¬¡åªä¼ è¾“ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚rsync åœ¨ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¸­å¯ä»¥å®è¡Œå‹ç¼©åŠ<a href="https://baike.baidu.com/item/è§£å‹ç¼©" target="_blank" rel="noopener">è§£å‹ç¼©</a>æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ›´å°‘çš„å¸¦å®½ã€‚</p>
</li>
<li><p>å®‰å…¨ï¼šå¯ä»¥ä½¿ç”¨scpã€sshç­‰æ–¹å¼æ¥ä¼ è¾“æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥çš„socketè¿æ¥ã€‚</p>
</li>
<li><p>æ”¯æŒåŒ¿åä¼ è¾“ï¼Œä»¥æ–¹ä¾¿è¿›è¡Œç½‘ç«™é•œåƒã€‚</p>
</li>
</ul>
<p>rsyncå®˜ç½‘ï¼š<a href="http://rsync.samba.org" target="_blank" rel="noopener">rsysc</a></p>
<h2 id="ä¸scpå‘½ä»¤æ¯”è¾ƒ"><a href="#ä¸scpå‘½ä»¤æ¯”è¾ƒ" class="headerlink" title="ä¸scpå‘½ä»¤æ¯”è¾ƒ"></a>ä¸scpå‘½ä»¤æ¯”è¾ƒ</h2><p>ä¼˜ç‚¹ï¼š </p>
<ul>
<li><p>æ”¯æŒå¢é‡å¤‡ä»½ã€‚</p>
</li>
<li><p>é€‰æ‹©æ€§çš„ä¿æŒ ï¼š ç¬¦å·é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼Œæ–‡ä»¶å±æ€§ï¼Œæƒé™ åŠæ—¶é—´ ç­‰ã€‚</p>
</li>
<li><p>ä¼ è¾“å‰æ‰§è¡Œå‹ç¼©ã€‚é€‚ç”¨äºå¼‚åœ°å¤‡ä»½ ï¼Œé•œåƒæœåŠ¡å™¨ç­‰åº”ç”¨ ã€‚</p>
</li>
<li><p>ä½¿ç”¨sshåšä¸ºä¼ è¾“ç«¯å£ã€‚ sftp ï¼Œssh</p>
</li>
</ul>
<p>åŒºåˆ«ï¼š</p>
<p>å½“æ–‡ä»¶æ•°æ®å¾ˆå¤§æ—¶å€™ï¼š </p>
<ul>
<li>scp æ— æ³•å¤‡ä»½å¤§é‡æ•°æ®ï¼Œ ç‰¹ç‚¹ï¼š å…ˆç»Ÿä¸€ä¿¡æ¯ï¼Œåƒwindowså¤åˆ¶ã€‚</li>
<li>rsync è¾¹å¤åˆ¶ï¼Œè¾¹æ¯”è¾ƒï¼Œè¾¹ç»Ÿè®¡ã€‚</li>
</ul>
<p>ç«¯å£ï¼š 873<br>æ¨¡å¼ï¼šC/S ã€‚ å¦‚æœç›´æ¥ä½¿ç”¨å‘½ä»¤rsyncï¼Œå°±æ˜¯ç‚¹åˆ°ç‚¹ä¼ è¾“ã€‚</p>
<h2 id="å¤‡ä»½æº"><a href="#å¤‡ä»½æº" class="headerlink" title="å¤‡ä»½æº"></a>å¤‡ä»½æº</h2><blockquote>
<p>ä½•ä¸ºå¤‡ä»½æºï¼Ÿ</p>
<p>åœ¨è¿œç¨‹åŒæ­¥ä»»åŠ¡ä¸­ï¼Œè´Ÿè´£å‘èµ·rsyncåŒæ­¥æ“ä½œçš„å®¢æˆ·æœºç§°ä¸ºå‘èµ·ç«¯ï¼Œè€Œè´Ÿè´£å“åº”æ¥è‡ªå®¢æœºçš„rsyncåŒæ­¥æ“ä½œçš„æœåŠ¡å™¨ç§°ä¸ºå¤‡ä»½æºã€‚</p>
</blockquote>
<h2 id="å®‰è£…rsync"><a href="#å®‰è£…rsync" class="headerlink" title="å®‰è£…rsync"></a>å®‰è£…rsync</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># rpm -qf `which rsync`</span></span><br><span class="line">rsync-3.0.9-18.el7.x86_64</span><br><span class="line">[root@server222 ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.r            pm</span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signatu            re, å¯†é’¥ ID f4a80eb5: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">        è½¯ä»¶åŒ… rsync-3.0.9-18.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡"><a href="#å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡" class="headerlink" title="å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡"></a>å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cdrom]# rpm -ivh /mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm</span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID f4a80eb5: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          ################################# [100%]</span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:xinetd-2:2.3.15-13.el7           ################################# [100%]</span><br></pre></td></tr></table></figure>

<h2 id="å¼€å¯rsync-æœåŠ¡"><a href="#å¼€å¯rsync-æœåŠ¡" class="headerlink" title="å¼€å¯rsync æœåŠ¡"></a>å¼€å¯rsync æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# systemctl restart rsyncd</span><br><span class="line">[root@server222 ~]# systemctl status rsyncd</span><br><span class="line">â— rsyncd.service - fast remote file copy program daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rsyncd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since å›› 2019-08-22 23:57:10 CST; 2s ago</span><br><span class="line"> Main PID: 14359 (rsync)</span><br><span class="line">   CGroup: /system.slice/rsyncd.service</span><br><span class="line">           â””â”€14359 /usr/bin/rsync --daemon --no-detach</span><br><span class="line"></span><br><span class="line">8æœˆ 22 23:57:10 server222 systemd[1]: Started fast remote file copy program ...n.</span><br><span class="line">8æœˆ 22 23:57:10 server222 systemd[1]: Starting fast remote file copy program.....</span><br><span class="line">8æœˆ 22 23:57:11 server222 rsyncd[14359]: rsyncd version 3.0.9 starting, liste...3</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br></pre></td></tr></table></figure>

<h2 id="ç›‘å¬ç«¯å£"><a href="#ç›‘å¬ç«¯å£" class="headerlink" title="ç›‘å¬ç«¯å£"></a>ç›‘å¬ç«¯å£</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># netstat -antup | grep 873</span></span><br><span class="line">tcp        0      0 0.0.0.0:873             0.0.0.0:*               LISTEN      14359/rsync</span><br><span class="line">tcp6       0      0 :::873                  :::*                    LISTEN      14359/rsync</span><br></pre></td></tr></table></figure>

<h2 id="rsync-å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•"><a href="#rsync-å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="rsync å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•"></a>rsync å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•</h2><p>æ ¼å¼ï¼š<code>rsync</code> ã€é€‰é¡¹ã€‘ æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</p>
<p>å¸¸è§çš„é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-aï¼Œ--archive(å­˜æ¡£) å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’çš„æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¸”ä¿æŒæ–‡ä»¶å±æ€§ï¼Œç­‰åŒäºåŠ äº†å‚æ•°-rlptgoD</span><br><span class="line">-rï¼Œâ€“recursive å¯¹å­ç›®å½”ä»¥é€’å½’æ¨¡å¼å¤„ç†</span><br><span class="line">-l,--links è¡¨ç¤ºæ‹·è´é“¾æ¥æ–‡ä»¶</span><br><span class="line">-p , --perms è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰æƒé™</span><br><span class="line">-t , --<span class="built_in">times</span> è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰æ—¶é—´</span><br><span class="line">-g , --group è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰å±ç”¨æˆ·ç»„</span><br><span class="line">-o , --owner è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰å±ä¸»</span><br><span class="line">-D , --devices è¡¨ç¤ºå—è®¾å¤‡æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">-z , --compress è¡¨ç¤ºå‹ç¼©ä¼ è¾“</span><br><span class="line">-H è¡¨ç¤ºç¡¬è¿æ¥æ–‡ä»¶</span><br><span class="line">-A ä¿ç•™ACL å±æ€§ä¿¡æ¯</span><br><span class="line">-P æ˜¾ç¤ºä¼ è¾“è¿›åº¦</span><br><span class="line">-u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºç›®æ ‡ä½ç½®ï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ã€‚(ä¸Œ</span><br><span class="line">è¦†ç›–æ›´æ–°çš„æ–‡ä»¶)</span><br><span class="line">--port=PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£ 873</span><br><span class="line">--delete åˆ é™¤é‚£äº›ç›®æ ‡ä½ç½®æœ‰è€ŒåŸå§‹ä½ç½®æ²¡æœ‰çš„æ–‡ä»¶</span><br><span class="line">--password-file=FILE ä»FILE ä¸­å¾—åˆ°å¯†ç </span><br><span class="line">--bwlimit=KBPS é™åˆ¶I/O å¸¦å®½ï¼ŒKbytes /second</span><br><span class="line">--filter â€œ- æ–‡ä»¶åâ€éœ€è¦è¿‡æ»¤çš„æ–‡ä»¶</span><br><span class="line">--exclude= ï¼šéœ€è¦è¿‡æ»¤çš„æ–‡ä»¶</span><br><span class="line">-v æ˜¾ç¤ºåŒæ­¥è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â€“delete åˆ é™¤é‚£äº›ç›®æ ‡ä½ç½®æœ‰è€ŒåŸå§‹ä½ç½®æ²¡æœ‰çš„æ–‡ä»¶</p>
<p>ä¾‹å¦‚ ç›®å½”/web : /back a.txt</p>
</blockquote>
<h2 id="å®æˆ˜1ï¼š"><a href="#å®æˆ˜1ï¼š" class="headerlink" title="å®æˆ˜1ï¼š"></a>å®æˆ˜1ï¼š</h2><p>client111ï¼š192.168.176.111</p>
<p>server222ï¼š192.168.176.222</p>
<blockquote>
<p>å¤‡ä»½server222çš„/mnt ç›®å½•åˆ°client111 çš„/root/mntã€‚<br>åˆ›å»ºç”¨æˆ·haryç”¨äºä¸‹è½½ã€è¯»ï¼›åˆ›å»ºç”¨æˆ·natasha ç”¨äºä¸Šä¼ ã€å†™ã€‚</p>
</blockquote>
<h3 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># useradd hary</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin hary</span></span><br><span class="line">æ›´æ”¹ç”¨æˆ· hary çš„å¯†ç  ã€‚</span><br><span class="line">passwdï¼šæ‰€æœ‰çš„èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ã€‚</span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin natasha</span></span><br><span class="line">æ›´æ”¹ç”¨æˆ· natasha çš„å¯†ç  ã€‚</span><br><span class="line">passwdï¼šæ‰€æœ‰çš„èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:hary:r-x /mnt</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:natasha:rwx /mnt</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºæµ‹è¯•æ•°æ®"><a href="#åˆ›å»ºæµ‹è¯•æ•°æ®" class="headerlink" title="åˆ›å»ºæµ‹è¯•æ•°æ®"></a>åˆ›å»ºæµ‹è¯•æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mnt]<span class="comment"># echo "123qwe" &gt; 123qwe</span></span><br><span class="line">[root@server222 mnt]<span class="comment"># ls</span></span><br><span class="line">123qwe  cdrom</span><br><span class="line">[root@server222 mnt]<span class="comment"># cat 123qwe</span></span><br><span class="line">123qwe</span><br></pre></td></tr></table></figure>

<h3 id="client111åŒæ­¥æ•°æ®"><a href="#client111åŒæ­¥æ•°æ®" class="headerlink" title="client111åŒæ­¥æ•°æ®"></a>client111åŒæ­¥æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># mkdir /root/mnt</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cd /root/mnt/</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># rsync -azP --delete natasha@192.168.176.222:/mnt/ /root/mnt</span></span><br><span class="line">natasha@192.168.176.222<span class="string">'s password:</span></span><br><span class="line"><span class="string">..........</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sent 74971 bytes  received 4361814808 bytes  10918372.41 bytes/sec</span></span><br><span class="line"><span class="string">total size is 4515096809  speedup is 1.04</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ls</span></span><br><span class="line"><span class="string">123qwe  cdrom</span></span><br><span class="line"><span class="string">[root@client111 mnt]# cat 123qwe</span></span><br><span class="line"><span class="string">123qwe</span></span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜2ï¼š"><a href="#å®æˆ˜2ï¼š" class="headerlink" title="å®æˆ˜2ï¼š"></a>å®æˆ˜2ï¼š</h2><blockquote>
<p>ä½¿ç”¨ssh å¯†é’¥å®ç°æ— äº¤äºå¤‡ä»½ã€‚åšæˆè„šæœ¬ï¼Œå°†server222ä¸Šçš„æ•°æ®ï¼Œå®šæœŸå¤‡ä»½åˆ°client111ä¸Šã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh-keygen</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Enter same passphrase again:<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:SsPRWpKt+9+YLYH4IcfSGFsH/rKlKFxb3QzwqC/DdMs root@client111</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|       +o        |</span></span><br><span class="line"><span class="string">|      +.+=       |</span></span><br><span class="line"><span class="string">|     ..*+ +      |</span></span><br><span class="line"><span class="string">|      *XS= +     |</span></span><br><span class="line"><span class="string">|     .X+X = o    |</span></span><br><span class="line"><span class="string">|   . +o% B .     |</span></span><br><span class="line"><span class="string">|    o *.E .=     |</span></span><br><span class="line"><span class="string">|     . o..+.o    |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh copy id hary@192.168.176.222</span></span><br><span class="line"><span class="string">ssh: Could not resolve hostname copy: Name or service not known</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh-copy-id hary@192.168.176.222</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">hary@192.168.176.222'</span>s password:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'hary@192.168.176.222'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•haryç™»é™†server222</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh hary@192.168.176.222</span></span><br><span class="line">Last failed login: Sat Aug 24 00:59:25 CST 2019 from 192.168.176.111 on ssh:notty</span><br><span class="line">There were 2 failed login attempts since the last successful login.</span><br><span class="line">[hary@server222 ~]$</span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™è„šæœ¬"><a href="#ç¼–å†™è„šæœ¬" class="headerlink" title="ç¼–å†™è„šæœ¬"></a>ç¼–å†™è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># vim /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># cat /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">rsync -az --delete hary@192.168.176.222:/mnt/ /root/mnt/</span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•è„šæœ¬"><a href="#æµ‹è¯•è„šæœ¬" class="headerlink" title="æµ‹è¯•è„šæœ¬"></a>æµ‹è¯•è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># chmod +x /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># rm -rf /root/mnt/*</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># ls</span></span><br><span class="line">[root@client111 mnt]<span class="comment">#</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># /root/rsync-ssh-get-mnt.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="å®šæœŸå¤‡ä»½"><a href="#å®šæœŸå¤‡ä»½" class="headerlink" title="å®šæœŸå¤‡ä»½"></a>å®šæœŸå¤‡ä»½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># crontab -e</span></span><br><span class="line">no crontab <span class="keyword">for</span> root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@client111 ~]<span class="comment"># crontab -l</span></span><br><span class="line">01 3 * * * /root/rsync-ssh-get-mnt.sh &amp;</span><br><span class="line"><span class="comment"># æ¯å¤©çš„å‡Œæ™¨3ç‚¹10åˆ†æ‰§è¡Œè„šæœ¬</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/2.rsync/" data-id="ck627jzuz001ku4u62e1p5ya6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿ç»´/">linuxè¿ç»´</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/29/2.åŸºç¡€linuxå‘½ä»¤/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          LinuxåŸºç¡€å‘½ä»¤
        
      </div>
    </a>
  
  
    <a href="/2019/08/29/2.python--è®¡ç®—æœºæ•°æ®å­˜å‚¨ä¸è¿›åˆ¶/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">python è®¡ç®—æœºæ•°æ®å­˜å‚¨ä¸è¿›åˆ¶</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linuxè¿ç»´/">linuxè¿ç»´</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linuxè¿ç»´/">linuxè¿ç»´</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/linuxåŸºç¡€/" style="font-size: 20px;">linuxåŸºç¡€</a> <a href="/tags/linuxè¿ç»´/" style="font-size: 12.5px;">linuxè¿ç»´</a> <a href="/tags/linuxè¿›é˜¶/" style="font-size: 17.5px;">linuxè¿›é˜¶</a> <a href="/tags/python/" style="font-size: 15px;">python</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/29/gitç‰ˆæœ¬æ§åˆ¶è¯¦è§£æ‰‹å†Œ/">ã€ŠGitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è¯¦è§£æ‰‹å†Œã€‹</a>
          </li>
        
          <li>
            <a href="/2019/09/23/9.pythonå†…ç½®å‡½æ•°/">pythonå†…ç½®å‡½æ•°</a>
          </li>
        
          <li>
            <a href="/2019/09/22/5.PXEæ— äººå€¼å®ˆå®‰è£…æœåŠ¡å™¨/">PXEæ— äººå€¼å®ˆå®‰è£…æœåŠ¡å™¨</a>
          </li>
        
          <li>
            <a href="/2019/08/31/4.LAMP/">LAMP</a>
          </li>
        
          <li>
            <a href="/2019/08/29/16.linux--RHCSAæ¨¡æ‹Ÿ/">RHCSAå¤ä¹ </a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Li Jie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>