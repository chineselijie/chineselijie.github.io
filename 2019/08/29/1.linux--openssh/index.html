<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    openssh |  Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

<link rel="alternate" href="/atom.xml" title="Li Jie's blog" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-1.linux--openssh" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  openssh
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.linux--openssh/" class="article-date">
  <time datetime="2019-08-29T15:44:18.470Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">2.8kå­—</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">12åˆ†é’Ÿ</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="openssh"><a href="#openssh" class="headerlink" title="openssh"></a>openssh</h2><p>[TOC]</p>
<h2 id="ä½¿ç”¨sshè®¿é—®è¿œç¨‹å‘½ä»¤è¡Œ"><a href="#ä½¿ç”¨sshè®¿é—®è¿œç¨‹å‘½ä»¤è¡Œ" class="headerlink" title="ä½¿ç”¨sshè®¿é—®è¿œç¨‹å‘½ä»¤è¡Œ"></a>ä½¿ç”¨sshè®¿é—®è¿œç¨‹å‘½ä»¤è¡Œ</h2><h3 id="openssh-ç®€ä»‹"><a href="#openssh-ç®€ä»‹" class="headerlink" title="openssh ç®€ä»‹"></a>openssh ç®€ä»‹</h3><p>OpenSSH æ˜¯ <a href="http://baike.baidu.com/view/16184.htm" target="_blank" rel="noopener">SSH</a> ï¼ˆSecure <a href="http://baike.baidu.com/view/849.htm" target="_blank" rel="noopener">SHell</a>ï¼‰ åè®®çš„å…è´¹å¼€æºå®ç°ã€‚SSHåè®®æ—å¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æ§åˆ¶ï¼Œ æˆ–åœ¨è®¡ç®—æœºä¹‹é—´ä¼ é€æ–‡ä»¶ã€‚è€Œå®ç°æ­¤åŠŸèƒ½çš„ä¼ ç»Ÿæ–¹å¼ï¼Œå¦‚telnet(<a href="http://baike.baidu.com/view/190233.htm" target="_blank" rel="noopener">ç»ˆç«¯ä»¿çœŸ</a>åè®®)ã€ rcp ftpã€ rloginã€rshéƒ½æ˜¯æä¸ºä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨æ˜æ–‡ä¼ é€å¯†ç ã€‚OpenSSHæä¾›äº†æœåŠ¡ç«¯åå°ç¨‹åºå’Œå®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨æ¥åŠ å¯†è¿œç¨‹æ§ä»¶å’Œæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®ï¼Œå¹¶ç”±æ­¤æ¥ä»£æ›¿åŸæ¥çš„ç±»ä¼¼æœåŠ¡ã€‚</p>
<p>å¸¸è§çš„è¿œç¨‹ç™»é™†å·¥å…·æœ‰ï¼š</p>
<ul>
<li>telnet</li>
<li>ssh</li>
<li>dropbear</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">telnet è¿œç¨‹ç™»é™†åè®®ï¼š23/TCP</span><br><span class="line">	è®¤è¯æ˜æ–‡</span><br><span class="line">	æ•°æ®ä¼ è¾“æ˜æ–‡</span><br><span class="line">	</span><br><span class="line">ssh  å…¨ç§°:secure shell æ˜¯åº”ç”¨å±‚åè®®ï¼Œ22/tcp</span><br><span class="line">	é€šè¿‡è®¤è¯è¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œä¸»æœºè®¤è¯</span><br><span class="line">	ç”¨æˆ·è®¤è¯è¿‡ç¨‹åŠ å¯†</span><br><span class="line">	æ•°æ®ä¼ è¾“è¿‡ç¨‹åŠ å¯†</span><br><span class="line"></span><br><span class="line">dropbear ä¸ºåµŒå…¥å¼ç³»ç»Ÿä¸“ç”¨çš„sshæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å·¥å…·</span><br></pre></td></tr></table></figure>

<h3 id="sshç‰ˆæœ¬"><a href="#sshç‰ˆæœ¬" class="headerlink" title="sshç‰ˆæœ¬"></a>sshç‰ˆæœ¬</h3><p>opensshæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸ºv1å’Œv2ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1ç‰ˆæœ¬ï¼šåŸºäºcrc-32åšmacï¼Œä½†æ²¡æœ‰å…¶é˜²èŒƒä¸­é—´äººçš„æ”»å‡»</span><br><span class="line"><span class="comment"># ä¸­é—´äººå«ä¹‰è§£é‡Šï¼šåœ¨ä¸»æœºä»¥åŠç½‘å…³ä¸­é—´ï¼Œå‘Šè¯‰ä¸»æœºæˆ‘æ˜¯ç½‘å…³ï¼Œå´åˆå‘Šè¯‰ç½‘å…³æˆ‘æ˜¯ä¸»æœº</span></span><br><span class="line">v2ç‰ˆæœ¬ï¼šåŒæ–¹ä¸»æœºåè®®é€‰æ‹©å®‰å…¨çš„macæ–¹å¼ã€‚åŸºäºDHç®—æ³•åšå¯†é’¥äº¤æ¢ï¼ŒåŸºäºRSAæˆ–è€…DSAç®—æ³•å®ç°èº«ä»½è®¤è¯</span><br></pre></td></tr></table></figure>

<h3 id="sshè®¤è¯æ–¹å¼"><a href="#sshè®¤è¯æ–¹å¼" class="headerlink" title="sshè®¤è¯æ–¹å¼"></a>sshè®¤è¯æ–¹å¼</h3><p>opensshæœ‰ä¸¤ç§è®¤è¯æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>åŸºäºå£ä»¤è®¤è¯</li>
<li>åŸºäºå¯†é’¥è®¤è¯</li>
</ul>
<h3 id="opensshçš„å·¥ä½œæ¨¡å¼"><a href="#opensshçš„å·¥ä½œæ¨¡å¼" class="headerlink" title="opensshçš„å·¥ä½œæ¨¡å¼"></a>opensshçš„å·¥ä½œæ¨¡å¼</h3><p>opensshæ˜¯åŸºäºC/Sæ¶æ„å·¥ä½œçš„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C/Sæ¶æ„</span><br><span class="line"><span class="comment"># Client/Serveræ¶æ„ï¼Œå³å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ã€‚</span></span><br><span class="line">B/Sç»“æ„</span><br><span class="line"><span class="comment"># å³Browser/Server (æµè§ˆå™¨/æœåŠ¡å™¨) ç»“æ„</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡å™¨ç«¯   sshd  é…ç½®æ–‡ä»¶åœ¨/etc/ssh/sshd_config</span><br><span class="line">å®¢æˆ·ç«¯     ssh   é…ç½®æ–‡ä»¶åœ¨/etc/ssh/ssh_config</span><br><span class="line">	ssh-keygen  å¯†é’¥ç”Ÿæˆå™¨</span><br><span class="line">    ssh-copy-id å°†å…¬é’¥ä¼ è¾“è‡³è¿œç¨‹æœåŠ¡å™¨</span><br><span class="line">    scp         è·¨ä¸»æœºå®‰å…¨å¤åˆ¶å·¥å…·</span><br></pre></td></tr></table></figure>

<h3 id="secure-shell-ç¤ºä¾‹"><a href="#secure-shell-ç¤ºä¾‹" class="headerlink" title="secure shell ç¤ºä¾‹"></a>secure shell ç¤ºä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">The authenticity of host <span class="string">'192.168.107.144 (192.168.107.144)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:ckD0Gi2156g1NjAR4mGFYX4gYlcI4IH4VWYHuz9bDSg.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:1b:f5:48:ce:e5:18:d2:fe:be:55:46:69:d6:67:06:4c.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>192.168.107.144<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.107.144'</span>s password:</span><br><span class="line">Last login: Mon May 20 03:21:23 2019 from 192.168.107.1</span><br><span class="line">[root@server ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//ä»¥å½“å‰ç”¨æˆ·èº«ä»½åˆ›å»ºè¿œç¨‹äº¤äº’å¼shellï¼Œç„¶ååœ¨ç»“æŸæ—¶ä½¿ç”¨<span class="built_in">exit</span>å‘½ä»¤è¿”å›åˆ°ä¹‹å‰çš„shell</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh 192.168.107.144</span></span><br><span class="line">root@192.168.107.144<span class="string">'s password:</span></span><br><span class="line"><span class="string">Last login: Mon May 20 03:23:00 2019 from 192.168.107.140</span></span><br><span class="line"><span class="string">[root@server ~]# exit</span></span><br><span class="line"><span class="string">ç™»å‡º</span></span><br><span class="line"><span class="string">Connection to 192.168.107.144 closed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//ä»¥è¿œç¨‹ç”¨æˆ·èº«ä»½ï¼ˆremoteuserï¼‰åœ¨è¿œç¨‹ä¸»æœºï¼ˆremotehostï¼‰ä¸Šé€šè¿‡å°†è¾“å‡ºè¿”å›åˆ°æœ¬åœ°æ˜¾ç¤ºå™¨çš„æ–¹å¼æ¥æ‰§è¡Œå•ä¸€å‘½ä»¤</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ssh zhou@192.168.107.144 '</span>/usr/bin/cat /etc/hostname<span class="string">'</span></span><br><span class="line"><span class="string">zhou@192.168.107.144'</span>s password:</span><br><span class="line">144</span><br><span class="line"></span><br><span class="line">/wå‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰ç™»å½•åˆ°è®¡ç®—æœºçš„ç”¨æˆ·åˆ—è¡¨ã€‚è¿™å¯¹äºæ˜¾ç¤ºå“ªäº›ç”¨æˆ·ä½¿ç”¨sshä»å“ªäº›è¿œç¨‹ä½ç½®è¿›è¡Œäº†ç™»å½•ä»¥åŠæ‰§è¡Œäº†ä½•ç§æ“ä½œç­‰å†…å®¹ç‰¹åˆ«æœ‰ç”¨</span><br><span class="line">[root@server ~]<span class="comment"># w</span></span><br><span class="line"> 03:42:04 up  3:08,  3 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     :0       :0               00:34   ?xdm?  35.24s  0.13s /usr/libexec/gn</span><br><span class="line">root     pts/0    192.168.107.1    03:21    4.00s  0.03s  0.00s w</span><br><span class="line">zhou     pts/1    192.168.107.140  03:42    2.00s  0.02s  0.02s -bash</span><br></pre></td></tr></table></figure>

<h3 id="sshä¸»æœºå¯†é’¥"><a href="#sshä¸»æœºå¯†é’¥" class="headerlink" title="sshä¸»æœºå¯†é’¥"></a>sshä¸»æœºå¯†é’¥</h3><p>â€‹    sshé€šè¿‡å…¬é’¥åŠ å¯†çš„æ–¹å¼ä¿æŒé€šä¿¡çš„å®‰å…¨ï¼Œå½“æŸä¸€sshå®¢æˆ·ç«¯è¿æ¥åˆ°sshæœåŠ¡å™¨æ—¶ï¼Œåœ¨è¯¥å®¢æˆ·ç«¯ç™»å½•ä¹‹å‰ï¼ŒæœåŠ¡å™¨ä¼šå‘å…¶å‘é€å…¬é’¥å‰¯æœ¬ã€‚è¿™å¯ç”¨äºä¸ºé€šä¿¡æ¸ é“è®¾ç½®å®‰å…¨åŠ å¯†ï¼Œå¹¶å¯éªŒè¯å®¢æˆ·ç«¯çš„æœåŠ¡å™¨ã€‚</p>
<p>â€‹    å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>ssh</code>è¿æ¥åˆ°ç‰¹å®šæœåŠ¡å™¨æ—¶ï¼Œsshå‘½ä»¤å¯åœ¨ç”¨æˆ·çš„<del>/.ssh/known_hostsæ–‡ä»¶ä¸­å­˜å‚¨è¯¥æœåŠ¡å™¨çš„å…¬é’¥ã€‚åœ¨æ­¤ä¹‹åæ¯å½“ç”¨æˆ·è¿›è¡Œè¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šé€šè¿‡å¯¹æ¯”</del>/.ssh/known_hostsæ–‡ä»¶ä¸­çš„æœåŠ¡å™¨æ¡ç›®å’ŒæœåŠ¡å™¨å‘é€çš„å…¬é’¥ï¼Œç¡®ä¿ä»æœåŠ¡å™¨è·å¾—ç›¸åŒçš„å…¬é’¥ã€‚å¦‚æœå…¬é’¥ä¸åŒ¹é…ï¼Œå®¢æˆ·ç«¯ä¼šå‡å®šç½‘ç»œé€šä¿¡å·²é­åŠ«æŒæˆ–æœåŠ¡å™¨å·²è¢«å…¥ä¾µï¼Œå¹¶ä¸”ä¸­æ–­è¿æ¥ã€‚</p>
<p>â€‹    è¿™æ„å‘³ç€ï¼Œå¦‚æœæœåŠ¡å™¨çš„å…¬é’¥å‘ç”Ÿæ›´æ”¹ï¼ˆç”±äºç¡¬ç›˜å‡ºç°æ•…éšœå¯¼è‡´å…¬é’¥ä¸¢å¤±ï¼Œæˆ–è€…å‡ºäºæŸäº›æ­£å½“ç†ç”±æ›¿æ¢å…¬é’¥ï¼‰ï¼Œç”¨æˆ·åˆ™éœ€è¦æ›´æ–°å…¶~/.ssh/known_hostsæ–‡ä»¶å¹¶åˆ é™¤æ—§çš„æ¡ç›®æ‰èƒ½å¤Ÿè¿›è¡Œç™»å½•ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//ä¸»æœºIDå­˜å‚¨åœ¨æœ¬åœ°å®¢æˆ·ç«¯ç³»ç»Ÿä¸Šçš„ /root/.ssh/known_hosts ä¸­</span><br><span class="line">[root@clirnt ~]<span class="comment"># cat .ssh/known_hosts</span></span><br><span class="line">192.168.107.144 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBNpzCsuRZmBI8gq7WVjQNzuVlNqukUQj9i62JhdGmBK9Tm38P+MXMJRfeRz2q2KpP5Klbdiwysxei6byi3KXCC8=</span><br><span class="line">192.168.107.140 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBB1oHAfCZcxVYWUygQ2PaN2NiVKs2+W/pT4xXUKXDK2etvkj1qEETkZGgVo4kTxQBmujhfCcdHl7/vfL6qVR7P4=</span><br><span class="line"></span><br><span class="line">//ä¸»æœºå¯†é’¥å­˜å‚¨åœ¨SSHæœåŠ¡å™¨ä¸Šçš„ /etc/ssh/ssh_host_key* ä¸­</span><br><span class="line">[root@server ~]<span class="comment"># ls /etc/ssh/*key*</span></span><br><span class="line">/etc/ssh/ssh_host_ecdsa_key      /etc/ssh/ssh_host_ed25519_key.pub</span><br><span class="line">/etc/ssh/ssh_host_ecdsa_key.pub  /etc/ssh/ssh_host_rsa_key</span><br><span class="line">/etc/ssh/ssh_host_ed25519_key    /etc/ssh/ssh_host_rsa_key.pub</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®åŸºäºsshå¯†é’¥çš„èº«ä»½éªŒè¯"><a href="#é…ç½®åŸºäºsshå¯†é’¥çš„èº«ä»½éªŒè¯" class="headerlink" title="é…ç½®åŸºäºsshå¯†é’¥çš„èº«ä»½éªŒè¯"></a>é…ç½®åŸºäºsshå¯†é’¥çš„èº«ä»½éªŒè¯</h2><p>â€‹    ç”¨æˆ·å¯é€šè¿‡ä½¿ç”¨å…¬é’¥èº«ä»½éªŒè¯è¿›è¡Œsshç™»å½•èº«ä»½éªŒè¯ã€‚sshå…è®¸ç”¨æˆ·ä½¿ç”¨ç§é’¥-å…¬é’¥æ–¹æ¡ˆè¿›è¡Œèº«ä»½éªŒè¯ã€‚è¿™æ„å‘³ç€å°†ç”Ÿæˆç§é’¥å’Œå…¬é’¥è¿™ä¸¤ä¸ªå¯†é’¥ã€‚ç§é’¥æ–‡ä»¶ç”¨ä½œèº«ä»½éªŒè¯å‡­æ®ï¼Œåƒå¯†ç ä¸€æ ·ï¼Œå¿…é¡»å¦¥å–„ä¿ç®¡ã€‚å…¬é’¥å¤åˆ¶åˆ°ç”¨æˆ·å¸Œæœ›ç™»å½•çš„ç³»ç»Ÿï¼Œç”¨äºéªŒè¯ç§é’¥ã€‚å…¬é’¥å¹¶ä¸éœ€è¦ä¿å¯†ã€‚æ‹¥æœ‰å…¬é’¥çš„sshæœåŠ¡å™¨å¯ä»¥å‘å¸ƒä»…æŒæœ‰æ‚¨ç§é’¥çš„ç³»ç»Ÿæ‰å¯è§£ç­”çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå¯ä»¥æ ¹æ®æ‰€æŒæœ‰çš„å¯†é’¥è¿›è¡ŒéªŒè¯ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå°±ä¸å¿…åœ¨æ¯æ¬¡è®¿é—®ç³»ç»Ÿæ—¶é”®å…¥å¯†ç ï¼Œä½†å®‰å…¨æ€§ä»èƒ½å¾—åˆ°ä¿è¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ssh-keygenå‘½ä»¤ç”Ÿæˆå¯†ç ã€‚å°†ä¼šç”Ÿæˆç§é’¥~/.ssh/id_rsaå’Œå…¬é’¥~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p>ç”Ÿæˆå¯†é’¥æ—¶ï¼Œç³»ç»Ÿå°†æä¾›æŒ‡å®šå¯†ç çš„é€‰é¡¹ï¼Œåœ¨è®¿é—®ç§é’¥æ—¶å¿…é¡»æä¾›è¯¥å¯†ç ã€‚å¦‚æœç§é’¥è¢«å·ï¼Œé™¤é¢å‘è€…ä¹‹å¤–çš„å…¶ä»–ä»»ä½•äººå¾ˆéš¾ä½¿ç”¨è¯¥ç§é’¥ï¼Œå› ä¸ºå·²ä½¿ç”¨å¯†ç å¯¹å…¶è¿›è¡Œä¿æŠ¤ã€‚è¿™æ ·ï¼Œåœ¨æ”»å‡»è€…ç ´è§£å¹¶ä½¿ç”¨ç§é’¥å‰ï¼Œä¼šæœ‰è¶³å¤Ÿçš„æ—¶é—´ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹å¹¶åˆ é™¤æ‰€æœ‰æ¶‰åŠæ—§å¯†é’¥çš„å†…å®¹ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿæˆsshå¯†é’¥åï¼Œå¯†é’¥å°†é»˜è®¤å­˜å‚¨åœ¨å®¶ç›®å½•ä¸‹çš„.ssh/ç›®å½•ä¸­ã€‚ç§é’¥å’Œå…¬é’¥çš„æƒé™å°±åˆ†åˆ«ä¸º600å’Œ644ã€‚.sshç›®å½•æƒé™å¿…é¡»æ˜¯700</span><br></pre></td></tr></table></figure>

<p>åœ¨å¯ä»¥ä½¿ç”¨åŸºäºå¯†é’¥çš„èº«ä»½éªŒè¯å‰ï¼Œéœ€è¦å°†å…¬é’¥å¤åˆ¶åˆ°ç›®æ ‡ç³»ç»Ÿä¸Šã€‚å¯ä»¥ä½¿ç”¨<code>ssh-copy-id</code>å‘½ä»¤å®Œæˆè¿™ä¸€æ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]<span class="comment"># ssh-copy-id root@192.168.107.144</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">"/root/.ssh/id_rsa.pub"</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line">root@192.168.107.144<span class="string">'s password: </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Number of key(s) added: 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Now try logging into the machine, with:   "ssh '</span>root@192.168.107.144<span class="string">'"</span></span><br><span class="line"><span class="string">and check to make sure that only the key(s) you wanted were added.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨é€šè¿‡ssh-copy-idå°†å¯†é’¥å¤åˆ¶åˆ°å¦ä¸€ç³»ç»Ÿæ—¶ï¼Œå®ƒé»˜è®¤å¤åˆ¶~/.ssh/id_rsa.pubæ–‡ä»¶</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">//SSHå¯†é’¥æ¼”ç¤º</span><br><span class="line">//ä½¿ç”¨ ssh-keygen åˆ›å»ºå…¬é’¥-ç§é’¥å¯¹</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-keygen -t rsa</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line">/root/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:L382dyk3r5TizdnGKXJfikf3buKfzCbnTXe5Ufz5vqM root@140</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|               . |</span></span><br><span class="line"><span class="string">|        S       o|</span></span><br><span class="line"><span class="string">|         .    ..*|</span></span><br><span class="line"><span class="string">|        . . ..o*X|</span></span><br><span class="line"><span class="string">|         o o+@*&amp;/|</span></span><br><span class="line"><span class="string">|          .o=E^^&amp;|</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//ä½¿ç”¨ ssh-copy-id å°†å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ç³»ç»Ÿä¸Šçš„æ­£ç¡®ä½ç½®</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ls .ssh/</span></span><br><span class="line"><span class="string">id_rsa  id_rsa.pub  known_hosts</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.107.144</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">root@192.168.107.144'</span>s password: </span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'root@192.168.107.144'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨ ssh å‘½ä»¤æ— å‘½ä»¤ç™»å½•è¿œç¨‹ä¸»æœº</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 06:30:57 2019 from 192.168.107.1</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨ scp å‘½ä»¤ä¼ é€æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº</span><br><span class="line">[root@clirnt ~]<span class="comment"># scp 1 root@192.168.107.144:/root</span></span><br><span class="line">1                                                100%   18    15.4KB/s   00:00    </span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 07:06:44 2019 from 192.168.107.140</span><br><span class="line">[root@server ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">anaconda-ks.cfg  å…¬å…±                  è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨ scp å‘½ä»¤ä»è¿œç¨‹ä¸»æœºä¸Šä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°</span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  å…¬å…±  è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br><span class="line">anaconda-ks.cfg  root@192.168.107.144  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">[root@clirnt ~]<span class="comment"># rm -f 1</span></span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       root@192.168.107.144  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">initial-setup-ks.cfg  å…¬å…±                  è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br><span class="line">[root@clirnt ~]<span class="comment"># scp root@192.168.107.144:/root/1 /root</span></span><br><span class="line">1                                                100%   18    22.3KB/s   00:00    </span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  å…¬å…±  è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br><span class="line">anaconda-ks.cfg  root@192.168.107.144  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line"></span><br><span class="line">//scpå‘½ä»¤å¸¸ç”¨é€‰é¡¹</span><br><span class="line">    -r      //é€’å½’å¤åˆ¶</span><br><span class="line">    -p      //ä¿æŒæƒé™</span><br><span class="line">    -P      //ç«¯å£</span><br><span class="line">    -q      //é™é»˜æ¨¡å¼</span><br><span class="line">    -a      //å…¨éƒ¨å¤åˆ¶</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰sshæœåŠ¡é…ç½®"><a href="#è‡ªå®šä¹‰sshæœåŠ¡é…ç½®" class="headerlink" title="è‡ªå®šä¹‰sshæœåŠ¡é…ç½®"></a>è‡ªå®šä¹‰sshæœåŠ¡é…ç½®</h2><p>è™½ç„¶<code>OpenSSH</code>æœåŠ¡å™¨é€šå¸¸æ— éœ€ä¿®æ”¹ï¼Œä½†ä¼šæä¾›å…¶ä»–å®‰å…¨æªæ–½ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶<code>/etc/ssh/sshd_config</code>ä¸­ä¿®æ”¹<code>OpenSSH</code>æœåŠ¡å™¨çš„å„ä¸ªæ–¹é¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin &#123;yes|no&#125;    //æ˜¯å¦å…è®¸rootç”¨æˆ·è¿œç¨‹ç™»å½•ç³»ç»Ÿ</span><br><span class="line">PermitRootLogin without-password    //ä»…å…è®¸rootç”¨æˆ·åŸºäºå¯†é’¥æ–¹å¼è¿œç¨‹ç™»å½•</span><br><span class="line">PasswordAuthentication &#123;yes|no&#125;     //æ˜¯å¦å¯ç”¨å¯†ç èº«ä»½éªŒè¯ï¼Œé»˜è®¤å¼€å¯</span><br></pre></td></tr></table></figure>

<h2 id="sshå®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#sshå®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="sshå®‰å…¨æ³¨æ„äº‹é¡¹"></a>sshå®‰å…¨æ³¨æ„äº‹é¡¹</h2><ul>
<li>å¯†ç åº”è¯¥ç»å¸¸æ¢ä¸”è¶³å¤Ÿå¤æ‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]#  tr -dc A-Za-z0-9_ &lt; /dev/urandom | head -c 30 |xargs   //ç”Ÿæˆ30ä½çš„å¯†ç </span><br><span class="line">LYH9cbirdT6E_hbColMFjZNf9Kd6If</span><br><span class="line"></span><br><span class="line">[root@clirnt ~]# openssl rand 20 -base64</span><br><span class="line">Di9ry+dyV40xVvBHirsc3XpBOzg=    //ç”Ÿæˆ20ä½éšæœºå¯†ç </span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨éé»˜è®¤ç«¯å£</li>
<li>é™åˆ¶ç™»å½•å®¢æˆ·ç«¯åœ°å€</li>
<li>ä»…ç›‘å¬ç‰¹å®šçš„IPåœ°å€</li>
<li>ç¦æ­¢ç®¡ç†å‘˜ç›´æ¥ç™»å½•</li>
<li>ä»…å…è®¸æœ‰é™åˆ¶ç”¨æˆ·ç™»å½•<ul>
<li>AllowUsers</li>
<li>AllowGroups</li>
</ul>
</li>
<li>ä½¿ç”¨åŸºäºå¯†é’¥çš„è®¤è¯</li>
<li>ç¦æ­¢ä½¿ç”¨ç©ºå¯†ç </li>
<li>ç¦æ­¢ä½¿ç”¨SSHv1ç‰ˆæœ¬</li>
<li>è®¾å®šç©ºé—²ä¼šè¯è¶…æ—¶æ—¶é•¿</li>
<li>åˆ©ç”¨é˜²ç«å¢™è®¾ç½®sshè®¿é—®ç­–ç•¥</li>
<li>é™åˆ¶sshçš„è®¿é—®é¢‘åº¦å’Œå¹¶å‘åœ¨çº¿æ•°</li>
<li>åšå¥½æ—¥å¿—çš„å¤‡ä»½ï¼Œç»å¸¸åˆ†æï¼ˆé›†ä¸­äºæŸå°æœåŠ¡å™¨ï¼‰</li>
</ul>
<h2 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h2><p>1.è¯´æ˜å¯†é’¥è®¤è¯çš„è¿‡ç¨‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šæœ¬åœ°åˆ›å»ºå¯†é’¥å¯¹</span><br><span class="line">ç¬¬äºŒæ­¥ï¼šæœ¬åœ°å°†å…¬é’¥å‘åˆ°è¿œç«¯</span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œå…ç™»é™†æµ‹è¯•</span><br></pre></td></tr></table></figure>

<p>2.æ‰‹åŠ¨é…ç½®å¯†é’¥è®¤è¯ç™»å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨ ssh-keygen åˆ›å»ºå…¬é’¥-ç§é’¥å¯¹</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-keygen -t rsa</span></span><br><span class="line">            <span class="comment"># [å›è½¦ä¸‰æ¬¡ ç›´è‡³å‡ºç°RSA 2048]</span></span><br><span class="line">//ä½¿ç”¨ ssh-copy-id å°†å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ç³»ç»Ÿä¸Šçš„æ­£ç¡®ä½ç½®</span><br><span class="line">[root@clirnt ~]<span class="comment"># ls .ssh/</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.107.144</span></span><br><span class="line">			<span class="comment">#[é€‰æ‹©yesä¹‹åè¾“å…¥å¯†ç ]</span></span><br><span class="line">//ä½¿ç”¨ ssh å‘½ä»¤æ— å‘½ä»¤ç™»å½•è¿œç¨‹ä¸»æœº</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 06:30:57 2019 from 192.168.107.1</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
      <div id="reward-btn">
        æ‰“èµ
      </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.linux--openssh/" data-id="ck6akysei000y8wu6w3tsytj0"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2019/08/29/1.linux--åˆæ­¥ç†Ÿæ‚‰RHEL 8/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            åˆæ­¥ç†Ÿæ‚‰RHEL 8
          
        </div>
      </a>
    
    
      <a href="/2019/08/29/1.linux--LNMP/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">LNMP</div>
      </a>
    
  </nav>


  

  
  
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: 'ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>å–œæ¬¢å°±æ‰“èµå§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 250,
    loop: true,
    backSpeed: 150,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>



<script src="/js/tocbot.min.js"></script>
<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>