<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>shell脚本基础 | Li Jie&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] shell脚本基础变量详解什么是变量变量即是可以变化的量 变量的作用 保存表达式运算的结果至内存，方便复用或更改 若无变">
<meta name="keywords" content="linux进阶">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本基础">
<meta property="og:url" content="https://github.com/chineselijie/2019/08/29/8.linux--shell脚本基础/index.html">
<meta property="og:site_name" content="Li Jie&#39;s blog">
<meta property="og:description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] shell脚本基础变量详解什么是变量变量即是可以变化的量 变量的作用 保存表达式运算的结果至内存，方便复用或更改 若无变">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-22T12:20:22.235Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shell脚本基础">
<meta name="twitter:description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] shell脚本基础变量详解什么是变量变量即是可以变化的量 变量的作用 保存表达式运算的结果至内存，方便复用或更改 若无变">
  
    <link rel="alternate" href="/atom.xml" title="Li Jie&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li Jie&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/chineselijie"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-8.linux--shell脚本基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/29/8.linux--shell脚本基础/" class="article-date">
  <time datetime="2019-08-29T15:44:18.563Z" itemprop="datePublished">2019-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux进阶/">linux进阶</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      shell脚本基础
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="shell脚本基础"><a href="#shell脚本基础" class="headerlink" title="shell脚本基础"></a>shell脚本基础</h1><h2 id="变量详解"><a href="#变量详解" class="headerlink" title="变量详解"></a>变量详解</h2><h3 id="什么是变量"><a href="#什么是变量" class="headerlink" title="什么是变量"></a>什么是变量</h3><p>变量即是可以变化的量</p>
<h3 id="变量的作用"><a href="#变量的作用" class="headerlink" title="变量的作用"></a>变量的作用</h3><ul>
<li>保存表达式运算的结果至内存，方便复用或更改</li>
<li>若无变量而无需复用表达式运算的结果只能重新运算，耗时较长</li>
<li>可以把变量理解为一个存储信息的容器</li>
</ul>
<h3 id="变量取名以及注意事项"><a href="#变量取名以及注意事项" class="headerlink" title="变量取名以及注意事项"></a>变量取名以及注意事项</h3><ul>
<li><p>变量名应该做到见名知义</p>
</li>
<li><p>变量名区分大小写</p>
</li>
<li><p>变量名中有多个单词时有两种方式表示</p>
<ul>
<li>单词间使用下划线分隔（官方推荐）</li>
<li>首单词小写，后面单词的首字母大写</li>
</ul>
</li>
<li><p>变量名只能是由下划线、数字、字母组成，不能是空格或者特殊字符（#？&lt;.,$!&amp;*^~）</p>
</li>
<li><p>不能以中文做变量名</p>
</li>
<li><p>不能是保留字</p>
<ul>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">break</span>  <span class="built_in">continue</span>  <span class="keyword">elif</span>  <span class="keyword">else</span>  <span class="keyword">for</span>  global  <span class="keyword">if</span>  <span class="keyword">in</span>  is   not  or   <span class="keyword">while</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h3><ul>
<li>字符型</li>
<li>数值型<ul>
<li>整数</li>
<li>浮点数</li>
</ul>
</li>
<li>布尔型</li>
</ul>
<h3 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h3><ul>
<li>设置变量</li>
<li>引用变量</li>
<li>撤销变量</li>
</ul>
<blockquote>
<p>简述三种引号的用法</p>
<p>`反引号 用于命令替换 反引号里面的命令取出来是它们的值</p>
<p> ‘ 单引号 取本身，不完成命令替换</p>
<p>“ 双引号 实现命令替换，支持变量</p>
</blockquote>
<blockquote>
<p>切记单引号取出来是本身，</p>
<p>反引号和双引号取出来是他们的值</p>
</blockquote>
<h3 id="bash变量类型"><a href="#bash变量类型" class="headerlink" title="bash变量类型"></a>bash变量类型</h3><ul>
<li>环境变量</li>
<li>本地变量（局部变量）</li>
<li>位置变量</li>
<li>特殊变量（为bash内置，主要用来保存某些特殊数据的变量，也称之为系统变量）</li>
</ul>
<blockquote>
<p>下面介绍两种取除变量以及不取出变量的用法</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用法一：取出变量的值</span></span><br><span class="line">[root@140 ~]<span class="comment"># a=5</span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; DOF</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; DOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line">5</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用法二：不取除变量的值 </span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; 'EOF'</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; EOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line"><span class="variable">$a</span></span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></table></figure>

<h4 id="本地变量"><a href="#本地变量" class="headerlink" title="本地变量"></a>本地变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地变量，作为当前shell的进程，对当前shell以外的其他shell进程，包括当前shell的父shell，子shell进程均无效</span></span><br><span class="line">VAR_NAME=VALUE(值)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 局部变量，作为当前代码段，多用于函数</span></span><br><span class="line"><span class="built_in">local</span>(局部) VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure>

<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作用域为当前shell进程及其子进程</span></span><br><span class="line"><span class="built_in">export</span> VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure>

<h4 id="位置变量"><a href="#位置变量" class="headerlink" title="位置变量"></a>位置变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$1</span>，<span class="variable">$2</span>，<span class="variable">$3</span>，....       //用来引用脚本的参数</span><br><span class="line">    <span class="built_in">shift</span> [num]         //位置变量使用完以后退出，后面的参数向前推进</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat haah.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$3</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line">[root@140 opt]<span class="comment"># bash haah.sh 1 2 3</span></span><br><span class="line">1</span><br><span class="line">------------</span><br><span class="line">2</span><br><span class="line">------------</span><br><span class="line">3</span><br><span class="line">------------</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]# cat huhu.sh </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in $*;do</span><br><span class="line">        echo $1</span><br><span class="line">        echo -----------</span><br><span class="line">        shift 2 </span><br><span class="line">done</span><br><span class="line">[root@140 opt]# bash huhu.sh 1 2 3 4 5 6</span><br><span class="line">1</span><br><span class="line">-----------</span><br><span class="line">3</span><br><span class="line">-----------</span><br><span class="line">5</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br></pre></td></tr></table></figure>

<h4 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$#</span>      //是传给脚本的参数个数</span><br><span class="line"><span class="variable">$0</span>      //是脚本本身的名字</span><br><span class="line">$!      //是shell最后运行的后台Process的PID</span><br><span class="line"><span class="variable">$@</span>      //是传给脚本的所有参数的列表</span><br><span class="line">$*      //是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过9个</span><br><span class="line">$$      //是脚本运行的当前进程ID号</span><br><span class="line">$?      //是显示上条命令的退出状态，0表示没有错误，其他表示有错误</span><br></pre></td></tr></table></figure>

<h4 id="bash中自带环境变量"><a href="#bash中自带环境变量" class="headerlink" title="bash中自带环境变量"></a>bash中自带环境变量</h4><ul>
<li>PATH</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure>

<ul>
<li>SHELL</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>UID</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $UID</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTSIZE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure>

<ul>
<li>HOME</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HOME</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>PWD</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PWD</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTFILE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTFILE</span></span><br><span class="line">/root/.bash_history</span><br></pre></td></tr></table></figure>

<ul>
<li>PS1</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure>

<h4 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不能修改值，不能销毁，只能等shell进程终止时随之消亡</span></span><br><span class="line">readonly(只读) VAR_NAME=VALUE(值)</span><br></pre></td></tr></table></figure>

<h2 id="脚本基础"><a href="#脚本基础" class="headerlink" title="脚本基础"></a>脚本基础</h2><h3 id="什么是脚本"><a href="#什么是脚本" class="headerlink" title="什么是脚本"></a>什么是脚本</h3><p>​    脚本(script)是使用一种特定的描述性语言，依据一定的格式编写的可执行文件，又称作宏或批处理文件。脚本通常可以由应用程序临时调用并执行。</p>
<p>​    脚本简单地说就是一条条的文字命令，这些文字命令是我们可以看到的(如可以用记事本打开查看、编辑)，脚本程序在执行时，是由系统的一个解释器，将其一条条的翻译成机器可识别的指令，并按程序顺序执行。因为脚本在执行时多了一道翻译的过程，所以它比二进制程序执行效率要稍低一些。</p>
<h3 id="程序反回值"><a href="#程序反回值" class="headerlink" title="程序反回值"></a>程序反回值</h3><p>程序执行以后有两类返回值：</p>
<ul>
<li>程序执行的结果</li>
<li>程序状态返回代码（0-255）<ul>
<li>0：正确执行</li>
<li>1-255：错误执行，1、2、127系统预留，有特殊意义</li>
</ul>
</li>
</ul>
<h3 id="脚本测试"><a href="#脚本测试" class="headerlink" title="脚本测试"></a>脚本测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查脚本是否有语法错误</span></span><br><span class="line">bash -n scriptname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单步执行，检查脚本错在哪里（最常用）</span></span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure>

<blockquote>
<p>例如此处写个错误的脚本</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@140 opt]<span class="comment"># bash -x huhu.sh </span></span><br><span class="line">huhu.sh:行3: 未预期的符号 `<span class="keyword">do</span><span class="string">' 附近有语法错误</span></span><br><span class="line"><span class="string">huhu.sh:行3: `frr i in $*;do'</span></span><br></pre></td></tr></table></figure>

<h3 id="写脚本注意事项"><a href="#写脚本注意事项" class="headerlink" title="写脚本注意事项"></a>写脚本注意事项</h3><ul>
<li>禁止将为成功执行的代码直接写入脚本</li>
<li>脚本中的命令一定要用绝对路径</li>
</ul>
<h3 id="shell算术运算"><a href="#shell算术运算" class="headerlink" title="shell算术运算"></a>shell算术运算</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 变量</span></span><br><span class="line">A=30</span><br><span class="line">B=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># A加上B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A减去B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A乘以B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A除以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc</span><br></pre></td></tr></table></figure>

<h3 id="命令间的逻辑关系"><a href="#命令间的逻辑关系" class="headerlink" title="命令间的逻辑关系"></a>命令间的逻辑关系</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 逻辑与：&amp;&amp;</span></span><br><span class="line">含义：当前一个命令执行成功后，再次执行后面的命令</span><br><span class="line"><span class="comment"># 逻辑非：||</span></span><br><span class="line">含义：当前一个命令执行失败后，再次执行后面的命令</span><br></pre></td></tr></table></figure>

<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h4 id="1-写一个脚本，要求如下："><a href="#1-写一个脚本，要求如下：" class="headerlink" title="1.写一个脚本，要求如下："></a>1.写一个脚本，要求如下：</h4><ul>
<li>设定变量Fa的值为<code>/etc/passwd</code></li>
<li>设定变量line的为<code>$(cat $Fa | wc -l)</code></li>
<li>依次向<code>/etc/passwd</code>中的每个用户问好，并且说出对方的ID是什么。结果输出如下：<ul>
<li>Hello,root，your UID is 0.</li>
</ul>
</li>
<li>统计当前系统一个有多少个用户并输出</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line">line=$(cat <span class="variable">$Fa</span> | wc -l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取出用户名以及UID</span></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$line</span>;i++));<span class="keyword">do</span></span><br><span class="line">        username=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">        user_uid=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给每个用户问好</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"hello <span class="variable">$username</span> , your uid is <span class="variable">$user_uid</span> ."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计用户</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Cuerrent system has <span class="variable">$(cat $Fa | wc -l)</span> user."</span></span><br></pre></td></tr></table></figure>

<h4 id="2-写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商"><a href="#2-写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商" class="headerlink" title="2.写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商"></a>2.写一个脚本，传递两个整数给此脚本，让脚本分别计算并显示这两个整数的和，差，积，商</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat suanfa.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 变量</span></span><br><span class="line">A=<span class="variable">$1</span></span><br><span class="line">B=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A加上B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>+<span class="variable">$B</span>=$[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A减去B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>-<span class="variable">$B</span>=$[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A乘以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>*<span class="variable">$B</span>=$[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">chuyi=$(<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># A除以B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>/<span class="variable">$B</span>=<span class="variable">$chuyi</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash suanfa.sh 50 20</span></span><br><span class="line">50+20=70</span><br><span class="line">50-20=30</span><br><span class="line">50*20=1000</span><br><span class="line">50/20=2.50</span><br></pre></td></tr></table></figure>

<h4 id="3-写一个脚本，要求如下："><a href="#3-写一个脚本，要求如下：" class="headerlink" title="3.写一个脚本，要求如下："></a>3.写一个脚本，要求如下：</h4><ul>
<li>创建目录/tmp/scripts</li>
<li>切换至此目录中</li>
<li>复制/etc/pam.d目录至当前目录，并重命名为test</li>
<li>将当前目录的test及其里面的文件和子目录的属主改为redhat</li>
<li>将test及其子目录中的文件的其它用户的权限改为没有任何权限</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat mulu.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置变量</span></span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">cp=/usr/bin/cp</span><br><span class="line">chown=/usr/bin/chown</span><br><span class="line">chmod=/usr/bin/chmod</span><br><span class="line">useradd=/usr/bin/useradd</span><br><span class="line"><span class="comment"># 一条命令解决</span></span><br><span class="line">mkdir /tmp/scripts &amp;&amp; <span class="built_in">cd</span> /tmp/scripts &amp;&amp; cp -rf /etc/pam.d ./<span class="built_in">test</span> &amp;&amp; chown -Rf redhat: <span class="built_in">test</span> || useradd redhat &amp;&amp; chmod -Rf o-rwx <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash -x mulu.sh </span></span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ cp=/usr/bin/cp</span><br><span class="line">+ chown=/usr/bin/chown</span><br><span class="line">+ chmod=/usr/bin/chmod</span><br><span class="line">+ useradd=/usr/bin/useradd</span><br><span class="line">+ mkdir /tmp/scripts</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/scripts</span><br><span class="line">+ cp -rf /etc/pam.d ./<span class="built_in">test</span></span><br><span class="line">+ chown -Rf redhat: <span class="built_in">test</span></span><br><span class="line">+ chmod -Rf o-rwx <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>4.写一个脚本，要求如下：</p>
<ul>
<li>显示当前系统日期和时间，而后创建目录/tmp/lstest</li>
<li>切换工作目录至/tmp/lstest</li>
<li>创建目录a1d，b56e，6test</li>
<li>创建空文件xy，x2y，732</li>
<li>列出当前目录下以a，x或者6开头的文件或目录</li>
<li>列出当前目录下以字母开头，后跟一个任意数字，而后跟任意长度字符的文件或目录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat shijian.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置变量</span></span><br><span class="line">date=/usr/bin/date</span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">touch=/usr/bin/touch</span><br><span class="line">ls=/usr/bin/ls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date &amp;&amp; mkdir /tmp/lstest &amp;&amp; <span class="built_in">cd</span> /tmp/lstest &amp;&amp; mkdir a1d b56e 6test &amp;&amp; touch xy x2y 732 &amp;&amp; ls a* x* 6* &amp;&amp; ls [a-z][0-9]*</span><br><span class="line">[root@140 opt]<span class="comment"># bash -x shijian.sh </span></span><br><span class="line">+ date=/usr/bin/date</span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ touch=/usr/bin/touch</span><br><span class="line">+ ls=/usr/bin/ls</span><br><span class="line">+ date</span><br><span class="line">2019年 05月 21日 星期二 22:11:10 CST</span><br><span class="line">+ mkdir /tmp/lstest</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/lstest</span><br><span class="line">+ mkdir a1d b56e 6test</span><br><span class="line">+ touch xy x2y 732</span><br><span class="line">+ ls a1d x2y xy 6test</span><br><span class="line">x2y  xy</span><br><span class="line"></span><br><span class="line">6test:</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line">+ ls a1d b56e x2y</span><br><span class="line">x2y</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line"></span><br><span class="line">b56e:</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.linux--shell脚本基础/" data-id="ck627jzve002bu4u650wf7zgd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux进阶/">linux进阶</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/29/8.linux--软件管理/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          软件管理
        
      </div>
    </a>
  
  
    <a href="/2019/08/29/7.谈Python变量和数据类型/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">谈Python变量和数据类型</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux基础/">linux基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux运维/">linux运维</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux进阶/">linux进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux基础/">linux基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux运维/">linux运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux进阶/">linux进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/linux基础/" style="font-size: 20px;">linux基础</a> <a href="/tags/linux运维/" style="font-size: 12.5px;">linux运维</a> <a href="/tags/linux进阶/" style="font-size: 17.5px;">linux进阶</a> <a href="/tags/python/" style="font-size: 15px;">python</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/29/git版本控制详解手册/">《Git分布式版本控制详解手册》</a>
          </li>
        
          <li>
            <a href="/2019/09/23/9.python内置函数/">python内置函数</a>
          </li>
        
          <li>
            <a href="/2019/09/22/5.PXE无人值守安装服务器/">PXE无人值守安装服务器</a>
          </li>
        
          <li>
            <a href="/2019/08/31/4.LAMP/">LAMP</a>
          </li>
        
          <li>
            <a href="/2019/08/29/16.linux--RHCSA模拟/">RHCSA复习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Li Jie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>