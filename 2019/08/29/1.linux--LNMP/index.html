<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    LNMP |  Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-1.linux--LNMP" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  LNMP
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.linux--LNMP/" class="article-date">
  <time datetime="2019-08-29T15:44:18.466Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿ç»´/">linuxè¿ç»´</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">6.8kå­—</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">30åˆ†é’Ÿ</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h1><p>LNMPä»£è¡¨çš„å°±æ˜¯ï¼šLinuxç³»ç»Ÿä¸‹Nginx+MySQL+PHPè¿™ç§ç½‘ç«™æœåŠ¡å™¨æ¶æ„ã€‚</p>
<p>Linuxæ˜¯ä¸€ç±»Unixè®¡ç®—æœºæ“ä½œç³»ç»Ÿçš„ç»Ÿç§°ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„å…è´¹æ“ä½œç³»ç»Ÿã€‚ä»£è¡¨ç‰ˆæœ¬æœ‰ï¼šdebianã€centosã€ubuntuã€fedoraã€gentooç­‰ã€‚</p>
<p><a href="https://baike.baidu.com/item/Nginx" target="_blank" rel="noopener">Nginx</a>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œ<a href="https://baike.baidu.com/item/åå‘ä»£ç†" target="_blank" rel="noopener">åå‘ä»£ç†</a>æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªIMAP/POP3/SMTPä»£ç†æœåŠ¡å™¨ã€‚</p>
<p>Mysqlæ˜¯ä¸€ä¸ªå°å‹<a href="https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a>ã€‚</p>
<p><a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>æ˜¯ä¸€ç§åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„åµŒå…¥HTMLæ–‡æ¡£çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>è¿™å››ç§è½¯ä»¶å‡ä¸ºå…è´¹å¼€æºè½¯ä»¶ï¼Œç»„åˆåˆ°ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªå…è´¹ã€é«˜æ•ˆã€æ‰©å±•æ€§å¼ºçš„ç½‘ç«™æœåŠ¡ç³»ç»Ÿã€‚</p>
<h2 id="LNMPç‰¹ç‚¹"><a href="#LNMPç‰¹ç‚¹" class="headerlink" title="LNMPç‰¹ç‚¹"></a>LNMPç‰¹ç‚¹</h2><p>â€‹        LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ˜¯ä¸€å¥—ç”±Linux + Nginx + MySQL + PHPç»„æˆçš„åŠ¨æ€ç½‘ç«™ç³»ç»Ÿè§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰å…è´¹ã€é«˜æ•ˆã€æ‰©å±•æ€§å¼ºä¸”èµ„æºæ¶ˆè€—ä½ç­‰ä¼˜è‰¯ç‰¹æ€§ã€‚</p>
<p>â€‹        Nginxæ˜¯ä¸€æ¬¾ç›¸å½“ä¼˜ç§€çš„ç”¨äºéƒ¨ç½²åŠ¨æ€ç½‘ç«™çš„è½»é‡çº§æœåŠ¡ç¨‹åºï¼Œå®ƒæœ€åˆæ˜¯ä¸ºä¿„ç½—æ–¯é—¨æˆ·ç«™ç‚¹è€Œå¼€å‘çš„ï¼Œå› å…¶ç¨³å®šæ€§ã€åŠŸèƒ½ä¸°å¯Œã€å ç”¨å†…å­˜å°‘ä¸”å¹¶å‘èƒ½åŠ›å¼ºè€Œå¤‡å—ç”¨æˆ·çš„ä¿¡èµ–ã€‚ç›®å‰å›½å†…è¯¸å¦‚æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ç­‰é—¨æˆ·ç«™ç‚¹å‡å·²ä½¿ç”¨äº†æ­¤æœåŠ¡ã€‚</p>
<p>NginxæœåŠ¡ç¨‹åºçš„ç¨³å®šæ€§æºè‡ªäºé‡‡ç”¨äº†åˆ†é˜¶æ®µçš„èµ„æºåˆ†é…æŠ€æœ¯ï¼Œé™ä½äº†CPUä¸å†…å­˜çš„å ç”¨ç‡ï¼Œæ‰€ä»¥ä½¿ç”¨Nginxç¨‹åºéƒ¨ç½²çš„åŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸ä»…ååˆ†ç¨³å®šã€é«˜æ•ˆï¼Œè€Œä¸”æ¶ˆè€—çš„ç³»ç»Ÿèµ„æºä¹Ÿå¾ˆå°‘ã€‚æ­¤å¤–ï¼ŒNginxå…·å¤‡çš„æ¨¡å—æ•°é‡ä¸Apacheå…·å¤‡çš„æ¨¡å—æ•°é‡å‡ ä¹ç›¸åŒï¼Œè€Œä¸”ç°åœ¨å·²ç»å®Œå…¨æ”¯æŒproxyã€rewriteã€mod_fcgiã€sslã€vhostsç­‰å¸¸ç”¨æ¨¡å—ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒNginxè¿˜æ”¯æŒçƒ­éƒ¨ç½²æŠ€æœ¯ï¼Œå¯ä»¥7Ã—24ä¸é—´æ–­æä¾›æœåŠ¡ï¼Œè¿˜å¯ä»¥åœ¨ä¸æš‚åœæœåŠ¡çš„æƒ…å†µä¸‹ç›´æ¥å¯¹NginxæœåŠ¡ç¨‹åºè¿›è¡Œå‡çº§ã€‚</p>
<p>å¦ç™½æ¥è®²ï¼Œè™½ç„¶Nginxç¨‹åºçš„ä»£ç è´¨é‡éå¸¸é«˜ï¼Œä»£ç å¾ˆè§„èŒƒï¼ŒæŠ€æœ¯æˆç†Ÿï¼Œæ¨¡å—æ‰©å±•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚æ˜¯ç”±ä¿„ç½—æ–¯äººå¼€å‘çš„ï¼Œæ‰€ä»¥åœ¨èµ„æ–™æ–‡æ¡£æ–¹é¢è¿˜å¹¶ä¸å®Œå–„ï¼Œä¸­æ–‡èµ„æ–™çš„è´¨é‡æ›´æ˜¯é±¼é¾™æ··æ‚ã€‚ä½†æ˜¯NginxæœåŠ¡ç¨‹åºåœ¨è¿‘å¹´æ¥å¢é•¿åŠ¿å¤´è¿…çŒ›ï¼Œç›¸ä¿¡ä¼šåœ¨è½»é‡çº§WebæœåŠ¡å™¨å¸‚åœºå…·æœ‰ä¸é”™çš„æœªæ¥ã€‚</p>
<p>â€‹    </p>
<p>â€‹        PHPï¼ˆHypertxt Preprocessorï¼Œè¶…æ–‡æœ¬é¢„å¤„ç†å™¨ï¼‰æ˜¯ä¸€ç§é€šç”¨çš„å¼€æºè„šæœ¬è¯­è¨€ï¼Œå‘æ˜äº1995å¹´ï¼Œå®ƒå¸å–äº†Cè¯­è¨€ã€Javaè¯­è¨€åŠPerlè¯­è¨€çš„å¾ˆå¤šä¼˜ç‚¹ï¼Œå…·æœ‰å¼€æºã€å…è´¹ã€å¿«æ·ã€è·¨å¹³å°æ€§å¼ºã€æ•ˆç‡é«˜ç­‰ä¼˜è‰¯ç‰¹æ€§ï¼Œæ˜¯ç›®å‰Webå¼€å‘é¢†åŸŸæœ€å¸¸ç”¨çš„è¯­è¨€ä¹‹ä¸€ã€‚</p>
<h2 id="LNMPä¼˜ç‚¹"><a href="#LNMPä¼˜ç‚¹" class="headerlink" title="LNMPä¼˜ç‚¹"></a>LNMPä¼˜ç‚¹</h2><p>ä½œä¸º Web æœåŠ¡å™¨ï¼šç›¸æ¯” Apacheï¼ŒNginx ä½¿ç”¨æ›´å°‘çš„èµ„æºï¼Œæ”¯æŒæ›´å¤šçš„å¹¶å‘è¿æ¥ï¼Œä½“ç°æ›´é«˜çš„æ•ˆç‡ã€‚</p>
<p>ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼šNginx æ—¢å¯ä»¥åœ¨å†…éƒ¨ç›´æ¥æ”¯æŒ<a href="https://baike.baidu.com/item/Rails" target="_blank" rel="noopener">Rails</a>å’Œ<a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>ï¼Œä¹Ÿå¯ä»¥æ”¯æŒä½œä¸º HTTP<a href="https://baike.baidu.com/item/ä»£ç†æœåŠ¡å™¨" target="_blank" rel="noopener">ä»£ç†æœåŠ¡å™¨</a>å¯¹å¤–è¿›è¡ŒæœåŠ¡ã€‚Nginx ç”¨Cç¼–å†™ï¼Œä¸è®ºæ˜¯ç³»ç»Ÿèµ„æºå¼€é”€è¿˜æ˜¯CPUä½¿ç”¨æ•ˆç‡éƒ½æ¯”Perlbalè¦å¥½çš„å¤šã€‚</p>
<p>ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼šNginxåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼ˆæœ€æ—©å¼€å‘è¿™ä¸ªäº§å“çš„ç›®çš„ä¹‹ä¸€ä¹Ÿæ˜¯ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼‰ï¼ŒLast/fm æè¿°äº†æˆåŠŸå¹¶ä¸”ç¾å¦™çš„ä½¿ç”¨ç»éªŒã€‚</p>
<p>Nginx å®‰è£…éå¸¸çš„ç®€å•ï¼Œé…ç½®æ–‡ä»¶éå¸¸ç®€æ´ï¼ˆè¿˜èƒ½å¤Ÿæ”¯æŒ<a href="https://baike.baidu.com/item/perl" target="_blank" rel="noopener">perl</a>è¯­æ³•ï¼‰ã€‚Nginxæ”¯æŒå¹³æ»‘åŠ è½½æ–°çš„é…ç½®ï¼Œè¿˜èƒ½å¤Ÿåœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œè½¯ä»¶ç‰ˆæœ¬çš„å‡çº§ã€‚</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mpSbTK.jpg" alt></p>
<h2 id="æºç åŒ…å®‰è£…"><a href="#æºç åŒ…å®‰è£…" class="headerlink" title="æºç åŒ…å®‰è£…"></a>æºç åŒ…å®‰è£…</h2><p>åœ¨ä½¿ç”¨æºç åŒ…å®‰è£…æœåŠ¡ç¨‹åºä¹‹å‰ï¼Œé¦–å…ˆè¦è®©å®‰è£…ä¸»æœºå…·å¤‡ç¼–è¯‘ç¨‹åºæºç çš„ç¯å¢ƒï¼Œä»–éœ€è¦å…·å¤‡Cè¯­è¨€ã€C++è¯­è¨€ã€Perlè¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œä»¥åŠå„ç§å¸¸è§çš„ç¼–è¯‘æ”¯æŒå‡½æ•°åº“ç¨‹åºã€‚å› æ­¤è¯·å…ˆé…ç½®å¦¥å½“Yumè½¯ä»¶ä»“åº“</p>
<h3 id="é…ç½®yumä»“åº“"><a href="#é…ç½®yumä»“åº“" class="headerlink" title="é…ç½®yumä»“åº“"></a>é…ç½®yumä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# tail -n 1 /etc/fstab</span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]# vim /etc/yum.repos.d/bendi.repo</span><br><span class="line">[root@server222 ~]# cat /etc/yum.repos.d/bendi.repo</span><br><span class="line">[bendi]</span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…è½¯ä»¶åŒ…"><a href="#å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…"></a>å®‰è£…è½¯ä»¶åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# yum install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* wget zlib-devel</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…"><a href="#ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…" class="headerlink" title="ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…"></a>ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…</h3><p>â€‹        ç„¶åæˆ‘ä»¬å®‰è£…LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ‰€éœ€çš„16ä¸ªè½¯ä»¶æºç åŒ…å’Œ1ä¸ªç”¨äºæ£€æŸ¥æ•ˆæœçš„è®ºå›ç½‘ç«™ç³»ç»Ÿè½¯ä»¶åŒ…</p>
<blockquote>
<p> æ­¤å¤„å»ºè®®æŠŠè¦å®‰è£…çš„è½¯ä»¶åŒ…å­˜æ”¾åœ¨/usr/local/srcç›®å½•ä¸­ã€‚</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»º<code>/usr/local/src</code>ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# mkdir /usr/local/src</span><br></pre></td></tr></table></figure>

<p>æºç åŒ…æ–‡ä»¶å·²ç»æ”¾åˆ°ç™¾åº¦äº‘ç›˜é‡Œé¢ï¼Œä¸‹è½½ä¸‹æ¥ä¼ åˆ°Linuxç³»ç»Ÿé‡Œé¢<code>/usr/local/src</code>ç›®å½•å³å¯</p>
<blockquote>
<p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA" target="_blank" rel="noopener">https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA</a><br>æå–ç ï¼šox0w<br>å¤åˆ¶è¿™æ®µå†…å®¹åæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ‰‹æœºAppï¼Œæ“ä½œæ›´æ–¹ä¾¿å“¦</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mCjFoT.png" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src</span></span><br><span class="line">[root@server222 src]<span class="comment"># ls</span></span><br><span class="line">cmake-2.8.11.2.tar.gz   libpng-1.6.12.tar.gz   php-5.5.14.tar.gz</span><br><span class="line">Discuz_X3.2_SC_GBK.zip  libvpx-v1.3.0.tar.bz2  t1lib-5.1.2.tar.gz</span><br><span class="line">freetype-2.5.3.tar.gz   mysql-5.6.19.tar.gz    tiff-4.0.3.tar.gz</span><br><span class="line">jpegsrc.v9a.tar.gz      nginx-1.6.0.tar.gz     yasm-1.2.0.tar.gz</span><br><span class="line">libgd-2.1.0.tar.gz      openssl-1.0.1h.tar.gz  zlib-1.2.8.tar.gz</span><br><span class="line">libmcrypt-2.5.8.tar.gz  pcre-8.35.tar.gz</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœæ˜¯17ä¸ªåŒ…å°±ç®—OKï¼Œå·®ä¸€ä¸ªéƒ½ä¸è¡Œ</p>
</blockquote>
<h2 id="å®‰è£…ç¼–è¯‘å·¥å…·"><a href="#å®‰è£…ç¼–è¯‘å·¥å…·" class="headerlink" title="å®‰è£…ç¼–è¯‘å·¥å…·"></a>å®‰è£…ç¼–è¯‘å·¥å…·</h2><p>cmakeæ˜¯Linuxç³»ç»Ÿä¸­ä¸€æ¬¾å¸¸ç”¨çš„ç¼–è¯‘å·¥å…·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># tar xzvf cmake-2.8.11.2.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd cmake-2.8.11.2/</span></span><br><span class="line">[root@server222 cmake-2.8.11.2]<span class="comment"># ./configure ; make ; make install</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤å¤„å‘½ä»¤<code>./configure ; make ; make install</code> </p>
<p>æ ¼å¼ä¸º <code>å‘½ä»¤A ; å‘½ä»¤B ; å‘½ä»¤C</code></p>
<p>è¿™é‡Œæ„æ€æ˜¯å…ˆæ‰§è¡Œå‘½ä»¤Aå†æ‰§è¡Œå‘½ä»¤Bæœ€åæ‰§è¡Œå‘½ä»¤C</p>
</blockquote>
<h2 id="é…ç½®MySQLæœåŠ¡"><a href="#é…ç½®MySQLæœåŠ¡" class="headerlink" title="é…ç½®MySQLæœåŠ¡"></a>é…ç½®MySQLæœåŠ¡</h2><p>â€‹       åœ¨ä½¿ç”¨Yumè½¯ä»¶ä»“åº“å®‰è£…æœåŠ¡ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®RPMè½¯ä»¶åŒ…ä¸­çš„æŒ‡ä»¤é›†å®Œæ•´è½¯ä»¶é…ç½®ç­‰å·¥ä½œã€‚ä½†æ˜¯ä¸€æ—¦é€‰æ‹©ä½¿ç”¨æºç åŒ…çš„æ–¹å¼æ¥å®‰è£…ï¼Œè¿™ä¸€åˆ‡å°±éœ€è¦è‡ªå·±æ¥å®Œæˆäº†ã€‚é’ˆå¯¹MySQLæ•°æ®åº“æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªåä¸ºmysqlçš„ç”¨æˆ·ï¼Œä¸“é—¨ç”¨äºè´Ÿè´£è¿è¡ŒMySQLæ•°æ®åº“ã€‚è¯·è®°å¾—è¦æŠŠè¿™ç±»è´¦æˆ·çš„Bashç»ˆç«¯è®¾ç½®æˆnologinè§£é‡Šå™¨ï¼Œé¿å…é»‘å®¢é€šè¿‡è¯¥ç”¨æˆ·ç™»å½•åˆ°æœåŠ¡å™¨ä¸­ï¼Œä»è€Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cmake-2.8.11.2]# cd ..</span><br><span class="line">[root@server222 src]# useradd mysql -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>â€‹       åˆ›å»ºä¸€ä¸ªç”¨äºä¿å­˜MySQLæ•°æ®åº“ç¨‹åºå’Œæ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ï¼Œå¹¶æŠŠè¯¥ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„èº«ä»½ä¿®æ”¹ä¸ºmysqlã€‚å…¶ä¸­ï¼Œ/usr/local/mysqlæ˜¯ç”¨äºä¿å­˜MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºçš„ç›®å½•ï¼Œ/usr/local/mysql/varåˆ™æ˜¯ç”¨äºä¿å­˜çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# mkdir -p /usr/local/mysql/var</span><br><span class="line">[root@server222 src]# chown -Rf mysql:mysql /usr/local/mysql</span><br></pre></td></tr></table></figure>

<p>â€‹        æ¥ä¸‹æ¥è§£å‹ã€ç¼–è¯‘ã€å®‰è£…MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºã€‚åœ¨ç¼–è¯‘æ•°æ®åº“æ—¶ä½¿ç”¨çš„æ˜¯cmakeå‘½ä»¤</p>
<p>-DCMAKE_INSTALL_PREFIXå‚æ•°ç”¨äºå®šä¹‰æ•°æ®åº“æœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•</p>
<p>-DMYSQL_DATADIRå‚æ•°ç”¨äºå®šä¹‰çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•</p>
<p>-DSYSCONFDIRåˆ™æ˜¯å®šä¹‰MySQLæ•°æ®åº“é…ç½®æ–‡ä»¶çš„ä¿å­˜ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf mysql-5.6.19.tar.gz</span><br><span class="line">[root@server222 src]# cd mysql-5.6.19/</span><br><span class="line">[root@server222 mysql-5.6.19]# cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etc ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        ä¸ºäº†è®©MySQLæ•°æ®åº“ç¨‹åºæ­£å¸¸è¿è½¬èµ·æ¥ï¼Œéœ€è¦å…ˆåˆ é™¤/etcç›®å½•ä¸­çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨MySQLæ•°æ®åº“ç¨‹åºçš„ä¿å­˜ç›®å½•scriptså†…æ‰¾åˆ°ä¸€ä¸ªåä¸ºmysql_install_dbçš„è„šæœ¬ç¨‹åºï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ç¨‹åºå¹¶ä½¿ç”¨â€“userå‚æ•°æŒ‡å®šMySQLæœåŠ¡çš„å¯¹åº”è´¦å·åç§°ï¼ˆåœ¨å‰é¢æ­¥éª¤å·²ç»åˆ›å»ºï¼‰ï¼Œä½¿ç”¨â€“basedirå‚æ•°æŒ‡å®šMySQLæœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•ï¼Œä½¿ç”¨â€“datadirå‚æ•°æŒ‡å®šMySQLçœŸå®æ•°æ®åº“çš„æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œè¿™æ ·å³å¯ç”Ÿæˆç³»ç»Ÿæ•°æ®åº“æ–‡ä»¶ï¼Œä¹Ÿä¼šç”Ÿæˆå‡ºæ–°çš„MySQLæœåŠ¡é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql-5.6.19]# rm -rf /etc/my.cnf</span><br><span class="line">[root@server222 mysql-5.6.19]# cd /usr/local/mysql</span><br><span class="line">[root@server222 mysql]# ./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure>

<p>â€‹        æŠŠç³»ç»Ÿæ–°ç”Ÿæˆçš„MySQLæ•°æ®åº“é…ç½®æ–‡ä»¶é“¾æ¥åˆ°/etcç›®å½•ä¸­ï¼Œç„¶åæŠŠç¨‹åºç›®å½•ä¸­çš„å¼€æœºç¨‹åºæ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dç›®å½•ä¸­ï¼Œä»¥ä¾¿é€šè¿‡serviceå‘½ä»¤æ¥ç®¡ç†MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºã€‚è®°å¾—æŠŠæ•°æ®åº“è„šæœ¬æ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆ755ä»¥ä¾¿äºè®©ç”¨æˆ·æœ‰æ‰§è¡Œè¯¥è„šæœ¬çš„æƒé™</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# ln -s my.cnf /etc/my.cnf</span><br><span class="line">[root@server222 mysql]# cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line">[root@server222 mysql]# chmod 755 /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure>

<p>â€‹        ç¼–è¾‘åˆšå¤åˆ¶çš„MySQLæ•°æ®åº“è„šæœ¬æ–‡ä»¶ï¼ŒæŠŠç¬¬46ã€47è¡Œçš„basedirä¸datadirå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºMySQLæ•°æ®åº“ç¨‹åºçš„ä¿å­˜ç›®å½•å’ŒçœŸå®æ•°æ®åº“çš„æ–‡ä»¶å†…å®¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/rc.d/init.d/mysqld</span><br><span class="line"> 45 </span><br><span class="line"> 46 basedir=/usr/local/mysql</span><br><span class="line"> 47 datadir=/usr/local/mysql/var</span><br><span class="line"> 48</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu æŸ¥çœ‹è¡Œ</p>
</blockquote>
<p>â€‹        é…ç½®å¥½è„šæœ¬æ–‡ä»¶åä¾¿å¯ä»¥ç”¨serviceå‘½ä»¤å¯åŠ¨mysqldæ•°æ®åº“æœåŠ¡äº†ã€‚mysqldæ˜¯MySQLæ•°æ®åº“ç¨‹åºçš„æœåŠ¡åç§°ï¼Œæ³¨æ„ä¸è¦å†™é”™ã€‚é¡ºå¸¦å†ä½¿ç”¨chkconfigå‘½ä»¤æŠŠmysqldæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# service mysqld start</span><br><span class="line">Starting MySQL. SUCCESS!</span><br><span class="line">[root@server222 mysql]# chkconfig mysqld on</span><br></pre></td></tr></table></figure>

<p>â€‹       MySQLæ•°æ®åº“ç¨‹åºè‡ªå¸¦äº†è®¸å¤šå‘½ä»¤ï¼Œä½†æ˜¯Bashç»ˆç«¯çš„PATHå˜é‡å¹¶ä¸ä¼šåŒ…å«è¿™äº›å‘½ä»¤æ‰€å­˜æ”¾çš„ç›®å½•ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿæ— æ³•é¡ºåˆ©åœ°å¯¹MySQLæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå°±ä¸èƒ½ä½¿ç”¨MySQLæ•°æ®åº“è‡ªå¸¦çš„å‘½ä»¤äº†ã€‚æƒ³è¦æŠŠå‘½ä»¤æ‰€ä¿å­˜çš„ç›®å½•æ°¸ä¹…æ€§åœ°å®šä¹‰åˆ°PATHå˜é‡ä¸­ï¼Œéœ€è¦ç¼–è¾‘/etc/profileæ–‡ä»¶å¹¶å†™å…¥è¿½åŠ çš„å‘½ä»¤ç›®å½•ï¼Œè¿™æ ·å½“ç‰©ç†è®¾å¤‡åœ¨ä¸‹ä¸€æ¬¡é‡å¯æ—¶å°±ä¼šæ°¸ä¹…ç”Ÿæ•ˆäº†ã€‚å¦‚æœä¸æƒ³é€šè¿‡é‡å¯è®¾å¤‡çš„æ–¹å¼æ¥ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨sourceå‘½ä»¤åŠ è½½ä¸€ä¸‹/ect/profileæ–‡ä»¶ï¼Œæ­¤æ—¶æ–°çš„PATHå˜é‡ä¹Ÿå¯ä»¥ç«‹å³ç”Ÿæ•ˆäº†ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 mysql]# source /etc/profile</span><br></pre></td></tr></table></figure>

<p>â€‹        MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºè¿˜ä¼šè°ƒç”¨åˆ°ä¸€äº›ç¨‹åºæ–‡ä»¶å’Œå‡½æ•°åº“æ–‡ä»¶ã€‚ç”±äºå½“å‰æ˜¯é€šè¿‡æºç åŒ…æ–¹å¼å®‰è£…MySQLæ•°æ®åº“ï¼Œå› æ­¤ç°åœ¨ä¹Ÿå¿…é¡»ä»¥æ‰‹åŠ¨æ–¹å¼æŠŠè¿™äº›æ–‡ä»¶é“¾æ¥è¿‡æ¥ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mkdir /var/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/lib/mysql /usr/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/include/mysql /usr/include/mysql</span><br></pre></td></tr></table></figure>

<p>â€‹        ç°åœ¨ï¼ŒMySQLæ•°æ®åº“æœåŠ¡ç¨‹åºå·²ç»å¯åŠ¨ï¼Œè°ƒç”¨çš„å„ä¸ªå‡½æ•°æ–‡ä»¶å·²ç»å°±ä½ï¼ŒPATHç¯å¢ƒå˜é‡ä¸­ä¹ŸåŠ å…¥äº†MySQLæ•°æ®åº“å‘½ä»¤çš„æ‰€åœ¨ç›®å½•ã€‚æ¥ä¸‹æ¥å‡†å¤‡å¯¹MySQLæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mysql_secure_installation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MySQL to secure it, we'll need the current</span><br><span class="line">password for the root user.  If you've just installed MySQL, and</span><br><span class="line">you haven't set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MySQL</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y  ï¼ˆè¦ä¸ºrootç®¡ç†å‘˜è®¾ç½®æ•°æ®åº“çš„å¯†ç ï¼‰</span><br><span class="line">New password:  è¾“å…¥è¦ä¸ºrootç®¡ç†å‘˜è®¾ç½®çš„æ•°æ®åº“å¯†ç </span><br><span class="line">Re-enter new password:   å†è¾“å…¥ä¸€æ¬¡å¯†ç </span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MySQL without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y  ï¼ˆåˆ é™¤åŒ¿åè´¦æˆ·ï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from 'localhost'.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] y ï¼ˆç¦æ­¢rootç®¡ç†å‘˜ä»è¿œç¨‹ç™»å½•ï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named 'test' that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y ï¼ˆåˆ é™¤testæ•°æ®åº“å¹¶å–æ¶ˆå¯¹å…¶çš„è®¿é—®æƒé™ï¼‰</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y ï¼ˆåˆ·æ–°æˆæƒè¡¨ï¼Œè®©åˆå§‹åŒ–åçš„è®¾å®šç«‹å³ç”Ÿæ•ˆï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">All done!  If you've completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MySQL!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®NginxæœåŠ¡"><a href="#é…ç½®NginxæœåŠ¡" class="headerlink" title="é…ç½®NginxæœåŠ¡"></a>é…ç½®NginxæœåŠ¡</h2><p>â€‹        åœ¨æ­£å¼å®‰è£…NginxæœåŠ¡ç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºå…¶è§£å†³ç›¸å…³çš„è½¯ä»¶ä¾èµ–å…³ç³»ï¼Œä¸‹é¢æ¥è§£å‹ã€ç¼–è¯‘ã€ç”Ÿæˆã€å®‰è£…NginxæœåŠ¡ç¨‹åºçš„æºç æ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf pcre-8.35.tar.gz</span><br><span class="line">[root@server222 src]# cd pcre-8.35</span><br><span class="line">[root@server222 pcre-8.35]# ./configure --prefix=/usr/local/pcre ï¼›make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        opensslè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›ç½‘ç«™åŠ å¯†è¯ä¹¦æœåŠ¡çš„ç¨‹åºæ–‡ä»¶ï¼Œåœ¨å®‰è£…è¯¥ç¨‹åºæ—¶éœ€è¦è‡ªå®šä¹‰æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•ï¼Œä»¥ä¾¿äºç¨åè°ƒç”¨å®ƒä»¬çš„æ—¶å€™æ›´å¯æ§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf openssl-1.0.1h.tar.gz</span><br><span class="line">[root@server222 src]# cd openssl-1.0.1h</span><br><span class="line">[root@server222 openssl-1.0.1h]# ./config --prefix=/usr/local/openssl ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        opensslè½¯ä»¶åŒ…å®‰è£…åé»˜è®¤ä¼šåœ¨/usr/local/openssl/binç›®å½•ä¸­æä¾›å¾ˆå¤šçš„å¯ç”¨å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦åƒå‰é¢çš„æ“ä½œé‚£æ ·ï¼Œå°†è¿™ä¸ªç›®å½•æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ€åæ‰§è¡Œsourceå‘½ä»¤ä»¥ä¾¿è®©æ–°çš„PATHç¯å¢ƒå˜é‡å†…å®¹å¯ä»¥ç«‹å³ç”Ÿæ•ˆï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin:/usr/local/openssl/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 openssl-1.0.1h]# source /etc/profile</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä½¿ç”¨:set  nu å‘½ä»¤æ˜¾ç¤ºæ•°å­—        </p>
</blockquote>
<p>â€‹        zlibè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›å‹ç¼©åŠŸèƒ½çš„å‡½æ•°åº“æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf zlib-1.2.8.tar.gz</span><br><span class="line">[root@server222 src]# cd zlib-1.2.8</span><br><span class="line">[root@server222 zlib-1.2.8]# ./configure --prefix=/usr/local/zlib ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨å®‰è£…éƒ¨ç½²å¥½å…·æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºæ‰§è¡ŒNginxæœåŠ¡ç¨‹åºçš„è´¦æˆ·ã€‚è´¦æˆ·åç§°å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸€å®šåˆ«å¿˜è®°ï¼Œå› ä¸ºåœ¨åç»­éœ€è¦ç”¨åˆ°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zlib-1.2.8]# cd ..</span><br><span class="line">[root@server222 src]# useradd www -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨ä½¿ç”¨å‘½ä»¤ç¼–è¯‘NginxæœåŠ¡ç¨‹åºæ—¶ï¼Œéœ€è¦è®¾ç½®ç‰¹åˆ«å¤šçš„å‚æ•°</p>
<p>â€“prefixå‚æ•°ç”¨äºå®šä¹‰æœåŠ¡ç¨‹åºç¨åå®‰è£…åˆ°çš„ä½ç½®</p>
<p>â€“userä¸â€“groupå‚æ•°ç”¨äºæŒ‡å®šæ‰§è¡ŒNginxæœåŠ¡ç¨‹åºçš„ç”¨æˆ·åå’Œç”¨æˆ·ç»„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf nginx-1.6.0.tar.gz</span><br><span class="line">[root@server222 src]# cd nginx-1.6.0/</span><br><span class="line">[root@server222 nginx-1.6.0]# ./configure --prefix=/usr/local/nginx --without-http_memcached_module --user=www --group=www --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-openssl=/usr/local/src/openssl-1.0.1h --with-zlib=/usr/local/src/zlib-1.2.8 --with-pcre=/usr/local/src/pcre-8.35 ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        è¦æƒ³å¯åŠ¨NginxæœåŠ¡ç¨‹åºä»¥åŠå°†å…¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œä¹Ÿéœ€è¦æœ‰è„šæœ¬æ–‡ä»¶ã€‚å¯æƒœçš„æ˜¯ï¼Œåœ¨å®‰è£…å®ŒNginxè½¯ä»¶åŒ…ä¹‹åé»˜è®¤å¹¶æ²¡æœ‰ä¸ºç”¨æˆ·æä¾›è„šæœ¬æ–‡ä»¶</p>
<blockquote>
<p>æ­¤å¤„ä»£ç å¤åˆ¶ç²˜è´´å³å¯</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# vim /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# cat /etc/rc.d/init.d/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: - 85 15</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Nginx is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> proxy and IMAP/POP3 proxy server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> processname: nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pidfile: /usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Source <span class="keyword">function</span> library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"><span class="meta">#</span><span class="bash"> Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"><span class="meta">#</span><span class="bash"> Check that networking is up.</span></span><br><span class="line">[ "$NETWORKING" = "no" ] &amp;&amp; exit 0</span><br><span class="line">nginx="/usr/local/nginx/sbin/nginx"</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line">NGINX_CONF_FILE="/usr/local/nginx/conf/nginx.conf"</span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line">make_dirs() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash"> make required directories</span></span><br><span class="line">user=`$nginx -V 2&gt;&amp;1 | grep "configure arguments:" | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -`</span><br><span class="line">        if [ -z "`grep $user /etc/passwd`" ]; then</span><br><span class="line">                useradd -M -s /bin/nologin $user</span><br><span class="line">        fi</span><br><span class="line">options=`$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'`</span><br><span class="line">for opt in $options; do</span><br><span class="line">        if [ `echo $opt | grep '.*-temp-path'` ]; then</span><br><span class="line">                value=`echo $opt | cut -d "=" -f 2`</span><br><span class="line">                if [ ! -d "$value" ]; then</span><br><span class="line">                        # echo "creating" $value</span><br><span class="line">                        mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">start() &#123;</span><br><span class="line">[ -x $nginx ] || exit 5</span><br><span class="line">[ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">make_dirs</span><br><span class="line">echo -n $"Starting $prog: "</span><br><span class="line">daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">stop() &#123;</span><br><span class="line">echo -n $"Stopping $prog: "</span><br><span class="line">killproc $prog -QUIT</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">restart() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">stop</span><br><span class="line">sleep 1</span><br><span class="line">start</span><br><span class="line">&#125;</span><br><span class="line">reload() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">echo -n $"Reloading $prog: "</span><br><span class="line">killproc $nginx -HUP</span><br><span class="line">RETVAL=$?</span><br><span class="line">echo</span><br><span class="line">&#125;</span><br><span class="line">force_reload() &#123;</span><br><span class="line">restart</span><br><span class="line">&#125;</span><br><span class="line">configtest() &#123;</span><br><span class="line"><span class="meta">$</span><span class="bash">nginx -t -c <span class="variable">$NGINX_CONF_FILE</span></span></span><br><span class="line">&#125;</span><br><span class="line">rh_status() &#123;</span><br><span class="line">status $prog</span><br><span class="line">&#125;</span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">restart|configtest)</span><br><span class="line"><span class="meta">$</span><span class="bash">1</span></span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">echo $"Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span><br><span class="line">exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜è„šæœ¬æ–‡ä»¶åè®°å¾—ä¸ºå…¶èµ‹äºˆ755æƒé™ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ‰§è¡Œè¿™ä¸ªè„šæœ¬</p>
<p>ç„¶åä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œé€šè¿‡restartå‚æ•°é‡å¯NginxæœåŠ¡ç¨‹åº</p>
<p>æœ€åå†ä½¿ç”¨chkconfigå‘½ä»¤å°†NginxæœåŠ¡ç¨‹åºæ·»åŠ è‡³å¼€æœºå¯åŠ¨é¡¹ä¸­</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# chmod 755 /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# /etc/rc.d/init.d/nginx restart</span><br><span class="line">Reloading systemd:                                         [  ç¡®å®š  ]</span><br><span class="line">Restarting nginx (via systemctl):                          [  ç¡®å®š  ]</span><br><span class="line">[root@server222 nginx-1.6.0]# chkconfig nginx on</span><br></pre></td></tr></table></figure>

<p>NginxæœåŠ¡ç¨‹åºåœ¨å¯åŠ¨åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€æ¥æŸ¥çœ‹åˆ°é»˜è®¤ç½‘é¡µäº†ã€‚ç›¸è¾ƒäºApacheæœåŠ¡ç¨‹åºçš„çº¢è‰²é»˜è®¤é¡µé¢ï¼ŒNginxæœåŠ¡ç¨‹åºçš„é»˜è®¤é¡µé¢æ˜¾å¾—æ›´åŠ ç®€æ´ã€‚</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mp8724.png" alt></p>
<h2 id="é…ç½®PHPæœåŠ¡"><a href="#é…ç½®PHPæœåŠ¡" class="headerlink" title="é…ç½®PHPæœåŠ¡"></a>é…ç½®PHPæœåŠ¡</h2><p>è§£å†³PHPçš„ç¨‹åºåŒ…å’Œå…¶ä»–è½¯ä»¶çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>éœ€è¦å…ˆå®‰è£…éƒ¨ç½²å°†è¿‘åä¸ªç”¨äºæ­å»ºç½‘ç«™é¡µé¢çš„è½¯ä»¶ç¨‹åºåŒ…ï¼Œç„¶åæ‰èƒ½æ­£å¼å®‰è£…PHPç¨‹åºã€‚</p>
<blockquote>
<p><code>yasm  libmcrypt  libvpx  tiff  libpng  freetype  jpeg  libgd  t1lib</code></p>
</blockquote>
<p><code>yasm</code>æºç åŒ…æ˜¯ä¸€æ¬¾å¸¸è§çš„å¼€æºæ±‡ç¼–å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf yasm-1.2.0.tar.gz</span><br><span class="line">[root@server222 src]# cd yasm-1.2.0</span><br><span class="line">[root@server222 yasm-1.2.0]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libmcrypt</code>æºç åŒ…æ˜¯ç”¨äºåŠ å¯†ç®—æ³•çš„æ‰©å±•åº“ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yasm-1.2.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libmcrypt-2.5.8.tar.gz</span><br><span class="line">[root@server222 src]# cd libmcrypt-2.5.8</span><br><span class="line">[root@server222 libmcrypt-2.5.8]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libvpx</code>æºç åŒ…æ˜¯ç”¨äºæä¾›è§†é¢‘ç¼–ç å™¨çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libmcrypt-2.5.8]# cd ..</span><br><span class="line">[root@server222 src]# tar xjvf libvpx-v1.3.0.tar.bz2</span><br><span class="line">[root@server222 src]# cd libvpx-v1.3.0</span><br><span class="line">[root@server222 libvpx-v1.3.0]# ./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9 ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>tiff</code>æºç åŒ…æ˜¯ç”¨äºæä¾›æ ‡ç­¾å›¾åƒæ–‡ä»¶æ ¼å¼çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libvpx-v1.3.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf tiff-4.0.3.tar.gz</span><br><span class="line">[root@server222 src]# cd tiff-4.0.3</span><br><span class="line">[root@server222 tiff-4.0.3]# ./configure --prefix=/usr/local/tiff --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libpng</code>æºç åŒ…æ˜¯ç”¨äºæä¾›pngå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tiff-4.0.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libpng-1.6.12.tar.gz</span><br><span class="line">[root@server222 src]# cd libpng-1.6.12</span><br><span class="line">[root@server222 libpng-1.6.12]# ./configure --prefix=/usr/local/libpng --enable-shared ï¼›make ; make install</span><br></pre></td></tr></table></figure>

<p><code>freetype</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å­—ä½“æ”¯æŒå¼•æ“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libpng-1.6.12]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf freetype-2.5.3.tar.gz</span><br><span class="line">[root@server222 src]# cd freetype-2.5.3</span><br><span class="line">[root@server222 freetype-2.5.3]# ./configure --prefix=/usr/local/freetype --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>jpeg</code>æºç åŒ…æ˜¯ç”¨äºæä¾›jpegå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 freetype-2.5.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf jpegsrc.v9a.tar.gz</span><br><span class="line">[root@server222 src]# cd jpeg-9a</span><br><span class="line">[root@server222 jpeg-9a]# ./configure --prefix=/usr/local/jpeg --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libgd</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å›¾å½¢å¤„ç†çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 jpeg-9a]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libgd-2.1.0.tar.gz</span><br><span class="line">[root@server222 src]# cd libgd-2.1.0</span><br><span class="line">[root@server222 libgd-2.1.0]# ./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpx ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>t1lib</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å›¾ç‰‡ç”Ÿæˆå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libgd-2.1.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf t1lib-5.1.2.tar.gz</span><br><span class="line">[root@server222 src]# cd t1lib-5.1.2</span><br><span class="line">[root@server222 t1lib-5.1.2]# ./configure --prefix=/usr/local/t1lib --enable-shared ; make ; make install</span><br><span class="line">[root@server222 t1lib-5.1.2]# ln -s /usr/lib64/libltdl.so /usr/lib/libltdl.so</span><br><span class="line">[root@server222 t1lib-5.1.2]# cp -frp /usr/lib64/libXpm.so* /usr/lib/</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨å¼€å§‹ç¼–è¯‘phpæºç åŒ…ä¹‹å‰ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªåä¸ºLD_LIBRARY_PATHçš„å…¨å±€ç¯å¢ƒå˜é‡ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„ä½œç”¨æ˜¯å¸®åŠ©ç³»ç»Ÿæ‰¾åˆ°æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ç¼–è¯‘phpæœåŠ¡æºç åŒ…çš„å¿…é¡»å…ƒç´ ä¹‹ä¸€ã€‚ç¼–è¯‘phpæœåŠ¡æºç åŒ…æ—¶ï¼Œé™¤äº†å®šä¹‰è¦å®‰è£…åˆ°çš„ç›®å½•ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¾æ¬¡å®šä¹‰é…ç½®phpæœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶çš„ä¿å­˜ç›®å½•ã€MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºæ‰€åœ¨ç›®å½•ã€MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œä»¥åŠlibpngã€jpegã€freetypeã€libvpxã€zlibã€t1libç­‰æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•è·¯å¾„ï¼Œå¹¶é€šè¿‡å‚æ•°å¯åŠ¨phpæœåŠ¡ç¨‹åºçš„è¯¸å¤šé»˜è®¤åŠŸèƒ½</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 t1lib-5.1.2]# cd ..</span><br><span class="line">[root@server222 src]# tar -zvxf php-5.5.14.tar.gz</span><br><span class="line">[root@server222 src]# cd php-5.5.14</span><br><span class="line">[root@server222 php-5.5.14]# export LD_LIBRARY_PATH=/usr/local/libgd/lib</span><br><span class="line">[root@server222 php-5.5.14]# ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctype ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨phpæºç åŒ…ç¨‹åºå®‰è£…å®Œæˆåï¼Œéœ€è¦åˆ é™¤å½“å‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åå°†phpæœåŠ¡ç¨‹åºç›®å½•ä¸­ç›¸åº”çš„é…ç½®æ–‡ä»¶å¤åˆ¶è¿‡æ¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# rm -rf /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php.ini /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf</span><br></pre></td></tr></table></figure>

<p>â€‹        php-fpm.confæ˜¯phpæœåŠ¡ç¨‹åºé‡è¦çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨è¯¥é…ç½®æ–‡ä»¶ä¸­ç¬¬25è¡Œå·¦å³çš„pidæ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œç„¶ååˆ†åˆ«å°†ç¬¬148å’Œ149è¡Œçš„userä¸groupå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºwwwè´¦æˆ·å’Œç”¨æˆ·ç»„åç§°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php-fpm.conf</span><br><span class="line">24 ; Default Value: none</span><br><span class="line">25 pid = run/php-fpm.pid</span><br><span class="line">26 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">147 ; will be used.</span><br><span class="line">148 user = www</span><br><span class="line">149 group = www</span><br><span class="line">150</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu å¯æŸ¥çœ‹è¡Œæ•°</p>
</blockquote>
<p>â€‹        é…ç½®å¦¥å½“åä¾¿å¯æŠŠç”¨äºç®¡ç†phpæœåŠ¡çš„è„šæœ¬æ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dä¸­äº†ã€‚ä¸ºäº†èƒ½å¤Ÿæ‰§è¡Œè„šæœ¬ï¼Œè¯·è®°å¾—ä¸ºè„šæœ¬èµ‹äºˆ755æƒé™ã€‚æœ€åæŠŠphp-fpmæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chmod 755 /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure>

<p>â€‹        ç”±äºphpæœåŠ¡ç¨‹åºçš„é…ç½®å‚æ•°ç›´æ¥ä¼šå½±å“åˆ°WebæœåŠ¡æœåŠ¡çš„è¿è¡Œç¯å¢ƒï¼Œå› æ­¤ï¼Œå¦‚æœé»˜è®¤å¼€å¯äº†ä¸€äº›ä¸å¿…è¦ä¸”é«˜å±çš„åŠŸèƒ½ï¼ˆå¦‚å…è®¸ç”¨æˆ·åœ¨ç½‘é¡µä¸­æ‰§è¡ŒLinuxå‘½ä»¤ï¼‰ï¼Œåˆ™ä¼šé™ä½ç½‘ç«™è¢«å…¥ä¾µçš„éš¾åº¦ï¼Œå…¥ä¾µäººå‘˜ç”šè‡³å¯ä»¥æ‹¿åˆ°æ•´å°WebæœåŠ¡å™¨çš„ç®¡ç†æƒé™ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç¼–è¾‘php.inié…ç½®æ–‡ä»¶ï¼Œåœ¨305è¡Œçš„disable_functionså‚æ•°åé¢è¿½åŠ ä¸Šè¦ç¦æ­¢çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line">304 ; http://php.net/disable-functions</span><br><span class="line">305 disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</span><br></pre></td></tr></table></figure>

<p>â€‹        è¿™æ ·å°±æŠŠphpæœåŠ¡ç¨‹åºé…ç½®å¦¥å½“äº†ã€‚æœ€åï¼Œè¿˜éœ€è¦ç¼–è¾‘NginxæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŠŠç¬¬2è¡Œçš„äº•å·ï¼ˆ#ï¼‰åˆ é™¤ï¼Œç„¶ååœ¨åé¢å†™ä¸Šè´Ÿè´£è¿è¡ŒNginxæœåŠ¡ç¨‹åºçš„è´¦æˆ·åç§°å’Œç”¨æˆ·ç»„åç§°ï¼›åœ¨ç¬¬45è¡Œçš„indexå‚æ•°åé¢å†™ä¸Šç½‘ç«™çš„é¦–é¡µåç§°ã€‚</p>
<p>â€‹        æœ€åæ˜¯å°†ç¬¬65ï½71è¡Œå‚æ•°å‰çš„äº•å·ï¼ˆ#ï¼‰åˆ é™¤æ¥å¯ç”¨å‚æ•°ï¼Œä¸»è¦æ˜¯ä¿®æ”¹ç¬¬69è¡Œçš„è„šæœ¬åç§°è·¯å¾„å‚æ•°ï¼Œå…¶ä¸­$document_rootå˜é‡å³ä¸ºç½‘ç«™ä¿¡æ¯å­˜å‚¨çš„æ ¹ç›®å½•è·¯å¾„ï¼Œè‹¥æ²¡æœ‰è®¾ç½®è¯¥å˜é‡ï¼Œåˆ™NginxæœåŠ¡ç¨‹åºæ— æ³•æ‰¾åˆ°ç½‘ç«™ä¿¡æ¯ï¼Œå› æ­¤ä¼šæç¤ºâ€œ404é¡µé¢æœªæ‰¾åˆ°â€çš„æŠ¥é”™ä¿¡æ¯ã€‚åœ¨ç¡®è®¤å‚æ•°ä¿¡æ¯å¡«å†™æ­£ç¡®åä¾¿å¯é‡å¯NginxæœåŠ¡ä¸php-fpmæœåŠ¡ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line"> 1 </span><br><span class="line"> 2 user www www;</span><br><span class="line"> 3 worker_processes 1;</span><br><span class="line"> 4 </span><br><span class="line"> </span><br><span class="line"> 44 	root html;</span><br><span class="line"> 45 	index index.html index.htm index.php forum.php;</span><br><span class="line"> 46 &#125;</span><br><span class="line"> 47 </span><br><span class="line"> </span><br><span class="line"> 64         #</span><br><span class="line"> 65         location ~ \.php$ &#123;</span><br><span class="line"> 66             root           html;</span><br><span class="line"> 67             fastcgi_pass   127.0.0.1:9000;</span><br><span class="line"> 68             fastcgi_index  index.php;</span><br><span class="line"> 69         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line"> 70             include        fastcgi_params;</span><br><span class="line"> 71         &#125;</span><br><span class="line"> 72</span><br><span class="line"> 73         # deny access to .htaccess files, if Apache's document root</span><br><span class="line"></span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart nginx</span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»65è¡Œåˆ°71è¡Œçš„æ³¨é‡Šéœ€è¦å»æ‰</p>
</blockquote>
<p>è‡³æ­¤ï¼ŒLNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ¶æ„çš„é…ç½®å®éªŒå…¨éƒ¨ç»“æŸã€‚</p>
<h2 id="æ­å»ºDiscuz-è®ºå›"><a href="#æ­å»ºDiscuz-è®ºå›" class="headerlink" title="æ­å»ºDiscuz!è®ºå›"></a>æ­å»ºDiscuz!è®ºå›</h2><p>â€‹        ä¸ºäº†æ£€éªŒLNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ˜¯å¦é…ç½®å¦¥å½“ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ä¸Šé¢éƒ¨ç½²Discuz!ç³»ç»Ÿï¼Œç„¶åæŸ¥çœ‹ç»“æœã€‚å¦‚æœèƒ½å¤Ÿåœ¨LNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸­æˆåŠŸå®‰è£…ä½¿ç”¨Discuz!è®ºå›ç³»ç»Ÿï¼Œä¹Ÿå°±æ„å‘³ç€è¿™å¥—æ¶æ„æ˜¯å¯ç”¨çš„ã€‚Discuz! X3.2æ˜¯å›½å†…æœ€å¸¸è§çš„ç¤¾åŒºè®ºå›ç³»ç»Ÿï¼Œåœ¨ç»è¿‡åå¤šå¹´çš„ç ”å‘åå·²ç»æˆä¸ºäº†å…¨çƒæˆç†Ÿåº¦æœ€é«˜ã€è¦†ç›–ç‡æœ€å¹¿çš„è®ºå›ç½‘ç«™ç³»ç»Ÿä¹‹ä¸€ã€‚</p>
<p>â€‹        Discuz! X3.2è½¯ä»¶åŒ…çš„åç¼€æ˜¯.zipæ ¼å¼ï¼Œå› æ­¤åº”å½“ä½¿ç”¨ä¸“ç”¨çš„unzipå‘½ä»¤æ¥è¿›è¡Œè§£å‹ã€‚è§£å‹åä¼šåœ¨å½“å‰ç›®å½•ä¸­å‡ºç°ä¸€ä¸ªåä¸ºuploadçš„æ–‡ä»¶ç›®å½•ï¼Œè¿™é‡Œé¢ä¿å­˜çš„å°±æ˜¯Discuzï¼è®ºå›çš„ç³»ç»Ÿç¨‹åºã€‚æˆ‘ä»¬æŠŠNginxæœåŠ¡ç¨‹åºç½‘ç«™æ ¹ç›®å½•çš„å†…å®¹æ¸…ç©ºåï¼Œå°±å¯ä»¥æŠŠè¿™äº›è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶éƒ½å¤åˆ¶è¿›å»äº†ã€‚è®°å¾—æŠŠNginxæœåŠ¡ç¨‹åºçš„ç½‘ç«™æ ¹ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¿®æ”¹ä¸ºæœ¬åœ°çš„wwwç”¨æˆ·ï¼Œå¹¶ä¸ºå…¶èµ‹äºˆ755æƒé™ä»¥ä¾¿äºèƒ½å¤Ÿè¯»ã€å†™ã€æ‰§è¡Œè¯¥è®ºå›ç³»ç»Ÿå†…çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cd /usr/local/src/</span><br><span class="line">[root@server222 src]# unzip Discuz_X3.2_SC_GBK.zip</span><br><span class="line">[root@server222 src]# rm -rf /usr/local/nginx/html/&#123;index.html,50x.html&#125;*</span><br><span class="line">[root@server222 src]# mv upload/* /usr/local/nginx/html/</span><br><span class="line">[root@server222 src]# chown -Rf www:www /usr/local/nginx/html</span><br><span class="line">[root@server222 src]# chmod -Rf 755 /usr/local/nginx/html</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä¹‹ååœ¨æµè§ˆå™¨è¾“å…¥<code>192.168.176.222/install</code></p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPeM2n.png" alt></p>
<blockquote>
<p>ä¾æ¬¡æŒ‰ç…§å‚»ç“œå¼æ­¥éª¤ä¸‹ä¸€æ­¥</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe4Mt.png" alt></p>
<blockquote>
<p>ä½¿ç”¨adminç®¡ç†å‘˜è´¦æˆ·ç™»å½•</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe1K0.png" alt></p>
<blockquote>
<p> åˆ°æ­¤ç»“æŸLNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²ï¼Œå¦‚æœæ‚¨è§‰å¾—ä¸æ‡‚ï¼Œå¯ç§ä¿¡ç»™æˆ‘ï¼ŒåæœŸå°†å†™ä¸€äº›éƒ¨ç½²dockerå®¹å™¨è™šæ‹ŸåŒ–å¹³å°</p>
</blockquote>

      
      <!-- æ‰“èµ -->
      
      <div id="reward-btn">
        æ‰“èµ
      </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.linux--LNMP/" data-id="ck6abn9ve003esgu6v9tjbcca"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿ç»´/">linuxè¿ç»´</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2019/08/29/1.linux--openssh/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            openssh
          
        </div>
      </a>
    
    
  </nav>


  

  
  
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: 'ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>



<script src="/js/tocbot.min.js"></script>
<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>