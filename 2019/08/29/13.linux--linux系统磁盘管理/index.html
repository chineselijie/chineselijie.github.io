<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>Linux系统磁盘管理 | Li Jie&#39;s blog</title>
  <meta name="keywords" content=" linux基础 ">
  <meta name="description" content="Linux系统磁盘管理 | Li Jie&#39;s blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Who am I?My name is 周李杰，最后一批90后，现居湖北武汉 大三程序狗一枚，现任上海天玑科技股份有限公司武汉分公司运维实习生一职 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 1print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多  个人座右铭：        我想拥有立足于社会的本领，然后尽可能的帮助他人">
<meta property="og:type" content="website">
<meta property="og:title" content="Li Jie&#39;s blog">
<meta property="og:url" content="https://github.com/chineselijie/about/index.html">
<meta property="og:site_name" content="Li Jie&#39;s blog">
<meta property="og:description" content="Who am I?My name is 周李杰，最后一批90后，现居湖北武汉 大三程序狗一枚，现任上海天玑科技股份有限公司武汉分公司运维实习生一职 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 1print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多  个人座右铭：        我想拥有立足于社会的本领，然后尽可能的帮助他人">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-28T17:25:29.218Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Li Jie&#39;s blog">
<meta name="twitter:description" content="Who am I?My name is 周李杰，最后一批90后，现居湖北武汉 大三程序狗一枚，现任上海天玑科技股份有限公司武汉分公司运维实习生一职 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 1print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多  个人座右铭：        我想拥有立足于社会的本领，然后尽可能的帮助他人">


<link rel="icon" href="/img/lijie.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1"></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.0.1"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value>
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/lijie.jpg" />
</a>
<div class="author">
    <span>Li Jie</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/chineselijie" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="weibo" href="https://weibo.com/u/6313523635?is_all=1" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="csdn" href="https://blog.csdn.net/ChineseLiJie" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="email" href="mailto:zhoulijie19990506@foxmail.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=775531910&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(47)</small></div></li>
    
        
            
            <li><div data-rel="linux基础">linux基础<small>(16)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="python">python<small>(11)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="linux进阶">linux进阶<small>(12)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="linux运维">linux运维<small>(4)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Git">Git<small>(2)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="47">
<input type="hidden" id="yelog_site_word_count" value="143.7k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://blog.csdn.net/ChineseLiJie">chineselijie CSDN</a></li>
            
            <li><a target="_blank" href="http://www.itwangqing.net.cn/">忘情老师</a></li>
            
            <li><a target="_blank" href="https://www.liaoxuefeng.com/">廖雪峰老师</a></li>
            
            <li><a target="_blank" href="https://www.linuxprobe.com/">linux就该这么学</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">linux基础</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color2">python</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">linux进阶</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">linux运维</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">Git</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class="linux基础 "
           href="/2019/08/29/1.RHEL 7.4 实验环境搭建/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="RHEL 7.4 实验环境搭建">RHEL 7.4 实验环境搭建</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/11.linux--网络进阶管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="网络进阶管理">网络进阶管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/2.python--计算机数据存储与进制/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python 计算机数据存储与进制">python 计算机数据存储与进制</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/7.linux--正则表达式/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="正则表达式">正则表达式</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/7.谈Python变量和数据类型/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="谈Python变量和数据类型">谈Python变量和数据类型</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/9.linux--shell脚本进阶/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="shell脚本进阶">shell脚本进阶</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/1.linux--openssh/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="openssh">openssh</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class=""
           href="/2019/08/29/1.linux--初步熟悉RHEL 8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="初步熟悉RHEL 8">初步熟悉RHEL 8</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/1.python--python基础理论讲解/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python基础理论讲解">python基础理论讲解</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class=""
           href="/2019/08/29/1.网络--子网划分/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="子网划分">子网划分</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/10.linux--shell脚本笔记(脚本)/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="shell脚本笔记(脚本)">shell脚本笔记(脚本)</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/11.linux--ISCSI服务/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="ISCSI服务">ISCSI服务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/14.linux--LVM磁盘管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="LVM磁盘管理">LVM磁盘管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/15.linux--linux基础练习/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="linux基础练习">linux基础练习</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/16.linux--RHCSA模拟/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="RHCSA复习">RHCSA复习</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/2.linux--FTP服务/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="FTP服务">FTP服务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux运维 "
           href="/2019/08/29/2.rsync/"
           data-tag="linux运维"
           data-author="" >
            <span class="post-title" title="rsync">rsync</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/3.linux--samba服务/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="samba服务">samba服务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/3.python--第一章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python第一章">python第一章</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux运维 "
           href="/2019/08/29/3.zabbix/"
           data-tag="linux运维"
           data-author="" >
            <span class="post-title" title="zabbix">zabbix</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/4.linux--权限管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="权限管理">权限管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/5.linux--linux计划任务/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="Linux计划任务">Linux计划任务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/6.linux--httpd服务/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="httpd服务">httpd服务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/6.python--第四章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python第四章">python第四章</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/8.linux--shell脚本基础/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="shell脚本基础">shell脚本基础</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/8.linux--软件管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="软件管理">软件管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/8.python的文件处理/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python文件处理">python文件处理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/12.linux--源码安装包管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="源码安装管理">源码安装管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/2.基础linux命令/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="Linux基础命令">Linux基础命令</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/4.linux--NFS服务/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="NFS服务">NFS服务</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/4.python--第二章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python第二章">python第二章</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/5.linux--MariaDB数据库/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="MariaDB数据库">MariaDB数据库</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="python "
           href="/2019/08/29/5.python--第三章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python第三章">python第三章</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/6.linux--yum工具的使用/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="yum工具的使用">yum工具的使用</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/7.linux--用户和组管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="用户和组管理">用户和组管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux运维 "
           href="/2019/08/29/1.linux--LNMP/"
           data-tag="linux运维"
           data-author="" >
            <span class="post-title" title="LNMP">LNMP</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/13.linux--linux系统磁盘管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="Linux系统磁盘管理">Linux系统磁盘管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/9.linux--linux进程管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="linux进程管理">linux进程管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/3.linux--linux基础/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="Linux基础">Linux基础</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux基础 "
           href="/2019/08/29/10.linux--网络基础管理/"
           data-tag="linux基础"
           data-author="" >
            <span class="post-title" title="网络基础管理">网络基础管理</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="linux进阶 "
           href="/2019/08/29/13.linux--RHCE  认证考试练习/"
           data-tag="linux进阶"
           data-author="" >
            <span class="post-title" title="RHCE 认证考试练习">RHCE 认证考试练习</span>
            <span class="post-date" title="2019-08-29 23:44:18">2019/08/29</span>
        </a>
        
        <a  class="Git "
           href="/2019/08/31/1.Git简介/"
           data-tag="Git"
           data-author="" >
            <span class="post-title" title="Git简介">Git简介</span>
            <span class="post-date" title="2019-08-31 00:20:12">2019/08/31</span>
        </a>
        
        <a  class="linux运维 "
           href="/2019/08/31/4.LAMP/"
           data-tag="linux运维"
           data-author="" >
            <span class="post-title" title="LAMP">LAMP</span>
            <span class="post-date" title="2019-08-31 00:18:12">2019/08/31</span>
        </a>
        
        <a  class="Git "
           href="/2019/09/12/2.git的安装与增、删、退回版本/"
           data-tag="Git"
           data-author="" >
            <span class="post-title" title="git的安装与增、删、版本退回">git的安装与增、删、版本退回</span>
            <span class="post-date" title="2019-09-12 22:55:02">2019/09/12</span>
        </a>
        
        <a  class="python "
           href="/2019/09/12/10.python编程从入门到实践--第三章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python编程从入门到实践--第三章">python编程从入门到实践--第三章</span>
            <span class="post-date" title="2019-09-12 22:55:38">2019/09/12</span>
        </a>
        
        <a  class="python "
           href="/2019/09/12/9.python编程从入门到实践--第二章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python编程从入门到实践--第二章">python编程从入门到实践--第二章</span>
            <span class="post-date" title="2019-09-12 22:55:38">2019/09/12</span>
        </a>
        
        <a  class="python "
           href="/2019/09/12/11.python编程从入门到实践--第四章/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python编程从入门到实践--第四章">python编程从入门到实践--第四章</span>
            <span class="post-date" title="2019-09-12 22:55:38">2019/09/12</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-13.linux--linux系统磁盘管理" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Linux系统磁盘管理</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a href="javascript:" data-rel="linux基础">linux基础</a>
            
        </span>
        
        
        <span class="tag">
            
            <a href="javascript:" class="color3">linux基础</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2019-08-22 20:09:27'>2019-08-29 23:44</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:5.1k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘基本概述"><span class="toc-text">磁盘基本概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#磁盘分类"><span class="toc-text">磁盘分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#固态硬盘的优缺点"><span class="toc-text">固态硬盘的优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux中磁盘命令方式"><span class="toc-text">Linux中磁盘命令方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MBR与GPT"><span class="toc-text">MBR与GPT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘容量检查"><span class="toc-text">磁盘容量检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘分区"><span class="toc-text">磁盘分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fdisk分区"><span class="toc-text">fdisk分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gdisk分区"><span class="toc-text">gdisk分区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘格式化"><span class="toc-text">磁盘格式化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#磁盘挂载"><span class="toc-text">磁盘挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#临时挂载磁盘"><span class="toc-text">临时挂载磁盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#永久挂载磁盘"><span class="toc-text">永久挂载磁盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载挂载磁盘"><span class="toc-text">卸载挂载磁盘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#学以致用环节"><span class="toc-text">学以致用环节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#交换分区swap"><span class="toc-text">交换分区swap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建swapfile"><span class="toc-text">创建swapfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#格式化swap分区"><span class="toc-text">格式化swap分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#检测当前swap分区情况"><span class="toc-text">检测当前swap分区情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开启新建的swap分区情况"><span class="toc-text">开启新建的swap分区情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭新建的swap分区"><span class="toc-text">关闭新建的swap分区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生产磁盘故障案例"><span class="toc-text">生产磁盘故障案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#练习"><span class="toc-text">练习</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="磁盘基本概述"><a href="#磁盘基本概述" class="headerlink" title="磁盘基本概述"></a>磁盘基本概述</h2><h3 id="磁盘分类"><a href="#磁盘分类" class="headerlink" title="磁盘分类"></a>磁盘分类</h3><ul>
<li>固态硬盘</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoKrq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoas1.jpg" alt></p>
<ul>
<li>机械硬盘</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoOLq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoxoT.jpg" alt></p>
<ul>
<li>服务器硬盘</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMT9W4.jpg" alt></p>
<h3 id="固态硬盘的优缺点"><a href="#固态硬盘的优缺点" class="headerlink" title="固态硬盘的优缺点"></a>固态硬盘的优缺点</h3><p>优点：</p>
<ul>
<li>读写速度快</li>
<li>防震抗摔性</li>
<li>低功耗</li>
<li>无噪音</li>
<li>工作温度范围大</li>
<li>轻便</li>
</ul>
<p>缺点</p>
<ul>
<li>容量小</li>
<li>寿命有限制</li>
<li>售价高</li>
</ul>
<h3 id="Linux中磁盘命令方式"><a href="#Linux中磁盘命令方式" class="headerlink" title="Linux中磁盘命令方式"></a>Linux中磁盘命令方式</h3><p>Linux中磁盘的命名方式与磁盘的接口有关，规则如下：</p>
<ul>
<li>传统IDE接口硬盘：<code>/dev/hd[a-z]</code></li>
<li>SCISI接口硬盘：<code>/dev/sd[a-z]</code></li>
<li>虚拟化硬盘：<code>/dev/vd[a-z]</code></li>
</ul>
<p>在设备名称的定义规则如下, 其他的分区可以以此类推<br>系统的第一块SCSI接口的硬盘名称为<code>/dev/sda</code><br>系统的第二块SCSI接口的硬盘名称为<code>/dev/sdb</code><br>系统中分区由数字编号表示, 1-4留给主分区使用和扩展分区, 逻辑分区从5开始</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//第一块磁盘</span><br><span class="line">/dev/sda</span><br><span class="line">//第一块磁盘的第一个分区</span><br><span class="line">/dev/sda1</span><br><span class="line">//第二块磁盘的第一个分区</span><br><span class="line">/dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="MBR与GPT"><a href="#MBR与GPT" class="headerlink" title="MBR与GPT"></a>MBR与GPT</h3><p>在使用新磁盘之前，你必须对其进行分区。MBR（Master Boot Record）和GPT（GUID Partition Table）是在磁盘上存储分区信息的两种不同方式。这些分区信息包含了分区从哪里开始的信息，这样操作系统才知道哪个扇区是属于哪个分区的，以及哪个分区是可以启动的。在磁盘上创建分区时，你必须在MBR和GPT之间做出选择</p>
<p>MBR是Master Boot Record的简称，也就是主引导记录，是位于磁盘最前边的一段引导（Loader）代码，主要用来引导操作系统的加载与启动，在传统<a href="https://www.baidu.com/s?wd=硬盘&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">硬盘</a>分区模式中，引导扇区是每个分区（Partition）的第一扇区，而主引导扇区是硬盘的第一扇区。为了方便计算机访问硬盘，把硬盘上的空间划分成许许多多的区块（英文叫sectors，即扇区），然后给每个区块分配一个地址，称为逻辑块地址（即LBA）。</p>
<blockquote>
<p>特点：</p>
<ol>
<li>MBR支持最大2TB磁盘，它无法处理大于2TB容量的磁盘</li>
<li>只支持最多4个主分区。若想要更多分区，需要创建扩展分区，并在其中创建逻辑分区</li>
</ol>
</blockquote>
<p>GPT磁盘是指使用GUID分区表的磁盘，GUID磁盘分区表（GUID Partition Table，缩写：GPT）其含义为“全局唯一标识磁盘分区表”，是一个实体硬盘的分区表的结构布局的标准，</p>
<blockquote>
<p>特点：</p>
<ol>
<li>GPT对磁盘大小没有限制</li>
<li>最多可以创建128个分区</li>
</ol>
</blockquote>
<p><strong>注意：</strong></p>
<blockquote>
<p>MBR与GPT之间互相转换会导致数据丢失</p>
</blockquote>
<p><a href="https://baike.baidu.com/item/%E4%B8%BB%E5%BC%95%E5%AF%BC%E8%AE%B0%E5%BD%95/7612638?fromtitle=mbr&fromid=10473976" target="_blank" rel="noopener">MBR</a></p>
<p><a href="https://baike.baidu.com/item/GPT/15413476" target="_blank" rel="noopener">GPT</a></p>
<p><a href="https://blog.csdn.net/u011198997/article/details/78734628" target="_blank" rel="noopener">MBR和GPT分区区别</a></p>
<h2 id="磁盘容量检查"><a href="#磁盘容量检查" class="headerlink" title="磁盘容量检查"></a>磁盘容量检查</h2><p>使用<code>df</code>命令查看磁盘容量，不加参数以k为单位：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">df -i   //查看inode使用情况</span><br><span class="line">df -h   //以G或者T或者M人性化方式显示</span><br><span class="line">df -T   //查看文件类型</span><br><span class="line"></span><br><span class="line">//使用df命令查看磁盘，下面分别介绍每列什么含义</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统              类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br></pre></td></tr></table></figure>

<p>使用<code>lsblk</code>查看分区情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  lsblk</span></span><br><span class="line">NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda             8:0    0   20G  0 disk</span><br><span class="line">├─sda1          8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2          8:2    0   19G  0 part</span><br><span class="line">  ├─rhel-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─rhel-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sr0            11:0    1  3.8G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<p>使用<code>du</code>命令查看目录或者文件的容量，不加参数以k为单位：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -sh opt  //人性化输出显示大小</span><br><span class="line">-s：列出总和</span><br><span class="line">-h：人性化显示容量信息</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看etc目录的大小</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># du -sh /etc</span></span><br><span class="line">43M     /etc</span><br></pre></td></tr></table></figure>

<h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><p>分区之前, 需要先给虚拟机添加一块磁盘，以便于我们做后续的实验vmware虚拟机，请按如下进行操作:</p>
<blockquote>
<p>1.找到对应虚拟主机点击右键, 选择设置<br>2.在硬件向导里面点击添加按钮, 在硬件类型中选中“硬盘”, 点击下一步<br>3.磁盘类型选择默认, 然后创建新虚拟磁盘, 调整大小(不要勾选立即分配空间)<br>4.最后点击下一步, 完成即可</p>
</blockquote>
<p><strong>分区工具有fdisk和gdisk，当硬盘小于2T的时候我们应该用fdisk来分区，而当硬盘大于2T的时候则应用gdisk来进行分区</strong></p>
<h3 id="fdisk分区"><a href="#fdisk分区" class="headerlink" title="fdisk分区"></a>fdisk分区</h3><blockquote>
<p>生产分区建议：如无特殊希求，直接使用整个磁盘即可，无需分区</p>
</blockquote>
<blockquote>
<p>学习分区建议： 1P+1E(3L) 2P+1E(2L) 3P+1E(1L) (仅适用于练习)</p>
<p>1P:一个主分区</p>
<p>1E:一个扩展分区</p>
<p>3L:三个逻辑分区</p>
</blockquote>
<blockquote>
<p> <strong>本章切记 学习分区加入两块磁盘，虚拟机中会出现/dev/sdb，sdc，请使用sdb或者sdc来练习，最好fdisk分区使用/dev/sdb，gdisk分区使用/dev/sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda</span></span><br><span class="line"></span><br><span class="line">磁盘 /dev/sda：21.5 GB, 21474836480 字节，41943040 个扇区</span><br><span class="line">Units = 扇区 of 1 * 512 = 512 bytes</span><br><span class="line">扇区大小(逻辑/物理)：512 字节 / 512 字节</span><br><span class="line">I/O 大小(最小/最佳)：512 字节 / 512 字节</span><br><span class="line">磁盘标签类型：dos</span><br><span class="line">磁盘标识符：0x000bf37c</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk /dev/sda</span></span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：m     //输入m获取帮助</span><br><span class="line">命令操作</span><br><span class="line">   a   toggle a bootable flag     //切换分区启动标记</span><br><span class="line">   b   edit bsd disklabel          //编辑sdb磁盘标签 </span><br><span class="line">   c   toggle the dos compatibility flag   //切换dos兼容模式 </span><br><span class="line">   d   delete a partition          //删除分区</span><br><span class="line">   g   create a new empty GPT partition table   //创建新的空GPT分区表</span><br><span class="line">   G   create an IRIX (SGI) partition table     //创建IRIX（SGI）分区表</span><br><span class="line">   l   list known partition types     //显示分区类型</span><br><span class="line">   m   <span class="built_in">print</span> this menu               //显示帮助菜单</span><br><span class="line">   n   add a new partition           //新建分区 </span><br><span class="line">   o   create a new empty DOS partition table    //创建新的空白分区表    </span><br><span class="line">   p   <span class="built_in">print</span> the partition table         //显示分区表的信息</span><br><span class="line">   q   quit without saving changes        //不保存退出</span><br><span class="line">   s   create a new empty Sun disklabel   //创建新的Sun磁盘标签</span><br><span class="line">   t   change a partition<span class="string">'s system id      //修改分区ID,可以通过l查看id</span></span><br><span class="line"><span class="string">   u   change display/entry units           //修改容量单位,磁柱或扇区</span></span><br><span class="line"><span class="string">   v   verify the partition table          //检验分区表 </span></span><br><span class="line"><span class="string">   w   write table to disk and exit         //保存退出 </span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)    //拓展功能</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建主分区</span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：n   //新建分区</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (0 primary, 0 extended, 4 free)    //主分区</span></span><br><span class="line"><span class="string">   e   extended       //扩展分区    </span></span><br><span class="line"><span class="string">Select (default p): p      //选择主分区  </span></span><br><span class="line"><span class="string">分区号 (1-4，默认 1)：     //默认回车</span></span><br><span class="line"><span class="string">起始 扇区 (2048-41943039，默认为 2048)：   //默认扇区回车</span></span><br><span class="line"><span class="string">将使用默认值 2048</span></span><br><span class="line"><span class="string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-41943039，默认为 41943039)：+505M  //分配505M</span></span><br><span class="line"><span class="string">分区 1 已设置为 Linux 类型，大小设为 505 MiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建扩展分区</span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：n    //新建分区</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 0 extended, 3 free)</span></span><br><span class="line"><span class="string">   e   extended</span></span><br><span class="line"><span class="string">Select (default p): e     //创建扩展分区</span></span><br><span class="line"><span class="string">分区号 (2-4，默认 2)：     //默认回车</span></span><br><span class="line"><span class="string">起始 扇区 (1036288-41943039，默认为 1036288)：   //默认扇区回车</span></span><br><span class="line"><span class="string">将使用默认值 1036288</span></span><br><span class="line"><span class="string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (1036288-41943039，默认为 41943039)：     //默认划分所有空间给扩展分区</span></span><br><span class="line"><span class="string">将使用默认值 41943039</span></span><br><span class="line"><span class="string">分区 2 已设置为 Extended 类型，大小设为 19.5 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建逻辑分区</span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：n   //新建分区</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 1 extended, 2 free)</span></span><br><span class="line"><span class="string">   l   logical (numbered from 5)</span></span><br><span class="line"><span class="string">Select (default p): l      //创建逻辑分区</span></span><br><span class="line"><span class="string">添加逻辑分区 5</span></span><br><span class="line"><span class="string">起始 扇区 (1038336-41943039，默认为 1038336)：</span></span><br><span class="line"><span class="string">将使用默认值 1038336</span></span><br><span class="line"><span class="string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (1038336-41943039，默认为 41943039)：+10G   //分配10G的逻辑分区</span></span><br><span class="line"><span class="string">分区 5 已设置为 Linux 类型，大小设为 10 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 查看分区创建</span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：p</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">磁盘 /dev/sda：21.5 GB, 21474836480 字节，41943040 个扇区</span></span><br><span class="line"><span class="string">Units = 扇区 of 1 * 512 = 512 bytes</span></span><br><span class="line"><span class="string">扇区大小(逻辑/物理)：512 字节 / 512 字节</span></span><br><span class="line"><span class="string">I/O 大小(最小/最佳)：512 字节 / 512 字节</span></span><br><span class="line"><span class="string">磁盘标签类型：dos</span></span><br><span class="line"><span class="string">磁盘标识符：0x000bf37c</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   设备 Boot      Start         End      Blocks   Id  System</span></span><br><span class="line"><span class="string">/dev/sda1            2048     1036287      517120   83  Linux</span></span><br><span class="line"><span class="string">/dev/sda2         1036288    41943039    20453376    5  Extended</span></span><br><span class="line"><span class="string">/dev/sda5         1038336    22009855    10485760   83  Linux</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 保存分区</span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：w</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Calling ioctl() to re-read partition table.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING: Re-reading the partition table failed with error 16: 设备或资源忙.</span></span><br><span class="line"><span class="string">The kernel still uses the old table. The new table will be used at</span></span><br><span class="line"><span class="string">the next reboot or after you run partprobe(8) or kpartx(8)</span></span><br><span class="line"><span class="string">正在同步磁盘。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 检查磁盘是否是MBR分区方式</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# fdisk -l /dev/sda | grep 类型</span></span><br><span class="line"><span class="string">磁盘标签类型：dos</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"># 安装parted, 刷新内核立即生效,无需重启</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# yum -y install parted</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h3 id="gdisk分区"><a href="#gdisk分区" class="headerlink" title="gdisk分区"></a>gdisk分区</h3><blockquote>
<p><strong>在这里可以把刚才加入的磁盘拿出来使用：/dev/sdc，下面sda都皆是指代sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装gdisk工具</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install gdisk</span></span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># gdisk /dev/sda</span></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): n       //创建新分区</span><br><span class="line">Partition number (1-128, default 1):     //默认回车 </span><br><span class="line">First sector (34-41943006, default = 2048) or &#123;+-&#125;size&#123;KMGTP&#125;:    //默认扇区回车</span><br><span class="line">Last sector (2048-41943006, default = 41943006) or &#123;+-&#125;size&#123;KMGTP&#125;: +505M   //分配505M空间   </span><br><span class="line">Current <span class="built_in">type</span> is <span class="string">'Linux filesystem'</span></span><br><span class="line">Hex code or GUID (L to show codes, Enter = 8300):     //默认回车 </span><br><span class="line">Changed <span class="built_in">type</span> of partition to <span class="string">'Linux filesystem'</span></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): p    //打印查看</span><br><span class="line">Disk /dev/sda: 41943040 sectors, 20.0 GiB</span><br><span class="line">Logical sector size: 512 bytes</span><br><span class="line">Disk identifier (GUID): 2EFF9F0B-87D9-4140-9ECE-AFBE23BB0C81</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 40908733 sectors (19.5 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048         1036287   505.0 MiB   8300  Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): w   //保存分区</span><br><span class="line"></span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line">PARTITIONS!!</span><br><span class="line"></span><br><span class="line">Do you want to proceed? (Y/N): y       //确认</span><br><span class="line">OK; writing new GUID partition table (GPT) to /dev/sda.</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查磁盘是否是gpt格式</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda | grep 类型</span></span><br><span class="line">WARNING: fdisk GPT support is currently new, and therefore <span class="keyword">in</span> an experimental phase. Use at your own discretion.</span><br><span class="line">磁盘标签类型：gpt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装parted, 刷新内核立即生效,无需重启</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install parted</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h2 id="磁盘格式化"><a href="#磁盘格式化" class="headerlink" title="磁盘格式化"></a>磁盘格式化</h2><p>使用<code>mkfs</code>命令格式化磁盘，创建文件系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkfs常用的选项有</span></span><br><span class="line">-b  //设定数据区块占用空间大小，目前支持1024、2048、4096 bytes每个块。</span><br><span class="line">-t  //用来指定什么类型的文件系统，可以是ext3，ext4, xfs</span><br><span class="line">-i  //设定inode的大小</span><br><span class="line">-N  //设定inode数量，防止Inode数量不够导致磁盘不足</span><br><span class="line">-L  //预设该分区的标签label</span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先使用lsblk，列出磁盘分区情况</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># lsblk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化整个sdb磁盘为ext4文件系统</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用-t指定方式创建ext4文件系统</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs -t ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以格式化sdb1分区为xfs文件系统</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.xfs  /dev/sdb1</span></span><br></pre></td></tr></table></figure>

<h2 id="磁盘挂载"><a href="#磁盘挂载" class="headerlink" title="磁盘挂载"></a>磁盘挂载</h2><p>在上面的内容中讲到了磁盘的分区和格式化, 那么格式化完了后, 如何使用, 这就涉及到了挂载这块磁盘</p>
<blockquote>
<p>挂载分区前需要创建挂载点, 挂载点以目录形式出现<br>如果往挂载点目录写入数据, 实际上会写入到该分区<br>挂载点建议是空目录, 不是也不影响挂载分区的使用，但是会隐藏原有的文件</p>
</blockquote>
<h3 id="临时挂载磁盘"><a href="#临时挂载磁盘" class="headerlink" title="临时挂载磁盘"></a>临时挂载磁盘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">命令：mount挂载磁盘，实质为文件系统指定访问入口</span><br><span class="line">mount -t       //指定文件系统挂载分区，如ext3，ext4, xfs</span><br><span class="line">mount -a       //重新读取/etc/fstab配置文件的所有分区</span><br><span class="line">mount -o       //指定挂载参数</span><br><span class="line"></span><br><span class="line"><span class="comment"># fstab被损坏情况下,让只读文件系统可写（正常情况下不使用）</span></span><br><span class="line">[root@localhost ~]<span class="comment">#mount -o rw，remount /  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载/dev/sdb1至db1目录</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /db1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t xfs /dev/sdb1  /db1</span></span><br></pre></td></tr></table></figure>

<h3 id="永久挂载磁盘"><a href="#永久挂载磁盘" class="headerlink" title="永久挂载磁盘"></a>永久挂载磁盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//使用blkid命令获取各分区的UUID</span><br><span class="line">[root@localhost ~]# blkid |grep &quot;sdb1&quot;</span><br><span class="line">/dev/sdb1: UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; TYPE=&quot;xfs&quot;</span><br><span class="line"></span><br><span class="line">//使用UUID挂载磁盘sdb1分区至于db1, 临时挂载</span><br><span class="line">[root@localhost ~]# mount UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; /db1</span><br><span class="line"></span><br><span class="line">//也可以把下面这行写到/etc/fstab中，永久挂载, 开机自动挂载</span><br><span class="line">[root@localhost ~]# tail -1 /etc/fstab    </span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1 xfs  defaults 0  0</span><br><span class="line"></span><br><span class="line">//加载fstab配置文件, 同时检测语法是否有错误</span><br><span class="line">[root@localhost ~]# mount –a</span><br></pre></td></tr></table></figure>

<p><code>fstab</code>配置文件介绍：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/fstab</span><br><span class="line"></span><br><span class="line">//分区标识(UUID或设备名)                    挂载点 文件类型    挂载参数    不检查 不备份</span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1     xfs     defaults    0     0</span><br><span class="line"></span><br><span class="line">//挂载参数, 可写fstab配置文件, 也可以mount时使用-o参数指定</span><br><span class="line">参数              参数意义                               系统默认值</span><br><span class="line">async           系统每隔一段时间把内存数据写入磁盘中，</span><br><span class="line">sync            时时同步内存和磁盘中数据；</span><br><span class="line">suid，nosuid     允许/不允许分区有suid属性                suid</span><br><span class="line">rw，ro           可以指定文件系统是只读(ro)或可写(rw)       rw</span><br><span class="line">exec，noexec     允许/不允许可执行文件执行，不要挂载根分区    exec</span><br><span class="line">user，nouser     允许/不允许root外的其他用户挂载分区        nouser</span><br><span class="line">auto，noauto     开机自动挂载/不自动挂载                    auto</span><br><span class="line">default         默认文件系统挂载设置 rw, suid, dev, exec, auto, nouser, async</span><br><span class="line"></span><br><span class="line">//加载所有配置</span><br><span class="line">[root@localhost ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="卸载挂载磁盘"><a href="#卸载挂载磁盘" class="headerlink" title="卸载挂载磁盘"></a>卸载挂载磁盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">umount -lf  //强制卸载挂载</span><br><span class="line"></span><br><span class="line">//使用站点目录卸载</span><br><span class="line">[root@localhost ~]# umount /db1</span><br><span class="line">//使用设备名卸载/dev/sdb1</span><br><span class="line">[root@localhost ~]# umount /dev/sdb1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//umount不能卸载的情况</span><br><span class="line">[root@localhost db1]# umount /db1  </span><br><span class="line">umount: /db1: device is busy.</span><br><span class="line">        (In some cases useful info about processes that use</span><br><span class="line">         the device is found by lsof(8) or fuser(1)</span><br><span class="line">       </span><br><span class="line">//如上情况解决办法有两种, 切换至其他目录 或使用&apos;-l&apos;选项强制卸载    </span><br><span class="line">[root@localhost db1]# umount -l /db1</span><br></pre></td></tr></table></figure>

<h2 id="学以致用环节"><a href="#学以致用环节" class="headerlink" title="学以致用环节"></a>学以致用环节</h2><blockquote>
<p>创建/mnt/cdrom目录，首先临时挂载光盘镜像，光盘镜像在/dev/cdrom</p>
<p>其次卸载挂载磁盘，然后永久挂载，写出详细的命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount /dev/cdrom /mnt/cdrom</span></span><br><span class="line">mount: /dev/sr0 写保护，将以只读方式挂载</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统              类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># umount /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统              类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/fstab | tail -n 1</span></span><br><span class="line">/dev/cdrom       /mnt/cdrom       iso9660               defaults        0 0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount -a</span></span><br><span class="line">mount: /dev/sr0 写保护，将以只读方式挂载</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统              类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br></pre></td></tr></table></figure>

<h2 id="交换分区swap"><a href="#交换分区swap" class="headerlink" title="交换分区swap"></a>交换分区swap</h2><p>交换分区SWAP就是LINUX下的虚拟内存分区,它的作用是在物理内存使用完之后,将磁盘空间(也就是SWAP分区)虚拟成内存来使用。</p>
<p>交换分区一般指定虚拟内存的大小为实际内存的1~1.5倍。如果实际内存超过8GB，可以直接划分16GB给虚拟内存即可，如果虚拟内存不够用的情况，须增加一个虚拟磁盘，由于不能给原有的磁盘重新分区，所以可以选择新建。</p>
<h3 id="创建swapfile"><a href="#创建swapfile" class="headerlink" title="创建swapfile"></a>创建swapfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1M count=1024</span></span><br><span class="line">//<span class="keyword">if</span>：指定源  一般写/dev/zero</span><br><span class="line">//of：指定目标</span><br><span class="line">//bs：定义块大小</span><br><span class="line">//count：数量</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一般适用于制作光盘</span></span><br></pre></td></tr></table></figure>

<h3 id="格式化swap分区"><a href="#格式化swap分区" class="headerlink" title="格式化swap分区"></a>格式化swap分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkswap -f /opt/newdisk</span></span><br><span class="line">正在设置交换空间版本 1，大小 = 1048572 KiB</span><br><span class="line">无标签，UUID=f8ce4f29-2c01-4d93-8e9c-f1f7d7349526</span><br></pre></td></tr></table></figure>

<h3 id="检测当前swap分区情况"><a href="#检测当前swap分区情况" class="headerlink" title="检测当前swap分区情况"></a>检测当前swap分区情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br></pre></td></tr></table></figure>

<h3 id="开启新建的swap分区情况"><a href="#开启新建的swap分区情况" class="headerlink" title="开启新建的swap分区情况"></a>开启新建的swap分区情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapon /opt/newdisk</span></span><br><span class="line">swapon: /opt/newdisk：不安全的权限 0644，建议使用 0600。</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        959M         77M         24M        947M        765M</span><br><span class="line">Swap:          3.0G         16K        3.0G</span><br><span class="line">        <span class="comment"># 此时此刻这里多出来1G</span></span><br></pre></td></tr></table></figure>

<h3 id="关闭新建的swap分区"><a href="#关闭新建的swap分区" class="headerlink" title="关闭新建的swap分区"></a>关闭新建的swap分区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapoff /opt/newdisk</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br><span class="line">          <span class="comment"># 还原到原来的2G</span></span><br></pre></td></tr></table></figure>

<h2 id="生产磁盘故障案例"><a href="#生产磁盘故障案例" class="headerlink" title="生产磁盘故障案例"></a>生产磁盘故障案例</h2><p>Inode被占满，导致磁盘有可用的剩余空间也无法继续使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1k count=1024</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4 -i 1024 /opt/newdisk</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /data</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t ext4 -o loop /opt/newdisk /data/</span></span><br><span class="line"></span><br><span class="line">//inode被占满</span><br><span class="line">[root@localhost ~]<span class="comment"># touch &#123;1..20000&#125;</span></span><br><span class="line">touch: cannot touch `19997<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `19998'</span>: No space left on device</span><br><span class="line">touch: cannot touch `19999<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `20000'</span>: No space left on device</span><br><span class="line"></span><br><span class="line">//inode被占满，剩余block也是无法继续使用</span><br><span class="line">[root@localhost ~]<span class="comment"># df -i|grep data</span></span><br><span class="line">/opt/newdisk      1024  1024       0  100% /data</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h|grep data</span></span><br><span class="line">/opt/newdisk    891K   34K  806K   5% /data</span><br></pre></td></tr></table></figure>

<p>Block空间即将被占满, 但删除大文件也没有释放空间</p>
<blockquote>
<p>假设现在线上正在运行Nginx服务, Nginx产生的日志已经达到了20个G, 磁盘眼看就看沾满了, 请问不重启Nginx的方式如何处理</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//是会删除文件, 但Nginx持续占用着文件, 所以空间并不会被释放</span><br><span class="line">rm -f access.log</span><br><span class="line"></span><br><span class="line">//正确做法如下, 清空该文件即可释放文件内容</span><br><span class="line">&gt; access.log</span><br><span class="line"><span class="comment"># 意思就是echo “” &gt; access.log</span></span><br><span class="line"><span class="comment">#  标准覆盖输出</span></span><br></pre></td></tr></table></figure>

<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">例子： 给系统新增加一个交换分区(swap)</span><br><span class="line"></span><br><span class="line">考试题目：一般是要求新建一个分区，并且把分区作为swap分区使用</span><br><span class="line"></span><br><span class="line">查看内存和交换分区的使用情况</span><br><span class="line"><span class="comment"># free -m</span></span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          1841        613       1227         16          0        258</span><br><span class="line">-/+ buffers/cache:        354       1486</span><br><span class="line">Swap:            0          0          0  &lt;--- 没有交换分区</span><br><span class="line"></span><br><span class="line"><span class="comment"># swapon -s  也能用该命令查看，只是默认也是没有交换分区所有没有输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  -l /dev/sdb</span></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   83  Linux  &lt;---准备把该分区作为交换分区</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1、新建一个分区，并且把分区类型更改为82 </span><br><span class="line">    新分区我们在上面的练习已经完成了，所以本例子不用分区，而是需要修改该分区的类型</span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  /dev/sdb</span></span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：l  列出所有支持的分区类型对应的id</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：t  修改分区id</span><br><span class="line">分区号 (1-5，默认 5)：2  修改第2个分区</span><br><span class="line">Hex 代码(输入 L 列出所有代码)：82  修改成id为82</span><br><span class="line">已将分区“Linux”的类型更改为“Linux swap / Solaris”</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：p</span><br><span class="line"></span><br><span class="line">   设备 Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   82  Linux swap / Solaris &lt;---修改成功</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line"></span><br><span class="line">强烈建议： 对分区做了修改后都刷新一下</span><br><span class="line"><span class="comment"># partprobe  /dev/sdb</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、把sdb2格式化为交换分区</span><br><span class="line"><span class="comment"># mkswap  /dev/sdb2</span></span><br><span class="line">正在设置交换空间版本 1，大小 = 2097148 KiB</span><br><span class="line">无标签，UUID=ba08eb90-2003-44e6-9769-9a9351aebb05</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3、启动交换分区</span><br><span class="line"><span class="comment"># swapon /dev/sdb2  或者  # swanon -a  启动所有交换分区</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看</span><br><span class="line"><span class="comment"># swapon -s</span></span><br><span class="line">文件名             类型      大小  已用  权限</span><br><span class="line">/dev/sdb2                               partition   2097148 0   -1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4、持久化保存交换分区的使用</span><br><span class="line"><span class="comment"># blkid /dev/sdb2</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">"ba08eb90-2003-44e6-9769-9a9351aebb05"</span> TYPE=<span class="string">"swap"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/fstab </span></span><br><span class="line">/dev/mapper/rhel-root   /                       xfs     defaults        0 0</span><br><span class="line">UUID=cb3299d6-16e0-4644-9686-27907eefb8f3 /boot                   xfs     defaults        0 0</span><br><span class="line">UUID=ba08eb90-2003-44e6-9769-9a9351aebb05  swap         swap    defaults  0 0</span><br></pre></td></tr></table></figure>


      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 775531910@qq.com </span>
    </div>
</article>


<p>
    <a href="javascript:void(0)" class="dashang" onclick="dashangToggle()">赏</a>
</p>


<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>Linux系统磁盘管理</p>
    <p><span class="copy-title">文章字数:</span><span class="post-count">5.1k</span></p>
    <p><span class="copy-title">本文作者:</span><a href="javascript:void(0)" title="Li Jie">Li Jie</a></p>
    <p><span class="copy-title">发布时间:</span>2019-08-29, 23:44:18</p>
    <p><span class="copy-title">最后更新:</span>2019-08-22, 20:09:27</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2019/08/29/13.linux--linux系统磁盘管理/" title="Linux系统磁盘管理">https://github.com/chineselijie/2019/08/29/13.linux--linux系统磁盘管理/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>



    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '',
            clientSecret: '',
            repo: 'chineselijie.github.io',
            owner: 'chineselijie',
            admin: ['chineselijie'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2019 Chineselijie</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="//cdn.bootcss.com/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#linux基础','#python','#linux进阶','#linux运维','#Git',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
