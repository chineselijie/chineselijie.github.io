<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Linuxç³»ç»Ÿç£ç›˜ç®¡ç† |  Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Linuxç³»ç»Ÿç£ç›˜ç®¡ç†
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.590Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">5.1kå­—</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">22åˆ†é’Ÿ</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="ç£ç›˜åŸºæœ¬æ¦‚è¿°"><a href="#ç£ç›˜åŸºæœ¬æ¦‚è¿°" class="headerlink" title="ç£ç›˜åŸºæœ¬æ¦‚è¿°"></a>ç£ç›˜åŸºæœ¬æ¦‚è¿°</h2><h3 id="ç£ç›˜åˆ†ç±»"><a href="#ç£ç›˜åˆ†ç±»" class="headerlink" title="ç£ç›˜åˆ†ç±»"></a>ç£ç›˜åˆ†ç±»</h3><ul>
<li>å›ºæ€ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoKrq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoas1.jpg" alt></p>
<ul>
<li>æœºæ¢°ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoOLq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoxoT.jpg" alt></p>
<ul>
<li>æœåŠ¡å™¨ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMT9W4.jpg" alt></p>
<h3 id="å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹"><a href="#å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹"></a>å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>è¯»å†™é€Ÿåº¦å¿«</li>
<li>é˜²éœ‡æŠ—æ‘”æ€§</li>
<li>ä½åŠŸè€—</li>
<li>æ— å™ªéŸ³</li>
<li>å·¥ä½œæ¸©åº¦èŒƒå›´å¤§</li>
<li>è½»ä¾¿</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>å®¹é‡å°</li>
<li>å¯¿å‘½æœ‰é™åˆ¶</li>
<li>å”®ä»·é«˜</li>
</ul>
<h3 id="Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼"><a href="#Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼" class="headerlink" title="Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼"></a>Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼</h3><p>Linuxä¸­ç£ç›˜çš„å‘½åæ–¹å¼ä¸ç£ç›˜çš„æ¥å£æœ‰å…³ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¼ ç»ŸIDEæ¥å£ç¡¬ç›˜ï¼š<code>/dev/hd[a-z]</code></li>
<li>SCISIæ¥å£ç¡¬ç›˜ï¼š<code>/dev/sd[a-z]</code></li>
<li>è™šæ‹ŸåŒ–ç¡¬ç›˜ï¼š<code>/dev/vd[a-z]</code></li>
</ul>
<p>åœ¨è®¾å¤‡åç§°çš„å®šä¹‰è§„åˆ™å¦‚ä¸‹, å…¶ä»–çš„åˆ†åŒºå¯ä»¥ä»¥æ­¤ç±»æ¨<br>ç³»ç»Ÿçš„ç¬¬ä¸€å—SCSIæ¥å£çš„ç¡¬ç›˜åç§°ä¸º<code>/dev/sda</code><br>ç³»ç»Ÿçš„ç¬¬äºŒå—SCSIæ¥å£çš„ç¡¬ç›˜åç§°ä¸º<code>/dev/sdb</code><br>ç³»ç»Ÿä¸­åˆ†åŒºç”±æ•°å­—ç¼–å·è¡¨ç¤º, 1-4ç•™ç»™ä¸»åˆ†åŒºä½¿ç”¨å’Œæ‰©å±•åˆ†åŒº, é€»è¾‘åˆ†åŒºä»5å¼€å§‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€å—ç£ç›˜</span><br><span class="line">/dev/sda</span><br><span class="line">//ç¬¬ä¸€å—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">/dev/sda1</span><br><span class="line">//ç¬¬äºŒå—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">/dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="MBRä¸GPT"><a href="#MBRä¸GPT" class="headerlink" title="MBRä¸GPT"></a>MBRä¸GPT</h3><p>åœ¨ä½¿ç”¨æ–°ç£ç›˜ä¹‹å‰ï¼Œä½ å¿…é¡»å¯¹å…¶è¿›è¡Œåˆ†åŒºã€‚MBRï¼ˆMaster Boot Recordï¼‰å’ŒGPTï¼ˆGUID Partition Tableï¼‰æ˜¯åœ¨ç£ç›˜ä¸Šå­˜å‚¨åˆ†åŒºä¿¡æ¯çš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚è¿™äº›åˆ†åŒºä¿¡æ¯åŒ…å«äº†åˆ†åŒºä»å“ªé‡Œå¼€å§‹çš„ä¿¡æ¯ï¼Œè¿™æ ·æ“ä½œç³»ç»Ÿæ‰çŸ¥é“å“ªä¸ªæ‰‡åŒºæ˜¯å±äºå“ªä¸ªåˆ†åŒºçš„ï¼Œä»¥åŠå“ªä¸ªåˆ†åŒºæ˜¯å¯ä»¥å¯åŠ¨çš„ã€‚åœ¨ç£ç›˜ä¸Šåˆ›å»ºåˆ†åŒºæ—¶ï¼Œä½ å¿…é¡»åœ¨MBRå’ŒGPTä¹‹é—´åšå‡ºé€‰æ‹©</p>
<p>MBRæ˜¯Master Boot Recordçš„ç®€ç§°ï¼Œä¹Ÿå°±æ˜¯ä¸»å¼•å¯¼è®°å½•ï¼Œæ˜¯ä½äºç£ç›˜æœ€å‰è¾¹çš„ä¸€æ®µå¼•å¯¼ï¼ˆLoaderï¼‰ä»£ç ï¼Œä¸»è¦ç”¨æ¥å¼•å¯¼æ“ä½œç³»ç»Ÿçš„åŠ è½½ä¸å¯åŠ¨ï¼Œåœ¨ä¼ ç»Ÿ<a href="https://www.baidu.com/s?wd=ç¡¬ç›˜&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">ç¡¬ç›˜</a>åˆ†åŒºæ¨¡å¼ä¸­ï¼Œå¼•å¯¼æ‰‡åŒºæ˜¯æ¯ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰çš„ç¬¬ä¸€æ‰‡åŒºï¼Œè€Œä¸»å¼•å¯¼æ‰‡åŒºæ˜¯ç¡¬ç›˜çš„ç¬¬ä¸€æ‰‡åŒºã€‚ä¸ºäº†æ–¹ä¾¿è®¡ç®—æœºè®¿é—®ç¡¬ç›˜ï¼ŒæŠŠç¡¬ç›˜ä¸Šçš„ç©ºé—´åˆ’åˆ†æˆè®¸è®¸å¤šå¤šçš„åŒºå—ï¼ˆè‹±æ–‡å«sectorsï¼Œå³æ‰‡åŒºï¼‰ï¼Œç„¶åç»™æ¯ä¸ªåŒºå—åˆ†é…ä¸€ä¸ªåœ°å€ï¼Œç§°ä¸ºé€»è¾‘å—åœ°å€ï¼ˆå³LBAï¼‰ã€‚</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>MBRæ”¯æŒæœ€å¤§2TBç£ç›˜ï¼Œå®ƒæ— æ³•å¤„ç†å¤§äº2TBå®¹é‡çš„ç£ç›˜</li>
<li>åªæ”¯æŒæœ€å¤š4ä¸ªä¸»åˆ†åŒºã€‚è‹¥æƒ³è¦æ›´å¤šåˆ†åŒºï¼Œéœ€è¦åˆ›å»ºæ‰©å±•åˆ†åŒºï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºé€»è¾‘åˆ†åŒº</li>
</ol>
</blockquote>
<p>GPTç£ç›˜æ˜¯æŒ‡ä½¿ç”¨GUIDåˆ†åŒºè¡¨çš„ç£ç›˜ï¼ŒGUIDç£ç›˜åˆ†åŒºè¡¨ï¼ˆGUID Partition Tableï¼Œç¼©å†™ï¼šGPTï¼‰å…¶å«ä¹‰ä¸ºâ€œå…¨å±€å”¯ä¸€æ ‡è¯†ç£ç›˜åˆ†åŒºè¡¨â€ï¼Œæ˜¯ä¸€ä¸ªå®ä½“ç¡¬ç›˜çš„åˆ†åŒºè¡¨çš„ç»“æ„å¸ƒå±€çš„æ ‡å‡†ï¼Œ</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>GPTå¯¹ç£ç›˜å¤§å°æ²¡æœ‰é™åˆ¶</li>
<li>æœ€å¤šå¯ä»¥åˆ›å»º128ä¸ªåˆ†åŒº</li>
</ol>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p>MBRä¸GPTä¹‹é—´äº’ç›¸è½¬æ¢ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±</p>
</blockquote>
<p><a href="https://baike.baidu.com/item/%E4%B8%BB%E5%BC%95%E5%AF%BC%E8%AE%B0%E5%BD%95/7612638?fromtitle=mbr&fromid=10473976" target="_blank" rel="noopener">MBR</a></p>
<p><a href="https://baike.baidu.com/item/GPT/15413476" target="_blank" rel="noopener">GPT</a></p>
<p><a href="https://blog.csdn.net/u011198997/article/details/78734628" target="_blank" rel="noopener">MBRå’ŒGPTåˆ†åŒºåŒºåˆ«</a></p>
<h2 id="ç£ç›˜å®¹é‡æ£€æŸ¥"><a href="#ç£ç›˜å®¹é‡æ£€æŸ¥" class="headerlink" title="ç£ç›˜å®¹é‡æ£€æŸ¥"></a>ç£ç›˜å®¹é‡æ£€æŸ¥</h2><p>ä½¿ç”¨<code>df</code>å‘½ä»¤æŸ¥çœ‹ç£ç›˜å®¹é‡ï¼Œä¸åŠ å‚æ•°ä»¥kä¸ºå•ä½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">df -i   //æŸ¥çœ‹inodeä½¿ç”¨æƒ…å†µ</span><br><span class="line">df -h   //ä»¥Gæˆ–è€…Tæˆ–è€…Mäººæ€§åŒ–æ–¹å¼æ˜¾ç¤º</span><br><span class="line">df -T   //æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨dfå‘½ä»¤æŸ¥çœ‹ç£ç›˜ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»æ¯åˆ—ä»€ä¹ˆå«ä¹‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>lsblk</code>æŸ¥çœ‹åˆ†åŒºæƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  lsblk</span></span><br><span class="line">NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda             8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1          8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2          8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€rhel-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€rhel-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sr0            11:0    1  3.8G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>du</code>å‘½ä»¤æŸ¥çœ‹ç›®å½•æˆ–è€…æ–‡ä»¶çš„å®¹é‡ï¼Œä¸åŠ å‚æ•°ä»¥kä¸ºå•ä½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -sh opt  //äººæ€§åŒ–è¾“å‡ºæ˜¾ç¤ºå¤§å°</span><br><span class="line">-sï¼šåˆ—å‡ºæ€»å’Œ</span><br><span class="line">-hï¼šäººæ€§åŒ–æ˜¾ç¤ºå®¹é‡ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŸ¥çœ‹etcç›®å½•çš„å¤§å°</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># du -sh /etc</span></span><br><span class="line">43M     /etc</span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜åˆ†åŒº"><a href="#ç£ç›˜åˆ†åŒº" class="headerlink" title="ç£ç›˜åˆ†åŒº"></a>ç£ç›˜åˆ†åŒº</h2><p>åˆ†åŒºä¹‹å‰, éœ€è¦å…ˆç»™è™šæ‹Ÿæœºæ·»åŠ ä¸€å—ç£ç›˜ï¼Œä»¥ä¾¿äºæˆ‘ä»¬åšåç»­çš„å®éªŒvmwareè™šæ‹Ÿæœºï¼Œè¯·æŒ‰å¦‚ä¸‹è¿›è¡Œæ“ä½œ:</p>
<blockquote>
<p>1.æ‰¾åˆ°å¯¹åº”è™šæ‹Ÿä¸»æœºç‚¹å‡»å³é”®, é€‰æ‹©è®¾ç½®<br>2.åœ¨ç¡¬ä»¶å‘å¯¼é‡Œé¢ç‚¹å‡»æ·»åŠ æŒ‰é’®, åœ¨ç¡¬ä»¶ç±»å‹ä¸­é€‰ä¸­â€œç¡¬ç›˜â€, ç‚¹å‡»ä¸‹ä¸€æ­¥<br>3.ç£ç›˜ç±»å‹é€‰æ‹©é»˜è®¤, ç„¶ååˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜, è°ƒæ•´å¤§å°(ä¸è¦å‹¾é€‰ç«‹å³åˆ†é…ç©ºé—´)<br>4.æœ€åç‚¹å‡»ä¸‹ä¸€æ­¥, å®Œæˆå³å¯</p>
</blockquote>
<p><strong>åˆ†åŒºå·¥å…·æœ‰fdiskå’Œgdiskï¼Œå½“ç¡¬ç›˜å°äº2Tçš„æ—¶å€™æˆ‘ä»¬åº”è¯¥ç”¨fdiskæ¥åˆ†åŒºï¼Œè€Œå½“ç¡¬ç›˜å¤§äº2Tçš„æ—¶å€™åˆ™åº”ç”¨gdiskæ¥è¿›è¡Œåˆ†åŒº</strong></p>
<h3 id="fdiskåˆ†åŒº"><a href="#fdiskåˆ†åŒº" class="headerlink" title="fdiskåˆ†åŒº"></a>fdiskåˆ†åŒº</h3><blockquote>
<p>ç”Ÿäº§åˆ†åŒºå»ºè®®ï¼šå¦‚æ— ç‰¹æ®Šå¸Œæ±‚ï¼Œç›´æ¥ä½¿ç”¨æ•´ä¸ªç£ç›˜å³å¯ï¼Œæ— éœ€åˆ†åŒº</p>
</blockquote>
<blockquote>
<p>å­¦ä¹ åˆ†åŒºå»ºè®®ï¼š 1P+1E(3L) 2P+1E(2L) 3P+1E(1L) (ä»…é€‚ç”¨äºç»ƒä¹ )</p>
<p>1P:ä¸€ä¸ªä¸»åˆ†åŒº</p>
<p>1E:ä¸€ä¸ªæ‰©å±•åˆ†åŒº</p>
<p>3L:ä¸‰ä¸ªé€»è¾‘åˆ†åŒº</p>
</blockquote>
<blockquote>
<p> <strong>æœ¬ç« åˆ‡è®° å­¦ä¹ åˆ†åŒºåŠ å…¥ä¸¤å—ç£ç›˜ï¼Œè™šæ‹Ÿæœºä¸­ä¼šå‡ºç°/dev/sdbï¼Œsdcï¼Œè¯·ä½¿ç”¨sdbæˆ–è€…sdcæ¥ç»ƒä¹ ï¼Œæœ€å¥½fdiskåˆ†åŒºä½¿ç”¨/dev/sdbï¼Œgdiskåˆ†åŒºä½¿ç”¨/dev/sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda</span></span><br><span class="line"></span><br><span class="line">ç£ç›˜ /dev/sdaï¼š21.5 GB, 21474836480 å­—èŠ‚ï¼Œ41943040 ä¸ªæ‰‡åŒº</span><br><span class="line">Units = æ‰‡åŒº of 1 * 512 = 512 bytes</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span><br><span class="line">ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x000bf37c</span><br><span class="line"></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk /dev/sda</span></span><br><span class="line">æ¬¢è¿ä½¿ç”¨ fdisk (util-linux 2.23.2)ã€‚</span><br><span class="line"></span><br><span class="line">æ›´æ”¹å°†åœç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æ‚¨å†³å®šå°†æ›´æ”¹å†™å…¥ç£ç›˜ã€‚</span><br><span class="line">ä½¿ç”¨å†™å…¥å‘½ä»¤å‰è¯·ä¸‰æ€ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šm     //è¾“å…¥mè·å–å¸®åŠ©</span><br><span class="line">å‘½ä»¤æ“ä½œ</span><br><span class="line">   a   toggle a bootable flag     //åˆ‡æ¢åˆ†åŒºå¯åŠ¨æ ‡è®°</span><br><span class="line">   b   edit bsd disklabel          //ç¼–è¾‘sdbç£ç›˜æ ‡ç­¾ </span><br><span class="line">   c   toggle the dos compatibility flag   //åˆ‡æ¢doså…¼å®¹æ¨¡å¼ </span><br><span class="line">   d   delete a partition          //åˆ é™¤åˆ†åŒº</span><br><span class="line">   g   create a new empty GPT partition table   //åˆ›å»ºæ–°çš„ç©ºGPTåˆ†åŒºè¡¨</span><br><span class="line">   G   create an IRIX (SGI) partition table     //åˆ›å»ºIRIXï¼ˆSGIï¼‰åˆ†åŒºè¡¨</span><br><span class="line">   l   list known partition types     //æ˜¾ç¤ºåˆ†åŒºç±»å‹</span><br><span class="line">   m   <span class="built_in">print</span> this menu               //æ˜¾ç¤ºå¸®åŠ©èœå•</span><br><span class="line">   n   add a new partition           //æ–°å»ºåˆ†åŒº </span><br><span class="line">   o   create a new empty DOS partition table    //åˆ›å»ºæ–°çš„ç©ºç™½åˆ†åŒºè¡¨    </span><br><span class="line">   p   <span class="built_in">print</span> the partition table         //æ˜¾ç¤ºåˆ†åŒºè¡¨çš„ä¿¡æ¯</span><br><span class="line">   q   quit without saving changes        //ä¸ä¿å­˜é€€å‡º</span><br><span class="line">   s   create a new empty Sun disklabel   //åˆ›å»ºæ–°çš„Sunç£ç›˜æ ‡ç­¾</span><br><span class="line">   t   change a partition<span class="string">'s system id      //ä¿®æ”¹åˆ†åŒºID,å¯ä»¥é€šè¿‡læŸ¥çœ‹id</span></span><br><span class="line"><span class="string">   u   change display/entry units           //ä¿®æ”¹å®¹é‡å•ä½,ç£æŸ±æˆ–æ‰‡åŒº</span></span><br><span class="line"><span class="string">   v   verify the partition table          //æ£€éªŒåˆ†åŒºè¡¨ </span></span><br><span class="line"><span class="string">   w   write table to disk and exit         //ä¿å­˜é€€å‡º </span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)    //æ‹“å±•åŠŸèƒ½</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºä¸»åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn   //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (0 primary, 0 extended, 4 free)    //ä¸»åˆ†åŒº</span></span><br><span class="line"><span class="string">   e   extended       //æ‰©å±•åˆ†åŒº    </span></span><br><span class="line"><span class="string">Select (default p): p      //é€‰æ‹©ä¸»åˆ†åŒº  </span></span><br><span class="line"><span class="string">åˆ†åŒºå· (1-4ï¼Œé»˜è®¤ 1)ï¼š     //é»˜è®¤å›è½¦</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (2048-41943039ï¼Œé»˜è®¤ä¸º 2048)ï¼š   //é»˜è®¤æ‰‡åŒºå›è½¦</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 2048</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (2048-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š+505M  //åˆ†é…505M</span></span><br><span class="line"><span class="string">åˆ†åŒº 1 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 505 MiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºæ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn    //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 0 extended, 3 free)</span></span><br><span class="line"><span class="string">   e   extended</span></span><br><span class="line"><span class="string">Select (default p): e     //åˆ›å»ºæ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">åˆ†åŒºå· (2-4ï¼Œé»˜è®¤ 2)ï¼š     //é»˜è®¤å›è½¦</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (1036288-41943039ï¼Œé»˜è®¤ä¸º 1036288)ï¼š   //é»˜è®¤æ‰‡åŒºå›è½¦</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 1036288</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (1036288-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š     //é»˜è®¤åˆ’åˆ†æ‰€æœ‰ç©ºé—´ç»™æ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 41943039</span></span><br><span class="line"><span class="string">åˆ†åŒº 2 å·²è®¾ç½®ä¸º Extended ç±»å‹ï¼Œå¤§å°è®¾ä¸º 19.5 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºé€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn   //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 1 extended, 2 free)</span></span><br><span class="line"><span class="string">   l   logical (numbered from 5)</span></span><br><span class="line"><span class="string">Select (default p): l      //åˆ›å»ºé€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">æ·»åŠ é€»è¾‘åˆ†åŒº 5</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (1038336-41943039ï¼Œé»˜è®¤ä¸º 1038336)ï¼š</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 1038336</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (1038336-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š+10G   //åˆ†é…10Gçš„é€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">åˆ†åŒº 5 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 10 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æŸ¥çœ‹åˆ†åŒºåˆ›å»º</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç£ç›˜ /dev/sdaï¼š21.5 GB, 21474836480 å­—èŠ‚ï¼Œ41943040 ä¸ªæ‰‡åŒº</span></span><br><span class="line"><span class="string">Units = æ‰‡åŒº of 1 * 512 = 512 bytes</span></span><br><span class="line"><span class="string">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span></span><br><span class="line"><span class="string">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x000bf37c</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span></span><br><span class="line"><span class="string">/dev/sda1            2048     1036287      517120   83  Linux</span></span><br><span class="line"><span class="string">/dev/sda2         1036288    41943039    20453376    5  Extended</span></span><br><span class="line"><span class="string">/dev/sda5         1038336    22009855    10485760   83  Linux</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># ä¿å­˜åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Calling ioctl() to re-read partition table.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING: Re-reading the partition table failed with error 16: è®¾å¤‡æˆ–èµ„æºå¿™.</span></span><br><span class="line"><span class="string">The kernel still uses the old table. The new table will be used at</span></span><br><span class="line"><span class="string">the next reboot or after you run partprobe(8) or kpartx(8)</span></span><br><span class="line"><span class="string">æ­£åœ¨åŒæ­¥ç£ç›˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ£€æŸ¥ç£ç›˜æ˜¯å¦æ˜¯MBRåˆ†åŒºæ–¹å¼</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# fdisk -l /dev/sda | grep ç±»å‹</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"># å®‰è£…parted, åˆ·æ–°å†…æ ¸ç«‹å³ç”Ÿæ•ˆ,æ— éœ€é‡å¯</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# yum -y install parted</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h3 id="gdiskåˆ†åŒº"><a href="#gdiskåˆ†åŒº" class="headerlink" title="gdiskåˆ†åŒº"></a>gdiskåˆ†åŒº</h3><blockquote>
<p><strong>åœ¨è¿™é‡Œå¯ä»¥æŠŠåˆšæ‰åŠ å…¥çš„ç£ç›˜æ‹¿å‡ºæ¥ä½¿ç”¨ï¼š/dev/sdcï¼Œä¸‹é¢sdaéƒ½çš†æ˜¯æŒ‡ä»£sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…gdiskå·¥å…·</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install gdisk</span></span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># gdisk /dev/sda</span></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): n       //åˆ›å»ºæ–°åˆ†åŒº</span><br><span class="line">Partition number (1-128, default 1):     //é»˜è®¤å›è½¦ </span><br><span class="line">First sector (34-41943006, default = 2048) or &#123;+-&#125;size&#123;KMGTP&#125;:    //é»˜è®¤æ‰‡åŒºå›è½¦</span><br><span class="line">Last sector (2048-41943006, default = 41943006) or &#123;+-&#125;size&#123;KMGTP&#125;: +505M   //åˆ†é…505Mç©ºé—´   </span><br><span class="line">Current <span class="built_in">type</span> is <span class="string">'Linux filesystem'</span></span><br><span class="line">Hex code or GUID (L to show codes, Enter = 8300):     //é»˜è®¤å›è½¦ </span><br><span class="line">Changed <span class="built_in">type</span> of partition to <span class="string">'Linux filesystem'</span></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): p    //æ‰“å°æŸ¥çœ‹</span><br><span class="line">Disk /dev/sda: 41943040 sectors, 20.0 GiB</span><br><span class="line">Logical sector size: 512 bytes</span><br><span class="line">Disk identifier (GUID): 2EFF9F0B-87D9-4140-9ECE-AFBE23BB0C81</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 40908733 sectors (19.5 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048         1036287   505.0 MiB   8300  Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): w   //ä¿å­˜åˆ†åŒº</span><br><span class="line"></span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line">PARTITIONS!!</span><br><span class="line"></span><br><span class="line">Do you want to proceed? (Y/N): y       //ç¡®è®¤</span><br><span class="line">OK; writing new GUID partition table (GPT) to /dev/sda.</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç£ç›˜æ˜¯å¦æ˜¯gptæ ¼å¼</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda | grep ç±»å‹</span></span><br><span class="line">WARNING: fdisk GPT support is currently new, and therefore <span class="keyword">in</span> an experimental phase. Use at your own discretion.</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šgpt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…parted, åˆ·æ–°å†…æ ¸ç«‹å³ç”Ÿæ•ˆ,æ— éœ€é‡å¯</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install parted</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜æ ¼å¼åŒ–"><a href="#ç£ç›˜æ ¼å¼åŒ–" class="headerlink" title="ç£ç›˜æ ¼å¼åŒ–"></a>ç£ç›˜æ ¼å¼åŒ–</h2><p>ä½¿ç”¨<code>mkfs</code>å‘½ä»¤æ ¼å¼åŒ–ç£ç›˜ï¼Œåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkfså¸¸ç”¨çš„é€‰é¡¹æœ‰</span></span><br><span class="line">-b  //è®¾å®šæ•°æ®åŒºå—å ç”¨ç©ºé—´å¤§å°ï¼Œç›®å‰æ”¯æŒ1024ã€2048ã€4096 bytesæ¯ä¸ªå—ã€‚</span><br><span class="line">-t  //ç”¨æ¥æŒ‡å®šä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æ˜¯ext3ï¼Œext4, xfs</span><br><span class="line">-i  //è®¾å®šinodeçš„å¤§å°</span><br><span class="line">-N  //è®¾å®šinodeæ•°é‡ï¼Œé˜²æ­¢Inodeæ•°é‡ä¸å¤Ÿå¯¼è‡´ç£ç›˜ä¸è¶³</span><br><span class="line">-L  //é¢„è®¾è¯¥åˆ†åŒºçš„æ ‡ç­¾label</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¦–å…ˆä½¿ç”¨lsblkï¼Œåˆ—å‡ºç£ç›˜åˆ†åŒºæƒ…å†µ</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># lsblk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–æ•´ä¸ªsdbç£ç›˜ä¸ºext4æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨-tæŒ‡å®šæ–¹å¼åˆ›å»ºext4æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs -t ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥æ ¼å¼åŒ–sdb1åˆ†åŒºä¸ºxfsæ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.xfs  /dev/sdb1</span></span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜æŒ‚è½½"><a href="#ç£ç›˜æŒ‚è½½" class="headerlink" title="ç£ç›˜æŒ‚è½½"></a>ç£ç›˜æŒ‚è½½</h2><p>åœ¨ä¸Šé¢çš„å†…å®¹ä¸­è®²åˆ°äº†ç£ç›˜çš„åˆ†åŒºå’Œæ ¼å¼åŒ–, é‚£ä¹ˆæ ¼å¼åŒ–å®Œäº†å, å¦‚ä½•ä½¿ç”¨, è¿™å°±æ¶‰åŠåˆ°äº†æŒ‚è½½è¿™å—ç£ç›˜</p>
<blockquote>
<p>æŒ‚è½½åˆ†åŒºå‰éœ€è¦åˆ›å»ºæŒ‚è½½ç‚¹, æŒ‚è½½ç‚¹ä»¥ç›®å½•å½¢å¼å‡ºç°<br>å¦‚æœå¾€æŒ‚è½½ç‚¹ç›®å½•å†™å…¥æ•°æ®, å®é™…ä¸Šä¼šå†™å…¥åˆ°è¯¥åˆ†åŒº<br>æŒ‚è½½ç‚¹å»ºè®®æ˜¯ç©ºç›®å½•, ä¸æ˜¯ä¹Ÿä¸å½±å“æŒ‚è½½åˆ†åŒºçš„ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šéšè—åŸæœ‰çš„æ–‡ä»¶</p>
</blockquote>
<h3 id="ä¸´æ—¶æŒ‚è½½ç£ç›˜"><a href="#ä¸´æ—¶æŒ‚è½½ç£ç›˜" class="headerlink" title="ä¸´æ—¶æŒ‚è½½ç£ç›˜"></a>ä¸´æ—¶æŒ‚è½½ç£ç›˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼šmountæŒ‚è½½ç£ç›˜ï¼Œå®è´¨ä¸ºæ–‡ä»¶ç³»ç»ŸæŒ‡å®šè®¿é—®å…¥å£</span><br><span class="line">mount -t       //æŒ‡å®šæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ†åŒºï¼Œå¦‚ext3ï¼Œext4, xfs</span><br><span class="line">mount -a       //é‡æ–°è¯»å–/etc/fstabé…ç½®æ–‡ä»¶çš„æ‰€æœ‰åˆ†åŒº</span><br><span class="line">mount -o       //æŒ‡å®šæŒ‚è½½å‚æ•°</span><br><span class="line"></span><br><span class="line"><span class="comment"># fstabè¢«æŸåæƒ…å†µä¸‹,è®©åªè¯»æ–‡ä»¶ç³»ç»Ÿå¯å†™ï¼ˆæ­£å¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">[root@localhost ~]<span class="comment">#mount -o rwï¼Œremount /  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½/dev/sdb1è‡³db1ç›®å½•</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /db1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t xfs /dev/sdb1  /db1</span></span><br></pre></td></tr></table></figure>

<h3 id="æ°¸ä¹…æŒ‚è½½ç£ç›˜"><a href="#æ°¸ä¹…æŒ‚è½½ç£ç›˜" class="headerlink" title="æ°¸ä¹…æŒ‚è½½ç£ç›˜"></a>æ°¸ä¹…æŒ‚è½½ç£ç›˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨blkidå‘½ä»¤è·å–å„åˆ†åŒºçš„UUID</span><br><span class="line">[root@localhost ~]# blkid |grep &quot;sdb1&quot;</span><br><span class="line">/dev/sdb1: UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; TYPE=&quot;xfs&quot;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨UUIDæŒ‚è½½ç£ç›˜sdb1åˆ†åŒºè‡³äºdb1, ä¸´æ—¶æŒ‚è½½</span><br><span class="line">[root@localhost ~]# mount UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; /db1</span><br><span class="line"></span><br><span class="line">//ä¹Ÿå¯ä»¥æŠŠä¸‹é¢è¿™è¡Œå†™åˆ°/etc/fstabä¸­ï¼Œæ°¸ä¹…æŒ‚è½½, å¼€æœºè‡ªåŠ¨æŒ‚è½½</span><br><span class="line">[root@localhost ~]# tail -1 /etc/fstab    </span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1 xfs  defaults 0  0</span><br><span class="line"></span><br><span class="line">//åŠ è½½fstabé…ç½®æ–‡ä»¶, åŒæ—¶æ£€æµ‹è¯­æ³•æ˜¯å¦æœ‰é”™è¯¯</span><br><span class="line">[root@localhost ~]# mount â€“a</span><br></pre></td></tr></table></figure>

<p><code>fstab</code>é…ç½®æ–‡ä»¶ä»‹ç»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/fstab</span><br><span class="line"></span><br><span class="line">//åˆ†åŒºæ ‡è¯†(UUIDæˆ–è®¾å¤‡å)                    æŒ‚è½½ç‚¹ æ–‡ä»¶ç±»å‹    æŒ‚è½½å‚æ•°    ä¸æ£€æŸ¥ ä¸å¤‡ä»½</span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1     xfs     defaults    0     0</span><br><span class="line"></span><br><span class="line">//æŒ‚è½½å‚æ•°, å¯å†™fstabé…ç½®æ–‡ä»¶, ä¹Ÿå¯ä»¥mountæ—¶ä½¿ç”¨-oå‚æ•°æŒ‡å®š</span><br><span class="line">å‚æ•°              å‚æ•°æ„ä¹‰                               ç³»ç»Ÿé»˜è®¤å€¼</span><br><span class="line">async           ç³»ç»Ÿæ¯éš”ä¸€æ®µæ—¶é—´æŠŠå†…å­˜æ•°æ®å†™å…¥ç£ç›˜ä¸­ï¼Œ</span><br><span class="line">sync            æ—¶æ—¶åŒæ­¥å†…å­˜å’Œç£ç›˜ä¸­æ•°æ®ï¼›</span><br><span class="line">suidï¼Œnosuid     å…è®¸/ä¸å…è®¸åˆ†åŒºæœ‰suidå±æ€§                suid</span><br><span class="line">rwï¼Œro           å¯ä»¥æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿæ˜¯åªè¯»(ro)æˆ–å¯å†™(rw)       rw</span><br><span class="line">execï¼Œnoexec     å…è®¸/ä¸å…è®¸å¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œï¼Œä¸è¦æŒ‚è½½æ ¹åˆ†åŒº    exec</span><br><span class="line">userï¼Œnouser     å…è®¸/ä¸å…è®¸rootå¤–çš„å…¶ä»–ç”¨æˆ·æŒ‚è½½åˆ†åŒº        nouser</span><br><span class="line">autoï¼Œnoauto     å¼€æœºè‡ªåŠ¨æŒ‚è½½/ä¸è‡ªåŠ¨æŒ‚è½½                    auto</span><br><span class="line">default         é»˜è®¤æ–‡ä»¶ç³»ç»ŸæŒ‚è½½è®¾ç½® rw, suid, dev, exec, auto, nouser, async</span><br><span class="line"></span><br><span class="line">//åŠ è½½æ‰€æœ‰é…ç½®</span><br><span class="line">[root@localhost ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="å¸è½½æŒ‚è½½ç£ç›˜"><a href="#å¸è½½æŒ‚è½½ç£ç›˜" class="headerlink" title="å¸è½½æŒ‚è½½ç£ç›˜"></a>å¸è½½æŒ‚è½½ç£ç›˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">umount -lf  //å¼ºåˆ¶å¸è½½æŒ‚è½½</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨ç«™ç‚¹ç›®å½•å¸è½½</span><br><span class="line">[root@localhost ~]# umount /db1</span><br><span class="line">//ä½¿ç”¨è®¾å¤‡åå¸è½½/dev/sdb1</span><br><span class="line">[root@localhost ~]# umount /dev/sdb1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//umountä¸èƒ½å¸è½½çš„æƒ…å†µ</span><br><span class="line">[root@localhost db1]# umount /db1  </span><br><span class="line">umount: /db1: device is busy.</span><br><span class="line">        (In some cases useful info about processes that use</span><br><span class="line">         the device is found by lsof(8) or fuser(1)</span><br><span class="line">       </span><br><span class="line">//å¦‚ä¸Šæƒ…å†µè§£å†³åŠæ³•æœ‰ä¸¤ç§, åˆ‡æ¢è‡³å…¶ä»–ç›®å½• æˆ–ä½¿ç”¨&apos;-l&apos;é€‰é¡¹å¼ºåˆ¶å¸è½½    </span><br><span class="line">[root@localhost db1]# umount -l /db1</span><br></pre></td></tr></table></figure>

<h2 id="å­¦ä»¥è‡´ç”¨ç¯èŠ‚"><a href="#å­¦ä»¥è‡´ç”¨ç¯èŠ‚" class="headerlink" title="å­¦ä»¥è‡´ç”¨ç¯èŠ‚"></a>å­¦ä»¥è‡´ç”¨ç¯èŠ‚</h2><blockquote>
<p>åˆ›å»º/mnt/cdromç›®å½•ï¼Œé¦–å…ˆä¸´æ—¶æŒ‚è½½å…‰ç›˜é•œåƒï¼Œå…‰ç›˜é•œåƒåœ¨/dev/cdrom</p>
<p>å…¶æ¬¡å¸è½½æŒ‚è½½ç£ç›˜ï¼Œç„¶åæ°¸ä¹…æŒ‚è½½ï¼Œå†™å‡ºè¯¦ç»†çš„å‘½ä»¤</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount /dev/cdrom /mnt/cdrom</span></span><br><span class="line">mount: /dev/sr0 å†™ä¿æŠ¤ï¼Œå°†ä»¥åªè¯»æ–¹å¼æŒ‚è½½</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># umount /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/fstab | tail -n 1</span></span><br><span class="line">/dev/cdrom       /mnt/cdrom       iso9660               defaults        0 0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount -a</span></span><br><span class="line">mount: /dev/sr0 å†™ä¿æŠ¤ï¼Œå°†ä»¥åªè¯»æ–¹å¼æŒ‚è½½</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br></pre></td></tr></table></figure>

<h2 id="äº¤æ¢åˆ†åŒºswap"><a href="#äº¤æ¢åˆ†åŒºswap" class="headerlink" title="äº¤æ¢åˆ†åŒºswap"></a>äº¤æ¢åˆ†åŒºswap</h2><p>äº¤æ¢åˆ†åŒºSWAPå°±æ˜¯LINUXä¸‹çš„è™šæ‹Ÿå†…å­˜åˆ†åŒº,å®ƒçš„ä½œç”¨æ˜¯åœ¨ç‰©ç†å†…å­˜ä½¿ç”¨å®Œä¹‹å,å°†ç£ç›˜ç©ºé—´(ä¹Ÿå°±æ˜¯SWAPåˆ†åŒº)è™šæ‹Ÿæˆå†…å­˜æ¥ä½¿ç”¨ã€‚</p>
<p>äº¤æ¢åˆ†åŒºä¸€èˆ¬æŒ‡å®šè™šæ‹Ÿå†…å­˜çš„å¤§å°ä¸ºå®é™…å†…å­˜çš„1~1.5å€ã€‚å¦‚æœå®é™…å†…å­˜è¶…è¿‡8GBï¼Œå¯ä»¥ç›´æ¥åˆ’åˆ†16GBç»™è™šæ‹Ÿå†…å­˜å³å¯ï¼Œå¦‚æœè™šæ‹Ÿå†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µï¼Œé¡»å¢åŠ ä¸€ä¸ªè™šæ‹Ÿç£ç›˜ï¼Œç”±äºä¸èƒ½ç»™åŸæœ‰çš„ç£ç›˜é‡æ–°åˆ†åŒºï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©æ–°å»ºã€‚</p>
<h3 id="åˆ›å»ºswapfile"><a href="#åˆ›å»ºswapfile" class="headerlink" title="åˆ›å»ºswapfile"></a>åˆ›å»ºswapfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1M count=1024</span></span><br><span class="line">//<span class="keyword">if</span>ï¼šæŒ‡å®šæº  ä¸€èˆ¬å†™/dev/zero</span><br><span class="line">//ofï¼šæŒ‡å®šç›®æ ‡</span><br><span class="line">//bsï¼šå®šä¹‰å—å¤§å°</span><br><span class="line">//countï¼šæ•°é‡</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€èˆ¬é€‚ç”¨äºåˆ¶ä½œå…‰ç›˜</span></span><br></pre></td></tr></table></figure>

<h3 id="æ ¼å¼åŒ–swapåˆ†åŒº"><a href="#æ ¼å¼åŒ–swapåˆ†åŒº" class="headerlink" title="æ ¼å¼åŒ–swapåˆ†åŒº"></a>æ ¼å¼åŒ–swapåˆ†åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkswap -f /opt/newdisk</span></span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 1048572 KiB</span><br><span class="line">æ— æ ‡ç­¾ï¼ŒUUID=f8ce4f29-2c01-4d93-8e9c-f1f7d7349526</span><br></pre></td></tr></table></figure>

<h3 id="æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ"><a href="#æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ" class="headerlink" title="æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ"></a>æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br></pre></td></tr></table></figure>

<h3 id="å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ"><a href="#å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ" class="headerlink" title="å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ"></a>å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapon /opt/newdisk</span></span><br><span class="line">swapon: /opt/newdiskï¼šä¸å®‰å…¨çš„æƒé™ 0644ï¼Œå»ºè®®ä½¿ç”¨ 0600ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        959M         77M         24M        947M        765M</span><br><span class="line">Swap:          3.0G         16K        3.0G</span><br><span class="line">        <span class="comment"># æ­¤æ—¶æ­¤åˆ»è¿™é‡Œå¤šå‡ºæ¥1G</span></span><br></pre></td></tr></table></figure>

<h3 id="å…³é—­æ–°å»ºçš„swapåˆ†åŒº"><a href="#å…³é—­æ–°å»ºçš„swapåˆ†åŒº" class="headerlink" title="å…³é—­æ–°å»ºçš„swapåˆ†åŒº"></a>å…³é—­æ–°å»ºçš„swapåˆ†åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapoff /opt/newdisk</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br><span class="line">          <span class="comment"># è¿˜åŸåˆ°åŸæ¥çš„2G</span></span><br></pre></td></tr></table></figure>

<h2 id="ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹"><a href="#ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹" class="headerlink" title="ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹"></a>ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹</h2><p>Inodeè¢«å æ»¡ï¼Œå¯¼è‡´ç£ç›˜æœ‰å¯ç”¨çš„å‰©ä½™ç©ºé—´ä¹Ÿæ— æ³•ç»§ç»­ä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1k count=1024</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4 -i 1024 /opt/newdisk</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /data</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t ext4 -o loop /opt/newdisk /data/</span></span><br><span class="line"></span><br><span class="line">//inodeè¢«å æ»¡</span><br><span class="line">[root@localhost ~]<span class="comment"># touch &#123;1..20000&#125;</span></span><br><span class="line">touch: cannot touch `19997<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `19998'</span>: No space left on device</span><br><span class="line">touch: cannot touch `19999<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `20000'</span>: No space left on device</span><br><span class="line"></span><br><span class="line">//inodeè¢«å æ»¡ï¼Œå‰©ä½™blockä¹Ÿæ˜¯æ— æ³•ç»§ç»­ä½¿ç”¨</span><br><span class="line">[root@localhost ~]<span class="comment"># df -i|grep data</span></span><br><span class="line">/opt/newdisk      1024  1024       0  100% /data</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h|grep data</span></span><br><span class="line">/opt/newdisk    891K   34K  806K   5% /data</span><br></pre></td></tr></table></figure>

<p>Blockç©ºé—´å³å°†è¢«å æ»¡, ä½†åˆ é™¤å¤§æ–‡ä»¶ä¹Ÿæ²¡æœ‰é‡Šæ”¾ç©ºé—´</p>
<blockquote>
<p>å‡è®¾ç°åœ¨çº¿ä¸Šæ­£åœ¨è¿è¡ŒNginxæœåŠ¡, Nginxäº§ç”Ÿçš„æ—¥å¿—å·²ç»è¾¾åˆ°äº†20ä¸ªG, ç£ç›˜çœ¼çœ‹å°±çœ‹æ²¾æ»¡äº†, è¯·é—®ä¸é‡å¯Nginxçš„æ–¹å¼å¦‚ä½•å¤„ç†</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//æ˜¯ä¼šåˆ é™¤æ–‡ä»¶, ä½†NginxæŒç»­å ç”¨ç€æ–‡ä»¶, æ‰€ä»¥ç©ºé—´å¹¶ä¸ä¼šè¢«é‡Šæ”¾</span><br><span class="line">rm -f access.log</span><br><span class="line"></span><br><span class="line">//æ­£ç¡®åšæ³•å¦‚ä¸‹, æ¸…ç©ºè¯¥æ–‡ä»¶å³å¯é‡Šæ”¾æ–‡ä»¶å†…å®¹</span><br><span class="line">&gt; access.log</span><br><span class="line"><span class="comment"># æ„æ€å°±æ˜¯echo â€œâ€ &gt; access.log</span></span><br><span class="line"><span class="comment">#  æ ‡å‡†è¦†ç›–è¾“å‡º</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å­ï¼š ç»™ç³»ç»Ÿæ–°å¢åŠ ä¸€ä¸ªäº¤æ¢åˆ†åŒº(swap)</span><br><span class="line"></span><br><span class="line">è€ƒè¯•é¢˜ç›®ï¼šä¸€èˆ¬æ˜¯è¦æ±‚æ–°å»ºä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”æŠŠåˆ†åŒºä½œä¸ºswapåˆ†åŒºä½¿ç”¨</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å†…å­˜å’Œäº¤æ¢åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µ</span><br><span class="line"><span class="comment"># free -m</span></span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          1841        613       1227         16          0        258</span><br><span class="line">-/+ buffers/cache:        354       1486</span><br><span class="line">Swap:            0          0          0  &lt;--- æ²¡æœ‰äº¤æ¢åˆ†åŒº</span><br><span class="line"></span><br><span class="line"><span class="comment"># swapon -s  ä¹Ÿèƒ½ç”¨è¯¥å‘½ä»¤æŸ¥çœ‹ï¼Œåªæ˜¯é»˜è®¤ä¹Ÿæ˜¯æ²¡æœ‰äº¤æ¢åˆ†åŒºæ‰€æœ‰æ²¡æœ‰è¾“å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  -l /dev/sdb</span></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   83  Linux  &lt;---å‡†å¤‡æŠŠè¯¥åˆ†åŒºä½œä¸ºäº¤æ¢åˆ†åŒº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1ã€æ–°å»ºä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”æŠŠåˆ†åŒºç±»å‹æ›´æ”¹ä¸º82 </span><br><span class="line">    æ–°åˆ†åŒºæˆ‘ä»¬åœ¨ä¸Šé¢çš„ç»ƒä¹ å·²ç»å®Œæˆäº†ï¼Œæ‰€ä»¥æœ¬ä¾‹å­ä¸ç”¨åˆ†åŒºï¼Œè€Œæ˜¯éœ€è¦ä¿®æ”¹è¯¥åˆ†åŒºçš„ç±»å‹</span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  /dev/sdb</span></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šl  åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„åˆ†åŒºç±»å‹å¯¹åº”çš„id</span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼št  ä¿®æ”¹åˆ†åŒºid</span><br><span class="line">åˆ†åŒºå· (1-5ï¼Œé»˜è®¤ 5)ï¼š2  ä¿®æ”¹ç¬¬2ä¸ªåˆ†åŒº</span><br><span class="line">Hex ä»£ç (è¾“å…¥ L åˆ—å‡ºæ‰€æœ‰ä»£ç )ï¼š82  ä¿®æ”¹æˆidä¸º82</span><br><span class="line">å·²å°†åˆ†åŒºâ€œLinuxâ€çš„ç±»å‹æ›´æ”¹ä¸ºâ€œLinux swap / Solarisâ€</span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šp</span><br><span class="line"></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   82  Linux swap / Solaris &lt;---ä¿®æ”¹æˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw</span><br><span class="line"></span><br><span class="line">å¼ºçƒˆå»ºè®®ï¼š å¯¹åˆ†åŒºåšäº†ä¿®æ”¹åéƒ½åˆ·æ–°ä¸€ä¸‹</span><br><span class="line"><span class="comment"># partprobe  /dev/sdb</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2ã€æŠŠsdb2æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒº</span><br><span class="line"><span class="comment"># mkswap  /dev/sdb2</span></span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 2097148 KiB</span><br><span class="line">æ— æ ‡ç­¾ï¼ŒUUID=ba08eb90-2003-44e6-9769-9a9351aebb05</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3ã€å¯åŠ¨äº¤æ¢åˆ†åŒº</span><br><span class="line"><span class="comment"># swapon /dev/sdb2  æˆ–è€…  # swanon -a  å¯åŠ¨æ‰€æœ‰äº¤æ¢åˆ†åŒº</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹</span><br><span class="line"><span class="comment"># swapon -s</span></span><br><span class="line">æ–‡ä»¶å             ç±»å‹      å¤§å°  å·²ç”¨  æƒé™</span><br><span class="line">/dev/sdb2                               partition   2097148 0   -1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4ã€æŒä¹…åŒ–ä¿å­˜äº¤æ¢åˆ†åŒºçš„ä½¿ç”¨</span><br><span class="line"><span class="comment"># blkid /dev/sdb2</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">"ba08eb90-2003-44e6-9769-9a9351aebb05"</span> TYPE=<span class="string">"swap"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/fstab </span></span><br><span class="line">/dev/mapper/rhel-root   /                       xfs     defaults        0 0</span><br><span class="line">UUID=cb3299d6-16e0-4644-9686-27907eefb8f3 /boot                   xfs     defaults        0 0</span><br><span class="line">UUID=ba08eb90-2003-44e6-9769-9a9351aebb05  swap         swap    defaults  0 0</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
      <div id="reward-btn">
        æ‰“èµ
      </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†/" data-id="ck6abn9vf003fsgu6phepk9sa"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2019/08/29/13.linux--RHCE  è®¤è¯è€ƒè¯•ç»ƒä¹ /" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            RHCE è®¤è¯è€ƒè¯•ç»ƒä¹ 
          
        </div>
      </a>
    
    
      <a href="/2019/08/29/12.linux--æºç å®‰è£…åŒ…ç®¡ç†/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">æºç å®‰è£…ç®¡ç†</div>
      </a>
    
  </nav>


  

  
  
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: 'ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/æ—…è¡Œ/">æ—…è¡Œ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com">æ‘„å½±</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>



<script src="/js/tocbot.min.js"></script>
<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>