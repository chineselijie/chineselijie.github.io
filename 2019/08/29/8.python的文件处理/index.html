<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>python文件处理 | Li Jie&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] python文件处理python对文件处理分为两种，一种是本地处理，而另外一种就是通过网络数据处理（也就是爬虫相关），而">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="python文件处理">
<meta property="og:url" content="https://github.com/chineselijie/2019/08/29/8.python的文件处理/index.html">
<meta property="og:site_name" content="Li Jie&#39;s blog">
<meta property="og:description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] python文件处理python对文件处理分为两种，一种是本地处理，而另外一种就是通过网络数据处理（也就是爬虫相关），而">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-25T13:18:34.634Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python文件处理">
<meta name="twitter:description" content="关于作者 周李杰，最后一批90后，现居湖北武汉 孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。 兴趣众多，然无一精通。正努力成为一个有趣的人。 12&amp;gt; print(&amp;quot;👆以上是不完整的我&amp;quot;) //请我吃大餐将会了解更多&amp;gt;  [TOC] python文件处理python对文件处理分为两种，一种是本地处理，而另外一种就是通过网络数据处理（也就是爬虫相关），而">
  
    <link rel="alternate" href="/atom.xml" title="Li Jie&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li Jie&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/chineselijie"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-8.python的文件处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/29/8.python的文件处理/" class="article-date">
  <time datetime="2019-08-29T15:44:18.569Z" itemprop="datePublished">2019-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python文件处理
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="python文件处理"><a href="#python文件处理" class="headerlink" title="python文件处理"></a>python文件处理</h1><p>python对文件处理分为两种，一种是本地处理，而另外一种就是通过网络数据处理（也就是爬虫相关），而本地的数据处理，主要是通过文件的都和写完成</p>
<blockquote>
<p> 我们先想一想平时对文件处理一般遇到过哪些问题:</p>
<ul>
<li>如何读取一个文件的内容，然后处理，最后写到一个新的文件</li>
<li>如何更改一个文件夹下面的某一些文件名</li>
</ul>
</blockquote>
<p>python的文件处理简单来说分为以下几点：</p>
<ul>
<li>文件的读写和关闭</li>
<li>文件的模式</li>
<li>文件的读取位置</li>
</ul>
<h2 id="文件的读取和关闭"><a href="#文件的读取和关闭" class="headerlink" title="文件的读取和关闭"></a>文件的读取和关闭</h2><p>python中想要获取文件里的内容，先要打开文件，然后才能都和写，而且写完之后一定要记得关闭</p>
<p>python中对文件的打开是通过open函数来获取一个句柄</p>
<ul>
<li>获取<code>读</code>的句柄，可以用<code>f.read()</code>进行读入</li>
<li>获取<code>写</code>的句柄<code>f</code>之后，就可以<code>f.weite()</code>进行写入</li>
<li>当你文件处理完毕之后，要关闭文件</li>
</ul>
<blockquote>
<p>应该会有人和博主思考的问题一样：为什么要关闭文件？</p>
<p>因为如果不正常关闭文件，缓冲在内存中的数据就不能真正地写入到文件中，可能造成数据丢失的现象</p>
</blockquote>
<h3 id="文件的打开"><a href="#文件的打开" class="headerlink" title="文件的打开"></a>文件的打开</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_obj=open(filename,mode=<span class="string">'r'</span>,buffering=<span class="number">-1</span>)</span><br><span class="line"><span class="comment"># 这里一共有3个参数，第一个是强制参数，后面两个是可选的</span></span><br><span class="line"><span class="comment"># mode可以是读，也可以是写，或者是追加，一般默认的是读文件</span></span><br><span class="line"><span class="comment"># buffering主要是设置缓冲区，一般我们都是用-1表示系统默认的缓冲区，若写100，则表示缓冲区为100</span></span><br></pre></td></tr></table></figure>

<h3 id="文件的读取"><a href="#文件的读取" class="headerlink" title="文件的读取"></a>文件的读取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">f.readline() <span class="comment"># 表示读文件的一行</span></span><br><span class="line">f.readlines() <span class="comment"># 表示把文件从头到位都读出来，并保存为一个列表</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>例如我们现在在D盘的python目录里面新建</p>
<p>123321.txt</p>
<p>123321.py</p>
<p>打开123321.txt输入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>打开123321.py，写入代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">print(f.readline())</span><br><span class="line">print(f.readlines())</span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123456789</span></span><br><span class="line"></span><br><span class="line">[<span class="string">'ABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>]</span><br></pre></td></tr></table></figure>

<h3 id="文件的写入"><a href="#文件的写入" class="headerlink" title="文件的写入"></a>文件的写入</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt,'</span>w<span class="string">')</span></span><br><span class="line"><span class="string">f.write() # 表示把字符串写入</span></span><br><span class="line"><span class="string">f.writelines() # 表示把一个列表写入</span></span><br><span class="line"><span class="string">f.close() # 表示关闭文件</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>例如我们现在在D盘的python目录里面新建</p>
<p>ABCCBA.txt</p>
<p>ABCCBA.py</p>
</blockquote>
<p>打开ABCCBA.py，写入代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'ABCCBA.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">f.write(<span class="string">'123321'</span>)</span><br><span class="line">f.writelines([<span class="string">'\nABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>])</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此处在后面如果没写入<code>f.close()</code>,那么在最后你打开ABCCBA.txt文件后是看不到你写入的内容的</p>
</blockquote>
<p>运行结果：</p>
<p>打开D盘的python目录下的ABCCBA.txt文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123321</span></span><br><span class="line">ABCDEFGHI</span><br><span class="line">IHGFEDCBA</span><br></pre></td></tr></table></figure>

<h3 id="文件的关闭"><a href="#文件的关闭" class="headerlink" title="文件的关闭"></a>文件的关闭</h3><blockquote>
<p>此处我介绍两种关闭方法</p>
</blockquote>
<p>1）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">.............</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>2）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">r'somefile.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.readlines()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>with用法是python极力推荐的一种使用方法，因为它能够自动帮你关掉文件，你只需要专注对文件的处理就可以了</p>
</blockquote>
<h2 id="文件的模式"><a href="#文件的模式" class="headerlink" title="文件的模式"></a>文件的模式</h2><p>在上面我仅仅只列举了python的读和写，那么其他的模式该怎么办呢？</p>
<p>其实python只需要改变一下open里面的模式参数就可以了</p>
<p>​                                    open函数中的模式参数</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">‘r’</td>
<td align="center">读模式</td>
</tr>
<tr>
<td align="center">‘w’</td>
<td align="center">写模式</td>
</tr>
<tr>
<td align="center">‘a’</td>
<td align="center">追加模式</td>
</tr>
<tr>
<td align="center">‘b’</td>
<td align="center">二进制模式</td>
</tr>
<tr>
<td align="center">‘+’</td>
<td align="center">读/写模式</td>
</tr>
<tr>
<td align="center">‘r+’</td>
<td align="center">以读写模式打开</td>
</tr>
<tr>
<td align="center">‘w+’</td>
<td align="center">以读写模式打开</td>
</tr>
<tr>
<td align="center">‘a+’</td>
<td align="center">以读写模式打开</td>
</tr>
<tr>
<td align="center">‘rb’</td>
<td align="center">以二进制读模式打开</td>
</tr>
</tbody></table>
<h2 id="文件的读取位置"><a href="#文件的读取位置" class="headerlink" title="文件的读取位置"></a>文件的读取位置</h2><p>有时候我们就只想读取文件中的某一部分，或者我们需要从文章的某一部分开始读取</p>
<p>那么这就要用到<code>seek()</code>函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_obj.seek(offset,whence=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># seek 主要是在文件中移动指针，从`whence`(0表示文件的开头，1表示当前位置，2表示文件的末尾)偏移offset个字符</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>例如在D盘python目录下的123321.txt文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="从头读取3个字符"><a href="#从头读取3个字符" class="headerlink" title="从头读取3个字符"></a>从头读取3个字符</h3><p>在当前目录下创建seek1.py文件，写入代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<h3 id="从尾部读取3个字符"><a href="#从尾部读取3个字符" class="headerlink" title="从尾部读取3个字符"></a>从尾部读取3个字符</h3><p>在当前目录下创建seek2.py文件，写入代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">b'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">-3</span>,<span class="number">2</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="实战1"><a href="#实战1" class="headerlink" title="实战1"></a>实战1</h2><blockquote>
<p>在D盘python目录里面创建2019.txt文件，写入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; hahaha</span><br><span class="line">&gt; hary</span><br><span class="line">&gt; natasha</span><br><span class="line">&gt; mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>请把2019.txt文件里面的内容都出来，写到一个新的文件，文件名：9102.txt，格式按照下面这种：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">1</span>:hahaha</span><br><span class="line">&gt; <span class="number">2</span>:hary</span><br><span class="line">&gt; <span class="number">3</span>:natasha</span><br><span class="line">&gt; <span class="number">4</span>:mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>在当前目录下创建test.py，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">'2019.txt'</span>) <span class="comment"># 打开文件</span></span><br><span class="line">count=f.readlines() <span class="comment"># 从文件中把内容都读出来，保存到列表中</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(count)): <span class="comment"># 关闭文件</span></span><br><span class="line">    count[i]=str(i+<span class="number">1</span>)+<span class="string">'：'</span>+count[i] <span class="comment"># 遍历列表，将每一行都加上下标</span></span><br><span class="line">print(count)</span><br><span class="line">f.close() <span class="comment"># 关闭文件</span></span><br><span class="line"></span><br><span class="line">f=open(<span class="string">'9102.txt'</span>,<span class="string">'w'</span>) <span class="comment"># 打开文件</span></span><br><span class="line">f.writelines(count) <span class="comment"># 把新的内容写入文件</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>优化重构代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_File</span><span class="params">()</span>:</span>    <span class="comment"># 把读文件抽成一个函数</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'2019.txt'</span>,<span class="string">'r'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        read_lines_from_file=f.readlines()</span><br><span class="line">        <span class="keyword">return</span> read_lines_from_file</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_File</span><span class="params">(count=[])</span>:</span>   <span class="comment"># 把写文件抽成一个函数</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'9102.txt'</span>,<span class="string">'w'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        f.writelines(count)</span><br><span class="line"></span><br><span class="line">new_lines=[]</span><br><span class="line"><span class="comment"># 遍历列表，将每一行都加上下标</span></span><br><span class="line"><span class="keyword">for</span> index,line <span class="keyword">in</span> enumerate(read_File()):</span><br><span class="line">    new_lines.append(str(index+<span class="number">1</span>)+<span class="string">'：'</span>+line)</span><br><span class="line"></span><br><span class="line">write_File(new_lines)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;1：hahaha\n&apos;, &apos;2：hary\n&apos;, &apos;3：natasha\n&apos;, &apos;4：mary&apos;]</span><br></pre></td></tr></table></figure>

<p>打开9102.txt文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>：hahaha</span><br><span class="line"><span class="number">2</span>：hary</span><br><span class="line"><span class="number">3</span>：natasha</span><br><span class="line"><span class="number">4</span>：mary</span><br></pre></td></tr></table></figure>

<h2 id="实战2"><a href="#实战2" class="headerlink" title="实战2"></a>实战2</h2><blockquote>
<p>在D盘python目录下创建hahaha文件夹，网上下载几张图片放进去，用代码将全部照片重命名为1.jpg，2.jpg，3.jpg,…….以此类推</p>
</blockquote>
<p>在D盘python目录下创建test2.py，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">renameall</span><span class="params">()</span>:</span></span><br><span class="line">    fileList = os.listdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#待修改文件夹</span></span><br><span class="line">    print(<span class="string">"修改前："</span>+str(fileList))  <span class="comment">#输出文件夹中包含的文件</span></span><br><span class="line">    currentpath = os.getcwd()  <span class="comment">#得到进程当前工作目录</span></span><br><span class="line">    os.chdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#将当前工作目录修改为待修改文件夹的位置</span></span><br><span class="line">    num=<span class="number">1</span>  <span class="comment">#名称变量</span></span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> fileList:  <span class="comment">#遍历文件夹中所有文件</span></span><br><span class="line">        pat=<span class="string">".+\.(jpg|png|gif)"</span>  <span class="comment">#匹配文件名正则表达式</span></span><br><span class="line">        pattern = re.findall(pat,fileName)  <span class="comment">#进行匹配</span></span><br><span class="line">        os.rename(fileName,(str(num)+<span class="string">'.'</span>+pattern[<span class="number">0</span>]))  <span class="comment">#文件重新命名</span></span><br><span class="line">        num = num+<span class="number">1</span>  <span class="comment">#改变编号，继续下一项</span></span><br><span class="line">    print(<span class="string">"---------------------------------------------------"</span>)</span><br><span class="line">    os.chdir(currentpath)  <span class="comment">#改回程序运行前的工作目录</span></span><br><span class="line">    sys.stdin.flush()  <span class="comment">#刷新</span></span><br><span class="line">    print(<span class="string">"修改后："</span>+str(os.listdir(<span class="string">r"D:\python\hahaha"</span>)))  <span class="comment">#输出修改后文件夹中包含的文件</span></span><br><span class="line">renameall()</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改前：[<span class="string">'ACG.GY_01.jpg'</span>, <span class="string">'ACG.GY_02.jpg'</span>, <span class="string">'ACG.GY_03.jpg'</span>, <span class="string">'ACG.GY_04.jpg'</span>, <span class="string">'ACG.GY_05.jpg'</span>, <span class="string">'ACG.GY_06.jpg'</span>, <span class="string">'ACG.GY_07.jpg'</span>, <span class="string">'ACG.GY_08.jpg'</span>, <span class="string">'ACG.GY_09.jpg'</span>, <span class="string">'ACG.GY_10.jpg'</span>, <span class="string">'ACG.GY_11.jpg'</span>, <span class="string">'ACG.GY_12.jpg'</span>, <span class="string">'ACG.GY_13.jpg'</span>, <span class="string">'ACG.GY_14.jpg'</span>, <span class="string">'ACG.GY_15.jpg'</span>, <span class="string">'ACG.GY_16.jpg'</span>, <span class="string">'ACG.GY_17.jpg'</span>, <span class="string">'ACG.GY_18.jpg'</span>, <span class="string">'ACG.GY_19.jpg'</span>, <span class="string">'ACG.GY_20.jpg'</span>, <span class="string">'ACG.GY_21.jpg'</span>, <span class="string">'ACG.GY_22.jpg'</span>, <span class="string">'ACG.GY_23.jpg'</span>, <span class="string">'ACG.GY_24.jpg'</span>]</span><br><span class="line">---------------------------------------------------</span><br><span class="line">修改后：[<span class="string">'1.jpg'</span>, <span class="string">'2.jpg'</span>, <span class="string">'3.jpg'</span>, <span class="string">'4.jpg'</span>, <span class="string">'5.jpg'</span>, <span class="string">'6.jpg'</span>, <span class="string">'7.jpg'</span>, <span class="string">'8.jpg'</span>, <span class="string">'9.jpg'</span>, <span class="string">'10.jpg'</span>, <span class="string">'11.jpg'</span>, <span class="string">'12.jpg'</span>, <span class="string">'13.jpg'</span>, <span class="string">'14.jpg'</span>, <span class="string">'15.jpg'</span>, <span class="string">'16.jpg'</span>, <span class="string">'17.jpg'</span>, <span class="string">'18.jpg'</span>, <span class="string">'19.jpg'</span>, <span class="string">'20.jpg'</span>, <span class="string">'21.jpg'</span>, <span class="string">'22.jpg'</span>, <span class="string">'23.jpg'</span>, <span class="string">'24.jpg'</span>]</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.python的文件处理/" data-id="ck627jzvg002eu4u6lwxh1do8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/29/9.linux--linux进程管理/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          linux进程管理
        
      </div>
    </a>
  
  
    <a href="/2019/08/29/8.linux--软件管理/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">软件管理</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux基础/">linux基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux运维/">linux运维</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux进阶/">linux进阶</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux基础/">linux基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux运维/">linux运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux进阶/">linux进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/linux基础/" style="font-size: 20px;">linux基础</a> <a href="/tags/linux运维/" style="font-size: 12.5px;">linux运维</a> <a href="/tags/linux进阶/" style="font-size: 17.5px;">linux进阶</a> <a href="/tags/python/" style="font-size: 15px;">python</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/29/git版本控制详解手册/">《Git分布式版本控制详解手册》</a>
          </li>
        
          <li>
            <a href="/2019/09/23/9.python内置函数/">python内置函数</a>
          </li>
        
          <li>
            <a href="/2019/09/22/5.PXE无人值守安装服务器/">PXE无人值守安装服务器</a>
          </li>
        
          <li>
            <a href="/2019/08/31/4.LAMP/">LAMP</a>
          </li>
        
          <li>
            <a href="/2019/08/29/16.linux--RHCSA模拟/">RHCSA复习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Li Jie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>