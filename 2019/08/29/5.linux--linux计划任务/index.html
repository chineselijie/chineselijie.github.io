<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Linuxè®¡åˆ’ä»»åŠ¡ |  Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

<link rel="alternate" href="/atom.xml" title="Li Jie's blog" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-5.linux--linuxè®¡åˆ’ä»»åŠ¡" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Linuxè®¡åˆ’ä»»åŠ¡
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/5.linux--linuxè®¡åˆ’ä»»åŠ¡/" class="article-date">
  <time datetime="2019-08-29T15:44:18.541Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">2.2kå­—</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">9åˆ†é’Ÿ</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°"><a href="#crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°"></a>crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°</h2><p>crond æ˜¯linuxä¸‹ç”¨æ¥å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›äº‹ä»¶çš„ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä¸windowsä¸‹çš„è®¡åˆ’ä»»åŠ¡ç±»ä¼¼ï¼Œå½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿåï¼Œé»˜è®¤ä¼šå®‰è£…æ­¤æœåŠ¡ å·¥å…·ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å¯åŠ¨crondè¿›ç¨‹ï¼Œcrondè¿›ç¨‹æ¯åˆ†é’Ÿä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œåˆ™è‡ªåŠ¨æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Schedule one-time tasks with at.   ä¸€æ¬¡æ€§è°ƒåº¦æ‰§è¡Œ at</span><br><span class="line">Schedule recurring jobs with cron. å¾ªç¯è°ƒåº¦æ‰§è¡Œ cron</span><br><span class="line">Schedule recurring system jobs. æ‰€æœ‰è®¡åˆ’ä»»åŠ¡æ‰§è¡Œä¸­çš„è¾“å‡ºéƒ½ä¼šä»¥é‚®ä»¶çš„æ–¹å¼å‘é€ç»™æŒ‡å®šç”¨æˆ·, é™¤éé‡å®šå‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å¾ªç¯è°ƒåº¦æ‰§è¡Œcron è¿›ç¨‹æ¯åˆ†é’Ÿä¼šå¤„ç†ä¸€æ¬¡è®¡åˆ’ä»»åŠ¡</span><br><span class="line">[root@zhoulijie ~]# systemctl status crond</span><br><span class="line">[root@zhoulijie ~]# ps aux | grep crond</span><br><span class="line">root       1238  0.0  0.0 126236  1672 ?        Ss   00:27   0:00 /usr/sbin/crond -n</span><br><span class="line">root      16029  0.0  0.0 112680   984 pts/0    S+   21:58   0:00 grep --color=auto crond</span><br></pre></td></tr></table></figure>

<p><strong>è®¡åˆ’ä»»åŠ¡åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</strong></p>
<ul>
<li><p>ç³»ç»Ÿçº§åˆ«çš„å®šæ—¶ä»»åŠ¡:</p>
<blockquote>
<p>æ¸…ç†ç³»ç»Ÿç¼“å­˜<br>ä¸´æ—¶æ–‡ä»¶æ¸…ç†<br>ç³»ç»Ÿä¿¡æ¯é‡‡é›†<br>æ—¥å¿—æ–‡ä»¶åˆ‡å‰²</p>
</blockquote>
</li>
<li><p>ç”¨æˆ·çº§åˆ«çš„å®šæ—¶ä»»åŠ¡:</p>
<blockquote>
<p>å®šæ—¶åŒæ­¥äº’è”ç½‘æ—¶é—´<br>å®šæ—¶å¤‡ä»½ç³»ç»Ÿé…ç½®æ–‡ä»¶<br>å®šæ—¶å¤‡ä»½æ•°æ®åº“æ–‡ä»¶</p>
</blockquote>
</li>
</ul>
<h2 id="crondé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#crondé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="crondé…ç½®æ–‡ä»¶è¯¦è§£"></a>crondé…ç½®æ–‡ä»¶è¯¦è§£</h2><ul>
<li><p>Linuxä¸‹çš„ä»»åŠ¡è°ƒåº¦åˆ†ä¸ºä¸¤ç±»ï¼Œç³»ç»Ÿä»»åŠ¡è°ƒåº¦å’Œç”¨æˆ·ä»»åŠ¡è°ƒåº¦ã€‚</p>
</li>
<li><p>ç³»ç»Ÿä»»åŠ¡è°ƒåº¦ï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚åœ¨/etcç›®å½•ä¸‹æœ‰ä¸€ä¸ªcrontabæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶              è¯´æ˜</span><br><span class="line">/etc/crontab        //crontabé…ç½®æ–‡ä»¶</span><br><span class="line">/etc/cron.deny      //è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·ä¸å…è®¸ä½¿ç”¨crontabå‘½ä»¤</span><br><span class="line">/var/spool/cron/*   //æ‰€æœ‰ç”¨æˆ·å®šæ—¶æ–‡ä»¶éƒ½å­˜æ”¾æ­¤ç›®å½•,æ–‡ä»¶ä»¥ç”¨æˆ·åå‘½å</span><br><span class="line">/var/log/cron       //å®šæ—¶ä»»åŠ¡æ‰§è¡Œåçš„æ—¥å¿—æ–‡ä»¶,å¯ç”¨æ¥å›æº¯</span><br></pre></td></tr></table></figure>

<h2 id="crondè®¡åˆ’ä»»åŠ¡ç®¡ç†"><a href="#crondè®¡åˆ’ä»»åŠ¡ç®¡ç†" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡ç®¡ç†"></a>crondè®¡åˆ’ä»»åŠ¡ç®¡ç†</h2><p><strong>crondä»»åŠ¡ç®¡ç†</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°          å«ä¹‰                æŒ‡å®šç¤ºä¾‹</span><br><span class="line">-e      ç¼–è¾‘crontabæ–‡ä»¶å†…å®¹       crontab -e</span><br><span class="line">-l      æŸ¥çœ‹crontabæ–‡ä»¶å†…å®¹       crontab -l</span><br><span class="line">-r      åˆ é™¤crontabæ–‡ä»¶å†…å®¹       crontab -r</span><br><span class="line">-u      ç®¡ç†å…¶ä»–ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡   crontab -u zhou -l</span><br><span class="line">æ³¨æ„: crontab &#123;-l -e&#125;å®é™…ä¸Šå°±æ˜¯åœ¨æ“ä½œ/var/spool/cron/username</span><br></pre></td></tr></table></figure>

<p><strong>crondæ—¶é—´å«ä¹‰</strong></p>
<p><img src="https://img-blog.csdn.net/20180301122140123" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59) //åˆ†é’Ÿ</span><br><span class="line"># |  .------------- hour (0 - 23)   //å°æ—¶</span><br><span class="line"># |  |  .---------- day of month (1 - 31)   //æ—¥æœŸ</span><br><span class="line"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr //æœˆä»½</span><br><span class="line"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat  //æ˜ŸæœŸ</span><br><span class="line"># |  |  |  |  |</span><br><span class="line"># *  *  *  *  *   command to be executed</span><br><span class="line"></span><br><span class="line">// *    è¡¨ç¤ºä»»æ„çš„(åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨)æ—¶é—´éƒ½æ‰§è¡Œ</span><br><span class="line">// -    è¡¨ç¤ºä¸€ä¸ªæ—¶é—´èŒƒå›´æ®µ, å¦‚5-7ç‚¹</span><br><span class="line">// ,    è¡¨ç¤ºåˆ†éš”æ—¶æ®µ, å¦‚6,0,4è¡¨ç¤ºå‘¨å…­ã€æ—¥ã€å››</span><br><span class="line">// */n  è¡¨ç¤ºæ¯éš”nå•ä½æ—¶é—´, å¦‚*/10 æ¯10åˆ†é’Ÿ</span><br></pre></td></tr></table></figure>

<p><strong>crondç¼–å†™ç¤ºä¾‹</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">00 02 * * * command      //æ¯å¤©2:00æ•´ </span><br><span class="line">00 02 1 * * command      //æ¯æœˆ1å·2:00æ•´ </span><br><span class="line">00 02 14 2 * command     //æ¯å¹´2æœˆ14å·2:00æ•´ </span><br><span class="line">00 02 * * 7 command      //æ¯å‘¨æ—¥2:00æ•´ </span><br><span class="line">00 02 * 6 5 command      //æ¯å¹´6æœˆçš„å‘¨äº”2:00æ•´</span><br><span class="line">00 02 14 * 7 command     //æ¯æœˆ14å·2:00æ•´æˆ–æ¯å‘¨æ—¥2:00æ•´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´éƒ½æ‰§è¡Œ</span><br><span class="line">00 02 14 2 7 command     //æ¯å¹´ 2 æœˆ 14 å· 2:00 æ•´ æˆ–è€… æ¯å‘¨æ—¥ 2:00 æ•´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´éƒ½æ‰§è¡Œ </span><br><span class="line">00 02 * * * command      //æ¯å¤©2:00æ•´</span><br><span class="line">*  02 * * * command      //æ¯å¤©2:00ä¸­çš„æ¯ä¸€åˆ†é’Ÿ (é”™è¯¯ç¤ºèŒƒ)</span><br><span class="line">* * * * *  command       //æ¯åˆ†é’Ÿæ‰§è¡Œ ls</span><br><span class="line">* * 14 2 *  command      //2æœˆ14å·çš„æ¯åˆ†é’Ÿ(é”™è¯¯ç¤ºèŒƒ)</span><br><span class="line">*/5 * * * *  command     //æ¯éš”5åˆ†é’Ÿ </span><br><span class="line">00 02 * 1,5,8 * command  //æ¯å¹´1,5,8æœˆçš„æ¯å¤©2:00æ•´ </span><br><span class="line">00 02 1-8 * *  command   //æ¯æœˆ1åˆ°8å·çš„2:00æ•´</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdn.net/20180510204632418?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NhdGVycGlsbGFyNw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt></p>
<p><strong>crondä¹¦å†™è§„èŒƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//1.ä¸ºè®¡åˆ’ä»»åŠ¡å¢åŠ å¿…è¦çš„æ³¨é‡Š</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">no crontab for root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">##time sync</span><br><span class="line">*/5 * * * * /usr/sbin/ntpdate time1.aliyun.com &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line">//2.è§„èŒƒè®¡åˆ’ä»»åŠ¡æ‰§è¡Œè„šæœ¬å­˜æ”¾çš„è·¯å¾„/scripts/</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">##backup www to /backup</span><br><span class="line">30 01 * * * /bin/sh /scripts/www_backup.sh &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line">//3.æ‰§è¡Œshellè„šæœ¬ä»»åŠ¡å‰åŠ /bin/sh, è„šæœ¬ç»“å°¾åŠ &amp;&gt;/dev/null</span><br><span class="line">//è°ƒè¯•å¥½ååº”å±è”½debugè¾“å‡ºä¿¡æ¯,é¿å…äº§ç”Ÿç³»ç»Ÿåƒåœ¾å ç”¨è¿‡å¤šinode, å¦‚éœ€è¾“å‡ºæ—¥å¿—, å¯é‡å®šå‘è‡³æ—¥å¿—æ–‡ä»¶</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">####backup www to /backup</span><br><span class="line">30 01 * * * /bin/sh /scripts/www_backup.sh &amp;&gt;/tmp/www_backup.log</span><br></pre></td></tr></table></figure>

<h2 id="crondé…ç½®ç¼–å†™å®ä¾‹"><a href="#crondé…ç½®ç¼–å†™å®ä¾‹" class="headerlink" title="crondé…ç½®ç¼–å†™å®ä¾‹"></a>crondé…ç½®ç¼–å†™å®ä¾‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line"></span><br><span class="line">#æ¯å¤©å‡Œæ™¨åˆ‡å‰²nginxæ—¥å¿—</span><br><span class="line">05 00 * * * /bin/bash -x /scripts/cut_nginx.sh &amp;&gt; /scripts/log/nginx.log</span><br><span class="line"></span><br><span class="line">#æ¯å¤©5ç‚¹å¤‡ä»½æ•°æ®åº“</span><br><span class="line">00 05 * * * /bin/bash -x /scripts/dump_sql.sh &amp;&gt;/scripts/log/mysql.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ³¨æ„ï¼š</span><br><span class="line">1.æˆ‘ä»¬æ‰€æœ‰çš„crondæœåŠ¡æ˜¯è¿è¡Œçš„ç¨‹åºã€‚è€Œcrontabå‘½ä»¤ç”¨æˆ·ç”¨æ¥è®¾ç½®å®šæ—¶è§„åˆ™çš„å‘½ä»¤ã€‚</span><br><span class="line">2.crondæœåŠ¡æ˜¯ä¼ä¸šç”Ÿäº§å·¥ä½œä¸­å¸¸ç”¨çš„é‡è¦æœåŠ¡ï¼Œatå¾ˆå°‘ä½¿ç”¨ï¼Œå¯ä»¥å¿½ç•¥ã€‚</span><br><span class="line">3.å‡ ä¹æ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šç”¨åˆ°crondæœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•"><a href="#crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•"></a>crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•</h2><blockquote>
<ol>
<li>è°ƒæ•´ä»»åŠ¡æ¯åˆ†é’Ÿæ‰§è¡Œ, æ£€æµ‹æ˜¯å¦æ˜¯å¦æ­£å¸¸, æœ‰äº›ä»»åŠ¡ä¸è¦é¢‘ç¹æ‰§è¡Œ</li>
<li>è°ƒæ•´ç³»ç»Ÿæ—¶é—´ç„¶ååœ¨æ£€æµ‹ä»»åŠ¡, ç”Ÿäº§ä¸å»ºè®®ç›´æ¥ä½¿ç”¨æ­¤æ–¹å¼</li>
<li>æ‰§è¡Œè„šæœ¬, å°†è„šæœ¬æ‰§è¡Œè¾“å‡ºå†™å…¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶, è§‚å¯Ÿæ—¥å¿—å†…å®¹æ˜¯å¦æ­£å¸¸</li>
<li>æ³¨æ„ä¸€äº›ä»»åŠ¡å‘½ä»¤å¸¦æ¥çš„é—®é¢˜echo â€œwangqingâ€ &gt;&gt;/tmp/test.log &amp;&gt;/dev/null</li>
<li>å‘½ä»¤ä½¿ç”¨ç»å¯¹è·¯å¾„, é˜²æ­¢æ— æ³•æ‰¾åˆ°å‘½ä»¤å¯¼è‡´å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ•…éšœ</li>
<li>æŸ¥çœ‹/var/log/cronæ—¥å¿—è¿›è¡Œè°ƒè¯•</li>
</ol>
</blockquote>
<p>å»ºè®®: å°†éœ€è¦å®šæœŸæ‰§è¡Œçš„ä»»åŠ¡å†™å…¥è„šæœ¬ä¸­, å»ºç«‹/scriptsç›®å½•ç»Ÿä¸€å­˜æ”¾è„šæœ¬, è„šæœ¬ä¸­å‘½ä»¤å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„,æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬æ£€æµ‹è¾“å‡ºæ˜¯å¦æ­£å¸¸, ç„¶åå°†è„šæœ¬åŠ å…¥è®¡åˆ’ä»»åŠ¡æµ‹è¯•, æµ‹è¯•åæ— é—®é¢˜å°†è„šæœ¬è¾“å‡ºå†™å…¥å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶ä¸­å³å¯ã€‚</p>
<p>è®¡åˆ’ä»»åŠ¡æ·»åŠ æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰‹åŠ¨æ‰§è¡Œä¿ç•™æ‰§è¡Œå‘½ä»¤çš„æ­£ç¡®ç»“æœ</li>
<li>ç¼–å†™è„šæœ¬<ul>
<li>è„šæœ¬éœ€è¦ç»Ÿä¸€è·¯å¾„/scripts</li>
<li>è„šæœ¬å¼€å¤´å»ºè®®å¡«å†™æ³¨é‡Šä¿¡æ¯, åŒ…æ‹¬æ‰§è¡Œæ—¶é—´ã€å‘¨æœŸã€ä»»åŠ¡</li>
<li>è„šæœ¬å†…å®¹å¤åˆ¶æ‰§è¡ŒæˆåŠŸçš„å‘½ä»¤è‡³è„šæœ¬æ–‡ä»¶ä¸­(å‡å°‘æ¯ä¸ªç¯èŠ‚å‡ºé”™å‡ ç‡)</li>
<li>è„šæœ¬å†…å®¹å°½å¯èƒ½çš„ä¼˜åŒ–, ä½¿ç”¨ä¸€äº›å˜é‡æˆ–ä½¿ç”¨ç®€å•çš„åˆ¤æ–­è¯­å¥</li>
<li>è„šæœ¬æ‰§è¡Œçš„è¾“å‡ºä¿¡æ¯ä¸è¦éšæ„æ‰“å°, å¯ä»¥é‡å®šå‘è‡³å…¶ä»–ä½ç½®ä¿ç•™æˆ–ä¸¢å…¥é»‘æ´</li>
</ul>
</li>
<li>æ‰§è¡Œè„šæœ¬<ul>
<li>ä½¿ç”¨bashæ‰§è¡Œ, é˜²æ­¢è„šæœ¬æ²¡æœ‰å¢åŠ æ‰§è¡Œæƒé™(/bin/bash)</li>
<li>æ‰§è¡Œå‘½ä»¤ä»¥åŠè„šæœ¬æˆåŠŸåå¹¶å¤åˆ¶è¯¥å‘½ä»¤</li>
</ul>
</li>
<li>ç¼–å†™è®¡åˆ’ä»»åŠ¡<ul>
<li>åŠ ä¸Šå¿…è¦çš„æ³¨é‡Šä¿¡æ¯, äººã€æ—¶é—´ã€ä»»åŠ¡</li>
<li>è®¾å®šè®¡åˆ’ä»»åŠ¡æ‰§è¡Œçš„å‘¨æœŸ</li>
<li>åŠ å…¥æ‰§è¡Œè„šæœ¬çš„å‘½ä»¤</li>
</ul>
</li>
<li>è°ƒè¯•è®¡åˆ’ä»»åŠ¡<ul>
<li>å¢åŠ ä»»åŠ¡é¢‘ç‡æµ‹è¯•ã€è°ƒæ•´ç³»ç»Ÿæ—¶é—´æµ‹è¯•(ä¸èƒ½ç”¨äºç”Ÿäº§)</li>
<li>æ£€æŸ¥ç¯å¢ƒå˜é‡é—®é¢˜ã€æ£€æŸ¥crondæœåŠ¡äº§ç”Ÿæ—¥å¿—è¿›è¡Œæ’æŸ¥</li>
</ul>
</li>
</ol>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.åœ¨linuxç³»ç»Ÿä¸­å¤‡ä»½è„šæœ¬backup.shéœ€è¦å†æ¯å‘¨1-5çš„æ¯å¤©ä¸‹åˆ1ç‚¹å’Œæ™šä¸Š8ç‚¹æ‰§è¡Œï¼Œä¸‹åˆ—å“ªä¸ªcronå‘½ä»¤å¯ä»¥å®Œæˆï¼ˆDï¼‰</p>
<p>a. 00 13,20 * 1-5 * backup.sh </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯å¹´çš„1-5æœˆçš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>b. 0 13,20 1,5 * * backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯æœˆçš„1å·å’Œ5å·çš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>c. * 13,20 * * 1-5 backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯æ˜¾ç¤º</span><br></pre></td></tr></table></figure>

<p>d. 00 13,20 * * 1-5 backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯å‘¨ä¸€-å‘¨äº”çš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ä»¥ä¸Šç­”æ¡ˆæ¯ä¸€è¡Œæ˜¯ä»€ä¹ˆå«ä¹‰</p>
<p>2.æ–°å»º/scripts/httpd.shæ–‡ä»¶ï¼Œå¹¶è®©/scripts/httpd.shè„šæœ¬åœ¨æ¯å¤©çš„00:10åˆ†æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /scripts</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># touch /scripts/httpd.sh</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># whereis sh</span></span><br><span class="line">sh: /usr/bin/sh /usr/share/man/man1/sh.1.gz /usr/share/man/man1p/sh.1p.gz</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">10 00 * * * /usr/bin/sh /scripts/httpd.sh</span><br></pre></td></tr></table></figure>

<p>3.æ–°å»º/backupç›®å½•,æ¯å‘¨ä¸€ä¸‹åˆ5:50å°†/backupç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…æˆ backup.tar.gz</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /bachup</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># whereis tar</span></span><br><span class="line">tar: /usr/bin/tar /usr/share/man/man1/tar.1.gz /usr/share/man/man5/tar.5.gz</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">50 17 * * 1 /usr/bin/tar -czf backup.tar.gz /backup</span><br></pre></td></tr></table></figure>

<p>4.å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©0ç‚¹5åˆ†æŠŠ/var/log/nginxä¸‹7å¤©å‰çš„æ–‡ä»¶è½¬ç§»åˆ°/backup/2018_xx_xxçš„ç›®å½•ä¸­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">5 0 * * * /usr/bin/find /var/<span class="built_in">log</span>/nginx -mtime +7 | xargs /usr/bin/mv &#123;&#125; /backup/$(date <span class="string">'+%Y_%m_%d'</span>)</span><br></pre></td></tr></table></figure>

<p>5.ç³»ç»Ÿè„šæœ¬/scripts/which.shï¼Œå¦‚ä½•å®šæ—¶æ¯éš”7åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">*/7 * * * *</span><br></pre></td></tr></table></figure>

<p>6.å¦‚ä½•ä¸å°å¿ƒåˆ é™¤äº†/var/spool/cron/rootæ–‡ä»¶ï¼Œè¯¥å¦‚ä½•æ¢å¤ã€‚</p>

      
      <!-- æ‰“èµ -->
      
      <div id="reward-btn">
        æ‰“èµ
      </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/5.linux--linuxè®¡åˆ’ä»»åŠ¡/" data-id="ck6akysf700228wu6hkhrffop"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2019/08/29/5.linux--MariaDBæ•°æ®åº“/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            MariaDBæ•°æ®åº“
          
        </div>
      </a>
    
    
      <a href="/2019/08/29/4.python--ç¬¬äºŒç« /" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">pythonç¬¬äºŒç« </div>
      </a>
    
  </nav>


  

  
  
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: 'ç»™æˆ‘çš„æ–‡ç« åŠ ç‚¹è¯„è®ºå§~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>å–œæ¬¢å°±æ‰“èµå§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>



<script src="/js/tocbot.min.js"></script>
<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>