<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover3.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Li Jie&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/"
    >ç½‘ç»œè¿›é˜¶ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.585Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h3 id="é“¾è·¯èšåˆ"><a href="#é“¾è·¯èšåˆ" class="headerlink" title="é“¾è·¯èšåˆ"></a>é“¾è·¯èšåˆ</h3><p>ç½‘å¡çš„é“¾è·¯èšåˆå°±æ˜¯å°†å¤šå—ç½‘å¡è¿æ¥èµ·æ¥ï¼Œå½“ä¸€å—ç½‘å¡æŸåï¼Œç½‘ç»œä¾æ—§å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢å› ä¸ºç½‘å¡æŸåå¸¦æ¥çš„æŸå¤±ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜ç½‘ç»œè®¿é—®é€Ÿåº¦ã€‚ </p>
<h3 id="æ¡¥æ¥ç½‘ç»œ"><a href="#æ¡¥æ¥ç½‘ç»œ" class="headerlink" title="æ¡¥æ¥ç½‘ç»œ"></a>æ¡¥æ¥ç½‘ç»œ</h3><p>æ¡¥æ¥ç½‘ç»œä¹Ÿå³ç½‘æ¡¥ï¼Œå¯åŸºäºMACåœ°å€åœ¨ç½‘ç»œé—´è½¬å‘æµé‡ã€‚ç½‘æ¡¥è¯†åˆ«å“ªäº›ä¸»æœºè¿æ¥åˆ°æ¯ä¸ªç½‘ç»œï¼Œæ„å»ºMACåœ°å€è¡¨ï¼Œç„¶åæ ¹æ®è¯¥è¡¨åšå‡ºåŒ…è½¬å‘å†³ç­–ã€‚</p>
<p>è½¯ä»¶ç½‘æ¡¥çš„æœ€å¸¸è§åº”ç”¨æ˜¯åœ¨è™šæ‹ŸåŒ–åº”ç”¨ç¨‹åºä¸­ï¼Œç”¨äºåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè™šæ‹ŸNICä¸­å…±äº«ä¸€ä¸ªç¡¬ä»¶NICã€‚</p>
<h3 id="é“¾è·¯èšåˆé…ç½®"><a href="#é“¾è·¯èšåˆé…ç½®" class="headerlink" title="é“¾è·¯èšåˆé…ç½®"></a>é“¾è·¯èšåˆé…ç½®</h3><h4 id="é…ç½®bondèšåˆé“¾è·¯"><a href="#é…ç½®bondèšåˆé“¾è·¯" class="headerlink" title="é…ç½®bondèšåˆé“¾è·¯"></a>é…ç½®bondèšåˆé“¾è·¯</h4><h4 id="é…ç½®bong0"><a href="#é…ç½®bong0" class="headerlink" title="é…ç½®bong0"></a>é…ç½®bong0</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">eth1        ethernet  å·²æ–­å¼€  --     </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="åˆ›å»ºbond0ï¼Œ-æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie"><a href="#åˆ›å»ºbond0ï¼Œ-æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie" class="headerlink" title="åˆ›å»ºbond0ï¼Œ æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie"></a>åˆ›å»ºbond0ï¼Œ æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond mode balance-rr con-name zhoulijie ifname bond0 ipv4.method manual ipv4.addresses 192.168.83.250/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2</span></span><br><span class="line">è¿æ¥â€œzhoulijieâ€(99fe45cb-5d4a-4288-b0b1-1fd2202d25e1) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0"></a>æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj ifname eth0 master bond0</span></span><br><span class="line">è¿æ¥â€œzljâ€(4a185231-5752-4e60-b20d-92fce9ed90e2) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj1 ifname eth1 master bond0</span></span><br><span class="line">è¿æ¥â€œzlj1â€(2883fd9a-2ce9-4e51-bde2-679b3920fae5) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹bondé…ç½®ä¿¡æ¯"><a href="#æŸ¥çœ‹bondé…ç½®ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹bondé…ç½®ä¿¡æ¯"></a>æŸ¥çœ‹bondé…ç½®ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cat /proc/net/bonding/bond0</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: load balancing (round-robin)</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth1</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:71</span><br><span class="line">Slave queue ID: 0</span><br></pre></td></tr></table></figure>

<h5 id="å…³é—­eth0ç½‘å¡-æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸"><a href="#å…³é—­eth0ç½‘å¡-æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸" class="headerlink" title="å…³é—­eth0ç½‘å¡, æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸"></a>å…³é—­eth0ç½‘å¡, æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device disconnect eth0</span></span><br><span class="line">æˆåŠŸæ–­å¼€è®¾å¤‡ <span class="string">'eth0'</span>ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®bong1"><a href="#é…ç½®bong1" class="headerlink" title="é…ç½®bong1"></a>é…ç½®bong1</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">eth1        ethernet  å·²æ–­å¼€  --     </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie"><a href="#åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie" class="headerlink" title="åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie"></a>åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bond con-name zhoulijie ifname bond1 mode active-backup ipv4.method manual ipv4.addresses 192.168.83.250/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2</span><br><span class="line">è¿æ¥â€œzhoulijieâ€(c4c7078e-f912-46fd-af84-6c414267a45b) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1"></a>æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj ifname eth0 master bond1</span></span><br><span class="line">è¿æ¥â€œzljâ€(280b5deb-e05f-45f7-b771-1c2a325b63c7) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj1 ifname eth1 master bond1</span></span><br><span class="line">è¿æ¥â€œzlj1â€(d0c28c77-5808-43cc-86f2-f2aefda5304f) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="å¯ç”¨è¿æ¥"><a href="#å¯ç”¨è¿æ¥" class="headerlink" title="å¯ç”¨è¿æ¥"></a>å¯ç”¨è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zhoulijie</span></span><br><span class="line">æˆåŠŸæ¿€æ´»ï¼ˆä¸»æœåŠ¡å™¨ç­‰å¾…ä»æœåŠ¡å™¨ï¼‰è¿æ¥ï¼ˆD-Bus æ¿€æ´»è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/7ï¼‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zlj</span></span><br><span class="line">è¿æ¥å·²æˆåŠŸæ¿€æ´»ï¼ˆD-Bus æ´»åŠ¨è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/9ï¼‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zlj1</span></span><br><span class="line">è¿æ¥å·²æˆåŠŸæ¿€æ´»ï¼ˆD-Bus æ´»åŠ¨è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/10ï¼‰</span><br></pre></td></tr></table></figure>

<h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cat /proc/net/bonding/bond1</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup)</span><br><span class="line">Primary Slave: None</span><br><span class="line">Currently Active Slave: eth0</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth0</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:67</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth1</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:71</span><br><span class="line">Slave queue ID: 0</span><br></pre></td></tr></table></figure>

<h5 id="åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡"><a href="#åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡" class="headerlink" title="åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡"></a>åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device disconnect eth0</span></span><br><span class="line">æˆåŠŸæ–­å¼€è®¾å¤‡ <span class="string">'eth0'</span>ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢"><a href="#eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢" class="headerlink" title="eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢"></a>eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># grep "Currently Active Slave" /proc/net/bonding/bond1</span></span><br><span class="line">Currently Active Slave: eth1</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®teamèšåˆé“¾è·¯"><a href="#é…ç½®teamèšåˆé“¾è·¯" class="headerlink" title="é…ç½®teamèšåˆé“¾è·¯"></a>é…ç½®teamèšåˆé“¾è·¯</h4><p><code>centos/rhce7</code>ä½¿ç”¨<code>teaming</code>å®ç°èšåˆé“¾è·¯,èƒ½å¤Ÿæä¾›ç½‘å¡ç»‘å®šä¹‹åçš„ç½‘ç»œååæ€§èƒ½,å¹¶ä¸”æä¾›ç½‘å¡çš„æ•…éšœåˆ‡æ¢å¤„ç†èƒ½åŠ›ã€‚<br><code>Team</code>æ˜¯åŸºäºä¸€ä¸ªå°å‹å†…æ ¸é©±åŠ¨å®ç°èšåˆé“¾è·¯ï¼Œåœ¨ç”¨æˆ·å±‚æä¾›<code>teamd</code>å‘½ä»¤å®ç°é“¾è·¯ç®¡ç†ã€‚</p>
<p><code>teamd</code>å¯ä»¥å®ç°ä»¥ä¸‹æ¨¡å¼çš„èšåˆé“¾è·¯</p>
<blockquote>
<p>broadcast å¹¿æ’­å®¹é”™<br>roundrobin è´Ÿè½½è½®è¯¢<br>activebackup ä¸»å¤‡(å¿…è€ƒ)<br>loadbalance è´Ÿè½½å‡è¡¡<br>lacp éœ€è¦äº¤æ¢æœºæ”¯æŒlacpåè®®</p>
</blockquote>
<h5 id="è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š"><a href="#è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š" class="headerlink" title="è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š"></a>è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type team con-name team0 ifname team0 config &apos;&#123;&quot;runner&quot;:&#123;&quot;name&quot;:&quot;activebackup&quot;&#125;&#125;&apos; ipv4.addresses 192.168.83.222/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2 ipv4.method manual</span><br><span class="line">è¿æ¥â€œteam0â€(80474187-7e56-4874-9d24-e228cb39b851) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0"></a>æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type team-slave con-name team0-port1 ifname eth1 master team0</span></span><br><span class="line">è¿æ¥â€œteam0-port1â€(4c6539de-8ea3-43fc-beb1-598587a8c05f) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type team-slave con-name team0-port2 ifname eth2 master team0</span></span><br><span class="line">è¿æ¥â€œteam0-port2â€(0798fb06-daee-4b5f-bd1f-8ad455964cb6) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ£€æŸ¥team0çŠ¶æ€"><a href="#æ£€æŸ¥team0çŠ¶æ€" class="headerlink" title="æ£€æŸ¥team0çŠ¶æ€"></a>æ£€æŸ¥team0çŠ¶æ€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# ping -I team0 192.168.83.222</span><br><span class="line">[root@zhoulijie ~]# teamdctl team0 state</span><br></pre></td></tr></table></figure>

<h5 id="æ–­æ‰åæ£€æµ‹"><a href="#æ–­æ‰åæ£€æµ‹" class="headerlink" title="æ–­æ‰åæ£€æµ‹"></a>æ–­æ‰åæ£€æµ‹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli dev disconnect eth1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># teamdctl team0 state</span></span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼"><a href="#åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼" class="headerlink" title="åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼"></a>åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å¯¼å‡ºé…ç½®è¿›è¡Œä¿®æ”¹ (man teamd.conf)</span><br><span class="line">[root@zhoulijie ~]# teamdctl team0 config dump &gt; /tmp/team.conf</span><br><span class="line">[root@zhoulijie ~]# vim /tmp/team.conf</span><br><span class="line"></span><br><span class="line">//ä»¥æœ€æ–°ä¿®æ”¹çš„é…ç½®é€‰é¡¹ä¿®æ”¹team0å±æ€§</span><br><span class="line">[root@zhoulijie ~]# nmcli con mod team0 team.config /tmp/team.conf</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹ä¹‹åéœ€è¦é‡å¯team0</span><br><span class="line">[root@zhoulijie ~]# nmcli connection down team0;nmcli connection up team0 </span><br><span class="line">[root@zhoulijie ~]# nmcli connection up team0-port1</span><br><span class="line">[root@zhoulijie ~]# nmcli connection up team0-port2</span><br></pre></td></tr></table></figure>

<h3 id="æ¡¥æ¥ç½‘ç»œé…ç½®"><a href="#æ¡¥æ¥ç½‘ç»œé…ç½®" class="headerlink" title="æ¡¥æ¥ç½‘ç»œé…ç½®"></a>æ¡¥æ¥ç½‘ç»œé…ç½®</h3><h5 id="åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1"><a href="#åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1" class="headerlink" title="åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1"></a>åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bridge con-name br1 ifname br1 ipv4.addresses 192.168.83.222/24 ipv4.method manual</span><br></pre></td></tr></table></figure>

<h5 id="æ¡¥æ¥è‡³eth1"><a href="#æ¡¥æ¥è‡³eth1" class="headerlink" title="æ¡¥æ¥è‡³eth1"></a>æ¡¥æ¥è‡³eth1</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bridge-slave con-name br1-port1 ifname eth1 master br1 nmcli connection add type bridge-slave con-name br1-port1 ifname eth1 master br1</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ping -I br1 192.168.83.1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># brctl show</span></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/" data-id="ck6abn9s00002sgu622wuu9gc"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-11.linux--ISCSIæœåŠ¡" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/11.linux--ISCSIæœåŠ¡/"
    >ISCSIæœåŠ¡</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/11.linux--ISCSIæœåŠ¡/" class="article-date">
  <time datetime="2019-08-29T15:44:18.583Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="ISCSIæŠ€æœ¯æ¦‚è¿°"><a href="#ISCSIæŠ€æœ¯æ¦‚è¿°" class="headerlink" title="ISCSIæŠ€æœ¯æ¦‚è¿°"></a>ISCSIæŠ€æœ¯æ¦‚è¿°</h2><p>ç¡¬ç›˜çš„æ¥å£ç±»å‹</p>
<ul>
<li>IDEæ˜¯ä¸€ç§æˆç†Ÿç¨³å®šã€ä»·æ ¼ä¾¿å®œçš„å¹¶è¡Œä¼ è¾“æ¥å£ã€‚</li>
<li>SATAæ˜¯ä¸€ç§ä¼ è¾“é€Ÿåº¦æ›´å¿«ã€æ•°æ®æ ¡éªŒæ›´å®Œæ•´çš„ä¸²è¡Œä¼ è¾“æ¥å£ã€‚</li>
<li>SCSIæ˜¯ä¸€ç§ç”¨äºè®¡ç®—æœºå’Œç¡¬ç›˜ã€å…‰é©±ç­‰è®¾å¤‡ä¹‹é—´ç³»ç»Ÿçº§æ¥å£çš„é€šç”¨æ ‡å‡†ï¼Œå…·æœ‰ç³»ç»Ÿèµ„æºå ç”¨ç‡ä½ã€è½¬é€Ÿé«˜ã€ä¼ è¾“é€Ÿåº¦å¿«ç­‰ä¼˜ç‚¹ã€‚</li>
</ul>
<p>IBMå…¬å¸å¼€å§‹ç ”å‘ISCSIæŠ€æœ¯</p>
<p>â€‹        è¿™æ˜¯ä¸€ç§å°†SCSIæ¥å£ä¸ä»¥å¤ªç½‘æŠ€æœ¯ç›¸ç»“åˆçš„æ–°å‹å­˜å‚¨æŠ€æœ¯ï¼Œå¯ä»¥ç”¨æ¥åœ¨ç½‘ç»œä¸­ä¼ è¾“SCSIæ¥å£çš„å‘½ä»¤å’Œæ•°æ®ã€‚</p>
<p>iscsi = internet + scsiç¡¬ç›˜æ¥å£</p>
<p>â€‹        è¿™æ ·ï¼Œä¸ä»…å…‹æœäº†ä¼ ç»ŸSCSIæ¥å£è®¾å¤‡çš„ç‰©ç†å±€é™æ€§ï¼Œå®ç°äº†è·¨åŒºåŸŸçš„å­˜å‚¨èµ„æºå…±äº«ï¼Œè¿˜å¯ä»¥åœ¨ä¸åœæœºçš„çŠ¶æ€ä¸‹æ‰©å±•å­˜å‚¨å®¹é‡ã€‚</p>
<h2 id="é…ç½®ISCSIæœåŠ¡ç«¯"><a href="#é…ç½®ISCSIæœåŠ¡ç«¯" class="headerlink" title="é…ç½®ISCSIæœåŠ¡ç«¯"></a>é…ç½®ISCSIæœåŠ¡ç«¯</h2><h4 id="æ·»åŠ ç¡¬ç›˜"><a href="#æ·»åŠ ç¡¬ç›˜" class="headerlink" title="æ·»åŠ ç¡¬ç›˜"></a>æ·»åŠ ç¡¬ç›˜</h4><p>é¦–å…ˆæˆ‘ä»¬æå‰å°†è™šæ‹ŸæœºåŠ å…¥ä¸€å—ç¡¬ç›˜</p>
<p>å¼€æœºå¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<h4 id="yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº"><a href="#yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº" class="headerlink" title="yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº"></a>yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y targetd targetcli</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/targetd.service to /usr/lib/systemd/system/targetd.service.</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº"><a href="#é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº" class="headerlink" title="é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº"></a>é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># targetcli</span></span><br><span class="line">Warning: Could not load preferences file /root/.targetcli/prefs.bin.</span><br><span class="line">targetcli shell version 2.1.fb46</span><br><span class="line">Copyright 2011-2013 by Datera, Inc and others.</span><br><span class="line">For <span class="built_in">help</span> on commands, <span class="built_in">type</span> <span class="string">'help'</span>.</span><br><span class="line"></span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt; <span class="built_in">cd</span> backstores/block</span><br><span class="line">/backstores/block&gt; create disk1 /dev/sdb</span><br><span class="line">Created block storage object disk1 using /dev/sdb.</span><br><span class="line">/backstores/block&gt; <span class="built_in">cd</span> /</span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ..................... [/dev/sdb (20.0GiB) write-thru deactivated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºISCSI-targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº"><a href="#åˆ›å»ºISCSI-targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº" class="headerlink" title="åˆ›å»ºISCSI targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº"></a>åˆ›å»ºISCSI targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/&gt; <span class="built_in">cd</span> iscsi</span><br><span class="line">/iscsi&gt; .</span><br><span class="line">/iscsi&gt; create</span><br><span class="line">Created target iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab.</span><br><span class="line">Created TPG 1.</span><br><span class="line">Global pref auto_add_default_portal=<span class="literal">true</span></span><br><span class="line">Created default portal listening on all IPs (0.0.0.0), port 3260.</span><br><span class="line">/iscsi&gt; <span class="built_in">cd</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab/</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; ls</span><br><span class="line">o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ....... [TPGs: 1]</span><br><span class="line">  o- tpg1 ............................................... [no-gen-acls, no-auth]</span><br><span class="line">    o- acls .......................................................... [ACLs: 0]</span><br><span class="line">    o- luns .......................................................... [LUNs: 0]</span><br><span class="line">    o- portals .................................................... [Portals: 1]</span><br><span class="line">      o- 0.0.0.0:3260 ..................................................... [OK]</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; <span class="built_in">cd</span> tpg1/luns</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; create /backstores/block/disk1</span><br><span class="line">Created LUN 0.</span><br></pre></td></tr></table></figure>

<h4 id="è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰"><a href="#è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰" class="headerlink" title="è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰"></a>è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; ls</span><br><span class="line">o- tpg1 ................................................. [no-gen-acls, no-auth]</span><br><span class="line">  o- acls ............................................................ [ACLs: 0]</span><br><span class="line">  o- luns ............................................................ [LUNs: 1]</span><br><span class="line">  | o- lun0 ........................ [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  o- portals ...................................................... [Portals: 1]</span><br><span class="line">    o- 0.0.0.0:3260 ....................................................... [OK]</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> acls</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; create iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created Node ACL <span class="keyword">for</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created mapped LUN 0.</span><br></pre></td></tr></table></figure>

<h4 id="è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·"><a href="#è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·" class="headerlink" title="è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·"></a>è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> portals/</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; ls</span><br><span class="line">o- portals ........................................................ [Portals: 1]</span><br><span class="line">  o- 0.0.0.0:3260 ......................................................... [OK]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">Using default IP port 3260</span><br><span class="line">Created network portal 192.168.176.222:3260.</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤å¤„å¦‚æœæŠ¥é”™ è¯·æ‰§è¡Œä¸‹é¢ä¸€æ­¥éª¤ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">&gt; Using default IP port 3260</span><br><span class="line">&gt; Could not create NetworkPortal <span class="keyword">in</span> configFS</span><br><span class="line">&gt; </span><br><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; delete 0.0.0.0 3260</span><br><span class="line">&gt; Deleted network portal 0.0.0.0:3260</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="æ£€æŸ¥é…ç½®ä¿¡æ¯"><a href="#æ£€æŸ¥é…ç½®ä¿¡æ¯" class="headerlink" title="æ£€æŸ¥é…ç½®ä¿¡æ¯"></a>æ£€æŸ¥é…ç½®ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">iscsi/iqn.20.../tpg1/portals&gt; ls /</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ....................... [/dev/sdb (20.0GiB) write-thru activated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 1]</span><br><span class="line">  | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ... [TPGs: 1]</span><br><span class="line">  |   o- tpg1 ........................................... [no-gen-acls, no-auth]</span><br><span class="line">  |     o- acls ...................................................... [ACLs: 1]</span><br><span class="line">  |     | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client  [Mapped LUNs: 1]</span><br><span class="line">  |     |   o- mapped_lun0 ............................. [lun0 block/disk1 (rw)]</span><br><span class="line">  |     o- luns ...................................................... [LUNs: 1]</span><br><span class="line">  |     | o- lun0 .................. [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  |     o- portals ................................................ [Portals: 1]</span><br><span class="line">  |       o- 192.168.176.222:3260 ......................................... [OK]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; <span class="built_in">exit</span></span><br><span class="line">Global pref auto_save_on_exit=<span class="literal">true</span></span><br><span class="line">Last 10 configs saved <span class="keyword">in</span> /etc/target/backup.</span><br><span class="line">Configuration saved to /etc/target/saveconfig.json</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡"><a href="#é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡" class="headerlink" title="é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡"></a>é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># getenforce</span></span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®ISCSIå®¢æˆ·ç«¯"><a href="#é…ç½®ISCSIå®¢æˆ·ç«¯" class="headerlink" title="é…ç½®ISCSIå®¢æˆ·ç«¯"></a>é…ç½®ISCSIå®¢æˆ·ç«¯</h2><blockquote>
<p>å®¢æˆ·ç«¯åœ°å€ï¼š192.168.176.111</p>
</blockquote>
<h4 id="å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator"><a href="#å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator" class="headerlink" title="å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator"></a>å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator</h4><blockquote>
<p>åœ¨rhel 7 ç³»ç»Ÿä¸­ï¼ŒISCSI-initator-utilså·²ç»è¢«é»˜è®¤å®‰è£…äº†</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># yum install iscsi-initiator-utils</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶"></a>ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># vim /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cat /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">InitiatorName=iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line"></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl restart iscsid</span></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl enable iscsid</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/iscsid.service to /usr/lib/systemd/system/iscsid.service.</span><br></pre></td></tr></table></figure>

<h4 id="ç™»å½•iSCSIæœåŠ¡ç«¯"><a href="#ç™»å½•iSCSIæœåŠ¡ç«¯" class="headerlink" title="ç™»å½•iSCSIæœåŠ¡ç«¯"></a>ç™»å½•iSCSIæœåŠ¡ç«¯</h4><blockquote>
<p> iscsiadmæ˜¯ç”¨äºç®¡ç†ã€æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤iSCSIæ•°æ®åº“é…ç½®æ–‡ä»¶çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·éœ€è¦å…ˆä½¿ç”¨è¿™ä¸ªå·¥å…·æ‰«æå‘ç°è¿œç¨‹iSCSIæœåŠ¡ç«¯ï¼Œç„¶åæŸ¥çœ‹æ‰¾åˆ°çš„æœåŠ¡ç«¯ä¸Šæœ‰å“ªäº›å¯ç”¨çš„å…±äº«å­˜å‚¨èµ„æºã€‚</p>
<p>-m discoveryå‚æ•°çš„ç›®çš„æ˜¯æ‰«æå¹¶å‘ç°å¯ç”¨çš„å­˜å‚¨èµ„æºï¼Œ</p>
<p>-t stå‚æ•°ä¸ºæ‰§è¡Œæ‰«ææ“ä½œçš„ç±»å‹ï¼Œ</p>
<p>-p 192.168.176.222 å‚æ•°ä¸ºiSCSIæœåŠ¡ç«¯çš„IPåœ°å€</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m discovery -t st -p 192.168.176.222</span></span><br><span class="line">192.168.176.222:3260,1 iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-m nodeå‚æ•°ä¸ºå°†å®¢æˆ·ç«¯æ‰€åœ¨ä¸»æœºä½œä¸ºä¸€å°èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œ</p>
<p>-T  iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80å‚æ•°ä¸ºè¦ä½¿ç”¨çš„å­˜å‚¨èµ„æº (ç›´æ¥å¤åˆ¶å‰é¢å‘½ä»¤ä¸­æ‰«æå‘ç°çš„ç»“æœï¼Œä»¥å…é”™è¯¯)</p>
<p>-p 192.168.176.222å‚æ•°ä¾ç„¶ä¸ºæœåŠ¡ç«¯iSCSIæœåŠ¡ç«¯çš„IPåœ°å€ã€‚</p>
<p>â€“loginæˆ–-lå‚æ•°è¿›è¡Œç™»å½•éªŒè¯ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -p 192.168.176.222 --login</span></span><br><span class="line">Logging <span class="keyword">in</span> to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] (multiple)</span><br><span class="line">Login to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬lsbakçœ‹ä¸€ä¸‹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‘ç°æ­¤å¤„å¤šäº†ä¸€ä¸ª/dev/sdbçš„è®¾å¤‡æ–‡ä»¶</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br></pre></td></tr></table></figure>

<h4 id="æŒ‚è½½è®¾å¤‡"><a href="#æŒ‚è½½è®¾å¤‡" class="headerlink" title="æŒ‚è½½è®¾å¤‡"></a>æŒ‚è½½è®¾å¤‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br><span class="line">[root@client111 ~]<span class="comment"># mkfs.xfs /dev/sdb</span></span><br><span class="line">meta-data=/dev/sdb               isize=512    agcount=4, agsize=1310720 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=5242880, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line"><span class="built_in">log</span>      =internal <span class="built_in">log</span>           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client111 ~]<span class="comment"># mkdir /iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># mount /dev/sdb /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ                ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">/dev/sdb                xfs        20G   33M   20G    1% /iscsi</span><br></pre></td></tr></table></figure>

<h4 id="æ°¸ä¹…æŒ‚è½½"><a href="#æ°¸ä¹…æŒ‚è½½" class="headerlink" title="æ°¸ä¹…æŒ‚è½½"></a>æ°¸ä¹…æŒ‚è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># blkid | grep /dev/sdb</span></span><br><span class="line">/dev/sdb: UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">[root@client111 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@client111 ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> /iscsi xfs defaults,_netdev 0 0</span><br><span class="line">[root@client111 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>

<h4 id="å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡"><a href="#å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡" class="headerlink" title="å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡"></a>å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡</h4><blockquote>
<p> å¯ä»¥ç”¨iscsiadmå‘½ä»¤çš„-uå‚æ•°å°†å…¶è®¾å¤‡å¸è½½</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># umount /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ                ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -u</span></span><br><span class="line">Logging out of session [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260]</span><br><span class="line">Logout of [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1ï¼ç®€è¿°iSCSIå­˜å‚¨æŠ€æœ¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ä½œç”¨ã€‚</p>
<p>2ï¼åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒiSCSIæœåŠ¡ç«¯å’ŒiSCSIå®¢æˆ·ç«¯æ‰€ä½¿ç”¨çš„æœåŠ¡ç¨‹åºåˆ†åˆ«å«ä»€ä¹ˆï¼Ÿ</p>
<p>3ï¼åœ¨ä½¿ç”¨targetcliå‘½ä»¤é…ç½®iSCSIæœåŠ¡ç«¯é…ç½®æ–‡ä»¶æ—¶ï¼Œaclsä¸portalså‚æ•°ç›®å½•ä¸­åˆ†åˆ«å­˜æ”¾ä»€ä¹ˆå†…å®¹ï¼Ÿ</p>
<p>4ï¼iSCSIåè®®å ç”¨äº†æœåŠ¡å™¨å“ªä¸ªåè®®å’Œç«¯å£å·ï¼Ÿ</p>
<p>5ï¼ç”¨æˆ·åœ¨å¡«å†™fstabè®¾å¤‡æŒ‚è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œä¸€èˆ¬ä¼šæŠŠè¿œç¨‹å­˜å‚¨èµ„æºçš„UUIDï¼ˆè€Œéè®¾å¤‡çš„åç§°ï¼‰å¡«å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/11.linux--ISCSIæœåŠ¡/" data-id="ck6abn9t80012sgu67ams0lvv"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/"
    >ç½‘ç»œåŸºç¡€ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.580Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="ç½‘å¡å‘½å"><a href="#ç½‘å¡å‘½å" class="headerlink" title="ç½‘å¡å‘½å"></a>ç½‘å¡å‘½å</h2><h3 id="ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶"><a href="#ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶" class="headerlink" title="ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶"></a>ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶</h3><blockquote>
<p>ä¼ ç»Ÿå‘½åï¼š </p>
<p>ä»¥å¤ªç½‘eth[0,1,2,â€¦] </p>
<p>wlan[0,1,2,â€¦] </p>
</blockquote>
<h3 id="redhat7ç½‘å¡å‘½åæœºåˆ¶"><a href="#redhat7ç½‘å¡å‘½åæœºåˆ¶" class="headerlink" title="redhat7ç½‘å¡å‘½åæœºåˆ¶"></a>redhat7ç½‘å¡å‘½åæœºåˆ¶</h3><blockquote>
<p>systemdå¯¹ç½‘ç»œè®¾å¤‡çš„å‘½åæ–¹å¼ï¼š</p>
<ol>
<li>å¦‚æœFirmwareæˆ–BIOSä¸ºä¸»æ¿ä¸Šé›†æˆçš„è®¾å¤‡æä¾›çš„ç´¢å¼•ä¿¡æ¯å¯ç”¨ï¼Œä¸”å¯é¢„æµ‹ï¼Œåˆ™æ ¹æ®æ­¤ç´¢å¼•è¿›è¡Œå‘½åï¼Œä¾‹å¦‚eno1</li>
<li>å¦‚æœFirmwareæˆ–BIOSä¸ºPCI-Eæ‰©å±•æ§½æ‰€æä¾›çš„ç´¢å¼•ä¿¡æ¯å¯ç”¨ï¼Œä¸”å¯é¢„æµ‹ï¼Œåˆ™æ ¹æ®æ­¤ç´¢å¼•è¿›è¡Œå‘½åï¼Œä¾‹å¦‚ens1</li>
<li>å¦‚æœç¡¬ä»¶æ¥å£çš„ç‰©ç†ä½ç½®ä¿¡æ¯å¯ç”¨ï¼Œåˆ™æ ¹æ®æ­¤ä¿¡æ¯è¿›è¡Œå‘½åï¼Œä¾‹å¦‚enp2s0</li>
<li>å¦‚æœç”¨æˆ·æ˜¾å¼å¯åŠ¨ï¼Œä¹Ÿå¯æ ¹æ®MACåœ°å€è¿›è¡Œå‘½åï¼Œä¾‹å¦‚enx2387a1dc56</li>
<li>ä¸Šè¿°å‡ä¸å¯ç”¨æ—¶ï¼Œåˆ™ä½¿ç”¨ä¼ ç»Ÿå‘½åæœºåˆ¶</li>
</ol>
</blockquote>
<p>ä¸Šè¿°å‘½åæœºåˆ¶ä¸­ï¼Œæœ‰çš„éœ€è¦biosdevnameç¨‹åºçš„å‚ä¸ã€‚æ‰€ä»¥å¿…é¡»å®‰è£…biosdevnameç¨‹åºä¸”å¯ç”¨å®ƒã€‚</p>
<h3 id="ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼"><a href="#ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼" class="headerlink" title="ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼"></a>ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼</h3><h3 id="ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹"><a href="#ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹" class="headerlink" title="ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹"></a>ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹</h3><ol>
<li>udevï¼Œè¾…åŠ©å·¥å…·ç¨‹åº/lib/udev/rename_deviceä¼šæ ¹æ®/usr/lib/udev/rules.d/60-net.rulesä¸­çš„ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
<li>biosdevnameä¼šæ ¹æ®/usr/lib/udev/rules.d/71-biosdevname.rulesä¸­çš„ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
<li>é€šè¿‡udevæ£€æµ‹ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œæ ¹æ®/usr/lib/udev/rules.d/75-net-descriptionä¸­çš„å˜é‡ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
</ol>
<h3 id="å›å½’ä¼ ç»Ÿå‘½å"><a href="#å›å½’ä¼ ç»Ÿå‘½å" class="headerlink" title="å›å½’ä¼ ç»Ÿå‘½å"></a>å›å½’ä¼ ç»Ÿå‘½å</h3><h5 id="ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># mv ifcfg-ens33 ifcfg-eth0</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim ifcfg-eth0</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth0  //æ­¤å¤„è¦æŠŠens33æ”¹æˆeth0</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth0  //æ­¤å¤„è¦æŠŠens33æ”¹æˆeth0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.83.140</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.83.2</span><br><span class="line">DNS1=192.168.83.2</span><br></pre></td></tr></table></figure>

<h5 id="ç¼–è¾‘-etc-default-grubé…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘-etc-default-grubé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘/etc/default/grubé…ç½®æ–‡ä»¶"></a>ç¼–è¾‘/etc/default/grubé…ç½®æ–‡ä»¶</h5><blockquote>
<p>åœ¨ä»¥GRUB_CMDLINE_LINUXå¼€å¤´çš„è¡Œå†…rhgbçš„å‰é¢åŠ ä¸Šnet.ifnames=0 biosdevname=0 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim /etc/default/grub</span></span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=<span class="string">"<span class="variable">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span></span><br><span class="line">GRUB_DEFAULT=saved</span><br><span class="line">GRUB_DISABLE_SUBMENU=<span class="literal">true</span></span><br><span class="line">GRUB_TERMINAL_OUTPUT=<span class="string">"console"</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">"crashkernel=auto rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap net.ifnames=0 biosdevname=0 rhgb quiet"</span></span><br><span class="line">GRUB_DISABLE_RECOVERY=<span class="string">"true"</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶"><a href="#ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶"></a>ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># grub2-mkconfig -o /etc/grub2.cfg</span></span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-3.10.0-693.el7.x86_64</span><br><span class="line">Found initrd image: /boot/initramfs-3.10.0-693.el7.x86_64.img</span><br><span class="line">Found linux image: /boot/vmlinuz-0-rescue-fd0bcf5782d24ba5b903b175c35f328e</span><br><span class="line">Found initrd image: /boot/initramfs-0-rescue-fd0bcf5782d24ba5b903b175c35f328e.img</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h5 id="é‡å¯ç³»ç»Ÿ"><a href="#é‡å¯ç³»ç»Ÿ" class="headerlink" title="é‡å¯ç³»ç»Ÿ"></a>é‡å¯ç³»ç»Ÿ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>

<h2 id="ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤"><a href="#ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤"></a>ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤</h2><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h3><h5 id="æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£"><a href="#æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£" class="headerlink" title="æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£"></a>æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 694  bytes 64096 (62.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 435  bytes 53145 (51.8 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€"><a href="#ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€" class="headerlink" title="ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€"></a>ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig eth0</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 726  bytes 66886 (65.3 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 453  bytes 56481 (55.1 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯-åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨"><a href="#æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯-åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯, åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨"></a>æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯, åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig -a</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 763  bytes 70122 (68.4 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 475  bytes 60789 (59.3 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0-nic: flags=4098&lt;BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹"><a href="#ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹" class="headerlink" title="ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹"></a>ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹</h5><blockquote>
<p> UP: ç½‘å¡å¤„äºæ´»åŠ¨çŠ¶æ€</p>
<p> BROADCAST: æ”¯æŒå¹¿æ’­</p>
<p> RUNNING: ç½‘çº¿å·²æ¥å…¥</p>
<p> MULTICAST: æ”¯æŒç»„æ’­</p>
<p> MTU: æœ€å¤§ä¼ è¾“å•å…ƒ(å­—èŠ‚),å³æ­¤æ¥å£ä¸€æ¬¡æ‰€èƒ½ä¼ è¾“çš„æœ€å¤§å°åŒ…</p>
<p> inet: æ˜¾ç¤ºIPv4åœ°å€è¡Œ</p>
<p> inet6: æ˜¾ç¤ºIPv6åœ°å€è¡Œ</p>
<p>link/enther: æŒ‡è®¾å¤‡ç¡¬ä»¶(MAC)åœ°å€</p>
<p> txqueuelen: ä¼ è¾“ç¼“å­˜åŒºé•¿åº¦å¤§å°</p>
<p>RX packets: æ¥æ”¶çš„æ•°æ®åŒ…</p>
<p>TX packets: å‘é€çš„æ•°æ®åŒ…</p>
<p>errors: æ€»çš„æ”¶åŒ…çš„é”™è¯¯æ•°é‡</p>
<p>dropped: ç”±äºå„ç§åŸå› , å¯¼è‡´æ‹·è´åœ¨å†…å­˜è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒ</p>
<p>collisions: ç½‘ç»œä¿¡å·å†²çªæƒ…å†µ, å€¼ä¸ä¸º0åˆ™å¯èƒ½å­˜åœ¨ç½‘ç»œæ•…éšœ</p>
</blockquote>
<h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><blockquote>
<p>//è¯­æ³•ï¼šip [ OPTIONS ] OBJECT { COMMAND | help }<br>OBJECTï¼š<br>    linkï¼šç½‘ç»œæ¥å£å±æ€§<br>    addrï¼šåè®®åœ°å€<br>    routeï¼šè·¯ç”± </p>
</blockquote>
<h5 id="æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€"><a href="#æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€"></a>æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip link show</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯"><a href="#æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯"></a>æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip -s link show</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    1624       18       0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    1624       18       0       0       0       0</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    35806      380      0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    27393      240      0       0       0       0</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    0          0        0       0       0       0</span><br></pre></td></tr></table></figure>

<h5 id="å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip-link-set-DEV-up-down"><a href="#å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip-link-set-DEV-up-down" class="headerlink" title="å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip link set DEV {up|down}"></a>å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip link set DEV {up|down}</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip link set lo down</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip link set lo up</span></span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€"><a href="#æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€"></a>æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ IPåœ°å€"><a href="#æ·»åŠ IPåœ°å€" class="headerlink" title="æ·»åŠ IPåœ°å€"></a>æ·»åŠ IPåœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr add 192.168.83.141/24 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 192.168.83.141/24 scope global secondary eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h5 id="åˆ é™¤IPåœ°å€"><a href="#åˆ é™¤IPåœ°å€" class="headerlink" title="åˆ é™¤IPåœ°å€"></a>åˆ é™¤IPåœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr del 192.168.83.141/24 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±ç®¡ç†"><a href="#è·¯ç”±ç®¡ç†" class="headerlink" title="è·¯ç”±ç®¡ç†"></a>è·¯ç”±ç®¡ç†</h3><blockquote>
<p>ip routeï¼šrouting table management</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ è·¯ç”±ï¼šip route add TARGET via GW dev IFACE src SOURCE_IP</span><br><span class="line">    TARGETï¼š</span><br><span class="line">        ä¸»æœºè·¯ç”±ï¼šIP</span><br><span class="line">        ç½‘ç»œè·¯ç”±ï¼šNETWORK/MASK </span><br><span class="line">        </span><br><span class="line">//åˆ é™¤è·¯ç”±ï¼šip route del TARGET</span><br><span class="line">    TARGETï¼š</span><br><span class="line">        ä¸»æœºè·¯ç”±ï¼šIP</span><br><span class="line">        ç½‘ç»œè·¯ç”±ï¼šNETWORK/MASK</span><br><span class="line">                        </span><br><span class="line">//æŸ¥çœ‹è·¯ç”±ï¼šip route show</span><br><span class="line"></span><br><span class="line">//åˆ·æ–°è·¯ç”±è¡¨ï¼šip route flush</span><br><span class="line">    [dev IFACE]</span><br><span class="line">    [via PREFIX]</span><br></pre></td></tr></table></figure>



<h3 id="route"><a href="#route" class="headerlink" title="route"></a>route</h3><p>Linuxä¸»æœºä¹‹é—´æ˜¯ä½¿ç”¨IPè¿›è¡Œé€šä¿¡, å‡è®¾Aä¸»æœºå’ŒBä¸»æœºåŒåœ¨ä¸€ä¸ªç½‘æ®µå†…ä¸”ç½‘å¡éƒ½å¤„äºæ¿€æ´»çŠ¶æ€, åˆ™Aå…·å¤‡å’ŒBç›´æ¥é€šä¿¡çš„èƒ½åŠ›, ä½†å¦‚æœAä¸»æœºå’ŒBä¸»æœºå¤„äºä¸¤ä¸ªä¸åŒçš„ç½‘æ®µ, åˆ™Aå¿…é¡»é€šè¿‡è·¯ç”±å™¨æ‰èƒ½å’ŒBé€šä¿¡, è·¯ç”±å™¨å±äºITè®¾å¤‡çš„åŸºç¡€è®¾æ–½, æ¯ä¸€ä¸ªç½‘æ®µéƒ½åº”è¯¥è‡³å°‘æœ‰ä¸€ä¸ªç½‘å…³ </p>
<h5 id="æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨"><a href="#æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨" class="headerlink" title="æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨"></a>æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         gateway         0.0.0.0         UG    100    0        0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U     100    0        0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯"><a href="#ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯" class="headerlink" title="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯"></a>ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route -n</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.83.2    0.0.0.0         UG    100    0        0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U     100    0        0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¢åŠ è·¯ç”±<br>è¯­æ³•ï¼šroute add [-net|-host] target [netmask Nm][gw Gw]  [[dev] If]</p>
</blockquote>
<h5 id="å¢åŠ ç½‘æ®µè·¯ç”±"><a href="#å¢åŠ ç½‘æ®µè·¯ç”±" class="headerlink" title="å¢åŠ ç½‘æ®µè·¯ç”±"></a>å¢åŠ ç½‘æ®µè·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route add -net 192.168.83.0/24 gw 192.168.83.2 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># route add -net 0.0.0.0 gw 192.168.83.2 dev eth0</span></span><br></pre></td></tr></table></figure>

<h5 id="å¢åŠ ä¸»æœºè·¯ç”±"><a href="#å¢åŠ ä¸»æœºè·¯ç”±" class="headerlink" title="å¢åŠ ä¸»æœºè·¯ç”±"></a>å¢åŠ ä¸»æœºè·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route add -host 192.168.83.144 gw 192.168.83.2</span></span><br></pre></td></tr></table></figure>

<h5 id="åˆ é™¤è·¯ç”±"><a href="#åˆ é™¤è·¯ç”±" class="headerlink" title="åˆ é™¤è·¯ç”±"></a>åˆ é™¤è·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route del -net 192.168.83.0/24</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># route del -net 0.0.0.0/0 gw 192.168.83.2</span></span><br></pre></td></tr></table></figure>

<h3 id="hostnameä¸hostnamectl"><a href="#hostnameä¸hostnamectl" class="headerlink" title="hostnameä¸hostnamectl"></a>hostnameä¸hostnamectl</h3><p>ç”Ÿäº§ç¯å¢ƒä¸­å¿…é¡»é…ç½®ä¸»æœºå,åŒæ—¶ä¸»æœºåä¹Ÿéœ€è¦éµå¾ªä¸€å®šçš„è§„èŒƒ, æ¯”å¦‚: </p>
<table>
<thead>
<tr>
<th align="center">åœ°åŒº</th>
<th align="center">é¡¹ç›®</th>
<th align="center">ä¸šåŠ¡</th>
<th align="center">æœåŠ¡</th>
<th align="center">èŠ‚ç‚¹</th>
<th align="center">åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td align="center">wuhan</td>
<td align="center">Supermarket</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.1</td>
</tr>
<tr>
<td align="center">guangzhou</td>
<td align="center">Bank</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.111</td>
</tr>
<tr>
<td align="center">shanghai</td>
<td align="center">Street</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.10</td>
</tr>
</tbody></table>
<h5 id="æŸ¥çœ‹ä¸»æœºå"><a href="#æŸ¥çœ‹ä¸»æœºå" class="headerlink" title="æŸ¥çœ‹ä¸»æœºå"></a>æŸ¥çœ‹ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># hostname</span></span><br><span class="line">zhoulijie</span><br></pre></td></tr></table></figure>

<h5 id="hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå"><a href="#hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå" class="headerlink" title="hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå"></a>hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># hostname 123</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># bash</span></span><br><span class="line">[root@123 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h5 id="è®¾ç½®æ°¸ä¹…ä¸»æœºå"><a href="#è®¾ç½®æ°¸ä¹…ä¸»æœºå" class="headerlink" title="è®¾ç½®æ°¸ä¹…ä¸»æœºå"></a>è®¾ç½®æ°¸ä¹…ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@123 ~]<span class="comment"># vim /etc/hostname</span></span><br><span class="line">[root@123 ~]<span class="comment"># cat /etc/hostname</span></span><br><span class="line">zhoulijie</span><br><span class="line">[root@123 ~]<span class="comment"># bash</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨Linuxä¸­ä»¥å‘½ä»¤æ–¹å¼ä¿®æ”¹ç½‘ç»œé…ç½®åªåœ¨å½“å‰çŠ¶æ€æœ‰æ•ˆï¼Œé‡å¯åå°†å¤±æ•ˆã€‚æ•…è‹¥æƒ³ä½¿ä¿®æ”¹çš„é…ç½®é‡å¯åä¾ç„¶æœ‰æ•ˆï¼Œåˆ™å¿…é¡»ç¼–è¾‘é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®çš„ä¿®æ”¹ã€‚ </p>
</blockquote>
<h2 id="ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"></a>ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶</h2><h3 id="ç½‘ç»œé…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œé…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œé…ç½®æ–‡ä»¶"></a>ç½‘ç»œé…ç½®æ–‡ä»¶</h3><blockquote>
<p>ç½‘ç»œé…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NETWORKING=&#123;yes|no&#125;ï¼šè®¾å®šæ•´ä¸ªç³»ç»Ÿæ˜¯å¦å¯ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œè‹¥è®¾ä¸ºnoï¼Œåˆ™ä¸è®ºç½‘å¡å¦‚ä½•è®¾ç½®éƒ½ä¸èƒ½ä½¿ç”¨ç½‘ç»œåŠŸèƒ½ã€‚</span><br><span class="line">HOSTNAMEï¼šè®¾ç½®ä¸»æœºå</span><br></pre></td></tr></table></figure>

<h4 id="ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶"></a>ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶</h4><p>ç½‘ç»œæ¥å£å³ç½‘å¡ï¼Œå…¶é…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/sysconfig/network-scripts/ifcfg-INTERFACE_NAME</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">TYPE=Ethernet                //æ¥å£ç±»å‹ã€‚å¸¸è§çš„æ¥å£ç±»å‹æœ‰ï¼šEthernetï¼ŒBridge</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static             //å¼•å¯¼åè®®ï¼Œå¯é€‰å€¼æœ‰ï½›staticï½œnoneï½œdhcpï½œbootpï½ã€‚å¦‚æœè¦ä½¿ç”¨é™æ€åœ°å€ï¼Œä½¿ç”¨staticæˆ–noneéƒ½å¯ä»¥</span><br><span class="line">DEFROUTE=yes                //å°†æ¥å£è®¾å®šä¸ºé»˜è®¤è·¯ç”±[yes|no]</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth0                   //è¿æ¥åç§°</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546     //è®¾å¤‡çš„æƒŸä¸€æ ‡è¯†</span><br><span class="line">DEVICE=eth0                 //å…³è”çš„è®¾å¤‡åç§°ï¼Œè¦ä¸æ–‡ä»¶åçš„ååŠéƒ¨&quot;INTERFACE_NAME&quot;ä¿æŒä¸€è‡´</span><br><span class="line">ONBOOT=yes                  //åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶æ˜¯å¦è‡ªåŠ¨æ¿€æ´»æ­¤ç½‘ç»œæ¥å£ï¼Œå¯é€‰å€¼æœ‰&#123; yes ï½œ no &#125;</span><br><span class="line">IPADDR=192.168.83.140       //å›ºå®šIPåœ°å€</span><br><span class="line">NETMASK=255.255.255.0       //å­ç½‘æ©ç </span><br><span class="line">GATEWAY=192.168.83.2        //é»˜è®¤ç½‘å…³</span><br><span class="line">DNS1=192.168.83.2           //ç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨æŒ‡å‘(è¿˜å¯ä»¥æœ‰DNS2ã€DNS3)</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±é…ç½®æ–‡ä»¶"><a href="#è·¯ç”±é…ç½®æ–‡ä»¶" class="headerlink" title="è·¯ç”±é…ç½®æ–‡ä»¶"></a>è·¯ç”±é…ç½®æ–‡ä»¶</h3><p>è·¯ç”±é…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/sysconfig/network-scripts/route-INTERFACE_NAME</code></p>
<p>æ·»åŠ æ ¼å¼1ï¼š</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">192.168.83.0/24 via 192.168.83.2</span><br></pre></td></tr></table></figure></code></pre><p>æ·»åŠ æ ¼å¼2ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">ADDRESS0=192.168.83.0</span><br><span class="line">NETMASK0=255.255.255.0</span><br><span class="line">GATEWAY0=192.168.83.2</span><br></pre></td></tr></table></figure>

<h3 id="DNSé…ç½®æ–‡ä»¶"><a href="#DNSé…ç½®æ–‡ä»¶" class="headerlink" title="DNSé…ç½®æ–‡ä»¶"></a>DNSé…ç½®æ–‡ä»¶</h3><p>DNSé…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/resolv.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# vim /etc/resolv.conf</span><br><span class="line">[root@zhoulijie ~]# cat /etc/resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">nameserver 192.168.83.2</span><br></pre></td></tr></table></figure>

<h2 id="NerworkManagerç®¡ç†ç½‘ç»œ"><a href="#NerworkManagerç®¡ç†ç½‘ç»œ" class="headerlink" title="NerworkManagerç®¡ç†ç½‘ç»œ"></a>NerworkManagerç®¡ç†ç½‘ç»œ</h2><p><code>RHEL/CentOS7</code>ç³»ç»Ÿé»˜è®¤ä½¿ç”¨<code>NetworkManager</code>æ¥æä¾›ç½‘ç»œæœåŠ¡ï¼Œè¿™æ˜¯ä¸€ç§åŠ¨æ€ç®¡ç†ç½‘ç»œé…ç½®çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œèƒ½å¤Ÿè®©ç½‘ç»œè®¾å¤‡ä¿æŒè¿æ¥çŠ¶æ€ã€‚<br><code>NetworkManager</code>æä¾›çš„å‘½ä»¤è¡Œå’Œå›¾å½¢é…ç½®å·¥å…·å¯¹ç½‘ç»œè¿›è¡Œè®¾å®š, è®¾å®šä¿å­˜çš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/sysconfig/network-scripts</code>ç›®å½•ä¸‹, å·¥å…·æœ‰ <code>nmcli, nmtui, nm-connect-editor</code></p>
<p><code>device</code>ç‰©ç†è®¾å¤‡, ä¾‹å¦‚ <code>ens33,enp2s0,virbr0,team0</code><br><code>connection</code>è¿æ¥è®¾ç½®, å…·ä½“ç½‘ç»œé…ç½®æ–¹æ¡ˆ</p>
<blockquote>
<p>1.ä¸åŒçš„ç½‘ç»œè¿æ¥é…ç½®å¯ä»¥åº”ç”¨åˆ°ç›¸åŒçš„ç‰©ç†è®¾å¤‡ï¼Œä½†ç‰©ç†è®¾å¤‡åŒä¸€æ—¶é—´åªèƒ½åº”ç”¨å…¶ä¸­æŸä¸ªç½‘ç»œè¿æ¥<br>2.é’ˆå¯¹ç‰©ç†ç½‘ç»œæ¥å£, è®¾å®šä¸åŒçš„ç½‘ç»œè¿æ¥, åœ¨ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒä¸­æ¿€æ´»ç›¸åº”çš„ç½‘ç»œè¿æ¥ï¼Œå°±å¯ä»¥å®ç°ç½‘ç»œé…ç½®ä¿¡æ¯çš„è‡ªåŠ¨åˆ‡æ¢äº†</p>
</blockquote>
<p>ä½¿ç”¨<code>nmcli</code>å‘½ä»¤æŸ¥çœ‹è®¾å¤‡ä»¥åŠè¿æ¥æƒ…å†µ</p>
<h5 id="æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"><a href="#æŸ¥çœ‹è®¾å¤‡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"></a>æŸ¥çœ‹è®¾å¤‡çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€"><a href="#æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€"></a>æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device show eth0</span></span><br><span class="line">GENERAL.è®¾å¤‡:                           eth0</span><br><span class="line">GENERAL.ç±»å‹:                           ethernet</span><br><span class="line">GENERAL.ç¡¬ç›˜:                           00:0C:29:AB:CC:67</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">GENERAL.çŠ¶æ€:                           100 (è¿æ¥çš„)</span><br><span class="line">GENERAL.è¿æ¥:                           eth0</span><br><span class="line">GENERAL.è¿æ¥è·¯å¾„:                       /org/freedesktop/NetworkManager/ActiveConnection/1</span><br><span class="line">WIRED-PROPERTIES.è½½æ³¢:                  å¼€</span><br><span class="line">IP4.åœ°å€[1]:                            192.168.83.140/24</span><br><span class="line">IP4.ç½‘å…³:                               192.168.83.2</span><br><span class="line">IP4.è·¯ç”±[1]:                            dst = 192.168.83.144/32, nh = 192.168.83.2, mt = 0</span><br><span class="line">IP4.DNS[1]:                             192.168.83.2</span><br><span class="line">IP6.åœ°å€[1]:                            fe80::20c:29ff:feab:cc67/64</span><br><span class="line">IP6.ç½‘å…³:                               --</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹è¿æ¥çŠ¶æ€"><a href="#æŸ¥çœ‹è¿æ¥çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è¿æ¥çŠ¶æ€"></a>æŸ¥çœ‹è¿æ¥çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection</span></span><br><span class="line">åç§°    UUID                                  ç±»å‹            è®¾å¤‡   </span><br><span class="line">eth0    bb501ad9-f26f-4310-b857-14a1fc520546  802-3-ethernet  eth0   </span><br><span class="line">virbr0  d8b4e76e-b469-4ff4-8937-cef5cc254873  bridge          virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥"><a href="#æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥"></a>æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection show</span></span><br><span class="line">åç§°    UUID                                  ç±»å‹            è®¾å¤‡   </span><br><span class="line">eth0    bb501ad9-f26f-4310-b857-14a1fc520546  802-3-ethernet  eth0   </span><br><span class="line">virbr0  d8b4e76e-b469-4ff4-8937-cef5cc254873  bridge          virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ"><a href="#æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ"></a>æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection show eth0</span></span><br><span class="line">connection.id:                          eth0</span><br><span class="line">connection.uuid:                        bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">connection.stable-id:                   --</span><br><span class="line">connection.interface-name:              eth0</span><br><span class="line">connection.type:                        802-3-ethernet</span><br><span class="line">connection.autoconnect:                 yes</span><br><span class="line">connection.autoconnect-priority:        0</span><br><span class="line">connection.autoconnect-retries:         -1 (é»˜è®¤)</span><br><span class="line">connection.timestamp:                   1555937607</span><br><span class="line">connection.read-only:                   no</span><br><span class="line">connection.permissions:                 --</span><br><span class="line">connection.zone:                        --</span><br><span class="line">connection.master:                      --</span><br><span class="line">connection.slave-type:                  --</span><br><span class="line">connection.autoconnect-slaves:          -1 (é»˜è®¤)</span><br><span class="line">connection.secondaries:                 --</span><br><span class="line">connection.gateway-ping-timeout:        0</span><br><span class="line">connection.metered:                     æœªçŸ¥</span><br><span class="line">connection.lldp:                        -1 (default)</span><br><span class="line">802-3-ethernet.port:                    --</span><br><span class="line">802-3-ethernet.speed:                   0</span><br><span class="line">802-3-ethernet.duplex:                  --</span><br><span class="line">802-3-ethernet.auto-negotiate:          no</span><br><span class="line">802-3-ethernet.mac-address:             --</span><br><span class="line">802-3-ethernet.cloned-mac-address:      --</span><br><span class="line">802-3-ethernet.generate-mac-address-mask:--</span><br><span class="line">802-3-ethernet.mac-address-blacklist:   --</span><br><span class="line">802-3-ethernet.mtu:                     è‡ªåŠ¨</span><br><span class="line">802-3-ethernet.s390-subchannels:        --</span><br><span class="line">802-3-ethernet.s390-nettype:            --</span><br><span class="line">802-3-ethernet.s390-options:            --</span><br><span class="line">802-3-ethernet.wake-on-lan:             1 (default)</span><br><span class="line">802-3-ethernet.wake-on-lan-password:    --</span><br><span class="line">ipv4.method:                            manual</span><br><span class="line">ipv4.dns:                               192.168.83.2</span><br><span class="line">ipv4.dns-search:                        --</span><br><span class="line">ipv4.dns-options:                       ï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">ipv4.dns-priority:                      0</span><br><span class="line">ipv4.addresses:                         192.168.83.140/24</span><br><span class="line">ipv4.gateway:                           192.168.83.2</span><br><span class="line">ipv4.routes:                            --</span><br><span class="line">ipv4.route-metric:                      -1</span><br><span class="line">ipv4.ignore-auto-routes:                no</span><br><span class="line">ipv4.ignore-auto-dns:                   no</span><br><span class="line">ipv4.dhcp-client-id:                    --</span><br><span class="line">ipv4.dhcp-timeout:                      0</span><br><span class="line">ipv4.dhcp-send-hostname:                yes</span><br><span class="line">ipv4.dhcp-hostname:                     --</span><br><span class="line">ipv4.dhcp-fqdn:                         --</span><br><span class="line">ipv4.never-default:                     no</span><br><span class="line">ipv4.may-fail:                          yes</span><br><span class="line">ipv4.dad-timeout:                       -1 (é»˜è®¤)</span><br><span class="line">ipv6.method:                            ignore</span><br><span class="line">ipv6.dns:                               --</span><br><span class="line">ipv6.dns-search:                        --</span><br><span class="line">ipv6.dns-options:                       ï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">ipv6.dns-priority:                      0</span><br><span class="line">ipv6.addresses:                         --</span><br><span class="line">ipv6.gateway:                           --</span><br><span class="line">ipv6.routes:                            --</span><br><span class="line">ipv6.route-metric:                      -1</span><br><span class="line">ipv6.ignore-auto-routes:                no</span><br><span class="line">ipv6.ignore-auto-dns:                   no</span><br><span class="line">ipv6.never-default:                     no</span><br><span class="line">ipv6.may-fail:                          yes</span><br><span class="line">ipv6.ip6-privacy:                       -1 (æœªçŸ¥)</span><br><span class="line">ipv6.addr-gen-mode:                     stable-privacy</span><br><span class="line">ipv6.dhcp-send-hostname:                yes</span><br><span class="line">ipv6.dhcp-hostname:                     --</span><br><span class="line">ipv6.token:                             --</span><br><span class="line">proxy.method:                           none</span><br><span class="line">proxy.browser-only:                     no</span><br><span class="line">proxy.pac-url:                          --</span><br><span class="line">proxy.pac-script:                       --</span><br><span class="line">GENERAL.åç§°:                           eth0</span><br><span class="line">GENERAL.UUID:                           bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">GENERAL.è®¾å¤‡:                           eth0</span><br><span class="line">GENERAL.çŠ¶æ€:                           å·²æ¿€æ´»</span><br><span class="line">GENERAL.é»˜è®¤:                           æ˜¯</span><br><span class="line">GENERAL.é»˜è®¤6:                          å¦</span><br><span class="line">GENERAL.VPN å‚æ•°:                       å¦</span><br><span class="line">GENERAL.åŒº:                             --</span><br><span class="line">GENERAL.DBUSè·¯å¾„:                       /org/freedesktop/NetworkManager/ActiveConnection/1</span><br><span class="line">GENERAL.è¿æ¥è·¯å¾„:                       /org/freedesktop/NetworkManager/Settings/1</span><br><span class="line">GENERAL.æŒ‡å®šå¯¹è±¡:                       --</span><br><span class="line">GENERAL.ä¸»è·¯å¾„:                         --</span><br><span class="line">IP4.åœ°å€[1]:                            192.168.83.140/24</span><br><span class="line">IP4.ç½‘å…³:                               192.168.83.2</span><br><span class="line">IP4.è·¯ç”±[1]:                            dst = 192.168.83.144/32, nh = 192.168.83.2, mt = 0</span><br><span class="line">IP4.DNS[1]:                             192.168.83.2</span><br><span class="line">IP6.åœ°å€[1]:                            fe80::20c:29ff:feab:cc67/64</span><br><span class="line">IP6.ç½‘å…³:                               --</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ"><a href="#ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ" class="headerlink" title="ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ"></a>ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ</h2><p><code>CentOS/RHEL</code>çš„ç½‘ç»œé…ç½®æ–‡ä»¶é»˜è®¤ç›®å½•ä¸º<code>/etc/sysconfig/network-scripts</code><br>é»˜è®¤ç¬¬ä¸€å—ç‰©ç†ç½‘å¡é…ç½®æ–‡ä»¶ä¸º<code>ifcfg-eth0</code>, å¦‚æœæœ‰ç¬¬äºŒå—ç‰©ç†ç½‘å¡, é…ç½®æ–‡ä»¶åˆ™ä¸º<code>ifcfg-eth1</code>ä»¥æ­¤ç±»æ¨ã€‚ æ³¨æ„: å¦‚æœæ–°å¢ç‰©ç†ç½‘å¡æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œå¯é€‰æ‹©å¤åˆ¶ç³»ç»Ÿé»˜è®¤çš„è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®NetworkMangerå¼€æœºä¸å¯åŠ¨, åŒæ—¶åœæ­¢NetworkMangeræœåŠ¡</span><br><span class="line">[root@zhoulijie ~]# systemctl disable NetworkManager</span><br><span class="line">[root@zhoulijie ~]# systemctl stop NetworkManager</span><br><span class="line"></span><br><span class="line">//æ·»åŠ ä¸€å—ç‰©ç†ç½‘å¡, ç„¶åæ–°å¢ç½‘ç»œè¿æ¥é…ç½®æ–‡ä»¶</span><br><span class="line">//å¤åˆ¶é…ç½®eth0é…ç½®æ–‡ä»¶ä¸ºeth1</span><br><span class="line">[root@zhoulijie ~]# cd /etc/sysconfig/network-scripts/</span><br><span class="line">[root@zhoulijie network-scripts]# cp ifcfg-eth0 ifcfg-eth1</span><br><span class="line"></span><br><span class="line">//ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶</span><br><span class="line">[root@zhoulijie ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth1</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth1</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.83.141</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.83.2</span><br><span class="line">DNS1=192.168.83.2</span><br><span class="line"></span><br><span class="line">//é‡å¯networkç½‘ç»œæœåŠ¡åŠ è½½ç½‘ç»œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</span><br><span class="line">[root@zhoulijie ~]# systemctl restart network</span><br><span class="line">[root@zhoulijie ~]# systemctl enable network</span><br></pre></td></tr></table></figure>

<h2 id="ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥"><a href="#ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥" class="headerlink" title="ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥"></a>ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥</h2><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p><code>ping</code>å‘½ä»¤çš„ç›®çš„åœ¨äºæµ‹è¯•å¦ä¸€å°ä¸»æœºæ˜¯å¦å¯è¾¾, å¦‚æœpingä¸åˆ°æŸå°ä¸»æœº,å°±è¯´æ˜å¯¹æ–¹ä¸»æœºå·²ç»å‡ºç°äº†é—®é¢˜, ä½†æ˜¯ä¸æ’é™¤ç”±äºé“¾è·¯ä¸­çš„é˜²ç«å¢™ã€pingè¢«ä¸¢å¼ƒç­‰åŸå› é€ æˆpingä¸é€šçš„æƒ…å†µ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//pingå‘½ä»¤å¸¸ç”¨é€‰é¡¹ï¼š</span><br><span class="line">    -c æŒ‡å®špingçš„æ¬¡æ•°</span><br><span class="line">    -i æŒ‡å®špingåŒ…çš„å‘é€é—´éš”</span><br><span class="line">    -w å¦‚æœpingæ²¡æœ‰å›åº”, åˆ™åœ¨æŒ‡å®šè¶…æ—¶æ—¶é—´åé€€å‡º</span><br></pre></td></tr></table></figure>

<h3 id="hostä¸nslookup"><a href="#hostä¸nslookup" class="headerlink" title="hostä¸nslookup"></a>hostä¸nslookup</h3><p><code>host/nslookup</code>å‘½ä»¤ç”¨äºæŸ¥è¯¢DNSè®°å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># host www.baidu.com</span></span><br><span class="line">www.baidu.com is an <span class="built_in">alias</span> <span class="keyword">for</span> www.a.shifen.com.</span><br><span class="line">www.a.shifen.com has address 180.97.33.107</span><br><span class="line">www.a.shifen.com has address 180.97.33.108</span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nslookup  www.baidu.com</span></span><br><span class="line">Server:         192.168.83.2</span><br><span class="line">Address:        192.168.83.2<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.baidu.com   canonical name = www.a.shifen.com.</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 180.97.33.108</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 180.97.33.107</span><br></pre></td></tr></table></figure>

<h3 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h3><p><code>traceroute</code>å‘½ä»¤ç”¨äºè·¯ç”±è·Ÿè¸ª, æ£€æµ‹ç½‘ç»œæ•…éšœå‡ºç°åœ¨ISPè¿è¥å•†æˆ–æ˜¯å¯¹ç«¯æœåŠ¡æ— æ³•å“åº”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># traceroute www.baidu.com</span></span><br><span class="line">traceroute to www.baidu.com (180.97.33.107), 30 hops max, 60 byte packets</span><br><span class="line">1  gateway (192.168.83.2)  0.143 ms  0.066 ms  0.089 ms</span><br><span class="line"> 2  * * *</span><br><span class="line"> 3  * * *</span><br><span class="line"> 4  * * *</span><br><span class="line"> 5  * * *</span><br><span class="line"> 6  * * *</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æ­¦æ±‰åœ°åŒºï¼Œè·¯ç”±è¿½è¸ªè¢«è¿è¥å•†é™åˆ¶</p>
<p>åœ¨åŒ—ä¸Šå¹¿æ·±å¯ä»¥è·¯ç”±è¿½è¸ª</p>
</blockquote>
<h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p><code>netstat</code>ç”¨äºæŸ¥çœ‹ç½‘ç»œçŠ¶æ€</p>
<h5 id="æ˜¾ç¤ºè·¯ç”±è¡¨"><a href="#æ˜¾ç¤ºè·¯ç”±è¡¨" class="headerlink" title="æ˜¾ç¤ºè·¯ç”±è¡¨"></a>æ˜¾ç¤ºè·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -r</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">default         gateway         0.0.0.0         UG        0 0          0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U         0 0          0 eth0</span><br><span class="line">192.168.83.144  gateway         255.255.255.255 UGH       0 0          0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨"><a href="#ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨" class="headerlink" title="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨"></a>ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -rn</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">0.0.0.0         192.168.83.2    0.0.0.0         UG        0 0          0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U         0 0          0 eth0</span><br><span class="line">192.168.83.144  192.168.83.2    255.255.255.255 UGH       0 0          0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥"><a href="#æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥" class="headerlink" title="æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥"></a>æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -t</span></span><br><span class="line">Active Internet connections (w/o servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºudpè¿æ¥"><a href="#æ˜¾ç¤ºudpè¿æ¥" class="headerlink" title="æ˜¾ç¤ºudpè¿æ¥"></a>æ˜¾ç¤ºudpè¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -u</span></span><br><span class="line">Active Internet connections (w/o servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥"><a href="#æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥" class="headerlink" title="æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥"></a>æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -l</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN    </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥"><a href="#æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥"></a>æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -a</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN   </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸ç”¨é€‰é¡¹"><a href="#å¸¸ç”¨é€‰é¡¹" class="headerlink" title="å¸¸ç”¨é€‰é¡¹"></a>å¸¸ç”¨é€‰é¡¹</h5><blockquote>
<p> -antlp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -antlp</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:55033           0.0.0.0:*               LISTEN      1732/rpc.statd</span><br><span class="line">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      1726/rpcbind</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h3 id="ss"><a href="#ss" class="headerlink" title="ss"></a>ss</h3><p><code>ss</code>æ˜¯ä¸€ç§ç½‘ç»œçŠ¶æ€æŸ¥çœ‹å·¥å…·ï¼Œå–ä»£netstat</p>
<blockquote>
<p>è¯­æ³•ï¼šss [options][ FILTER ]<br>å¸¸ç”¨çš„optionsï¼š<br>    -tï¼štcpåè®®ç›¸å…³<br>    -uï¼šudpåè®®ç›¸å…³<br>    -wï¼šè£¸å¥—æ¥å­—ç›¸å…³<br>    -xï¼šunixå¥—æ¥å­—ç›¸å…³<br>    -lï¼šlistençŠ¶æ€çš„è¿æ¥<br>    -aï¼šæ‰€æœ‰<br>    -nï¼šæ•°å­—æ ¼å¼<br>    -pï¼šç›¸å…³çš„ç¨‹åºåŠpid<br>    -eï¼šæ‰©å±•çš„ä¿¡æ¯<br>    -mï¼šå†…å­˜ç”¨é‡<br>    -oï¼šæ˜¾ç¤ºè®¡æ—¶å™¨ä¿¡æ¯</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å¸¸è§çš„FILTERï¼š</span><br><span class="line">    FILTER := [ state TCP-STATE ] [ EXPRESSION ]</span><br><span class="line">    å¦‚ï¼šss -tan state ESTABLISHED</span><br><span class="line">                        </span><br><span class="line">å¸¸è§çš„stateï¼š</span><br><span class="line">    //tcp finite state machineï¼šæœ‰é™çŠ¶æ€æœº</span><br><span class="line">        LISTENï¼šç›‘å¬</span><br><span class="line">        ESTABLISHEDï¼šå·²å»ºç«‹çš„è¿æ¥</span><br><span class="line">        </span><br><span class="line">EXPRESSIONï¼š</span><br><span class="line">	dport =</span><br><span class="line">	sport =</span><br><span class="line">ç¤ºä¾‹ï¼š&apos;( dport = :ssh or sport = :ssh)&apos;ï¼Œæ­¤å¤„çš„sshä¹Ÿå³æœåŠ¡åå¯ä»¥ä½¿ç”¨å…¶å¯¹åº”çš„ç«¯å£å·ä»£æ›¿ï¼Œç­‰å·ä¸¤è¾¹å¿…é¡»æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸ç”¨ç»„åˆ"><a href="#å¸¸ç”¨ç»„åˆ" class="headerlink" title="å¸¸ç”¨ç»„åˆ"></a>å¸¸ç”¨ç»„åˆ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -tan</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*</span><br><span class="line">ESTAB      0      0                     172.16.12.128:22                                  172.16.12.1:56187</span><br><span class="line">ESTAB      0      0                     172.16.12.128:22                                  172.16.12.1:53808</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -tanl</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -antlp</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*                   users:((<span class="string">"sshd"</span>,pid=889,fd=3))</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*                   users:((<span class="string">"master"</span>,pid=1007,fd=13))</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*                   users:((<span class="string">"sshd"</span>,pid=889,fd=4))</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*                   users:((<span class="string">"master"</span>,pid=1007,fd=14))</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -anu</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">UNCONN     0      0                                 *:23511                                         *:*</span><br><span class="line">UNCONN     0      0                                 *:68                                            *:*</span><br><span class="line">UNCONN     0      0                                :::35299                                        :::*</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸è§ç«¯å£"><a href="#å¸¸è§ç«¯å£" class="headerlink" title="å¸¸è§ç«¯å£"></a>å¸¸è§ç«¯å£</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http    80/tcp </span><br><span class="line">https   443/tcp </span><br><span class="line">ssh     22/tcp </span><br><span class="line">ftp     20,21/tcp</span><br><span class="line">mysql   3306/tcp</span><br><span class="line">rsync   873/rsync</span><br><span class="line">redis   6379/tcp</span><br></pre></td></tr></table></figure>

<h3 id="ç½‘ç»œæ•…éšœæ’æŸ¥"><a href="#ç½‘ç»œæ•…éšœæ’æŸ¥" class="headerlink" title="ç½‘ç»œæ•…éšœæ’æŸ¥"></a>ç½‘ç»œæ•…éšœæ’æŸ¥</h3><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­æ¯ä¸ªipçš„è¿æ¥æ•° </p>
<blockquote>
<p> netstat -ntu | awk â€˜{print $5}â€™ | cut -d: -f1 | sort | uniq -c | sort -n</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -ntu | awk '&#123;print $5&#125;' | cut -d: -f1 | sort | uniq -c | sort -n</span></span><br><span class="line">      1 Address</span><br><span class="line">      1 servers)</span><br></pre></td></tr></table></figure>

<p>2.è¯·åˆ—å‡ºä¸‹åˆ—æœåŠ¡ä½¿ç”¨çš„ç«¯å£,http,ftp,ssh,telnet,mysql,dns </p>
<blockquote>
<p> http      80 </p>
<p> ftp        20,21 </p>
<p> ssh       22</p>
<p> telnet    23</p>
<p> mysql    3306 </p>
<p> dns       53</p>
</blockquote>
<p>3.å¦‚ä½•åœ¨è™šæ‹Ÿæœºä¸Šæ–°å¢åŠ ä¸€å—ç½‘å¡ï¼Œå¹¶é…ç½®IPä¸º172.16.0.10ï¼ŒæŒ‡å®šç½‘å…³ä¸º172.16.0.1 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># cp ifcfg-eth0 ifcfg-eth1</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim ifcfg-eth1</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># cat ifcfg-eth1</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth1      //æ­¤å¤„eth0æ”¹æˆeth1</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth1    //æ­¤å¤„eth0æ”¹æˆeth1</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=172.16.0.10  //æ­¤å¤„æ›´æ”¹IP</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=172.16.0.1  //æ­¤å¤„æ›´æ”¹ç½‘å…³</span><br><span class="line">DNS1=172.16.0.1     //æ­¤å¤„æ›´æ”¹DNS1</span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<p>4.è¯¦ç»†æè¿°dnsè§£æè¿‡ç¨‹ï¼Œä»¥è®¿é—®<a href="http://www.baidu.comä¸ºä¾‹" target="_blank" rel="noopener">www.baidu.comä¸ºä¾‹</a> </p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ä¸€ä¸ªåŸŸå:<a href="http://www.baidu.comï¼Œè¿™æ—¶ï¼Œä½ ä½¿ç”¨çš„ç”µè„‘ä¼šå‘å‡ºä¸€ä¸ªDNSè¯·æ±‚åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœ¬åœ°DNSæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ç½‘ç»œæ¥å…¥æœåŠ¡å™¨å•†æä¾›ï¼Œæ¯”å¦‚ä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ã€‚" target="_blank" rel="noopener">www.baidu.comï¼Œè¿™æ—¶ï¼Œä½ ä½¿ç”¨çš„ç”µè„‘ä¼šå‘å‡ºä¸€ä¸ªDNSè¯·æ±‚åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœ¬åœ°DNSæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ç½‘ç»œæ¥å…¥æœåŠ¡å™¨å•†æä¾›ï¼Œæ¯”å¦‚ä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ã€‚</a></p>
<p>æŸ¥è¯¢<a href="http://www.baidu.comçš„DNSè¯·æ±‚åˆ°è¾¾æœ¬åœ°DNSæœåŠ¡å™¨ä¹‹åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¼šé¦–å…ˆæŸ¥è¯¢å®ƒçš„ç¼“å­˜è®°å½•ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ­¤æ¡è®°å½•ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚å¦‚æœæ²¡æœ‰ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨è¿˜è¦å‘DNSæ ¹æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚" target="_blank" rel="noopener">www.baidu.comçš„DNSè¯·æ±‚åˆ°è¾¾æœ¬åœ°DNSæœåŠ¡å™¨ä¹‹åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¼šé¦–å…ˆæŸ¥è¯¢å®ƒçš„ç¼“å­˜è®°å½•ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ­¤æ¡è®°å½•ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚å¦‚æœæ²¡æœ‰ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨è¿˜è¦å‘DNSæ ¹æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚</a></p>
<p>æ ¹DNSæœåŠ¡å™¨æ²¡æœ‰è®°å½•å…·ä½“çš„åŸŸåå’ŒIPåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œè€Œæ˜¯å‘Šè¯‰æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œä½ å¯ä»¥åˆ°åŸŸæœåŠ¡å™¨ä¸Šå»ç»§ç»­æŸ¥è¯¢ï¼Œå¹¶ç»™å‡ºåŸŸæœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<p>æœ¬åœ°DNSæœåŠ¡å™¨ç»§ç»­å‘åŸŸæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯·æ±‚çš„å¯¹è±¡æ˜¯.comåŸŸæœåŠ¡å™¨ã€‚.comåŸŸæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¹Ÿä¸ä¼šç›´æ¥è¿”å›åŸŸåå’ŒIPåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œè€Œæ˜¯å‘Šè¯‰æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œä½ çš„åŸŸåçš„è§£ææœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<p>æœ€åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨å‘åŸŸåçš„è§£ææœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè¿™æ—¶å°±èƒ½æ”¶åˆ°ä¸€ä¸ªåŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¸ä»…è¦æŠŠIPåœ°å€è¿”å›ç»™ç”¨æˆ·ç”µè„‘ï¼Œè¿˜è¦æŠŠè¿™ä¸ªå¯¹åº”å…³ç³»ä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼Œä»¥å¤‡ä¸‹æ¬¡åˆ«çš„ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼ŒåŠ å¿«ç½‘ç»œè®¿é—®ã€‚</p>
</blockquote>
<p>5.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­è¿è¡Œäº†å¤šå°‘ä¸ªè¿›ç¨‹ </p>
<blockquote>
<p> ps -aux | wc -l</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># ps -aux | wc -l</span></span><br><span class="line">243</span><br></pre></td></tr></table></figure>

<p>6.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­å¯åŠ¨äº†å“ªäº›ç«¯å£</p>
<blockquote>
<p>ss -tan</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  ss -tan</span></span><br><span class="line">State      Recv-Q Send-Q                         Local Address:Port                                        Peer Address:Port              </span><br><span class="line">LISTEN     0      128                                        *:111                                                    *:*                  </span><br><span class="line">LISTEN     0      5                              192.168.122.1:53                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                        *:22                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                127.0.0.1:631                                                    *:*                  </span><br><span class="line">LISTEN     0      100                                127.0.0.1:25                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                       :::111                                                   :::*                  </span><br><span class="line">LISTEN     0      128                                       :::22                                                    :::*                  </span><br><span class="line">LISTEN     0      128                                      ::1:631                                                   :::*                  </span><br><span class="line">LISTEN     0      100                                      ::1:25</span><br></pre></td></tr></table></figure>

<p>7.å¦‚ä½•æŸ¥çœ‹æ˜¯å¦å¼€å¯80ç«¯å£ï¼ŒåŠæŸ¥çœ‹sshdè¿›ç¨‹æ˜¯å¦å­˜åœ¨ </p>
<blockquote>
<p>netstat   -nultp | grep 80</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat   -nultp | grep 80</span></span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ps -aux | grep sshd</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ps -aux | grep sshd</span></span><br><span class="line">root       1193  0.0  0.2 105996  4076 ?        Ss   18:48   0:00 /usr/sbin/sshd -D</span><br><span class="line">root       6448  0.0  0.0 112676   984 pts/0    R+   22:23   0:00 grep --color=auto sshd</span><br></pre></td></tr></table></figure>

<p>8.åˆ—å‡ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„tcpç«¯å£ </p>
<blockquote>
<p>netstat -l | grep tcp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -l | grep tcp</span></span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 [::]:sunrpc             [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 [::]:ssh                [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 localhost:ipp           [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 localhost:smtp          [::]:*                  LISTEN</span><br></pre></td></tr></table></figure>

<p>9.æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£ä¿¡æ¯, åŒ…æ‹¬ PID å’Œè¿›ç¨‹åç§° </p>
<blockquote>
<p>netstat -antlp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -antlp</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      1/systemd           </span><br><span class="line">tcp        0      0 192.168.122.1:53        0.0.0.0:*               LISTEN      1391/dnsmasq        </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1193/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      1197/cupsd          </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1321/master         </span><br><span class="line">tcp6       0      0 :::111                  :::*                    LISTEN      1/systemd           </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      1193/sshd           </span><br><span class="line">tcp6       0      0 ::1:631                 :::*                    LISTEN      1197/cupsd          </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      1321/master</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/" data-id="ck6abn9w4003ysgu6d8d9q0hs"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-10.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/10.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/"
    >shellè„šæœ¬ç¬”è®°(è„šæœ¬)</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/10.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/" class="article-date">
  <time datetime="2019-08-29T15:44:18.578Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------çŒœæ•°å­—-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ æ‰€çŒœåˆ°çš„æ•°å­—ï¼š"</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å“‡ç‘Ÿï¼å¥½å‰å®³ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä½ çŒœé”™äº†ï¼Œå“ˆå“ˆå“ˆ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------è®¡ç®—å¹´é¾„-------------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">age=100</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥æ‚¨ä»Šå¹´çš„å¹´é¾„ï¼š"</span> user_age</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_age</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æœ‰è¯¯ï¼Œè¯·é‡æ–°æ‰§è¡Œå¹¶ä¸”è¾“å…¥1-100ä¹‹å‰ä»»æ„æ•°å€¼ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_age</span> -lt <span class="variable">$age</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¿˜å¯ä»¥æ´»"</span> $[ <span class="variable">$age</span> - <span class="variable">$user_age</span> ] <span class="string">"å²ã€‚"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æœ‰è¯¯ï¼Œè¯·é‡æ–°æ‰§è¡Œå¹¶ä¸”è¾“å…¥1-100ä¹‹å‰ä»»æ„æ•°å€¼ï¼"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------è¾“å…¥ä¸‰ä¸ªæ•°å€¼ï¼Œè‡ªåŠ¨å–å‡ºæœ€å¤§å€¼ä¸æœ€å°å€¼----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 3);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š"</span> num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -gt <span class="variable">$max</span> ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -lt <span class="variable">$min</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æœ€å¤§çš„æ•°å­—ä¸º: "</span><span class="variable">$max</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æœ€å°çš„æ•°å­—ä¸º: "</span><span class="variable">$min</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#------æˆç»©ï¼š90ä¸Šä¼˜ç§€ã€80ä¸Šè‰¯å¥½ã€70ä¸Šä¸­ç­‰ã€60ä¸ŠåŠæ ¼ã€60ä¸‹å·®-----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥æ‚¨çš„æˆç»©ï¼š"</span> user_chengji</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_chengji</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -gt 100 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥0-100ä»¥å†…çš„æ•°å€¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -ge 90 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¼˜ç§€"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 80 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºè‰¯å¥½"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 70 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¸­ç­‰"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºåŠæ ¼"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -le 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºå·®"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------caseè¯­æ³•---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">    <span class="string">"start"</span>|<span class="string">"Start"</span>|<span class="string">"START"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"stop"</span>|<span class="string">"STOP"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">    ;;</span><br><span class="line">    <span class="string">"restart"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"status"</span>)</span><br><span class="line">        count=$(ps -ef | egrep -v <span class="string">"grep | <span class="variable">$0</span>"</span> | grep -c httpd &amp;&gt; /dev/null)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$count</span> -ne 0 ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is running."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is stopped."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usageï¼šservice httpd</span></span><br><span class="line"><span class="string">        start|stop|restart|status"</span></span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp httpd /etc/init.d/</span><br><span class="line">chmod +x /etc/init.d/httpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ çš„åˆ†æ•°ï¼š"</span> user_num</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_num</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·æ­£ç¡®åœ°è¾“å…¥æ‚¨çš„åˆ†æ•°ï¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$user_num</span> <span class="keyword">in</span></span><br><span class="line">    -gt100)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·æ­£ç¡®è¾“å…¥æ‚¨çš„åˆ†æ•°ï¼"</span></span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¼˜ç§€ï¼"</span></span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    *ï¼‰</span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å–å‡º/etc/passwdçš„ç”¨æˆ·ä»¥åŠUID</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä¸€å…±æœ‰<span class="variable">$(cat $Fa | wc -l)</span>ä¸ªç”¨æˆ·."</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæˆ–ä»¥ä¸Šæ•°å­—ã€‚"</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $* ; <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ— æ•ˆï¼Œè¯·è¾“å…¥æ•°å­—ï¼Œç‰¹æ®Šå­—ç¬¦ä»¥åŠå­—æ¯ç­‰å‡æ— æ•ˆ"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        man=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$min</span> -gt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..100&#125;;<span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line">[ <span class="variable">$#</span> -eq 2 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„æ•°å­—ï¼"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    [ $? -ne 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥æ•°å­—ï¼Œå­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ç­‰å‡æ— æ•ˆï¼"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line">    [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ] &amp;&amp; man=<span class="variable">$i</span></span><br><span class="line">    [ <span class="variable">$man</span> -gt <span class="variable">$i</span> ] &amp;&amp; min=<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> -------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -ne 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 2 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> -----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 5 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">break</span> [num]</span><br><span class="line">ä¸­æ­¢å¾ªç¯</span><br><span class="line">    <span class="built_in">break</span>è¯­å¥åé¢çš„å†…å®¹ä¸ä¼šè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"><span class="built_in">continue</span> [num]</span><br><span class="line">æå‰è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯</span><br><span class="line">    <span class="built_in">continue</span>è¯­å¥åé¢ä¸ä¼šè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#å˜é‡</span></span><br><span class="line">name=tom</span><br><span class="line">passwd=123321</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å…¥ç”¨æˆ·åä»¥åŠå¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=1;i&gt;=1;i++ ));<span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span> user_name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span> user_passwd</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 3 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨å·²ä¸‰æ¬¡è¾“å…¥æœ‰è¯¯ï¼Œç³»ç»Ÿé»˜è®¤é”å®šè´¦æˆ·ï¼Œå¯»æ‰¾ç®¡ç†å‘˜è§£é”ï¼â€</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_name</span> != <span class="variable">$name</span> ] &amp;&amp; [ <span class="variable">$passwd</span> != <span class="variable">$user_passwd</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨çš„ç”¨æˆ·åæˆ–è€…å¯†ç æœ‰è¯¯ï¼Œè¯·é‡è¯•ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>hello <span class="variable">$user_name</span>.æ¬¢è¿æ¥åˆ°è¿™é‡Œï¼<span class="string">"</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># whileå¾ªç¯</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    ehco -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo ----</span></span><br><span class="line"><span class="string">    ((i+=2))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    if [ $[ <span class="variable">$i</span> % 2 ] -eq 0 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -lt 5 -o <span class="variable">$i</span> -gt 7 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -ge 5 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$line</span></span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; /etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#! /bin/bash</span></span><br><span class="line"><span class="string">Fa=/etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    user_name=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $1 &#125;')</span></span></span><br><span class="line"><span class="string">    user_UID=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $3 &#125;')</span></span></span><br><span class="line"><span class="string">    echo â€œhello! <span class="variable">$user_name</span> æ‚¨çš„UIDæ˜¯ <span class="variable">$user_UID</span>â€</span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; <span class="variable">$Fa</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> %100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    read -p "</span>è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—<span class="string">" user_num</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span>ã€€| egrep '^[0-9]+$' &amp;&gt; /dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼è¯·é‡è¯•ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        ehco "</span>æ‚¨è¾“å…¥æ­£ç¡®ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$i</span>æ¬¡.<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">flag=ture</span></span><br><span class="line"><span class="string">i=3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -le 50 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        flag=false</span></span><br><span class="line"><span class="string">    let i++</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#ç”¨forå¾ªç¯å†™ä¸ªä¹ä¹ä¹˜æ³•è¡¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#ï¼/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for i in <span class="variable">$(seq 9)</span>;do</span></span><br><span class="line"><span class="string">    for j in <span class="variable">$(seq $i)</span>;do</span></span><br><span class="line"><span class="string">        echo -en "</span><span class="variable">$&#123;j&#125;</span>x<span class="variable">$&#123;i&#125;</span>=$[<span class="variable">$i</span> * <span class="variable">$j</span>]\t<span class="string">"</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">    echo </span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">untilå¾ªç¯çŒœæ•°å­—éšæœº</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bg=false</span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> % 100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">until <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    read -p "</span>è¯·è¾“å…¥æ‰€çŒœçš„æ•°å­—ï¼š<span class="string">" user_num</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span> | egrep '^[0-9]+$' &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>çŒœå¯¹äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$&#123;i&#125;</span>æ¬¡ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        flag=true</span></span><br><span class="line"><span class="string">        continue</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/10.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/" data-id="ck6abn9t90014sgu63tde28ud"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-9.linux--shellè„šæœ¬è¿›é˜¶" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/9.linux--shellè„šæœ¬è¿›é˜¶/"
    >shellè„šæœ¬è¿›é˜¶</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/9.linux--shellè„šæœ¬è¿›é˜¶/" class="article-date">
  <time datetime="2019-08-29T15:44:18.575Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="bashæ¡ä»¶åˆ¤æ–­"><a href="#bashæ¡ä»¶åˆ¤æ–­" class="headerlink" title="bashæ¡ä»¶åˆ¤æ–­"></a>bashæ¡ä»¶åˆ¤æ–­</h2><h3 id="æ¡ä»¶æµ‹è¯•ç±»å‹"><a href="#æ¡ä»¶æµ‹è¯•ç±»å‹" class="headerlink" title="æ¡ä»¶æµ‹è¯•ç±»å‹"></a>æ¡ä»¶æµ‹è¯•ç±»å‹</h3><p>æ¡ä»¶æµ‹è¯•åˆ†ä¸º<strong>æ•´æ•°æµ‹è¯•</strong>ã€<strong>å­—ç¬¦æµ‹è¯•</strong>ã€<strong>æ–‡ä»¶æµ‹è¯•</strong></p>
<h3 id="æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼"><a href="#æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼"></a>æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ echoes ]</span><br><span class="line">[[ echoes ]]</span><br><span class="line"><span class="built_in">test</span> echoes</span><br></pre></td></tr></table></figure>

<h3 id="æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰"><a href="#æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰" class="headerlink" title="æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰"></a>æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰</h3><blockquote>
<p> -eq    æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ç›¸ç­‰</p>
<p> -ne    æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ä¸ç­‰</p>
<p>-gt    æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å¤§äºå¦ä¸€ä¸ªæ•°</p>
<p> -lt    æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å°äºå¦ä¸€ä¸ªæ•°</p>
<p>-ge    å¤§äºæˆ–å°äº</p>
<p> -le    å°äºæˆ–ç­‰äº</p>
</blockquote>
<h3 id="å­—ç¬¦æµ‹è¯•"><a href="#å­—ç¬¦æµ‹è¯•" class="headerlink" title="å­—ç¬¦æµ‹è¯•"></a>å­—ç¬¦æµ‹è¯•</h3><blockquote>
<p> ==     ç­‰å€¼æ¯”è¾ƒï¼Œæ£€æŸ¥ä¸¤è¾¹çš„å†…å®¹æ˜¯å¦ä¸€è‡´ï¼Œåˆ‡è®° == ä¸¤è¾¹è¦æœ‰ç©ºæ ¼</p>
<p>!=     æ£€æŸ¥ä¸¤è¾¹å†…å®¹æ˜¯å¦ä¸ä¸€è‡´ï¼Œä¸ä¸€è‡´ä¸ºçœŸï¼Œä¸€è‡´ä¸ºå‡</p>
<p>=~    å·¦ä¾§å­—ç¬¦ç©¿èƒ½å¦è¢«å³ä¾§çš„æ‰€åŒ¹é…åˆ°ï¼Œæ­¤è¡¨è¾¾å¼åº”ç”¨äºåŒä¸­æ‹¬å·[[]]ä¸­</p>
<p>-z â€œstringâ€    æµ‹è¯•æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œç©ºåˆ™ä¸ºçœŸï¼Œä¸ç©ºåˆ™ä¸ºå‡<br>-n â€œstringâ€    æµ‹è¯•æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ç©ºï¼Œä¸ç©ºåˆ™ä¸ºçœŸï¼Œç©ºåˆ™ä¸ºå‡</p>
</blockquote>
<h3 id="æ–‡ä»¶æµ‹è¯•"><a href="#æ–‡ä»¶æµ‹è¯•" class="headerlink" title="æ–‡ä»¶æµ‹è¯•"></a>æ–‡ä»¶æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­˜åœ¨æ€§æµ‹è¯•</span></span><br><span class="line">-e	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­˜åœ¨æ€§åŠç±»åˆ«æµ‹è¯•</span></span><br><span class="line">-b	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå—è®¾å¤‡æ–‡ä»¶</span><br><span class="line">-c	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå­—ç¬¦è®¾å¤‡æ–‡ä»¶</span><br><span class="line">-f	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶</span><br><span class="line">-d	æµ‹è¯•æŒ‡å®šè·¯å¾„æ˜¯å¦ä¸ºç›®å½•</span><br><span class="line">-h	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºç›®å½•</span><br><span class="line">-l	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºç¬¦å·é“¾æ¥æ–‡ä»¶</span><br><span class="line">-p	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå‘½åç®¡é“æ–‡ä»¶</span><br><span class="line">-s	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå¥—æ¥å­—æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æƒé™æµ‹è¯•</span></span><br><span class="line">-r	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰è¯»æƒé™</span><br><span class="line">-w	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰å†™å…¥æƒé™</span><br><span class="line">-x	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰æ‰§è¡Œæƒé™</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶ç‰¹æ®Šæƒé™æµ‹è¯•</span></span><br><span class="line">-g	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰sgidæƒé™</span><br><span class="line">-u	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰suidæƒé™</span><br><span class="line">-k	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰stickyæƒé™</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶å¤§å°æµ‹è¯•</span></span><br><span class="line">-s	æµ‹è¯•æ–‡ä»¶æ˜¯å¦éç©º</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æ˜¯å¦æ‰“å¼€æµ‹è¯•</span></span><br><span class="line">-t fd	fdè¡¨ç¤ºçš„æ–‡ä»¶æè¿°æ˜¯å¦å·²ç»æ‰“å¼€å¹¶ä¸”ä¸æŸç»ˆç«¯ç›¸å…³</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŒç›®æµ‹è¯•</span></span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1ä¸æ–‡ä»¶2æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶</span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1æ˜¯å¦æ¯”æ–‡ä»¶2æ–°</span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1æ˜¯å¦æ¯”æ–‡ä»¶2æ—§</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— åˆ†ç±»</span></span><br><span class="line">-N	æµ‹è¯•æ–‡ä»¶è‡ªä»ä¸Šä¸€æ¬¡è¢«å½•å–ä¹‹åæ˜¯å¦è¢«ä¿®æ”¹è¿‡</span><br><span class="line">-O	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”è¢«å½“å‰ç”¨æˆ·æ‹¥æœ‰</span><br><span class="line">-G	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”é»˜è®¤ç»„æ˜¯å¦ä¸ºå½“å‰ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<h3 id="ç»„åˆæµ‹è¯•æ¡ä»¶"><a href="#ç»„åˆæµ‹è¯•æ¡ä»¶" class="headerlink" title="ç»„åˆæµ‹è¯•æ¡ä»¶"></a>ç»„åˆæµ‹è¯•æ¡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-a	ä¸å…³ç³»</span><br><span class="line">-o	æˆ–å…³ç³»</span><br><span class="line">ï¼	éå…³ç³»</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ€»è®¡ä¸ªæ•° å¤§äº 1 ä¸ æ€»è®¡ä¸ªæ•° å°äº 3</span></span><br><span class="line">[ <span class="variable">$#</span> -gt 1 -a <span class="variable">$#</span> -le 3 ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€»è®¡ä¸ªæ•° å¤§äº 1 åå†æ¬¡ç»Ÿè®¡ æ€»è®¡ä¸ªæ•° å°äº 3</span></span><br><span class="line">[<span class="variable">$#</span> -gt 1 ] &amp;&amp; [<span class="variable">$#</span> -le 3]</span><br></pre></td></tr></table></figure>

<h3 id="æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„"><a href="#æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„" class="headerlink" title="æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„"></a>æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„</h3><h4 id="å•åˆ†æ”¯ifè¯­å¥"><a href="#å•åˆ†æ”¯ifè¯­å¥" class="headerlink" title="å•åˆ†æ”¯ifè¯­å¥"></a>å•åˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="åŒåˆ†æ”¯ifè¯­å¥"><a href="#åŒåˆ†æ”¯ifè¯­å¥" class="headerlink" title="åŒåˆ†æ”¯ifè¯­å¥"></a>åŒåˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h5 id="ifè¯­å¥å°æ¸¸æˆ"><a href="#ifè¯­å¥å°æ¸¸æˆ" class="headerlink" title="ifè¯­å¥å°æ¸¸æˆ"></a>ifè¯­å¥å°æ¸¸æˆ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------çŒœæ•°å­—-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ æ‰€çŒœåˆ°çš„æ•°å­—ï¼š"</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å“‡ç‘Ÿï¼å¥½å‰å®³ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä½ çŒœé”™äº†ï¼Œå“ˆå“ˆå“ˆ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="å¤šåˆ†æ”¯ifè¯­å¥"><a href="#å¤šåˆ†æ”¯ifè¯­å¥" class="headerlink" title="å¤šåˆ†æ”¯ifè¯­å¥"></a>å¤šåˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶1ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">elif</span> åˆ¤æ–­æ¡ä»¶2ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°3</span><br><span class="line">	é™ˆè¿°4</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	é™ˆè¿°5</span><br><span class="line">	é™ˆè¿°6</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ†æ”¯é€‰æ‹©"><a href="#åˆ†æ”¯é€‰æ‹©" class="headerlink" title="åˆ†æ”¯é€‰æ‹©"></a>åˆ†æ”¯é€‰æ‹©</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $å˜é‡å <span class="keyword">in</span>            </span><br><span class="line">value1)                </span><br><span class="line">    é™ˆè¿°               </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">value2)                </span><br><span class="line">    é™ˆè¿°                </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">*)                </span><br><span class="line">    é™ˆè¿°                </span><br><span class="line">    ...                </span><br><span class="line">    ;;        </span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¦ï¼š<span class="keyword">case</span>æ”¯æŒglobé£æ ¼çš„é€šé…ç¬¦ï¼š</span><br><span class="line">    *       ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦</span><br><span class="line">    ?       ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    []      æŒ‡å­—èŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    abc|bcd abcæˆ–bcd</span><br></pre></td></tr></table></figure>

<h2 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h2><p>å¾ªç¯è¯­å¥é€šå¸¸éœ€è¦æœ‰ä¸€ä¸ªè¿›å…¥æ¡ä»¶å’Œä¸€ä¸ªé€€å‡ºæ¡ä»¶</p>
<ul>
<li>forå¾ªç¯</li>
<li>whileå¾ªç¯</li>
<li>untilå¾ªç¯</li>
</ul>
<h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><p>forå¾ªç¯å½“åˆ—è¡¨ä¸ä¸ºç©ºæ—¶è¿›å…¥å¾ªç¯ï¼Œå¦åˆ™é€€å‡ºå¾ªç¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡ <span class="keyword">in</span> åˆ—è¡¨; <span class="keyword">do</span></span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((expr1;expr2;expr3))</span><br><span class="line">&#123;</span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( expr1 ; expr2 ; expr3 ));<span class="keyword">do</span></span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">expr1   //ç”¨äºæŒ‡å®šåˆå§‹æ¡ä»¶ï¼Œç»™æ§åˆ¶å˜é‡ä¸€ä¸ªåˆå§‹å€¼</span><br><span class="line">expr2   //åˆ¤å®šä»€ä¹ˆæ—¶å€™é€€å‡ºå¾ªç¯</span><br><span class="line">expr3   //ä¿®æ­£expr1æŒ‡å®šçš„å˜é‡çš„å€¼</span><br><span class="line"></span><br><span class="line">//å¦‚ä½•ç”Ÿæˆåˆ—è¡¨ï¼š</span><br><span class="line">    &#123;1..100&#125;</span><br><span class="line">    seq [èµ·å§‹æ•°] [æ­¥è¿›é•¿åº¦] ç»“æŸæ•°</span><br></pre></td></tr></table></figure>

<h4 id="forå¾ªç¯å–å‡º-etc-passwdç”¨æˆ·"><a href="#forå¾ªç¯å–å‡º-etc-passwdç”¨æˆ·" class="headerlink" title="forå¾ªç¯å–å‡º/etc/passwdç”¨æˆ·"></a>forå¾ªç¯å–å‡º/etc/passwdç”¨æˆ·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#------å–å‡º/etc/passwdçš„ç”¨æˆ·ä»¥åŠUID---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä¸€å…±æœ‰<span class="variable">$(cat $Fa | wc -l)</span>ä¸ªç”¨æˆ·."</span></span><br></pre></td></tr></table></figure>

<h3 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h3><p>whileå¾ªç¯é€‚ç”¨äºå¾ªç¯æ¬¡æ•°æœªçŸ¥çš„åœºæ™¯ï¼Œæ³¨æ„è¦æœ‰é€€å‡ºæ¡ä»¶ã€‚<br>æ¡ä»¶æ»¡è¶³æ—¶è¿›å…¥å¾ªç¯ï¼Œæ¡ä»¶ä¸æ»¡è¶³äº†é€€å‡ºå¾ªç¯ã€‚</p>
<h4 id="whileå¾ªç¯æ­£å¸¸ç”¨æ³•"><a href="#whileå¾ªç¯æ­£å¸¸ç”¨æ³•" class="headerlink" title="whileå¾ªç¯æ­£å¸¸ç”¨æ³•"></a>whileå¾ªç¯æ­£å¸¸ç”¨æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> æ¡ä»¶; <span class="keyword">do</span></span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="whileå¾ªç¯ç‰¹æ®Šç”¨æ³•"><a href="#whileå¾ªç¯ç‰¹æ®Šç”¨æ³•" class="headerlink" title="whileå¾ªç¯ç‰¹æ®Šç”¨æ³•"></a>whileå¾ªç¯ç‰¹æ®Šç”¨æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//whileå¾ªç¯ç‰¹æ®Šç”¨æ³•ä¸€ï¼šæ­»å¾ªç¯</span><br><span class="line">while :;do</span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œçš„å†’å·å¯ä»¥æ”¹æˆä»»ä½•éç©ºå€¼</span><br><span class="line"></span><br><span class="line">whileå¾ªç¯ç‰¹æ®Šç”¨æ³•äºŒï¼šé€è¡Œè¯»å–æŸæ–‡ä»¶ï¼Œå°†å€¼å­˜å…¥lineå˜é‡ä¸­</span><br><span class="line">while read line;do</span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line">done &lt; /etc/passwd</span><br></pre></td></tr></table></figure>

<p>#####whileå¾ªç¯è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-----whileç‰¹æ®Šç”¨æ³•äºŒå–ç”¨æˆ·-------</span></span><br><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line;<span class="keyword">do</span></span><br><span class="line">    user_name=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $1 &#125;'</span>)</span><br><span class="line">    user_UID=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $3 &#125;'</span>)</span><br><span class="line">    <span class="built_in">echo</span> â€œhello! <span class="variable">$user_name</span> æ‚¨çš„UIDæ˜¯ <span class="variable">$user_UID</span>â€</span><br><span class="line">    <span class="built_in">echo</span> -------------------------</span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$Fa</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-------ç”¨whileå¾ªç¯çŒœæ•°å­—-------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line">num=$[<span class="variable">$RANDOM</span> %100]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line">    ((i++))</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—"</span> user_num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$user_num</span>ã€€| egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼è¯·é‡è¯•ï¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ehco <span class="string">"æ‚¨è¾“å…¥æ­£ç¡®ï¼"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$i</span>æ¬¡."</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="untilå¾ªç¯"><a href="#untilå¾ªç¯" class="headerlink" title="untilå¾ªç¯"></a>untilå¾ªç¯</h3><p>æ¡ä»¶ä¸æ»¡è¶³æ—¶è¿›å…¥å¾ªç¯ï¼Œæ¡ä»¶æ»¡è¶³äº†é€€å‡ºå¾ªç¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until æ¡ä»¶; <span class="keyword">do</span></span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ"><a href="#å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ"></a>å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ</h3><blockquote>
<p>break [num]ï¼šæå‰é€€å‡ºå¾ªç¯ã€‚å½“å¾ªç¯è¯­å¥ä¸­å‡ºç°breakæ—¶ï¼Œå°†æå‰é€€å‡ºå¾ªç¯ï¼Œä¸å†æ‰§è¡Œå¾ªç¯åé¢çš„è¯­å¥</p>
<p>continue [num]ï¼šæå‰ç»“æŸæœ¬è½®å¾ªç¯è€Œè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚å½“å¾ªç¯è¯­å¥æ‰§è¡Œåˆ°continueæ—¶ï¼Œcontinueåé¢çš„è¯­å¥å°†ä¸å†æ‰§è¡Œï¼Œæå‰è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯</p>
</blockquote>
<h2 id="å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç "><a href="#å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç " class="headerlink" title="å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç "></a>å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">exit</span>å‘½ä»¤ç”¨äºå®šä¹‰æ‰§è¡ŒçŠ¶æ€ç»“æœ</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> <span class="comment">#      //æ­¤å¤„çš„#å·æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶èŒƒå›´å¯ä»¥æ˜¯0-255</span></span><br><span class="line"></span><br><span class="line">å¦‚æœè„šæœ¬æ²¡æœ‰æ˜ç¡®å®šä¹‰é€€å‡ºçŠ¶æ€ç ï¼Œé‚£ä¹ˆï¼Œæœ€åæ‰§è¡Œçš„ä¸€æ¡å‘½ä»¤çš„é€€å‡ºç å³ä¸ºè„šæœ¬çš„é€€å‡ºçŠ¶æ€ç </span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šè„šæœ¬ä¸­ä¸€æ—¦é‡åˆ°<span class="built_in">exit</span>å‘½ä»¤ï¼Œè„šæœ¬ä¼šç«‹å³ç»ˆæ­¢</span><br></pre></td></tr></table></figure>
      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/9.linux--shellè„šæœ¬è¿›é˜¶/" data-id="ck6abn9sb000bsgu6v3kxvkg5"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-9.linux--linuxè¿›ç¨‹ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/"
    >linuxè¿›ç¨‹ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.571Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="è¿›ç¨‹åŸºæœ¬æ¦‚è¿°"><a href="#è¿›ç¨‹åŸºæœ¬æ¦‚è¿°" class="headerlink" title="è¿›ç¨‹åŸºæœ¬æ¦‚è¿°"></a>è¿›ç¨‹åŸºæœ¬æ¦‚è¿°</h2><p>è¿›ç¨‹æ˜¯å·²å¯åŠ¨çš„å¯æ‰§è¡Œç¨‹åºçš„è¿è¡Œä¸­å®ä¾‹ã€‚</p>
<p>/procç›®å½•ä¸‹ä»¥æ•°å­—ä¸ºåçš„ç›®å½•ï¼Œæ¯ä¸€ä¸ªç›®å½•ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä¿å­˜ç€è¿›ç¨‹çš„å±æ€§ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹çš„PIDæ˜¯å”¯ä¸€çš„ï¼Œå°±ç®—è¿›ç¨‹é€€å‡ºäº†ï¼Œå…¶å®ƒè¿›ç¨‹ä¹Ÿä¸ä¼šå ç”¨å…¶PIDã€‚</p>
<h4 id="è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†"><a href="#è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†"></a>è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†</h4><ul>
<li>å·²åˆ†é…å†…å­˜çš„åœ°å€ç©ºé—´</li>
<li>å®‰å…¨å±æ€§ï¼ŒåŒ…æ‹¬æ‰€æœ‰æƒå‡­æ®å’Œç‰¹æƒ</li>
<li>ç¨‹åºä»£ç çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ‰§è¡Œçº¿ç¨‹</li>
<li>è¿›ç¨‹çŠ¶æ€</li>
</ul>
<h4 id="è¿›ç¨‹çš„ç¯å¢ƒ"><a href="#è¿›ç¨‹çš„ç¯å¢ƒ" class="headerlink" title="è¿›ç¨‹çš„ç¯å¢ƒ"></a>è¿›ç¨‹çš„ç¯å¢ƒ</h4><ul>
<li>æœ¬åœ°å’Œå…¨å±€å˜é‡</li>
<li>å½“å‰è°ƒåº¦ä¸Šä¸‹æ–‡</li>
<li>åˆ†é…çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æ–‡ä»¶æè¿°ç¬¦å’Œç½‘ç»œç«¯å£</li>
</ul>
<h4 id="è¿›ç¨‹çš„äº§ç”Ÿ"><a href="#è¿›ç¨‹çš„äº§ç”Ÿ" class="headerlink" title="è¿›ç¨‹çš„äº§ç”Ÿ"></a>è¿›ç¨‹çš„äº§ç”Ÿ</h4><p>ç°æœ‰çš„ï¼ˆçˆ¶ï¼‰è¿›ç¨‹å¤åˆ¶è‡ªå·±çš„åœ°å€ç©ºé—´ï¼ˆforkï¼‰æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ˆå­ï¼‰è¿›ç¨‹ç»“æ„ã€‚ æ¯ä¸ªæ–°è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªå”¯ä¸€çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ï¼Œæ»¡è¶³è·Ÿè¸ªå’Œå®‰å…¨æ€§ä¹‹éœ€ã€‚PIDä¸çˆ¶è¿›ç¨‹IDï¼ˆPPIDï¼‰æ˜¯æ–°è¿›ç¨‹ç¯å¢ƒçš„å…ƒç´ ã€‚ ä»»ä½•è¿›ç¨‹å¯åˆ›å»ºå­è¿›ç¨‹ã€‚æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹çš„åä»£ã€‚RHEL7ä¸Šï¼Œç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹æ˜¯systemdã€‚ </p>
<p><img src="https://s2.ax1x.com/2019/04/09/AoEPY9.png" alt></p>
<p>é€šè¿‡forkä¾‹ç¨‹ï¼Œå­è¿›ç¨‹ç»§æ‰¿å®‰å…¨æ€§èº«ä»½ã€è¿‡å»å’Œå½“å‰çš„æ–‡ä»¶æè¿°ç¬¦ã€ç«¯å£å’Œèµ„æºç‰¹æƒã€ç¯å¢ƒå˜é‡ï¼Œä»¥åŠç¨‹åºä»£ç ã€‚éšåï¼Œå­è¿›ç¨‹å¯èƒ½execå…¶è‡ªå·±çš„ç¨‹åºä»£ç ã€‚é€šå¸¸ï¼Œçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹è¿è¡ŒæœŸé—´å¤„äºç¡çœ çŠ¶æ€ï¼Œè®¾ç½®ä¸€ä¸ªåœ¨å­è¿›ç¨‹å®Œæˆæ—¶å‘å‡ºä¿¡å·çš„è¯·æ±‚ï¼ˆwaitï¼‰ã€‚åœ¨é€€å‡ºæ—¶ï¼Œå­è¿›ç¨‹å¯èƒ½å·²ç»å…³é—­æˆ–ä¸¢å¼ƒäº†å…¶èµ„æºå’Œç¯å¢ƒï¼Œå‰©ä½™çš„éƒ¨åˆ†è¢«ç§°ä½œåƒµåœã€‚çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶æ”¶åˆ°ä¿¡å·è€Œè¢«å”¤é†’ï¼Œæ¸…ç†å‰©ä½™ç»“æ„ï¼Œç„¶åç»§ç»­æ‰§è¡Œå…¶è‡ªå·±çš„ç¨‹åºä»£ç ã€‚ </p>
<h4 id="è¿›ç¨‹çš„åˆ†ç±»"><a href="#è¿›ç¨‹çš„åˆ†ç±»" class="headerlink" title="è¿›ç¨‹çš„åˆ†ç±»"></a>è¿›ç¨‹çš„åˆ†ç±»</h4><ul>
<li>å‰å°è¿›ç¨‹ï¼šä¸ç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ï¼Œé€šè¿‡ç»ˆç«¯å¯åŠ¨çš„è¿›ç¨‹ <ul>
<li>æ³¨æ„ï¼šä¹Ÿå¯æŠŠåœ¨å‰å°å¯åŠ¨çš„è¿›ç¨‹é€å¾€åå°ï¼Œä»¥å®ˆæŠ¤æ¨¡å¼è¿è¡Œ</li>
</ul>
</li>
</ul>
<ul>
<li>å®ˆæŠ¤è¿›ç¨‹ï¼šdaemonï¼Œä¸ç»ˆç«¯æ— å…³çš„è¿›ç¨‹ï¼ˆå¦‚å†…æ ¸ï¼‰ï¼Œåœ¨ç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ä¸­å¯åŠ¨çš„è¿›ç¨‹</li>
</ul>
<h2 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h2><p><img src="https://s2.ax1x.com/2019/04/09/AoE86P.png" alt></p>
<blockquote>
<p>Excuting                          //è¿è¡Œæ€<br>Ready                              //å°±ç»ªæ€ï¼Œä¹Ÿå¯ä»¥ç§°ä½œç¡çœ æ€<br>Uninterruptible sleep   //ä¸å¯ä¸­æ–­çš„ç¡çœ ã€‚ä¸å¯éšæ—¶å”¤é†’ï¼Œåªæœ‰å½“IOèµ„æºåŠ è½½æˆåŠŸåæ‰èƒ½å”¤é†’<br>Interruptible sleep      //å¯ä¸­æ–­çš„ç¡çœ ã€‚å¯éšæ—¶å”¤é†’<br>Zombie                        //åƒµå°¸è¿›ç¨‹ã€‚æ­£å¸¸è¿è¡Œç»“æŸäº†ï¼Œä½†æ˜¯ä¸é‡Šæ”¾å æ®çš„å†…å­˜<br>Stopped                       //åœæ­¢æ€ï¼Œæš‚åœäºå†…å­˜ä¸­ï¼Œä½†ä¸ä¼šè¢«è°ƒåº¦ï¼Œé™¤éæ‰‹åŠ¨å¯åŠ¨ä¹‹</p>
</blockquote>
<blockquote>
<p>è¿›ç¨‹ç¡çœ çš„åŸå› ï¼š å½“ä¸€ä¸ªæ‰§è¡Œä¸­çš„è¿›ç¨‹ï¼Œéœ€è¦åŠ è½½é¢å¤–çš„IOèµ„æºçš„æ—¶å€™ï¼Œç”±äºIOè®¾å¤‡çš„é€Ÿåº¦å¤ªæ…¢ï¼Œæ‰€ä»¥ä¼šè½¬å…¥ç¡çœ çŠ¶æ€ç­‰å¾…ï¼Œäº¤å‡ºCPUç»™å…¶ä»–è¿›ç¨‹ï¼Œä»¥å…æµªè´¹å‰©ä½™æ‰§è¡Œæ—¶é—´ </p>
</blockquote>
<p>åœ¨å¤šä»»åŠ¡å¤„ç†æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªCPUï¼ˆæˆ–CPUæ ¸å¿ƒï¼‰åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šå¤„ç†ä¸€ä¸ªè¿›ç¨‹ã€‚åœ¨è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå®ƒå¯¹CPUæ—¶é—´å’Œèµ„æºåˆ†é…çš„ç›´æ¥è¦æ±‚ä¼šæœ‰å˜åŒ–ã€‚è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒéšç€ç¯å¢ƒè¦æ±‚è€Œæ”¹å˜ã€‚ </p>
<h6 id="Linuxè¿›ç¨‹çŠ¶æ€"><a href="#Linuxè¿›ç¨‹çŠ¶æ€" class="headerlink" title="Linuxè¿›ç¨‹çŠ¶æ€"></a>Linuxè¿›ç¨‹çŠ¶æ€</h6><table>
<thead>
<tr>
<th>æ ‡å¿—</th>
<th>å†…æ ¸å®šä¹‰çš„çŠ¶æ€åç§°å’Œæè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>R</td>
<td>TASK_RUNNINGï¼šè¿›ç¨‹æ­£åœ¨CPUä¸Šæ‰§è¡Œï¼Œæˆ–è€…æ­£åœ¨ç­‰å¾…è¿è¡Œã€‚å¤„äºè¿è¡Œä¸­ï¼ˆæˆ–å¯è¿è¡Œï¼‰çŠ¶æ€æ—¶ï¼Œè¿›ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œç”¨æˆ·ä¾‹ç¨‹æˆ–å†…æ ¸ä¾‹ç¨‹ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Œæˆ–è€…å·²æ’é˜Ÿå¹¶å°±ç»ª</td>
</tr>
<tr>
<td>S</td>
<td>TASK_INTERRUPTIBLEï¼šè¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ä¸”æ­£åœ¨ç­‰å¾…æŸä¸€æ¡ä»¶ï¼šç¡¬ä»¶è¯·æ±‚ã€ç³»ç»Ÿèµ„æºè®¿é—®æˆ–ä¿¡å·ã€‚å½“äº‹ä»¶æˆ–ä¿¡å·æ»¡è¶³è¯¥æ¡ä»¶æ—¶ï¼Œè¯¥è¿›ç¨‹å°†è¿”å›åˆ°è¿è¡Œä¸­</td>
</tr>
<tr>
<td>D</td>
<td>TASK_UNINTERRUPTIBLEï¼šæ­¤è¿›ç¨‹ä¹Ÿåœ¨ç¡çœ ï¼Œä½†ä¸SçŠ¶æ€ä¸åŒï¼Œä¸ä¼šå“åº”ä¼ é€’çš„ä¿¡å·ã€‚ä»…åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œå…¶ä¸­è¿›ç¨‹ä¸­æ–­å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„è®¾å¤‡çŠ¶æ€</td>
</tr>
<tr>
<td>K</td>
<td>TASK_KILLABLEï¼šè¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œä¸ä¸å¯ä¸­æ–­çš„DçŠ¶æ€ç›¸åŒï¼Œä½†æœ‰æ‰€ä¿®æ”¹ï¼Œå…è®¸ç­‰å¾…ä¸­çš„ä»»åŠ¡é€šè¿‡å“åº”ä¿¡å·è€Œè¢«ä¸­æ–­ï¼ˆå½»åº•é€€å‡ºï¼‰ã€‚å®ç”¨ç¨‹åºé€šå¸¸å°†å¯ä¸­æ–­çš„è¿›ç¨‹æ˜¾ç¤ºä¸ºDçŠ¶æ€</td>
</tr>
<tr>
<td>T</td>
<td>TASK_STOPPEDï¼šè¿›ç¨‹å·²è¢«åœæ­¢ï¼ˆæš‚åœï¼‰ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç”¨æˆ·æˆ–å…¶ä»–è¿›ç¨‹å‘å‡ºçš„ä¿¡å·ã€‚è¿›ç¨‹å¯ä»¥é€šè¿‡å¦ä¸€ä¿¡å·è¿”å›åˆ°è¿è¡Œä¸­çŠ¶æ€ï¼Œç»§ç»­æ‰§è¡Œï¼ˆæ¢å¤ï¼‰</td>
</tr>
<tr>
<td>T</td>
<td>TASK_TRACEDï¼šæ­£åœ¨è¢«è°ƒè¯•çš„è¿›ç¨‹ä¹Ÿä¼šä¸´æ—¶åœæ­¢ï¼Œå¹¶ä¸”å…±äº«åŒä¸€ä¸ªTçŠ¶æ€æ ‡å¿—</td>
</tr>
<tr>
<td>Z</td>
<td>EXIT_ZOMBIEï¼šå­è¿›ç¨‹åœ¨é€€å‡ºæ—¶å‘çˆ¶è¿›ç¨‹å‘å‡ºä¿¡å·ã€‚é™¤è¿›ç¨‹èº«ä»½ï¼ˆPIDï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ„æºéƒ½å·²é‡Šæ”¾</td>
</tr>
<tr>
<td>X</td>
<td>EXIT_DEADï¼šå½“çˆ¶è¿›ç¨‹æ¸…ç†ï¼ˆè·å–ï¼‰å‰©ä½™çš„å­è¿›ç¨‹ç»“æ„æ—¶ï¼Œè¿›ç¨‹ç°åœ¨å·²å½»åº•é‡Šæ”¾ã€‚æ­¤çŠ¶æ€ä»ä¸ä¼šåœ¨è¿›ç¨‹åˆ—å‡ºå®ç”¨ç¨‹åºä¸­çœ‹åˆ°</td>
</tr>
<tr>
<td>&lt;</td>
<td>é«˜ä¼˜å…ˆçº§è¿›ç¨‹</td>
</tr>
<tr>
<td>N</td>
<td>ä½ä¼˜å…ˆçº§è¿›ç¨‹</td>
</tr>
<tr>
<td>+</td>
<td>å‰å°è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹</td>
</tr>
<tr>
<td>|</td>
<td>å¤šçº¿ç¨‹è¿›ç¨‹</td>
</tr>
<tr>
<td>s</td>
<td>ä¼šè¯è¿›ç¨‹é¦–è¿›ç¨‹</td>
</tr>
</tbody></table>
<h2 id="è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h2><h4 id="linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡"><a href="#linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡" class="headerlink" title="linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡"></a>linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡</h4><p>ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­æ—¢åŒ…å«æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤çš„ä½ç«¯å¤„ç†å™¨ï¼Œä¹ŸåŒ…å«é«˜æ€§èƒ½è¶…çº§è®¡ç®—æœºï¼Œè¿™äº›è¶…çº§è®¡ç®—æœºæ¯å°é…å¤‡æ•°ç™¾ä¸ªCPUï¼Œæ¯ä¸ªCPUä¸Šå…·æœ‰å¤šä¸ªæ ¸å¿ƒï¼Œå®ƒä»¬å¯ä»¥å¹¶è¡Œæ‰§è¡Œæ•°ä»¥ç™¾è®¡çš„æŒ‡ä»¤ã€‚ä½†æ˜¯æ‰€æœ‰è¿™äº›ç³»ç»Ÿå¾€å¾€å…·æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬éœ€è¦è¿è¡Œçš„è¿›ç¨‹æ•°é‡æ€»æ˜¯è¶…å‡ºå®é™…å…·æœ‰çš„æ ¸å¿ƒæ•°ã€‚</p>
<p>é€šè¿‡æ—¶é—´åˆ†ç‰‡æŠ€æœ¯ï¼ŒLinuxï¼ˆå’Œå…¶ä»–æ“ä½œç³»ç»Ÿï¼‰å®é™…èƒ½å¤Ÿè¿è¡Œçš„è¿›ç¨‹æ•°ï¼ˆå’Œçº¿ç¨‹æ•°ï¼‰å¯ä»¥è¶…å‡ºå¯ç”¨çš„å®é™…å¤„ç†å•å…ƒæ•°ã€‚æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦ç¨‹åºå°†åœ¨å•ä¸ªæ ¸å¿ƒä¸Šçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œå¿«é€Ÿåˆ‡æ¢ï¼Œä»è€Œç»™ç”¨æˆ·ä¸€ç§æœ‰å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œçš„å°è±¡ã€‚</p>
<p>æ‰§è¡Œæ­¤åˆ‡æ¢çš„Linuxå†…æ ¸éƒ¨åˆ†ç§°ä¸ºè¿›ç¨‹è°ƒåº¦ç¨‹åºã€‚</p>
<h4 id="è¿›ç¨‹ä¼˜å…ˆçº§-1"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§-1" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h4><ul>
<li>è¿›ç¨‹ä¼˜å…ˆçº§èŒƒå›´ï¼š0-139ï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ <ul>
<li>0-99ï¼šå®æ—¶ä¼˜å…ˆçº§ï¼Œå†…æ ¸è°ƒæ•´</li>
<li>100-139ï¼šé™æ€ä¼˜å…ˆçº§ï¼Œç”¨æˆ·å¯æ§åˆ¶</li>
</ul>
</li>
<li>è¿›ç¨‹ä¼˜å…ˆçº§é«˜çš„ç‰¹ç‚¹ï¼š <ul>
<li>è·å¾—æ›´å¤šçš„CPUè¿è¡Œæ—¶é—´</li>
<li>æ›´ä¼˜å…ˆè·å¾—CPUè¿è¡Œçš„æœºä¼š</li>
</ul>
</li>
</ul>
<p>è¦ä¿®æ”¹è¿›ç¨‹çš„ä¼˜å…ˆçº§å¯ä»¥é€šè¿‡è°ƒæ•´è¿›ç¨‹çš„niceå€¼æ¥å®ç°ï¼Œniceå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼š niceå€¼çš„èŒƒå›´æ˜¯ï¼ˆ-20ï¼Œ19ï¼‰ï¼Œ-20å¯¹åº”100ï¼Œ19å¯¹åº”139 </p>
<h4 id="ç›¸å¯¹ä¼˜å…ˆçº§"><a href="#ç›¸å¯¹ä¼˜å…ˆçº§" class="headerlink" title="ç›¸å¯¹ä¼˜å…ˆçº§"></a>ç›¸å¯¹ä¼˜å…ˆçº§</h4><p>ç”±äºä¸æ˜¯æ¯ç§è¿›ç¨‹éƒ½ä¸å…¶ä»–è¿›ç¨‹åŒæ ·é‡è¦ï¼Œå¯å‘ŠçŸ¥è°ƒåº¦ç¨‹åºä¸ºä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ã€‚å¸¸è§„ç³»ç»Ÿä¸Šè¿è¡Œçš„å¤§å¤šæ•°è¿›ç¨‹æ‰€ä½¿ç”¨çš„è°ƒåº¦ç­–ç•¥ç§°ä¸º<code>SCHED_OTHER</code>(ä¹Ÿç§°ä¸º<code>SCHED_NORMAL</code>)ï¼Œä½†è¿˜æœ‰ä¸€äº›å…¶ä»–ç­–ç•¥å¯ç”¨äºä¸åŒçš„ç›®çš„ã€‚</p>
<p>ç”±äºå¹¶éæ‰€æœ‰è¿›ç¨‹éƒ½ä»¥åŒæ ·çš„æ–¹å¼åˆ›å»ºï¼Œå¯ä¸ºé‡‡ç”¨<code>SCHED_NORMAL</code>ç­–ç•¥è¿è¡Œçš„è¿›ç¨‹æŒ‡å®šç›¸å¯¹ä¼˜å…ˆçº§ã€‚æ­¤ä¼˜å…ˆçº§ç§°ä¸ºè¿›ç¨‹çš„<code>nice</code>å€¼ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰40ç§ä¸åŒçº§åˆ«çš„<code>nice</code>å€¼ã€‚</p>
<p>è¿™äº›<code>nice</code>çº§åˆ«çš„èŒƒå›´æ˜¯ä»-20åˆ°19ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹å°†ç»§æ‰¿å…¶çˆ¶è¿›ç¨‹çš„<code>nice</code>çº§åˆ«ï¼Œé€šå¸¸ä¸º0</p>
<blockquote>
<p><code>nice</code>çº§åˆ«è¶Šé«˜ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§è¶Šä½ï¼ˆè¯¥è¿›ç¨‹å®¹æ˜“å°†å…¶CPUä½¿ç”¨é‡è®©ç»™å…¶ä»–è¿›ç¨‹ï¼‰<br><code>nice</code>çº§åˆ«è¶Šä½ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ï¼ˆè¯¥è¿›ç¨‹æ›´åŠ ä¸å€¾å‘äºè®©å‡ºCPUï¼‰<br>å¦‚æœä¸å­˜åœ¨èµ„æºäº‰ç”¨ï¼ˆä¾‹å¦‚å½“æ´»åŠ¨è¿›ç¨‹æ•°å°‘äºå¯ç”¨CPUæ ¸å¿ƒæ•°æ—¶ï¼‰ï¼Œå³ä½¿<code>nice</code>çº§åˆ«é«˜çš„è¿›ç¨‹ä¹Ÿå°†ä»ä½¿ç”¨å®ƒä»¬å¯ä½¿ç”¨çš„æ‰€æœ‰å¯ç”¨CPUèµ„æºã€‚ä½†å½“è¯·æ±‚CPUæ—¶é—´çš„è¿›ç¨‹æ•°è¶…è¿‡å¯ç”¨æ ¸å¿ƒæ•°æ—¶ï¼Œ<code>nice</code>çº§åˆ«è¾ƒé«˜çš„è¿›ç¨‹å°†æ¯”<code>nice</code>çº§åˆ«è¾ƒä½çš„è¿›ç¨‹æ”¶åˆ°æ›´å°‘çš„CPUæ—¶é—´</p>
</blockquote>
<h4 id="niceçº§åˆ«ä¸æƒé™"><a href="#niceçº§åˆ«ä¸æƒé™" class="headerlink" title="niceçº§åˆ«ä¸æƒé™"></a>niceçº§åˆ«ä¸æƒé™</h4><p>ä¸ºå¾ˆå CPUèµ„æºçš„è¿›ç¨‹è®¾ç½®è¾ƒä½çš„<code>nice</code>çº§åˆ«å¯èƒ½ä¼šå¯¹åŒä¸€ç³»ç»Ÿä¸Šè¿è¡Œçš„å…¶ä»–è¿›ç¨‹çš„æ€§èƒ½é€ æˆè´Ÿé¢å½±å“ï¼Œæ‰€ä»¥ä»…å…è®¸rootç”¨æˆ·è®¾ç½®è´Ÿ<code>nice</code>çº§åˆ«ä»¥åŠé™ä½ç°æœ‰è¿›ç¨‹çš„<code>nice</code>çº§åˆ«ã€‚</p>
<p>æ™®é€šéç‰¹æƒç”¨æˆ·ä»…å…è®¸è®¾ç½®æ­£çš„<code>nice</code>çº§åˆ«ã€‚åªèƒ½å¯¹ç°æœ‰è¿›ç¨‹æå‡<code>nice</code>çº§åˆ«ï¼Œè€Œä¸èƒ½é™ä½<code>nice</code>çº§åˆ«ã€‚</p>
<h4 id="è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´"></a>è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´</h4><p>è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´ï¼šè°ƒæ•´niceå€¼</p>
<blockquote>
<p>//è°ƒæ•´å·²ç»å¯åŠ¨çš„è¿›ç¨‹çš„niceå€¼ï¼š<br>    renice NI PIDï¼ˆä¾‹ï¼šrenice 3 3704ï¼‰<br>//åœ¨å¯åŠ¨æ—¶æŒ‡å®šniceå€¼ï¼šï¼ˆ-20ï¼Œ19ï¼‰<br>    nice -n NI COMMAND</p>
</blockquote>
<h2 id="è¿›ç¨‹ç®¡ç†å‘½ä»¤"><a href="#è¿›ç¨‹ç®¡ç†å‘½ä»¤" class="headerlink" title="è¿›ç¨‹ç®¡ç†å‘½ä»¤"></a>è¿›ç¨‹ç®¡ç†å‘½ä»¤</h2><p>Linuxç³»ç»Ÿå„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯å‡ä¿å­˜åœ¨/proc/PIDç›®å½•ä¸‹çš„å„æ–‡ä»¶ä¸­ </p>
<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><p>pså‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹çŠ¶æ€</p>
<blockquote>
<p>-a  æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ï¼‰ </p>
<p>-u  ç”¨æˆ·ä»¥åŠå…¶ä»–è¯¦ç»†ä¿¡æ¯ </p>
<p>-x  æ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ </p>
</blockquote>
<p>Linuxç³»ç»Ÿä¸­æ—¶åˆ»è¿è¡Œç€è®¸å¤šè¿›ç¨‹ï¼Œå¦‚æœèƒ½å¤Ÿåˆç†åœ°ç®¡ç†å®ƒä»¬ï¼Œåˆ™å¯ä»¥ä¼˜åŒ–ç³»ç»Ÿçš„æ€§èƒ½ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæœ‰5ç§å¸¸è§çš„è¿›ç¨‹çŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºè¿è¡Œã€ä¸­æ–­ã€ä¸å¯ä¸­æ–­ã€åƒµæ­»ä¸åœæ­¢ï¼Œå…¶å„è‡ªå«ä¹‰å¦‚ä¸‹æ‰€ç¤ºã€‚ </p>
<blockquote>
<p><strong>Rï¼ˆè¿è¡Œï¼‰ï¼š</strong>è¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</p>
<p><strong>Sï¼ˆä¸­æ–­ï¼‰ï¼š</strong>è¿›ç¨‹å¤„äºä¼‘çœ ä¸­ï¼Œå½“æŸä¸ªæ¡ä»¶å½¢æˆåæˆ–è€…æ¥æ”¶åˆ°ä¿¡å·æ—¶ï¼Œåˆ™è„±ç¦»è¯¥   çŠ¶æ€ã€‚</p>
<p><strong>Dï¼ˆä¸å¯ä¸­æ–­ï¼‰ï¼š</strong>è¿›ç¨‹ä¸å“åº”ç³»ç»Ÿå¼‚æ­¥ä¿¡å·ï¼Œå³ä¾¿ç”¨killå‘½ä»¤ä¹Ÿä¸èƒ½å°†å…¶ä¸­æ–­ã€‚</p>
<p><strong>Zï¼ˆåƒµæ­»ï¼‰ï¼š</strong>è¿›ç¨‹å·²ç»ç»ˆæ­¢ï¼Œä½†è¿›ç¨‹æè¿°ç¬¦ä¾ç„¶å­˜åœ¨, ç›´åˆ°çˆ¶è¿›ç¨‹è°ƒç”¨wait4()ç³»ç»Ÿå‡½æ•°åå°†è¿›ç¨‹é‡Šæ”¾ã€‚</p>
<p><strong>Tï¼ˆåœæ­¢ï¼‰ï¼š</strong>è¿›ç¨‹æ”¶åˆ°åœæ­¢ä¿¡å·ååœæ­¢è¿è¡Œã€‚</p>
</blockquote>
<p>å½“æ‰§è¡Œps auxå‘½ä»¤åé€šå¸¸ä¼šçœ‹åˆ°å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ps aux</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.0  0.3  50776  7212 ?        Ss   4æœˆ08   0:01 /usr/lib/syst</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [ksoftirqd/0]</span><br><span class="line">root          5  0.0  0.0      0     0 ?        S&lt;   4æœˆ08   0:00 [kworker/0:0H</span><br><span class="line">root          7  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [migration/0]</span><br><span class="line">root          8  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [rcu_bh]</span><br><span class="line">...............................ä»¥ä¸‹çœç•¥...............................</span><br></pre></td></tr></table></figure>

<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><p>pstreeç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸Šçš„è¿›ç¨‹æ ‘ </p>
<blockquote>
<p> å¦‚æœæ²¡æœ‰ ä½¿ç”¨yumå®‰è£…</p>
<p>yum install -y psmisc</p>
</blockquote>
<h4 id="pgrep"><a href="#pgrep" class="headerlink" title="pgrep"></a>pgrep</h4><p>ä»¥grepé£æ ¼æŒ‡å®šåªæ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Œåœ¨å½“å‰ç³»ç»Ÿä¸­æ‰¾ç¬¦åˆæŸäº›ç‰¹æ€§çš„è¿›ç¨‹ã€‚åªæ˜¾ç¤ºè¿›ç¨‹å· </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># pgrep vim</span></span><br><span class="line">3469</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps aux | grep vim</span></span><br><span class="line">root       3469  0.0  0.2 151920  5036 pts/0    S+   01:24   0:00 vim 1</span><br><span class="line">root       3502  0.0  0.0 112656   988 pts/2    R+   01:32   0:00 grep --color=auto vim</span><br></pre></td></tr></table></figure>

<h4 id="pidof"><a href="#pidof" class="headerlink" title="pidof"></a>pidof</h4><p>pidofå‘½ä»¤ç”¨äºæŸ¥è¯¢æŸä¸ªæŒ‡å®šæœåŠ¡è¿›ç¨‹çš„PIDå€¼</p>
<p>æ¯ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·ç å€¼ï¼ˆPIDï¼‰æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡PIDæ¥åŒºåˆ†ä¸åŒçš„è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥è¯¢æœ¬æœºä¸Šæ­£åœ¨è¿è¡Œçš„vimçš„PIDï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸Šè¾“å…¥ï¼š</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># vim a</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸Šè¾“å…¥ï¼š</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># pidof vim</span></span><br><span class="line">3358</span><br></pre></td></tr></table></figure>

<h4 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h4><p>è™šæ‹Ÿå†…å­˜çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ </p>
<blockquote>
<p>vmstat 2        //è¡¨ç¤ºæ¯2ç§’åˆ·æ–°ä¸€æ¬¡<br>vmstat 2   5      //è¡¨ç¤ºæ¯2ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œåˆ·æ–°5æ¬¡åé€€å‡º</p>
<p> -s          //æ˜¾ç¤ºå†…å­˜çš„ç»Ÿè®¡æ•°æ®  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vmstat</span></span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 2  0      0 1489572   1524 152768    0    0     8     2   12   21  0  0 100  0  0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>procsï¼š<br>    rï¼ˆrunningï¼‰  //è¡¨ç¤ºç­‰å¾…è¿è¡Œçš„é˜Ÿåˆ—é•¿åº¦ï¼Œä¹Ÿå³ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹çš„ä¸ªæ•°<br>    bï¼ˆblockï¼‰    //è¡¨ç¤ºé˜»å¡é˜Ÿåˆ—é•¿åº¦ï¼Œä¹Ÿå³å¤„äºä¸å¯ä¸­æ–­ç¡çœ æ€çš„è¿›ç¨‹ä¸ªæ•°<br>memoryï¼š<br>    swpd        //äº¤æ¢å†…å­˜çš„ä½¿ç”¨æ€»é‡<br>    free        //ç©ºé—²ç‰©ç†å†…å­˜æ€»é‡<br>    buffer      //ç”¨äºbufferçš„å†…å­˜æ€»é‡<br>    cache       //ç”¨äºcacheçš„å†…å­˜æ€»é‡<br>swapï¼š<br>    siï¼ˆswap inï¼‰     //è¡¨ç¤ºä»ç‰©ç†å†…å­˜æœ‰å¤šå°‘é¡µé¢æ¢è¿›swapï¼Œä¹Ÿå³æ•°æ®è¿›å…¥swapçš„æ•°æ®é€Ÿç‡ï¼ˆkb/sï¼‰<br>    soï¼ˆswap outï¼‰    //è¡¨ç¤ºä»swapæœ‰å¤šå°‘é¡µé¢æ¢è¿›ç‰©ç†å†…å­˜ï¼Œä¹Ÿå³æ•°æ®ç¦»å¼€swapçš„æ•°æ®é€Ÿç‡ï¼ˆkb/sï¼‰<br>ioï¼š<br>    biï¼ˆblock inï¼‰    //è¡¨ç¤ºç£ç›˜å—æœ‰å¤šå°‘ä¸ªè¢«è°ƒå…¥å†…å­˜ä¸­ï¼Œä¹Ÿå³ä»å—è®¾å¤‡è¯»å…¥æ•°æ®åˆ°ç³»ç»Ÿçš„é€Ÿç‡ï¼ˆkb/sï¼‰<br>    boï¼ˆblock outï¼‰   //è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªç£ç›˜å—ä»å†…å­˜ä¸­è¢«åŒæ­¥åˆ°ç¡¬ç›˜ä¸Šå»äº†ï¼Œä¹Ÿå³ä¿å­˜æ•°æ®è‡³å—è®¾å¤‡çš„é€Ÿç‡ï¼ˆkb/sï¼‰<br>systemï¼š<br>    inï¼ˆ interruptsï¼‰     //è¡¨ç¤ºä¸­æ–­çš„ä¸ªæ•°ï¼Œä¹Ÿå³ä¸­æ–­é€Ÿç‡ï¼ˆkb/sï¼‰<br>    csï¼ˆcontext switchï¼‰  //è¡¨ç¤ºä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¬¡æ•°ï¼Œä¹Ÿå³è¿›ç¨‹åˆ‡æ¢é€Ÿç‡ï¼ˆkb/sï¼‰<br>CPUï¼š<br>    us      //è¡¨ç¤ºç”¨æˆ·ç©ºé—´<br>    sy      //è¡¨ç¤ºå†…æ ¸ç©ºé—´<br>    id      //è¡¨ç¤ºç©ºé—²ç™¾åˆ†æ¯”<br>    wa      //è¡¨ç¤ºç­‰å¾…IOå®Œæˆæ‰€å æ®çš„æ—¶é—´ç™¾åˆ†æ¯”<br>    st      //è¡¨ç¤ºstealï¼Œè¢«è™šæ‹ŸåŒ–æŠ€æœ¯å·èµ°çš„æ—¶é—´ï¼ˆæ¯”å¦‚è¿è¡Œè™šæ‹Ÿæœºï¼‰</p>
</blockquote>
<h2 id="æ§åˆ¶ä½œä¸š"><a href="#æ§åˆ¶ä½œä¸š" class="headerlink" title="æ§åˆ¶ä½œä¸š"></a>æ§åˆ¶ä½œä¸š</h2><h4 id="ä½œä¸šä¸ä¼šè¯"><a href="#ä½œä¸šä¸ä¼šè¯" class="headerlink" title="ä½œä¸šä¸ä¼šè¯"></a>ä½œä¸šä¸ä¼šè¯</h4><p>ä½œä¸šæ§åˆ¶æ˜¯<code>shell</code>çš„ä¸€ç§åŠŸèƒ½ï¼Œå®ƒå…è®¸å•ä¸ªshellå®ä¾‹è¿è¡Œå’Œç®¡ç†å¤šä¸ªå‘½ä»¤ã€‚</p>
<p>ä½œä¸šä¸åœ¨<code>shell</code>æç¤ºç¬¦ä¸­è¾“å…¥çš„æ¯ä¸ªç®¡é“ç›¸å…³è”ã€‚è¯¥ç®¡é“ä¸­çš„æ‰€æœ‰è¿›ç¨‹å‡æ˜¯ä½œä¸šçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ç»„çš„æˆå‘˜ã€‚ï¼ˆå¦‚æœåœ¨<code>shell</code>æç¤ºç¬¦ä¸­ä»…è¾“å…¥äº†ä¸€æ¡å‘½ä»¤ï¼Œåˆ™è¿™æ¡å‘½ä»¤å¯è§†ä¸ºå‘½ä»¤çš„æœ€å°ç®¡é“ã€‚è¯¥å‘½ä»¤å°†æ˜¯è¯¥ä½œä¸šçš„å”¯ä¸€æˆå‘˜ï¼‰</p>
<p>ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªä½œä¸šä»ç‰¹å®šç»ˆç«¯çª—å£è¯»å–è¾“å…¥å’Œé”®ç›˜ç”Ÿæˆçš„ä¿¡å·ã€‚å±äºè¯¥ä½œä¸šçš„è¿›ç¨‹æ˜¯è¯¥æ§åˆ¶ç»ˆç«¯çš„å‰å°è¿›ç¨‹ã€‚</p>
<p>è¯¥æ§åˆ¶ç»ˆç«¯çš„åå°è¿›ç¨‹æ˜¯ä¸è¯¥ç»ˆç«¯ç›¸å…³è”çš„ä»»ä½•å…¶ä»–ä½œä¸šçš„æˆå‘˜ã€‚ç»ˆç«¯çš„åå°è¿›ç¨‹æ— æ³•ä»ç»ˆç«¯è¯»å–è¾“å…¥æˆ–æ¥æ”¶é”®ç›˜ç”Ÿæˆçš„ä¸­æ–­ï¼Œä½†å¯ä»¥å†™å…¥ç»ˆç«¯ã€‚åå°ä¸­çš„ä½œä¸šå¯èƒ½å·²åœæ­¢ï¼ˆæš‚åœï¼‰ï¼Œä¹Ÿå¯èƒ½æ­£åœ¨è¿è¡Œã€‚å¦‚æœæŸä¸ªæ­£åœ¨è¿è¡Œçš„åå°ä½œä¸šå°è¯•ä»ç»ˆç«¯è¯»å–å†…å®¹ï¼Œåˆ™è¯¥ä½œä¸šå°†è‡ªåŠ¨æš‚åœã€‚</p>
<p>æ¯ä¸ªç»ˆç«¯æ˜¯å…¶è‡ªèº«çš„ä¼šè¯ï¼Œå¹¶ä¸”å¯ä»¥å…·æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹å’Œå¤šä¸ªç‹¬ç«‹çš„åå°è¿›ç¨‹ã€‚ä¸€ä¸ªä½œä¸šåªèƒ½å±äºä¸€ä¸ªä¼šè¯ï¼Œä¹Ÿå°±æ˜¯å±äºå…¶æ§åˆ¶ç»ˆç«¯çš„ä¼šè¯ã€‚</p>
<h4 id="ä½œä¸šåˆ†ç±»"><a href="#ä½œä¸šåˆ†ç±»" class="headerlink" title="ä½œä¸šåˆ†ç±»"></a>ä½œä¸šåˆ†ç±»</h4><p>Linuxä½œä¸šåˆ†ä¸ºå‰å°ä½œä¸šä¸åå°ä½œä¸šä¸¤ç§ã€‚å…¶å„è‡ªçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‰å°ä½œä¸šï¼šé€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä¸”å¯åŠ¨åä¸€ç›´å æ®äº†å‘½ä»¤æç¤ºç¬¦</li>
<li>åå°ä½œä¸šï¼šå¯ä»¥é€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä½†å¯åŠ¨ä¹‹åï¼Œé‡Šæ”¾å‘½ä»¤æç¤ºç¬¦ï¼Œåç»­çš„æ“ä½œåœ¨åå°å®Œæˆ<ul>
<li>æ­¤ç±»ä½œä¸šè™½ç„¶è¢«é€å¾€åå°è¿è¡Œï¼Œä½†å…¶ä¾ç„¶ä¸ç»ˆç«¯ç›¸å…³ã€‚å¦‚æœå¸Œæœ›é€å¾€åå°åï¼Œå‰¥ç¦»ä¸ç»ˆç«¯çš„å…³ç³»éœ€è¦æ‰§è¡Œï¼ˆnohup COMMAND &amp;ï¼‰</li>
</ul>
</li>
</ul>
<h4 id="åœ¨åå°è¿è¡Œä½œä¸š"><a href="#åœ¨åå°è¿è¡Œä½œä¸š" class="headerlink" title="åœ¨åå°è¿è¡Œä½œä¸š"></a>åœ¨åå°è¿è¡Œä½œä¸š</h4><p>åœ¨å‘½ä»¤åè·Ÿä¸Š&amp;ç¬¦å·å¯ä»¥ç”Ÿæˆä¸€ä¸ªåå°ä½œä¸š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># sleep 1000 &amp;</span></span><br><span class="line">[1] 3538</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># sleep 1000 &amp;</span></span><br><span class="line">[2] 3540</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3475 pts/2    00:00:00 bash</span><br><span class="line">  3538 pts/2    00:00:00 sleep</span><br><span class="line">  3540 pts/2    00:00:00 sleep</span><br><span class="line">  3541 pts/2    00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>jobså‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„åå°ä½œä¸š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<p>fgå‘½ä»¤ç”¨äºå°†åå°ä½œä¸šè°ƒè‡³å‰å°è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fg</span></span><br><span class="line">sleep 1000</span><br></pre></td></tr></table></figure>

<blockquote>
<p> å½“åªæœ‰ä¸€ä¸ªåå°ä½œä¸šæ—¶ï¼Œç›´æ¥ä½¿ç”¨fgå‘½ä»¤ï¼Œä¸è·Ÿä»»ä½•å‚æ•°å³å¯å°†åå°ä½œä¸šè°ƒè‡³å‰å°è¿è¡Œï¼Œä½†æ˜¯å½“æœ‰å¤šä¸ªä½œä¸šæ—¶åˆ™å¿…é¡»è·Ÿä¸Š%+ä½œä¸šå·ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å‘½ä»¤æ‰§è¡Œç»“æœä¸­ä»¥[]æ‹¬èµ·æ¥çš„æ•°å­—ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä½¿ç”¨ctrl+zå¯å°†å‰å°è¿›ç¨‹å‘é€åˆ°åå°ï¼Œæ­¤æ—¶ä½œä¸šå°†å¤„äºåœæ­¢çŠ¶æ€</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">sleep 1000</span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               sleep 1000</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨bgå‘½ä»¤+ä½œä¸šå·å¯ä½¿åå°å·²åœæ­¢çš„ä½œä¸šé‡æ–°è¿è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># bg %1</span></span><br><span class="line">[1]+ sleep 1000 &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>killåŠ ä¸Šä½œä¸šå·å¯ä»¥æ‰‹åŠ¨æ€æ­»æŒ‡å®šä½œä¸š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># kill %1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  å·²ç»ˆæ­¢               sleep 1000</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> jobså‘½ä»¤çš„ç»“æœä¸­</p>
<ul>
<li>//å‘½ä»¤å°†é»˜è®¤æ“ä½œçš„ä½œä¸š<ul>
<li>//å‘½ä»¤å°†ç¬¬äºŒä¸ªé»˜è®¤æ“ä½œçš„ä½œä¸š</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="è¿›ç¨‹é—´é€šä¿¡"><a href="#è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡"></a>è¿›ç¨‹é—´é€šä¿¡</h2><p>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼šInter Process Communicationï¼‰</p>
<p>è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼š</p>
<ul>
<li><p>åŒä¸€ä¸»æœº</p>
<ul>
<li>å…±äº«å†…å­˜</li>
<li>ä¿¡å·ï¼šSignal</li>
</ul>
</li>
<li><p>ä¸åŒä¸»æœº</p>
<ul>
<li><p>rpcï¼šremote procecure call</p>
<ul>
<li><p>åŸºäºsocketå®ç°è¿›ç¨‹é—´é€šä¿¡</p>
<blockquote>
<p>socket å¥—æ¥å­—  ipåŠ æ¥å£   ss -natl</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹"><a href="#ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹" class="headerlink" title="ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹"></a>ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹</h2><p>ä¿¡å·æ˜¯ä¼ é€’è‡³è¿›ç¨‹çš„è½¯ä»¶ä¸­æ–­ã€‚ä¿¡å·å‘æ‰§è¡Œä¸­çš„ç¨‹åºæŠ¥å‘Šäº‹ä»¶ã€‚ç”Ÿæˆä¿¡å·çš„äº‹ä»¶å¯ä»¥æ˜¯é”™è¯¯æˆ–å¤–éƒ¨äº‹ä»¶ï¼ˆå¦‚I/Oè¯·æ±‚æˆ–è®¡æ—¶å™¨è¿‡æœŸï¼‰ï¼Œæˆ–è€…æ¥è‡ªäºæ˜ç¡®è¯·æ±‚ï¼ˆå¦‚ä½¿ç”¨ä¿¡å·å‘é€å‘½ä»¤ï¼‰</p>
<p>ä¸‹è¡¨åˆ—å‡ºäº†ç³»ç»Ÿç®¡ç†å‘˜ç”¨äºæ—¥å¸¸è¿›ç¨‹ç®¡ç†çš„åŸºæœ¬ä¿¡å·ã€‚è¯·é€šè¿‡çŸ­åç§°ï¼ˆHUPï¼‰æˆ–æ­£ç¡®åç§°ï¼ˆSIGHUPï¼‰æŒ‡ä»£ä¿¡å·ã€‚</p>
<ul>
<li>æŒ‡å®šä¸€ä¸ªä¿¡å·çš„æ–¹æ³•ï¼š <ul>
<li>ä¿¡å·å·ç ï¼ˆæ•°å­—æ ‡è¯†ï¼‰ï¼š<code>kill -1</code></li>
<li>ä¿¡å·å®Œæ•´åç§°ï¼š<code>kill -SIGKILL</code></li>
<li>ä¿¡å·ç®€å†™åç§°ï¼š<code>kill -TERMæˆ–kill -KILLæˆ–kill -INTæˆ–kill -HUP</code></li>
</ul>
</li>
</ul>
<p>åŸºæœ¬è¿›ç¨‹ç®¡ç†ä¿¡å· </p>
<table>
<thead>
<tr>
<th>ä¿¡å·ç¼–å· ID</th>
<th>çŸ­åç§°</th>
<th>å®šä¹‰</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>HUP</td>
<td>æŒ‚èµ·</td>
<td>è®©ä¸€ä¸ªè¿›ç¨‹ä¸ç”¨é‡å¯å°±å¯ä»¥é‡è¯»é…ç½®æ–‡ä»¶ï¼Œå¹¶è®©æ–°çš„é…ç½®ä¿¡æ¯ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>2</td>
<td>INT</td>
<td>é”®ç›˜ä¸­æ–­</td>
<td>ä¸­æ–­ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚ctrl+cå°±æ˜¯ç”¨çš„SIGINTä¿¡å·</td>
</tr>
<tr>
<td>9</td>
<td>KILL</td>
<td>ä¸­æ–­ï¼Œæ— æ³•æ‹¦æˆª</td>
<td>å¯¼è‡´ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚æ— æ³•è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†</td>
</tr>
<tr>
<td>15 é»˜è®¤å€¼</td>
<td>TERM</td>
<td>ç»ˆæ­¢</td>
<td>å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚å’ŒSIGKILLä¸åŒï¼Œå¯ä»¥è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†ã€‚è¦æ±‚ç¨‹åºç»ˆæ­¢çš„å‹å¥½æ–¹å¼ï¼Œå…è®¸è‡ªæˆ‘æ¸…ç†</td>
</tr>
</tbody></table>
<p>ç”¨æˆ·å¯ä»¥ä¸­æ–­è‡ªå·±çš„è¿›ç¨‹ï¼Œä½†åªæœ‰rootæ‰èƒ½ç»ˆæ­¢ç”±å…¶ä»–äººæ‹¥æœ‰çš„è¿›ç¨‹ã€‚</p>
<h4 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h4><p>killå‘½ä»¤æ ¹æ®IDå‘è¿›ç¨‹å‘é€ä¿¡å·ã€‚è™½å…¶åç§°ä¸ºkillï¼Œä½†è¯¥å‘½ä»¤å¯ç”¨äºå‘é€ä»»ä½•ä¿¡å·ï¼Œè€Œä¸ä»…ä»…æ˜¯ç»ˆæ­¢ç¨‹åºçš„ä¿¡å·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># kill -l</span></span><br><span class="line"> 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP</span><br><span class="line"> 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1</span><br><span class="line">11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM</span><br><span class="line">16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span><br><span class="line">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR</span><br><span class="line">31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1  64) SIGRTMAX</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># kill 3571</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3475 pts/2    00:00:00 bash</span><br><span class="line">  3610 pts/2    00:00:00 ps</span><br><span class="line">[2]+  å·²ç»ˆæ­¢               sleep 1000</span><br></pre></td></tr></table></figure>

<h2 id="ç›‘æ§è¿›ç¨‹æ´»åŠ¨"><a href="#ç›‘æ§è¿›ç¨‹æ´»åŠ¨" class="headerlink" title="ç›‘æ§è¿›ç¨‹æ´»åŠ¨"></a>ç›‘æ§è¿›ç¨‹æ´»åŠ¨</h2><h4 id="IOè´Ÿè½½"><a href="#IOè´Ÿè½½" class="headerlink" title="IOè´Ÿè½½"></a>IOè´Ÿè½½</h4><p>è´Ÿè½½å¹³å‡å€¼ä»£è¡¨ä¸€æ®µæ—¶é—´å†…æ„ŸçŸ¥çš„ç³»ç»Ÿè´Ÿè½½ã€‚Linuxé€šè¿‡é¢„æœŸæœåŠ¡ç­‰å¾…æ—¶é—´çš„è¡¨ç¤ºæ¥å®æ–½å¹³å‡è´Ÿè½½è®¡ç®—ã€‚</p>
<p>Linuxä¸ä»…è®¡ç®—è¿›ç¨‹æ•°ï¼Œä¹Ÿä½œä¸ºç‹¬ç«‹çš„ä»»åŠ¡è®¡ç®—çº¿ç¨‹æ•°ã€‚è¿è¡Œä¸­çº¿ç¨‹å’Œç­‰å¾…I/Oèµ„æºçš„çº¿ç¨‹çš„CPUè¯·æ±‚é˜Ÿåˆ—å¯¹åº”äºRå’ŒDè¿›ç¨‹çŠ¶æ€ã€‚ç­‰å¾…I/OåŒ…æ‹¬å¤„äºç¡çœ è€Œç­‰å¾…é¢„æœŸç£ç›˜å’Œç½‘ç»œå“åº”çš„ä»»åŠ¡ã€‚</p>
<p>è´Ÿè½½æ•°å±äºå…¨å±€è®¡æ•°å™¨è®¡ç®—ï¼Œæ˜¯æ‰€æœ‰CPUçš„æ€»å’Œæ•°ã€‚ç”±äºä»ç¡çœ è¿”å›çš„ä»»åŠ¡å¯èƒ½ä¼šé‡æ–°è°ƒåº¦åˆ°ä¸åŒçš„CPUï¼Œéš¾ä»¥ç²¾ç¡®çš„æ¯CPUè®¡æ•°ï¼Œä½†ç´¯è®¡æ•°çš„å‡†ç¡®åº¦å¯ä»¥ä¿éšœã€‚æ˜¾ç¤ºçš„å¹³å‡è´Ÿè½½ä»£è¡¨æ‰€æœ‰çš„CPUã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># grep 'model name' /proc/cpuinfo</span></span><br><span class="line">model name      : Intel(R) Core(TM) i7-7500U CPU @ 2.70GHz</span><br></pre></td></tr></table></figure>

<p>ä¸€äº›UNIXç³»ç»Ÿä»…è€ƒè™‘CPUä½¿ç”¨ç‡æˆ–è¿è¡Œé˜Ÿåˆ—é•¿åº¦æ¥æŒ‡ç¤ºç³»ç»Ÿè´Ÿè½½ã€‚ç”±äºå…·æœ‰ç©ºé—²CPUçš„ç³»ç»Ÿå¯èƒ½ä¼šå› ä¸ºç£ç›˜æˆ–ç½‘ç»œèµ„æºå¿™è€Œé‡åˆ°å¾ˆé•¿æ—¶é—´çš„ç­‰å¾…ï¼Œå› æ­¤Linuxè´Ÿè½½å¹³å‡å€¼ä¸­åŒ…å«äº†å¯¹I/Oçš„è€ƒé‡ã€‚é‡åˆ°è´Ÿè½½å¹³å‡å€¼å¾ˆé«˜ä½†CPUæ´»åŠ¨å¾ˆä½æ—¶ï¼Œè¯·æ£€æŸ¥ç£ç›˜å’Œç½‘ç»œæ´»åŠ¨ã€‚</p>
<p>Linuxä¸­å¯ä»¥ä½¿ç”¨<code>top</code>ã€<code>uptime</code>æ˜¾ç¤ºè´Ÿè½½å¹³å‡å€¼çš„æƒ…å†µã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># uptime</span></span><br><span class="line"> 02:11:29 up  5:54,  3 users,  load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure>

<p>å°†æ˜¾ç¤ºçš„è´Ÿè½½å¹³å‡å€¼é™¤ä»¥ç³»ç»Ÿä¸­çš„é€»è¾‘CPUæ•°ã€‚å½“å€¼ä½äº1è¡¨ç¤ºèµ„æºåˆ©ç”¨ç‡è¾ƒå¥½ï¼Œç­‰å¾…æ—¶é—´å¾ˆçŸ­ã€‚å½“å€¼é«˜äº1è¡¨ç¤ºèµ„æºé¥±å’Œï¼Œè€Œä¸”æœ‰ä¸€å®šçš„æœåŠ¡ç­‰å¾…æ—¶é—´ã€‚</p>
<p>ç©ºé—²CPUé˜Ÿåˆ—çš„è´Ÿè½½æ•°ä¸º0ã€‚æ¯ä¸ªå°±ç»ªå’Œç­‰å¾…çš„çº¿ç¨‹ä½¿è®¡æ•°å¢åŠ 1ã€‚æ€»é˜Ÿåˆ—æ•°ä¸º1æ—¶ï¼Œèµ„æºï¼ˆCPUã€ç£ç›˜æˆ–ç½‘ç»œï¼‰æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œä½†æ²¡æœ‰è¯·æ±‚æŠŠæ—¶é—´èŠ±åœ¨ç­‰å¾…ä¸Šã€‚å¢åŠ çš„è¯·æ±‚æ•°ä¼šç´¯ç§¯è¯¥è®¡æ•°ï¼Œä½†ç”±äºè®¸å¤šè¯·æ±‚å¯ä»¥åœ¨æ—¶é™å†…å¤„ç†ï¼Œèµ„æºä½¿ç”¨ç‡ä¼šå¾ˆé«˜ï¼Œè€Œç­‰å¾…æ—¶é—´åˆ™ä¸ä¼šã€‚</p>
<p>å› ä¸ºç£ç›˜æˆ–ç½‘ç»œèµ„æºå¿™ç¢Œç­‰å¾…I/Oè€Œå¤„äºç¡çœ çš„è¿›ç¨‹åŒ…å«åœ¨è¯¥è®¡æ•°å†…ï¼Œè€Œä¸”ä½¿è´Ÿè½½å¹³å‡å€¼å¢å¤§ã€‚è™½ç„¶ä¸èƒ½è¡¨ç¤ºCPUä½¿ç”¨ç‡ï¼Œé˜Ÿåˆ—æ•°ä¾ç„¶è¡¨æ˜ç”¨æˆ·å’Œç¨‹åºæ­£åœ¨ç­‰å¾…èµ„æºæœåŠ¡ã€‚</p>
<p>åœ¨èµ„æºé¥±å’Œå‰ï¼Œå¹³å‡è´Ÿè½½å°†ä¿æŒåœ¨1ä»¥ä¸‹ï¼Œå› ä¸ºå‡ ä¹ä¸ä¼šåœ¨é˜Ÿåˆ—ä¸­å‘ç°ç­‰å¾…çš„ä»»åŠ¡ã€‚åªæœ‰èµ„æºé¥±å’Œå¯¼è‡´è¯·æ±‚ç•™åœ¨æ’é˜ŸçŠ¶æ€å¹¶ä¸”è¢«è´Ÿè½½è®¡ç®—ä¾‹ç¨‹è®¡æ•°æ—¶ï¼Œè´Ÿè½½å¹³å‡æ‰ä¼šå¢å¤§ã€‚å½“èµ„æºä½¿ç”¨ç‡æ¥è¿‘100%æ—¶ï¼Œæ¯ä¸ªå¢åŠ çš„è¯·æ±‚å°†å¼€å§‹é­é‡æœåŠ¡ç­‰å¾…æ—¶é—´ã€‚</p>
<h4 id="å®æ—¶è¿›ç¨‹ç›‘æ§"><a href="#å®æ—¶è¿›ç¨‹ç›‘æ§" class="headerlink" title="å®æ—¶è¿›ç¨‹ç›‘æ§"></a>å®æ—¶è¿›ç¨‹ç›‘æ§</h4><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><p>topå‘½ä»¤ç”¨äºåŠ¨æ€åœ°ç›‘è§†è¿›ç¨‹æ´»åŠ¨ä¸ç³»ç»Ÿè´Ÿè½½ç­‰ä¿¡æ¯ </p>
<blockquote>
<p>topå‘½ä»¤ç›¸å½“å¼ºå¤§ï¼Œèƒ½å¤ŸåŠ¨æ€åœ°æŸ¥çœ‹ç³»ç»Ÿè¿ç»´çŠ¶æ€ï¼Œå®Œå…¨å°†å®ƒçœ‹ä½œLinuxä¸­çš„â€œå¼ºåŒ–ç‰ˆçš„Windowsä»»åŠ¡ç®¡ç†å™¨â€ .</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">top - 01:07:42 up  4:50,  4 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks: 412 total,   2 running, 410 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem:   1870760 total,   323388 used,  1547372 free,      780 buffers</span><br><span class="line">KiB Swap:  2097148 total,        0 used,  2097148 free.   101676 cached Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">     1 root      20   0   50776   7212   2480 S  0.0  0.4   0:01.26 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd</span><br><span class="line">     3 root      20   0       0      0      0 S  0.0  0.0   0:00.04 ksoftirqd/0</span><br><span class="line">     5 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kworker/0:+</span><br><span class="line">     7 root      rt   0       0      0      0 S  0.0  0.0   0:00.00 migration/0</span><br><span class="line">     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh</span><br><span class="line">     9 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcuob/0</span><br><span class="line">...............................ä»¥ä¸‹çœç•¥..................................</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç¬¬1è¡Œï¼šç³»ç»Ÿæ—¶é—´ã€è¿è¡Œæ—¶é—´ã€ç™»å½•ç»ˆç«¯æ•°ã€ç³»ç»Ÿè´Ÿè½½ï¼ˆä¸‰ä¸ªæ•°å€¼åˆ†åˆ«ä¸º1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿå†…çš„å¹³å‡å€¼ï¼Œæ•°å€¼è¶Šå°æ„å‘³ç€è´Ÿè½½è¶Šä½ï¼‰ã€‚</p>
<p>ç¬¬2è¡Œï¼šè¿›ç¨‹æ€»æ•°ã€è¿è¡Œä¸­çš„è¿›ç¨‹æ•°ã€ç¡çœ ä¸­çš„è¿›ç¨‹æ•°ã€åœæ­¢çš„è¿›ç¨‹æ•°ã€åƒµæ­»çš„è¿›ç¨‹æ•°ã€‚</p>
<p>ç¬¬3è¡Œï¼šç”¨æˆ·å ç”¨èµ„æºç™¾åˆ†æ¯”ã€ç³»ç»Ÿå†…æ ¸å ç”¨èµ„æºç™¾åˆ†æ¯”ã€æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹èµ„æºç™¾åˆ†æ¯”ã€ç©ºé—²çš„èµ„æºç™¾åˆ†æ¯”ç­‰ã€‚å…¶ä¸­æ•°æ®å‡ä¸ºCPUæ•°æ®å¹¶ä»¥ç™¾åˆ†æ¯”æ ¼å¼æ˜¾ç¤ºï¼Œä¾‹å¦‚â€œ97.1 idâ€æ„å‘³ç€æœ‰97.1%çš„CPUå¤„ç†å™¨èµ„æºå¤„äºç©ºé—²ã€‚</p>
<p>ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜æ€»é‡ã€å†…å­˜ä½¿ç”¨é‡ã€å†…å­˜ç©ºé—²é‡ã€ä½œä¸ºå†…æ ¸ç¼“å­˜çš„å†…å­˜é‡ã€‚</p>
<p>ç¬¬5è¡Œï¼šè™šæ‹Ÿå†…å­˜æ€»é‡ã€è™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ã€è™šæ‹Ÿå†…å­˜ç©ºé—²é‡ã€å·²è¢«æå‰åŠ è½½çš„å†…å­˜é‡ã€‚</p>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p><strong>å†™å‡ºä»¥ä¸‹æè¿°å¯¹åº”çš„è¿›ç¨‹çŠ¶æ€æ ‡å¿—ï¼š</strong></p>
<table>
<thead>
<tr>
<th>æè¿°</th>
<th align="center">çŠ¶æ€æ ‡å¿—</th>
</tr>
</thead>
<tbody><tr>
<td>è¿›ç¨‹å·²è¢«åœæ­¢(æš‚åœ)</td>
<td align="center">T</td>
</tr>
<tr>
<td>è¿›ç¨‹å·²é‡Šæ”¾äº†å…¶æ‰€æœ‰èµ„æº(pidé™¤å¤–)</td>
<td align="center">Z</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£åœ¨CPUä¸Šè¿è¡Œæˆ–è€…æ­£åœ¨ç­‰å¾…äºCPUä¸Šè¿è¡Œ</td>
<td align="center">R</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£å¤„äºç¡çœ çŠ¶æ€ï¼Œç›´è‡³æ»¡è¶³æŸäº›æ¡ä»¶åæ‰ä¼šå¯åŠ¨</td>
<td align="center">S</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£åœ¨ç­‰å¾…I/Oæˆ–æŸäº›æ¡ä»¶å¾—åˆ°æ»¡è¶³ï¼Œå¹¶ä¸”ç»å¯¹ä¸ä¼šå½±å“ä¿¡å·</td>
<td align="center">D</td>
</tr>
</tbody></table>
<p><strong>æŒ‰ä»¥ä¸‹é¡ºåºç»ƒä¹ åå°ä¸å‰å°è¿›ç¨‹æ“ä½œï¼š</strong></p>
<p>å¹¶æ’æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼Œåˆ†åˆ«ç§°ä¸ºå·¦çª—å£å’Œå³çª—å£</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä»¥ä¸€ç§’ä¸ºé—´éš”æŒç»­å‘~/outfileæ–‡ä»¶é™„åŠ å•è¯â€rockâ€å’Œä¸€ä¸ªç©ºæ ¼ã€‚æ•´ä¸ªå‘½ä»¤é›†å¿…é¡»åŒ…å«åœ¨æ‹¬å·å†…ï¼Œä»¥ä¾¿ä½œä¸šæ§åˆ¶å¯ä»¥å°†è¯¥é›†åˆè§£è¯‘ä¸ºä¸€ä¸ªä½œä¸š</p>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜rock â€˜ &gt;&gt; ~/outfile;sleep 1;done)</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># (while true;do echo -n 'rock ' &gt;&gt; ~/outfile;sleep 1;done)</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å³çª—å£ä¸­ï¼Œä½¿ç”¨<code>tail</code>ç¡®è®¤æ–°è¿›ç¨‹æ­£åœ¨å†™å…¥è¯¥æ–‡ä»¶</p>
<blockquote>
<p> [root@localhost ~]# tail -f ~/outfile</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># tail -f ~/outfile</span></span><br><span class="line">rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨<code>ctrl+z</code>å¿«æ·é”®æš‚åœæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚<code>shell</code>å°†è¿”å›ä½œä¸šIDå¹¶ç”¨æ–¹æ‹¬å·æ‹¬èµ·ã€‚åœ¨å³çª—å£ä¸­ç¡®è®¤è¿›ç¨‹è¾“å‡ºå·²ç»åœæ­¢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'rock ' &gt;&gt; ~/outfile;sleep 1;done)</span></span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼ŒæŸ¥çœ‹jobsåˆ—è¡¨ã€‚+è¡¨ç¤ºå½“å‰çš„ä½œä¸šã€‚ä½¿ç”¨<code>bg</code>å‘½ä»¤åœ¨åå°é‡æ–°å¯åŠ¨è¯¥ä½œä¸šï¼Œå¹¶å†æ¬¡æŸ¥çœ‹jobsåˆ—è¡¨ï¼Œåœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤è¿›ç¨‹è¾“å‡ºå†æ¬¡å¤„äºæ´»åŠ¨çŠ¶æ€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># bg</span></span><br><span class="line">[1]+ ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œå†å¯åŠ¨ä¸¤ä¸ªè¿›ç¨‹ï¼Œä»¥ä¾¿å‘åŒä¸€è¾“å‡ºæ–‡ä»¶é™„åŠ å†…å®¹ã€‚å°†â€rockâ€æ›¿æ¢ä¸ºâ€paperâ€ï¼Œå†æ›¿æ¢ä¸ºâ€scissorsâ€ã€‚è¦å°†è¿›ç¨‹æ­£ç¡®ç½®äºåå°ï¼Œæ•´ä¸ªå‘½ä»¤é›†å¿…é¡»åŒ…å«åœ¨æ‹¬å·å†…ï¼Œå¹¶ä¸”ä»¥&amp;ç¬¦å·ç»“å°¾</p>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜paper â€˜ &gt;&gt; ~/outfile;sleep 1;done) &amp;</p>
</blockquote>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜scissors â€˜ &gt;&gt; ~/outfile;sleep 1;done) &amp;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'paper ' &gt;&gt; ~/outfile;sleep 1;done) &amp;</span></span><br><span class="line">[3] 3858</span><br><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'scissors ' &gt;&gt; ~/outfile;sleep 1;done) &amp;</span></span><br><span class="line">[4] 3887</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œæ£€æŸ¥jobsï¼Œä»¥æŸ¥çœ‹æ‰€æœ‰ä¸‰ä¸ªè¿›ç¨‹éƒ½åœ¨è¿è¡Œä¸­ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤æ‰€æœ‰ä¸‰ä¸ªè¿›ç¨‹éƒ½é™„åŠ å†…å®¹åˆ°æ–‡ä»¶ä¸­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]   è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[2]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[3]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br></pre></td></tr></table></figure>

<p>ä»…ä½¿ç”¨ä¹‹å‰å­¦ä¹ çš„å‘½ä»¤ï¼Œæš‚åœâ€rockâ€è¿›ç¨‹ã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨ä»jobsåˆ—è¡¨ä¸­ç¡®å®šçš„ä½œä¸šIDä½¿ä½œä¸šè¿›å…¥å‰å°ï¼Œç„¶åä½¿ç”¨ctrl+zæš‚åœè¯¥ä½œä¸šï¼Œç¡®è®¤â€rockâ€è¿›ç¨‹ä¸ºå·²åœæ­¢ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤â€rockâ€è¾“å‡ºä¸å†æ´»åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]   è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[2]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[3]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br></pre></td></tr></table></figure>

<p>ç»ˆæ­¢â€paperâ€è¿›ç¨‹ã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ä½œä¸šè¿›å…¥å‰å°ï¼Œç„¶åä½¿ç”¨ctrl+cç»ˆæ­¢è¯¥ä½œä¸šï¼Œç¡®è®¤â€paperâ€è¿›ç¨‹å·²ç»æ¶ˆå¤±ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤â€paperâ€è¾“å‡ºä¸å†æ´»åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[3]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[4]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %4</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^C</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨psæŸ¥çœ‹å‰©ä½™çš„ä½œä¸šã€‚æš‚åœä¸­çš„ä½œä¸šå…·æœ‰çŠ¶æ€Tæ ‡å¿—ã€‚å…¶ä»–åå°ä½œä¸šä¸ºç¡çœ ä¸­(S)ï¼Œå› ä¸ºpsåœ¨æ˜¾ç¤ºæ—¶å¤„äºâ€CPUä¸Šâ€(R)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# ps j</span><br><span class="line">  PPID    PID   PGID    SID TTY       TPGID STAT   UID   TIME COMMAND</span><br><span class="line">   960   2580   2580   2580 tty1       2580 Ss+      0   0:00 -bash</span><br><span class="line">  3333   3337   3337   3337 pts/0      4653 Ss       0   0:00 -bash</span><br><span class="line">  3470   3475   3475   3475 pts/2      5657 Ss       0   0:00 -bash</span><br><span class="line">  3337   3690   3690   3337 pts/0      4653 T        0   0:00 tail -f /root/outfil</span><br><span class="line">  3337   4653   4653   3337 pts/0      4653 S+       0   0:00 tail -f /root/outfil</span><br><span class="line">  3475   4699   4699   3475 pts/2      5657 S        0   0:00 -bash</span><br><span class="line">  4699   5656   4699   3475 pts/2      5657 S        0   0:00 sleep 1</span><br><span class="line">  3475   5657   5657   3475 pts/2      5657 R+       0   0:00 ps j</span><br></pre></td></tr></table></figure>

<p>åœæ­¢å‰©ä½™çš„ä¸¤ä¸ªä½œä¸šã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿å…¶ä¸­ä¸€ä¸ªä½œä¸šè¿›å…¥å‰å°ã€‚ä½¿ç”¨ctrl+cå°†å…¶ç»ˆæ­¢ï¼Œå¯¹å‰©ä½™çš„ä½œä¸šé‡å¤æ­¤æ“ä½œã€‚åœæ­¢çš„ä½œä¸šåœ¨å‰å…¥å‰å°æ—¶ä¼šä¸´æ—¶é‡æ–°å¯åŠ¨ã€‚ç¡®è®¤æ²¡æœ‰å‰©ä½™çš„ä½œä¸šï¼Œè¾“å‡ºä¹Ÿå·²åœæ­¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^C</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å³çª—å£ä¸­ï¼Œåœæ­¢tailå‘½ä»¤ã€‚å…³é—­å¤šä½™çš„ç»ˆç«¯çª—å£</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3337 pts/0    00:00:00 bash</span><br><span class="line">  3690 pts/0    00:00:00 tail</span><br><span class="line">  5870 pts/0    00:00:00 ps</span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># kill 3690</span></span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  5876 pts/0    00:00:00 bash</span><br><span class="line">  5897 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/" data-id="ck6abn9vj003jsgu64vcf4szb"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-8.pythonçš„æ–‡ä»¶å¤„ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/8.pythonçš„æ–‡ä»¶å¤„ç†/"
    >pythonæ–‡ä»¶å¤„ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/8.pythonçš„æ–‡ä»¶å¤„ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.569Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="pythonæ–‡ä»¶å¤„ç†"><a href="#pythonæ–‡ä»¶å¤„ç†" class="headerlink" title="pythonæ–‡ä»¶å¤„ç†"></a>pythonæ–‡ä»¶å¤„ç†</h1><p>pythonå¯¹æ–‡ä»¶å¤„ç†åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ¬åœ°å¤„ç†ï¼Œè€Œå¦å¤–ä¸€ç§å°±æ˜¯é€šè¿‡ç½‘ç»œæ•°æ®å¤„ç†ï¼ˆä¹Ÿå°±æ˜¯çˆ¬è™«ç›¸å…³ï¼‰ï¼Œè€Œæœ¬åœ°çš„æ•°æ®å¤„ç†ï¼Œä¸»è¦æ˜¯é€šè¿‡æ–‡ä»¶çš„éƒ½å’Œå†™å®Œæˆ</p>
<blockquote>
<p> æˆ‘ä»¬å…ˆæƒ³ä¸€æƒ³å¹³æ—¶å¯¹æ–‡ä»¶å¤„ç†ä¸€èˆ¬é‡åˆ°è¿‡å“ªäº›é—®é¢˜:</p>
<ul>
<li>å¦‚ä½•è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åå¤„ç†ï¼Œæœ€åå†™åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶</li>
<li>å¦‚ä½•æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„æŸä¸€äº›æ–‡ä»¶å</li>
</ul>
</blockquote>
<p>pythonçš„æ–‡ä»¶å¤„ç†ç®€å•æ¥è¯´åˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>æ–‡ä»¶çš„è¯»å†™å’Œå…³é—­</li>
<li>æ–‡ä»¶çš„æ¨¡å¼</li>
<li>æ–‡ä»¶çš„è¯»å–ä½ç½®</li>
</ul>
<h2 id="æ–‡ä»¶çš„è¯»å–å’Œå…³é—­"><a href="#æ–‡ä»¶çš„è¯»å–å’Œå…³é—­" class="headerlink" title="æ–‡ä»¶çš„è¯»å–å’Œå…³é—­"></a>æ–‡ä»¶çš„è¯»å–å’Œå…³é—­</h2><p>pythonä¸­æƒ³è¦è·å–æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œå…ˆè¦æ‰“å¼€æ–‡ä»¶ï¼Œç„¶åæ‰èƒ½éƒ½å’Œå†™ï¼Œè€Œä¸”å†™å®Œä¹‹åä¸€å®šè¦è®°å¾—å…³é—­</p>
<p>pythonä¸­å¯¹æ–‡ä»¶çš„æ‰“å¼€æ˜¯é€šè¿‡openå‡½æ•°æ¥è·å–ä¸€ä¸ªå¥æŸ„</p>
<ul>
<li>è·å–<code>è¯»</code>çš„å¥æŸ„ï¼Œå¯ä»¥ç”¨<code>f.read()</code>è¿›è¡Œè¯»å…¥</li>
<li>è·å–<code>å†™</code>çš„å¥æŸ„<code>f</code>ä¹‹åï¼Œå°±å¯ä»¥<code>f.weite()</code>è¿›è¡Œå†™å…¥</li>
<li>å½“ä½ æ–‡ä»¶å¤„ç†å®Œæ¯•ä¹‹åï¼Œè¦å…³é—­æ–‡ä»¶</li>
</ul>
<blockquote>
<p>åº”è¯¥ä¼šæœ‰äººå’Œåšä¸»æ€è€ƒçš„é—®é¢˜ä¸€æ ·ï¼šä¸ºä»€ä¹ˆè¦å…³é—­æ–‡ä»¶ï¼Ÿ</p>
<p>å› ä¸ºå¦‚æœä¸æ­£å¸¸å…³é—­æ–‡ä»¶ï¼Œç¼“å†²åœ¨å†…å­˜ä¸­çš„æ•°æ®å°±ä¸èƒ½çœŸæ­£åœ°å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œå¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±çš„ç°è±¡</p>
</blockquote>
<h3 id="æ–‡ä»¶çš„æ‰“å¼€"><a href="#æ–‡ä»¶çš„æ‰“å¼€" class="headerlink" title="æ–‡ä»¶çš„æ‰“å¼€"></a>æ–‡ä»¶çš„æ‰“å¼€</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file_obj=open(filename,mode=<span class="string">'r'</span>,buffering=<span class="number">-1</span>)</span><br><span class="line"><span class="comment"># è¿™é‡Œä¸€å…±æœ‰3ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¼ºåˆ¶å‚æ•°ï¼Œåé¢ä¸¤ä¸ªæ˜¯å¯é€‰çš„</span></span><br><span class="line"><span class="comment"># modeå¯ä»¥æ˜¯è¯»ï¼Œä¹Ÿå¯ä»¥æ˜¯å†™ï¼Œæˆ–è€…æ˜¯è¿½åŠ ï¼Œä¸€èˆ¬é»˜è®¤çš„æ˜¯è¯»æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># bufferingä¸»è¦æ˜¯è®¾ç½®ç¼“å†²åŒºï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨-1è¡¨ç¤ºç³»ç»Ÿé»˜è®¤çš„ç¼“å†²åŒºï¼Œè‹¥å†™100ï¼Œåˆ™è¡¨ç¤ºç¼“å†²åŒºä¸º100</span></span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶çš„è¯»å–"><a href="#æ–‡ä»¶çš„è¯»å–" class="headerlink" title="æ–‡ä»¶çš„è¯»å–"></a>æ–‡ä»¶çš„è¯»å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">f.readline() <span class="comment"># è¡¨ç¤ºè¯»æ–‡ä»¶çš„ä¸€è¡Œ</span></span><br><span class="line">f.readlines() <span class="comment"># è¡¨ç¤ºæŠŠæ–‡ä»¶ä»å¤´åˆ°ä½éƒ½è¯»å‡ºæ¥ï¼Œå¹¶ä¿å­˜ä¸ºä¸€ä¸ªåˆ—è¡¨</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¾‹å¦‚æˆ‘ä»¬ç°åœ¨åœ¨Dç›˜çš„pythonç›®å½•é‡Œé¢æ–°å»º</p>
<p>123321.txt</p>
<p>123321.py</p>
<p>æ‰“å¼€123321.txtè¾“å…¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>æ‰“å¼€123321.pyï¼Œå†™å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">print(f.readline())</span><br><span class="line">print(f.readlines())</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123456789</span></span><br><span class="line"></span><br><span class="line">[<span class="string">'ABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>]</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶çš„å†™å…¥"><a href="#æ–‡ä»¶çš„å†™å…¥" class="headerlink" title="æ–‡ä»¶çš„å†™å…¥"></a>æ–‡ä»¶çš„å†™å…¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt,'</span>w<span class="string">')</span></span><br><span class="line"><span class="string">f.write() # è¡¨ç¤ºæŠŠå­—ç¬¦ä¸²å†™å…¥</span></span><br><span class="line"><span class="string">f.writelines() # è¡¨ç¤ºæŠŠä¸€ä¸ªåˆ—è¡¨å†™å…¥</span></span><br><span class="line"><span class="string">f.close() # è¡¨ç¤ºå…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¾‹å¦‚æˆ‘ä»¬ç°åœ¨åœ¨Dç›˜çš„pythonç›®å½•é‡Œé¢æ–°å»º</p>
<p>ABCCBA.txt</p>
<p>ABCCBA.py</p>
</blockquote>
<p>æ‰“å¼€ABCCBA.pyï¼Œå†™å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'ABCCBA.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">f.write(<span class="string">'123321'</span>)</span><br><span class="line">f.writelines([<span class="string">'\nABCDEFGHI\n'</span>, <span class="string">'IHGFEDCBA'</span>])</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤å¤„åœ¨åé¢å¦‚æœæ²¡å†™å…¥<code>f.close()</code>,é‚£ä¹ˆåœ¨æœ€åä½ æ‰“å¼€ABCCBA.txtæ–‡ä»¶åæ˜¯çœ‹ä¸åˆ°ä½ å†™å…¥çš„å†…å®¹çš„</p>
</blockquote>
<p>è¿è¡Œç»“æœï¼š</p>
<p>æ‰“å¼€Dç›˜çš„pythonç›®å½•ä¸‹çš„ABCCBA.txtæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123321</span></span><br><span class="line">ABCDEFGHI</span><br><span class="line">IHGFEDCBA</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶çš„å…³é—­"><a href="#æ–‡ä»¶çš„å…³é—­" class="headerlink" title="æ–‡ä»¶çš„å…³é—­"></a>æ–‡ä»¶çš„å…³é—­</h3><blockquote>
<p>æ­¤å¤„æˆ‘ä»‹ç»ä¸¤ç§å…³é—­æ–¹æ³•</p>
</blockquote>
<p>1ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'somefile.txt'</span>)</span><br><span class="line">.............</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>2ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">r'somefile.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.readlines()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>withç”¨æ³•æ˜¯pythonæåŠ›æ¨èçš„ä¸€ç§ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ å…³æ‰æ–‡ä»¶ï¼Œä½ åªéœ€è¦ä¸“æ³¨å¯¹æ–‡ä»¶çš„å¤„ç†å°±å¯ä»¥äº†</p>
</blockquote>
<h2 id="æ–‡ä»¶çš„æ¨¡å¼"><a href="#æ–‡ä»¶çš„æ¨¡å¼" class="headerlink" title="æ–‡ä»¶çš„æ¨¡å¼"></a>æ–‡ä»¶çš„æ¨¡å¼</h2><p>åœ¨ä¸Šé¢æˆ‘ä»…ä»…åªåˆ—ä¸¾äº†pythonçš„è¯»å’Œå†™ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ¨¡å¼è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>å…¶å®pythonåªéœ€è¦æ”¹å˜ä¸€ä¸‹opené‡Œé¢çš„æ¨¡å¼å‚æ•°å°±å¯ä»¥äº†</p>
<p>â€‹                                    openå‡½æ•°ä¸­çš„æ¨¡å¼å‚æ•°</p>
<table>
<thead>
<tr>
<th align="center">å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">â€˜râ€™</td>
<td align="center">è¯»æ¨¡å¼</td>
</tr>
<tr>
<td align="center">â€˜wâ€™</td>
<td align="center">å†™æ¨¡å¼</td>
</tr>
<tr>
<td align="center">â€˜aâ€™</td>
<td align="center">è¿½åŠ æ¨¡å¼</td>
</tr>
<tr>
<td align="center">â€˜bâ€™</td>
<td align="center">äºŒè¿›åˆ¶æ¨¡å¼</td>
</tr>
<tr>
<td align="center">â€˜+â€™</td>
<td align="center">è¯»/å†™æ¨¡å¼</td>
</tr>
<tr>
<td align="center">â€˜r+â€™</td>
<td align="center">ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€</td>
</tr>
<tr>
<td align="center">â€˜w+â€™</td>
<td align="center">ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€</td>
</tr>
<tr>
<td align="center">â€˜a+â€™</td>
<td align="center">ä»¥è¯»å†™æ¨¡å¼æ‰“å¼€</td>
</tr>
<tr>
<td align="center">â€˜rbâ€™</td>
<td align="center">ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€</td>
</tr>
</tbody></table>
<h2 id="æ–‡ä»¶çš„è¯»å–ä½ç½®"><a href="#æ–‡ä»¶çš„è¯»å–ä½ç½®" class="headerlink" title="æ–‡ä»¶çš„è¯»å–ä½ç½®"></a>æ–‡ä»¶çš„è¯»å–ä½ç½®</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å°±åªæƒ³è¯»å–æ–‡ä»¶ä¸­çš„æŸä¸€éƒ¨åˆ†ï¼Œæˆ–è€…æˆ‘ä»¬éœ€è¦ä»æ–‡ç« çš„æŸä¸€éƒ¨åˆ†å¼€å§‹è¯»å–</p>
<p>é‚£ä¹ˆè¿™å°±è¦ç”¨åˆ°<code>seek()</code>å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_obj.seek(offset,whence=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># seek ä¸»è¦æ˜¯åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨æŒ‡é’ˆï¼Œä»`whence`(0è¡¨ç¤ºæ–‡ä»¶çš„å¼€å¤´ï¼Œ1è¡¨ç¤ºå½“å‰ä½ç½®ï¼Œ2è¡¨ç¤ºæ–‡ä»¶çš„æœ«å°¾)åç§»offsetä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¾‹å¦‚åœ¨Dç›˜pythonç›®å½•ä¸‹çš„123321.txtæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">123456789</span></span><br><span class="line">&gt; ABCDEFGHI</span><br><span class="line">&gt; IHGFEDCBA</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="ä»å¤´è¯»å–3ä¸ªå­—ç¬¦"><a href="#ä»å¤´è¯»å–3ä¸ªå­—ç¬¦" class="headerlink" title="ä»å¤´è¯»å–3ä¸ªå­—ç¬¦"></a>ä»å¤´è¯»å–3ä¸ªå­—ç¬¦</h3><p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºseek1.pyæ–‡ä»¶ï¼Œå†™å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">r'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

<h3 id="ä»å°¾éƒ¨è¯»å–3ä¸ªå­—ç¬¦"><a href="#ä»å°¾éƒ¨è¯»å–3ä¸ªå­—ç¬¦" class="headerlink" title="ä»å°¾éƒ¨è¯»å–3ä¸ªå­—ç¬¦"></a>ä»å°¾éƒ¨è¯»å–3ä¸ªå­—ç¬¦</h3><p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºseek2.pyæ–‡ä»¶ï¼Œå†™å…¥ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">b'123321.txt'</span>)</span><br><span class="line">f.seek(<span class="number">-3</span>,<span class="number">2</span>)</span><br><span class="line">print(f.read(<span class="number">3</span>))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜1"><a href="#å®æˆ˜1" class="headerlink" title="å®æˆ˜1"></a>å®æˆ˜1</h2><blockquote>
<p>åœ¨Dç›˜pythonç›®å½•é‡Œé¢åˆ›å»º2019.txtæ–‡ä»¶ï¼Œå†™å…¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; hahaha</span><br><span class="line">&gt; hary</span><br><span class="line">&gt; natasha</span><br><span class="line">&gt; mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>è¯·æŠŠ2019.txtæ–‡ä»¶é‡Œé¢çš„å†…å®¹éƒ½å‡ºæ¥ï¼Œå†™åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åï¼š9102.txtï¼Œæ ¼å¼æŒ‰ç…§ä¸‹é¢è¿™ç§ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">1</span>:hahaha</span><br><span class="line">&gt; <span class="number">2</span>:hary</span><br><span class="line">&gt; <span class="number">3</span>:natasha</span><br><span class="line">&gt; <span class="number">4</span>:mary</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºtest.pyï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f=open(<span class="string">'2019.txt'</span>) <span class="comment"># æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">count=f.readlines() <span class="comment"># ä»æ–‡ä»¶ä¸­æŠŠå†…å®¹éƒ½è¯»å‡ºæ¥ï¼Œä¿å­˜åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(count)): <span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line">    count[i]=str(i+<span class="number">1</span>)+<span class="string">'ï¼š'</span>+count[i] <span class="comment"># éå†åˆ—è¡¨ï¼Œå°†æ¯ä¸€è¡Œéƒ½åŠ ä¸Šä¸‹æ ‡</span></span><br><span class="line">print(count)</span><br><span class="line">f.close() <span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">f=open(<span class="string">'9102.txt'</span>,<span class="string">'w'</span>) <span class="comment"># æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">f.writelines(count) <span class="comment"># æŠŠæ–°çš„å†…å®¹å†™å…¥æ–‡ä»¶</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>ä¼˜åŒ–é‡æ„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_File</span><span class="params">()</span>:</span>    <span class="comment"># æŠŠè¯»æ–‡ä»¶æŠ½æˆä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'2019.txt'</span>,<span class="string">'r'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        read_lines_from_file=f.readlines()</span><br><span class="line">        <span class="keyword">return</span> read_lines_from_file</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_File</span><span class="params">(count=[])</span>:</span>   <span class="comment"># æŠŠå†™æ–‡ä»¶æŠ½æˆä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">r'9102.txt'</span>,<span class="string">'w'</span>)<span class="keyword">as</span> f:</span><br><span class="line">        f.writelines(count)</span><br><span class="line"></span><br><span class="line">new_lines=[]</span><br><span class="line"><span class="comment"># éå†åˆ—è¡¨ï¼Œå°†æ¯ä¸€è¡Œéƒ½åŠ ä¸Šä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">for</span> index,line <span class="keyword">in</span> enumerate(read_File()):</span><br><span class="line">    new_lines.append(str(index+<span class="number">1</span>)+<span class="string">'ï¼š'</span>+line)</span><br><span class="line"></span><br><span class="line">write_File(new_lines)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;1ï¼šhahaha\n&apos;, &apos;2ï¼šhary\n&apos;, &apos;3ï¼šnatasha\n&apos;, &apos;4ï¼šmary&apos;]</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€9102.txtæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ï¼šhahaha</span><br><span class="line"><span class="number">2</span>ï¼šhary</span><br><span class="line"><span class="number">3</span>ï¼šnatasha</span><br><span class="line"><span class="number">4</span>ï¼šmary</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜2"><a href="#å®æˆ˜2" class="headerlink" title="å®æˆ˜2"></a>å®æˆ˜2</h2><blockquote>
<p>åœ¨Dç›˜pythonç›®å½•ä¸‹åˆ›å»ºhahahaæ–‡ä»¶å¤¹ï¼Œç½‘ä¸Šä¸‹è½½å‡ å¼ å›¾ç‰‡æ”¾è¿›å»ï¼Œç”¨ä»£ç å°†å…¨éƒ¨ç…§ç‰‡é‡å‘½åä¸º1.jpgï¼Œ2.jpgï¼Œ3.jpg,â€¦â€¦.ä»¥æ­¤ç±»æ¨</p>
</blockquote>
<p>åœ¨Dç›˜pythonç›®å½•ä¸‹åˆ›å»ºtest2.pyï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">renameall</span><span class="params">()</span>:</span></span><br><span class="line">    fileList = os.listdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#å¾…ä¿®æ”¹æ–‡ä»¶å¤¹</span></span><br><span class="line">    print(<span class="string">"ä¿®æ”¹å‰ï¼š"</span>+str(fileList))  <span class="comment">#è¾“å‡ºæ–‡ä»¶å¤¹ä¸­åŒ…å«çš„æ–‡ä»¶</span></span><br><span class="line">    currentpath = os.getcwd()  <span class="comment">#å¾—åˆ°è¿›ç¨‹å½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line">    os.chdir(<span class="string">r"D:\python\hahaha"</span>)  <span class="comment">#å°†å½“å‰å·¥ä½œç›®å½•ä¿®æ”¹ä¸ºå¾…ä¿®æ”¹æ–‡ä»¶å¤¹çš„ä½ç½®</span></span><br><span class="line">    num=<span class="number">1</span>  <span class="comment">#åç§°å˜é‡</span></span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> fileList:  <span class="comment">#éå†æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">        pat=<span class="string">".+\.(jpg|png|gif)"</span>  <span class="comment">#åŒ¹é…æ–‡ä»¶åæ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">        pattern = re.findall(pat,fileName)  <span class="comment">#è¿›è¡ŒåŒ¹é…</span></span><br><span class="line">        os.rename(fileName,(str(num)+<span class="string">'.'</span>+pattern[<span class="number">0</span>]))  <span class="comment">#æ–‡ä»¶é‡æ–°å‘½å</span></span><br><span class="line">        num = num+<span class="number">1</span>  <span class="comment">#æ”¹å˜ç¼–å·ï¼Œç»§ç»­ä¸‹ä¸€é¡¹</span></span><br><span class="line">    print(<span class="string">"---------------------------------------------------"</span>)</span><br><span class="line">    os.chdir(currentpath)  <span class="comment">#æ”¹å›ç¨‹åºè¿è¡Œå‰çš„å·¥ä½œç›®å½•</span></span><br><span class="line">    sys.stdin.flush()  <span class="comment">#åˆ·æ–°</span></span><br><span class="line">    print(<span class="string">"ä¿®æ”¹åï¼š"</span>+str(os.listdir(<span class="string">r"D:\python\hahaha"</span>)))  <span class="comment">#è¾“å‡ºä¿®æ”¹åæ–‡ä»¶å¤¹ä¸­åŒ…å«çš„æ–‡ä»¶</span></span><br><span class="line">renameall()</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹å‰ï¼š[<span class="string">'ACG.GY_01.jpg'</span>, <span class="string">'ACG.GY_02.jpg'</span>, <span class="string">'ACG.GY_03.jpg'</span>, <span class="string">'ACG.GY_04.jpg'</span>, <span class="string">'ACG.GY_05.jpg'</span>, <span class="string">'ACG.GY_06.jpg'</span>, <span class="string">'ACG.GY_07.jpg'</span>, <span class="string">'ACG.GY_08.jpg'</span>, <span class="string">'ACG.GY_09.jpg'</span>, <span class="string">'ACG.GY_10.jpg'</span>, <span class="string">'ACG.GY_11.jpg'</span>, <span class="string">'ACG.GY_12.jpg'</span>, <span class="string">'ACG.GY_13.jpg'</span>, <span class="string">'ACG.GY_14.jpg'</span>, <span class="string">'ACG.GY_15.jpg'</span>, <span class="string">'ACG.GY_16.jpg'</span>, <span class="string">'ACG.GY_17.jpg'</span>, <span class="string">'ACG.GY_18.jpg'</span>, <span class="string">'ACG.GY_19.jpg'</span>, <span class="string">'ACG.GY_20.jpg'</span>, <span class="string">'ACG.GY_21.jpg'</span>, <span class="string">'ACG.GY_22.jpg'</span>, <span class="string">'ACG.GY_23.jpg'</span>, <span class="string">'ACG.GY_24.jpg'</span>]</span><br><span class="line">---------------------------------------------------</span><br><span class="line">ä¿®æ”¹åï¼š[<span class="string">'1.jpg'</span>, <span class="string">'2.jpg'</span>, <span class="string">'3.jpg'</span>, <span class="string">'4.jpg'</span>, <span class="string">'5.jpg'</span>, <span class="string">'6.jpg'</span>, <span class="string">'7.jpg'</span>, <span class="string">'8.jpg'</span>, <span class="string">'9.jpg'</span>, <span class="string">'10.jpg'</span>, <span class="string">'11.jpg'</span>, <span class="string">'12.jpg'</span>, <span class="string">'13.jpg'</span>, <span class="string">'14.jpg'</span>, <span class="string">'15.jpg'</span>, <span class="string">'16.jpg'</span>, <span class="string">'17.jpg'</span>, <span class="string">'18.jpg'</span>, <span class="string">'19.jpg'</span>, <span class="string">'20.jpg'</span>, <span class="string">'21.jpg'</span>, <span class="string">'22.jpg'</span>, <span class="string">'23.jpg'</span>, <span class="string">'24.jpg'</span>]</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.pythonçš„æ–‡ä»¶å¤„ç†/" data-id="ck6abn9u0002hsgu6btntiikv"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-8.linux--è½¯ä»¶ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/"
    >è½¯ä»¶ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.566Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="è½¯ä»¶åŒ…çš„é€”å¾„"><a href="#è½¯ä»¶åŒ…çš„é€”å¾„" class="headerlink" title="è½¯ä»¶åŒ…çš„é€”å¾„"></a>è½¯ä»¶åŒ…çš„é€”å¾„</h2><h2 id="è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£"><a href="#è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£"></a>è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£</h2><ul>
<li>å°†äºŒè¿›åˆ¶ç¨‹åºï¼Œåº“æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œå¸®åŠ©æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼›</li>
<li>å®‰è£…è½¯ä»¶æ—¶æŒ‰éœ€å°†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåº“æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œå¸®åŠ©æ–‡ä»¶æ”¾åˆ°ç›¸åº”çš„ä½ç½®ï¼›</li>
<li>ç”Ÿæˆæ•°æ®åº“ï¼Œè¿½è¸ªæ‰€å®‰è£…çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼›</li>
<li>è½¯ä»¶å¸è½½æ—¶æ ¹æ®å®‰è£…æ—¶ç”Ÿæˆçš„æ•°æ®åº“å°†å¯¹åº”çš„æ–‡ä»¶åˆ é™¤</li>
</ul>
<h2 id="è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½"><a href="#è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½"></a>è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½</h2><ul>
<li>åˆ¶ä½œè½¯ä»¶åŒ…</li>
<li>å®‰è£…è½¯ä»¶</li>
<li>å¸è½½è½¯ä»¶</li>
<li>å‡çº§è½¯ä»¶</li>
<li>æŸ¥è¯¢è½¯ä»¶</li>
<li>æ ¡éªŒè½¯ä»¶</li>
</ul>
<h2 id="è½¯ä»¶åŒ…ç®¡ç†"><a href="#è½¯ä»¶åŒ…ç®¡ç†" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†"></a>è½¯ä»¶åŒ…ç®¡ç†</h2><h2 id="è½¯ä»¶åŒ…åˆ†ç±»"><a href="#è½¯ä»¶åŒ…åˆ†ç±»" class="headerlink" title="è½¯ä»¶åŒ…åˆ†ç±»"></a>è½¯ä»¶åŒ…åˆ†ç±»</h2><h2 id="è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"><a href="#è½¯ä»¶åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"></a>è½¯ä»¶åŒ…ç®¡ç†å·¥å…·</h2><h2 id="è½¯ä»¶å®‰è£…æ–¹å¼"><a href="#è½¯ä»¶å®‰è£…æ–¹å¼" class="headerlink" title="è½¯ä»¶å®‰è£…æ–¹å¼"></a>è½¯ä»¶å®‰è£…æ–¹å¼</h2><ul>
<li>é€šè¿‡å‰ç«¯å·¥å…·å®‰è£…</li>
<li>é€šè¿‡åç«¯å·¥å…·å®‰è£…</li>
<li>ç¼–è¯‘å®‰è£…</li>
</ul>
<h2 id="rpmåŒ…å‘½åè§„èŒƒ"><a href="#rpmåŒ…å‘½åè§„èŒƒ" class="headerlink" title="rpmåŒ…å‘½åè§„èŒƒ"></a>rpmåŒ…å‘½åè§„èŒƒ</h2><p><img src="https://s2.ax1x.com/2019/04/23/EErG2q.jpg" alt></p>
<h2 id="rpmåŒ…ç®¡ç†"><a href="#rpmåŒ…ç®¡ç†" class="headerlink" title="rpmåŒ…ç®¡ç†"></a>rpmåŒ…ç®¡ç†</h2><h2 id="ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨"><a href="#ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨"></a>ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨</h2><p>rpmæ˜¯Redhat Package Managerçš„ç®€ç§°ï¼Œç”¨äºç®¡ç†è½¯ä»¶åŒ…ã€‚ rpmæœ‰ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“/var/lib/rpmã€‚ rpmçš„ç®¡ç†å·¥ä½œåŒ…æ‹¬è½¯ä»¶çš„å®‰è£…ã€å¸è½½ã€å‡çº§ã€æŸ¥è¯¢ã€æ ¡éªŒã€é‡å»ºæ•°æ®åº“ã€éªŒè¯è½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§ç­‰ç­‰ã€‚</p>
<h4 id="rpmåŒ…å®‰è£…"><a href="#rpmåŒ…å®‰è£…" class="headerlink" title="rpmåŒ…å®‰è£…"></a>rpmåŒ…å®‰è£…</h4><blockquote>
<p>è¯­æ³•: rpm -ivh /PATH/TO/PACKAGE_FILE â€¦</p>
<p>å¸¸ç”¨é€‰é¡¹ï¼š<br>    -i: å®‰è£…<br>    -v: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<br>    -h: æ˜¾ç¤ºå®‰è£…è¿›åº¦æ¡<br>    â€“test: æµ‹è¯•å®‰è£…ï¼Œä½†ä¸çœŸæ­£æ‰§è¡Œå®‰è£…è¿‡ç¨‹<br>    â€“nodeps: å¿½ç•¥ä¾èµ–å…³ç³»<br>    â€“replacepkgs: é‡æ–°å®‰è£…ï¼Œæ›¿æ¢åŸæœ‰å®‰è£…<br>    â€“oldpackage: é™çº§<br>    â€“force: å¼ºè¡Œå®‰è£…ï¼Œå¯ä»¥å®ç°é‡è£…æˆ–é™çº§<br>    â€“nodigest: ä¸æ£€æŸ¥åŒ…çš„å®Œæ•´æ€§<br>    â€“nosignature: ä¸æ£€æŸ¥åŒ…çš„æ¥æºåˆæ³•æ€§<br>    â€“noscripts: ä¸æ‰§è¡Œç¨‹åºåŒ…è„šæœ¬ç‰‡æ–­<br>        %preï¼šå®‰è£…å‰è„šæœ¬    â€“nopre<br>        %postï¼šå®‰è£…åè„šæœ¬    â€“nopost<br>        %preunï¼šå¸è½½å‰è„šæœ¬    â€“nopreun<br>        %postunï¼šå¸è½½åè„šæœ¬    â€“nopostun</p>
</blockquote>
<h6 id="å®‰è£…è½¯ä»¶åŒ…-éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„"><a href="#å®‰è£…è½¯ä»¶åŒ…-éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…, éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„"></a>å®‰è£…è½¯ä»¶åŒ…, éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„"><a href="#åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„" class="headerlink" title="åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„"></a>åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /mnt/cdrom/Packages/</span></span><br><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼štree-1.6.0-10.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:tree-1.6.0-10.el7                <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…"><a href="#æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…" class="headerlink" title="æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…"></a>æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --test vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">	è½¯ä»¶åŒ… vsftpd-3.0.2-22.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h6 id="å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨-å¼ºåˆ¶å†æ¬¡å®‰è£…"><a href="#å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨-å¼ºåˆ¶å†æ¬¡å®‰è£…" class="headerlink" title="å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨, å¼ºåˆ¶å†æ¬¡å®‰è£…"></a>å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨, å¼ºåˆ¶å†æ¬¡å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --force vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶-ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…"><a href="#å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶-ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…" class="headerlink" title="å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶, ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…"></a>å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶, ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --nodeps tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼štree-1.6.0-10.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">	è½¯ä»¶åŒ… tree-1.6.0-10.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…æŸ¥è¯¢"><a href="#rpmåŒ…æŸ¥è¯¢" class="headerlink" title="rpmåŒ…æŸ¥è¯¢"></a>rpmåŒ…æŸ¥è¯¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rpm -q PACKAGE_NAME                 //æŸ¥è¯¢æŒ‡å®šçš„åŒ…æ˜¯å¦å·²å®‰è£…</span><br><span class="line">rpm -qa                             //æŸ¥è¯¢å·²ç»å®‰è£…çš„æ‰€æœ‰åŒ…</span><br><span class="line">rpm -qi PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…çš„è¯´æ˜ä¿¡æ¯</span><br><span class="line">rpm -ql PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…å®‰è£…åç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">rpm -qf /path/to/somefile           //æŸ¥è¯¢æŒ‡å®šçš„æ–‡ä»¶æ˜¯ç”±å“ªä¸ªrpmåŒ…å®‰è£…ç”Ÿæˆçš„</span><br><span class="line">rpm -qc PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…å®‰è£…çš„é…ç½®æ–‡ä»¶</span><br><span class="line">rpm -qd PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…å®‰è£…çš„å¸®åŠ©æ–‡ä»¶</span><br><span class="line">rpm -q --scripts PACKAGE_NAME       //æŸ¥è¯¢æŒ‡å®šåŒ…ä¸­åŒ…å«çš„è„šæœ¬</span><br><span class="line">rpm -q --whatprovides CAPABILITY    //æŸ¥è¯¢æŒ‡å®šçš„CAPABILITYï¼ˆèƒ½åŠ›ï¼‰ç”±å“ªä¸ªåŒ…æ‰€æä¾›</span><br><span class="line">    å¦‚ï¼šrpm -q --whatprovides /bin/cat</span><br><span class="line">rpm -q --whatrequires CAPABILITY    //æŸ¥è¯¢æŒ‡å®šçš„CAPABILITYè¢«å“ªä¸ªåŒ…æ‰€ä¾èµ–</span><br><span class="line">rpm -q --changelog COMMAND          //æŸ¥è¯¢COMMANDçš„åˆ¶ä½œæ—¥å¿—</span><br><span class="line">rpm -q --scripts PACKAGE_NAME       //æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…åŒ…å«çš„æ‰€æœ‰è„šæœ¬æ–‡ä»¶</span><br><span class="line">rpm -qR PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šçš„è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„CAPABILITY</span><br><span class="line">rpm -q --provides PACKAGE_NAME      //åˆ—å‡ºæŒ‡å®šè½¯ä»¶åŒ…æ‰€æä¾›çš„CAPABILITY</span><br><span class="line"></span><br><span class="line">rpm -qpi /PATH/TO/PACKAGE_FILE      //æŸ¥è¯¢æŒ‡å®šæœªå®‰è£…åŒ…çš„è¯´æ˜ä¿¡æ¯</span><br><span class="line">rpm -qpl /PATH/TO/PACKAGE_FILE      //æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…"><a href="#æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…" class="headerlink" title="æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…"></a>æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -q vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…"><a href="#æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…" class="headerlink" title="æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…"></a>æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qa |grep vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯"><a href="#æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯"></a>æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qi vsftpd</span></span><br><span class="line">Name        : vsftpd</span><br><span class="line">Version     : 3.0.2</span><br><span class="line">Release     : 22.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: 2019å¹´04æœˆ23æ—¥ æ˜ŸæœŸäºŒ 21æ—¶46åˆ†42ç§’</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 356220</span><br><span class="line">License     : GPLv2 with exceptions</span><br><span class="line">Signature   : RSA/SHA256, 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†48ç§’, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM  : vsftpd-3.0.2-22.el7.src.rpm</span><br><span class="line">Build Date  : 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶01åˆ†19ç§’</span><br><span class="line">Build Host  : x86-034.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor      : Red Hat, Inc.</span><br><span class="line">URL         : https://security.appspot.com/vsftpd.html</span><br><span class="line">Summary     : Very Secure Ftp Daemon</span><br><span class="line">Description :</span><br><span class="line">vsftpd is a Very Secure FTP daemon. It was written completely from</span><br><span class="line">scratch.</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶"><a href="#æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶"></a>æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line">/etc/vsftpd/vsftpd_conf_migrate.sh</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚çœç•¥ä»¥ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶"><a href="#æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶"></a>æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qc vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…"><a href="#æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…" class="headerlink" title="æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…"></a>æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /usr/sbin/vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶"><a href="#æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶"></a>æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qlp vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line">/etc/vsftpd/vsftpd_conf_migrate.sh</span><br><span class="line">/usr/lib/systemd/system-generators/vsftpd-generator</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚çœç•¥ä»¥ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯"><a href="#æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯"></a>æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qip vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">Name        : vsftpd</span><br><span class="line">Version     : 3.0.2</span><br><span class="line">Release     : 22.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: (not installed)</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 356220</span><br><span class="line">License     : GPLv2 with exceptions</span><br><span class="line">Signature   : RSA/SHA256, 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†48ç§’, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM  : vsftpd-3.0.2-22.el7.src.rpm</span><br><span class="line">Build Date  : 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶01åˆ†19ç§’</span><br><span class="line">Build Host  : x86-034.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor      : Red Hat, Inc.</span><br><span class="line">URL         : https://security.appspot.com/vsftpd.html</span><br><span class="line">Summary     : Very Secure Ftp Daemon</span><br><span class="line">Description :</span><br><span class="line">vsftpd is a Very Secure FTP daemon. It was written completely from</span><br><span class="line">scratch.</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…å‡çº§"><a href="#rpmåŒ…å‡çº§" class="headerlink" title="rpmåŒ…å‡çº§"></a>rpmåŒ…å‡çº§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh /PATH/TO/NEW_PACKAGE_FILE  //å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œåˆ™å®‰è£…</span><br><span class="line">rpm -Fvh /PATH/TO/NEW_PACKAGE_FILE  //å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œé€€å‡º</span><br><span class="line">    --oldpackageï¼šé™çº§</span><br><span class="line">    </span><br><span class="line">[root@zhoulijie Packages]# rpm -Uvh vsftpd-3.0.2-22.el7.x86_64.rpm </span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          ################################# [100%]</span><br><span class="line">	è½¯ä»¶åŒ… vsftpd-3.0.2-22.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…å¸è½½"><a href="#rpmåŒ…å¸è½½" class="headerlink" title="rpmåŒ…å¸è½½"></a>rpmåŒ…å¸è½½</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//è¯­æ³•ï¼šrpm -e PACKAGE_NAME</span><br><span class="line"></span><br><span class="line">//å…ˆæŸ¥è¯¢, ç„¶åå¸è½½ </span><br><span class="line">[root@zhoulijie Packages]# rpm -qa | grep vsftpd</span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br><span class="line">[root@zhoulijie Packages]# rpm -e vsftpd</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong>å¦‚æœå…¶ä»–åŒ…ä¾èµ–äºè¦å¸è½½çš„åŒ…ï¼Œè¿™ä¸ªè¢«ä¾èµ–çš„åŒ…æ˜¯æ— æ³•å¸è½½çš„ï¼Œé™¤éå¼ºåˆ¶å¸è½½ï¼Œå¼ºåˆ¶å¸è½½åä¾èµ–äºè¿™ä¸ªåŒ…çš„å…¶ä»–ç¨‹åºå°†æ— æ³•æ­£å¸¸å·¥ä½œ</p>
<h4 id="rpmåŒ…æ ¡éªŒ"><a href="#rpmåŒ…æ ¡éªŒ" class="headerlink" title="rpmåŒ…æ ¡éªŒ"></a>rpmåŒ…æ ¡éªŒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ— å†…å®¹è¾“å‡ºè¯´æ˜æ­¤åŒ…æœªè¢«ä¿®æ”¹è¿‡</span><br><span class="line">[root@localhost ~]# rpm -V vsftpd</span><br><span class="line">S.5....T.  c /etc/pam.d/vsftpd</span><br><span class="line">.......T.  c /etc/vsftpd/ftpusers</span><br><span class="line">S.5....T.  c /etc/vsftpd/vsftpd.conf</span><br><span class="line">.M.......    /var/ftp/pub</span><br><span class="line"></span><br><span class="line">S   //æ–‡ä»¶çš„å®¹é‡å¤§å°æ˜¯å¦è¢«æ”¹å˜</span><br><span class="line">M   //æ–‡ä»¶çš„ç±»å‹æˆ–è€…æ–‡ä»¶çš„å±æ€§æ˜¯å¦è¢«ä¿®æ”¹</span><br><span class="line">5   //MD5è¿™ä¸€ç§æŒ‡çº¹åŠ å¯†çš„å†…å®¹å·²ç»ä¸åŒ</span><br><span class="line">D   //è£…ç½®çš„ä¸»/æ¬¡ä»£ç å·²ç»æ”¹å˜</span><br><span class="line">L   //è·¯å¾„å·²ç»è¢«æ”¹å˜</span><br><span class="line">U   //æ–‡ä»¶çš„æ‰€å±ä¸»å·²è¢«ä¿®æ”¹</span><br><span class="line">G   //æ–‡ä»¶çš„æ‰€å±ç»„å·²è¢«ä¿®æ”¹</span><br><span class="line">T   //æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´å·²è¢«æ”¹å˜</span><br></pre></td></tr></table></figure>

<h4 id="rpmé‡å»ºæ•°æ®åº“"><a href="#rpmé‡å»ºæ•°æ®åº“" class="headerlink" title="rpmé‡å»ºæ•°æ®åº“"></a>rpmé‡å»ºæ•°æ®åº“</h4><p>æ•°æ®åº“ä¿¡æ¯åœ¨/var/lib/rpmç›®å½•ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm --rebuilddb     //é‡å»ºæ•°æ®åº“ï¼Œä¸€å®šä¼šé‡æ–°å»ºç«‹</span><br><span class="line">rpm --initdb        //åˆå§‹åŒ–æ•°æ®åº“ï¼Œæ²¡æœ‰æ‰å»ºç«‹ï¼Œæœ‰å°±ä¸ç”¨å»ºç«‹</span><br></pre></td></tr></table></figure>

<h4 id="æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§"><a href="#æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§" class="headerlink" title="æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§"></a>æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">åŠ å¯†ç±»å‹ï¼š</span><br><span class="line">    å¯¹ç§°åŠ å¯†    //åŠ å¯†è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥</span><br><span class="line">    å…¬é’¥åŠ å¯†    //ä¸€å¯¹å¯†é’¥ï¼Œå…¬é’¥å’Œç§é’¥ã€‚å…¬é’¥éšå«äºç§é’¥ä¸­ï¼Œå¯ä»¥æå–å‡ºæ¥å¹¶å…¬å¸ƒå‡ºå»</span><br><span class="line">    å•å‘åŠ å¯†    //åªèƒ½åŠ å¯†ä¸èƒ½è§£å¯†</span><br><span class="line">    </span><br><span class="line">/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release     //çº¢å¸½å®˜æ–¹å…¬é’¥</span><br><span class="line"></span><br><span class="line">rpm -K PACKAGE_FILE     //æ£€æŸ¥æŒ‡å®šåŒ…æœ‰æ— å¯†é’¥ä¿¡æ¯</span><br><span class="line">    dsaï¼Œgpg            //éªŒè¯æ¥æºåˆæ³•æ€§ï¼Œä¹Ÿå³éªŒè¯ç­¾åã€‚å¯ä»¥ä½¿ç”¨--nosignatrueç•¥è¿‡æ­¤é¡¹</span><br><span class="line">    sha1ï¼Œmd5           //éªŒè¯è½¯ä»¶åŒ…å®Œæ•´æ€§ã€‚å¯ä»¥ä½¿ç”¨--nodigestç•¥è¿‡æ­¤é¡¹</span><br><span class="line">rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release    //å¯¼å…¥å¯†é’¥æ–‡ä»¶</span><br><span class="line">    CentOS 7å‘è¡Œç‰ˆå…‰ç›˜æä¾›çš„å¯†é’¥æ–‡ä»¶    //RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>å¦‚ä½•æŸ¥è¯¢ util-linux è½¯ä»¶åŒ…å®‰è£…äº†å“ªäº›æ–‡ä»¶ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql util-linux</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æŸ¥è¯¢ mkdir å‘½ä»¤æ˜¯ç”±å“ªä¸ª RPM è½¯ä»¶åŒ…å®‰è£…çš„ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /usr/bin/mkdir</span></span><br></pre></td></tr></table></figure>

<p>å‡çº§è½¯ä»¶åŒ…æ—¶ï¼Œ-Fã€-Ué€‰é¡¹æœ‰ä½•åŒºåˆ«ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œåˆ™å®‰è£…</span><br><span class="line">rpm -Fvh å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œé€€å‡º</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -q vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…æ‰€æœ‰çš„æ–‡ä»¶å­˜æ”¾ç›®å½•?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…çš„é…ç½®æ–‡ä»¶?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qc vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå®‰è£…vsftpdæœåŠ¡?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå¼ºåˆ¶å®‰è£…ä¾èµ–åŒ…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --force vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå¸è½½vsftpdè½¯ä»¶åŒ…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -e vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å°†æœ¬ç« å­¦ä¹ åˆ°çš„rpmå‘½ä»¤æ•´ç†æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå†™æ˜æ¯ä¸ªå‘½ä»¤çš„ä½œç”¨</p>
<table>
<thead>
<tr>
<th align="center">å®‰è£…è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</th>
<th align="center">rpm -ivh RPMå®‰è£…åŒ…</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å‡çº§è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -Uvh  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">å¸è½½è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -e  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">æŸ¥è¯¢è½¯ä»¶æè¿°ä¿¡æ¯çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qpi  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">åˆ—å‡ºè½¯ä»¶æ–‡ä»¶ä¿¡æ¯çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qpl  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªRPMçš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qf  RPMå®‰è£…åŒ…</td>
</tr>
</tbody></table>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/" data-id="ck6abn9ty002esgu6wv318g68"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-8.linux--shellè„šæœ¬åŸºç¡€" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/8.linux--shellè„šæœ¬åŸºç¡€/"
    >shellè„šæœ¬åŸºç¡€</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/8.linux--shellè„šæœ¬åŸºç¡€/" class="article-date">
  <time datetime="2019-08-29T15:44:18.563Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="shellè„šæœ¬åŸºç¡€"><a href="#shellè„šæœ¬åŸºç¡€" class="headerlink" title="shellè„šæœ¬åŸºç¡€"></a>shellè„šæœ¬åŸºç¡€</h1><h2 id="å˜é‡è¯¦è§£"><a href="#å˜é‡è¯¦è§£" class="headerlink" title="å˜é‡è¯¦è§£"></a>å˜é‡è¯¦è§£</h2><h3 id="ä»€ä¹ˆæ˜¯å˜é‡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡"></a>ä»€ä¹ˆæ˜¯å˜é‡</h3><p>å˜é‡å³æ˜¯å¯ä»¥å˜åŒ–çš„é‡</p>
<h3 id="å˜é‡çš„ä½œç”¨"><a href="#å˜é‡çš„ä½œç”¨" class="headerlink" title="å˜é‡çš„ä½œç”¨"></a>å˜é‡çš„ä½œç”¨</h3><ul>
<li>ä¿å­˜è¡¨è¾¾å¼è¿ç®—çš„ç»“æœè‡³å†…å­˜ï¼Œæ–¹ä¾¿å¤ç”¨æˆ–æ›´æ”¹</li>
<li>è‹¥æ— å˜é‡è€Œæ— éœ€å¤ç”¨è¡¨è¾¾å¼è¿ç®—çš„ç»“æœåªèƒ½é‡æ–°è¿ç®—ï¼Œè€—æ—¶è¾ƒé•¿</li>
<li>å¯ä»¥æŠŠå˜é‡ç†è§£ä¸ºä¸€ä¸ªå­˜å‚¨ä¿¡æ¯çš„å®¹å™¨</li>
</ul>
<h3 id="å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹"><a href="#å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹" class="headerlink" title="å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹"></a>å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹</h3><ul>
<li><p>å˜é‡ååº”è¯¥åšåˆ°è§åçŸ¥ä¹‰</p>
</li>
<li><p>å˜é‡ååŒºåˆ†å¤§å°å†™</p>
</li>
<li><p>å˜é‡åä¸­æœ‰å¤šä¸ªå•è¯æ—¶æœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤º</p>
<ul>
<li>å•è¯é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå®˜æ–¹æ¨èï¼‰</li>
<li>é¦–å•è¯å°å†™ï¼Œåé¢å•è¯çš„é¦–å­—æ¯å¤§å†™</li>
</ul>
</li>
<li><p>å˜é‡ååªèƒ½æ˜¯ç”±ä¸‹åˆ’çº¿ã€æ•°å­—ã€å­—æ¯ç»„æˆï¼Œä¸èƒ½æ˜¯ç©ºæ ¼æˆ–è€…ç‰¹æ®Šå­—ç¬¦ï¼ˆ#ï¼Ÿ&lt;.,$!&amp;*^~ï¼‰</p>
</li>
<li><p>ä¸èƒ½ä»¥ä¸­æ–‡åšå˜é‡å</p>
</li>
<li><p>ä¸èƒ½æ˜¯ä¿ç•™å­—</p>
<ul>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">break</span>  <span class="built_in">continue</span>  <span class="keyword">elif</span>  <span class="keyword">else</span>  <span class="keyword">for</span>  global  <span class="keyword">if</span>  <span class="keyword">in</span>  is   not  or   <span class="keyword">while</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="å˜é‡ç±»å‹"><a href="#å˜é‡ç±»å‹" class="headerlink" title="å˜é‡ç±»å‹"></a>å˜é‡ç±»å‹</h3><ul>
<li>å­—ç¬¦å‹</li>
<li>æ•°å€¼å‹<ul>
<li>æ•´æ•°</li>
<li>æµ®ç‚¹æ•°</li>
</ul>
</li>
<li>å¸ƒå°”å‹</li>
</ul>
<h3 id="å˜é‡æ“ä½œ"><a href="#å˜é‡æ“ä½œ" class="headerlink" title="å˜é‡æ“ä½œ"></a>å˜é‡æ“ä½œ</h3><ul>
<li>è®¾ç½®å˜é‡</li>
<li>å¼•ç”¨å˜é‡</li>
<li>æ’¤é”€å˜é‡</li>
</ul>
<blockquote>
<p>ç®€è¿°ä¸‰ç§å¼•å·çš„ç”¨æ³•</p>
<p>`åå¼•å· ç”¨äºå‘½ä»¤æ›¿æ¢ åå¼•å·é‡Œé¢çš„å‘½ä»¤å–å‡ºæ¥æ˜¯å®ƒä»¬çš„å€¼</p>
<p> â€˜ å•å¼•å· å–æœ¬èº«ï¼Œä¸å®Œæˆå‘½ä»¤æ›¿æ¢</p>
<p>â€œ åŒå¼•å· å®ç°å‘½ä»¤æ›¿æ¢ï¼Œæ”¯æŒå˜é‡</p>
</blockquote>
<blockquote>
<p>åˆ‡è®°å•å¼•å·å–å‡ºæ¥æ˜¯æœ¬èº«ï¼Œ</p>
<p>åå¼•å·å’ŒåŒå¼•å·å–å‡ºæ¥æ˜¯ä»–ä»¬çš„å€¼</p>
</blockquote>
<h3 id="bashå˜é‡ç±»å‹"><a href="#bashå˜é‡ç±»å‹" class="headerlink" title="bashå˜é‡ç±»å‹"></a>bashå˜é‡ç±»å‹</h3><ul>
<li>ç¯å¢ƒå˜é‡</li>
<li>æœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰</li>
<li>ä½ç½®å˜é‡</li>
<li>ç‰¹æ®Šå˜é‡ï¼ˆä¸ºbashå†…ç½®ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜æŸäº›ç‰¹æ®Šæ•°æ®çš„å˜é‡ï¼Œä¹Ÿç§°ä¹‹ä¸ºç³»ç»Ÿå˜é‡ï¼‰</li>
</ul>
<blockquote>
<p>ä¸‹é¢ä»‹ç»ä¸¤ç§å–é™¤å˜é‡ä»¥åŠä¸å–å‡ºå˜é‡çš„ç”¨æ³•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨æ³•ä¸€ï¼šå–å‡ºå˜é‡çš„å€¼</span></span><br><span class="line">[root@140 ~]<span class="comment"># a=5</span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; DOF</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; DOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line">5</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ³•äºŒï¼šä¸å–é™¤å˜é‡çš„å€¼ </span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; 'EOF'</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; EOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line"><span class="variable">$a</span></span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></table></figure>

<h4 id="æœ¬åœ°å˜é‡"><a href="#æœ¬åœ°å˜é‡" class="headerlink" title="æœ¬åœ°å˜é‡"></a>æœ¬åœ°å˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬åœ°å˜é‡ï¼Œä½œä¸ºå½“å‰shellçš„è¿›ç¨‹ï¼Œå¯¹å½“å‰shellä»¥å¤–çš„å…¶ä»–shellè¿›ç¨‹ï¼ŒåŒ…æ‹¬å½“å‰shellçš„çˆ¶shellï¼Œå­shellè¿›ç¨‹å‡æ— æ•ˆ</span></span><br><span class="line">VAR_NAME=VALUE(å€¼)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å±€éƒ¨å˜é‡ï¼Œä½œä¸ºå½“å‰ä»£ç æ®µï¼Œå¤šç”¨äºå‡½æ•°</span></span><br><span class="line"><span class="built_in">local</span>(å±€éƒ¨) VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½œç”¨åŸŸä¸ºå½“å‰shellè¿›ç¨‹åŠå…¶å­è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">export</span> VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h4 id="ä½ç½®å˜é‡"><a href="#ä½ç½®å˜é‡" class="headerlink" title="ä½ç½®å˜é‡"></a>ä½ç½®å˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$1</span>ï¼Œ<span class="variable">$2</span>ï¼Œ<span class="variable">$3</span>ï¼Œ....       //ç”¨æ¥å¼•ç”¨è„šæœ¬çš„å‚æ•°</span><br><span class="line">    <span class="built_in">shift</span> [num]         //ä½ç½®å˜é‡ä½¿ç”¨å®Œä»¥åé€€å‡ºï¼Œåé¢çš„å‚æ•°å‘å‰æ¨è¿›</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat haah.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$3</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line">[root@140 opt]<span class="comment"># bash haah.sh 1 2 3</span></span><br><span class="line">1</span><br><span class="line">------------</span><br><span class="line">2</span><br><span class="line">------------</span><br><span class="line">3</span><br><span class="line">------------</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]# cat huhu.sh </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in $*;do</span><br><span class="line">        echo $1</span><br><span class="line">        echo -----------</span><br><span class="line">        shift 2 </span><br><span class="line">done</span><br><span class="line">[root@140 opt]# bash huhu.sh 1 2 3 4 5 6</span><br><span class="line">1</span><br><span class="line">-----------</span><br><span class="line">3</span><br><span class="line">-----------</span><br><span class="line">5</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br></pre></td></tr></table></figure>

<h4 id="ç‰¹æ®Šå˜é‡"><a href="#ç‰¹æ®Šå˜é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡"></a>ç‰¹æ®Šå˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$#</span>      //æ˜¯ä¼ ç»™è„šæœ¬çš„å‚æ•°ä¸ªæ•°</span><br><span class="line"><span class="variable">$0</span>      //æ˜¯è„šæœ¬æœ¬èº«çš„åå­—</span><br><span class="line">$!      //æ˜¯shellæœ€åè¿è¡Œçš„åå°Processçš„PID</span><br><span class="line"><span class="variable">$@</span>      //æ˜¯ä¼ ç»™è„šæœ¬çš„æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨</span><br><span class="line">$*      //æ˜¯ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ï¼Œä¸ä½ç½®å˜é‡ä¸åŒï¼Œå‚æ•°å¯è¶…è¿‡9ä¸ª</span><br><span class="line">$$      //æ˜¯è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·</span><br><span class="line">$?      //æ˜¯æ˜¾ç¤ºä¸Šæ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œ0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–è¡¨ç¤ºæœ‰é”™è¯¯</span><br></pre></td></tr></table></figure>

<h4 id="bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡"><a href="#bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡" class="headerlink" title="bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡"></a>bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡</h4><ul>
<li>PATH</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure>

<ul>
<li>SHELL</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>UID</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $UID</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTSIZE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure>

<ul>
<li>HOME</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HOME</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>PWD</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PWD</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTFILE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTFILE</span></span><br><span class="line">/root/.bash_history</span><br></pre></td></tr></table></figure>

<ul>
<li>PS1</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure>

<h4 id="åªè¯»å˜é‡"><a href="#åªè¯»å˜é‡" class="headerlink" title="åªè¯»å˜é‡"></a>åªè¯»å˜é‡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸èƒ½ä¿®æ”¹å€¼ï¼Œä¸èƒ½é”€æ¯ï¼Œåªèƒ½ç­‰shellè¿›ç¨‹ç»ˆæ­¢æ—¶éšä¹‹æ¶ˆäº¡</span></span><br><span class="line">readonly(åªè¯») VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h2 id="è„šæœ¬åŸºç¡€"><a href="#è„šæœ¬åŸºç¡€" class="headerlink" title="è„šæœ¬åŸºç¡€"></a>è„šæœ¬åŸºç¡€</h2><h3 id="ä»€ä¹ˆæ˜¯è„šæœ¬"><a href="#ä»€ä¹ˆæ˜¯è„šæœ¬" class="headerlink" title="ä»€ä¹ˆæ˜¯è„šæœ¬"></a>ä»€ä¹ˆæ˜¯è„šæœ¬</h3><p>â€‹    è„šæœ¬(script)æ˜¯ä½¿ç”¨ä¸€ç§ç‰¹å®šçš„æè¿°æ€§è¯­è¨€ï¼Œä¾æ®ä¸€å®šçš„æ ¼å¼ç¼–å†™çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåˆç§°ä½œå®æˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚è„šæœ¬é€šå¸¸å¯ä»¥ç”±åº”ç”¨ç¨‹åºä¸´æ—¶è°ƒç”¨å¹¶æ‰§è¡Œã€‚</p>
<p>â€‹    è„šæœ¬ç®€å•åœ°è¯´å°±æ˜¯ä¸€æ¡æ¡çš„æ–‡å­—å‘½ä»¤ï¼Œè¿™äº›æ–‡å­—å‘½ä»¤æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„(å¦‚å¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€æŸ¥çœ‹ã€ç¼–è¾‘)ï¼Œè„šæœ¬ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œæ˜¯ç”±ç³»ç»Ÿçš„ä¸€ä¸ªè§£é‡Šå™¨ï¼Œå°†å…¶ä¸€æ¡æ¡çš„ç¿»è¯‘æˆæœºå™¨å¯è¯†åˆ«çš„æŒ‡ä»¤ï¼Œå¹¶æŒ‰ç¨‹åºé¡ºåºæ‰§è¡Œã€‚å› ä¸ºè„šæœ¬åœ¨æ‰§è¡Œæ—¶å¤šäº†ä¸€é“ç¿»è¯‘çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å®ƒæ¯”äºŒè¿›åˆ¶ç¨‹åºæ‰§è¡Œæ•ˆç‡è¦ç¨ä½ä¸€äº›ã€‚</p>
<h3 id="ç¨‹åºåå›å€¼"><a href="#ç¨‹åºåå›å€¼" class="headerlink" title="ç¨‹åºåå›å€¼"></a>ç¨‹åºåå›å€¼</h3><p>ç¨‹åºæ‰§è¡Œä»¥åæœ‰ä¸¤ç±»è¿”å›å€¼ï¼š</p>
<ul>
<li>ç¨‹åºæ‰§è¡Œçš„ç»“æœ</li>
<li>ç¨‹åºçŠ¶æ€è¿”å›ä»£ç ï¼ˆ0-255ï¼‰<ul>
<li>0ï¼šæ­£ç¡®æ‰§è¡Œ</li>
<li>1-255ï¼šé”™è¯¯æ‰§è¡Œï¼Œ1ã€2ã€127ç³»ç»Ÿé¢„ç•™ï¼Œæœ‰ç‰¹æ®Šæ„ä¹‰</li>
</ul>
</li>
</ul>
<h3 id="è„šæœ¬æµ‹è¯•"><a href="#è„šæœ¬æµ‹è¯•" class="headerlink" title="è„šæœ¬æµ‹è¯•"></a>è„šæœ¬æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line">bash -n scriptname</span><br><span class="line"></span><br><span class="line"><span class="comment"># å•æ­¥æ‰§è¡Œï¼Œæ£€æŸ¥è„šæœ¬é”™åœ¨å“ªé‡Œï¼ˆæœ€å¸¸ç”¨ï¼‰</span></span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¾‹å¦‚æ­¤å¤„å†™ä¸ªé”™è¯¯çš„è„šæœ¬</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@140 opt]<span class="comment"># bash -x huhu.sh </span></span><br><span class="line">huhu.sh:è¡Œ3: æœªé¢„æœŸçš„ç¬¦å· `<span class="keyword">do</span><span class="string">' é™„è¿‘æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line"><span class="string">huhu.sh:è¡Œ3: `frr i in $*;do'</span></span><br></pre></td></tr></table></figure>

<h3 id="å†™è„šæœ¬æ³¨æ„äº‹é¡¹"><a href="#å†™è„šæœ¬æ³¨æ„äº‹é¡¹" class="headerlink" title="å†™è„šæœ¬æ³¨æ„äº‹é¡¹"></a>å†™è„šæœ¬æ³¨æ„äº‹é¡¹</h3><ul>
<li>ç¦æ­¢å°†ä¸ºæˆåŠŸæ‰§è¡Œçš„ä»£ç ç›´æ¥å†™å…¥è„šæœ¬</li>
<li>è„šæœ¬ä¸­çš„å‘½ä»¤ä¸€å®šè¦ç”¨ç»å¯¹è·¯å¾„</li>
</ul>
<h3 id="shellç®—æœ¯è¿ç®—"><a href="#shellç®—æœ¯è¿ç®—" class="headerlink" title="shellç®—æœ¯è¿ç®—"></a>shellç®—æœ¯è¿ç®—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜é‡</span></span><br><span class="line">A=30</span><br><span class="line">B=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># AåŠ ä¸ŠB</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aå‡å»B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aä¹˜ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aé™¤ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc</span><br></pre></td></tr></table></figure>

<h3 id="å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»"><a href="#å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»" class="headerlink" title="å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»"></a>å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€»è¾‘ä¸ï¼š&amp;&amp;</span></span><br><span class="line">å«ä¹‰ï¼šå½“å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œå†æ¬¡æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br><span class="line"><span class="comment"># é€»è¾‘éï¼š||</span></span><br><span class="line">å«ä¹‰ï¼šå½“å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œå†æ¬¡æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><h4 id="1-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"><a href="#1-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š" class="headerlink" title="1.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"></a>1.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</h4><ul>
<li>è®¾å®šå˜é‡Façš„å€¼ä¸º<code>/etc/passwd</code></li>
<li>è®¾å®šå˜é‡lineçš„ä¸º<code>$(cat $Fa | wc -l)</code></li>
<li>ä¾æ¬¡å‘<code>/etc/passwd</code>ä¸­çš„æ¯ä¸ªç”¨æˆ·é—®å¥½ï¼Œå¹¶ä¸”è¯´å‡ºå¯¹æ–¹çš„IDæ˜¯ä»€ä¹ˆã€‚ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š<ul>
<li>Hello,rootï¼Œyour UID is 0.</li>
</ul>
</li>
<li>ç»Ÿè®¡å½“å‰ç³»ç»Ÿä¸€ä¸ªæœ‰å¤šå°‘ä¸ªç”¨æˆ·å¹¶è¾“å‡º</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line">line=$(cat <span class="variable">$Fa</span> | wc -l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å‡ºç”¨æˆ·åä»¥åŠUID</span></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$line</span>;i++));<span class="keyword">do</span></span><br><span class="line">        username=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">        user_uid=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æ¯ä¸ªç”¨æˆ·é—®å¥½</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"hello <span class="variable">$username</span> , your uid is <span class="variable">$user_uid</span> ."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»Ÿè®¡ç”¨æˆ·</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Cuerrent system has <span class="variable">$(cat $Fa | wc -l)</span> user."</span></span><br></pre></td></tr></table></figure>

<h4 id="2-å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†"><a href="#2-å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†" class="headerlink" title="2.å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†"></a>2.å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat suanfa.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å˜é‡</span></span><br><span class="line">A=<span class="variable">$1</span></span><br><span class="line">B=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AåŠ ä¸ŠB</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>+<span class="variable">$B</span>=$[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aå‡å»B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>-<span class="variable">$B</span>=$[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aä¹˜ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>*<span class="variable">$B</span>=$[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">chuyi=$(<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aé™¤ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>/<span class="variable">$B</span>=<span class="variable">$chuyi</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash suanfa.sh 50 20</span></span><br><span class="line">50+20=70</span><br><span class="line">50-20=30</span><br><span class="line">50*20=1000</span><br><span class="line">50/20=2.50</span><br></pre></td></tr></table></figure>

<h4 id="3-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"><a href="#3-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š" class="headerlink" title="3.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"></a>3.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</h4><ul>
<li>åˆ›å»ºç›®å½•/tmp/scripts</li>
<li>åˆ‡æ¢è‡³æ­¤ç›®å½•ä¸­</li>
<li>å¤åˆ¶/etc/pam.dç›®å½•è‡³å½“å‰ç›®å½•ï¼Œå¹¶é‡å‘½åä¸ºtest</li>
<li>å°†å½“å‰ç›®å½•çš„teståŠå…¶é‡Œé¢çš„æ–‡ä»¶å’Œå­ç›®å½•çš„å±ä¸»æ”¹ä¸ºredhat</li>
<li>å°†teståŠå…¶å­ç›®å½•ä¸­çš„æ–‡ä»¶çš„å…¶å®ƒç”¨æˆ·çš„æƒé™æ”¹ä¸ºæ²¡æœ‰ä»»ä½•æƒé™</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat mulu.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å˜é‡</span></span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">cp=/usr/bin/cp</span><br><span class="line">chown=/usr/bin/chown</span><br><span class="line">chmod=/usr/bin/chmod</span><br><span class="line">useradd=/usr/bin/useradd</span><br><span class="line"><span class="comment"># ä¸€æ¡å‘½ä»¤è§£å†³</span></span><br><span class="line">mkdir /tmp/scripts &amp;&amp; <span class="built_in">cd</span> /tmp/scripts &amp;&amp; cp -rf /etc/pam.d ./<span class="built_in">test</span> &amp;&amp; chown -Rf redhat: <span class="built_in">test</span> || useradd redhat &amp;&amp; chmod -Rf o-rwx <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash -x mulu.sh </span></span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ cp=/usr/bin/cp</span><br><span class="line">+ chown=/usr/bin/chown</span><br><span class="line">+ chmod=/usr/bin/chmod</span><br><span class="line">+ useradd=/usr/bin/useradd</span><br><span class="line">+ mkdir /tmp/scripts</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/scripts</span><br><span class="line">+ cp -rf /etc/pam.d ./<span class="built_in">test</span></span><br><span class="line">+ chown -Rf redhat: <span class="built_in">test</span></span><br><span class="line">+ chmod -Rf o-rwx <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>4.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œååˆ›å»ºç›®å½•/tmp/lstest</li>
<li>åˆ‡æ¢å·¥ä½œç›®å½•è‡³/tmp/lstest</li>
<li>åˆ›å»ºç›®å½•a1dï¼Œb56eï¼Œ6test</li>
<li>åˆ›å»ºç©ºæ–‡ä»¶xyï¼Œx2yï¼Œ732</li>
<li>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹ä»¥aï¼Œxæˆ–è€…6å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•</li>
<li>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹ä»¥å­—æ¯å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ªä»»æ„æ•°å­—ï¼Œè€Œåè·Ÿä»»æ„é•¿åº¦å­—ç¬¦çš„æ–‡ä»¶æˆ–ç›®å½•</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat shijian.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">date=/usr/bin/date</span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">touch=/usr/bin/touch</span><br><span class="line">ls=/usr/bin/ls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date &amp;&amp; mkdir /tmp/lstest &amp;&amp; <span class="built_in">cd</span> /tmp/lstest &amp;&amp; mkdir a1d b56e 6test &amp;&amp; touch xy x2y 732 &amp;&amp; ls a* x* 6* &amp;&amp; ls [a-z][0-9]*</span><br><span class="line">[root@140 opt]<span class="comment"># bash -x shijian.sh </span></span><br><span class="line">+ date=/usr/bin/date</span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ touch=/usr/bin/touch</span><br><span class="line">+ ls=/usr/bin/ls</span><br><span class="line">+ date</span><br><span class="line">2019å¹´ 05æœˆ 21æ—¥ æ˜ŸæœŸäºŒ 22:11:10 CST</span><br><span class="line">+ mkdir /tmp/lstest</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/lstest</span><br><span class="line">+ mkdir a1d b56e 6test</span><br><span class="line">+ touch xy x2y 732</span><br><span class="line">+ ls a1d x2y xy 6test</span><br><span class="line">x2y  xy</span><br><span class="line"></span><br><span class="line">6test:</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line">+ ls a1d b56e x2y</span><br><span class="line">x2y</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line"></span><br><span class="line">b56e:</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.linux--shellè„šæœ¬åŸºç¡€/" data-id="ck6abn9tx002bsgu6vn8l2x9m"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-7.è°ˆPythonå˜é‡å’Œæ•°æ®ç±»å‹" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/7.è°ˆPythonå˜é‡å’Œæ•°æ®ç±»å‹/"
    >è°ˆPythonå˜é‡å’Œæ•°æ®ç±»å‹</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/7.è°ˆPythonå˜é‡å’Œæ•°æ®ç±»å‹/" class="article-date">
  <time datetime="2019-08-29T15:44:18.561Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>Pythonçš„å˜é‡ç±»å‹éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºï¼š</p>
<ul>
<li>numbersï¼šåˆ†ä¸ºæ•´æ•°intå’Œæµ®ç‚¹æ•°float</li>
</ul>
<p>æ•´æ•°ï¼šæ¯”å¦‚1ï¼Œ200ï¼Œ400ï¼Œ-1000ï¼Œ0ï¼Œé€šå¸¸ä¹Ÿæœ‰ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºçš„ï¼Œæ¯”å¦‚0xff00ç­‰</p>
<p>æµ®ç‚¹æ•°ï¼šæ¯”å¦‚1.11ï¼Œ12.13ï¼Œ-10.02ï¼Œä¹Ÿæœ‰æ¯”è¾ƒå¤§çš„æµ®ç‚¹æ•°ï¼Œæ¯”å¦‚2.12x10^9</p>
<ul>
<li>stringï¼šå•å¼•å·ï¼ŒåŒå¼•å·ï¼Œä¸‰å¼•å·</li>
</ul>
<p>pythonçš„å­—ç¬¦ä¸²ä»¥<code>&#39;&#39;</code>æˆ–è€…<code>â€â€œ</code>æˆ–è€…<code>&quot;&quot;&quot;</code>æ‹¬èµ·æ¥çš„éšæ„æ–‡æœ¬éƒ½æ˜¯å­—ç¬¦ä¸²</p>
<p>ä¾‹å¦‚ï¼š</p>
<p><code>&#39;abcd&#39;</code>    <code>&quot;hello world&quot;</code>    <code>&quot;&quot;&quot;This is an apple.â€&quot;&quot;</code></p>
<blockquote>
<p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šè‹¥å­—ç¬¦ä¸²é‡Œé¢åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥ç”¨è½¬ä¹‰ç¬¦<code>\</code>è¿›è¡Œè½¬ä¹‰</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰</span></span><br><span class="line"><span class="comment"># hahaha = 'xiao ming said "I'am full"'</span></span><br><span class="line">hahaha = <span class="string">'xiao ming said \"I\'am full\"'</span></span><br><span class="line">print(hahaha)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiao ming said <span class="string">"I'am full"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯´åˆ°å­—ç¬¦ä¸²ï¼Œè¿™é‡Œéœ€è¦è®²ä¸€ä¸‹pythonçš„å­—ç¬¦ä¸²formatæ ¼å¼ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç§</p>
<p>1ï¼‰%æ“ä½œç¬¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># %æ“ä½œç¬¦</span></span><br><span class="line">&gt; name = <span class="string">"natasha"</span></span><br><span class="line">&gt; age = <span class="number">18</span></span><br><span class="line">&gt; print(<span class="string">"your name is %s,age is %d."</span>%(name,age))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; your name <span class="keyword">is</span> natasha,age <span class="keyword">is</span> <span class="number">18.</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>2) format</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment"># format</span></span><br><span class="line">&gt; name = <span class="string">'harry'</span></span><br><span class="line">&gt; age = <span class="number">18</span></span><br><span class="line">&gt; print(<span class="string">"your name is &#123;0&#125;,age is &#123;1&#125;."</span>.format(name,age))</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; your name <span class="keyword">is</span> harry,age <span class="keyword">is</span> <span class="number">18.</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>å¸ƒå°”å€¼</li>
</ul>
<p>pythonä¸­çš„å¸ƒå°”å€¼ï¼Œåªæœ‰Trueå’ŒFalseä¸¤ç§ï¼ˆåˆ‡è®°ä¸€å®šè¦æ³¨æ„å¤§å°å†™ï¼‰</p>
<p>å¸ƒå°”å€¼çš„è¿ç®—å¯ä»¥ç”¨<code>and</code>ï¼Œ<code>or</code>å’Œ<code>not</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a <span class="keyword">and</span> b <span class="comment"># è¡¨ç¤ºaå’Œbéƒ½ä¸ºTrueï¼Œæœ€åçš„è¿ç®—ç»“æœæ‰æ˜¯Trueï¼Œå¦åˆ™ä¸ºFalse</span></span><br><span class="line">a <span class="keyword">or</span> b <span class="comment"># è¡¨ç¤ºaæˆ–è€…bå…¶ä¸­æœ‰ä¸€ä¸ªä¸ºTrue,æœ€åçš„è¿ç®—ç»“æœæ‰æ˜¯Trueï¼Œå¦åˆ™ä¸ºFalse</span></span><br><span class="line"><span class="keyword">not</span> <span class="comment"># æ˜¯éè¿ç®—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ç›®çš„è¿ç®—ï¼Œå°±æ˜¯æŠŠTrueå˜æˆFalseï¼ŒæŠŠFalseå˜æˆTrue</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç©ºå€¼</li>
</ul>
<p>pythonçš„å€¼æ˜¯ç”¨Noneè¡¨ç¤ºï¼ŒNoneä¸æ˜¯0ï¼Œä¹Ÿä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯Falseï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨pythonçš„å†…ç½®å‡½æ•°typeæ¥çœ‹ä¸€ä¸‹ï¼Œç„¶ååˆ†åˆ«ç”¨0ï¼Œç©ºå­—ç¬¦ï¼ŒFalseæ¥æ¯”è¾ƒä¸€ä¸‹ï¼Œçœ‹çœ‹å®ƒåˆ°åº•æ˜¯ä¸ºä½•ç‰©</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># type</span></span><br><span class="line">print(type(<span class="literal">None</span>))</span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="number">0</span>)</span><br><span class="line"><span class="comment"># ç©ºå­—ç¬¦</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="string">''</span>)</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line">print(<span class="literal">None</span> == <span class="literal">False</span>)</span><br><span class="line">print(<span class="literal">None</span> == <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">NoneType</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br><span class="line"><span class="class"><span class="title">True</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Pythonçš„å˜é‡å‘½å"><a href="#Pythonçš„å˜é‡å‘½å" class="headerlink" title="Pythonçš„å˜é‡å‘½å"></a>Pythonçš„å˜é‡å‘½å</h2><p>pythonçš„å˜é‡åå¿…é¡»æ˜¯å¤§å°å†™çš„è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿<code>_</code>çš„ç»„åˆï¼Œåˆ‡è®°ä¸èƒ½ä½¿ç”¨æ•°å­—å¼€å¤´</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜é‡å‘½å</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">print(a)</span><br><span class="line">n_1 = <span class="number">100</span></span><br><span class="line">print(n_1)</span><br><span class="line">a = <span class="string">'sdfdsff'</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line">sdfdsff</span><br></pre></td></tr></table></figure>

<blockquote>
<p>pythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œå®ƒä¸åƒjavaæ˜¯å¼ºåˆ¶ç±»å‹è¯­è¨€ï¼Œæ˜¯é™æ€è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™å°±è¦æŒ‡å®šç±»å‹ï¼Œè€Œpythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ˜¯è¾¹ç¼–è¯‘è¾¹æ‰§è¡Œï¼Œè¿™æ ·æ­£å¦‚è›‡çš„å«ä¹‰æ‰€åœ¨â€“çµæ´»ã€‚</p>
</blockquote>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/7.è°ˆPythonå˜é‡å’Œæ•°æ®ç±»å‹/" data-id="ck6abn9s70007sgu6jys1nrjo"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/æ—…è¡Œ/">æ—…è¡Œ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com">æ‘„å½±</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>