<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

<link rel="alternate" href="/atom.xml" title="Li Jie's blog" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/chineselijie"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover3.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Li Jie&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-30.linux--rsync" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/30.linux--rsync/"
    >rsync</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/30.linux--rsync/" class="article-date">
  <time datetime="2020-03-12T11:38:49.843Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿ç»´/">linuxè¿ç»´</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h2><p>rsyncæ˜¯linuxç³»ç»Ÿä¸‹çš„æ•°æ®<a href="https://baike.baidu.com/item/é•œåƒ" target="_blank" rel="noopener">é•œåƒ</a><a href="https://baike.baidu.com/item/å¤‡ä»½" target="_blank" rel="noopener">å¤‡ä»½</a>å·¥å…·ã€‚ä½¿ç”¨å¿«é€Ÿå¢é‡å¤‡ä»½å·¥å…·Remote Syncå¯ä»¥è¿œç¨‹åŒæ­¥ï¼Œæ”¯æŒæœ¬åœ°å¤åˆ¶ï¼Œæˆ–è€…ä¸å…¶ä»–SSHã€rsyncä¸»æœºåŒæ­¥ã€‚</p>
<h2 id="rsyncç‰¹æ€§"><a href="#rsyncç‰¹æ€§" class="headerlink" title="rsyncç‰¹æ€§"></a>rsyncç‰¹æ€§</h2><p>å®ƒçš„ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å¯ä»¥<a href="https://baike.baidu.com/item/é•œåƒ" target="_blank" rel="noopener">é•œåƒ</a>ä¿å­˜æ•´ä¸ªç›®å½•æ ‘å’Œæ–‡ä»¶ç³»ç»Ÿã€‚</p>
</li>
<li><p>å¯ä»¥å¾ˆå®¹æ˜“åšåˆ°ä¿æŒåŸæ¥æ–‡ä»¶çš„æƒé™ã€æ—¶é—´ã€è½¯ç¡¬é“¾æ¥ç­‰ç­‰ã€‚</p>
</li>
<li><p>æ— é¡»ç‰¹æ®Šæƒé™å³å¯å®‰è£…ã€‚</p>
</li>
<li><p>å¿«é€Ÿï¼šç¬¬ä¸€æ¬¡åŒæ­¥æ—¶ rsync ä¼šå¤åˆ¶å…¨éƒ¨å†…å®¹ï¼Œä½†åœ¨ä¸‹ä¸€æ¬¡åªä¼ è¾“ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚rsync åœ¨ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¸­å¯ä»¥å®è¡Œå‹ç¼©åŠ<a href="https://baike.baidu.com/item/è§£å‹ç¼©" target="_blank" rel="noopener">è§£å‹ç¼©</a>æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ›´å°‘çš„å¸¦å®½ã€‚</p>
</li>
<li><p>å®‰å…¨ï¼šå¯ä»¥ä½¿ç”¨scpã€sshç­‰æ–¹å¼æ¥ä¼ è¾“æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥çš„socketè¿æ¥ã€‚</p>
</li>
<li><p>æ”¯æŒåŒ¿åä¼ è¾“ï¼Œä»¥æ–¹ä¾¿è¿›è¡Œç½‘ç«™é•œåƒã€‚</p>
</li>
</ul>
<p>rsyncå®˜ç½‘ï¼š<a href="http://rsync.samba.org" target="_blank" rel="noopener">rsysc</a></p>
<h2 id="ä¸scpå‘½ä»¤æ¯”è¾ƒ"><a href="#ä¸scpå‘½ä»¤æ¯”è¾ƒ" class="headerlink" title="ä¸scpå‘½ä»¤æ¯”è¾ƒ"></a>ä¸scpå‘½ä»¤æ¯”è¾ƒ</h2><p>ä¼˜ç‚¹ï¼š </p>
<ul>
<li><p>æ”¯æŒå¢é‡å¤‡ä»½ã€‚</p>
</li>
<li><p>é€‰æ‹©æ€§çš„ä¿æŒ ï¼š ç¬¦å·é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼Œæ–‡ä»¶å±æ€§ï¼Œæƒé™ åŠæ—¶é—´ ç­‰ã€‚</p>
</li>
<li><p>ä¼ è¾“å‰æ‰§è¡Œå‹ç¼©ã€‚é€‚ç”¨äºå¼‚åœ°å¤‡ä»½ ï¼Œé•œåƒæœåŠ¡å™¨ç­‰åº”ç”¨ ã€‚</p>
</li>
<li><p>ä½¿ç”¨sshåšä¸ºä¼ è¾“ç«¯å£ã€‚ sftp ï¼Œssh</p>
</li>
</ul>
<p>åŒºåˆ«ï¼š</p>
<p>å½“æ–‡ä»¶æ•°æ®å¾ˆå¤§æ—¶å€™ï¼š </p>
<ul>
<li>scp æ— æ³•å¤‡ä»½å¤§é‡æ•°æ®ï¼Œ ç‰¹ç‚¹ï¼š å…ˆç»Ÿä¸€ä¿¡æ¯ï¼Œåƒwindowså¤åˆ¶ã€‚</li>
<li>rsync è¾¹å¤åˆ¶ï¼Œè¾¹æ¯”è¾ƒï¼Œè¾¹ç»Ÿè®¡ã€‚</li>
</ul>
<p>ç«¯å£ï¼š 873<br>æ¨¡å¼ï¼šC/S ã€‚ å¦‚æœç›´æ¥ä½¿ç”¨å‘½ä»¤rsyncï¼Œå°±æ˜¯ç‚¹åˆ°ç‚¹ä¼ è¾“ã€‚</p>
<h2 id="å¤‡ä»½æº"><a href="#å¤‡ä»½æº" class="headerlink" title="å¤‡ä»½æº"></a>å¤‡ä»½æº</h2><blockquote>
<p>ä½•ä¸ºå¤‡ä»½æºï¼Ÿ</p>
<p>åœ¨è¿œç¨‹åŒæ­¥ä»»åŠ¡ä¸­ï¼Œè´Ÿè´£å‘èµ·rsyncåŒæ­¥æ“ä½œçš„å®¢æˆ·æœºç§°ä¸ºå‘èµ·ç«¯ï¼Œè€Œè´Ÿè´£å“åº”æ¥è‡ªå®¢æœºçš„rsyncåŒæ­¥æ“ä½œçš„æœåŠ¡å™¨ç§°ä¸ºå¤‡ä»½æºã€‚</p>
</blockquote>
<h2 id="å®‰è£…rsync"><a href="#å®‰è£…rsync" class="headerlink" title="å®‰è£…rsync"></a>å®‰è£…rsync</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># rpm -qf `which rsync`</span></span><br><span class="line">rsync-3.0.9-18.el7.x86_64</span><br><span class="line">[root@server222 ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.r            pm</span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signatu            re, å¯†é’¥ ID f4a80eb5: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">        è½¯ä»¶åŒ… rsync-3.0.9-18.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡"><a href="#å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡" class="headerlink" title="å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡"></a>å®‰è£…xinetdæœåŠ¡æ¥ç®¡ç†rsyncæœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cdrom]# rpm -ivh /mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm</span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID f4a80eb5: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          ################################# [100%]</span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:xinetd-2:2.3.15-13.el7           ################################# [100%]</span><br></pre></td></tr></table></figure>

<h2 id="å¼€å¯rsync-æœåŠ¡"><a href="#å¼€å¯rsync-æœåŠ¡" class="headerlink" title="å¼€å¯rsync æœåŠ¡"></a>å¼€å¯rsync æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# systemctl restart rsyncd</span><br><span class="line">[root@server222 ~]# systemctl status rsyncd</span><br><span class="line">â— rsyncd.service - fast remote file copy program daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rsyncd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since å›› 2019-08-22 23:57:10 CST; 2s ago</span><br><span class="line"> Main PID: 14359 (rsync)</span><br><span class="line">   CGroup: /system.slice/rsyncd.service</span><br><span class="line">           â””â”€14359 /usr/bin/rsync --daemon --no-detach</span><br><span class="line"></span><br><span class="line">8æœˆ 22 23:57:10 server222 systemd[1]: Started fast remote file copy program ...n.</span><br><span class="line">8æœˆ 22 23:57:10 server222 systemd[1]: Starting fast remote file copy program.....</span><br><span class="line">8æœˆ 22 23:57:11 server222 rsyncd[14359]: rsyncd version 3.0.9 starting, liste...3</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br></pre></td></tr></table></figure>

<h2 id="ç›‘å¬ç«¯å£"><a href="#ç›‘å¬ç«¯å£" class="headerlink" title="ç›‘å¬ç«¯å£"></a>ç›‘å¬ç«¯å£</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># netstat -antup | grep 873</span></span><br><span class="line">tcp        0      0 0.0.0.0:873             0.0.0.0:*               LISTEN      14359/rsync</span><br><span class="line">tcp6       0      0 :::873                  :::*                    LISTEN      14359/rsync</span><br></pre></td></tr></table></figure>

<h2 id="rsync-å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•"><a href="#rsync-å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="rsync å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•"></a>rsync å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•</h2><p>æ ¼å¼ï¼š<code>rsync</code> ã€é€‰é¡¹ã€‘ æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</p>
<p>å¸¸è§çš„é€‰é¡¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-aï¼Œ--archive(å­˜æ¡£) å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’çš„æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¸”ä¿æŒæ–‡ä»¶å±æ€§ï¼Œç­‰åŒäºåŠ äº†å‚æ•°-rlptgoD</span><br><span class="line">-rï¼Œâ€“recursive å¯¹å­ç›®å½”ä»¥é€’å½’æ¨¡å¼å¤„ç†</span><br><span class="line">-l,--links è¡¨ç¤ºæ‹·è´é“¾æ¥æ–‡ä»¶</span><br><span class="line">-p , --perms è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰æƒé™</span><br><span class="line">-t , --<span class="built_in">times</span> è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰æ—¶é—´</span><br><span class="line">-g , --group è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰å±ç”¨æˆ·ç»„</span><br><span class="line">-o , --owner è¡¨ç¤ºä¿æŒæ–‡ä»¶åŸæœ‰å±ä¸»</span><br><span class="line">-D , --devices è¡¨ç¤ºå—è®¾å¤‡æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">-z , --compress è¡¨ç¤ºå‹ç¼©ä¼ è¾“</span><br><span class="line">-H è¡¨ç¤ºç¡¬è¿æ¥æ–‡ä»¶</span><br><span class="line">-A ä¿ç•™ACL å±æ€§ä¿¡æ¯</span><br><span class="line">-P æ˜¾ç¤ºä¼ è¾“è¿›åº¦</span><br><span class="line">-u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äºç›®æ ‡ä½ç½®ï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ã€‚(ä¸Œ</span><br><span class="line">è¦†ç›–æ›´æ–°çš„æ–‡ä»¶)</span><br><span class="line">--port=PORT æŒ‡å®šå…¶ä»–çš„rsyncæœåŠ¡ç«¯å£ 873</span><br><span class="line">--delete åˆ é™¤é‚£äº›ç›®æ ‡ä½ç½®æœ‰è€ŒåŸå§‹ä½ç½®æ²¡æœ‰çš„æ–‡ä»¶</span><br><span class="line">--password-file=FILE ä»FILE ä¸­å¾—åˆ°å¯†ç </span><br><span class="line">--bwlimit=KBPS é™åˆ¶I/O å¸¦å®½ï¼ŒKbytes /second</span><br><span class="line">--filter â€œ- æ–‡ä»¶åâ€éœ€è¦è¿‡æ»¤çš„æ–‡ä»¶</span><br><span class="line">--exclude= ï¼šéœ€è¦è¿‡æ»¤çš„æ–‡ä»¶</span><br><span class="line">-v æ˜¾ç¤ºåŒæ­¥è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â€“delete åˆ é™¤é‚£äº›ç›®æ ‡ä½ç½®æœ‰è€ŒåŸå§‹ä½ç½®æ²¡æœ‰çš„æ–‡ä»¶</p>
<p>ä¾‹å¦‚ ç›®å½”/web : /back a.txt</p>
</blockquote>
<h2 id="å®æˆ˜1ï¼š"><a href="#å®æˆ˜1ï¼š" class="headerlink" title="å®æˆ˜1ï¼š"></a>å®æˆ˜1ï¼š</h2><p>client111ï¼š192.168.176.111</p>
<p>server222ï¼š192.168.176.222</p>
<blockquote>
<p>å¤‡ä»½server222çš„/mnt ç›®å½•åˆ°client111 çš„/root/mntã€‚<br>åˆ›å»ºç”¨æˆ·haryç”¨äºä¸‹è½½ã€è¯»ï¼›åˆ›å»ºç”¨æˆ·natasha ç”¨äºä¸Šä¼ ã€å†™ã€‚</p>
</blockquote>
<h3 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># useradd hary</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin hary</span></span><br><span class="line">æ›´æ”¹ç”¨æˆ· hary çš„å¯†ç  ã€‚</span><br><span class="line">passwdï¼šæ‰€æœ‰çš„èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ã€‚</span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin natasha</span></span><br><span class="line">æ›´æ”¹ç”¨æˆ· natasha çš„å¯†ç  ã€‚</span><br><span class="line">passwdï¼šæ‰€æœ‰çš„èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:hary:r-x /mnt</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:natasha:rwx /mnt</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºæµ‹è¯•æ•°æ®"><a href="#åˆ›å»ºæµ‹è¯•æ•°æ®" class="headerlink" title="åˆ›å»ºæµ‹è¯•æ•°æ®"></a>åˆ›å»ºæµ‹è¯•æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mnt]<span class="comment"># echo "123qwe" &gt; 123qwe</span></span><br><span class="line">[root@server222 mnt]<span class="comment"># ls</span></span><br><span class="line">123qwe  cdrom</span><br><span class="line">[root@server222 mnt]<span class="comment"># cat 123qwe</span></span><br><span class="line">123qwe</span><br></pre></td></tr></table></figure>

<h3 id="client111åŒæ­¥æ•°æ®"><a href="#client111åŒæ­¥æ•°æ®" class="headerlink" title="client111åŒæ­¥æ•°æ®"></a>client111åŒæ­¥æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># mkdir /root/mnt</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cd /root/mnt/</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># rsync -azP --delete natasha@192.168.176.222:/mnt/ /root/mnt</span></span><br><span class="line">natasha@192.168.176.222<span class="string">'s password:</span></span><br><span class="line"><span class="string">..........</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sent 74971 bytes  received 4361814808 bytes  10918372.41 bytes/sec</span></span><br><span class="line"><span class="string">total size is 4515096809  speedup is 1.04</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ls</span></span><br><span class="line"><span class="string">123qwe  cdrom</span></span><br><span class="line"><span class="string">[root@client111 mnt]# cat 123qwe</span></span><br><span class="line"><span class="string">123qwe</span></span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜2ï¼š"><a href="#å®æˆ˜2ï¼š" class="headerlink" title="å®æˆ˜2ï¼š"></a>å®æˆ˜2ï¼š</h2><blockquote>
<p>ä½¿ç”¨ssh å¯†é’¥å®ç°æ— äº¤äºå¤‡ä»½ã€‚åšæˆè„šæœ¬ï¼Œå°†server222ä¸Šçš„æ•°æ®ï¼Œå®šæœŸå¤‡ä»½åˆ°client111ä¸Šã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh-keygen</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Enter same passphrase again:<span class="comment">#ç›´æ¥å›åº“</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:SsPRWpKt+9+YLYH4IcfSGFsH/rKlKFxb3QzwqC/DdMs root@client111</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|       +o        |</span></span><br><span class="line"><span class="string">|      +.+=       |</span></span><br><span class="line"><span class="string">|     ..*+ +      |</span></span><br><span class="line"><span class="string">|      *XS= +     |</span></span><br><span class="line"><span class="string">|     .X+X = o    |</span></span><br><span class="line"><span class="string">|   . +o% B .     |</span></span><br><span class="line"><span class="string">|    o *.E .=     |</span></span><br><span class="line"><span class="string">|     . o..+.o    |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh copy id hary@192.168.176.222</span></span><br><span class="line"><span class="string">ssh: Could not resolve hostname copy: Name or service not known</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh-copy-id hary@192.168.176.222</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">hary@192.168.176.222'</span>s password:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'hary@192.168.176.222'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•haryç™»é™†server222</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh hary@192.168.176.222</span></span><br><span class="line">Last failed login: Sat Aug 24 00:59:25 CST 2019 from 192.168.176.111 on ssh:notty</span><br><span class="line">There were 2 failed login attempts since the last successful login.</span><br><span class="line">[hary@server222 ~]$</span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™è„šæœ¬"><a href="#ç¼–å†™è„šæœ¬" class="headerlink" title="ç¼–å†™è„šæœ¬"></a>ç¼–å†™è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># vim /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># cat /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">rsync -az --delete hary@192.168.176.222:/mnt/ /root/mnt/</span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•è„šæœ¬"><a href="#æµ‹è¯•è„šæœ¬" class="headerlink" title="æµ‹è¯•è„šæœ¬"></a>æµ‹è¯•è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># chmod +x /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># rm -rf /root/mnt/*</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># ls</span></span><br><span class="line">[root@client111 mnt]<span class="comment">#</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># /root/rsync-ssh-get-mnt.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="å®šæœŸå¤‡ä»½"><a href="#å®šæœŸå¤‡ä»½" class="headerlink" title="å®šæœŸå¤‡ä»½"></a>å®šæœŸå¤‡ä»½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># crontab -e</span></span><br><span class="line">no crontab <span class="keyword">for</span> root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@client111 ~]<span class="comment"># crontab -l</span></span><br><span class="line">01 3 * * * /root/rsync-ssh-get-mnt.sh &amp;</span><br><span class="line"><span class="comment"># æ¯å¤©çš„å‡Œæ™¨3ç‚¹10åˆ†æ‰§è¡Œè„šæœ¬</span></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/30.linux--rsync/" data-id="ck7ooyaha001t4su6sto5gqsp"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿ç»´/">linuxè¿ç»´</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-29.linux--LNMP" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/29.linux--LNMP/"
    >LNMP</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/29.linux--LNMP/" class="article-date">
  <time datetime="2020-03-12T11:38:49.801Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿ç»´/">linuxè¿ç»´</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h1><p>LNMPä»£è¡¨çš„å°±æ˜¯ï¼šLinuxç³»ç»Ÿä¸‹Nginx+MySQL+PHPè¿™ç§ç½‘ç«™æœåŠ¡å™¨æ¶æ„ã€‚</p>
<p>Linuxæ˜¯ä¸€ç±»Unixè®¡ç®—æœºæ“ä½œç³»ç»Ÿçš„ç»Ÿç§°ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„å…è´¹æ“ä½œç³»ç»Ÿã€‚ä»£è¡¨ç‰ˆæœ¬æœ‰ï¼šdebianã€centosã€ubuntuã€fedoraã€gentooç­‰ã€‚</p>
<p><a href="https://baike.baidu.com/item/Nginx" target="_blank" rel="noopener">Nginx</a>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œ<a href="https://baike.baidu.com/item/åå‘ä»£ç†" target="_blank" rel="noopener">åå‘ä»£ç†</a>æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªIMAP/POP3/SMTPä»£ç†æœåŠ¡å™¨ã€‚</p>
<p>Mysqlæ˜¯ä¸€ä¸ªå°å‹<a href="https://baike.baidu.com/item/å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" target="_blank" rel="noopener">å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</a>ã€‚</p>
<p><a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>æ˜¯ä¸€ç§åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„åµŒå…¥HTMLæ–‡æ¡£çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>è¿™å››ç§è½¯ä»¶å‡ä¸ºå…è´¹å¼€æºè½¯ä»¶ï¼Œç»„åˆåˆ°ä¸€èµ·ï¼Œæˆä¸ºä¸€ä¸ªå…è´¹ã€é«˜æ•ˆã€æ‰©å±•æ€§å¼ºçš„ç½‘ç«™æœåŠ¡ç³»ç»Ÿã€‚</p>
<h2 id="LNMPç‰¹ç‚¹"><a href="#LNMPç‰¹ç‚¹" class="headerlink" title="LNMPç‰¹ç‚¹"></a>LNMPç‰¹ç‚¹</h2><p>â€‹        LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ˜¯ä¸€å¥—ç”±Linux + Nginx + MySQL + PHPç»„æˆçš„åŠ¨æ€ç½‘ç«™ç³»ç»Ÿè§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰å…è´¹ã€é«˜æ•ˆã€æ‰©å±•æ€§å¼ºä¸”èµ„æºæ¶ˆè€—ä½ç­‰ä¼˜è‰¯ç‰¹æ€§ã€‚</p>
<p>â€‹        Nginxæ˜¯ä¸€æ¬¾ç›¸å½“ä¼˜ç§€çš„ç”¨äºéƒ¨ç½²åŠ¨æ€ç½‘ç«™çš„è½»é‡çº§æœåŠ¡ç¨‹åºï¼Œå®ƒæœ€åˆæ˜¯ä¸ºä¿„ç½—æ–¯é—¨æˆ·ç«™ç‚¹è€Œå¼€å‘çš„ï¼Œå› å…¶ç¨³å®šæ€§ã€åŠŸèƒ½ä¸°å¯Œã€å ç”¨å†…å­˜å°‘ä¸”å¹¶å‘èƒ½åŠ›å¼ºè€Œå¤‡å—ç”¨æˆ·çš„ä¿¡èµ–ã€‚ç›®å‰å›½å†…è¯¸å¦‚æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ç­‰é—¨æˆ·ç«™ç‚¹å‡å·²ä½¿ç”¨äº†æ­¤æœåŠ¡ã€‚</p>
<p>NginxæœåŠ¡ç¨‹åºçš„ç¨³å®šæ€§æºè‡ªäºé‡‡ç”¨äº†åˆ†é˜¶æ®µçš„èµ„æºåˆ†é…æŠ€æœ¯ï¼Œé™ä½äº†CPUä¸å†…å­˜çš„å ç”¨ç‡ï¼Œæ‰€ä»¥ä½¿ç”¨Nginxç¨‹åºéƒ¨ç½²çš„åŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸ä»…ååˆ†ç¨³å®šã€é«˜æ•ˆï¼Œè€Œä¸”æ¶ˆè€—çš„ç³»ç»Ÿèµ„æºä¹Ÿå¾ˆå°‘ã€‚æ­¤å¤–ï¼ŒNginxå…·å¤‡çš„æ¨¡å—æ•°é‡ä¸Apacheå…·å¤‡çš„æ¨¡å—æ•°é‡å‡ ä¹ç›¸åŒï¼Œè€Œä¸”ç°åœ¨å·²ç»å®Œå…¨æ”¯æŒproxyã€rewriteã€mod_fcgiã€sslã€vhostsç­‰å¸¸ç”¨æ¨¡å—ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒNginxè¿˜æ”¯æŒçƒ­éƒ¨ç½²æŠ€æœ¯ï¼Œå¯ä»¥7Ã—24ä¸é—´æ–­æä¾›æœåŠ¡ï¼Œè¿˜å¯ä»¥åœ¨ä¸æš‚åœæœåŠ¡çš„æƒ…å†µä¸‹ç›´æ¥å¯¹NginxæœåŠ¡ç¨‹åºè¿›è¡Œå‡çº§ã€‚</p>
<p>å¦ç™½æ¥è®²ï¼Œè™½ç„¶Nginxç¨‹åºçš„ä»£ç è´¨é‡éå¸¸é«˜ï¼Œä»£ç å¾ˆè§„èŒƒï¼ŒæŠ€æœ¯æˆç†Ÿï¼Œæ¨¡å—æ‰©å±•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚æ˜¯ç”±ä¿„ç½—æ–¯äººå¼€å‘çš„ï¼Œæ‰€ä»¥åœ¨èµ„æ–™æ–‡æ¡£æ–¹é¢è¿˜å¹¶ä¸å®Œå–„ï¼Œä¸­æ–‡èµ„æ–™çš„è´¨é‡æ›´æ˜¯é±¼é¾™æ··æ‚ã€‚ä½†æ˜¯NginxæœåŠ¡ç¨‹åºåœ¨è¿‘å¹´æ¥å¢é•¿åŠ¿å¤´è¿…çŒ›ï¼Œç›¸ä¿¡ä¼šåœ¨è½»é‡çº§WebæœåŠ¡å™¨å¸‚åœºå…·æœ‰ä¸é”™çš„æœªæ¥ã€‚</p>
<p>â€‹    </p>
<p>â€‹        PHPï¼ˆHypertxt Preprocessorï¼Œè¶…æ–‡æœ¬é¢„å¤„ç†å™¨ï¼‰æ˜¯ä¸€ç§é€šç”¨çš„å¼€æºè„šæœ¬è¯­è¨€ï¼Œå‘æ˜äº1995å¹´ï¼Œå®ƒå¸å–äº†Cè¯­è¨€ã€Javaè¯­è¨€åŠPerlè¯­è¨€çš„å¾ˆå¤šä¼˜ç‚¹ï¼Œå…·æœ‰å¼€æºã€å…è´¹ã€å¿«æ·ã€è·¨å¹³å°æ€§å¼ºã€æ•ˆç‡é«˜ç­‰ä¼˜è‰¯ç‰¹æ€§ï¼Œæ˜¯ç›®å‰Webå¼€å‘é¢†åŸŸæœ€å¸¸ç”¨çš„è¯­è¨€ä¹‹ä¸€ã€‚</p>
<h2 id="LNMPä¼˜ç‚¹"><a href="#LNMPä¼˜ç‚¹" class="headerlink" title="LNMPä¼˜ç‚¹"></a>LNMPä¼˜ç‚¹</h2><p>ä½œä¸º Web æœåŠ¡å™¨ï¼šç›¸æ¯” Apacheï¼ŒNginx ä½¿ç”¨æ›´å°‘çš„èµ„æºï¼Œæ”¯æŒæ›´å¤šçš„å¹¶å‘è¿æ¥ï¼Œä½“ç°æ›´é«˜çš„æ•ˆç‡ã€‚</p>
<p>ä½œä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼šNginx æ—¢å¯ä»¥åœ¨å†…éƒ¨ç›´æ¥æ”¯æŒ<a href="https://baike.baidu.com/item/Rails" target="_blank" rel="noopener">Rails</a>å’Œ<a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>ï¼Œä¹Ÿå¯ä»¥æ”¯æŒä½œä¸º HTTP<a href="https://baike.baidu.com/item/ä»£ç†æœåŠ¡å™¨" target="_blank" rel="noopener">ä»£ç†æœåŠ¡å™¨</a>å¯¹å¤–è¿›è¡ŒæœåŠ¡ã€‚Nginx ç”¨Cç¼–å†™ï¼Œä¸è®ºæ˜¯ç³»ç»Ÿèµ„æºå¼€é”€è¿˜æ˜¯CPUä½¿ç”¨æ•ˆç‡éƒ½æ¯”Perlbalè¦å¥½çš„å¤šã€‚</p>
<p>ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼šNginxåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼ˆæœ€æ—©å¼€å‘è¿™ä¸ªäº§å“çš„ç›®çš„ä¹‹ä¸€ä¹Ÿæ˜¯ä½œä¸ºé‚®ä»¶ä»£ç†æœåŠ¡å™¨ï¼‰ï¼ŒLast/fm æè¿°äº†æˆåŠŸå¹¶ä¸”ç¾å¦™çš„ä½¿ç”¨ç»éªŒã€‚</p>
<p>Nginx å®‰è£…éå¸¸çš„ç®€å•ï¼Œé…ç½®æ–‡ä»¶éå¸¸ç®€æ´ï¼ˆè¿˜èƒ½å¤Ÿæ”¯æŒ<a href="https://baike.baidu.com/item/perl" target="_blank" rel="noopener">perl</a>è¯­æ³•ï¼‰ã€‚Nginxæ”¯æŒå¹³æ»‘åŠ è½½æ–°çš„é…ç½®ï¼Œè¿˜èƒ½å¤Ÿåœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œè½¯ä»¶ç‰ˆæœ¬çš„å‡çº§ã€‚</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mpSbTK.jpg" alt></p>
<h2 id="æºç åŒ…å®‰è£…"><a href="#æºç åŒ…å®‰è£…" class="headerlink" title="æºç åŒ…å®‰è£…"></a>æºç åŒ…å®‰è£…</h2><p>åœ¨ä½¿ç”¨æºç åŒ…å®‰è£…æœåŠ¡ç¨‹åºä¹‹å‰ï¼Œé¦–å…ˆè¦è®©å®‰è£…ä¸»æœºå…·å¤‡ç¼–è¯‘ç¨‹åºæºç çš„ç¯å¢ƒï¼Œä»–éœ€è¦å…·å¤‡Cè¯­è¨€ã€C++è¯­è¨€ã€Perlè¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œä»¥åŠå„ç§å¸¸è§çš„ç¼–è¯‘æ”¯æŒå‡½æ•°åº“ç¨‹åºã€‚å› æ­¤è¯·å…ˆé…ç½®å¦¥å½“Yumè½¯ä»¶ä»“åº“</p>
<h3 id="é…ç½®yumä»“åº“"><a href="#é…ç½®yumä»“åº“" class="headerlink" title="é…ç½®yumä»“åº“"></a>é…ç½®yumä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# tail -n 1 /etc/fstab</span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]# vim /etc/yum.repos.d/bendi.repo</span><br><span class="line">[root@server222 ~]# cat /etc/yum.repos.d/bendi.repo</span><br><span class="line">[bendi]</span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…è½¯ä»¶åŒ…"><a href="#å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…"></a>å®‰è£…è½¯ä»¶åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# yum install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* wget zlib-devel</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…"><a href="#ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…" class="headerlink" title="ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…"></a>ä¸‹è½½æºç åŒ…ä»¥åŠç³»ç»Ÿè½¯ä»¶åŒ…</h3><p>â€‹        ç„¶åæˆ‘ä»¬å®‰è£…LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ‰€éœ€çš„16ä¸ªè½¯ä»¶æºç åŒ…å’Œ1ä¸ªç”¨äºæ£€æŸ¥æ•ˆæœçš„è®ºå›ç½‘ç«™ç³»ç»Ÿè½¯ä»¶åŒ…</p>
<blockquote>
<p> æ­¤å¤„å»ºè®®æŠŠè¦å®‰è£…çš„è½¯ä»¶åŒ…å­˜æ”¾åœ¨/usr/local/srcç›®å½•ä¸­ã€‚</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»º<code>/usr/local/src</code>ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# mkdir /usr/local/src</span><br></pre></td></tr></table></figure>

<p>æºç åŒ…æ–‡ä»¶å·²ç»æ”¾åˆ°ç™¾åº¦äº‘ç›˜é‡Œé¢ï¼Œä¸‹è½½ä¸‹æ¥ä¼ åˆ°Linuxç³»ç»Ÿé‡Œé¢<code>/usr/local/src</code>ç›®å½•å³å¯</p>
<blockquote>
<p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA" target="_blank" rel="noopener">https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA</a><br>æå–ç ï¼šox0w<br>å¤åˆ¶è¿™æ®µå†…å®¹åæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ‰‹æœºAppï¼Œæ“ä½œæ›´æ–¹ä¾¿å“¦</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mCjFoT.png" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src</span></span><br><span class="line">[root@server222 src]<span class="comment"># ls</span></span><br><span class="line">cmake-2.8.11.2.tar.gz   libpng-1.6.12.tar.gz   php-5.5.14.tar.gz</span><br><span class="line">Discuz_X3.2_SC_GBK.zip  libvpx-v1.3.0.tar.bz2  t1lib-5.1.2.tar.gz</span><br><span class="line">freetype-2.5.3.tar.gz   mysql-5.6.19.tar.gz    tiff-4.0.3.tar.gz</span><br><span class="line">jpegsrc.v9a.tar.gz      nginx-1.6.0.tar.gz     yasm-1.2.0.tar.gz</span><br><span class="line">libgd-2.1.0.tar.gz      openssl-1.0.1h.tar.gz  zlib-1.2.8.tar.gz</span><br><span class="line">libmcrypt-2.5.8.tar.gz  pcre-8.35.tar.gz</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœæ˜¯17ä¸ªåŒ…å°±ç®—OKï¼Œå·®ä¸€ä¸ªéƒ½ä¸è¡Œ</p>
</blockquote>
<h2 id="å®‰è£…ç¼–è¯‘å·¥å…·"><a href="#å®‰è£…ç¼–è¯‘å·¥å…·" class="headerlink" title="å®‰è£…ç¼–è¯‘å·¥å…·"></a>å®‰è£…ç¼–è¯‘å·¥å…·</h2><p>cmakeæ˜¯Linuxç³»ç»Ÿä¸­ä¸€æ¬¾å¸¸ç”¨çš„ç¼–è¯‘å·¥å…·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># tar xzvf cmake-2.8.11.2.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd cmake-2.8.11.2/</span></span><br><span class="line">[root@server222 cmake-2.8.11.2]<span class="comment"># ./configure ; make ; make install</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤å¤„å‘½ä»¤<code>./configure ; make ; make install</code> </p>
<p>æ ¼å¼ä¸º <code>å‘½ä»¤A ; å‘½ä»¤B ; å‘½ä»¤C</code></p>
<p>è¿™é‡Œæ„æ€æ˜¯å…ˆæ‰§è¡Œå‘½ä»¤Aå†æ‰§è¡Œå‘½ä»¤Bæœ€åæ‰§è¡Œå‘½ä»¤C</p>
</blockquote>
<h2 id="é…ç½®MySQLæœåŠ¡"><a href="#é…ç½®MySQLæœåŠ¡" class="headerlink" title="é…ç½®MySQLæœåŠ¡"></a>é…ç½®MySQLæœåŠ¡</h2><p>â€‹       åœ¨ä½¿ç”¨Yumè½¯ä»¶ä»“åº“å®‰è£…æœåŠ¡ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®RPMè½¯ä»¶åŒ…ä¸­çš„æŒ‡ä»¤é›†å®Œæ•´è½¯ä»¶é…ç½®ç­‰å·¥ä½œã€‚ä½†æ˜¯ä¸€æ—¦é€‰æ‹©ä½¿ç”¨æºç åŒ…çš„æ–¹å¼æ¥å®‰è£…ï¼Œè¿™ä¸€åˆ‡å°±éœ€è¦è‡ªå·±æ¥å®Œæˆäº†ã€‚é’ˆå¯¹MySQLæ•°æ®åº“æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªåä¸ºmysqlçš„ç”¨æˆ·ï¼Œä¸“é—¨ç”¨äºè´Ÿè´£è¿è¡ŒMySQLæ•°æ®åº“ã€‚è¯·è®°å¾—è¦æŠŠè¿™ç±»è´¦æˆ·çš„Bashç»ˆç«¯è®¾ç½®æˆnologinè§£é‡Šå™¨ï¼Œé¿å…é»‘å®¢é€šè¿‡è¯¥ç”¨æˆ·ç™»å½•åˆ°æœåŠ¡å™¨ä¸­ï¼Œä»è€Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cmake-2.8.11.2]# cd ..</span><br><span class="line">[root@server222 src]# useradd mysql -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>â€‹       åˆ›å»ºä¸€ä¸ªç”¨äºä¿å­˜MySQLæ•°æ®åº“ç¨‹åºå’Œæ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ï¼Œå¹¶æŠŠè¯¥ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„èº«ä»½ä¿®æ”¹ä¸ºmysqlã€‚å…¶ä¸­ï¼Œ/usr/local/mysqlæ˜¯ç”¨äºä¿å­˜MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºçš„ç›®å½•ï¼Œ/usr/local/mysql/varåˆ™æ˜¯ç”¨äºä¿å­˜çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# mkdir -p /usr/local/mysql/var</span><br><span class="line">[root@server222 src]# chown -Rf mysql:mysql /usr/local/mysql</span><br></pre></td></tr></table></figure>

<p>â€‹        æ¥ä¸‹æ¥è§£å‹ã€ç¼–è¯‘ã€å®‰è£…MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºã€‚åœ¨ç¼–è¯‘æ•°æ®åº“æ—¶ä½¿ç”¨çš„æ˜¯cmakeå‘½ä»¤</p>
<p>-DCMAKE_INSTALL_PREFIXå‚æ•°ç”¨äºå®šä¹‰æ•°æ®åº“æœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•</p>
<p>-DMYSQL_DATADIRå‚æ•°ç”¨äºå®šä¹‰çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•</p>
<p>-DSYSCONFDIRåˆ™æ˜¯å®šä¹‰MySQLæ•°æ®åº“é…ç½®æ–‡ä»¶çš„ä¿å­˜ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf mysql-5.6.19.tar.gz</span><br><span class="line">[root@server222 src]# cd mysql-5.6.19/</span><br><span class="line">[root@server222 mysql-5.6.19]# cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etc ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        ä¸ºäº†è®©MySQLæ•°æ®åº“ç¨‹åºæ­£å¸¸è¿è½¬èµ·æ¥ï¼Œéœ€è¦å…ˆåˆ é™¤/etcç›®å½•ä¸­çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨MySQLæ•°æ®åº“ç¨‹åºçš„ä¿å­˜ç›®å½•scriptså†…æ‰¾åˆ°ä¸€ä¸ªåä¸ºmysql_install_dbçš„è„šæœ¬ç¨‹åºï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ç¨‹åºå¹¶ä½¿ç”¨â€“userå‚æ•°æŒ‡å®šMySQLæœåŠ¡çš„å¯¹åº”è´¦å·åç§°ï¼ˆåœ¨å‰é¢æ­¥éª¤å·²ç»åˆ›å»ºï¼‰ï¼Œä½¿ç”¨â€“basedirå‚æ•°æŒ‡å®šMySQLæœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•ï¼Œä½¿ç”¨â€“datadirå‚æ•°æŒ‡å®šMySQLçœŸå®æ•°æ®åº“çš„æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œè¿™æ ·å³å¯ç”Ÿæˆç³»ç»Ÿæ•°æ®åº“æ–‡ä»¶ï¼Œä¹Ÿä¼šç”Ÿæˆå‡ºæ–°çš„MySQLæœåŠ¡é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql-5.6.19]# rm -rf /etc/my.cnf</span><br><span class="line">[root@server222 mysql-5.6.19]# cd /usr/local/mysql</span><br><span class="line">[root@server222 mysql]# ./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure>

<p>â€‹        æŠŠç³»ç»Ÿæ–°ç”Ÿæˆçš„MySQLæ•°æ®åº“é…ç½®æ–‡ä»¶é“¾æ¥åˆ°/etcç›®å½•ä¸­ï¼Œç„¶åæŠŠç¨‹åºç›®å½•ä¸­çš„å¼€æœºç¨‹åºæ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dç›®å½•ä¸­ï¼Œä»¥ä¾¿é€šè¿‡serviceå‘½ä»¤æ¥ç®¡ç†MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºã€‚è®°å¾—æŠŠæ•°æ®åº“è„šæœ¬æ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆ755ä»¥ä¾¿äºè®©ç”¨æˆ·æœ‰æ‰§è¡Œè¯¥è„šæœ¬çš„æƒé™</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# ln -s my.cnf /etc/my.cnf</span><br><span class="line">[root@server222 mysql]# cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line">[root@server222 mysql]# chmod 755 /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure>

<p>â€‹        ç¼–è¾‘åˆšå¤åˆ¶çš„MySQLæ•°æ®åº“è„šæœ¬æ–‡ä»¶ï¼ŒæŠŠç¬¬46ã€47è¡Œçš„basedirä¸datadirå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºMySQLæ•°æ®åº“ç¨‹åºçš„ä¿å­˜ç›®å½•å’ŒçœŸå®æ•°æ®åº“çš„æ–‡ä»¶å†…å®¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/rc.d/init.d/mysqld</span><br><span class="line"> 45 </span><br><span class="line"> 46 basedir=/usr/local/mysql</span><br><span class="line"> 47 datadir=/usr/local/mysql/var</span><br><span class="line"> 48</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu æŸ¥çœ‹è¡Œ</p>
</blockquote>
<p>â€‹        é…ç½®å¥½è„šæœ¬æ–‡ä»¶åä¾¿å¯ä»¥ç”¨serviceå‘½ä»¤å¯åŠ¨mysqldæ•°æ®åº“æœåŠ¡äº†ã€‚mysqldæ˜¯MySQLæ•°æ®åº“ç¨‹åºçš„æœåŠ¡åç§°ï¼Œæ³¨æ„ä¸è¦å†™é”™ã€‚é¡ºå¸¦å†ä½¿ç”¨chkconfigå‘½ä»¤æŠŠmysqldæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# service mysqld start</span><br><span class="line">Starting MySQL. SUCCESS!</span><br><span class="line">[root@server222 mysql]# chkconfig mysqld on</span><br></pre></td></tr></table></figure>

<p>â€‹       MySQLæ•°æ®åº“ç¨‹åºè‡ªå¸¦äº†è®¸å¤šå‘½ä»¤ï¼Œä½†æ˜¯Bashç»ˆç«¯çš„PATHå˜é‡å¹¶ä¸ä¼šåŒ…å«è¿™äº›å‘½ä»¤æ‰€å­˜æ”¾çš„ç›®å½•ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿæ— æ³•é¡ºåˆ©åœ°å¯¹MySQLæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå°±ä¸èƒ½ä½¿ç”¨MySQLæ•°æ®åº“è‡ªå¸¦çš„å‘½ä»¤äº†ã€‚æƒ³è¦æŠŠå‘½ä»¤æ‰€ä¿å­˜çš„ç›®å½•æ°¸ä¹…æ€§åœ°å®šä¹‰åˆ°PATHå˜é‡ä¸­ï¼Œéœ€è¦ç¼–è¾‘/etc/profileæ–‡ä»¶å¹¶å†™å…¥è¿½åŠ çš„å‘½ä»¤ç›®å½•ï¼Œè¿™æ ·å½“ç‰©ç†è®¾å¤‡åœ¨ä¸‹ä¸€æ¬¡é‡å¯æ—¶å°±ä¼šæ°¸ä¹…ç”Ÿæ•ˆäº†ã€‚å¦‚æœä¸æƒ³é€šè¿‡é‡å¯è®¾å¤‡çš„æ–¹å¼æ¥ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨sourceå‘½ä»¤åŠ è½½ä¸€ä¸‹/ect/profileæ–‡ä»¶ï¼Œæ­¤æ—¶æ–°çš„PATHå˜é‡ä¹Ÿå¯ä»¥ç«‹å³ç”Ÿæ•ˆäº†ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 mysql]# source /etc/profile</span><br></pre></td></tr></table></figure>

<p>â€‹        MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºè¿˜ä¼šè°ƒç”¨åˆ°ä¸€äº›ç¨‹åºæ–‡ä»¶å’Œå‡½æ•°åº“æ–‡ä»¶ã€‚ç”±äºå½“å‰æ˜¯é€šè¿‡æºç åŒ…æ–¹å¼å®‰è£…MySQLæ•°æ®åº“ï¼Œå› æ­¤ç°åœ¨ä¹Ÿå¿…é¡»ä»¥æ‰‹åŠ¨æ–¹å¼æŠŠè¿™äº›æ–‡ä»¶é“¾æ¥è¿‡æ¥ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mkdir /var/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/lib/mysql /usr/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/include/mysql /usr/include/mysql</span><br></pre></td></tr></table></figure>

<p>â€‹        ç°åœ¨ï¼ŒMySQLæ•°æ®åº“æœåŠ¡ç¨‹åºå·²ç»å¯åŠ¨ï¼Œè°ƒç”¨çš„å„ä¸ªå‡½æ•°æ–‡ä»¶å·²ç»å°±ä½ï¼ŒPATHç¯å¢ƒå˜é‡ä¸­ä¹ŸåŠ å…¥äº†MySQLæ•°æ®åº“å‘½ä»¤çš„æ‰€åœ¨ç›®å½•ã€‚æ¥ä¸‹æ¥å‡†å¤‡å¯¹MySQLæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mysql_secure_installation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MySQL to secure it, we'll need the current</span><br><span class="line">password for the root user.  If you've just installed MySQL, and</span><br><span class="line">you haven't set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MySQL</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y  ï¼ˆè¦ä¸ºrootç®¡ç†å‘˜è®¾ç½®æ•°æ®åº“çš„å¯†ç ï¼‰</span><br><span class="line">New password:  è¾“å…¥è¦ä¸ºrootç®¡ç†å‘˜è®¾ç½®çš„æ•°æ®åº“å¯†ç </span><br><span class="line">Re-enter new password:   å†è¾“å…¥ä¸€æ¬¡å¯†ç </span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MySQL without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y  ï¼ˆåˆ é™¤åŒ¿åè´¦æˆ·ï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from 'localhost'.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] y ï¼ˆç¦æ­¢rootç®¡ç†å‘˜ä»è¿œç¨‹ç™»å½•ï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named 'test' that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y ï¼ˆåˆ é™¤testæ•°æ®åº“å¹¶å–æ¶ˆå¯¹å…¶çš„è®¿é—®æƒé™ï¼‰</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y ï¼ˆåˆ·æ–°æˆæƒè¡¨ï¼Œè®©åˆå§‹åŒ–åçš„è®¾å®šç«‹å³ç”Ÿæ•ˆï¼‰</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">All done!  If you've completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MySQL!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®NginxæœåŠ¡"><a href="#é…ç½®NginxæœåŠ¡" class="headerlink" title="é…ç½®NginxæœåŠ¡"></a>é…ç½®NginxæœåŠ¡</h2><p>â€‹        åœ¨æ­£å¼å®‰è£…NginxæœåŠ¡ç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºå…¶è§£å†³ç›¸å…³çš„è½¯ä»¶ä¾èµ–å…³ç³»ï¼Œä¸‹é¢æ¥è§£å‹ã€ç¼–è¯‘ã€ç”Ÿæˆã€å®‰è£…NginxæœåŠ¡ç¨‹åºçš„æºç æ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf pcre-8.35.tar.gz</span><br><span class="line">[root@server222 src]# cd pcre-8.35</span><br><span class="line">[root@server222 pcre-8.35]# ./configure --prefix=/usr/local/pcre ï¼›make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        opensslè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›ç½‘ç«™åŠ å¯†è¯ä¹¦æœåŠ¡çš„ç¨‹åºæ–‡ä»¶ï¼Œåœ¨å®‰è£…è¯¥ç¨‹åºæ—¶éœ€è¦è‡ªå®šä¹‰æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•ï¼Œä»¥ä¾¿äºç¨åè°ƒç”¨å®ƒä»¬çš„æ—¶å€™æ›´å¯æ§ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf openssl-1.0.1h.tar.gz</span><br><span class="line">[root@server222 src]# cd openssl-1.0.1h</span><br><span class="line">[root@server222 openssl-1.0.1h]# ./config --prefix=/usr/local/openssl ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        opensslè½¯ä»¶åŒ…å®‰è£…åé»˜è®¤ä¼šåœ¨/usr/local/openssl/binç›®å½•ä¸­æä¾›å¾ˆå¤šçš„å¯ç”¨å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦åƒå‰é¢çš„æ“ä½œé‚£æ ·ï¼Œå°†è¿™ä¸ªç›®å½•æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ€åæ‰§è¡Œsourceå‘½ä»¤ä»¥ä¾¿è®©æ–°çš„PATHç¯å¢ƒå˜é‡å†…å®¹å¯ä»¥ç«‹å³ç”Ÿæ•ˆï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin:/usr/local/openssl/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 openssl-1.0.1h]# source /etc/profile</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä½¿ç”¨:set  nu å‘½ä»¤æ˜¾ç¤ºæ•°å­—        </p>
</blockquote>
<p>â€‹        zlibè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›å‹ç¼©åŠŸèƒ½çš„å‡½æ•°åº“æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf zlib-1.2.8.tar.gz</span><br><span class="line">[root@server222 src]# cd zlib-1.2.8</span><br><span class="line">[root@server222 zlib-1.2.8]# ./configure --prefix=/usr/local/zlib ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨å®‰è£…éƒ¨ç½²å¥½å…·æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºæ‰§è¡ŒNginxæœåŠ¡ç¨‹åºçš„è´¦æˆ·ã€‚è´¦æˆ·åç§°å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸€å®šåˆ«å¿˜è®°ï¼Œå› ä¸ºåœ¨åç»­éœ€è¦ç”¨åˆ°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zlib-1.2.8]# cd ..</span><br><span class="line">[root@server222 src]# useradd www -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨ä½¿ç”¨å‘½ä»¤ç¼–è¯‘NginxæœåŠ¡ç¨‹åºæ—¶ï¼Œéœ€è¦è®¾ç½®ç‰¹åˆ«å¤šçš„å‚æ•°</p>
<p>â€“prefixå‚æ•°ç”¨äºå®šä¹‰æœåŠ¡ç¨‹åºç¨åå®‰è£…åˆ°çš„ä½ç½®</p>
<p>â€“userä¸â€“groupå‚æ•°ç”¨äºæŒ‡å®šæ‰§è¡ŒNginxæœåŠ¡ç¨‹åºçš„ç”¨æˆ·åå’Œç”¨æˆ·ç»„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf nginx-1.6.0.tar.gz</span><br><span class="line">[root@server222 src]# cd nginx-1.6.0/</span><br><span class="line">[root@server222 nginx-1.6.0]# ./configure --prefix=/usr/local/nginx --without-http_memcached_module --user=www --group=www --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-openssl=/usr/local/src/openssl-1.0.1h --with-zlib=/usr/local/src/zlib-1.2.8 --with-pcre=/usr/local/src/pcre-8.35 ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        è¦æƒ³å¯åŠ¨NginxæœåŠ¡ç¨‹åºä»¥åŠå°†å…¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œä¹Ÿéœ€è¦æœ‰è„šæœ¬æ–‡ä»¶ã€‚å¯æƒœçš„æ˜¯ï¼Œåœ¨å®‰è£…å®ŒNginxè½¯ä»¶åŒ…ä¹‹åé»˜è®¤å¹¶æ²¡æœ‰ä¸ºç”¨æˆ·æä¾›è„šæœ¬æ–‡ä»¶</p>
<blockquote>
<p>æ­¤å¤„ä»£ç å¤åˆ¶ç²˜è´´å³å¯</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# vim /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# cat /etc/rc.d/init.d/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: - 85 15</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Nginx is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> proxy and IMAP/POP3 proxy server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> processname: nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pidfile: /usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Source <span class="keyword">function</span> library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"><span class="meta">#</span><span class="bash"> Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"><span class="meta">#</span><span class="bash"> Check that networking is up.</span></span><br><span class="line">[ "$NETWORKING" = "no" ] &amp;&amp; exit 0</span><br><span class="line">nginx="/usr/local/nginx/sbin/nginx"</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line">NGINX_CONF_FILE="/usr/local/nginx/conf/nginx.conf"</span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line">make_dirs() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash"> make required directories</span></span><br><span class="line">user=`$nginx -V 2&gt;&amp;1 | grep "configure arguments:" | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -`</span><br><span class="line">        if [ -z "`grep $user /etc/passwd`" ]; then</span><br><span class="line">                useradd -M -s /bin/nologin $user</span><br><span class="line">        fi</span><br><span class="line">options=`$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'`</span><br><span class="line">for opt in $options; do</span><br><span class="line">        if [ `echo $opt | grep '.*-temp-path'` ]; then</span><br><span class="line">                value=`echo $opt | cut -d "=" -f 2`</span><br><span class="line">                if [ ! -d "$value" ]; then</span><br><span class="line">                        # echo "creating" $value</span><br><span class="line">                        mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">start() &#123;</span><br><span class="line">[ -x $nginx ] || exit 5</span><br><span class="line">[ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">make_dirs</span><br><span class="line">echo -n $"Starting $prog: "</span><br><span class="line">daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">stop() &#123;</span><br><span class="line">echo -n $"Stopping $prog: "</span><br><span class="line">killproc $prog -QUIT</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">restart() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">stop</span><br><span class="line">sleep 1</span><br><span class="line">start</span><br><span class="line">&#125;</span><br><span class="line">reload() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">echo -n $"Reloading $prog: "</span><br><span class="line">killproc $nginx -HUP</span><br><span class="line">RETVAL=$?</span><br><span class="line">echo</span><br><span class="line">&#125;</span><br><span class="line">force_reload() &#123;</span><br><span class="line">restart</span><br><span class="line">&#125;</span><br><span class="line">configtest() &#123;</span><br><span class="line"><span class="meta">$</span><span class="bash">nginx -t -c <span class="variable">$NGINX_CONF_FILE</span></span></span><br><span class="line">&#125;</span><br><span class="line">rh_status() &#123;</span><br><span class="line">status $prog</span><br><span class="line">&#125;</span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">restart|configtest)</span><br><span class="line"><span class="meta">$</span><span class="bash">1</span></span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">echo $"Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span><br><span class="line">exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜è„šæœ¬æ–‡ä»¶åè®°å¾—ä¸ºå…¶èµ‹äºˆ755æƒé™ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ‰§è¡Œè¿™ä¸ªè„šæœ¬</p>
<p>ç„¶åä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œé€šè¿‡restartå‚æ•°é‡å¯NginxæœåŠ¡ç¨‹åº</p>
<p>æœ€åå†ä½¿ç”¨chkconfigå‘½ä»¤å°†NginxæœåŠ¡ç¨‹åºæ·»åŠ è‡³å¼€æœºå¯åŠ¨é¡¹ä¸­</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# chmod 755 /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# /etc/rc.d/init.d/nginx restart</span><br><span class="line">Reloading systemd:                                         [  ç¡®å®š  ]</span><br><span class="line">Restarting nginx (via systemctl):                          [  ç¡®å®š  ]</span><br><span class="line">[root@server222 nginx-1.6.0]# chkconfig nginx on</span><br></pre></td></tr></table></figure>

<p>NginxæœåŠ¡ç¨‹åºåœ¨å¯åŠ¨åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€æ¥æŸ¥çœ‹åˆ°é»˜è®¤ç½‘é¡µäº†ã€‚ç›¸è¾ƒäºApacheæœåŠ¡ç¨‹åºçš„çº¢è‰²é»˜è®¤é¡µé¢ï¼ŒNginxæœåŠ¡ç¨‹åºçš„é»˜è®¤é¡µé¢æ˜¾å¾—æ›´åŠ ç®€æ´ã€‚</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mp8724.png" alt></p>
<h2 id="é…ç½®PHPæœåŠ¡"><a href="#é…ç½®PHPæœåŠ¡" class="headerlink" title="é…ç½®PHPæœåŠ¡"></a>é…ç½®PHPæœåŠ¡</h2><p>è§£å†³PHPçš„ç¨‹åºåŒ…å’Œå…¶ä»–è½¯ä»¶çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>éœ€è¦å…ˆå®‰è£…éƒ¨ç½²å°†è¿‘åä¸ªç”¨äºæ­å»ºç½‘ç«™é¡µé¢çš„è½¯ä»¶ç¨‹åºåŒ…ï¼Œç„¶åæ‰èƒ½æ­£å¼å®‰è£…PHPç¨‹åºã€‚</p>
<blockquote>
<p><code>yasm  libmcrypt  libvpx  tiff  libpng  freetype  jpeg  libgd  t1lib</code></p>
</blockquote>
<p><code>yasm</code>æºç åŒ…æ˜¯ä¸€æ¬¾å¸¸è§çš„å¼€æºæ±‡ç¼–å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf yasm-1.2.0.tar.gz</span><br><span class="line">[root@server222 src]# cd yasm-1.2.0</span><br><span class="line">[root@server222 yasm-1.2.0]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libmcrypt</code>æºç åŒ…æ˜¯ç”¨äºåŠ å¯†ç®—æ³•çš„æ‰©å±•åº“ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yasm-1.2.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libmcrypt-2.5.8.tar.gz</span><br><span class="line">[root@server222 src]# cd libmcrypt-2.5.8</span><br><span class="line">[root@server222 libmcrypt-2.5.8]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libvpx</code>æºç åŒ…æ˜¯ç”¨äºæä¾›è§†é¢‘ç¼–ç å™¨çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libmcrypt-2.5.8]# cd ..</span><br><span class="line">[root@server222 src]# tar xjvf libvpx-v1.3.0.tar.bz2</span><br><span class="line">[root@server222 src]# cd libvpx-v1.3.0</span><br><span class="line">[root@server222 libvpx-v1.3.0]# ./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9 ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>tiff</code>æºç åŒ…æ˜¯ç”¨äºæä¾›æ ‡ç­¾å›¾åƒæ–‡ä»¶æ ¼å¼çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libvpx-v1.3.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf tiff-4.0.3.tar.gz</span><br><span class="line">[root@server222 src]# cd tiff-4.0.3</span><br><span class="line">[root@server222 tiff-4.0.3]# ./configure --prefix=/usr/local/tiff --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libpng</code>æºç åŒ…æ˜¯ç”¨äºæä¾›pngå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tiff-4.0.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libpng-1.6.12.tar.gz</span><br><span class="line">[root@server222 src]# cd libpng-1.6.12</span><br><span class="line">[root@server222 libpng-1.6.12]# ./configure --prefix=/usr/local/libpng --enable-shared ï¼›make ; make install</span><br></pre></td></tr></table></figure>

<p><code>freetype</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å­—ä½“æ”¯æŒå¼•æ“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libpng-1.6.12]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf freetype-2.5.3.tar.gz</span><br><span class="line">[root@server222 src]# cd freetype-2.5.3</span><br><span class="line">[root@server222 freetype-2.5.3]# ./configure --prefix=/usr/local/freetype --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>jpeg</code>æºç åŒ…æ˜¯ç”¨äºæä¾›jpegå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 freetype-2.5.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf jpegsrc.v9a.tar.gz</span><br><span class="line">[root@server222 src]# cd jpeg-9a</span><br><span class="line">[root@server222 jpeg-9a]# ./configure --prefix=/usr/local/jpeg --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libgd</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å›¾å½¢å¤„ç†çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 jpeg-9a]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libgd-2.1.0.tar.gz</span><br><span class="line">[root@server222 src]# cd libgd-2.1.0</span><br><span class="line">[root@server222 libgd-2.1.0]# ./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpx ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>t1lib</code>æºç åŒ…æ˜¯ç”¨äºæä¾›å›¾ç‰‡ç”Ÿæˆå‡½æ•°åº“çš„æœåŠ¡ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libgd-2.1.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf t1lib-5.1.2.tar.gz</span><br><span class="line">[root@server222 src]# cd t1lib-5.1.2</span><br><span class="line">[root@server222 t1lib-5.1.2]# ./configure --prefix=/usr/local/t1lib --enable-shared ; make ; make install</span><br><span class="line">[root@server222 t1lib-5.1.2]# ln -s /usr/lib64/libltdl.so /usr/lib/libltdl.so</span><br><span class="line">[root@server222 t1lib-5.1.2]# cp -frp /usr/lib64/libXpm.so* /usr/lib/</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨å¼€å§‹ç¼–è¯‘phpæºç åŒ…ä¹‹å‰ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªåä¸ºLD_LIBRARY_PATHçš„å…¨å±€ç¯å¢ƒå˜é‡ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„ä½œç”¨æ˜¯å¸®åŠ©ç³»ç»Ÿæ‰¾åˆ°æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ç¼–è¯‘phpæœåŠ¡æºç åŒ…çš„å¿…é¡»å…ƒç´ ä¹‹ä¸€ã€‚ç¼–è¯‘phpæœåŠ¡æºç åŒ…æ—¶ï¼Œé™¤äº†å®šä¹‰è¦å®‰è£…åˆ°çš„ç›®å½•ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¾æ¬¡å®šä¹‰é…ç½®phpæœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶çš„ä¿å­˜ç›®å½•ã€MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºæ‰€åœ¨ç›®å½•ã€MySQLæ•°æ®åº“æœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œä»¥åŠlibpngã€jpegã€freetypeã€libvpxã€zlibã€t1libç­‰æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•è·¯å¾„ï¼Œå¹¶é€šè¿‡å‚æ•°å¯åŠ¨phpæœåŠ¡ç¨‹åºçš„è¯¸å¤šé»˜è®¤åŠŸèƒ½</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 t1lib-5.1.2]# cd ..</span><br><span class="line">[root@server222 src]# tar -zvxf php-5.5.14.tar.gz</span><br><span class="line">[root@server222 src]# cd php-5.5.14</span><br><span class="line">[root@server222 php-5.5.14]# export LD_LIBRARY_PATH=/usr/local/libgd/lib</span><br><span class="line">[root@server222 php-5.5.14]# ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctype ; make ; make install</span><br></pre></td></tr></table></figure>

<p>â€‹        åœ¨phpæºç åŒ…ç¨‹åºå®‰è£…å®Œæˆåï¼Œéœ€è¦åˆ é™¤å½“å‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åå°†phpæœåŠ¡ç¨‹åºç›®å½•ä¸­ç›¸åº”çš„é…ç½®æ–‡ä»¶å¤åˆ¶è¿‡æ¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# rm -rf /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php.ini /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf</span><br></pre></td></tr></table></figure>

<p>â€‹        php-fpm.confæ˜¯phpæœåŠ¡ç¨‹åºé‡è¦çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨è¯¥é…ç½®æ–‡ä»¶ä¸­ç¬¬25è¡Œå·¦å³çš„pidæ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œç„¶ååˆ†åˆ«å°†ç¬¬148å’Œ149è¡Œçš„userä¸groupå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºwwwè´¦æˆ·å’Œç”¨æˆ·ç»„åç§°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php-fpm.conf</span><br><span class="line">24 ; Default Value: none</span><br><span class="line">25 pid = run/php-fpm.pid</span><br><span class="line">26 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">147 ; will be used.</span><br><span class="line">148 user = www</span><br><span class="line">149 group = www</span><br><span class="line">150</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu å¯æŸ¥çœ‹è¡Œæ•°</p>
</blockquote>
<p>â€‹        é…ç½®å¦¥å½“åä¾¿å¯æŠŠç”¨äºç®¡ç†phpæœåŠ¡çš„è„šæœ¬æ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dä¸­äº†ã€‚ä¸ºäº†èƒ½å¤Ÿæ‰§è¡Œè„šæœ¬ï¼Œè¯·è®°å¾—ä¸ºè„šæœ¬èµ‹äºˆ755æƒé™ã€‚æœ€åæŠŠphp-fpmæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chmod 755 /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure>

<p>â€‹        ç”±äºphpæœåŠ¡ç¨‹åºçš„é…ç½®å‚æ•°ç›´æ¥ä¼šå½±å“åˆ°WebæœåŠ¡æœåŠ¡çš„è¿è¡Œç¯å¢ƒï¼Œå› æ­¤ï¼Œå¦‚æœé»˜è®¤å¼€å¯äº†ä¸€äº›ä¸å¿…è¦ä¸”é«˜å±çš„åŠŸèƒ½ï¼ˆå¦‚å…è®¸ç”¨æˆ·åœ¨ç½‘é¡µä¸­æ‰§è¡ŒLinuxå‘½ä»¤ï¼‰ï¼Œåˆ™ä¼šé™ä½ç½‘ç«™è¢«å…¥ä¾µçš„éš¾åº¦ï¼Œå…¥ä¾µäººå‘˜ç”šè‡³å¯ä»¥æ‹¿åˆ°æ•´å°WebæœåŠ¡å™¨çš„ç®¡ç†æƒé™ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç¼–è¾‘php.inié…ç½®æ–‡ä»¶ï¼Œåœ¨305è¡Œçš„disable_functionså‚æ•°åé¢è¿½åŠ ä¸Šè¦ç¦æ­¢çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line">304 ; http://php.net/disable-functions</span><br><span class="line">305 disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</span><br></pre></td></tr></table></figure>

<p>â€‹        è¿™æ ·å°±æŠŠphpæœåŠ¡ç¨‹åºé…ç½®å¦¥å½“äº†ã€‚æœ€åï¼Œè¿˜éœ€è¦ç¼–è¾‘NginxæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŠŠç¬¬2è¡Œçš„äº•å·ï¼ˆ#ï¼‰åˆ é™¤ï¼Œç„¶ååœ¨åé¢å†™ä¸Šè´Ÿè´£è¿è¡ŒNginxæœåŠ¡ç¨‹åºçš„è´¦æˆ·åç§°å’Œç”¨æˆ·ç»„åç§°ï¼›åœ¨ç¬¬45è¡Œçš„indexå‚æ•°åé¢å†™ä¸Šç½‘ç«™çš„é¦–é¡µåç§°ã€‚</p>
<p>â€‹        æœ€åæ˜¯å°†ç¬¬65ï½71è¡Œå‚æ•°å‰çš„äº•å·ï¼ˆ#ï¼‰åˆ é™¤æ¥å¯ç”¨å‚æ•°ï¼Œä¸»è¦æ˜¯ä¿®æ”¹ç¬¬69è¡Œçš„è„šæœ¬åç§°è·¯å¾„å‚æ•°ï¼Œå…¶ä¸­$document_rootå˜é‡å³ä¸ºç½‘ç«™ä¿¡æ¯å­˜å‚¨çš„æ ¹ç›®å½•è·¯å¾„ï¼Œè‹¥æ²¡æœ‰è®¾ç½®è¯¥å˜é‡ï¼Œåˆ™NginxæœåŠ¡ç¨‹åºæ— æ³•æ‰¾åˆ°ç½‘ç«™ä¿¡æ¯ï¼Œå› æ­¤ä¼šæç¤ºâ€œ404é¡µé¢æœªæ‰¾åˆ°â€çš„æŠ¥é”™ä¿¡æ¯ã€‚åœ¨ç¡®è®¤å‚æ•°ä¿¡æ¯å¡«å†™æ­£ç¡®åä¾¿å¯é‡å¯NginxæœåŠ¡ä¸php-fpmæœåŠ¡ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line"> 1 </span><br><span class="line"> 2 user www www;</span><br><span class="line"> 3 worker_processes 1;</span><br><span class="line"> 4 </span><br><span class="line"> </span><br><span class="line"> 44 	root html;</span><br><span class="line"> 45 	index index.html index.htm index.php forum.php;</span><br><span class="line"> 46 &#125;</span><br><span class="line"> 47 </span><br><span class="line"> </span><br><span class="line"> 64         #</span><br><span class="line"> 65         location ~ \.php$ &#123;</span><br><span class="line"> 66             root           html;</span><br><span class="line"> 67             fastcgi_pass   127.0.0.1:9000;</span><br><span class="line"> 68             fastcgi_index  index.php;</span><br><span class="line"> 69         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line"> 70             include        fastcgi_params;</span><br><span class="line"> 71         &#125;</span><br><span class="line"> 72</span><br><span class="line"> 73         # deny access to .htaccess files, if Apache's document root</span><br><span class="line"></span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart nginx</span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»65è¡Œåˆ°71è¡Œçš„æ³¨é‡Šéœ€è¦å»æ‰</p>
</blockquote>
<p>è‡³æ­¤ï¼ŒLNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ¶æ„çš„é…ç½®å®éªŒå…¨éƒ¨ç»“æŸã€‚</p>
<h2 id="æ­å»ºDiscuz-è®ºå›"><a href="#æ­å»ºDiscuz-è®ºå›" class="headerlink" title="æ­å»ºDiscuz!è®ºå›"></a>æ­å»ºDiscuz!è®ºå›</h2><p>â€‹        ä¸ºäº†æ£€éªŒLNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ˜¯å¦é…ç½®å¦¥å½“ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ä¸Šé¢éƒ¨ç½²Discuz!ç³»ç»Ÿï¼Œç„¶åæŸ¥çœ‹ç»“æœã€‚å¦‚æœèƒ½å¤Ÿåœ¨LNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸­æˆåŠŸå®‰è£…ä½¿ç”¨Discuz!è®ºå›ç³»ç»Ÿï¼Œä¹Ÿå°±æ„å‘³ç€è¿™å¥—æ¶æ„æ˜¯å¯ç”¨çš„ã€‚Discuz! X3.2æ˜¯å›½å†…æœ€å¸¸è§çš„ç¤¾åŒºè®ºå›ç³»ç»Ÿï¼Œåœ¨ç»è¿‡åå¤šå¹´çš„ç ”å‘åå·²ç»æˆä¸ºäº†å…¨çƒæˆç†Ÿåº¦æœ€é«˜ã€è¦†ç›–ç‡æœ€å¹¿çš„è®ºå›ç½‘ç«™ç³»ç»Ÿä¹‹ä¸€ã€‚</p>
<p>â€‹        Discuz! X3.2è½¯ä»¶åŒ…çš„åç¼€æ˜¯.zipæ ¼å¼ï¼Œå› æ­¤åº”å½“ä½¿ç”¨ä¸“ç”¨çš„unzipå‘½ä»¤æ¥è¿›è¡Œè§£å‹ã€‚è§£å‹åä¼šåœ¨å½“å‰ç›®å½•ä¸­å‡ºç°ä¸€ä¸ªåä¸ºuploadçš„æ–‡ä»¶ç›®å½•ï¼Œè¿™é‡Œé¢ä¿å­˜çš„å°±æ˜¯Discuzï¼è®ºå›çš„ç³»ç»Ÿç¨‹åºã€‚æˆ‘ä»¬æŠŠNginxæœåŠ¡ç¨‹åºç½‘ç«™æ ¹ç›®å½•çš„å†…å®¹æ¸…ç©ºåï¼Œå°±å¯ä»¥æŠŠè¿™äº›è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶éƒ½å¤åˆ¶è¿›å»äº†ã€‚è®°å¾—æŠŠNginxæœåŠ¡ç¨‹åºçš„ç½‘ç«™æ ¹ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¿®æ”¹ä¸ºæœ¬åœ°çš„wwwç”¨æˆ·ï¼Œå¹¶ä¸ºå…¶èµ‹äºˆ755æƒé™ä»¥ä¾¿äºèƒ½å¤Ÿè¯»ã€å†™ã€æ‰§è¡Œè¯¥è®ºå›ç³»ç»Ÿå†…çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cd /usr/local/src/</span><br><span class="line">[root@server222 src]# unzip Discuz_X3.2_SC_GBK.zip</span><br><span class="line">[root@server222 src]# rm -rf /usr/local/nginx/html/&#123;index.html,50x.html&#125;*</span><br><span class="line">[root@server222 src]# mv upload/* /usr/local/nginx/html/</span><br><span class="line">[root@server222 src]# chown -Rf www:www /usr/local/nginx/html</span><br><span class="line">[root@server222 src]# chmod -Rf 755 /usr/local/nginx/html</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä¹‹ååœ¨æµè§ˆå™¨è¾“å…¥<code>192.168.176.222/install</code></p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPeM2n.png" alt></p>
<blockquote>
<p>ä¾æ¬¡æŒ‰ç…§å‚»ç“œå¼æ­¥éª¤ä¸‹ä¸€æ­¥</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe4Mt.png" alt></p>
<blockquote>
<p>ä½¿ç”¨adminç®¡ç†å‘˜è´¦æˆ·ç™»å½•</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe1K0.png" alt></p>
<blockquote>
<p> åˆ°æ­¤ç»“æŸLNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²ï¼Œå¦‚æœæ‚¨è§‰å¾—ä¸æ‡‚ï¼Œå¯ç§ä¿¡ç»™æˆ‘ï¼ŒåæœŸå°†å†™ä¸€äº›éƒ¨ç½²dockerå®¹å™¨è™šæ‹ŸåŒ–å¹³å°</p>
</blockquote>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/29.linux--LNMP/" data-id="ck7ooyal8003e4su6wxhi9weg"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿ç»´/">linuxè¿ç»´</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-28.linux--RHCE 7ç‰ˆæœ¬è®¤è¯è€ƒè¯•ç»ƒä¹ " class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/28.linux--RHCE 7ç‰ˆæœ¬è®¤è¯è€ƒè¯•ç»ƒä¹ /"
    >RHCE 7ç‰ˆæœ¬è®¤è¯è€ƒè¯•ç»ƒä¹ </a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/28.linux--RHCE 7ç‰ˆæœ¬è®¤è¯è€ƒè¯•ç»ƒä¹ /" class="article-date">
  <time datetime="2020-03-12T11:38:40.266Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p>å†™åœ¨å‰é¢çš„è¯ï¼šè€ƒè¯•ç»ƒä¹ ä¸ç­‰äºçœŸå®è€ƒè¯•è€ƒé¢˜ï¼Œé‡Œé¢çš„æ•°æ®å¯èƒ½ä¹Ÿä¸æ‚¨è€ƒè¯•ç»ƒä¹ çš„æ•°æ®ä¸ä¸€æ ·ï¼Œè¯·è®¤çœŸä»”ç»†ã€‚ç¥æ„¿RHCEå–å¾—å¥½æˆç»©ï¼ï¼</p>
</blockquote>
<p>[TOC]</p>
<h2 id="æ¨¡æ‹Ÿè€ƒå‰é…ç½®"><a href="#æ¨¡æ‹Ÿè€ƒå‰é…ç½®" class="headerlink" title="æ¨¡æ‹Ÿè€ƒå‰é…ç½®"></a>æ¨¡æ‹Ÿè€ƒå‰é…ç½®</h2><blockquote>
<p>å‡†å¤‡å‰</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬è¦å°†ä¸‰å°è™šæ‹Ÿæœºå¼€å¯<br>classroomæ˜¯172.25.0.254</p>
<p>desktopæ˜¯172.25.0.10</p>
<p>serveræ˜¯172.25.0.11</p>
<p>å‰ææ˜¯ä¸‰ä¸ªä¸»æœºèƒ½äº’ç›¸pingé€š</p>
<p>ç„¶åæˆ‘ä»¬åœ¨æœ¬åœ°ä¸Šè¿œç¨‹åˆ°classroom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ ssh root@172.25.0.254</span><br><span class="line">Last login: Sat Jul  6 09:08:15 2019 from 172.25.0.250</span><br><span class="line">[root@classroom ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>ç­‰å¾…è¿œç¨‹è¿‡å»ä¹‹å</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># tail /etc/httpd/logs/error_log</span></span><br></pre></td></tr></table></figure>

<p>å°†é‚£æ®µå­—æ¯å¤åˆ¶(NSSå¼€å¤´ï¼Œoffç»“å°¾çš„é‚£æ®µï¼Œå…·ä½“æˆ‘ä¹Ÿä¸æ˜¯å¸¦æ¸…æ¥š)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># vim /etc/httpd/conf.d/nss.conf</span></span><br></pre></td></tr></table></figure>

<p>å°†ä½ å¤åˆ¶çš„é‚£æ®µç²˜è´´åˆ°æœ€åº•éƒ¨ï¼Œç„¶åä¿å­˜å¹¶é€€å‡º</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@classroom ~]<span class="comment"># cd /var/www/html/pub/</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹" &gt; example.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige åœ¨ server ä¸Šæ‰©å±•æ‚¨çš„ WEB æœåŠ¡å™¨" &gt; www.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># echo "zheshi yige web è®¿é—®æ§åˆ¶â€œ &gt; private.html</span></span><br><span class="line">[root@classroom pub]<span class="comment"># vim webapp.wsgi</span></span><br><span class="line">[root@classroom pub]<span class="comment"># cat webapp.wsgi </span></span><br><span class="line">def application(environ, start_response):</span><br><span class="line">    status = <span class="string">'200 OK'</span></span><br><span class="line">    output = <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line">    response_headers = [(<span class="string">'Content-type'</span>, <span class="string">'text/plain'</span>),</span><br><span class="line">                        (<span class="string">'Content-Length'</span>, str(len(output)))]</span><br><span class="line">    start_response(status, response_headers)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> [output]</span><br><span class="line"></span><br><span class="line">[root@classroom pub]<span class="comment"># vim user</span></span><br><span class="line">[root@classroom pub]<span class="comment"># cat user</span></span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br><span class="line">user5</span><br><span class="line"></span><br><span class="line">[root@foundation0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@foundation0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br><span class="line">[root@foundation0 ~]<span class="comment"># ssh root@172.25.0.10</span></span><br><span class="line">Last login: Sat Jul  6 09:08:15 2019 from 172.25.0.10</span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br><span class="line">[root@foundation0 ~]<span class="comment"># ssh root@172.25.0.11</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">172.25.0.11 server.example.com alt.example.com www.example.com</span><br></pre></td></tr></table></figure>

<p>æ›´æ”¹ç½‘å¡åœ¨æœ¬åœ°åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼ˆæ­¤é¢˜éœ€è¦åšåé¢çš„é“¾è·¯èšåˆï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ su -</span><br><span class="line">Password: </span><br><span class="line">[root@foundation0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯†ç æ˜¯ï¼šAsimov</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation0 ~]<span class="comment"># virt-manager</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/07/08/ZDoh6K.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/07/08/ZDoWSx.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/07/08/ZDobtA.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/07/08/ZDIdqe.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/07/08/ZDofl6.png" alt></p>
<blockquote>
<p>æŒ‰ç…§è¿™ç§æ–¹å¼ï¼Œåœ¨server å’Œ desktopä¸¤å°è™šæ‹Ÿæœºé‡Œé¢æ·»åŠ ä¸¤å—ç½‘å¡ï¼Œä¿è¯æœ‰ä¸‰å¿«ç½‘å¡</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç„¶åç›´æ¥å°†æ•´ä¸ªå¤§è™šæ‹Ÿæœºé‡å¯</p>
</blockquote>
<blockquote>
<p>æ•°æ®åº“æ–‡ä»¶å› è¿‡ç¹å¤šå†…å®¹ï¼Œæ­¤å¤„æ•°æ®åº“æ–‡ä»¶è¯·æ‰¾æˆ‘è¿›è¡Œæ‹·è´ã€‚</p>
</blockquote>
<p>æ‰“å¼€ç«ç‹æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://classroom.example.com/" target="_blank" rel="noopener">http://classroom.example.com/</a></p>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æ¨¡æ‹Ÿè€ƒè¯•å‰éœ€è¦åšçš„ï¼ŒçœŸå®è€ƒè¯•ä¸éœ€è¦é…ç½®ä»¥ä¸Šæ­¥éª¤</p>
<p>ä¸‹é¢å°±å¼€å§‹æ¨¡æ‹Ÿè€ƒé¢˜</p>
</blockquote>
<h2 id="å¼€å§‹è€ƒé¢˜"><a href="#å¼€å§‹è€ƒé¢˜" class="headerlink" title="å¼€å§‹è€ƒé¢˜"></a>å¼€å§‹è€ƒé¢˜</h2><blockquote>
<p>è¯·æ³¨æ„ï¼šç”±äºæœ¬æœºç¯å¢ƒåŸå› ä¸Šè¿°æ¨¡æ‹Ÿè€ƒå‰é…ç½®æ˜¯æ­£å¼è€ƒè¯•å‰ä¸éœ€è¦åšçš„ï¼Œè€ƒè€…åˆ‡è®°æ­£å¼è€ƒè¯•æ˜¯ä¸ç”¨åšå‰é¢çš„ä¸œè¥¿</p>
<p> ç°åœ¨æ­£å¼å¼€å§‹ä½ çš„è€ƒè¯•:</p>
</blockquote>
<h3 id="é…ç½®ä¿¡æ¯"><a href="#é…ç½®ä¿¡æ¯" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h3><p>æ‚¨åœ¨è€ƒè¯•ä¸­å°†ä½¿ç”¨åˆ°ä¸¤ä¸ªç³»ç»Ÿçš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<p><strong>desktop0.example.com : ä½œä¸ºæœåŠ¡å™¨</strong></p>
<p><strong>server0.example.com : ä½œä¸ºå®¢æˆ·ç«¯</strong></p>
<p><strong>ä¸¤ä¸ªç³»ç»Ÿ</strong>çš„<strong>rootå¯†ç </strong>ä¸º<strong>redhat</strong></p>
<p>ç³»ç»Ÿçš„IPåœ°å€æœ‰DHCPæä¾›ï¼Œæ‚¨å¯ä»¥è§†ä¸ºæ­£å¸¸ï¼Œæˆ–è€…æ‚¨å¯ä»¥æŒ‰ç…§ä¸€ä¸‹ä¿¡æ¯é‡æ–°è®¾ç½®æœªé™æ€IPï¼š</p>
<p><strong>server0.example.com ï¼š 172.24.8.11/24</strong></p>
<p><strong>desktop0.example.com ï¼š 172.24.8.10/24</strong></p>
<p>ä¸¤ä¸ªç³»ç»Ÿå‡ä¸ºDNSåŸŸexample.comçš„æˆå‘˜ã€‚é™¤éç‰¹åˆ«çŸ¥åï¼Œæ‰€æœ‰è¦æ±‚é…ç½®çš„ç½‘ç»œæœåŠ¡éƒ½å¿…é¡»èƒ½è¢«è¯¥åŸŸçš„ç³»ç»Ÿè®¿é—®ã€‚</p>
<p>classroom.example.comæä¾›äº†é›†ä¸­è®¤è¯çš„æœåŠ¡å™¨ä¸ºexample.comã€‚ä¸¤ä¸ªç³»ç»Ÿdesktop0å’Œserver0éƒ½å·²ç»é¢„å…ˆé…ç½®æˆæ­¤åŸŸçš„å®¢æˆ·ç«¯ã€‚</p>
<p>classroom.example.com æä¾›äº†YUMè½¯ä»¶ä»“åº“ï¼ŒURLæ˜¯ <a href="http://classroom.example.com/content/rhel7.0/x86_64/dvd/" target="_blank" rel="noopener">http://classroom.example.com/content/rhel7.0/x86_64/dvd/</a> .</p>
<p>é˜²ç«å¢™æ˜¯é»˜è®¤æ‰“å¼€çš„ï¼Œåœ¨æ‚¨è®¤ä¸ºé€‚å½“çš„æ—¶å€™å¯ä»¥å…³é—­ã€‚å…¶ä»–é˜²ç«å¢™çš„è®¾ç½®å¯èƒ½åœ¨å•ç‹¬çš„è¦æ±‚ä¸­ã€‚</p>
<p>my133.org(172.13.0.0/24)ä½œä¸ºä¸å¯ä¿¡ç½‘ç»œã€‚</p>
<p>ã€‹ ã€‹ ã€‹ ã€‹ ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹</p>
<h2 id="å‚è€ƒç­”æ¡ˆ"><a href="#å‚è€ƒç­”æ¡ˆ" class="headerlink" title="å‚è€ƒç­”æ¡ˆ"></a>å‚è€ƒç­”æ¡ˆ</h2><h4 id="1-é…ç½®-YUM"><a href="#1-é…ç½®-YUM" class="headerlink" title="1.é…ç½® YUM"></a>1.é…ç½® YUM</h4><blockquote>
<p> é…ç½®yumæºè€ƒè¯•æ—¶å€™æ˜¯ä¸ä½œä¸ºè€ƒé¢˜çš„ï¼Œéœ€è¦è€ƒè€…è‡ªå·±å»é˜…è¯»é…ç½®æ–‡æ¡£ï¼Œé‡Œé¢æœ‰è¯´æ˜</p>
</blockquote>
<ul>
<li>åˆ†åˆ«åœ¨ server å’Œ desktop ä¸Šé…ç½® YUM,æŒ‡å‘:</li>
</ul>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[rhce]</span><br><span class="line">name=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">baseurl=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><strong>desktop0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/yum.repos.d/rhce.repo</span></span><br><span class="line">[rhce]</span><br><span class="line">name=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">baseurl=http://classroom.example.com/content/rhel7.0/x86_64/dvd/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¸€é¢˜æ˜¯åœ¨çœŸå®è€ƒè¯•ä¸­ä¸åšè€ƒé¢˜ï¼Œæ‚¨éœ€è¦è‡ªå·±é…ç½®ï¼Œyumæºå°±åœ¨æ–‡ä¸­çš„ä¿¡æ¯å½“ä¸­ï¼ŒåŒ…æ‹¬åé¢çš„å„ä¸ªåŸŸåçš„æ‰€å½’å±çš„ç½‘æ®µã€‚æ‚¨éœ€è¦å»é˜…è¯»é…ç½®ä¿¡æ¯ï¼Œè¿™é‡Œé…ç½®ä¿¡æ¯åœ¨æœ¬åšå®¢å¼€å¤´éƒ¨åˆ†ã€‚</p>
</blockquote>
<h4 id="2-é…ç½®-SELinux"><a href="#2-é…ç½®-SELinux" class="headerlink" title="2.é…ç½® SELinux"></a>2.é…ç½® SELinux</h4><ul>
<li>SElinux æœ‰ä¸‰ç§æ¨¡å¼,è¯·å°† server ä¸ desktop è¿è¡Œäºå¼ºåˆ¶æ¨¡å¼</li>
</ul>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/selinux/config | grep SELINUX=en</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line">[root@server0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>

<p><strong>desktop0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/selinux/config | grep SELINUX=en</span></span><br><span class="line">SELINUX=enforcing</span><br><span class="line">[root@desktop0 ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…¶å®å¯ä»¥ä¸ç”¨rebooté‡å¯è™šæ‹Ÿæœºï¼Œä¸¤è¾¹æ”¹å®Œé…ç½®æ–‡ä»¶ä¹‹å</p>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># setenforce 1</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># getenforce</span></span><br><span class="line">&gt; Enforcing</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>é…ç½®æ–‡ä»¶ä¹Ÿæ”¹ä¸ºenforcing</p>
<p>åŒæ ·æˆ‘ä»¬ä¹Ÿä¸´æ—¶è·å–åˆ°Enforcingæƒé™</p>
<p>æ¥ä¸‹æ¥å¯ä¸è¦å¿˜è®°äº†å¦å¤–ä¸€å°è™šæ‹Ÿæœºäº†å“¦</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># setenforce 1</span></span><br><span class="line">&gt; [root@server0 ~]<span class="comment"># getenforce</span></span><br><span class="line">&gt; Enforcing</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3-é…ç½®-SSH"><a href="#3-é…ç½®-SSH" class="headerlink" title="3.é…ç½® SSH"></a>3.é…ç½® SSH</h4><ul>
<li>ç”¨æˆ·èƒ½å¤Ÿä»åŸŸ example.com å†…çš„å®¢æˆ·ç«¯é€šè¿‡ SSH è®¿é—®æ‚¨çš„ä¸¤ä¸ªè™šæ‹Ÿæœºç³»ç»Ÿ</li>
<li>åœ¨åŸŸ my133t.org å†…çš„å®¢æˆ·ç«¯ä¸èƒ½è®¿é—®æ‚¨çš„ä¸¤ä¸ªè™šæ‹Ÿæœºç³»ç»Ÿ</li>
</ul>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># systemctl stop iptables ebtables</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl disable iptables ebtables</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl mask iptables ebtables</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/iptables.service'</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/ebtables.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart firewalld</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable firewalld</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --remove-service=ssh --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=ssh accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<p><strong>desktop0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># systemctl stop iptables ebtables</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl disable iptables ebtables</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl mask iptables ebtables</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/iptables.service'</span></span><br><span class="line">ln -s <span class="string">'/dev/null'</span> <span class="string">'/etc/systemd/system/ebtables.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart firewalld</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable firewalld</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --remove-service=ssh --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=ssh accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@desktop0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åšå®Œè¿™äº›æ“ä½œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡ºæ¥æŸ¥çœ‹ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦ä¸æˆ‘ä»¬æƒ³çš„ä¸€è‡´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; 	rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ä»æ­¤å¤„æˆ‘ä»¬å¯ä»¥çœ‹å‡ºsshè¿™ä¸ªæœåŠ¡æ²¡æœ‰äº†ï¼Œä»è€Œæ·»åŠ ä¸Šäº†å…è®¸172.25.0.0/24è¿™ä¸ªç½‘æ®µçš„ä¸»æœºå»è®¿é—®ï¼Œä¸æˆ‘ä»¬æ‰€æƒ³çš„ä¸€è‡´ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ª</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; 	rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="4-å‘½ä»¤åˆ«ååŠIP-è½¬å‘"><a href="#4-å‘½ä»¤åˆ«ååŠIP-è½¬å‘" class="headerlink" title="4.å‘½ä»¤åˆ«ååŠIP è½¬å‘"></a>4.å‘½ä»¤åˆ«ååŠIP è½¬å‘</h4><p><strong>1ï¼‰åœ¨ç³»ç»Ÿ server å’Œ desktop ä¸Šåˆ›å»ºè‡ªå®šä¹‰å‘½ä»¤ä¸º tk,æ­¤è‡ªå®šä¹‰å‘½ä»¤å°†æ‰§è¡Œ/bin/ps aux,æ­¤å‘½ä»¤å¯¹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·æœ‰æ•ˆ</strong></p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/bashrc</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/bashrc </span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># bash</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># which tk</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">	/bin/ps</span><br></pre></td></tr></table></figure>

<p><strong>desktop0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/bashrc </span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail -n 1 /etc/bashrc</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># bash</span></span><br><span class="line">[root@server0 ~]<span class="comment"># which tk</span></span><br><span class="line"><span class="built_in">alias</span> tk=<span class="string">'/bin/ps aux'</span></span><br><span class="line">	/bin/ps</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤é¢˜è¿‡äºç®€å•ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Š</p>
</blockquote>
<p><strong>2ï¼‰å¼€å¯ IP è½¬å‘åŠŸèƒ½</strong></p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># cat /etc/sysctl.conf </span></span><br><span class="line"><span class="comment"># System default settings live in /usr/lib/sysctl.d/00-system.conf.</span></span><br><span class="line"><span class="comment"># To override those settings, enter new settings here, or in an </span></span><br><span class="line">.........................................</span><br><span class="line">[root@server0 ~]<span class="comment"># vim /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /usr/lib/sysctl.d/00-system.conf </span></span><br><span class="line">........................................</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1 <span class="comment">#åœ¨æ­¤å¤„æ·»åŠ </span></span><br><span class="line"></span><br><span class="line">........................................</span><br><span class="line">[root@server0 ~]<span class="comment"># sysctl -p /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1      <span class="comment">#æœ‰è¿™ä¸ªè¡¨ç¤ºæˆåŠŸ</span></span><br><span class="line">kernel.shmmax = 4294967295</span><br><span class="line">kernel.shmall = 268435456</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŒæ ·åœ¨desktop è¿™å°è™šæ‹Ÿæœºä¸Šä¹Ÿè¦åšï¼Œæ­¤å¤„ä¸åšè¿‡å¤šæ¼”ç¤º</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/sysctl.conf </span></span><br><span class="line"><span class="comment"># System default settings live in /usr/lib/sysctl.d/00-system.conf.</span></span><br><span class="line"><span class="comment"># To override those settings, enter new settings here, or in an /etc/sysctl.d/&lt;name&gt;.conf file</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, see sysctl.conf(5) and sysctl.d(5).</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># sysctl -p /usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">kernel.shmmax = 4294967295</span><br><span class="line">kernel.shmall = 268435456</span><br><span class="line">[root@desktop0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h4 id="5-ç«¯å£è½¬å‘"><a href="#5-ç«¯å£è½¬å‘" class="headerlink" title="5.ç«¯å£è½¬å‘"></a>5.ç«¯å£è½¬å‘</h4><ul>
<li>åœ¨ server ä¸Šé…ç½®ç«¯å£è½¬å‘,åœ¨ 172.25.0.0/24 ä¸­çš„ç³»ç»Ÿ,è®¿é—® server çš„æœ¬åœ°ç«¯å£ 9527 å°†è¢«è½¬å‘åˆ° 80,æ­¤è®¾ç½®æ°¸ä¹…ç”Ÿæ•ˆ</li>
</ul>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 forward-port port=9527 protocol=tcp to-port=80' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥ç”¨<code>firewall-cmd --list-all</code>å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æ·»åŠ ä¸Šå»</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># firewall-cmd --list-all</span></span><br><span class="line">&gt; public (default, active)</span><br><span class="line">&gt;   interfaces: eth0</span><br><span class="line">&gt;   sources: </span><br><span class="line">&gt;   services: dhcpv6-client</span><br><span class="line">&gt;   ports: </span><br><span class="line">&gt;   masquerade: no</span><br><span class="line">&gt;   forward-ports: </span><br><span class="line">&gt;   icmp-blocks: </span><br><span class="line">&gt;   rich rules: </span><br><span class="line">&gt; 	rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> forward-port port=<span class="string">"9527"</span> protocol=<span class="string">"tcp"</span> to-port=<span class="string">"80"</span></span><br><span class="line">&gt; 	rule family=<span class="string">"ipv4"</span> <span class="built_in">source</span> address=<span class="string">"172.25.0.0/24"</span> service name=<span class="string">"ssh"</span> accept</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>åˆ‡è®°ï¼šæ­¤é¢˜éœ€è¦ä¹‹åœ¨<strong>server0</strong>ä¸Šé¢æ“ä½œï¼Œè€Œä¸”è€ƒè¯•ä¸­é¢˜ç›®éœ€è¦ä½ åœ¨é‚£æ“ä½œå°±åœ¨é‚£æ“ä½œï¼Œåˆ‡å‹¿å¿ƒæ€¥ç›²ç›®</p>
</blockquote>
<h4 id="6-èšåˆç½‘ç»œ"><a href="#6-èšåˆç½‘ç»œ" class="headerlink" title="6.èšåˆç½‘ç»œ"></a>6.èšåˆç½‘ç»œ</h4><p>åœ¨ server å’Œ desktop ä¹‹é—´é…ç½®é“¾è·¯èšåˆ</p>
<p>æ­¤é“¾è·¯ä½¿ç”¨æ¥å£ slave1 å’Œ slave2</p>
<p>æ­¤é“¾è·¯åœ¨ä¸€ä¸ªæ¥å£å¤±æ•ˆå,ä»ç„¶èƒ½å·¥ä½œ</p>
<p>æ­¤é“¾è·¯åœ¨ server ä¸Šä½¿ç”¨åœ°å€ 192.168.0.1/24</p>
<p>æ­¤é“¾è·¯åœ¨ desktop ä¸Šä½¿ç”¨åœ°å€ 192.168.0.2/24</p>
<p>æ­¤é“¾è·¯åœ¨ç³»ç»Ÿé‡å¯åä¾ç„¶ä¿æŒæ­£å¸¸çŠ¶æ€</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># nmcli device </span></span><br><span class="line">DEVICE  TYPE      STATE         CONNECTION  </span><br><span class="line">eth0    ethernet  connected     System eth0 </span><br><span class="line">eth1    ethernet  disconnected  --          </span><br><span class="line">eth2    ethernet  disconnected  --          </span><br><span class="line">lo      loopback  unmanaged     --          </span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team con-name team0 ifname team0 config '&#123;"runner":&#123;"name":"activebackup"&#125;&#125;'</span></span><br><span class="line">Connection <span class="string">'team0'</span> (f816c00c-0488-455e-8d17-d66004112ef7) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection modify team0 ipv4.addresses "192.168.0.1/24" ipv4.method manual connection.autoconnect yes</span></span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave1 ifname eth1 master team0 </span></span><br><span class="line">Connection <span class="string">'slave1'</span> (5276955f-cbd6-4ec3-82dc-daf6b0073998) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave2 ifname eth2 master team0 </span></span><br><span class="line">Connection <span class="string">'slave2'</span> (26009b44-7428-4cb4-a2b6-41d5aa5f3cac) successfully added.</span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection up team0</span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<p><strong>desktop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># nmcli device </span></span><br><span class="line">DEVICE  TYPE      STATE         CONNECTION  </span><br><span class="line">eth0    ethernet  connected     System eth0 </span><br><span class="line">eth1    ethernet  disconnected  --          </span><br><span class="line">eth2    ethernet  disconnected  --          </span><br><span class="line">lo      loopback  unmanaged     --          </span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team con-name team0 ifname team0 config '&#123;"runner":&#123;"name":"activebackup"&#125;&#125;'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection modify team0 ipv4.addresses "192.168.0.2/24" ipv4.method manual connection.autoconnect yes</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave1 ifname eth1 master team0 </span></span><br><span class="line">Connection <span class="string">'slave1'</span> (5c6c05b2-63b9-4aca-b991-ab570f4e23bd) successfully added.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection add type team-slave con-name slave2 ifname eth2 master team0  </span></span><br><span class="line">Connection <span class="string">'slave2'</span> (546bc410-6a94-4fff-9bef-398e54b2feff) successfully added.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection up team0 </span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ€åæˆ‘ä»¬éªŒè¯ä»¥ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping 192.168.0.1</span></span><br><span class="line">&gt; PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=1 ttl=64 time=1.17 ms</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=2 ttl=64 time=0.301 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ç„¶åæˆ‘ä»¬æ–­æ‰ä¸€ä¸ªæ¥å£</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># nmcli connection down slave1</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping 192.168.0.1</span></span><br><span class="line">&gt; PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.</span><br><span class="line">&gt; 64 bytes from 192.168.0.1: icmp_seq=1 ttl=64 time=0.582 ms</span><br><span class="line">&gt; ^C</span><br><span class="line">&gt; --- 192.168.0.1 ping statistics ---</span><br><span class="line">&gt; 1 packets transmitted, 1 received, 0% packet loss, time 0ms</span><br><span class="line">&gt; rtt min/avg/max/mdev = 0.582/0.582/0.582/0.000 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>æˆ‘ä»¬downæ‰å…¶ä¸­ä¸€ä¸ªæ¥å£ï¼Œè¿˜èƒ½pingé€š</p>
</blockquote>
<h4 id="7-IPv6-è®¾ç½®"><a href="#7-IPv6-è®¾ç½®" class="headerlink" title="7.IPv6 è®¾ç½®"></a>7.IPv6 è®¾ç½®</h4><p>åœ¨æ‚¨çš„è€ƒè¯•ç³»ç»Ÿä¸Šé…ç½®æ¥å£,åœ¨ä½ çš„é»˜è®¤ç½‘å¡ä¸Šä½¿ç”¨å¦‚ä¸‹ IPv6 åœ°å€</p>
<p>server ä¸Šçš„ IP åœ°å€åº”è¯¥æ˜¯ fd00:ba5e:ba11:10::1/64</p>
<p>desktop ä¸Šçš„ IP åœ°å€åº”è¯¥æ˜¯ fd00:ba5e:ba11:10::2/64</p>
<p>ä¸¤ä¸ªç³»ç»Ÿå¿…é¡»èƒ½ä¸ç½‘ç»œ fd00:ba5e:ba11:10::cc å†…çš„ç³»ç»Ÿé€šä¿¡</p>
<p>åœ°å€å¿…é¡»åœ¨é‡å¯åä¾ç„¶ç”Ÿæ•ˆ</p>
<p>ä¸¤ä¸ªç³»ç»Ÿä¿æŒå½“å‰çš„ IPv4 åœ°å€å¹¶èƒ½é€šä¿¡</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># nmcli connection show </span></span><br><span class="line">NAME         UUID                                  TYPE            DEVICE </span><br><span class="line">slave1       5276955f-cbd6-4ec3-82dc-daf6b0073998  802-3-ethernet  eth1   </span><br><span class="line">team0        f816c00c-0488-455e-8d17-d66004112ef7  team            team0  </span><br><span class="line">System eth0  5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03  802-3-ethernet  eth0   </span><br><span class="line">slave2       26009b44-7428-4cb4-a2b6-41d5aa5f3cac  802-3-ethernet  eth2   </span><br><span class="line">[root@server0 ~]<span class="comment"># nmcli connection modify "System eth0" ipv6.addresses fd00:ba5e:ba11:10::1/64 ipv6.method manual connection.autoconnect yes</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<p><strong>desktop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection show </span></span><br><span class="line">NAME         UUID                                  TYPE            DEVICE </span><br><span class="line">slave1       5c6c05b2-63b9-4aca-b991-ab570f4e23bd  802-3-ethernet  eth1   </span><br><span class="line">team0        8ccca14c-7275-4996-9d06-9bfd33cf7b3e  team            team0  </span><br><span class="line">System eth0  5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03  802-3-ethernet  eth0   </span><br><span class="line">slave2       546bc410-6a94-4fff-9bef-398e54b2feff  802-3-ethernet  eth2   </span><br><span class="line">[root@desktop0 ~]<span class="comment"># nmcli connection modify "System eth0" ipv6.addresses "fd00:ba5e:ba11:10::2/64" ipv6.method manual connection.autoconnect yes</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># ping6 fd00:ba5e:ba11:10::1</span></span><br><span class="line">&gt; PING fd00:ba5e:ba11:10::1(fd00:ba5e:ba11:10::1) 56 data bytes</span><br><span class="line">&gt; 64 bytes from fd00:ba5e:ba11:10::1: icmp_seq=1 ttl=64 time=4.55 ms</span><br><span class="line">&gt; 64 bytes from fd00:ba5e:ba11:10::1: icmp_seq=2 ttl=64 time=0.413 ms</span><br><span class="line">&gt; ^C</span><br><span class="line">&gt; --- fd00:ba5e:ba11:10::1 ping statistics ---</span><br><span class="line">&gt; 2 packets transmitted, 2 received, 0% packet loss, time 1003ms</span><br><span class="line">&gt; rtt min/avg/max/mdev = 0.413/2.485/4.558/2.073 ms</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>æœ‰å¥½å¤šè€ƒè€…éƒ½åœ¨æ€è€ƒè¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œ</p>
<p>ä¸¤ä¸ªç³»ç»Ÿå¿…é¡»èƒ½ä¸ç½‘ç»œ fd00:ba5e:ba11:10::cc å†…çš„ç³»ç»Ÿé€šä¿¡</p>
<p>è¯·é—®ï¼šä½ ç”µè„‘èƒ½å¹³é€šè‡ªå·±çš„ç½‘æ®µå—ï¼Œè€ƒé¢˜è¯´çš„æ˜¯èƒ½ä¸è¿™ä¸ªç½‘ç»œé‡Œé¢å¾—ç³»ç»Ÿ</p>
</blockquote>
<h4 id="8-é‚®ä»¶æœåŠ¡"><a href="#8-é‚®ä»¶æœåŠ¡" class="headerlink" title="8.é‚®ä»¶æœåŠ¡"></a>8.é‚®ä»¶æœåŠ¡</h4><p>åœ¨ server ä¸Šé…ç½®é‚®ä»¶æœåŠ¡</p>
<p>è¿™äº›ç³»ç»Ÿä¸æ¥å—å¤–éƒ¨å‘æ¥çš„é‚®ä»¶</p>
<p>åœ¨è¿™äº›ç³»ç»Ÿä¸Šæœ¬åœ°å‘é€ä»»ä½•é‚®ä»¶éƒ½ä¼šè¢«è·¯ç”±åˆ° server1.example.com</p>
<p>ä»è¿™äº›ç³»ç»Ÿä¸Šå‘é€çš„é‚®ä»¶æ˜¾ç¤ºæ¥è‡ªäº example.com</p>
<p>æ‚¨å¯ä»¥é€šè¿‡å‘é€é‚®ä»¶åˆ° harry æ¥æµ‹è¯•æ‚¨çš„é…ç½®</p>
<p>æ‚¨å¯ä»¥é€šè¿‡è®¿é—® <a href="http://server1.example.com/email/harry" target="_blank" rel="noopener">http://server1.example.com/email/harry</a> æ¥éªŒè¯æ‚¨çš„é…ç½®(æ¨¡æ‹Ÿç¯å¢ƒä¸Šé¢æ²¡æœ‰è¿™ä¸ªåœ°å€ï¼Œæ‰€ä»¥æ­¤é¢˜éªŒè¯ä¸äº†)</p>
<p>å‘ç»™ harry çš„é‚®ä»¶åŒæ—¶èƒ½è¢« natasha æ”¶åˆ°</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/postfix/main.cf </span></span><br><span class="line">myorigin = example.com    <span class="comment">#å¤§æ¦‚åœ¨99è¡Œ</span></span><br><span class="line">inet_interfaces = localhost <span class="comment">#å¤§æ¦‚åœ¨117è¡Œï¼Œé»˜è®¤æ˜¯localhost</span></span><br><span class="line">mydestination = 			<span class="comment">#å¤§æ¦‚åœ¨165è¡Œï¼Œå°†=å·åé¢çš„åˆ æ‰</span></span><br><span class="line">mynetworks =  127.0.0.0/8	<span class="comment">#å¤§æ¦‚åœ¨265è¡Œï¼Œä»…éœ€è¦127.0.0.0/8</span></span><br><span class="line">relayhost = [server1.example.com]	<span class="comment">#å¤§æ¦‚åœ¨319è¡Œ</span></span><br><span class="line"><span class="comment">#ä¿å­˜å¹¶é€€å‡º</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim  /etc/aliases</span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail -n 1 /etc/aliases</span></span><br><span class="line">harry:		harry,natasha</span><br><span class="line">[root@server0 ~]<span class="comment"># useradd harry</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart postfix.service </span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable postfix.service </span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-service=smtp --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å› ä¸ºç¯å¢ƒåŸå› æ­¤é¢˜æ— æ³•éªŒè¯ï¼ŒçœŸå®è€ƒè¯•ç¯å¢ƒä¸­æ˜¯å¯ä»¥éªŒè¯çš„å…·ä½“éªŒè¯å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 ~]<span class="comment"># echo "hello" | mail -s testmail harry</span></span><br><span class="line">&gt; [root@server0 ~]<span class="comment"># curl http://server1.example.com/email/harry</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ç„¶ååœ¨æœ€ä¸‹é¢å¯ä»¥çœ‹åˆ°ä¸€ä¸ªhello</p>
<p>é…ç½®æ–‡ä»¶å…·ä½“è§£é‡Šï¼š</p>
<p>myorigin = example.com    #æ¥è‡ªå“ªé‡Œ<br>mynetworks =  127.0.0.0/8    # é‚®ä»¶ä¿¡æ¯ä»…æœ¬åœ°ç¯å›<br>relayhost = [server1.example.com]    # ç±»ä¼¼ä¸­é—´ç«™ï¼Œä¾‹å¦‚Båœ¨Aå’ŒCçš„ä¸­é—´ï¼ŒAå‘ç»™Cçš„æ¶ˆæ¯Bå°±ä¼šæ”¶åˆ°ã€‚</p>
</blockquote>
<h4 id="9-Samba-æœåŠ¡"><a href="#9-Samba-æœåŠ¡" class="headerlink" title="9.Samba æœåŠ¡"></a>9.Samba æœåŠ¡</h4><p>åœ¨ server ä¸Šé…ç½® SAMBA æœåŠ¡</p>
<p>æ‚¨çš„ samba æœåŠ¡å™¨å¿…é¡»æ˜¯ STAFF å·¥ä½œç»„çš„ä¸€ä¸ªæˆå‘˜</p>
<p>å…±äº«/common ç›®å½•,å…±äº«åä¸º common</p>
<p>åªæœ‰ example.com åŸŸå†…çš„å®¢æˆ·ç«¯å¯ä»¥è®¿é—® common å…±äº«</p>
<p>common å¿…é¡»æ˜¯å¯ä»¥æµè§ˆçš„</p>
<p>ç”¨æˆ· natasha å¿…é¡»èƒ½å¤Ÿè¯»å–å…±äº«ä¸­çš„å†…å®¹,å¦‚æœéœ€è¦çš„è¯,éªŒè¯å¯†ç æ˜¯:tangkai</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install -y samba*</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /common</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/samba/smb.conf </span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°ï¼š</span></span><br><span class="line">[global]</span><br><span class="line">workgroup = STAFF <span class="comment">#å°†=åé¢æ”¹ä¸ºSTAFF</span></span><br><span class="line">..................</span><br><span class="line">..................</span><br><span class="line"><span class="comment">#åœ¨æœ€ä¸‹é¢ï¼Œæ–°åŠ å…¥ï¼š</span></span><br><span class="line">[common]</span><br><span class="line">        path = /common</span><br><span class="line">        browseable = yes</span><br><span class="line">        valid users = natasha</span><br><span class="line"><span class="comment"># ä¿å­˜å¹¶é€€å‡º</span></span><br><span class="line">[root@server0 ~]<span class="comment"># getsebool -a | grep samba</span></span><br><span class="line">samba_create_home_dirs --&gt; off</span><br><span class="line">samba_domain_controller --&gt; off</span><br><span class="line">samba_enable_home_dirs --&gt; off</span><br><span class="line">samba_export_all_ro --&gt; off</span><br><span class="line">samba_export_all_rw --&gt; off</span><br><span class="line">samba_portmapper --&gt; off</span><br><span class="line">samba_run_unconfined --&gt; off</span><br><span class="line">samba_share_fusefs --&gt; off</span><br><span class="line">samba_share_nfs --&gt; off</span><br><span class="line">sanlock_use_samba --&gt; off</span><br><span class="line">use_samba_home_dirs --&gt; off</span><br><span class="line">virt_sandbox_use_samba --&gt; off</span><br><span class="line">virt_use_samba --&gt; off</span><br><span class="line">[root@server0 ~]<span class="comment"># setsebool -P samba_enable_home_dirs 1</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chcon -Rt samba_share_t /common/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=samba accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=samba-client accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># id natasha</span></span><br><span class="line">uid=1002(natasha) gid=1002(natasha) groups=1002(natasha)</span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a natasha</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user natasha.</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆ‘ä»¬è¦å…»æˆä¸€ç§ä¹ æƒ¯ï¼Œä¸ç®¡ä¹‹å‰æœ‰æ²¡æœ‰åŠ å…¥å¯åŠ¨é¡¹ï¼Œåœ¨æ¯æ¬¡é‡å¯ä¹‹åï¼Œæˆ‘ä»¬éƒ½è¦é¡ºæ‰‹æŠŠä»–åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹é‡Œé¢</p>
</blockquote>
<blockquote>
<p>éªŒè¯:éœ€è¦åˆ°desktop0é‡Œé¢éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@desktop0 ~]<span class="comment"># yum install -y cifs-util*</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># mount -t cifs -o username=natasha,password=tangkai //172.25.0.11/common /media/</span></span><br><span class="line">&gt; [root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">&gt; Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">&gt; /dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">&gt; devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">&gt; tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">&gt; tmpfs                 921M   17M  904M   2% /run</span><br><span class="line">&gt; tmpfs                 921M     0  921M   0% /sys/fs/cgroup</span><br><span class="line">&gt; //172.25.0.11/common   10G  3.1G  7.0G  31% /media</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="10-å¤šç”¨æˆ·-samba-æŒ‚è½½"><a href="#10-å¤šç”¨æˆ·-samba-æŒ‚è½½" class="headerlink" title="10.å¤šç”¨æˆ· samba æŒ‚è½½"></a>10.å¤šç”¨æˆ· samba æŒ‚è½½</h4><p>åœ¨ server ä¸Šé€šè¿‡ samba å…±äº«ç›®å½•/storage</p>
<p>å…±äº«åä¸º share</p>
<p>å…±äº«ç›®å½•åªèƒ½è¢« example.com åŸŸå†…çš„å®¢æˆ·ç«¯ä½¿ç”¨</p>
<p>å…±äº«ç›®å½• share å¿…é¡»å¯ä»¥è¢«æµè§ˆ</p>
<p>ç”¨æˆ· sarah èƒ½ä»¥è¯»çš„æ–¹å¼è®¿é—®æ­¤å…±äº«,è®¿é—®å¯†ç æ˜¯ tangkai</p>
<p>ç”¨æˆ· kitty èƒ½ä»¥è¯»å†™çš„æ–¹å¼è®¿é—®æ­¤å…±äº«,è®¿é—®å¯†ç æ˜¯ tangkai</p>
<p>æ­¤å…±äº«æ°¸ä¹…æŒ‚è½½åœ¨ desktop ä¸Šçš„/mnt/dev ç›®å½•,å¹¶ä½¿ç”¨ç”¨æˆ· sarah è¿›è¡Œè®¤è¯,ä»»ä½•ç”¨æˆ·å¯ä¸´æ—¶é€šè¿‡ kitty æ¥è·å¾—è¯»å†™æƒé™</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/samba/smb.conf </span></span><br><span class="line">[root@server0 ~]<span class="comment"># tail n 6 /etc/samba/smb.conf </span></span><br><span class="line">[share]</span><br><span class="line">	path = /storage</span><br><span class="line">	browseable = yes</span><br><span class="line">    valid users = sarah,kitty</span><br><span class="line">	writable = no</span><br><span class="line">	write list = kitty</span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable smb nmb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /storage</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd sarah</span></span><br><span class="line">[root@server0 ~]<span class="comment"># useradd kitty</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chcon -Rt samba_share_t /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># setfacl -m u:sarah:r-x /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># setfacl -m u:kitty:rwx /storage/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a sarah</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user sarah.</span><br><span class="line">[root@server0 ~]<span class="comment"># smbpasswd -a kitty</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user kitty.</span><br></pre></td></tr></table></figure>

<p><strong>desktop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/fstab </span></span><br><span class="line">//172.25.0.11/share	/mnt/dev	cifs multiuser,username=sarah,password=tangkai,sec=ntlmssp 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/dev</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">tmpfs                 921M   17M  904M   2% /run</span><br><span class="line">tmpfs                 921M     0  921M   0% /sys/fs/cgroup</span><br><span class="line">//172.25.0.11/common   10G  3.1G  7.0G  31% /media</span><br><span class="line">//172.25.0.11/share    10G  3.1G  7.0G  31% /mnt/dev</span><br></pre></td></tr></table></figure>

<h4 id="11-é…ç½®-NFS-æœåŠ¡"><a href="#11-é…ç½®-NFS-æœåŠ¡" class="headerlink" title="11.é…ç½® NFS æœåŠ¡"></a>11.é…ç½® NFS æœåŠ¡</h4><p>1.) åœ¨ server ä¸Šé…ç½® NFS<br>ä»¥åªè¯»çš„æ–¹å¼å…±äº«/public,åŒæ—¶åªèƒ½è¢« example.com å†…ç”¨æˆ·è®¿é—®</p>
<p>ä»¥è¯»å†™çš„æ–¹å¼å…±äº«/protected èƒ½è¢« example.com å†…ç”¨æˆ·è®¿é—®</p>
<p>è®¿é—®/protected éœ€è¦é€šè¿‡ kerberos å®‰å…¨åŠ å¯†,æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹è¾¹é“¾æ¥çš„ç§˜é’¥: <a href="http://classroom.example.com/pub/keytabs/server0.keytab" target="_blank" rel="noopener">http://classroom.example.com/pub/keytabs/server0.keytab</a></p>
<p>ç›®å½•/protected åº”è¯¥åŒ…å«åä¸º project æ‹¥æœ‰äººä¸º ldapuser12 çš„å­ç›®å½•</p>
<p>ç”¨æˆ· ldapuser12 èƒ½ä»¥è¯»å†™çš„æ–¹å¼è®¿é—®/protected/project</p>
<p><strong>server0</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /etc/exports</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /etc/exports</span></span><br><span class="line">/public	172.25.0.0/24(ro)</span><br><span class="line">/protected 172.25.0.0/24(rw,sec=krb5p)</span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /public</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /protected</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /protected/project</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸€æ çš„æ­¥éª¤æœ‰å¯èƒ½è€ƒè¯•ä¸éœ€è¦ä½ æ“ä½œï¼Œä½†æˆ‘ä»¬è¦ä»¥é˜²ä¸‡ä¸€</span></span><br><span class="line">[root@server0 ~]<span class="comment"># yum install -y krb5* sssd* authconfig*</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /etc/openldap/</span></span><br><span class="line">[root@server0 openldap]<span class="comment"># ls</span></span><br><span class="line">certs  ldap.conf  schema</span><br><span class="line">[root@server0 openldap]<span class="comment"># mkdir cacerts</span></span><br><span class="line">[root@server0 openldap]<span class="comment"># cd cacerts/</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># wget http://classroom.example.com/pub/example-ca.crt</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># authconfig-tui </span></span><br><span class="line"><span class="comment"># è¿‡ç¨‹åœ¨è€ƒrhcseçš„æ—¶å€™æœ‰æè¿°ï¼Œè¿™é‡Œå°±ä¸å†ä»‹ç»</span></span><br><span class="line">[root@server0 cacerts]<span class="comment"># su - ldapuser12</span></span><br><span class="line">su: warning: cannot change directory to /home/guests/ldapuser12: No such file or directory</span><br><span class="line">mkdir: cannot create directory <span class="string">'/home/guests'</span>: Permission denied</span><br><span class="line">-bash-4.2$</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># chown ldapuser12 /protected/project</span></span><br><span class="line">[root@server0 ~]<span class="comment"># wget -O /etc/krb5.keytab  http://classroom.example.com/pub/keytabs/server0.keytab</span></span><br><span class="line">[root@server0 ~]<span class="comment"># vim /etc/sysconfig/nfs</span></span><br><span class="line">RPCNFSDARGS=<span class="string">"-V 4.2"</span>  <span class="comment"># åœ¨ç¬¬13è¡Œï¼Œå¼•å·é‡Œé¢åŠ å…¥-V 4.2</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable nfs-secure nfs-secure-server nfs-server</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure.service'</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure-server.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure-server.service'</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-server.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-server.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl start nfs-secure nfs-secure-server nfs-server</span></span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=nfs accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=rpc-bind accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 ~]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<p><strong>2.)</strong><br><strong>åœ¨ desktop ä¸ŠæŒ‚è½½æ¥è‡ªäº server0 çš„ NFS å…±äº«</strong></p>
<p>/public æŒ‚è½½åœ¨ç›®å½•/mnt/nfsmount ä¸Š</p>
<p>/protected æŒ‚è½½åœ¨ç›®å½•/mnt/nfssecure,å¹¶ä½¿ç”¨å®‰å…¨çš„æ–¹å¼,ç§˜é’¥ï¼š</p>
<p><a href="http://classroom.example.com/pub/keytabs/desktop0.keytab" target="_blank" rel="noopener">http://classroom.example.com/pub/keytabs/desktop0.keytab</a></p>
<p>ç”¨æˆ· ldapuser12 èƒ½åœ¨/mnt/nfssecure/project ä¸Šåˆ›å»ºæ–‡ä»¶</p>
<p>è¿™äº›æ–‡ä»¶ç³»ç»Ÿåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½</p>
<p><strong>desktop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/nfsmount</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/nfssecure</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸€æ çš„æ­¥éª¤æœ‰å¯èƒ½è€ƒè¯•ä¸éœ€è¦ä½ æ“ä½œï¼Œä½†æˆ‘ä»¬è¦ä»¥é˜²ä¸‡ä¸€</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># yum install sssd* krb5* authconfig* -y</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cd /etc/openldap/</span></span><br><span class="line">[root@desktop0 openldap]<span class="comment"># ls</span></span><br><span class="line">certs  ldap.conf</span><br><span class="line">[root@desktop0 openldap]<span class="comment"># mkdir cacerts</span></span><br><span class="line">[root@desktop0 openldap]<span class="comment"># cd cacerts/</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># wget http://classroom.example.com/pub/example-ca.crt</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># authconfig-tui</span></span><br><span class="line"><span class="comment"># è¿‡ç¨‹åœ¨è€ƒrhcseçš„æ—¶å€™æœ‰æè¿°ï¼Œè¿™é‡Œå°±ä¸å†ä»‹ç»</span></span><br><span class="line">[root@desktop0 cacerts]<span class="comment"># su - ldapuser12</span></span><br><span class="line">su: warning: cannot change directory to /home/guests/ldapuser12: No such file or directory</span><br><span class="line">mkdir: cannot create directory <span class="string">'/home/guests'</span>: Permission denied</span><br><span class="line">-bash-4.2$</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># wget -O /etc/krb5.keytab http://classroom.example.com/pub/keytabs/desktop0.keytab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/sysconfig/nfs</span></span><br><span class="line">RPCNFSDARGS=<span class="string">"-V 4.2"</span>  <span class="comment"># åœ¨ç¬¬13è¡Œï¼Œå¼•å·é‡Œé¢åŠ å…¥-V 4.2</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable nfs-secure</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/nfs-secure.service'</span> <span class="string">'/etc/systemd/system/nfs.target.wants/nfs-secure.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl start nfs-secure</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 2 /etc/fstab </span></span><br><span class="line">172.25.0.11:/public /mnt/nfsmount nfs ro,v4.2 0 0</span><br><span class="line">172.25.0.11:/protected /mnt/nfssecure nfs defaults,v4.2,sec=krb5p 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>

<h4 id="12-åœ¨-server-ä¸Šé…ç½®ä¸€ä¸ª-web-ç«™ç‚¹-http-server-example-com"><a href="#12-åœ¨-server-ä¸Šé…ç½®ä¸€ä¸ª-web-ç«™ç‚¹-http-server-example-com" class="headerlink" title="12.åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹ http://server.example.com"></a>12.åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹ <a href="http://server.example.com" target="_blank" rel="noopener">http://server.example.com</a></h4><p>ä»<a href="http://classroom.example.com/pub/example.html" target="_blank" rel="noopener">http://classroom.example.com/pub/example.html</a> ä¸‹è½½æ–‡ä»¶,</p>
<p>å¹¶é‡å‘½åä¸º index.htmlï¼Œä¸è¦ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚</p>
<p>å°†æ–‡ä»¶ index.html æ‹·è´åˆ°æ‚¨çš„ DocumentRoot ç›®å½•ä¸‹</p>
<p>æ¥è‡ªäº example.com çš„å®¢æˆ·ç«¯å¯ä»¥è®¿é—®è¯¥ web æœåŠ¡å™¨</p>
<p>æ¥è‡ªäº my133t.org çš„å®¢æˆ·ç«¯çš„è®¿é—®ä¼šè¢«æ‹’ç»</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install httpd -y</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /var/www/html/</span></span><br><span class="line">[root@server0 html]<span class="comment"># ls</span></span><br><span class="line">[root@server0 html]<span class="comment"># wget -O  index.html http://classroom.example.com/pub/example.html</span></span><br><span class="line">[root@server0 html]<span class="comment"># ls</span></span><br><span class="line">index.html</span><br><span class="line">[root@server0 html]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@server0 html]<span class="comment"># systemctl enable httpd</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/httpd.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/httpd.service'</span></span><br><span class="line">[root@server0 html]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=http accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 html]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;[root@server0 html]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
</blockquote>
<h4 id="13-ä¸ºç«™ç‚¹-http-server-example-com-é…ç½®-TLS-åŠ å¯†"><a href="#13-ä¸ºç«™ç‚¹-http-server-example-com-é…ç½®-TLS-åŠ å¯†" class="headerlink" title="13.ä¸ºç«™ç‚¹ http://server.example.com é…ç½® TLS åŠ å¯†"></a>13.ä¸ºç«™ç‚¹ <a href="http://server.example.com" target="_blank" rel="noopener">http://server.example.com</a> é…ç½® TLS åŠ å¯†</h4><p>å·²ç­¾åè¯ä¹¦ä» <a href="http://classroom.example.com/pub/tls/certs/server0.crt" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/certs/server0.crt</a> è·å–</p>
<p>è¯ä¹¦çš„ç§˜é’¥ä» <a href="http://classroom.example.com/pub/tls/private/server0.key" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/private/server0.key</a> è·å–</p>
<p>è¯ä¹¦çš„ç­¾åæˆæƒä¿¡æ¯ä» <a href="http://classroom.example.com/pub/tls/certs/www0.crt" target="_blank" rel="noopener">http://classroom.example.com/pub/tls/certs/www0.crt</a> è·å–</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 html]<span class="comment"># yum -y install mod_ssl.x86_64</span></span><br><span class="line">[root@server0 html]<span class="comment"># cd /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># vim ssl.conf </span></span><br><span class="line"><span class="comment">#åˆ°120è¡Œå·¦å³</span></span><br><span class="line">SSLCertificateFile /etc/pki/tls/certs/localhost.crt</span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/localhost.key</span><br><span class="line"><span class="comment">#SSLCACertificateFile /etc/pki/tls/certs/ca-bundle.crt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†è¿™ä¸‰ä¸ªçš„åé¢çš„æ–‡ä»¶åæ”¹æ‰ï¼Œç„¶åå°†æœ€åä¸€ä¸ªçš„#å·å»æ‰ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</span></span><br><span class="line">SSLCertificateFile /etc/pki/tls/certs/server0.crt</span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/server0.key</span><br><span class="line">SSLCACertificateFile /etc/pki/tls/certs/www0.crt</span><br><span class="line"><span class="comment"># è®°ä½è¿™ä¸‰ä¸ªè·¯å¾„ä¹‹åä¿å­˜å¹¶é€€å‡º</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># cd /etc/pki/tls/certs/</span></span><br><span class="line">[root@server0 certs]<span class="comment"># wget http://classroom.example.com/pub/tls/certs/server0.crt</span></span><br><span class="line">[root@server0 certs]<span class="comment"># cd /etc/pki/tls/private/</span></span><br><span class="line">[root@server0 private]<span class="comment"># wget http://classroom.example.com/pub/tls/private/server0.key</span></span><br><span class="line">[root@server0 private]<span class="comment"># cd /etc/pki/tls/certs/</span></span><br><span class="line">[root@server0 certs]<span class="comment"># wget http://classroom.example.com/pub/tls/certs/www0.crt</span></span><br><span class="line"></span><br><span class="line">[root@server0 certs]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 certs]<span class="comment"># systemctl enable httpd.service </span></span><br><span class="line">[root@server0 certs]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 source address=172.25.0.0/24 service name=https accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 certs]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 certs]<span class="comment"># curl -k https://server.example.com</span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹</span><br><span class="line">&gt; [root@server0 certs]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="14-åœ¨-server-ä¸Šæ‰©å±•æ‚¨çš„-WEB-æœåŠ¡å™¨"><a href="#14-åœ¨-server-ä¸Šæ‰©å±•æ‚¨çš„-WEB-æœåŠ¡å™¨" class="headerlink" title="14.åœ¨ server ä¸Šæ‰©å±•æ‚¨çš„ WEB æœåŠ¡å™¨"></a>14.åœ¨ server ä¸Šæ‰©å±•æ‚¨çš„ WEB æœåŠ¡å™¨</h4><ol>
<li>ä¸ºç«™ç‚¹ <a href="http://www.example.com" target="_blank" rel="noopener">http://www.example.com</a> åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿä¸»æœº</li>
<li>è®¾ç½® DocumentRoot ä¸º/var/www/virtual</li>
<li>ä» <a href="http://classroom.example.com/pub/www.html" target="_blank" rel="noopener">http://classroom.example.com/pub/www.html</a> ä¸‹è½½æ–‡ä»¶,å¹¶é‡å‘½åä¸º index.html,ä¸è¦ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚</li>
<li>å°†æ–‡ä»¶ index.html æ‹·è´åˆ° DocumentRoot ç›®å½•ä¸‹</li>
<li>ç¡®ä¿ floyd ç”¨æˆ·èƒ½å¤Ÿåœ¨/var/www/virtual ä¸‹åˆ›å»ºæ–‡ä»¶</li>
</ol>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># find / -name *vhosts.conf</span></span><br><span class="line">/usr/share/doc/httpd-2.4.6/httpd-vhosts.conf</span><br><span class="line">[root@server0 ~]<span class="comment"># cp /usr/share/doc/httpd-2.4.6/httpd-vhosts.conf /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /etc/httpd/conf.d/</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># vim httpd-vhosts.conf </span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># tail -n 8 httpd-vhosts.conf </span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/html"</span></span><br><span class="line">    ServerName server.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/virtual"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server0 ~]<span class="comment"># mkdir /var/www/virtual</span></span><br><span class="line">oot@server0 ~]<span class="comment"># cd /var/www/virtual/</span></span><br><span class="line">[root@server0 virtual]<span class="comment"># wget -O index.html http://classroom.example.com/pub/www.html</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># useradd floyd</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># setfacl -m u:floyd:rwx /var/www/virtual</span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 conf.d]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl www.example.com </span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šæ‰©å±•æ‚¨çš„ WEB æœåŠ¡å™¨</span><br><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl -k https://server.example.com</span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹</span><br><span class="line">&gt; [root@server0 conf.d]<span class="comment"># curl http://server.example.com</span></span><br><span class="line">&gt; zheshi yige åœ¨ server ä¸Šé…ç½®ä¸€ä¸ª web ç«™ç‚¹</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
</blockquote>
<h4 id="15-web-è®¿é—®æ§åˆ¶"><a href="#15-web-è®¿é—®æ§åˆ¶" class="headerlink" title="15.web è®¿é—®æ§åˆ¶"></a>15.web è®¿é—®æ§åˆ¶</h4><p>åœ¨æ‚¨ server ä¸Šçš„ web æœåŠ¡å™¨çš„ DocumentRoot ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º private çš„ç›®å½•</p>
<p>ä»<a href="http://classroom.example.com/pub/private.html" target="_blank" rel="noopener">http://classroom.example.com/pub/private.html</a> ä¸‹è½½æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•,å¹¶é‡å‘½åä¸ºindex.html,ä¸è¦ä¿®æ”¹æ–‡ä»¶å†…å®¹</p>
<p>ä» server ä¸Š,ä»»ä½•äººéƒ½å¯ä»¥æµè§ˆ private çš„å†…å®¹,ä½†æ˜¯ä»å…¶ä»–ç³»ç»Ÿä¸èƒ½è®¿é—®è¿™ä¸ªç›®å½•çš„å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 conf.d]<span class="comment"># cd /var/www/html/</span></span><br><span class="line">[root@server0 html]<span class="comment"># mkdir private</span></span><br><span class="line">[root@server0 html]<span class="comment"># cd private/</span></span><br><span class="line">[root@server0 private]<span class="comment"># wget -O index.html http://classroom.example.com/pub/private.</span></span><br><span class="line">[root@server0 private]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment">#æœç´¢Requï¼Œå¤åˆ¶</span></span><br><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride none</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">[root@server0 private]<span class="comment"># vim /etc/httpd/conf.d/httpd-vhosts.conf</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/html"</span></span><br><span class="line">    ServerName server.example.com</span><br><span class="line">   <span class="comment">#&lt;Directory "/var/www/html/private"&gt;</span></span><br><span class="line">   <span class="comment">#    Require ip 172.25.0.11</span></span><br><span class="line">   <span class="comment">#&lt;/Directory&gt;</span></span><br><span class="line">&lt;/VirtualHost&gt; </span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/var/www/virtual"</span></span><br><span class="line">    ServerName www.example.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="comment"># è¿™é‡Œ#å·è¡¨ç¤ºåŠ åœ¨è¿™é‡Œä¸‰ä¸ªï¼Œä¸è¦ç…§ç€æ•²ï¼ŒæŠŠ#å·éƒ½æ•²è¿›å»äº†</span></span><br><span class="line"></span><br><span class="line">[root@server0 private]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 private]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 private]<span class="comment"># curl server.example.com/private/ </span></span><br><span class="line">&gt; zheshi yige web è®¿é—®æ§åˆ¶</span><br><span class="line">&gt; <span class="comment"># ç„¶åæˆ‘ä»¬ç”¨å®¢æˆ·ç«¯å»è®¿é—®</span></span><br><span class="line">&gt; root@desktop0 ~]<span class="comment"># curl server.example.com/private/</span></span><br><span class="line">&gt; &lt;!DOCTYPE HTML PUBLIC <span class="string">"-//IETF//DTD HTML 2.0//EN"</span>&gt;</span><br><span class="line">&gt; &lt;html&gt;&lt;head&gt;</span><br><span class="line">&gt; &lt;title&gt;403 Forbidden&lt;/title&gt;</span><br><span class="line">&gt; &lt;/head&gt;&lt;body&gt;</span><br><span class="line">&gt; &lt;h1&gt;Forbidden&lt;/h1&gt;</span><br><span class="line">&gt; &lt;p&gt;You don<span class="string">'t have permission to access /private/</span></span><br><span class="line"><span class="string">&gt; on this server.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&gt; &lt;/body&gt;&lt;/html&gt;</span></span><br><span class="line"><span class="string">&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="16-åœ¨-server-ä¸Šå®ç°åŠ¨æ€-web-å†…å®¹"><a href="#16-åœ¨-server-ä¸Šå®ç°åŠ¨æ€-web-å†…å®¹" class="headerlink" title="16.åœ¨ server ä¸Šå®ç°åŠ¨æ€ web å†…å®¹"></a>16.åœ¨ server ä¸Šå®ç°åŠ¨æ€ web å†…å®¹</h4><p>åŠ¨æ€å†…å®¹ç”±åä¸º alt.example.com çš„è™šæ‹Ÿä¸»æœºæä¾›è™šæ‹Ÿä¸»æœºä¾¦å¬ç«¯å£ä¸º 8909</p>
<p>ä» <a href="http://classroom.example.com/pub/webapp.wsgi" target="_blank" rel="noopener">http://classroom.example.com/pub/webapp.wsgi</a> ä¸‹è½½ä¸€ä¸ªè„šæœ¬,ç„¶åæ”¾åœ¨é€‚å½“çš„ä½ç½®,ä¸è¦ä¿®æ”¹æ–‡ä»¶å†…å®¹</p>
<p>å®¢æˆ·ç«¯è®¿é—® <a href="http://alt.example.com:8909" target="_blank" rel="noopener">http://alt.example.com:8909</a> æ—¶,åº”è¯¥æ¥æ”¶åˆ°åŠ¨æ€ç”Ÿæˆçš„ web é¡µé¢æ­¤ <a href="http://alt.example.com:8909" target="_blank" rel="noopener">http://alt.example.com:8909</a> å¿…é¡»èƒ½è¢« example.com å†…æ‰€æœ‰çš„ç³»ç»Ÿè®¿é—®</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 private]<span class="comment"># yum install mod_wsgi.x86_64 -y</span></span><br><span class="line">[root@server0 private]<span class="comment"># cd /var/www/</span></span><br><span class="line">[root@server0 www]<span class="comment"># mkdir wsgi</span></span><br><span class="line">[root@server0 www]<span class="comment"># cd wsgi/</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># wget http://classroom.example.com/pub/webapp.wsgi</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># vim /etc/httpd/conf.d/httpd-vhosts.conf </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># tail -n 5 /etc/httpd/conf.d/httpd-vhosts.conf </span></span><br><span class="line">Listen 8909</span><br><span class="line">&lt;VirtualHost *:8909&gt;</span><br><span class="line">    WSGIScriptAlias / <span class="string">"/var/www/wsgi/webapp.wsgi"</span></span><br><span class="line">    ServerName alt.example.com:8909</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --add-rich-rule 'rule family=ipv4 port port=8909 protocol=tcp accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># curl alt.example.com:8909</span></span><br><span class="line">curl: (7) Failed connect to alt.example.com:8909; Connection refused</span><br><span class="line">[root@server0 wsgi]<span class="comment"># semanage port -l | grep http</span></span><br><span class="line">http_cache_port_t              tcp      8080, 8118, 8123, 10001-10010</span><br><span class="line">http_cache_port_t              udp      3130</span><br><span class="line">http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000</span><br><span class="line">pegasus_http_port_t            tcp      5988</span><br><span class="line">pegasus_https_port_t           tcp      5989</span><br><span class="line">[root@server0 wsgi]<span class="comment"># semanage port -a -t http_port_t -p tcp 8909</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl restart httpd.service </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl enable httpd.service</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; [root@server0 wsgi]<span class="comment"># curl http://alt.example.com:8909</span></span><br><span class="line">&gt; Hello World!</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="17-é…ç½®-server-æä¾›ä¸€ä¸ª-iSCSI-å…±äº«æœåŠ¡"><a href="#17-é…ç½®-server-æä¾›ä¸€ä¸ª-iSCSI-å…±äº«æœåŠ¡" class="headerlink" title="17.é…ç½® server æä¾›ä¸€ä¸ª iSCSI å…±äº«æœåŠ¡"></a>17.é…ç½® server æä¾›ä¸€ä¸ª iSCSI å…±äº«æœåŠ¡</h4><p>ç£ç›˜åä¸º iqn.2014-09.com.example:server</p>
<p>æœåŠ¡ç«¯å£ä¸º 3260</p>
<p>ä½¿ç”¨ iscsi_store ä½œä¸ºå…¶åç«¯å·å…¶å¤§å°ä¸º 3G</p>
<p>æ­¤æœåŠ¡åªèƒ½è¢« desktop.example.com è®¿é—®</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 wsgi]<span class="comment"># yum install targetcli* -y</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">â””â”€vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">[root@server0 wsgi]<span class="comment"># fdisk /dev/vdb</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (2048-20971519, default 2048): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-20971519, default 20971519): +3G</span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">[root@server0 wsgi]<span class="comment"># partprobe </span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">â””â”€vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">â””â”€vdb1 253:17   0   3G  0 part </span><br><span class="line">[root@server0 wsgi]<span class="comment"># targetcli </span></span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ................................................ [...]</span><br><span class="line">  o- backstores ..................................... [...]</span><br><span class="line">  | o- block ........................................ [Storage Objects: 0]</span><br><span class="line">  | o- fileio ....................................... [Storage Objects: 0]</span><br><span class="line">  | o- pscsi ........................................ [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ...................................... [Storage Objects: 0]</span><br><span class="line">  o- iscsi .......................................... [Targets: 0]</span><br><span class="line">  o- loopback ....................................... [Targets: 0]</span><br><span class="line">/&gt; <span class="built_in">cd</span> /backstores/block </span><br><span class="line">/backstores/block&gt; create iscsi_store /dev/vdb1</span><br><span class="line">Created block storage object iscsi_store using /dev/vdb1.</span><br><span class="line">/backstores/block&gt; <span class="built_in">cd</span> /iscsi </span><br><span class="line">/iscsi&gt; create iqn.2014-09.com.example:server</span><br><span class="line">Created target iqn.2014-09.com.example:server.</span><br><span class="line">Created TPG 1.</span><br><span class="line">/iscsi&gt; ls</span><br><span class="line">o- iscsi ........................................... [Targets: 1]</span><br><span class="line">  o- iqn.2014-09.com.example:server ................ [TPGs: 1]</span><br><span class="line">    o- tpg1 ........................................ [no-gen-acls, no-auth]</span><br><span class="line">      o- acls ...................................... [ACLs: 0]</span><br><span class="line">      o- luns ...................................... [LUNs: 0]</span><br><span class="line">      o- portals ................................... [Portals: 0]</span><br><span class="line">/iscsi&gt; <span class="built_in">cd</span> iqn.2014-09.com.example:server/tpg1/acls </span><br><span class="line">/iscsi/iqn.20...ver/tpg1/acls&gt; create iqn.2014-09.com.example:desktop</span><br><span class="line">Created Node ACL <span class="keyword">for</span> iqn.2014-09.com.example:desktop</span><br><span class="line">/iscsi/iqn.20...ver/tpg1/acls&gt; <span class="built_in">cd</span> /iscsi/iqn.2014-09.com.example:server/tpg1/luns </span><br><span class="line">/iscsi/iqn.20...ver/tpg1/luns&gt; create /backstores/block/iscsi_store </span><br><span class="line">Created LUN 0.</span><br><span class="line">Created LUN 0-&gt;0 mapping <span class="keyword">in</span> node ACL iqn.2014-09.com.example:desktop</span><br><span class="line">/iscsi/iqn.20...ver/tpg1/luns&gt; <span class="built_in">cd</span> /iscsi/iqn.2014-09.com.example:server/tpg1/portals </span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; create 172.25.0.11 3260</span><br><span class="line">Using default IP port 3260</span><br><span class="line">Created network portal 172.25.0.11:3260.</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; <span class="built_in">exit</span></span><br><span class="line">Global pref auto_save_on_exit=<span class="literal">true</span></span><br><span class="line">Last 10 configs saved <span class="keyword">in</span> /etc/target/backup.</span><br><span class="line">Configuration saved to /etc/target/saveconfig.json</span><br><span class="line"></span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --add-rich-rule 'rule family="ipv4" source address="172.25.0.0/24" port port=3260 protocol=tcp accept' --permanent </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># firewall-cmd --reload </span></span><br><span class="line">success</span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl restart target</span></span><br><span class="line">[root@server0 wsgi]<span class="comment"># systemctl enable target</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/target.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/target.service'</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ä¸€é¢˜çš„éªŒè¯æ˜¯ä¸‹ä¸€é¢˜</p>
</blockquote>
<h4 id="18-é…ç½®-desktop-ä½¿å…¶èƒ½è¿æ¥åœ¨-server-ä¸Šæä¾›çš„-iscsi"><a href="#18-é…ç½®-desktop-ä½¿å…¶èƒ½è¿æ¥åœ¨-server-ä¸Šæä¾›çš„-iscsi" class="headerlink" title="18.é…ç½® desktop ä½¿å…¶èƒ½è¿æ¥åœ¨ server ä¸Šæä¾›çš„ iscsi"></a>18.é…ç½® desktop ä½¿å…¶èƒ½è¿æ¥åœ¨ server ä¸Šæä¾›çš„ iscsi</h4><p>iSCSI è®¾å¤‡åœ¨ç³»ç»Ÿå¯åŠ¨çš„æœŸé—´è‡ªåŠ¨åŠ è½½</p>
<p>å—è®¾å¤‡ iSCSI ä¸ŠåŒ…å«ä¸€ä¸ªå¤§å° 1500MiB çš„åˆ†åŒº,å¹¶æ ¼å¼åŒ–ä¸º ext4</p>
<p>æ­¤åˆ†åŒºæŒ‚è½½åœ¨/mnt/netdev ä¸ŠåŒæ—¶åœ¨ç³»ç»Ÿå¯åŠ¨çš„æœŸé—´è‡ªåŠ¨åŠ è½½</p>
<p><strong>desktop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@desktop0 ~]<span class="comment"># yum install -y iscsi-init*</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkdir /mnt/netdev</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/iscsi/initiatorname.iscsi </span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># cat /etc/iscsi/initiatorname.iscsi </span></span><br><span class="line">InitiatorName=iqn.2014-09.com.example:desktop</span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl restart iscsi iscsid</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># systemctl enable iscsi iscsid</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/iscsid.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/iscsid.service'</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># iscsiadm -m discovery -t st -p 172.25.0.11</span></span><br><span class="line">172.25.0.11:3260,1 iqn.2014-09.com.example:server</span><br><span class="line">[root@desktop0 ~]<span class="comment"># iscsiadm -m node -l</span></span><br><span class="line">Logging <span class="keyword">in</span> to [iface: default, target: iqn.2014-09.com.example:server, portal: 172.25.0.11,3260] (multiple)</span><br><span class="line">Login to [iface: default, target: iqn.2014-09.com.example:server, portal: 172.25.0.11,3260] successful.</span><br><span class="line">[root@desktop0 ~]<span class="comment"># lsblk </span></span><br><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   3G  0 disk </span><br><span class="line">vda    253:0    0  10G  0 disk </span><br><span class="line">â””â”€vda1 253:1    0  10G  0 part /</span><br><span class="line">vdb    253:16   0  10G  0 disk </span><br><span class="line">[root@desktop0 ~]<span class="comment"># fdisk /dev/sda</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (8192-6291455, default 8192): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (8192-6291455, default 6291455): +1500M</span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">[root@desktop0 ~]<span class="comment"># partprobe</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># mkfs.ext4 /dev/sda1</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># blkid | grep sda</span></span><br><span class="line">/dev/sda1: UUID=<span class="string">"142c6ec3-0d06-4f89-91e3-8201e8186d37"</span> TYPE=<span class="string">"ext4"</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># vim /etc/fstab </span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># tail -n 1 /etc/fstab </span></span><br><span class="line">UUID=<span class="string">"142c6ec3-0d06-4f89-91e3-8201e8186d37"</span>	/mnt/netdev	ext4 defaults,_netdev 0 0</span><br><span class="line">[root@desktop0 ~]<span class="comment"># mount -a</span></span><br><span class="line">[root@desktop0 ~]<span class="comment"># df -h</span></span><br><span class="line">/dev/vda1              10G  3.1G  7.0G  31% /</span><br><span class="line">devtmpfs              906M     0  906M   0% /dev</span><br><span class="line">tmpfs                 921M   80K  921M   1% /dev/shm</span><br><span class="line">.............................</span><br><span class="line">/dev/sda1             1.5G  4.5M  1.4G   1% /mnt/netdev</span><br></pre></td></tr></table></figure>

<h4 id="19-ç¼–å†™ä¸€ä¸ªä½äº-root-program-çš„-shell-è„šæœ¬"><a href="#19-ç¼–å†™ä¸€ä¸ªä½äº-root-program-çš„-shell-è„šæœ¬" class="headerlink" title="19.ç¼–å†™ä¸€ä¸ªä½äº/root/program çš„ shell è„šæœ¬"></a>19.ç¼–å†™ä¸€ä¸ªä½äº/root/program çš„ shell è„šæœ¬</h4><p>å½“æ‰§è¡Œ/root/program tang æ—¶,ç»ˆç«¯æ˜¾ç¤º kai</p>
<p>å½“æ‰§è¡Œ/root/program kai æ—¶,ç»ˆç«¯æ˜¾ç¤º tang</p>
<p>å½“ä»…æ‰§è¡Œ/root/program ä¸åŠ å‚æ•°,æˆ–è€…åŠ ä¸Šå…¶ä»–å‚æ•°æ—¶,ç»ˆç«¯æ˜¾ç¤ºæ ‡å‡†é”™è¯¯è¾“å‡º/root/program tang|kai</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /root/program</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /root/program </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    tang)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"kai"</span></span><br><span class="line">	;;</span><br><span class="line">    kai)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"tang"</span></span><br><span class="line">	;;</span><br><span class="line">    *)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"/root/program tang|kai"</span></span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chmod +x /root/program</span></span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program tang </span></span><br><span class="line">kai</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program kai</span></span><br><span class="line">tang</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/program</span></span><br><span class="line">/root/program tang|kai</span><br></pre></td></tr></table></figure>

<h4 id="20-å†™ä¸€ä¸ªåˆ›å»ºç”¨æˆ·çš„è„šæœ¬"><a href="#20-å†™ä¸€ä¸ªåˆ›å»ºç”¨æˆ·çš„è„šæœ¬" class="headerlink" title="20.å†™ä¸€ä¸ªåˆ›å»ºç”¨æˆ·çš„è„šæœ¬"></a>20.å†™ä¸€ä¸ªåˆ›å»ºç”¨æˆ·çš„è„šæœ¬</h4><p>è„šæœ¬åä¸º/root/mkuser,è„šæœ¬æ‰§è¡Œæ—¶éœ€è¦æ·»åŠ ä¸€ä¸ªå‚æ•°,</p>
<p>è¯·åœ¨ <a href="http://classroom.example.com/pub/user" target="_blank" rel="noopener">http://classroom.example.com/pub/user</a> ä¸‹è½½ä¸‹æ¥,è¿™ä¸ª user å°±æ˜¯å‚æ•°</p>
<p>å¦‚æœæ²¡æœ‰å‚æ•°,å°†æç¤º:Usage:/root/mkuser</p>
<p>å¦‚æœå‚æ•°ä¸ºä¸å­˜åœ¨çš„æ–‡ä»¶,åˆ™æç¤º:Input file not found</p>
<p>å¦‚æœå­˜åœ¨,åˆ™åˆ›å»ºç”¨æˆ·,ç”¨æˆ·ä¸éœ€è¦è®¾ç½®å¯†ç ,ç”¨æˆ·çš„ shell ä¸º/bin/flase</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># vim /root/mkuser</span></span><br><span class="line">[root@server0 ~]<span class="comment"># cat /root/mkuser </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Usage:/root/mkuser"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$1</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> $(cat <span class="variable">$1</span>);<span class="keyword">do</span></span><br><span class="line">	useradd -s /bin/flase <span class="variable">$user</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Input file not found"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">[root@server0 ~]<span class="comment"># chmod +x /root/mkuser </span></span><br><span class="line">[root@server0 ~]<span class="comment"># cd /root</span></span><br><span class="line">[root@server0 ~]<span class="comment"># wget http://classroom.example.com/pub/user </span></span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser</span></span><br><span class="line">Usage:/root/mkuser</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser dfs</span></span><br><span class="line">Input file not found</span><br><span class="line">[root@server0 ~]<span class="comment"># /root/mkuser user</span></span><br><span class="line">[root@server0 ~]<span class="comment"># id user1</span></span><br><span class="line">uid=1001(user1) gid=1001(user1) groups=1001(user1)</span><br><span class="line">[root@server0 ~]<span class="comment"># id user2</span></span><br><span class="line">uid=1002(user2) gid=1002(user2) groups=1002(user2)</span><br><span class="line">[root@server0 ~]<span class="comment"># id user3</span></span><br><span class="line">uid=1003(user3) gid=1003(user3) groups=1003(user3)</span><br><span class="line">[root@server0 ~]<span class="comment"># cat user </span></span><br><span class="line">user1</span><br><span class="line">user2</span><br><span class="line">user3</span><br><span class="line">user4</span><br><span class="line">user5</span><br><span class="line">[root@server0 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h4 id="21-åœ¨ä½ çš„æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ª-mariadb-æ•°æ®åº“"><a href="#21-åœ¨ä½ çš„æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ª-mariadb-æ•°æ®åº“" class="headerlink" title="21.åœ¨ä½ çš„æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ª mariadb æ•°æ®åº“;"></a>21.åœ¨ä½ çš„æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ª mariadb æ•°æ®åº“;</h4><p>æ•°æ®åº“åä¸º contacts</p>
<p>æ•°æ®åº“åº”è¯¥åŒ…å«æ¥è‡ªæ•°æ®åº“å¤åˆ¶çš„å†…å®¹ã€‚å¤åˆ¶æ–‡ä»¶çš„ URL ä¸º<br><a href="http://classroom.example.com/pub/user.mdb" target="_blank" rel="noopener">http://classroom.example.com/pub/user.mdb</a></p>
<p>æ•°æ®åº“åªèƒ½è¢« localhost è®¿é—®</p>
<p>é™¤äº† root ç”¨æˆ·,æ­¤æ•°æ®åº“åªèƒ½è¢«ç”¨æˆ· raikon æŸ¥è¯¢,æ­¤ç”¨æˆ·å¯†ç ä¸º redhat</p>
<p>root ç”¨æˆ·å¯†ç ä¸º redhat,åŒæ—¶ä¸å…è®¸ç©ºå¯†ç ç™»é™†</p>
<p><strong>server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@server0 ~]<span class="comment"># yum install mariadb* -y</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@server0 ~]<span class="comment"># systemctl enable mariadb</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/mariadb.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/mariadb.service'</span></span><br><span class="line">[root@server0 ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line">Set root password? [Y/n] y</span><br><span class="line">New password: <span class="comment">#redhat</span></span><br><span class="line">Re-enter new password: <span class="comment">#redhat</span></span><br><span class="line">Password updated successfully!</span><br><span class="line">Remove anonymous users? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line">Disallow root login remotely? [Y/n] n</span><br><span class="line"> ... skipping.</span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] y</span><br><span class="line"> - Dropping <span class="built_in">test</span> database...</span><br><span class="line"> ... Success!</span><br><span class="line">Reload privilege tables now? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line">[root@server0 ~]<span class="comment"># wget http://classroom.example.com/pub/users.mdb</span></span><br><span class="line"></span><br><span class="line">[root@server0 ~]<span class="comment"># mysql -uroot -predhat</span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 11</span><br><span class="line">Server version: 5.5.35-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database Contacts;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use Contacts;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [Contacts]&gt; <span class="built_in">source</span> /root/user.mdb;</span><br><span class="line">MariaDB [Contacts]&gt; grant select on Contacts .* to <span class="string">'raikon@localhost'</span> identified by <span class="string">'redhat'</span>;</span><br><span class="line">MariaDB [Contacts]&gt; flush privileges;</span><br><span class="line">MariaDB [Contacts]&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<h4 id="24-æ•°æ®åº“æŸ¥è¯¢"><a href="#24-æ•°æ®åº“æŸ¥è¯¢" class="headerlink" title="24.æ•°æ®åº“æŸ¥è¯¢"></a>24.æ•°æ®åº“æŸ¥è¯¢</h4><p>åœ¨ system1 ä¸Šä½¿ç”¨æ•°æ®åº“ Contacts ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ SQL æŸ¥è¯¢ä»¥å›ç­”ä¸‹åˆ—é—®é¢˜ï¼š</p>
<p> å¯†ç æ˜¯fadora çš„äººçš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p> æœ‰å¤šå°‘äººçš„å§“åæ˜¯ John ï¼ŒåŒæ—¶å±…ä½åœ¨ Santa Clara ï¼Ÿ</p>
<h3 id="system1"><a href="#system1" class="headerlink" title="system1"></a>system1</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@system1 ~]<span class="comment"># mysql -u root -predhat</span></span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use Contacts;</span><br><span class="line"></span><br><span class="line">MariaDB [Contacts]&gt; SELECT u_name.firstname FROM u_name, u_passwd WHERE u_name.userid = u_passwd.uid AND u_passwd.password = <span class="string">'fadora'</span>;</span><br><span class="line">+-----------+</span><br><span class="line">| firstname |</span><br><span class="line">+-----------+</span><br><span class="line">| John      |</span><br><span class="line">+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [Contacts]&gt; SELECT COUNT(*) FROM u_name,u_loc WHERE u_name.userid = u_loc.uid AND u_name.firstname = <span class="string">'John'</span> AND u_loc.location = <span class="string">'Santa Clara'</span>;</span><br><span class="line">+----------+</span><br><span class="line">| COUNT(*) |</span><br><span class="line">+----------+</span><br><span class="line">|        4 |</span><br><span class="line">+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>å¯†ç æ˜¯fadora çš„äººçš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>John</p>
<p><strong>æœ‰å¤šå°‘äººçš„å§“åæ˜¯ John ï¼ŒåŒæ—¶å±…ä½åœ¨ Santa Clara ï¼Ÿ</strong></p>
<p> 4</p>
<blockquote>
<p>åœ¨è¿™é‡Œï¼Œè€ƒè€…è¯·åˆ‡è®°ï¼ŒæŸ¥è¯¢ä¹‹åçš„ç­”æ¡ˆè®°ä½ä¸€å®šè¦å¡«å†™åˆ°æ‰€å¡«å†™çš„æ­£ç¡®åœ°æ–¹ã€‚</p>
<p>ä¸è¦å¿˜è®°å¡«å†™è¿›å»</p>
</blockquote>
<p>ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹ã€‹</p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡RHCE 7 ç‰ˆæœ¬çš„è®¤è¯è€ƒè¯•å‚è€ƒç­”æ¡ˆï¼Œå¦‚æœ‰é”™è¯¯è¯·è”ç³»åšä¸»è¿›è¡Œæ›´æ”¹ï¼Œæœ€åç¥æ„¿å¤§å®¶RHCEè®¤è¯å–å¾—å¥½æˆç»©ï¼ï¼ï¼ï¼</p>
</blockquote>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/28.linux--RHCE 7ç‰ˆæœ¬è®¤è¯è€ƒè¯•ç»ƒä¹ /" data-id="ck7ooyamy003y4su6b0md9jnc"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-27.linux--ISCSIæœåŠ¡" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/27.linux--ISCSIæœåŠ¡/"
    >ISCSIæœåŠ¡</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/27.linux--ISCSIæœåŠ¡/" class="article-date">
  <time datetime="2020-03-12T11:38:40.262Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="ISCSIæŠ€æœ¯æ¦‚è¿°"><a href="#ISCSIæŠ€æœ¯æ¦‚è¿°" class="headerlink" title="ISCSIæŠ€æœ¯æ¦‚è¿°"></a>ISCSIæŠ€æœ¯æ¦‚è¿°</h2><p>ç¡¬ç›˜çš„æ¥å£ç±»å‹</p>
<ul>
<li>IDEæ˜¯ä¸€ç§æˆç†Ÿç¨³å®šã€ä»·æ ¼ä¾¿å®œçš„å¹¶è¡Œä¼ è¾“æ¥å£ã€‚</li>
<li>SATAæ˜¯ä¸€ç§ä¼ è¾“é€Ÿåº¦æ›´å¿«ã€æ•°æ®æ ¡éªŒæ›´å®Œæ•´çš„ä¸²è¡Œä¼ è¾“æ¥å£ã€‚</li>
<li>SCSIæ˜¯ä¸€ç§ç”¨äºè®¡ç®—æœºå’Œç¡¬ç›˜ã€å…‰é©±ç­‰è®¾å¤‡ä¹‹é—´ç³»ç»Ÿçº§æ¥å£çš„é€šç”¨æ ‡å‡†ï¼Œå…·æœ‰ç³»ç»Ÿèµ„æºå ç”¨ç‡ä½ã€è½¬é€Ÿé«˜ã€ä¼ è¾“é€Ÿåº¦å¿«ç­‰ä¼˜ç‚¹ã€‚</li>
</ul>
<p>IBMå…¬å¸å¼€å§‹ç ”å‘ISCSIæŠ€æœ¯</p>
<p>â€‹        è¿™æ˜¯ä¸€ç§å°†SCSIæ¥å£ä¸ä»¥å¤ªç½‘æŠ€æœ¯ç›¸ç»“åˆçš„æ–°å‹å­˜å‚¨æŠ€æœ¯ï¼Œå¯ä»¥ç”¨æ¥åœ¨ç½‘ç»œä¸­ä¼ è¾“SCSIæ¥å£çš„å‘½ä»¤å’Œæ•°æ®ã€‚</p>
<p>iscsi = internet + scsiç¡¬ç›˜æ¥å£</p>
<p>â€‹        è¿™æ ·ï¼Œä¸ä»…å…‹æœäº†ä¼ ç»ŸSCSIæ¥å£è®¾å¤‡çš„ç‰©ç†å±€é™æ€§ï¼Œå®ç°äº†è·¨åŒºåŸŸçš„å­˜å‚¨èµ„æºå…±äº«ï¼Œè¿˜å¯ä»¥åœ¨ä¸åœæœºçš„çŠ¶æ€ä¸‹æ‰©å±•å­˜å‚¨å®¹é‡ã€‚</p>
<h2 id="é…ç½®ISCSIæœåŠ¡ç«¯"><a href="#é…ç½®ISCSIæœåŠ¡ç«¯" class="headerlink" title="é…ç½®ISCSIæœåŠ¡ç«¯"></a>é…ç½®ISCSIæœåŠ¡ç«¯</h2><h4 id="æ·»åŠ ç¡¬ç›˜"><a href="#æ·»åŠ ç¡¬ç›˜" class="headerlink" title="æ·»åŠ ç¡¬ç›˜"></a>æ·»åŠ ç¡¬ç›˜</h4><p>é¦–å…ˆæˆ‘ä»¬æå‰å°†è™šæ‹ŸæœºåŠ å…¥ä¸€å—ç¡¬ç›˜</p>
<p>å¼€æœºå¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<h4 id="yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº"><a href="#yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº" class="headerlink" title="yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº"></a>yumå®‰è£…ISCSIæœåŠ¡ç«¯ç¨‹åº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y targetd targetcli</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/targetd.service to /usr/lib/systemd/system/targetd.service.</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº"><a href="#é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº" class="headerlink" title="é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº"></a>é…ç½®ISCSIæœåŠ¡ç«¯å…±äº«èµ„æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># targetcli</span></span><br><span class="line">Warning: Could not load preferences file /root/.targetcli/prefs.bin.</span><br><span class="line">targetcli shell version 2.1.fb46</span><br><span class="line">Copyright 2011-2013 by Datera, Inc and others.</span><br><span class="line">For <span class="built_in">help</span> on commands, <span class="built_in">type</span> <span class="string">'help'</span>.</span><br><span class="line"></span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt; <span class="built_in">cd</span> backstores/block</span><br><span class="line">/backstores/block&gt; create disk1 /dev/sdb</span><br><span class="line">Created block storage object disk1 using /dev/sdb.</span><br><span class="line">/backstores/block&gt; <span class="built_in">cd</span> /</span><br><span class="line">/&gt; ls</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ..................... [/dev/sdb (20.0GiB) write-thru deactivated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 0]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºISCSI-targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº"><a href="#åˆ›å»ºISCSI-targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº" class="headerlink" title="åˆ›å»ºISCSI targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº"></a>åˆ›å»ºISCSI targetåç§°ä»¥åŠé…ç½®å…±äº«èµ„æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/&gt; <span class="built_in">cd</span> iscsi</span><br><span class="line">/iscsi&gt; .</span><br><span class="line">/iscsi&gt; create</span><br><span class="line">Created target iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab.</span><br><span class="line">Created TPG 1.</span><br><span class="line">Global pref auto_add_default_portal=<span class="literal">true</span></span><br><span class="line">Created default portal listening on all IPs (0.0.0.0), port 3260.</span><br><span class="line">/iscsi&gt; <span class="built_in">cd</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab/</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; ls</span><br><span class="line">o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ....... [TPGs: 1]</span><br><span class="line">  o- tpg1 ............................................... [no-gen-acls, no-auth]</span><br><span class="line">    o- acls .......................................................... [ACLs: 0]</span><br><span class="line">    o- luns .......................................................... [LUNs: 0]</span><br><span class="line">    o- portals .................................................... [Portals: 1]</span><br><span class="line">      o- 0.0.0.0:3260 ..................................................... [OK]</span><br><span class="line">/iscsi/iqn.20....c0e1179441ab&gt; <span class="built_in">cd</span> tpg1/luns</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; create /backstores/block/disk1</span><br><span class="line">Created LUN 0.</span><br></pre></td></tr></table></figure>

<h4 id="è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰"><a href="#è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰" class="headerlink" title="è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰"></a>è®¾ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/luns&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; ls</span><br><span class="line">o- tpg1 ................................................. [no-gen-acls, no-auth]</span><br><span class="line">  o- acls ............................................................ [ACLs: 0]</span><br><span class="line">  o- luns ............................................................ [LUNs: 1]</span><br><span class="line">  | o- lun0 ........................ [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  o- portals ...................................................... [Portals: 1]</span><br><span class="line">    o- 0.0.0.0:3260 ....................................................... [OK]</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> acls</span><br><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; create iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created Node ACL <span class="keyword">for</span> iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line">Created mapped LUN 0.</span><br></pre></td></tr></table></figure>

<h4 id="è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·"><a href="#è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·" class="headerlink" title="è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·"></a>è®¾ç½®ISCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/iscsi/iqn.20...1ab/tpg1/acls&gt; <span class="built_in">cd</span> ..</span><br><span class="line">/iscsi/iqn.20...179441ab/tpg1&gt; <span class="built_in">cd</span> portals/</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; ls</span><br><span class="line">o- portals ........................................................ [Portals: 1]</span><br><span class="line">  o- 0.0.0.0:3260 ......................................................... [OK]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">Using default IP port 3260</span><br><span class="line">Created network portal 192.168.176.222:3260.</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤å¤„å¦‚æœæŠ¥é”™ è¯·æ‰§è¡Œä¸‹é¢ä¸€æ­¥éª¤ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; create 192.168.176.222</span><br><span class="line">&gt; Using default IP port 3260</span><br><span class="line">&gt; Could not create NetworkPortal <span class="keyword">in</span> configFS</span><br><span class="line">&gt; </span><br><span class="line">&gt; /iscsi/iqn.20.../tpg1/portals&gt; delete 0.0.0.0 3260</span><br><span class="line">&gt; Deleted network portal 0.0.0.0:3260</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="æ£€æŸ¥é…ç½®ä¿¡æ¯"><a href="#æ£€æŸ¥é…ç½®ä¿¡æ¯" class="headerlink" title="æ£€æŸ¥é…ç½®ä¿¡æ¯"></a>æ£€æŸ¥é…ç½®ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">iscsi/iqn.20.../tpg1/portals&gt; ls /</span><br><span class="line">o- / ..................................................................... [...]</span><br><span class="line">  o- backstores .......................................................... [...]</span><br><span class="line">  | o- block .............................................. [Storage Objects: 1]</span><br><span class="line">  | | o- disk1 ....................... [/dev/sdb (20.0GiB) write-thru activated]</span><br><span class="line">  | |   o- alua ............................................... [ALUA Groups: 1]</span><br><span class="line">  | |     o- default_tg_pt_gp ................... [ALUA state: Active/optimized]</span><br><span class="line">  | o- fileio ............................................. [Storage Objects: 0]</span><br><span class="line">  | o- pscsi .............................................. [Storage Objects: 0]</span><br><span class="line">  | o- ramdisk ............................................ [Storage Objects: 0]</span><br><span class="line">  o- iscsi ........................................................ [Targets: 1]</span><br><span class="line">  | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab ... [TPGs: 1]</span><br><span class="line">  |   o- tpg1 ........................................... [no-gen-acls, no-auth]</span><br><span class="line">  |     o- acls ...................................................... [ACLs: 1]</span><br><span class="line">  |     | o- iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client  [Mapped LUNs: 1]</span><br><span class="line">  |     |   o- mapped_lun0 ............................. [lun0 block/disk1 (rw)]</span><br><span class="line">  |     o- luns ...................................................... [LUNs: 1]</span><br><span class="line">  |     | o- lun0 .................. [block/disk1 (/dev/sdb) (default_tg_pt_gp)]</span><br><span class="line">  |     o- portals ................................................ [Portals: 1]</span><br><span class="line">  |       o- 192.168.176.222:3260 ......................................... [OK]</span><br><span class="line">  o- loopback ..................................................... [Targets: 0]</span><br><span class="line">/iscsi/iqn.20.../tpg1/portals&gt; <span class="built_in">exit</span></span><br><span class="line">Global pref auto_save_on_exit=<span class="literal">true</span></span><br><span class="line">Last 10 configs saved <span class="keyword">in</span> /etc/target/backup.</span><br><span class="line">Configuration saved to /etc/target/saveconfig.json</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡"><a href="#é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡" class="headerlink" title="é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡"></a>é…ç½®é˜²ç«å¢™ä»¥åŠé‡å¯æœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># systemctl restart targetd</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable targetd</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># getenforce</span></span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®ISCSIå®¢æˆ·ç«¯"><a href="#é…ç½®ISCSIå®¢æˆ·ç«¯" class="headerlink" title="é…ç½®ISCSIå®¢æˆ·ç«¯"></a>é…ç½®ISCSIå®¢æˆ·ç«¯</h2><blockquote>
<p>å®¢æˆ·ç«¯åœ°å€ï¼š192.168.176.111</p>
</blockquote>
<h4 id="å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator"><a href="#å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator" class="headerlink" title="å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator"></a>å®‰è£…ISCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiator</h4><blockquote>
<p>åœ¨rhel 7 ç³»ç»Ÿä¸­ï¼ŒISCSI-initator-utilså·²ç»è¢«é»˜è®¤å®‰è£…äº†</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># yum install iscsi-initiator-utils</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶"></a>ç¼–è¾‘initiatornameé…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># vim /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cat /etc/iscsi/initiatorname.iscsi</span></span><br><span class="line">InitiatorName=iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab:client</span><br><span class="line"></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl restart iscsid</span></span><br><span class="line">[root@client111 ~]<span class="comment"># systemctl enable iscsid</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/iscsid.service to /usr/lib/systemd/system/iscsid.service.</span><br></pre></td></tr></table></figure>

<h4 id="ç™»å½•iSCSIæœåŠ¡ç«¯"><a href="#ç™»å½•iSCSIæœåŠ¡ç«¯" class="headerlink" title="ç™»å½•iSCSIæœåŠ¡ç«¯"></a>ç™»å½•iSCSIæœåŠ¡ç«¯</h4><blockquote>
<p> iscsiadmæ˜¯ç”¨äºç®¡ç†ã€æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤iSCSIæ•°æ®åº“é…ç½®æ–‡ä»¶çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·éœ€è¦å…ˆä½¿ç”¨è¿™ä¸ªå·¥å…·æ‰«æå‘ç°è¿œç¨‹iSCSIæœåŠ¡ç«¯ï¼Œç„¶åæŸ¥çœ‹æ‰¾åˆ°çš„æœåŠ¡ç«¯ä¸Šæœ‰å“ªäº›å¯ç”¨çš„å…±äº«å­˜å‚¨èµ„æºã€‚</p>
<p>-m discoveryå‚æ•°çš„ç›®çš„æ˜¯æ‰«æå¹¶å‘ç°å¯ç”¨çš„å­˜å‚¨èµ„æºï¼Œ</p>
<p>-t stå‚æ•°ä¸ºæ‰§è¡Œæ‰«ææ“ä½œçš„ç±»å‹ï¼Œ</p>
<p>-p 192.168.176.222 å‚æ•°ä¸ºiSCSIæœåŠ¡ç«¯çš„IPåœ°å€</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m discovery -t st -p 192.168.176.222</span></span><br><span class="line">192.168.176.222:3260,1 iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-m nodeå‚æ•°ä¸ºå°†å®¢æˆ·ç«¯æ‰€åœ¨ä¸»æœºä½œä¸ºä¸€å°èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œ</p>
<p>-T  iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80å‚æ•°ä¸ºè¦ä½¿ç”¨çš„å­˜å‚¨èµ„æº (ç›´æ¥å¤åˆ¶å‰é¢å‘½ä»¤ä¸­æ‰«æå‘ç°çš„ç»“æœï¼Œä»¥å…é”™è¯¯)</p>
<p>-p 192.168.176.222å‚æ•°ä¾ç„¶ä¸ºæœåŠ¡ç«¯iSCSIæœåŠ¡ç«¯çš„IPåœ°å€ã€‚</p>
<p>â€“loginæˆ–-lå‚æ•°è¿›è¡Œç™»å½•éªŒè¯ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -p 192.168.176.222 --login</span></span><br><span class="line">Logging <span class="keyword">in</span> to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] (multiple)</span><br><span class="line">Login to [iface: default, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬lsbakçœ‹ä¸€ä¸‹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   20G  0 disk</span><br><span class="line">sr0              11:0    1  4.2G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‘ç°æ­¤å¤„å¤šäº†ä¸€ä¸ª/dev/sdbçš„è®¾å¤‡æ–‡ä»¶</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br></pre></td></tr></table></figure>

<h4 id="æŒ‚è½½è®¾å¤‡"><a href="#æŒ‚è½½è®¾å¤‡" class="headerlink" title="æŒ‚è½½è®¾å¤‡"></a>æŒ‚è½½è®¾å¤‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># file /dev/sdb</span></span><br><span class="line">/dev/sdb: block special</span><br><span class="line">[root@client111 ~]<span class="comment"># mkfs.xfs /dev/sdb</span></span><br><span class="line">meta-data=/dev/sdb               isize=512    agcount=4, agsize=1310720 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=1        finobt=0, sparse=0</span><br><span class="line">data     =                       bsize=4096   blocks=5242880, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1</span><br><span class="line"><span class="built_in">log</span>      =internal <span class="built_in">log</span>           bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@client111 ~]<span class="comment"># mkdir /iscsi</span></span><br><span class="line">[root@client111 ~]<span class="comment"># mount /dev/sdb /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ                ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">/dev/sdb                xfs        20G   33M   20G    1% /iscsi</span><br></pre></td></tr></table></figure>

<h4 id="æ°¸ä¹…æŒ‚è½½"><a href="#æ°¸ä¹…æŒ‚è½½" class="headerlink" title="æ°¸ä¹…æŒ‚è½½"></a>æ°¸ä¹…æŒ‚è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># blkid | grep /dev/sdb</span></span><br><span class="line">/dev/sdb: UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line">[root@client111 ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@client111 ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">UUID=<span class="string">"cc4c5965-a701-4534-85ad-60df267cf5d7"</span> /iscsi xfs defaults,_netdev 0 0</span><br><span class="line">[root@client111 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>

<h4 id="å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡"><a href="#å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡" class="headerlink" title="å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡"></a>å¸è½½ISCSIå…±äº«èµ„æºè®¾å¤‡</h4><blockquote>
<p> å¯ä»¥ç”¨iscsiadmå‘½ä»¤çš„-uå‚æ•°å°†å…¶è®¾å¤‡å¸è½½</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># umount /iscsi/</span></span><br><span class="line">[root@client111 ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ                ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/centos-root xfs        17G  4.4G   13G   26% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.0M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">[root@client111 ~]<span class="comment"># iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab -u</span></span><br><span class="line">Logging out of session [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260]</span><br><span class="line">Logout of [sid: 1, target: iqn.2003-01.org.linux-iscsi.server222.x8664:sn.c0e1179441ab, portal: 192.168.176.222,3260] successful.</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1ï¼ç®€è¿°iSCSIå­˜å‚¨æŠ€æœ¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ä½œç”¨ã€‚</p>
<p>2ï¼åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒiSCSIæœåŠ¡ç«¯å’ŒiSCSIå®¢æˆ·ç«¯æ‰€ä½¿ç”¨çš„æœåŠ¡ç¨‹åºåˆ†åˆ«å«ä»€ä¹ˆï¼Ÿ</p>
<p>3ï¼åœ¨ä½¿ç”¨targetcliå‘½ä»¤é…ç½®iSCSIæœåŠ¡ç«¯é…ç½®æ–‡ä»¶æ—¶ï¼Œaclsä¸portalså‚æ•°ç›®å½•ä¸­åˆ†åˆ«å­˜æ”¾ä»€ä¹ˆå†…å®¹ï¼Ÿ</p>
<p>4ï¼iSCSIåè®®å ç”¨äº†æœåŠ¡å™¨å“ªä¸ªåè®®å’Œç«¯å£å·ï¼Ÿ</p>
<p>5ï¼ç”¨æˆ·åœ¨å¡«å†™fstabè®¾å¤‡æŒ‚è½½é…ç½®æ–‡ä»¶æ—¶ï¼Œä¸€èˆ¬ä¼šæŠŠè¿œç¨‹å­˜å‚¨èµ„æºçš„UUIDï¼ˆè€Œéè®¾å¤‡çš„åç§°ï¼‰å¡«å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/27.linux--ISCSIæœåŠ¡/" data-id="ck7ooyah3001q4su6xj96hu7s"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-26.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/26.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/"
    >shellè„šæœ¬ç¬”è®°(è„šæœ¬)</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/26.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/" class="article-date">
  <time datetime="2020-03-12T11:38:40.259Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------çŒœæ•°å­—-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ æ‰€çŒœåˆ°çš„æ•°å­—ï¼š"</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å“‡ç‘Ÿï¼å¥½å‰å®³ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä½ çŒœé”™äº†ï¼Œå“ˆå“ˆå“ˆ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------è®¡ç®—å¹´é¾„-------------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">age=100</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥æ‚¨ä»Šå¹´çš„å¹´é¾„ï¼š"</span> user_age</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_age</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æœ‰è¯¯ï¼Œè¯·é‡æ–°æ‰§è¡Œå¹¶ä¸”è¾“å…¥1-100ä¹‹å‰ä»»æ„æ•°å€¼ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_age</span> -lt <span class="variable">$age</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¿˜å¯ä»¥æ´»"</span> $[ <span class="variable">$age</span> - <span class="variable">$user_age</span> ] <span class="string">"å²ã€‚"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æœ‰è¯¯ï¼Œè¯·é‡æ–°æ‰§è¡Œå¹¶ä¸”è¾“å…¥1-100ä¹‹å‰ä»»æ„æ•°å€¼ï¼"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------è¾“å…¥ä¸‰ä¸ªæ•°å€¼ï¼Œè‡ªåŠ¨å–å‡ºæœ€å¤§å€¼ä¸æœ€å°å€¼----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 3);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š"</span> num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$num</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -gt <span class="variable">$max</span> ];<span class="keyword">then</span></span><br><span class="line">        max=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$num</span> -lt <span class="variable">$min</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æœ€å¤§çš„æ•°å­—ä¸º: "</span><span class="variable">$max</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æœ€å°çš„æ•°å­—ä¸º: "</span><span class="variable">$min</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#------æˆç»©ï¼š90ä¸Šä¼˜ç§€ã€80ä¸Šè‰¯å¥½ã€70ä¸Šä¸­ç­‰ã€60ä¸ŠåŠæ ¼ã€60ä¸‹å·®-----------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥æ‚¨çš„æˆç»©ï¼š"</span> user_chengji</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_chengji</span> |egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -gt 100 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥0-100ä»¥å†…çš„æ•°å€¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_chengji</span> -ge 90 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¼˜ç§€"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 80 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºè‰¯å¥½"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 70 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¸­ç­‰"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -ge 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºåŠæ ¼"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_chengji</span> -le 60 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºå·®"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#--------caseè¯­æ³•---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">    <span class="string">"start"</span>|<span class="string">"Start"</span>|<span class="string">"START"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"stop"</span>|<span class="string">"STOP"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">    ;;</span><br><span class="line">    <span class="string">"restart"</span>)</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl stop</span><br><span class="line">        /usr/<span class="built_in">local</span>/httpd/apachectl start</span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"status"</span>)</span><br><span class="line">        count=$(ps -ef | egrep -v <span class="string">"grep | <span class="variable">$0</span>"</span> | grep -c httpd &amp;&gt; /dev/null)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$count</span> -ne 0 ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is running."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"httpd is stopped."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usageï¼šservice httpd</span></span><br><span class="line"><span class="string">        start|stop|restart|status"</span></span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp httpd /etc/init.d/</span><br><span class="line">chmod +x /etc/init.d/httpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ çš„åˆ†æ•°ï¼š"</span> user_num</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user_num</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·æ­£ç¡®åœ°è¾“å…¥æ‚¨çš„åˆ†æ•°ï¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$user_num</span> <span class="keyword">in</span></span><br><span class="line">    -gt100)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¯·æ­£ç¡®è¾“å…¥æ‚¨çš„åˆ†æ•°ï¼"</span></span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨çš„æˆç»©ä¸ºä¼˜ç§€ï¼"</span></span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    *ï¼‰</span><br><span class="line">    ï¼›ï¼›</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å–å‡º/etc/passwdçš„ç”¨æˆ·ä»¥åŠUID</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä¸€å…±æœ‰<span class="variable">$(cat $Fa | wc -l)</span>ä¸ªç”¨æˆ·."</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæˆ–ä»¥ä¸Šæ•°å­—ã€‚"</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $* ; <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ— æ•ˆï¼Œè¯·è¾“å…¥æ•°å­—ï¼Œç‰¹æ®Šå­—ç¬¦ä»¥åŠå­—æ¯ç­‰å‡æ— æ•ˆ"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        man=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$min</span> -gt <span class="variable">$i</span> ];<span class="keyword">then</span></span><br><span class="line">        min=<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..100&#125;;<span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">man=<span class="variable">$1</span></span><br><span class="line">min=<span class="variable">$2</span></span><br><span class="line">[ <span class="variable">$#</span> -eq 2 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„æ•°å­—ï¼"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span> | egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    [ $? -ne 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥æ•°å­—ï¼Œå­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ç­‰å‡æ— æ•ˆï¼"</span> &amp;&amp; <span class="built_in">exit</span></span><br><span class="line">    [ <span class="variable">$man</span> -lt <span class="variable">$i</span> ] &amp;&amp; man=<span class="variable">$i</span></span><br><span class="line">    [ <span class="variable">$man</span> -gt <span class="variable">$i</span> ] &amp;&amp; min=<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$man</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$min</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -eq 1 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> -------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ $[ <span class="variable">$i</span> % 2 ] -ne 2 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 2 2 100);<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">    <span class="built_in">echo</span> ------</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> -----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 5 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ------</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">break</span> [num]</span><br><span class="line">ä¸­æ­¢å¾ªç¯</span><br><span class="line">    <span class="built_in">break</span>è¯­å¥åé¢çš„å†…å®¹ä¸ä¼šè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"><span class="built_in">continue</span> [num]</span><br><span class="line">æå‰è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯</span><br><span class="line">    <span class="built_in">continue</span>è¯­å¥åé¢ä¸ä¼šè¢«æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 100);<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -lt 50 -o <span class="variable">$i</span> -gt 70 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">        <span class="built_in">echo</span> ----</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#å˜é‡</span></span><br><span class="line">name=tom</span><br><span class="line">passwd=123321</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å…¥ç”¨æˆ·åä»¥åŠå¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=1;i&gt;=1;i++ ));<span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span> user_name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ç”¨æˆ·åï¼š"</span> user_passwd</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$i</span> -gt 3 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨å·²ä¸‰æ¬¡è¾“å…¥æœ‰è¯¯ï¼Œç³»ç»Ÿé»˜è®¤é”å®šè´¦æˆ·ï¼Œå¯»æ‰¾ç®¡ç†å‘˜è§£é”ï¼â€</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_name</span> != <span class="variable">$name</span> ] &amp;&amp; [ <span class="variable">$passwd</span> != <span class="variable">$user_passwd</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨çš„ç”¨æˆ·åæˆ–è€…å¯†ç æœ‰è¯¯ï¼Œè¯·é‡è¯•ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>hello <span class="variable">$user_name</span>.æ¬¢è¿æ¥åˆ°è¿™é‡Œï¼<span class="string">"</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># whileå¾ªç¯</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    ehco -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -le 10 ];do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo ----</span></span><br><span class="line"><span class="string">    ((i+=2))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    if [ $[ <span class="variable">$i</span> % 2 ] -eq 0 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -lt 5 -o <span class="variable">$i</span> -gt 7 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while [ <span class="variable">$i</span> -lt 10 ];do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -ge 5 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">        echo ----</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">i=1</span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    echo -----</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    echo <span class="variable">$line</span></span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; /etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#! /bin/bash</span></span><br><span class="line"><span class="string">Fa=/etc/passwd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while read line;do</span></span><br><span class="line"><span class="string">    user_name=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $1 &#125;')</span></span></span><br><span class="line"><span class="string">    user_UID=<span class="variable">$(echo $line | awk -F ':' 'NR==1 &#123; print $3 &#125;')</span></span></span><br><span class="line"><span class="string">    echo â€œhello! <span class="variable">$user_name</span> æ‚¨çš„UIDæ˜¯ <span class="variable">$user_UID</span>â€</span></span><br><span class="line"><span class="string">    echo -------------------------</span></span><br><span class="line"><span class="string">done &lt; <span class="variable">$Fa</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> %100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while :;do</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    read -p "</span>è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—<span class="string">" user_num</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span>ã€€| egrep '^[0-9]+$' &amp;&gt; /dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼è¯·é‡è¯•ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        ehco "</span>æ‚¨è¾“å…¥æ­£ç¡®ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$i</span>æ¬¡.<span class="string">"</span></span><br><span class="line"><span class="string">        exit</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string">flag=ture</span></span><br><span class="line"><span class="string">i=3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$i</span> -le 50 ];then</span></span><br><span class="line"><span class="string">        echo <span class="variable">$i</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        flag=false</span></span><br><span class="line"><span class="string">    let i++</span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#ç”¨forå¾ªç¯å†™ä¸ªä¹ä¹ä¹˜æ³•è¡¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#ï¼/bin/bash</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for i in <span class="variable">$(seq 9)</span>;do</span></span><br><span class="line"><span class="string">    for j in <span class="variable">$(seq $i)</span>;do</span></span><br><span class="line"><span class="string">        echo -en "</span><span class="variable">$&#123;j&#125;</span>x<span class="variable">$&#123;i&#125;</span>=$[<span class="variable">$i</span> * <span class="variable">$j</span>]\t<span class="string">"</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">    echo </span></span><br><span class="line"><span class="string">done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">untilå¾ªç¯çŒœæ•°å­—éšæœº</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#!/bg=false</span></span><br><span class="line"><span class="string">i=0</span></span><br><span class="line"><span class="string">num=$[<span class="variable">$RANDOM</span> % 100]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">until <span class="variable">$flag</span>;do</span></span><br><span class="line"><span class="string">    read -p "</span>è¯·è¾“å…¥æ‰€çŒœçš„æ•°å­—ï¼š<span class="string">" user_num</span></span><br><span class="line"><span class="string">    ((i++))</span></span><br><span class="line"><span class="string">    echo <span class="variable">$user_num</span> | egrep '^[0-9]+$' &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">    if [ $? -ne 0 ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    if [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    elif [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];then</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        echo "</span>çŒœå¯¹äº†ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        echo "</span>æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$&#123;i&#125;</span>æ¬¡ï¼<span class="string">"</span></span><br><span class="line"><span class="string">        flag=true</span></span><br><span class="line"><span class="string">        continue</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">done</span></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/26.linux--shellè„šæœ¬ç¬”è®°(è„šæœ¬)/" data-id="ck7ooyagx001n4su61sfbtn12"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-25.linux--shellè„šæœ¬è¿›é˜¶" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/25.linux--shellè„šæœ¬è¿›é˜¶/"
    >shellè„šæœ¬è¿›é˜¶</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/25.linux--shellè„šæœ¬è¿›é˜¶/" class="article-date">
  <time datetime="2020-03-12T11:38:40.257Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="bashæ¡ä»¶åˆ¤æ–­"><a href="#bashæ¡ä»¶åˆ¤æ–­" class="headerlink" title="bashæ¡ä»¶åˆ¤æ–­"></a>bashæ¡ä»¶åˆ¤æ–­</h2><h3 id="æ¡ä»¶æµ‹è¯•ç±»å‹"><a href="#æ¡ä»¶æµ‹è¯•ç±»å‹" class="headerlink" title="æ¡ä»¶æµ‹è¯•ç±»å‹"></a>æ¡ä»¶æµ‹è¯•ç±»å‹</h3><p>æ¡ä»¶æµ‹è¯•åˆ†ä¸º<strong>æ•´æ•°æµ‹è¯•</strong>ã€<strong>å­—ç¬¦æµ‹è¯•</strong>ã€<strong>æ–‡ä»¶æµ‹è¯•</strong></p>
<h3 id="æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼"><a href="#æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼"></a>æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ echoes ]</span><br><span class="line">[[ echoes ]]</span><br><span class="line"><span class="built_in">test</span> echoes</span><br></pre></td></tr></table></figure>

<h3 id="æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰"><a href="#æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰" class="headerlink" title="æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰"></a>æ•´æ•°æµ‹è¯•ï¼ˆåŒç›®ï¼‰</h3><blockquote>
<p> -eq    æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ç›¸ç­‰</p>
<p> -ne    æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ä¸ç­‰</p>
<p>-gt    æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å¤§äºå¦ä¸€ä¸ªæ•°</p>
<p> -lt    æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å°äºå¦ä¸€ä¸ªæ•°</p>
<p>-ge    å¤§äºæˆ–å°äº</p>
<p> -le    å°äºæˆ–ç­‰äº</p>
</blockquote>
<h3 id="å­—ç¬¦æµ‹è¯•"><a href="#å­—ç¬¦æµ‹è¯•" class="headerlink" title="å­—ç¬¦æµ‹è¯•"></a>å­—ç¬¦æµ‹è¯•</h3><blockquote>
<p> ==     ç­‰å€¼æ¯”è¾ƒï¼Œæ£€æŸ¥ä¸¤è¾¹çš„å†…å®¹æ˜¯å¦ä¸€è‡´ï¼Œåˆ‡è®° == ä¸¤è¾¹è¦æœ‰ç©ºæ ¼</p>
<p>!=     æ£€æŸ¥ä¸¤è¾¹å†…å®¹æ˜¯å¦ä¸ä¸€è‡´ï¼Œä¸ä¸€è‡´ä¸ºçœŸï¼Œä¸€è‡´ä¸ºå‡</p>
<p>=~    å·¦ä¾§å­—ç¬¦ç©¿èƒ½å¦è¢«å³ä¾§çš„æ‰€åŒ¹é…åˆ°ï¼Œæ­¤è¡¨è¾¾å¼åº”ç”¨äºåŒä¸­æ‹¬å·[[]]ä¸­</p>
<p>-z â€œstringâ€    æµ‹è¯•æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œç©ºåˆ™ä¸ºçœŸï¼Œä¸ç©ºåˆ™ä¸ºå‡<br>-n â€œstringâ€    æµ‹è¯•æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ç©ºï¼Œä¸ç©ºåˆ™ä¸ºçœŸï¼Œç©ºåˆ™ä¸ºå‡</p>
</blockquote>
<h3 id="æ–‡ä»¶æµ‹è¯•"><a href="#æ–‡ä»¶æµ‹è¯•" class="headerlink" title="æ–‡ä»¶æµ‹è¯•"></a>æ–‡ä»¶æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­˜åœ¨æ€§æµ‹è¯•</span></span><br><span class="line">-e	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­˜åœ¨æ€§åŠç±»åˆ«æµ‹è¯•</span></span><br><span class="line">-b	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå—è®¾å¤‡æ–‡ä»¶</span><br><span class="line">-c	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå­—ç¬¦è®¾å¤‡æ–‡ä»¶</span><br><span class="line">-f	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶</span><br><span class="line">-d	æµ‹è¯•æŒ‡å®šè·¯å¾„æ˜¯å¦ä¸ºç›®å½•</span><br><span class="line">-h	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºç›®å½•</span><br><span class="line">-l	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºç¬¦å·é“¾æ¥æ–‡ä»¶</span><br><span class="line">-p	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå‘½åç®¡é“æ–‡ä»¶</span><br><span class="line">-s	æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºå¥—æ¥å­—æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æƒé™æµ‹è¯•</span></span><br><span class="line">-r	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰è¯»æƒé™</span><br><span class="line">-w	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰å†™å…¥æƒé™</span><br><span class="line">-x	æµ‹è¯•å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰æ‰§è¡Œæƒé™</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶ç‰¹æ®Šæƒé™æµ‹è¯•</span></span><br><span class="line">-g	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰sgidæƒé™</span><br><span class="line">-u	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰suidæƒé™</span><br><span class="line">-k	æµ‹è¯•æ–‡ä»¶æ˜¯å¦æœ‰stickyæƒé™</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶å¤§å°æµ‹è¯•</span></span><br><span class="line">-s	æµ‹è¯•æ–‡ä»¶æ˜¯å¦éç©º</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æ˜¯å¦æ‰“å¼€æµ‹è¯•</span></span><br><span class="line">-t fd	fdè¡¨ç¤ºçš„æ–‡ä»¶æè¿°æ˜¯å¦å·²ç»æ‰“å¼€å¹¶ä¸”ä¸æŸç»ˆç«¯ç›¸å…³</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŒç›®æµ‹è¯•</span></span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1ä¸æ–‡ä»¶2æ˜¯å¦ä¸ºåŒä¸€æ–‡ä»¶</span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1æ˜¯å¦æ¯”æ–‡ä»¶2æ–°</span><br><span class="line">file1 -ef file2	æµ‹è¯•æ–‡ä»¶1æ˜¯å¦æ¯”æ–‡ä»¶2æ—§</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— åˆ†ç±»</span></span><br><span class="line">-N	æµ‹è¯•æ–‡ä»¶è‡ªä»ä¸Šä¸€æ¬¡è¢«å½•å–ä¹‹åæ˜¯å¦è¢«ä¿®æ”¹è¿‡</span><br><span class="line">-O	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”è¢«å½“å‰ç”¨æˆ·æ‹¥æœ‰</span><br><span class="line">-G	æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”é»˜è®¤ç»„æ˜¯å¦ä¸ºå½“å‰ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<h3 id="ç»„åˆæµ‹è¯•æ¡ä»¶"><a href="#ç»„åˆæµ‹è¯•æ¡ä»¶" class="headerlink" title="ç»„åˆæµ‹è¯•æ¡ä»¶"></a>ç»„åˆæµ‹è¯•æ¡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-a	ä¸å…³ç³»</span><br><span class="line">-o	æˆ–å…³ç³»</span><br><span class="line">ï¼	éå…³ç³»</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ€»è®¡ä¸ªæ•° å¤§äº 1 ä¸ æ€»è®¡ä¸ªæ•° å°äº 3</span></span><br><span class="line">[ <span class="variable">$#</span> -gt 1 -a <span class="variable">$#</span> -le 3 ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€»è®¡ä¸ªæ•° å¤§äº 1 åå†æ¬¡ç»Ÿè®¡ æ€»è®¡ä¸ªæ•° å°äº 3</span></span><br><span class="line">[<span class="variable">$#</span> -gt 1 ] &amp;&amp; [<span class="variable">$#</span> -le 3]</span><br></pre></td></tr></table></figure>

<h3 id="æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„"><a href="#æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„" class="headerlink" title="æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„"></a>æ¡ä»¶åˆ¤æ–­ï¼Œæ§åˆ¶ç»“æ„</h3><h4 id="å•åˆ†æ”¯ifè¯­å¥"><a href="#å•åˆ†æ”¯ifè¯­å¥" class="headerlink" title="å•åˆ†æ”¯ifè¯­å¥"></a>å•åˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="åŒåˆ†æ”¯ifè¯­å¥"><a href="#åŒåˆ†æ”¯ifè¯­å¥" class="headerlink" title="åŒåˆ†æ”¯ifè¯­å¥"></a>åŒåˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h5 id="ifè¯­å¥å°æ¸¸æˆ"><a href="#ifè¯­å¥å°æ¸¸æˆ" class="headerlink" title="ifè¯­å¥å°æ¸¸æˆ"></a>ifè¯­å¥å°æ¸¸æˆ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ----------------çŒœæ•°å­—-----------------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">num=50</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä½ æ‰€çŒœåˆ°çš„æ•°å­—ï¼š"</span> user_num</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$num</span> -eq <span class="variable">$user_num</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å“‡ç‘Ÿï¼å¥½å‰å®³ï¼"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä½ çŒœé”™äº†ï¼Œå“ˆå“ˆå“ˆ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="å¤šåˆ†æ”¯ifè¯­å¥"><a href="#å¤šåˆ†æ”¯ifè¯­å¥" class="headerlink" title="å¤šåˆ†æ”¯ifè¯­å¥"></a>å¤šåˆ†æ”¯ifè¯­å¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> åˆ¤æ–­æ¡ä»¶1ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°1</span><br><span class="line">	é™ˆè¿°2</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">elif</span> åˆ¤æ–­æ¡ä»¶2ï¼›<span class="keyword">then</span></span><br><span class="line">	é™ˆè¿°3</span><br><span class="line">	é™ˆè¿°4</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	é™ˆè¿°5</span><br><span class="line">	é™ˆè¿°6</span><br><span class="line">	.........</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ†æ”¯é€‰æ‹©"><a href="#åˆ†æ”¯é€‰æ‹©" class="headerlink" title="åˆ†æ”¯é€‰æ‹©"></a>åˆ†æ”¯é€‰æ‹©</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $å˜é‡å <span class="keyword">in</span>            </span><br><span class="line">value1)                </span><br><span class="line">    é™ˆè¿°               </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">value2)                </span><br><span class="line">    é™ˆè¿°                </span><br><span class="line">    ...                </span><br><span class="line">    ;;            </span><br><span class="line">*)                </span><br><span class="line">    é™ˆè¿°                </span><br><span class="line">    ...                </span><br><span class="line">    ;;        </span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¦ï¼š<span class="keyword">case</span>æ”¯æŒglobé£æ ¼çš„é€šé…ç¬¦ï¼š</span><br><span class="line">    *       ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦</span><br><span class="line">    ?       ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    []      æŒ‡å­—èŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">    abc|bcd abcæˆ–bcd</span><br></pre></td></tr></table></figure>

<h2 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h2><p>å¾ªç¯è¯­å¥é€šå¸¸éœ€è¦æœ‰ä¸€ä¸ªè¿›å…¥æ¡ä»¶å’Œä¸€ä¸ªé€€å‡ºæ¡ä»¶</p>
<ul>
<li>forå¾ªç¯</li>
<li>whileå¾ªç¯</li>
<li>untilå¾ªç¯</li>
</ul>
<h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><p>forå¾ªç¯å½“åˆ—è¡¨ä¸ä¸ºç©ºæ—¶è¿›å…¥å¾ªç¯ï¼Œå¦åˆ™é€€å‡ºå¾ªç¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡ <span class="keyword">in</span> åˆ—è¡¨; <span class="keyword">do</span></span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((expr1;expr2;expr3))</span><br><span class="line">&#123;</span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( expr1 ; expr2 ; expr3 ));<span class="keyword">do</span></span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">expr1   //ç”¨äºæŒ‡å®šåˆå§‹æ¡ä»¶ï¼Œç»™æ§åˆ¶å˜é‡ä¸€ä¸ªåˆå§‹å€¼</span><br><span class="line">expr2   //åˆ¤å®šä»€ä¹ˆæ—¶å€™é€€å‡ºå¾ªç¯</span><br><span class="line">expr3   //ä¿®æ­£expr1æŒ‡å®šçš„å˜é‡çš„å€¼</span><br><span class="line"></span><br><span class="line">//å¦‚ä½•ç”Ÿæˆåˆ—è¡¨ï¼š</span><br><span class="line">    &#123;1..100&#125;</span><br><span class="line">    seq [èµ·å§‹æ•°] [æ­¥è¿›é•¿åº¦] ç»“æŸæ•°</span><br></pre></td></tr></table></figure>

<h4 id="forå¾ªç¯å–å‡º-etc-passwdç”¨æˆ·"><a href="#forå¾ªç¯å–å‡º-etc-passwdç”¨æˆ·" class="headerlink" title="forå¾ªç¯å–å‡º/etc/passwdç”¨æˆ·"></a>forå¾ªç¯å–å‡º/etc/passwdç”¨æˆ·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#------å–å‡º/etc/passwdçš„ç”¨æˆ·ä»¥åŠUID---------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=$(cat <span class="variable">$Fa</span> | wc -l);i++ ));<span class="keyword">do</span></span><br><span class="line">    user_name=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">    user_UID=$(awk -F <span class="string">':'</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 3&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello!<span class="variable">$user_name</span>,you UID is <span class="variable">$user_UID</span>."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä¸€å…±æœ‰<span class="variable">$(cat $Fa | wc -l)</span>ä¸ªç”¨æˆ·."</span></span><br></pre></td></tr></table></figure>

<h3 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h3><p>whileå¾ªç¯é€‚ç”¨äºå¾ªç¯æ¬¡æ•°æœªçŸ¥çš„åœºæ™¯ï¼Œæ³¨æ„è¦æœ‰é€€å‡ºæ¡ä»¶ã€‚<br>æ¡ä»¶æ»¡è¶³æ—¶è¿›å…¥å¾ªç¯ï¼Œæ¡ä»¶ä¸æ»¡è¶³äº†é€€å‡ºå¾ªç¯ã€‚</p>
<h4 id="whileå¾ªç¯æ­£å¸¸ç”¨æ³•"><a href="#whileå¾ªç¯æ­£å¸¸ç”¨æ³•" class="headerlink" title="whileå¾ªç¯æ­£å¸¸ç”¨æ³•"></a>whileå¾ªç¯æ­£å¸¸ç”¨æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> æ¡ä»¶; <span class="keyword">do</span></span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="whileå¾ªç¯ç‰¹æ®Šç”¨æ³•"><a href="#whileå¾ªç¯ç‰¹æ®Šç”¨æ³•" class="headerlink" title="whileå¾ªç¯ç‰¹æ®Šç”¨æ³•"></a>whileå¾ªç¯ç‰¹æ®Šç”¨æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//whileå¾ªç¯ç‰¹æ®Šç”¨æ³•ä¸€ï¼šæ­»å¾ªç¯</span><br><span class="line">while :;do</span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œçš„å†’å·å¯ä»¥æ”¹æˆä»»ä½•éç©ºå€¼</span><br><span class="line"></span><br><span class="line">whileå¾ªç¯ç‰¹æ®Šç”¨æ³•äºŒï¼šé€è¡Œè¯»å–æŸæ–‡ä»¶ï¼Œå°†å€¼å­˜å…¥lineå˜é‡ä¸­</span><br><span class="line">while read line;do</span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line">done &lt; /etc/passwd</span><br></pre></td></tr></table></figure>

<p>#####whileå¾ªç¯è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-----whileç‰¹æ®Šç”¨æ³•äºŒå–ç”¨æˆ·-------</span></span><br><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line;<span class="keyword">do</span></span><br><span class="line">    user_name=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $1 &#125;'</span>)</span><br><span class="line">    user_UID=$(<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F <span class="string">':'</span> <span class="string">'NR==1 &#123; print $3 &#125;'</span>)</span><br><span class="line">    <span class="built_in">echo</span> â€œhello! <span class="variable">$user_name</span> æ‚¨çš„UIDæ˜¯ <span class="variable">$user_UID</span>â€</span><br><span class="line">    <span class="built_in">echo</span> -------------------------</span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$Fa</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-------ç”¨whileå¾ªç¯çŒœæ•°å­—-------</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line">num=$[<span class="variable">$RANDOM</span> %100]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line">    ((i++))</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—"</span> user_num</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$user_num</span>ã€€| egrep <span class="string">'^[0-9]+$'</span> &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„ä¸æ˜¯æ•°å­—ï¼è¯·é‡è¯•ï¼"</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$user_num</span> -gt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æ•°å­—å¤§äº†ï¼"</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$user_num</span> -lt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨è¾“å…¥çš„æ•°å­—å°äº†ï¼"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ehco <span class="string">"æ‚¨è¾“å…¥æ­£ç¡®ï¼"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ‚¨ä¸€å…±å›ç­”äº†<span class="variable">$i</span>æ¬¡."</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="untilå¾ªç¯"><a href="#untilå¾ªç¯" class="headerlink" title="untilå¾ªç¯"></a>untilå¾ªç¯</h3><p>æ¡ä»¶ä¸æ»¡è¶³æ—¶è¿›å…¥å¾ªç¯ï¼Œæ¡ä»¶æ»¡è¶³äº†é€€å‡ºå¾ªç¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until æ¡ä»¶; <span class="keyword">do</span></span><br><span class="line">    é™ˆè¿°</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ"><a href="#å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ" class="headerlink" title="å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ"></a>å¾ªç¯è¯­å¥ç‰¹æ®Šæƒ…å†µ</h3><blockquote>
<p>break [num]ï¼šæå‰é€€å‡ºå¾ªç¯ã€‚å½“å¾ªç¯è¯­å¥ä¸­å‡ºç°breakæ—¶ï¼Œå°†æå‰é€€å‡ºå¾ªç¯ï¼Œä¸å†æ‰§è¡Œå¾ªç¯åé¢çš„è¯­å¥</p>
<p>continue [num]ï¼šæå‰ç»“æŸæœ¬è½®å¾ªç¯è€Œè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚å½“å¾ªç¯è¯­å¥æ‰§è¡Œåˆ°continueæ—¶ï¼Œcontinueåé¢çš„è¯­å¥å°†ä¸å†æ‰§è¡Œï¼Œæå‰è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯</p>
</blockquote>
<h2 id="å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç "><a href="#å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç " class="headerlink" title="å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç "></a>å®šä¹‰è„šæœ¬é€€å‡ºçŠ¶æ€ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">exit</span>å‘½ä»¤ç”¨äºå®šä¹‰æ‰§è¡ŒçŠ¶æ€ç»“æœ</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> <span class="comment">#      //æ­¤å¤„çš„#å·æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶èŒƒå›´å¯ä»¥æ˜¯0-255</span></span><br><span class="line"></span><br><span class="line">å¦‚æœè„šæœ¬æ²¡æœ‰æ˜ç¡®å®šä¹‰é€€å‡ºçŠ¶æ€ç ï¼Œé‚£ä¹ˆï¼Œæœ€åæ‰§è¡Œçš„ä¸€æ¡å‘½ä»¤çš„é€€å‡ºç å³ä¸ºè„šæœ¬çš„é€€å‡ºçŠ¶æ€ç </span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šè„šæœ¬ä¸­ä¸€æ—¦é‡åˆ°<span class="built_in">exit</span>å‘½ä»¤ï¼Œè„šæœ¬ä¼šç«‹å³ç»ˆæ­¢</span><br></pre></td></tr></table></figure>
      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/25.linux--shellè„šæœ¬è¿›é˜¶/" data-id="ck7ooya3k00074su6v1hhxtvy"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-24.linux--shellè„šæœ¬åŸºç¡€" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/24.linux--shellè„šæœ¬åŸºç¡€/"
    >shellè„šæœ¬åŸºç¡€</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/24.linux--shellè„šæœ¬åŸºç¡€/" class="article-date">
  <time datetime="2020-03-12T11:38:40.256Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="shellè„šæœ¬åŸºç¡€"><a href="#shellè„šæœ¬åŸºç¡€" class="headerlink" title="shellè„šæœ¬åŸºç¡€"></a>shellè„šæœ¬åŸºç¡€</h1><h2 id="å˜é‡è¯¦è§£"><a href="#å˜é‡è¯¦è§£" class="headerlink" title="å˜é‡è¯¦è§£"></a>å˜é‡è¯¦è§£</h2><h3 id="ä»€ä¹ˆæ˜¯å˜é‡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡"></a>ä»€ä¹ˆæ˜¯å˜é‡</h3><p>å˜é‡å³æ˜¯å¯ä»¥å˜åŒ–çš„é‡</p>
<h3 id="å˜é‡çš„ä½œç”¨"><a href="#å˜é‡çš„ä½œç”¨" class="headerlink" title="å˜é‡çš„ä½œç”¨"></a>å˜é‡çš„ä½œç”¨</h3><ul>
<li>ä¿å­˜è¡¨è¾¾å¼è¿ç®—çš„ç»“æœè‡³å†…å­˜ï¼Œæ–¹ä¾¿å¤ç”¨æˆ–æ›´æ”¹</li>
<li>è‹¥æ— å˜é‡è€Œæ— éœ€å¤ç”¨è¡¨è¾¾å¼è¿ç®—çš„ç»“æœåªèƒ½é‡æ–°è¿ç®—ï¼Œè€—æ—¶è¾ƒé•¿</li>
<li>å¯ä»¥æŠŠå˜é‡ç†è§£ä¸ºä¸€ä¸ªå­˜å‚¨ä¿¡æ¯çš„å®¹å™¨</li>
</ul>
<h3 id="å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹"><a href="#å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹" class="headerlink" title="å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹"></a>å˜é‡å–åä»¥åŠæ³¨æ„äº‹é¡¹</h3><ul>
<li><p>å˜é‡ååº”è¯¥åšåˆ°è§åçŸ¥ä¹‰</p>
</li>
<li><p>å˜é‡ååŒºåˆ†å¤§å°å†™</p>
</li>
<li><p>å˜é‡åä¸­æœ‰å¤šä¸ªå•è¯æ—¶æœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤º</p>
<ul>
<li>å•è¯é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå®˜æ–¹æ¨èï¼‰</li>
<li>é¦–å•è¯å°å†™ï¼Œåé¢å•è¯çš„é¦–å­—æ¯å¤§å†™</li>
</ul>
</li>
<li><p>å˜é‡ååªèƒ½æ˜¯ç”±ä¸‹åˆ’çº¿ã€æ•°å­—ã€å­—æ¯ç»„æˆï¼Œä¸èƒ½æ˜¯ç©ºæ ¼æˆ–è€…ç‰¹æ®Šå­—ç¬¦ï¼ˆ#ï¼Ÿ&lt;.,$!&amp;*^~ï¼‰</p>
</li>
<li><p>ä¸èƒ½ä»¥ä¸­æ–‡åšå˜é‡å</p>
</li>
<li><p>ä¸èƒ½æ˜¯ä¿ç•™å­—</p>
<ul>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">break</span>  <span class="built_in">continue</span>  <span class="keyword">elif</span>  <span class="keyword">else</span>  <span class="keyword">for</span>  global  <span class="keyword">if</span>  <span class="keyword">in</span>  is   not  or   <span class="keyword">while</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="å˜é‡ç±»å‹"><a href="#å˜é‡ç±»å‹" class="headerlink" title="å˜é‡ç±»å‹"></a>å˜é‡ç±»å‹</h3><ul>
<li>å­—ç¬¦å‹</li>
<li>æ•°å€¼å‹<ul>
<li>æ•´æ•°</li>
<li>æµ®ç‚¹æ•°</li>
</ul>
</li>
<li>å¸ƒå°”å‹</li>
</ul>
<h3 id="å˜é‡æ“ä½œ"><a href="#å˜é‡æ“ä½œ" class="headerlink" title="å˜é‡æ“ä½œ"></a>å˜é‡æ“ä½œ</h3><ul>
<li>è®¾ç½®å˜é‡</li>
<li>å¼•ç”¨å˜é‡</li>
<li>æ’¤é”€å˜é‡</li>
</ul>
<blockquote>
<p>ç®€è¿°ä¸‰ç§å¼•å·çš„ç”¨æ³•</p>
<p>`åå¼•å· ç”¨äºå‘½ä»¤æ›¿æ¢ åå¼•å·é‡Œé¢çš„å‘½ä»¤å–å‡ºæ¥æ˜¯å®ƒä»¬çš„å€¼</p>
<p> â€˜ å•å¼•å· å–æœ¬èº«ï¼Œä¸å®Œæˆå‘½ä»¤æ›¿æ¢</p>
<p>â€œ åŒå¼•å· å®ç°å‘½ä»¤æ›¿æ¢ï¼Œæ”¯æŒå˜é‡</p>
</blockquote>
<blockquote>
<p>åˆ‡è®°å•å¼•å·å–å‡ºæ¥æ˜¯æœ¬èº«ï¼Œ</p>
<p>åå¼•å·å’ŒåŒå¼•å·å–å‡ºæ¥æ˜¯ä»–ä»¬çš„å€¼</p>
</blockquote>
<h3 id="bashå˜é‡ç±»å‹"><a href="#bashå˜é‡ç±»å‹" class="headerlink" title="bashå˜é‡ç±»å‹"></a>bashå˜é‡ç±»å‹</h3><ul>
<li>ç¯å¢ƒå˜é‡</li>
<li>æœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰</li>
<li>ä½ç½®å˜é‡</li>
<li>ç‰¹æ®Šå˜é‡ï¼ˆä¸ºbashå†…ç½®ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜æŸäº›ç‰¹æ®Šæ•°æ®çš„å˜é‡ï¼Œä¹Ÿç§°ä¹‹ä¸ºç³»ç»Ÿå˜é‡ï¼‰</li>
</ul>
<blockquote>
<p>ä¸‹é¢ä»‹ç»ä¸¤ç§å–é™¤å˜é‡ä»¥åŠä¸å–å‡ºå˜é‡çš„ç”¨æ³•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨æ³•ä¸€ï¼šå–å‡ºå˜é‡çš„å€¼</span></span><br><span class="line">[root@140 ~]<span class="comment"># a=5</span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; DOF</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; DOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line">5</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ³•äºŒï¼šä¸å–é™¤å˜é‡çš„å€¼ </span></span><br><span class="line">[root@140 ~]<span class="comment"># cat &gt; abc &lt;&lt; 'EOF'</span></span><br><span class="line">&gt; <span class="variable">$a</span></span><br><span class="line">&gt; bb</span><br><span class="line">&gt; cc</span><br><span class="line">&gt; EOF</span><br><span class="line">[root@140 ~]<span class="comment"># cat abc</span></span><br><span class="line"><span class="variable">$a</span></span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></table></figure>

<h4 id="æœ¬åœ°å˜é‡"><a href="#æœ¬åœ°å˜é‡" class="headerlink" title="æœ¬åœ°å˜é‡"></a>æœ¬åœ°å˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬åœ°å˜é‡ï¼Œä½œä¸ºå½“å‰shellçš„è¿›ç¨‹ï¼Œå¯¹å½“å‰shellä»¥å¤–çš„å…¶ä»–shellè¿›ç¨‹ï¼ŒåŒ…æ‹¬å½“å‰shellçš„çˆ¶shellï¼Œå­shellè¿›ç¨‹å‡æ— æ•ˆ</span></span><br><span class="line">VAR_NAME=VALUE(å€¼)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å±€éƒ¨å˜é‡ï¼Œä½œä¸ºå½“å‰ä»£ç æ®µï¼Œå¤šç”¨äºå‡½æ•°</span></span><br><span class="line"><span class="built_in">local</span>(å±€éƒ¨) VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½œç”¨åŸŸä¸ºå½“å‰shellè¿›ç¨‹åŠå…¶å­è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">export</span> VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h4 id="ä½ç½®å˜é‡"><a href="#ä½ç½®å˜é‡" class="headerlink" title="ä½ç½®å˜é‡"></a>ä½ç½®å˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$1</span>ï¼Œ<span class="variable">$2</span>ï¼Œ<span class="variable">$3</span>ï¼Œ....       //ç”¨æ¥å¼•ç”¨è„šæœ¬çš„å‚æ•°</span><br><span class="line">    <span class="built_in">shift</span> [num]         //ä½ç½®å˜é‡ä½¿ç”¨å®Œä»¥åé€€å‡ºï¼Œåé¢çš„å‚æ•°å‘å‰æ¨è¿›</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat haah.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$3</span></span><br><span class="line"><span class="built_in">echo</span> ------------</span><br><span class="line">[root@140 opt]<span class="comment"># bash haah.sh 1 2 3</span></span><br><span class="line">1</span><br><span class="line">------------</span><br><span class="line">2</span><br><span class="line">------------</span><br><span class="line">3</span><br><span class="line">------------</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]# cat huhu.sh </span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in $*;do</span><br><span class="line">        echo $1</span><br><span class="line">        echo -----------</span><br><span class="line">        shift 2 </span><br><span class="line">done</span><br><span class="line">[root@140 opt]# bash huhu.sh 1 2 3 4 5 6</span><br><span class="line">1</span><br><span class="line">-----------</span><br><span class="line">3</span><br><span class="line">-----------</span><br><span class="line">5</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">-----------</span><br></pre></td></tr></table></figure>

<h4 id="ç‰¹æ®Šå˜é‡"><a href="#ç‰¹æ®Šå˜é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡"></a>ç‰¹æ®Šå˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$#</span>      //æ˜¯ä¼ ç»™è„šæœ¬çš„å‚æ•°ä¸ªæ•°</span><br><span class="line"><span class="variable">$0</span>      //æ˜¯è„šæœ¬æœ¬èº«çš„åå­—</span><br><span class="line">$!      //æ˜¯shellæœ€åè¿è¡Œçš„åå°Processçš„PID</span><br><span class="line"><span class="variable">$@</span>      //æ˜¯ä¼ ç»™è„šæœ¬çš„æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨</span><br><span class="line">$*      //æ˜¯ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ï¼Œä¸ä½ç½®å˜é‡ä¸åŒï¼Œå‚æ•°å¯è¶…è¿‡9ä¸ª</span><br><span class="line">$$      //æ˜¯è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·</span><br><span class="line">$?      //æ˜¯æ˜¾ç¤ºä¸Šæ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œ0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–è¡¨ç¤ºæœ‰é”™è¯¯</span><br></pre></td></tr></table></figure>

<h4 id="bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡"><a href="#bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡" class="headerlink" title="bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡"></a>bashä¸­è‡ªå¸¦ç¯å¢ƒå˜é‡</h4><ul>
<li>PATH</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure>

<ul>
<li>SHELL</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>UID</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $UID</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTSIZE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure>

<ul>
<li>HOME</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HOME</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>PWD</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PWD</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>HISTFILE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $HISTFILE</span></span><br><span class="line">/root/.bash_history</span><br></pre></td></tr></table></figure>

<ul>
<li>PS1</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@140 ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure>

<h4 id="åªè¯»å˜é‡"><a href="#åªè¯»å˜é‡" class="headerlink" title="åªè¯»å˜é‡"></a>åªè¯»å˜é‡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸èƒ½ä¿®æ”¹å€¼ï¼Œä¸èƒ½é”€æ¯ï¼Œåªèƒ½ç­‰shellè¿›ç¨‹ç»ˆæ­¢æ—¶éšä¹‹æ¶ˆäº¡</span></span><br><span class="line">readonly(åªè¯») VAR_NAME=VALUE(å€¼)</span><br></pre></td></tr></table></figure>

<h2 id="è„šæœ¬åŸºç¡€"><a href="#è„šæœ¬åŸºç¡€" class="headerlink" title="è„šæœ¬åŸºç¡€"></a>è„šæœ¬åŸºç¡€</h2><h3 id="ä»€ä¹ˆæ˜¯è„šæœ¬"><a href="#ä»€ä¹ˆæ˜¯è„šæœ¬" class="headerlink" title="ä»€ä¹ˆæ˜¯è„šæœ¬"></a>ä»€ä¹ˆæ˜¯è„šæœ¬</h3><p>â€‹    è„šæœ¬(script)æ˜¯ä½¿ç”¨ä¸€ç§ç‰¹å®šçš„æè¿°æ€§è¯­è¨€ï¼Œä¾æ®ä¸€å®šçš„æ ¼å¼ç¼–å†™çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåˆç§°ä½œå®æˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚è„šæœ¬é€šå¸¸å¯ä»¥ç”±åº”ç”¨ç¨‹åºä¸´æ—¶è°ƒç”¨å¹¶æ‰§è¡Œã€‚</p>
<p>â€‹    è„šæœ¬ç®€å•åœ°è¯´å°±æ˜¯ä¸€æ¡æ¡çš„æ–‡å­—å‘½ä»¤ï¼Œè¿™äº›æ–‡å­—å‘½ä»¤æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„(å¦‚å¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€æŸ¥çœ‹ã€ç¼–è¾‘)ï¼Œè„šæœ¬ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œæ˜¯ç”±ç³»ç»Ÿçš„ä¸€ä¸ªè§£é‡Šå™¨ï¼Œå°†å…¶ä¸€æ¡æ¡çš„ç¿»è¯‘æˆæœºå™¨å¯è¯†åˆ«çš„æŒ‡ä»¤ï¼Œå¹¶æŒ‰ç¨‹åºé¡ºåºæ‰§è¡Œã€‚å› ä¸ºè„šæœ¬åœ¨æ‰§è¡Œæ—¶å¤šäº†ä¸€é“ç¿»è¯‘çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å®ƒæ¯”äºŒè¿›åˆ¶ç¨‹åºæ‰§è¡Œæ•ˆç‡è¦ç¨ä½ä¸€äº›ã€‚</p>
<h3 id="ç¨‹åºåå›å€¼"><a href="#ç¨‹åºåå›å€¼" class="headerlink" title="ç¨‹åºåå›å€¼"></a>ç¨‹åºåå›å€¼</h3><p>ç¨‹åºæ‰§è¡Œä»¥åæœ‰ä¸¤ç±»è¿”å›å€¼ï¼š</p>
<ul>
<li>ç¨‹åºæ‰§è¡Œçš„ç»“æœ</li>
<li>ç¨‹åºçŠ¶æ€è¿”å›ä»£ç ï¼ˆ0-255ï¼‰<ul>
<li>0ï¼šæ­£ç¡®æ‰§è¡Œ</li>
<li>1-255ï¼šé”™è¯¯æ‰§è¡Œï¼Œ1ã€2ã€127ç³»ç»Ÿé¢„ç•™ï¼Œæœ‰ç‰¹æ®Šæ„ä¹‰</li>
</ul>
</li>
</ul>
<h3 id="è„šæœ¬æµ‹è¯•"><a href="#è„šæœ¬æµ‹è¯•" class="headerlink" title="è„šæœ¬æµ‹è¯•"></a>è„šæœ¬æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line">bash -n scriptname</span><br><span class="line"></span><br><span class="line"><span class="comment"># å•æ­¥æ‰§è¡Œï¼Œæ£€æŸ¥è„šæœ¬é”™åœ¨å“ªé‡Œï¼ˆæœ€å¸¸ç”¨ï¼‰</span></span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¾‹å¦‚æ­¤å¤„å†™ä¸ªé”™è¯¯çš„è„šæœ¬</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@140 opt]<span class="comment"># bash -x huhu.sh </span></span><br><span class="line">huhu.sh:è¡Œ3: æœªé¢„æœŸçš„ç¬¦å· `<span class="keyword">do</span><span class="string">' é™„è¿‘æœ‰è¯­æ³•é”™è¯¯</span></span><br><span class="line"><span class="string">huhu.sh:è¡Œ3: `frr i in $*;do'</span></span><br></pre></td></tr></table></figure>

<h3 id="å†™è„šæœ¬æ³¨æ„äº‹é¡¹"><a href="#å†™è„šæœ¬æ³¨æ„äº‹é¡¹" class="headerlink" title="å†™è„šæœ¬æ³¨æ„äº‹é¡¹"></a>å†™è„šæœ¬æ³¨æ„äº‹é¡¹</h3><ul>
<li>ç¦æ­¢å°†ä¸ºæˆåŠŸæ‰§è¡Œçš„ä»£ç ç›´æ¥å†™å…¥è„šæœ¬</li>
<li>è„šæœ¬ä¸­çš„å‘½ä»¤ä¸€å®šè¦ç”¨ç»å¯¹è·¯å¾„</li>
</ul>
<h3 id="shellç®—æœ¯è¿ç®—"><a href="#shellç®—æœ¯è¿ç®—" class="headerlink" title="shellç®—æœ¯è¿ç®—"></a>shellç®—æœ¯è¿ç®—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜é‡</span></span><br><span class="line">A=30</span><br><span class="line">B=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># AåŠ ä¸ŠB</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aå‡å»B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aä¹˜ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aé™¤ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc</span><br></pre></td></tr></table></figure>

<h3 id="å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»"><a href="#å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»" class="headerlink" title="å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»"></a>å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€»è¾‘ä¸ï¼š&amp;&amp;</span></span><br><span class="line">å«ä¹‰ï¼šå½“å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œå†æ¬¡æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br><span class="line"><span class="comment"># é€»è¾‘éï¼š||</span></span><br><span class="line">å«ä¹‰ï¼šå½“å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œå†æ¬¡æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><h4 id="1-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"><a href="#1-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š" class="headerlink" title="1.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"></a>1.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</h4><ul>
<li>è®¾å®šå˜é‡Façš„å€¼ä¸º<code>/etc/passwd</code></li>
<li>è®¾å®šå˜é‡lineçš„ä¸º<code>$(cat $Fa | wc -l)</code></li>
<li>ä¾æ¬¡å‘<code>/etc/passwd</code>ä¸­çš„æ¯ä¸ªç”¨æˆ·é—®å¥½ï¼Œå¹¶ä¸”è¯´å‡ºå¯¹æ–¹çš„IDæ˜¯ä»€ä¹ˆã€‚ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š<ul>
<li>Hello,rootï¼Œyour UID is 0.</li>
</ul>
</li>
<li>ç»Ÿè®¡å½“å‰ç³»ç»Ÿä¸€ä¸ªæœ‰å¤šå°‘ä¸ªç”¨æˆ·å¹¶è¾“å‡º</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">Fa=/etc/passwd</span><br><span class="line">line=$(cat <span class="variable">$Fa</span> | wc -l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å‡ºç”¨æˆ·åä»¥åŠUID</span></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$line</span>;i++));<span class="keyword">do</span></span><br><span class="line">        username=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line">        user_uid=$(awk -F <span class="string">':'</span> -vi=<span class="variable">$i</span> <span class="string">"NR==<span class="variable">$i</span> &#123;print $ 1&#125;"</span> <span class="variable">$Fa</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æ¯ä¸ªç”¨æˆ·é—®å¥½</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"hello <span class="variable">$username</span> , your uid is <span class="variable">$user_uid</span> ."</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»Ÿè®¡ç”¨æˆ·</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Cuerrent system has <span class="variable">$(cat $Fa | wc -l)</span> user."</span></span><br></pre></td></tr></table></figure>

<h4 id="2-å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†"><a href="#2-å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†" class="headerlink" title="2.å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†"></a>2.å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¼ é€’ä¸¤ä¸ªæ•´æ•°ç»™æ­¤è„šæœ¬ï¼Œè®©è„šæœ¬åˆ†åˆ«è®¡ç®—å¹¶æ˜¾ç¤ºè¿™ä¸¤ä¸ªæ•´æ•°çš„å’Œï¼Œå·®ï¼Œç§¯ï¼Œå•†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat suanfa.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å˜é‡</span></span><br><span class="line">A=<span class="variable">$1</span></span><br><span class="line">B=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AåŠ ä¸ŠB</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>+<span class="variable">$B</span>=$[<span class="variable">$A</span> + <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aå‡å»B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>-<span class="variable">$B</span>=$[<span class="variable">$A</span> - <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aä¹˜ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>*<span class="variable">$B</span>=$[<span class="variable">$A</span> * <span class="variable">$B</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">chuyi=$(<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$A</span>/<span class="variable">$B</span>"</span>|bc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aé™¤ä»¥B</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span>/<span class="variable">$B</span>=<span class="variable">$chuyi</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash suanfa.sh 50 20</span></span><br><span class="line">50+20=70</span><br><span class="line">50-20=30</span><br><span class="line">50*20=1000</span><br><span class="line">50/20=2.50</span><br></pre></td></tr></table></figure>

<h4 id="3-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"><a href="#3-å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š" class="headerlink" title="3.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š"></a>3.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</h4><ul>
<li>åˆ›å»ºç›®å½•/tmp/scripts</li>
<li>åˆ‡æ¢è‡³æ­¤ç›®å½•ä¸­</li>
<li>å¤åˆ¶/etc/pam.dç›®å½•è‡³å½“å‰ç›®å½•ï¼Œå¹¶é‡å‘½åä¸ºtest</li>
<li>å°†å½“å‰ç›®å½•çš„teståŠå…¶é‡Œé¢çš„æ–‡ä»¶å’Œå­ç›®å½•çš„å±ä¸»æ”¹ä¸ºredhat</li>
<li>å°†teståŠå…¶å­ç›®å½•ä¸­çš„æ–‡ä»¶çš„å…¶å®ƒç”¨æˆ·çš„æƒé™æ”¹ä¸ºæ²¡æœ‰ä»»ä½•æƒé™</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat mulu.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å˜é‡</span></span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">cp=/usr/bin/cp</span><br><span class="line">chown=/usr/bin/chown</span><br><span class="line">chmod=/usr/bin/chmod</span><br><span class="line">useradd=/usr/bin/useradd</span><br><span class="line"><span class="comment"># ä¸€æ¡å‘½ä»¤è§£å†³</span></span><br><span class="line">mkdir /tmp/scripts &amp;&amp; <span class="built_in">cd</span> /tmp/scripts &amp;&amp; cp -rf /etc/pam.d ./<span class="built_in">test</span> &amp;&amp; chown -Rf redhat: <span class="built_in">test</span> || useradd redhat &amp;&amp; chmod -Rf o-rwx <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@140 opt]<span class="comment"># bash -x mulu.sh </span></span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ cp=/usr/bin/cp</span><br><span class="line">+ chown=/usr/bin/chown</span><br><span class="line">+ chmod=/usr/bin/chmod</span><br><span class="line">+ useradd=/usr/bin/useradd</span><br><span class="line">+ mkdir /tmp/scripts</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/scripts</span><br><span class="line">+ cp -rf /etc/pam.d ./<span class="built_in">test</span></span><br><span class="line">+ chown -Rf redhat: <span class="built_in">test</span></span><br><span class="line">+ chmod -Rf o-rwx <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>4.å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œååˆ›å»ºç›®å½•/tmp/lstest</li>
<li>åˆ‡æ¢å·¥ä½œç›®å½•è‡³/tmp/lstest</li>
<li>åˆ›å»ºç›®å½•a1dï¼Œb56eï¼Œ6test</li>
<li>åˆ›å»ºç©ºæ–‡ä»¶xyï¼Œx2yï¼Œ732</li>
<li>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹ä»¥aï¼Œxæˆ–è€…6å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•</li>
<li>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹ä»¥å­—æ¯å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ªä»»æ„æ•°å­—ï¼Œè€Œåè·Ÿä»»æ„é•¿åº¦å­—ç¬¦çš„æ–‡ä»¶æˆ–ç›®å½•</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@140 opt]<span class="comment"># cat shijian.sh </span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å˜é‡</span></span><br><span class="line">date=/usr/bin/date</span><br><span class="line">mkdir=/usr/bin/mkdir</span><br><span class="line"><span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">touch=/usr/bin/touch</span><br><span class="line">ls=/usr/bin/ls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date &amp;&amp; mkdir /tmp/lstest &amp;&amp; <span class="built_in">cd</span> /tmp/lstest &amp;&amp; mkdir a1d b56e 6test &amp;&amp; touch xy x2y 732 &amp;&amp; ls a* x* 6* &amp;&amp; ls [a-z][0-9]*</span><br><span class="line">[root@140 opt]<span class="comment"># bash -x shijian.sh </span></span><br><span class="line">+ date=/usr/bin/date</span><br><span class="line">+ mkdir=/usr/bin/mkdir</span><br><span class="line">+ <span class="built_in">cd</span>=/usr/bin/<span class="built_in">cd</span></span><br><span class="line">+ touch=/usr/bin/touch</span><br><span class="line">+ ls=/usr/bin/ls</span><br><span class="line">+ date</span><br><span class="line">2019å¹´ 05æœˆ 21æ—¥ æ˜ŸæœŸäºŒ 22:11:10 CST</span><br><span class="line">+ mkdir /tmp/lstest</span><br><span class="line">+ <span class="built_in">cd</span> /tmp/lstest</span><br><span class="line">+ mkdir a1d b56e 6test</span><br><span class="line">+ touch xy x2y 732</span><br><span class="line">+ ls a1d x2y xy 6test</span><br><span class="line">x2y  xy</span><br><span class="line"></span><br><span class="line">6test:</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line">+ ls a1d b56e x2y</span><br><span class="line">x2y</span><br><span class="line"></span><br><span class="line">a1d:</span><br><span class="line"></span><br><span class="line">b56e:</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/24.linux--shellè„šæœ¬åŸºç¡€/" data-id="ck7ooyagt001k4su6rcg392k3"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-23.linux--æ­£åˆ™è¡¨è¾¾å¼" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/23.linux--æ­£åˆ™è¡¨è¾¾å¼/"
    >æ­£åˆ™è¡¨è¾¾å¼</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/23.linux--æ­£åˆ™è¡¨è¾¾å¼/" class="article-date">
  <time datetime="2020-03-12T11:38:40.255Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±»"><a href="#æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±»" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±»"></a>æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±»</h2><p>æ­£åˆ™è¡¨è¾¾å¼ï¼šREGEXP      REGular EXPression</p>
<p>å¯åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>Basic REGEXP (åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼)</li>
<li>Extended REGEXP (æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼)</li>
</ul>
<h2 id="åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼"><a href="#åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼"></a>åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</h2><ul>
<li>å…ƒå­—ç¬¦</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.	ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">[]	åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">[^]	åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure>

<ul>
<li>åŒ¹é…æ¬¡æ•°ï¼ˆè´ªå©ªæ¨¡å¼ï¼‰</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦ä»»æ„æ¬¡</span><br><span class="line">.*	ä»»æ„é•¿åº¦çš„ä»»æ„å­—ç¬¦</span><br><span class="line">\?	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦1æ¬¡æˆ–0æ¬¡</span><br><span class="line">\+	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦è‡³å°‘1æ¬¡</span><br><span class="line">\&#123;m,n\&#125;	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦è‡³å°‘mæ¬¡ï¼Œè‡³å¤šnæ¬¡</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½ç½®é”šå®š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">^	é”šå®šè¡Œé¦–ï¼Œæ­¤å­—ç¬¦åé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œé¦–</span><br><span class="line">$	é”šå®šè¡Œå°¾ï¼Œæ­¤å­—ç¬¦å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œå°¾</span><br><span class="line">^$	ç©ºç™½è¡Œ</span><br><span class="line">\&lt;æˆ–\b	é”šå®šè¯é¦–ï¼Œå…¶åé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»ä½œä¸ºå•è¯é¦–éƒ¨å‡ºç°</span><br><span class="line">\&gt;æˆ–\b	é”šå®šè¯å°¾ï¼Œå…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»ä½œä¸ºå•è¯å°¾éƒ¨å‡ºç°</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ†ç»„</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\(\) </span><br><span class="line">ä¾‹å¦‚ï¼š\(ab\)*</span><br></pre></td></tr></table></figure>

<ul>
<li>åå‘å¼•ç”¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\1	å¼•ç”¨ç¬¬ä¸€ä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹å¯¹åº”çš„å³æ‹¬å·æ‰€åŒ…æ‹¬çš„æ‰€æœ‰å†…å®¹</span><br><span class="line">\2	å¼•ç”¨ç¬¬äºŒä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹å¯¹åº”çš„å³æ‹¬å·æ‰€åŒ…æ‹¬çš„æ‰€æœ‰å†…å®¹</span><br></pre></td></tr></table></figure>

<h2 id="æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"></a>æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</h2><ul>
<li>å­—ç¬¦åŒ¹é…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.       //åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">[]      //åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">[^]     //åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¬¡æ•°åŒ¹é…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦ä»»æ„æ¬¡</span><br><span class="line">?	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦1æ¬¡æˆ–0æ¬¡</span><br><span class="line">+	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦è‡³å°‘1æ¬¡</span><br><span class="line">&#123;m,n&#125;	åŒ¹é…å…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦è‡³å°‘mæ¬¡ï¼Œè‡³å¤šnæ¬¡</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½ç½®é”šå®š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">^	é”šå®šè¡Œé¦–ï¼Œæ­¤å­—ç¬¦åé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œé¦–</span><br><span class="line">$	é”šå®šè¡Œå°¾ï¼Œæ­¤å­—ç¬¦å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»å‡ºç°åœ¨è¡Œå°¾</span><br><span class="line">^$	ç©ºç™½è¡Œ</span><br><span class="line">\&lt;æˆ–\b	é”šå®šè¯é¦–ï¼Œå…¶åé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»ä½œä¸ºå•è¯é¦–éƒ¨å‡ºç°</span><br><span class="line">\&gt;æˆ–\b	é”šå®šè¯å°¾ï¼Œå…¶å‰é¢çš„ä»»æ„å•ä¸ªå­—ç¬¦å¿…é¡»ä½œä¸ºå•è¯å°¾éƒ¨å‡ºç°</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ†ç»„</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">()	åˆ†ç»„</span><br><span class="line">\1ï¼Œ\2ï¼Œ\3ï¼Œ....</span><br><span class="line">ä¾‹å¦‚ï¼š(ab)*</span><br></pre></td></tr></table></figure>

<ul>
<li>åå‘å¼•ç”¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\1	å¼•ç”¨ç¬¬ä¸€ä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹å¯¹åº”çš„å³æ‹¬å·æ‰€åŒ…æ‹¬çš„æ‰€æœ‰å†…å®¹</span><br><span class="line">\2	å¼•ç”¨ç¬¬äºŒä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹å¯¹åº”çš„å³æ‹¬å·æ‰€åŒ…æ‹¬çš„æ‰€æœ‰å†…å®¹</span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ–è€…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|	or é»˜è®¤åŒ¹é…ï½œçš„æ•´ä¸ªå·¦ä¾§æˆ–è€…æ•´ä¸ªå³ä¾§çš„å†…å®¹</span><br><span class="line">ä¾‹å¦‚ï¼šC|catè¡¨ç¤ºCæˆ–è€…catï¼Œè¦æƒ³è¡¨ç¤ºCatæˆ–è€…catåˆ™éœ€è¦ä½¿ç”¨åˆ†ç»„ï¼Œå¦‚(C|c)at</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/23.linux--æ­£åˆ™è¡¨è¾¾å¼/" data-id="ck7ooya3b00064su6g7bhveim"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-22.linux--httpdæœåŠ¡" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/22.linux--httpdæœåŠ¡/"
    >httpdæœåŠ¡</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/22.linux--httpdæœåŠ¡/" class="article-date">
  <time datetime="2020-03-12T11:38:40.253Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="httpdç®€ä»‹"><a href="#httpdç®€ä»‹" class="headerlink" title="httpdç®€ä»‹"></a>httpdç®€ä»‹</h2><p>Apache HTTP Serverï¼ˆç®€ç§°Apacheæˆ–httpdï¼‰æ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ç½‘é¡µæœåŠ¡å™¨è½¯ä»¶ï¼Œæ—¨åœ¨ä¸ºunixï¼Œwindowsç­‰æ“ä½œç³»ç»Ÿä¸­æä¾›å¼€æºhttpdæœåŠ¡ã€‚ç”±äºå…¶å®‰å…¨æ€§ã€é«˜æ•ˆæ€§åŠå¯æ‰©å±•æ€§ï¼Œè¢«å¹¿æ³›ä½¿ç”¨ï¼Œè‡ª1996å¹´4æœˆä»¥æ¥ï¼ŒApacheä¸€ç›´æ˜¯Internetä¸Šæœ€æµè¡Œçš„HTTPæœåŠ¡å™¨ã€‚å®ƒå¿«é€Ÿã€å¯é å¹¶ä¸”å¯é€šè¿‡ç®€å•çš„APIæ‰©å……ï¼Œå°†Perlï¼Pythonç­‰è§£é‡Šå™¨ç­‰ç¼–è¯‘åˆ°httpdçš„ç›¸å…³æ¨¡å—ä¸­ã€‚</p>
<p><a href="http://httpd.apache.org/docs/2.4/install.html" target="_blank" rel="noopener"><strong>apache</strong></a></p>
<h2 id="httpdç‰ˆæœ¬"><a href="#httpdç‰ˆæœ¬" class="headerlink" title="httpdç‰ˆæœ¬"></a>httpdç‰ˆæœ¬</h2><p>åœ¨CentOS6.Xçš„ç‰ˆæœ¬ä¸­é»˜è®¤æ˜¯æä¾›httpd-2.2ç‰ˆæœ¬çš„rpmåŒ…</p>
<p>åœ¨CentOS7.Xçš„ç‰ˆæœ¬ä¸­é»˜è®¤å¸ˆæä¾›httpd-2.4ç‰ˆæœ¬çš„rpmåŒ…</p>
<blockquote>
<p> æœ¬ç¯‡åšæ–‡ä¸»è¦ä»‹ç»httpd-2.4</p>
</blockquote>
<h3 id="httpdçš„ç‰¹æ€§"><a href="#httpdçš„ç‰¹æ€§" class="headerlink" title="httpdçš„ç‰¹æ€§"></a>httpdçš„ç‰¹æ€§</h3><table>
<thead>
<tr>
<th align="center">å·¥ä½œæ¨¡å‹</th>
<th align="center">å·¥ä½œæ–¹å¼</th>
</tr>
</thead>
<tbody><tr>
<td align="center">prefork</td>
<td align="center">å¤šè¿›ç¨‹æ¨¡å‹ï¼Œé¢„å…ˆç”Ÿæˆè¿›ç¨‹ï¼Œä¸€ä¸ªè¯·æ±‚ç”¨ä¸€ä¸ªè¿›ç¨‹å“åº” ä¸€ä¸ªä¸»è¿›ç¨‹è´Ÿè´£ç”Ÿæˆnä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¹Ÿç§°ä¸ºå·¥ä½œè¿›ç¨‹ æ¯ä¸ªå­è¿›ç¨‹å¤„ç†ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ï¼Œå³ä½¿æ²¡æœ‰ç”¨æˆ·è¯·æ±‚ï¼Œä¹Ÿä¼šé¢„å…ˆç”Ÿæˆå¤šä¸ªç©ºé—²è¿›ç¨‹ï¼Œéšæ—¶ç­‰å¾…è¯·æ±‚åˆ°è¾¾ æœ€å¤§ä¸ä¼šè¶…è¿‡1024ä¸ª</td>
</tr>
<tr>
<td align="center">worker</td>
<td align="center">åŸºäºçº¿ç¨‹å·¥ä½œï¼Œä¸€ä¸ªè¯·æ±‚ç”¨ä¸€ä¸ªçº¿ç¨‹å“åº”ï¼ˆå¯åŠ¨å¤šä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ç”Ÿæˆå¤šä¸ªçº¿ç¨‹ï¼‰</td>
</tr>
<tr>
<td align="center">event</td>
<td align="center">åŸºäºäº‹ä»¶çš„é©±åŠ¨ï¼Œä¸€ä¸ªè¿›ç¨‹å¤„ç†å¤šä¸ªè¯·æ±‚</td>
</tr>
</tbody></table>
<h3 id="httpd-2-4æ–°å¢çš„æ¨¡å—"><a href="#httpd-2-4æ–°å¢çš„æ¨¡å—" class="headerlink" title="httpd-2.4æ–°å¢çš„æ¨¡å—"></a>httpd-2.4æ–°å¢çš„æ¨¡å—</h3><ul>
<li>mod_proxy_fcgi        åå‘ä»£ç†æ—¶æ”¯æŒapacheæœåŠ¡å™¨åç«¯çš„æ¨¡å—</li>
<li>mod_ratelimit        æä¾›é€Ÿç‡é™åˆ¶åŠŸèƒ½çš„æ¨¡å—</li>
<li>mod_remoteip        åŸºäºipçš„è®¿é—®æ§åˆ¶æœºåˆ¶è¢«æ”¹å˜ï¼Œä¸å†æ”¯æŒä½¿ç”¨Orderï¼ŒDenyï¼ŒAllowæ¥åšåŸºäºIPçš„è®¿é—®æ§åˆ¶</li>
</ul>
<h2 id="httpdåŸºç¡€"><a href="#httpdåŸºç¡€" class="headerlink" title="httpdåŸºç¡€"></a>httpdåŸºç¡€</h2><h3 id="httpdè‡ªå¸¦çš„å·¥å…·ç¨‹åº"><a href="#httpdè‡ªå¸¦çš„å·¥å…·ç¨‹åº" class="headerlink" title="httpdè‡ªå¸¦çš„å·¥å…·ç¨‹åº"></a>httpdè‡ªå¸¦çš„å·¥å…·ç¨‹åº</h3><ul>
<li><p>htpasswd        basicè®¤è¯åŸºäºæ–‡ä»¶å®ç°æ—¶ï¼Œç”¨åˆ°çš„å¸å·å¯†ç ç”Ÿæˆå·¥å…·</p>
</li>
<li><p>htpasswd        httpdè‡ªå¸¦çš„æœåŠ¡æ§åˆ¶è„šæœ¬ï¼Œæ”¯æŒstartï¼Œstopï¼Œrestart</p>
</li>
<li><p>apxs        ç”±httpd-develåŒ…æä¾›çš„ï¼Œæ‰©å±•httpdä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—çš„å·¥å…·</p>
</li>
<li><p>rotatelogs        æ—¥å¿—æ»šåŠ¨å·¥å…·</p>
</li>
<li><p>suexec        è®¿é—®æŸäº›æœ‰ç‰¹æ®Šæƒé™é…ç½®çš„èµ„æºæ—¶ï¼Œä¸´æ—¶åˆ‡æ¢è‡³æŒ‡å®šç”¨æˆ·è¿è¡Œçš„å·¥å…·</p>
</li>
<li><p>ab        apache benchmarkï¼Œhttpdçš„å‹åŠ›æµ‹è¯•å·¥å…·</p>
</li>
</ul>
<h3 id="rpmåŒ…å®‰è£…httpdç¨‹åºç¯å¢ƒ"><a href="#rpmåŒ…å®‰è£…httpdç¨‹åºç¯å¢ƒ" class="headerlink" title="rpmåŒ…å®‰è£…httpdç¨‹åºç¯å¢ƒ"></a>rpmåŒ…å®‰è£…httpdç¨‹åºç¯å¢ƒ</h3><p><code>/var/log/httpd/access.log</code>        è®¿é—®æ—¥å¿—</p>
<p><code>/var/log/httpd/error_log</code>        é”™è¯¯æ—¥å¿—</p>
<p><code>/var/www/html/</code>        ç«™ç‚¹æ–‡æ¡£ç›®å½•</p>
<p><code>/usr/lib64/httpd/modules/</code>        æ¨¡å—æ–‡ä»¶è·¯å¾„</p>
<p><code>/etc/httpd/conf/httpd.conf</code>        ä¸»é…ç½®æ–‡ä»¶</p>
<p><code>/etc/httpd/conf.modules.d/*.conf</code>        æ¨¡å—é…ç½®æ–‡ä»¶</p>
<p><code>/etc/httpd/conf.d/*.conf</code>        è¾…åŠ©é…ç½®æ–‡ä»¶</p>
<h3 id="webç›¸å…³çš„å‘½ä»¤"><a href="#webç›¸å…³çš„å‘½ä»¤" class="headerlink" title="webç›¸å…³çš„å‘½ä»¤"></a>webç›¸å…³çš„å‘½ä»¤</h3><h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><ul>
<li>curlæ˜¯åŸºäºURLè¯­æ³•åœ¨å‘½ä»¤è¡Œæ–¹å¼ä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·</li>
<li>æ”¯æŒFTPï¼ŒFTPSï¼ŒHTTPï¼ŒHTTPSï¼ŒGOPHERï¼ŒTELNETï¼ŒDICTï¼ŒFILEåŠLDAPç­‰åè®®</li>
<li>åŠŸèƒ½æœ‰å¾ˆå¤šï¼šhttpsè®¤è¯ã€httpçš„POST/PUTç­‰æ–¹æ³•ã€ftpä¸Šä¼ ã€kerberosè®¤è¯ã€httpä¸Šä¼ ã€ä»£ç†æœåŠ¡å™¨ã€cookiesã€ç”¨æˆ·å/å¯†ç è®¤è¯ç­‰</li>
<li>æœ€å¸¸ç”¨äºä¸‹è½½</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">[root@server222 ~]<span class="comment"># curl --help</span></span><br><span class="line"><span class="comment"># -o  æŠŠè¾“å‡ºå†™åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@server222 ~]<span class="comment"># curl -o blog.html https://chineselijie.github.io/</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 13560  100 13560    0     0  15741      0 --:--:-- --:--:-- --:--:-- 15730</span><br><span class="line">[root@server222 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  initial-setup-ks.cfg  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">blog.html        å…¬å…±                  è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br></pre></td></tr></table></figure>

<h4 id="httpd"><a href="#httpd" class="headerlink" title="httpd"></a>httpd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">httpd [options]</span><br><span class="line">-l	æŸ¥çœ‹é™æ€ç¼–è¯‘çš„æ¨¡å—ï¼Œåˆ—å‡ºæ ¸å¿ƒä¸­ç¼–è¯‘äº†å“ªäº›æ¨¡å—</span><br><span class="line">-M	è¾“å‡ºä¸€ä¸ªå·²ç»å¯ç”¨çš„æ¨¡å—åˆ—è¡¨</span><br><span class="line">-v  æ˜¾ç¤ºhttpdçš„ç‰ˆæœ¬ï¼Œç„¶åé€€å‡º</span><br><span class="line">-V	æ˜¾ç¤ºhttpdå’Œapr/apr-utilçš„ç‰ˆæœ¬å’Œç¼–è¯‘å‚æ•°ï¼Œç„¶åé€€å‡º</span><br><span class="line">-X	ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œhttpdï¼Œctrl+cé€€å‡º</span><br><span class="line">-t	æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å®‰è£…httpd-2-4"><a href="#ç¼–è¯‘å®‰è£…httpd-2-4" class="headerlink" title="ç¼–è¯‘å®‰è£…httpd-2.4"></a>ç¼–è¯‘å®‰è£…httpd-2.4</h2><p>å‡†å¤‡ç¯å¢ƒ</p>
<ol>
<li>éœ€yumå®‰è£…Development Tools</li>
<li>éœ€yumå®‰è£…openssl-develã€pcre-develã€expat-develã€libtool</li>
<li>éœ€ç¼–è¯‘å®‰è£…apr-1.4ã€apr-util-1.4ï¼ˆ1.4ä»¥ä¸Šç‰ˆæœ¬ï¼‰</li>
<li>ç¼–è¯‘å®‰è£…httpd-2.4</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…Development Tools</span></span><br><span class="line">[root@server222 ~]<span class="comment"># yum groups mark install "Development Tools"</span></span><br><span class="line"><span class="comment"># å®‰è£…apacheç³»ç»Ÿç”¨æˆ·</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd -r -M -s /sbin/nologin apache</span></span><br><span class="line">[root@server222 ~]<span class="comment"># id apache</span></span><br><span class="line">uid=990(apache) gid=985(apache) ç»„=985(apache)</span><br><span class="line"><span class="comment"># å®‰è£…openssl-develã€pcre-develã€expat-develã€libtool</span></span><br><span class="line">[root@server222 ~]<span class="comment"># yum -y install openssl-devel pcre-devel expat-devel libtool</span></span><br><span class="line"><span class="comment"># ä¸‹è½½ apr-1.7ã€apr-util-1.6ã€httpd-2.4</span></span><br><span class="line">[root@server222 ~]<span class="comment"># wget https://mirrors.tuna.tsinghua.edu.cn/apache/apr/apr-util-1.6.1.tar.bz2 https://mirrors.tuna.tsinghua.edu.cn/apache/apr/apr-1.7.0.tar.bz2 https://mirrors.tuna.tsinghua.edu.cn/apache/httpd/httpd-2.4.39.tar.bz2</span></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf apr-util-1.6.1.tar.bz2</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf apr-1.7.0.tar.bz2</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tar -xf httpd-2.4.39.tar.bz2</span></span><br><span class="line"><span class="comment"># å®‰è£…apr</span></span><br><span class="line">[root@server222 ~]<span class="comment"># cd apr-1.7.0/</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># vim configure</span></span><br><span class="line">æŸ¥æ‰¾/<span class="variable">$cfgfile</span></span><br><span class="line"><span class="comment">#  $RM "$cfgfile    //å°†è¿™è¡Œæ³¨é‡Š</span></span><br><span class="line">ä¿å­˜å¹¶é€€å‡º</span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># ./configure --prefix=/usr/local/apr</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># å®‰è£…apr-util</span></span><br><span class="line">[root@server222 apr-1.7.0]<span class="comment"># cd /root/apr-util-1.6.1/ </span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># å®‰è£…httpd</span></span><br><span class="line">[root@server222 apr-util-1.6.1]<span class="comment"># cd /root/httpd-2.4.39/</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># ./configure --prefix=/usr/local/apache \</span></span><br><span class="line">&gt; --sysconfdir=/etc/httpd24 \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-so \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-ssl \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-cgi \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-rewrite \</span><br><span class="line">&gt; --with-zlib \</span><br><span class="line">&gt; --with-pcre \</span><br><span class="line">&gt; --with-apr=/usr/<span class="built_in">local</span>/apr \</span><br><span class="line">&gt; --with-apr-util=/usr/<span class="built_in">local</span>/apr-util/ \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-modules=most \</span><br><span class="line">&gt; --<span class="built_in">enable</span>-mpms-shared=all \</span><br><span class="line">&gt; --with-mpm=prefork</span><br><span class="line"></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># make &amp;&amp; make install</span></span><br><span class="line"><span class="comment"># åˆ›å»ºhttpçš„æ§åˆ¶è„šæœ¬</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># echo 'export PATH=/usr/local/apache/bin:$PATH' &gt;/etc/profile.d/httpd.sh</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># bash</span></span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># which httpd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/apache/bin/httpd</span><br><span class="line">[root@server222 httpd-2.4.39]<span class="comment"># /usr/local/apache/bin/apachectl start</span></span><br><span class="line">AH00558: httpd: Could not reliably determine the server<span class="string">'s fully qualified domain name, using fe80::1bd0:d77:f2c2:6f3%ens33. Set the '</span>ServerName<span class="string">' directive globally to suppress this message</span></span><br><span class="line"><span class="string">httpd (pid 104458) already running</span></span><br><span class="line"><span class="string"># å‡ºç°æŠ¥é”™ è§£å†³</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# vim /etc/httpd24/httpd.conf</span></span><br><span class="line"><span class="string">æŸ¥æ‰¾ /ServerName www.example.com</span></span><br><span class="line"><span class="string"># ServerName www.example.com:80  //å°†å‰é¢çš„æ³¨é‡Šå–æ¶ˆæ‰</span></span><br><span class="line"><span class="string">ä¿å­˜å¹¶é€€å‡º</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# /usr/local/apache/bin/apachectl start</span></span><br><span class="line"><span class="string">httpd (pid 104458) already running</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# ss -antl</span></span><br><span class="line"><span class="string">State       Recv-Q Send-Q Local Address:Port               Peer Address:Port         </span></span><br><span class="line"><span class="string">LISTEN      0      128            *:111                        *:*</span></span><br><span class="line"><span class="string">LISTEN      0      5      192.168.122.1:53                         *:*               </span></span><br><span class="line"><span class="string">LISTEN      0      128            *:22                         *:*</span></span><br><span class="line"><span class="string">LISTEN      0      128    127.0.0.1:631                        *:*</span></span><br><span class="line"><span class="string">LISTEN      0      100    127.0.0.1:25                         *:*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::111                       :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::80                        :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128           :::22                        :::*</span></span><br><span class="line"><span class="string">LISTEN      0      128          ::1:631                       :::*</span></span><br><span class="line"><span class="string">LISTEN      0      100          ::1:25                        :::*</span></span><br><span class="line"><span class="string"># å¯ä»¥çœ‹åˆ°80 ç«¯å£å·²ç»å¯ç”¨</span></span><br><span class="line"><span class="string"># å…³é—­é˜²æŠ¤å¢™å’ŒSElinux</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# systemctl stop firewalld.service</span></span><br><span class="line"><span class="string">[root@server222 httpd-2.4.39]# setenforce 0</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€ç«ç‹è¾“å…¥IPåœ°å€</p>
<p><img src="https://s2.ax1x.com/2019/06/30/ZlhJG8.png" alt></p>
<blockquote>
<p>ç®€ç•¥è§£é‡Šé€‰é¡¹å«ä¹‰ï¼š</p>
<p>â€“enable-so å¯ç”¨åŠ¨æ€æ”¯æŒ</p>
<p>â€“with-zlib ä½¿ç”¨zlibå‹ç¼©åº“ï¼Œå°†æ•°æ®å‹ç¼©å†ä¼ è¾“</p>
<p>â€“enable-modules=most å¯ç”¨å“ªäº›æ¨¡å—</p>
<p>â€“enable-mpms-shared=all  æŠŠå“ªäº›æ¨¡å—åšæˆåŠ¨æ€å…±äº«æ¨¡å—</p>
</blockquote>
<h2 id="httpdå¸¸ç”¨é…ç½®"><a href="#httpdå¸¸ç”¨é…ç½®" class="headerlink" title="httpdå¸¸ç”¨é…ç½®"></a>httpdå¸¸ç”¨é…ç½®</h2><p>yumå®‰è£…ï¼š/etc/httpd/conf.modules.d/00-mpm.confï¼šåˆ‡æ¢ä½¿ç”¨MPMï¼ˆå·¥ä½œæ¨¡å‹ï¼‰</p>
<ul>
<li>prefork</li>
<li>event</li>
<li>worker</li>
</ul>
<p>æºç å®‰è£…ï¼šå°±åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼ˆ/etc/httpd/httpd.confï¼‰</p>
<ul>
<li>æ¨¡å—æ–‡ä»¶åœ¨/usr/local/apache/modulesä¸­ä»¥.soç»“å°¾çš„æ–‡ä»¶</li>
</ul>
<p>æŸ¥çœ‹é…ç½®æ–‡ä»¶<code>/etc/httpd/httpd.conf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example:</span></span><br><span class="line"><span class="comment"># LoadModule foo_module modules/mod_foo.so</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">LoadModule mpm_event_module modules/mod_mpm_event.so</span><br><span class="line"><span class="comment">#LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</span></span><br><span class="line"><span class="comment">#LoadModule mpm_worker_module modules/mod_mpm_worker.so</span></span><br><span class="line">LoadModule authn_file_module modules/mod_authn_file.so</span><br><span class="line"><span class="comment">#LoadModule authn_dbm_module modules/mod_authn_dbm.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_anon_module modules/mod_authn_anon.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_dbd_module modules/mod_authn_dbd.so</span></span><br><span class="line"><span class="comment">#LoadModule authn_socache_module modules/mod_authn_socache.so</span></span><br><span class="line">LoadModule authn_core_module modules/mod_authn_core.so</span><br></pre></td></tr></table></figure>

<p>è®¿é—®æ§åˆ¶æ³•åˆ™</p>
<ul>
<li>å¯é’ˆå¯¹å…¨å±€è®¾ç½®ï¼Œä¹Ÿå¯é’ˆå¯¹æŸä¸ªç›®å½•åšè®¿é—®æ§åˆ¶</li>
</ul>
<table>
<thead>
<tr>
<th align="center">æ³•åˆ™</th>
<th align="center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Require all granted</td>
<td align="center">å…è®¸æ‰€æœ‰ä¸»æœºè®¿é—®</td>
</tr>
<tr>
<td align="center">Require all denied</td>
<td align="center">æ‹’ç»æ‰€æœ‰ä¸»æœºè®¿é—®</td>
</tr>
<tr>
<td align="center">Require ip IPADDR</td>
<td align="center">æˆæƒæŒ‡å®šæ¥æºåœ°å€çš„ä¸»æœºè®¿é—®</td>
</tr>
<tr>
<td align="center">Require not ip IPADDR</td>
<td align="center">æ‹’ç»æŒ‡å®šæ¥æºåœ°å€çš„ä¸»æœºè®¿é—®</td>
</tr>
<tr>
<td align="center">Require host HOSTNAME</td>
<td align="center">æˆæƒæŒ‡å®šæ¥æºä¸»æœºåçš„ä¸»æœºè®¿é—®</td>
</tr>
<tr>
<td align="center">Require not host HOSTNAME</td>
<td align="center">æ‹’ç»æŒ‡å®šæ¥æºä¸»æœºåçš„ä¸»æœºè®¿é—®</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>IPADDRçš„ç±»å‹</th>
<th>HOSTNAMEçš„ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>IPï¼š192.168.1.1  Network/maskï¼š192.168.1.0/255.255.255.0 Network/Lengthï¼š192.168.1.0/24 Netï¼š192.168</td>
<td>FQDNï¼šç‰¹å®šä¸»æœºçš„å…¨å DOMAINï¼šæŒ‡å®šåŸŸå†…çš„æ‰€æœ‰ä¸»æœº</td>
</tr>
</tbody></table>
<ul>
<li>æ³¨æ„ï¼šhttpd-2.4ç‰ˆæœ¬é»˜è®¤æ˜¯æ‹’ç»æ‰€æœ‰ä¸»æœºè®¿é—®çš„ï¼Œæ‰€ä»¥å®‰è£…ä»¥åå¿…é¡»åšæ˜¾ç¤ºæˆæƒè®¿é—®</li>
</ul>
<p><strong>ç¦æ­¢ç‰¹æ®ŠIPè®¿é—®</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/httpd.conf</span></span><br><span class="line"><span class="comment">#åœ¨æœ€åé¢åŠ ä¸Š</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222:80&gt;</span><br><span class="line">    DocumentRoot <span class="string">"/usr/local/apache/htdocs"</span></span><br><span class="line">    &lt;Directory /usr/<span class="built_in">local</span>/apache/htdocs&gt;</span><br><span class="line">        &lt;RequireAll&gt;</span><br><span class="line">        Require all granted</span><br><span class="line">        Require not ip 192.168.176.111</span><br><span class="line">        &lt;/RequireAll&gt;</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># /usr/local/apache/bin/apachectl restart</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æœ¬åœ°ä¸»æœºè®¿é—®ï¼š</p>
<p><img src="https://s2.ax1x.com/2019/06/30/Zlh5Ix.png" alt></p>
<p><strong>è™šæ‹Ÿä¸»æœº</strong>æœ‰ä¸‰ç±»ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install httpd -y</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">119 DocumentRoot <span class="string">"/home/wwwroot"</span></span><br><span class="line">120 </span><br><span class="line">121 <span class="comment">#</span></span><br><span class="line">122 <span class="comment"># Relax access to content within /var/www.</span></span><br><span class="line">123 <span class="comment">#</span></span><br><span class="line">124 &lt;Directory <span class="string">"/home/wwwroot"</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç›¸åŒIPä¸åŒç«¯å£</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/80</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/81</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "port:80" &gt; /home/wwwroot/80/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "port:81" &gt; /home/wwwroot/81/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°Listen 80ï¼Œåœ¨ä¸‹ä¸€è¡ŒåŠ ä¸ŠListen 81</span></span><br><span class="line">Listen 80</span><br><span class="line">Listen 81</span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 16 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222:80&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/80"</span></span><br><span class="line">ServerName <span class="string">"www.123.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/80"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.222:81&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/81"</span></span><br><span class="line">ServerName <span class="string">"www.abc.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/81"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸åŒIPç›¸åŒç«¯å£</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># vim /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 7 /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">IPADDR0=192.168.176.222</span><br><span class="line">IPADDR1=192.168.176.223</span><br><span class="line">IPADDR2=192.168.176.224</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.176.2</span><br><span class="line">DNS1=192.168.176.2</span><br><span class="line">IPV6_PRIVACY=no</span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart network</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.222</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.223</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping 192.168.176.224</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/10</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/20</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/30</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.222" &gt; /home/wwwroot/10/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.223" &gt; /home/wwwroot/20/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "IP:192.168.176.224" &gt; /home/wwwroot/30/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 24 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/10</span><br><span class="line">ServerName www.123.com</span><br><span class="line">&lt;Directory /home/wwwroot/10 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.223&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/20</span><br><span class="line">ServerName www.456.com</span><br><span class="line">&lt;Directory /home/wwwroot/20 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.224&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/30</span><br><span class="line">ServerName www.789.com</span><br><span class="line">&lt;Directory /home/wwwroot/30 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç›¸åŒIPç›¸åŒç«¯å£ä¸åŒåŸŸå(å¸¸ç”¨)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># tail -n 1 /etc/hosts</span></span><br><span class="line">192.168.176.222 www.123.com www.abc.com</span><br><span class="line">[root@server222 ~]<span class="comment"># ping www.123.com</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ping www.abc.com</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/123</span></span><br><span class="line">[root@server222 ~]<span class="comment"># mkdir -p /home/wwwroot/abc</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "WWW.123.com" &gt; /home/wwwroot/123/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo "WWW.abc.com" &gt; /home/wwwroot/abc/index.html</span></span><br><span class="line">[root@server222 ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf</span></span><br><span class="line">[root@server222 ~]<span class="comment"># tail -n 16 /etc/httpd/conf/httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/123"</span></span><br><span class="line">ServerName <span class="string">"www.123.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/123"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.176.222&gt;</span><br><span class="line">DocumentRoot <span class="string">"/home/wwwroot/abc"</span></span><br><span class="line">ServerName <span class="string">"www.abc.com"</span></span><br><span class="line">&lt;Directory <span class="string">"/home/wwwroot/abc"</span>&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">[root@server222 ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl restart httpd</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.ç¼–è¯‘å®‰è£…httpd-2.4</p>
<p>2.é…ç½®ä¸‰ç§ä¸åŒé£æ ¼çš„è™šæ‹Ÿä¸»æœº</p>
<p>3.å†™åšå®¢ï¼Œè¦å†™æ˜ç¯å¢ƒèƒŒæ™¯ã€é…ç½®æ­¥éª¤ï¼Œè¦æœ‰éªŒè¯æˆªå›¾</p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/22.linux--httpdæœåŠ¡/" data-id="ck7ooyagc001h4su6q9xthxt1"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-21.linux--MariaDBæ•°æ®åº“" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/12/21.linux--MariaDBæ•°æ®åº“/"
    >MariaDBæ•°æ®åº“</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/12/21.linux--MariaDBæ•°æ®åº“/" class="article-date">
  <time datetime="2020-03-12T11:38:40.252Z" itemprop="datePublished">2020-03-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxè¿›é˜¶/">linuxè¿›é˜¶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="MariaDBæ•°æ®åº“"><a href="#MariaDBæ•°æ®åº“" class="headerlink" title="MariaDBæ•°æ®åº“"></a>MariaDBæ•°æ®åº“</h2><p>â€‹        å¼€å‘MariaDBæ•°æ®åº“çš„å¼€å‘äººå‘˜ä»¥å‰æ˜¯ä»äº‹å¼€å‘MySQLï¼Œä½†æ˜¯MySQLè¢«Oracleå…¬å¸æ”¶è´­äº†ï¼Œä»å¼€æºè½¯ä»¶è½¬å˜ä¸ºé—­æºè½¯ä»¶ï¼Œä¹‹åMySQLçš„å¼€å‘è€…ä»¬å°±ç¦»å¼€äº†å…¬å¸ï¼Œå†æ¬¡åˆ›å»ºäº†ä¸€ä¸ªåä¸ºMariaDBçš„æ•°æ®åº“ï¼Œå¯ä»¥è¯´ï¼ŒMariaDBå’ŒMySQLåœ¨æ€§èƒ½ä¸ŠåŸºæœ¬ä¿æŒä¸€è‡´ï¼Œä¸¤è€…çš„æ“ä½œå‘½ä»¤ä¹Ÿååˆ†ç›¸ä¼¼ã€‚ä»åŠ¡å®çš„è§’åº¦æ¥è®²ï¼Œåœ¨æŒæ¡äº†MariaDBæ•°æ®åº“çš„å‘½ä»¤å’ŒåŸºæœ¬æ“ä½œä¹‹åï¼Œåœ¨ä»Šåçš„å·¥ä½œä¸­å³ä½¿é‡åˆ°MySQLæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<p><a href="https://baike.baidu.com/item/mariaDB/6466119?fr=aladdin" target="_blank" rel="noopener">MariaDB-ç™¾åº¦ç™¾ç§‘</a></p>
<p><a href="https://mariadb.org/" target="_blank" rel="noopener">MariaDB</a></p>
<p>â€‹        å½“å‰ï¼Œè°·æ­Œã€ç»´åŸºç™¾ç§‘ç­‰æŠ€æœ¯é¢†åŸŸå†³å®šå°†MySQLæ•°æ®åº“ä¸Šçš„ä¸šåŠ¡è½¬ç§»åˆ°MariaDBæ•°æ®åº“ï¼ŒLinuxå¼€æºç³»ç»Ÿçš„é¢†è¢–<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">çº¢å¸½</a>å…¬å¸ä¹Ÿå†³å®šåœ¨RHEL 7ã€<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">CentOS</a> 7ä»¥åŠæœ€æ–°çš„Fedoraç³»ç»Ÿä¸­ï¼Œå°†MariaDBä½œä¸ºé»˜è®¤çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œè€Œä¸”<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">çº¢å¸½</a>å…¬å¸æ›´æ˜¯é¦–æ¬¡å°†æ•°æ®åº“çŸ¥è¯†åŠ å…¥åˆ°äº†<a href="https://www.linuxprobe.com/" target="_blank" rel="noopener">RHCE</a>è®¤è¯çš„è€ƒè¯•å†…å®¹ä¸­ã€‚éšåï¼Œè¿˜æœ‰æ•°åä¸ªå¸¸è§çš„Linuxç³»ç»Ÿï¼ˆå¦‚openSUSEã€Slackwareç­‰ï¼‰ä¹Ÿä½œå‡ºäº†åŒæ ·çš„è¡¨æ€ã€‚</p>
<p><img src="https://s2.ax1x.com/2019/07/01/Z819C8.png" alt></p>
<h2 id="åˆå§‹åŒ–MariaDBæœåŠ¡"><a href="#åˆå§‹åŒ–MariaDBæœåŠ¡" class="headerlink" title="åˆå§‹åŒ–MariaDBæœåŠ¡"></a>åˆå§‹åŒ–MariaDBæœåŠ¡</h2><p>â€‹        ç›¸è¾ƒäºMySQLï¼ŒMariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ‰äº†å¾ˆå¤šæ–°é²œçš„æ‰©å±•ç‰¹æ€§ï¼Œä¾‹å¦‚å¯¹å¾®ç§’çº§åˆ«çš„æ”¯æŒã€çº¿ç¨‹æ± ã€å­æŸ¥è¯¢ä¼˜åŒ–ã€è¿›ç¨‹æŠ¥å‘Šç­‰ã€‚åœ¨é…ç½®å¦¥å½“Yumè½¯ä»¶ä»“åº“åï¼Œå³å¯å®‰è£…éƒ¨ç½²MariaDBæ•°æ®åº“ä¸»ç¨‹åºåŠæœåŠ¡ç«¯ç¨‹åºäº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y mariadb mariadb-server</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®‰è£…å®ŒæˆååŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@server222 ~]<span class="comment"># systemctl enable mariadb</span></span><br></pre></td></tr></table></figure>

<p><strong>åˆå§‹åŒ–5æ­¥éª¤</strong></p>
<ol>
<li>è®¾ç½®rootç®¡ç†å‘˜åœ¨æ•°æ®åº“ä¸­çš„å¯†ç å€¼ï¼ˆæ³¨æ„ï¼Œè¯¥å¯†ç å¹¶érootç®¡ç†å‘˜åœ¨ç³»ç»Ÿä¸­çš„å¯†ç ï¼Œè¿™é‡Œçš„å¯†ç å€¼é»˜è®¤åº”è¯¥ä¸ºç©ºï¼Œå¯ç›´æ¥æŒ‰å›è½¦é”®ï¼‰ã€‚</li>
<li>è®¾ç½®rootç®¡ç†å‘˜åœ¨æ•°æ®åº“ä¸­çš„ä¸“æœ‰å¯†ç ã€‚</li>
<li>éšååˆ é™¤åŒ¿åè´¦æˆ·ï¼Œå¹¶ä½¿ç”¨rootç®¡ç†å‘˜ä»è¿œç¨‹ç™»å½•æ•°æ®åº“ï¼Œä»¥ç¡®ä¿æ•°æ®åº“ä¸Šè¿è¡Œçš„ä¸šåŠ¡çš„å®‰å…¨æ€§ã€‚</li>
<li>åˆ é™¤é»˜è®¤çš„æµ‹è¯•æ•°æ®åº“ï¼Œå–æ¶ˆæµ‹è¯•æ•°æ®åº“çš„ä¸€ç³»åˆ—è®¿é—®æƒé™ã€‚</li>
<li>åˆ·æ–°æˆæƒåˆ—è¡¨ï¼Œè®©åˆå§‹åŒ–çš„è®¾å®šç«‹å³ç”Ÿæ•ˆã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MariaDB to secure it, we<span class="string">'ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you'</span>ve just installed MariaDB, and</span><br><span class="line">you haven<span class="string">'t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Enter current password for root (enter for none): #å½“å‰æ•°æ®åº“å¯†ç ä¸ºç©ºï¼Œç›´æ¥å›è½¦</span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MariaDB</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Set root password? [Y/n] y</span></span><br><span class="line"><span class="string">New password: # è®¾ç½®åˆ›å»ºæ•°æ®åº“ç®¡ç†å‘˜å¯†ç </span></span><br><span class="line"><span class="string">Re-enter new password: #å†æ¬¡è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MariaDB installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MariaDB without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n] y #åˆ é™¤åŒ¿åè´¦æˆ·</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from '</span>localhost<span class="string">'.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n] y # ç¦æ­¢rootç®¡ç†å‘˜ä»è¿œç¨‹ç™»é™†</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MariaDB comes with a database named '</span><span class="built_in">test</span><span class="string">' that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n] y #åˆ é™¤textæ•°æ®åº“å¹¶å–æ¶ˆå¯¹å®ƒçš„è®¿é—®æƒé™</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n] y # åˆ·æ–°æˆæƒè¡¨ï¼Œè®©åˆå§‹åŒ–åçš„è®¾å®šç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Cleaning up...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">All done!  If you'</span>ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using MariaDB!</span><br><span class="line">[root@server222 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>ä¹‹åæˆ‘ä»¬è¿˜è¦è®¾ç½®é˜²ç«å¢™ï¼Œä½¿å…¶æ”¾è¡Œå¯¹æ•°æ®åº“æœåŠ¡ç¨‹åºçš„è®¿é—®è¯·æ±‚ï¼Œæ•°æ®åº“æœåŠ¡ç¨‹åºé»˜è®¤ä¼šå ç”¨3306ç«¯å£ï¼Œåœ¨é˜²ç«å¢™ç­–ç•¥ä¸­æœåŠ¡åç§°ç»Ÿä¸€å«ä½œmysql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># firewall-cmd --permanent --add-service=mysql</span></span><br><span class="line">success</span><br><span class="line">[root@server222 ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹é¦–æ¬¡ç™»é™†MariaDBæ•°æ®åº“</p>
<p>-u  æŒ‡å®šå“ªä¸€ä½ç”¨æˆ·ç™»é™†</p>
<p>-p éªŒè¯è¯¥ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­çš„å¯†ç å€¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password: <span class="comment">#æ­¤å¤„è¾“å…¥æ‚¨åˆšæ‰è®¾ç½®çš„å¯†ç </span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ç™»é™†MariaDBæ•°æ®åº“æ‰§è¡Œå‘½ä»¤æ—¶å€™ï¼Œæ¯ä¸€æ¬¡éƒ½è¦åœ¨å‘½ä»¤ç»“å°¾ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“å°¾</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨æ•°æ®åº“å‘½ä»¤æ›´æ”¹å¯†ç "><a href="#ä½¿ç”¨æ•°æ®åº“å‘½ä»¤æ›´æ”¹å¯†ç " class="headerlink" title="ä½¿ç”¨æ•°æ®åº“å‘½ä»¤æ›´æ”¹å¯†ç "></a>ä½¿ç”¨æ•°æ®åº“å‘½ä»¤æ›´æ”¹å¯†ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SET password = PASSWORD(<span class="string">'abccba'</span>);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">ERROR 1045 (28000): Access denied <span class="keyword">for</span> user <span class="string">'root'</span>@<span class="string">'localhost'</span> (using password: YES)</span><br><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br></pre></td></tr></table></figure>

<h2 id="ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ"><a href="#ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ" class="headerlink" title="ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ"></a>ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ</h2><h4 id="åˆ›å»ºä¸“ç”¨çš„æ•°æ®åº“ç®¡ç†è´¦æˆ·"><a href="#åˆ›å»ºä¸“ç”¨çš„æ•°æ®åº“ç®¡ç†è´¦æˆ·" class="headerlink" title="åˆ›å»ºä¸“ç”¨çš„æ•°æ®åº“ç®¡ç†è´¦æˆ·"></a>åˆ›å»ºä¸“ç”¨çš„æ•°æ®åº“ç®¡ç†è´¦æˆ·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [mysql]&gt; CREATE USER abc@localhost IDENTIFIED BY <span class="string">'123321'</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥è¯¢è´¦æˆ·"><a href="#æŸ¥è¯¢è´¦æˆ·" class="headerlink" title="æŸ¥è¯¢è´¦æˆ·"></a>æŸ¥è¯¢è´¦æˆ·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use mysql</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SELECT HOST,USER,PASSWORD FROM user WHERE USER=<span class="string">"abc"</span>;</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">| HOST      | USER | PASSWORD                                  |</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">| localhost | abc  | *437F1809645E0A92DAB553503D2FE21DB91270FD |</span><br><span class="line">+-----------+------+-------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="æˆæƒï¼šgrant"><a href="#æˆæƒï¼šgrant" class="headerlink" title="æˆæƒï¼šgrant"></a>æˆæƒï¼šgrant</h4><table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GRANT æƒé™ ON æ•°æ®åº“.è¡¨å•åç§° TO ç”¨æˆ·å@ä¸»æœºå</td>
<td align="center">å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“ä¸­çš„ç‰¹å®šè¡¨å•ç»™äºˆæˆæƒ</td>
</tr>
<tr>
<td align="center">GRANT æƒé™ ON æ•°æ®åº“.* TO ç”¨æˆ·å@ä¸»æœºå</td>
<td align="center">å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å•ç»™äºˆæˆæƒ</td>
</tr>
<tr>
<td align="center">GRANT æƒé™ ON <em>.</em> TO ç”¨æˆ·å@ä¸»æœºå</td>
<td align="center">å¯¹æ‰€æœ‰æ•°æ®åº“åŠæ‰€æœ‰è¡¨å•ç»™äºˆæˆæƒ</td>
</tr>
<tr>
<td align="center">GRANT æƒé™1,æƒé™2 ON æ•°æ®åº“.* TO ç”¨æˆ·å@ä¸»æœºå</td>
<td align="center">å¯¹æŸä¸ªæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å•ç»™äºˆå¤šä¸ªæˆæƒ</td>
</tr>
<tr>
<td align="center">GRANT ALL PRIVILEGES ON <em>.</em> TO ç”¨æˆ·å@ä¸»æœºå</td>
<td align="center">å¯¹æ‰€æœ‰æ•°æ®åº“åŠæ‰€æœ‰è¡¨å•ç»™äºˆå…¨éƒ¨æˆæƒï¼ˆéœ€è°¨æ…æ“ä½œï¼‰</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; GRANT SELECT,UPDATE,DELETE,INSERT ON mysql.user TO abc@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SHOW GRANTS FOR abc@localhost;                                 +------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Grants for abc@localhost                                                                                   |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO &apos;abc&apos;@&apos;localhost&apos; IDENTIFIED BY PASSWORD &apos;*437F1809645E0A92DAB553503D2FE21DB91270FD&apos; |</span><br><span class="line">| GRANT SELECT, INSERT, UPDATE, DELETE ON `mysql`.`user` TO &apos;abc&apos;@&apos;localhost&apos;                                |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»è¿‡ä¸€ç³»åˆ—çš„æ“ä½œï¼Œæˆ‘ä»¬å†åˆ‡å…¥åˆ°abcç”¨æˆ·</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u abc -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 22</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show database;</span><br><span class="line">ERROR 1064 (42000): You have an error <span class="keyword">in</span> your SQL syntax; check the manual that corresponds to your MariaDB server version <span class="keyword">for</span> the right syntax to use near <span class="string">'database'</span> at line 1</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; show tables;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_mysql |</span><br><span class="line">+-----------------+</span><br><span class="line">| user            |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="æ”¶å›æƒé™å‘½ä»¤ï¼šrevoke"><a href="#æ”¶å›æƒé™å‘½ä»¤ï¼šrevoke" class="headerlink" title="æ”¶å›æƒé™å‘½ä»¤ï¼šrevoke"></a>æ”¶å›æƒé™å‘½ä»¤ï¼šrevoke</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 24</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SE</span><br><span class="line">SECOND              SELECT              SERIALIZABLE</span><br><span class="line">SECOND_MICROSECOND  SENSITIVE           SESSION</span><br><span class="line">SECURITY            SEPARATOR           SESSION_USER</span><br><span class="line">SEC_TO_TIME         SERIAL              SET</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SELECT</span><br><span class="line">Display all 1116 possibilities? (y or n)</span><br><span class="line">MariaDB [mysql]&gt; REVOKE SELECT,UPDATE,DELETE,INSERT ON mysql.user FROM abc@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; SHOW GRANTS FOR abc@localhost;</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Grants <span class="keyword">for</span> abc@localhost                                                                                   |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| GRANT USAGE ON *.* TO <span class="string">'abc'</span>@<span class="string">'localhost'</span> IDENTIFIED BY PASSWORD <span class="string">'*437F1809645E0A92DAB553503D2FE21DB91270FD'</span> |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•"><a href="#åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•" class="headerlink" title="åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•"></a>åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•</h2><h4 id="è‡ªå®šä¹‰æ•°æ®åº“è¡¨ç»“æ„"><a href="#è‡ªå®šä¹‰æ•°æ®åº“è¡¨ç»“æ„" class="headerlink" title="è‡ªå®šä¹‰æ•°æ®åº“è¡¨ç»“æ„"></a>è‡ªå®šä¹‰æ•°æ®åº“è¡¨ç»“æ„</h4><table>
<thead>
<tr>
<th align="center">ç”¨æ³•</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CREATE database æ•°æ®åº“åç§°ã€‚</td>
<td align="center">åˆ›å»ºæ–°çš„æ•°æ®åº“</td>
</tr>
<tr>
<td align="center">DESCRIBE è¡¨å•åç§°;</td>
<td align="center">æè¿°è¡¨å•</td>
</tr>
<tr>
<td align="center">UPDATE è¡¨å•åç§° SET attribute=æ–°å€¼ WHERE attribute &gt; åŸå§‹å€¼;</td>
<td align="center">æ›´æ–°è¡¨å•ä¸­çš„æ•°æ®</td>
</tr>
<tr>
<td align="center">USE æ•°æ®åº“åç§°;</td>
<td align="center">æŒ‡å®šä½¿ç”¨çš„æ•°æ®åº“</td>
</tr>
<tr>
<td align="center">SHOW databases;</td>
<td align="center">æ˜¾ç¤ºå½“å‰å·²æœ‰çš„æ•°æ®åº“</td>
</tr>
<tr>
<td align="center">SHOW tables;</td>
<td align="center">æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„è¡¨å•</td>
</tr>
<tr>
<td align="center">SELECT * FROM è¡¨å•åç§°;</td>
<td align="center">ä»è¡¨å•ä¸­é€‰ä¸­æŸä¸ªè®°å½•å€¼</td>
</tr>
<tr>
<td align="center">DELETE FROM è¡¨å•å WHERE attribute=å€¼;</td>
<td align="center">ä»è¡¨å•ä¸­åˆ é™¤æŸä¸ªè®°å½•å€¼</td>
</tr>
</tbody></table>
<p>ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºtomçš„æ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE DATABASE tom;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| tom                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>æƒ³è¦åˆ›å»ºæ•°æ®è¡¨å•ï¼Œé¦–å…ˆéœ€è¦åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨åœ¨tomæ•°æ®åº“ä¸­åˆ›å»ºè¡¨å•mybookã€‚ç„¶åè¿›è¡Œè¡¨å•çš„åˆå§‹åŒ–ï¼Œå³å®šä¹‰å­˜å‚¨æ•°æ®å†…å®¹çš„ç»“æ„ã€‚æˆ‘ä»¬åˆ†åˆ«å®šä¹‰3ä¸ªå­—æ®µé¡¹ï¼Œå…¶ä¸­ï¼Œé•¿åº¦ä¸º15ä¸ªå­—ç¬¦çš„å­—ç¬¦å‹å­—æ®µnameç”¨æ¥å­˜æ”¾å›¾ä¹¦åç§°ï¼Œæ•´å‹å­—æ®µpriceå’Œpagesåˆ†åˆ«å­˜å‚¨å›¾ä¹¦çš„ä»·æ ¼å’Œé¡µæ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; use tom;</span><br><span class="line">Database changed</span><br><span class="line">MariaDB [tom]&gt; CREATE TABLE mybook (name char(15),price int,pages int);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; DESCRIBE mybook;</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| Field | Type     | Null | Key | Default | Extra |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| name  | char(15) | YES  |     | NULL    |       |</span><br><span class="line">| price | int(11)  | YES  |     | NULL    |       |</span><br><span class="line">| pages | int(11)  | YES  |     | NULL    |       |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ç®¡ç†è¡¨å•åŠæ•°æ®"><a href="#ç®¡ç†è¡¨å•åŠæ•°æ®" class="headerlink" title="ç®¡ç†è¡¨å•åŠæ•°æ®"></a>ç®¡ç†è¡¨å•åŠæ•°æ®</h2><p>â€‹        æ¥ä¸‹æ¥å‘mybookæ•°æ®è¡¨å•ä¸­æ’ä¸€æ¡å›¾ä¹¦ä¿¡æ¯ã€‚ä¸ºæ­¤éœ€è¦ä½¿ç”¨INSERTå‘½ä»¤ï¼Œå¹¶åœ¨å‘½ä»¤ä¸­å†™æ¸…è¡¨å•åç§°ä»¥åŠå¯¹åº”çš„å­—æ®µé¡¹ã€‚æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åå³å¯å®Œæˆå›¾ä¹¦å†™å…¥ä¿¡æ¯ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨è¯¥å‘½ä»¤æ’å…¥ä¸€æ¡å›¾ä¹¦ä¿¡æ¯ï¼Œå…¶ä¸­ä¹¦åä¸ºgelintonghuaï¼Œä»·æ ¼å’Œé¡µæ•°åˆ†åˆ«æ˜¯60å…ƒå’Œ518é¡µã€‚åœ¨å‘½ä»¤æ‰§è¡Œåä¹Ÿå°±æ„å‘³ç€å›¾ä¹¦ä¿¡æ¯å·²ç»æˆåŠŸå†™å…¥åˆ°æ•°æ®è¡¨å•ä¸­ï¼Œç„¶åå°±å¯ä»¥æŸ¥è¯¢è¡¨å•ä¸­çš„å†…å®¹äº†ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨selectå‘½ä»¤æŸ¥è¯¢è¡¨å•å†…å®¹æ—¶ï¼Œéœ€è¦åŠ ä¸Šæƒ³è¦æŸ¥è¯¢çš„å­—æ®µã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'gelintonghua'</span>,<span class="string">'60'</span>, <span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³æŸ¥çœ‹è¡¨å•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰é€šé…ç¬¦æ¥æ˜¾ç¤º</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; select * from mybook;</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">| name         | price | pages |</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">| gelintonghua |    60 |   518 |</span><br><span class="line">+--------------+-------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>æ›´æ”¹å›¾ä¹¦çš„ä»·æ ¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; UPDATE mybook SET price=55 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; SELECT name,price FROM mybook;</span><br><span class="line">+--------------+-------+</span><br><span class="line">| name         | price |</span><br><span class="line">+--------------+-------+</span><br><span class="line">| gelintonghua |    55 |</span><br><span class="line">+--------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ é™¤å‘½ä»¤ï¼šdelete"><a href="#åˆ é™¤å‘½ä»¤ï¼šdelete" class="headerlink" title="åˆ é™¤å‘½ä»¤ï¼šdelete"></a>åˆ é™¤å‘½ä»¤ï¼šdelete</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; DELETE FROM mybook;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; SELECT * FROM mybook;</span><br><span class="line">Empty <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥è¯¢å¤§äºæŸä¸€ä¸ªæ•°å€¼çš„ä¿¡æ¯"><a href="#æŸ¥è¯¢å¤§äºæŸä¸€ä¸ªæ•°å€¼çš„ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢å¤§äºæŸä¸€ä¸ªæ•°å€¼çš„ä¿¡æ¯"></a>æŸ¥è¯¢å¤§äºæŸä¸€ä¸ªæ•°å€¼çš„ä¿¡æ¯</h4><p>é¦–å…ˆæˆ‘ä»¬æ’å…¥å››æ¡æ•°æ®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'123'</span>,<span class="string">'30'</span>,<span class="string">'518'</span>);   Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'456'</span>,<span class="string">'50'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'789'</span>,<span class="string">'80'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt; INSERT INTO mybook(name,price,pages) VALUES(<span class="string">'101'</span>,<span class="string">'100'</span>,<span class="string">'518'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="å‘½ä»¤where"><a href="#å‘½ä»¤where" class="headerlink" title="å‘½ä»¤where"></a>å‘½ä»¤where</h4><table>
<thead>
<tr>
<th align="center">å‚æ•°</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">=</td>
<td align="center">ç›¸ç­‰</td>
</tr>
<tr>
<td align="center">&lt;&gt;æˆ–!=</td>
<td align="center">ä¸ç›¸ç­‰</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">å¤§äº</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">å°äº</td>
</tr>
<tr>
<td align="center">&gt;=</td>
<td align="center">å¤§äºæˆ–ç­‰äº</td>
</tr>
<tr>
<td align="center">&lt;=</td>
<td align="center">å°äºæˆ–ç­‰äº</td>
</tr>
<tr>
<td align="center">BETWEEN</td>
<td align="center">åœ¨æŸä¸ªèŒƒå›´å†…</td>
</tr>
<tr>
<td align="center">LIKE</td>
<td align="center">æœç´¢ä¸€ä¸ªä¾‹å­</td>
</tr>
<tr>
<td align="center">IN</td>
<td align="center">åœ¨åˆ—ä¸­æœç´¢å¤šä¸ªå€¼</td>
</tr>
</tbody></table>
<p><strong>åœ¨mybookè¡¨å•ä¸­æŸ¥æ‰¾å‡ºä»·æ ¼å¤§äº75å…ƒæˆ–ä»·æ ¼ä¸ç­‰äº80å…ƒçš„å›¾ä¹¦</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [tom]&gt; SELECT * FROM mybook WHERE price&gt;75;</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| name | price | pages |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| 789  |    80 |   518 |</span><br><span class="line">| 101  |   100 |   518 |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [tom]&gt;  SELECT * FROM mybook WHERE price!=80;</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| name | price | pages |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">| 123  |    30 |   518 |</span><br><span class="line">| 456  |    50 |   518 |</span><br><span class="line">| 101  |   100 |   518 |</span><br><span class="line">+------+-------+-------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤"><a href="#æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤" class="headerlink" title="æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤"></a>æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤</h2><h4 id="å‘½ä»¤mysqldump"><a href="#å‘½ä»¤mysqldump" class="headerlink" title="å‘½ä»¤mysqldump"></a>å‘½ä»¤mysqldump</h4><p>â€‹        mysqldumpå‘½ä»¤ç”¨äºå¤‡ä»½æ•°æ®åº“æ•°æ®ï¼Œæ ¼å¼ä¸ºâ€œmysqldump [å‚æ•°] [æ•°æ®åº“åç§°]â€ã€‚å…¶ä¸­å‚æ•°ä¸mysqlå‘½ä»¤å¤§è‡´ç›¸åŒï¼Œ-uå‚æ•°ç”¨äºå®šä¹‰ç™»å½•æ•°æ®åº“çš„è´¦æˆ·åç§°ï¼Œ-på‚æ•°ä»£è¡¨å¯†ç æç¤ºç¬¦ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line">[root@server222 ~]<span class="comment"># mysqldump -u root -p mysql &gt; /root/mysql.dump</span></span><br><span class="line">Enter password:</span><br><span class="line">[root@server222 ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       mysql.dump  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">initial-setup-ks.cfg  å…¬å…±        è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br></pre></td></tr></table></figure>

<p><strong>è¿›å…¥MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåˆ é™¤mysqlæ•°æ®åº“</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 45</span><br><span class="line">Server version: 5.5.56-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; DROP DATABASE mysql;</span><br><span class="line">Query OK, 24 rows affected, 2 warnings (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; SHOW databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE mysql;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>æ¢å¤æ•°æ®åº“mysql</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># mysql -u root -p mysql &gt; /root/mysql.dump</span></span><br><span class="line">Enter password:</span><br><span class="line">[root@server222 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.æ­å»ºmysqlæœåŠ¡<br>2.åˆ›å»ºä¸€ä¸ªä»¥ä½ åå­—ä¸ºåçš„æ•°æ®åº“ï¼Œå¹¶åˆ›å»ºä¸€å¼ è¡¨studentï¼Œè¯¥è¡¨åŒ…å«ä¸‰ä¸ªå­—æ®µï¼ˆidï¼Œnameï¼Œageï¼‰ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student;</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11)      | NO   |     | NULL    |       |</span><br><span class="line">| name  | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| age   | tinyint(4)   | YES  |     | NULL    |       |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>3.æŸ¥çœ‹ä¸‹è¯¥æ–°å»ºçš„è¡¨æœ‰æ— å†…å®¹ï¼ˆç”¨selectè¯­å¥ï¼‰<br>4.å¾€æ–°å»ºçš„studentè¡¨ä¸­æ’å…¥æ•°æ®ï¼ˆç”¨insertè¯­å¥ï¼‰ï¼Œç»“æœåº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+------+</span><br><span class="line">| id | name        | age  |</span><br><span class="line">+----+-------------+------+</span><br><span class="line">|  1 | tom         |   20 |</span><br><span class="line">|  2 | jerry       |   23 |</span><br><span class="line">|  3 | wangqing    |   25 |</span><br><span class="line">|  4 | sean        |   28 |</span><br><span class="line">|  5 | zhangshan   |   26 |</span><br><span class="line">|  6 | zhangshan   |   20 |</span><br><span class="line">|  7 | lisi        | NULL |</span><br><span class="line">|  8 | chenshuo    |   10 |</span><br><span class="line">|  9 | wangwu      |    3 |</span><br><span class="line">| 10 | qiuyi       |   15 |</span><br><span class="line">| 11 | qiuxiaotian |   20 |</span><br><span class="line">+----+-------------+------+</span><br></pre></td></tr></table></figure>

<p>5.ä¿®æ”¹lisiçš„å¹´é¾„ä¸º50<br>6.ä»¥ageå­—æ®µé™åºæ’åº<br>7.æŸ¥è¯¢studentè¡¨ä¸­å¹´é¾„æœ€å°çš„3ä½åŒå­¦<br>8.æŸ¥è¯¢studentè¡¨ä¸­å¹´é¾„æœ€å¤§çš„4ä½åŒå­¦<br>9.æŸ¥è¯¢studentè¡¨ä¸­åå­—å«zhangshançš„è®°å½•<br>10.æŸ¥è¯¢studentè¡¨ä¸­åå­—å«zhangshanä¸”å¹´é¾„å¤§äº20å²çš„è®°å½•<br>11.æŸ¥è¯¢studentè¡¨ä¸­å¹´é¾„åœ¨23åˆ°30ä¹‹é—´çš„è®°å½•<br>12.ä¿®æ”¹wangwuçš„å¹´é¾„ä¸º100<br>13.åˆ é™¤studentä¸­åå­—å«zhangshanä¸”å¹´é¾„å°äºç­‰äº20çš„è®°å½•</p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2020/03/12/21.linux--MariaDBæ•°æ®åº“/" data-id="ck7ooyak9002y4su66bkm5oa4"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxè¿›é˜¶/">linuxè¿›é˜¶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer.png" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>å–œæ¬¢å°±æ‰“èµå§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>