<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

<link rel="alternate" href="/atom.xml" title="Li Jie's blog" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/chineselijie"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover3.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Li Jie&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-1.RHEL 7.4 实验环境搭建" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.RHEL 7.4 实验环境搭建/"
    >RHEL 7.4 实验环境搭建</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.RHEL 7.4 实验环境搭建/" class="article-date">
  <time datetime="2019-08-29T15:44:18.512Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux基础/">linux基础</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="RHEL-7-4-实验环境搭建"><a href="#RHEL-7-4-实验环境搭建" class="headerlink" title="RHEL 7.4 实验环境搭建"></a>RHEL 7.4 实验环境搭建</h3><p>环境搭建请访问链接：<a href="https://pan.baidu.com/s/1w2IHw3ozCZWqm-c-TaEVMA" target="_blank" rel="noopener">https://pan.baidu.com/s/1w2IHw3ozCZWqm-c-TaEVMA</a></p>
<p>提取码：ppm4 </p>
<p>内含：</p>
<ul>
<li>rhel-server-7.4-x86_64-dvd.iso镜像文件</li>
<li>VMware14安装包</li>
<li>Xftp-6.0.0083p.exe</li>
<li>Xmanager-6.0.0092.exe</li>
<li>Xshell-6.0.0089p.exe</li>
<li>屏幕录像专家.exe</li>
<li>向日葵远程协助.exe</li>
<li>搭建环境视频指导</li>
</ul>
<h3 id="开工准备"><a href="#开工准备" class="headerlink" title="开工准备"></a>开工准备</h3><ul>
<li><p>按着视频操作完之后，就代表我们搭建好RHEL 7.4实验环境之后，输入”<strong>ip a</strong>“来查看ens33里面有没有IP地址，如果没有（此处如果有直接跳转去看下一段），这时我们输入”<strong>vi /etc/sysconfig/network-scripts/ifcfg-ens33</strong>“ 然后我们按字母”<strong>i</strong>“，将光标移动至最低行或者’ONBOOT=no’这一行，将‘no’改为‘yes’即可，然后狂按<strong>esc键</strong>，输入”<strong>：wq</strong>“，之后我们就要重启网卡了，输入”<strong>systemctl restart network</strong>“,然后网卡就被重启了，然后再次输入“<strong>ip a</strong>”来查看ens33里面的IP地址。</p>
</li>
<li><p>然后就开始搭建本地yum源了，首先我们”<strong>cd /etc/yum.repos.d/</strong>“,然后输入”<strong>ls</strong>“查看一下这个目录里面有东西，如果有，我们就输入”<strong>rm -rf *</strong>“,意思就是删除所有东西，然后我们创建目录”<strong>mkdir /mnt/cdrom</strong>“再次输入”<strong>mount /dev/cdrom /mnt/cdrom</strong>“，之后我们输入”<strong>vi bendiyum.repo</strong>“,然后我们进入了一个全新的界面，我们按”i”进入编辑模式，将：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[bendiyum]</span><br><span class="line">name=bendiyum</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<p>加入进去之后，我们狂按<strong>esc键</strong>，输入”<strong>:wq</strong>“保存并退出，然后我们输入”<strong>yum clean all</strong>“清除缓存，然后我们输入”<strong>yum list | wc -l</strong>“来统计有多少行，结果非零为正确。证明本地yum 源搭建成功。</p>
<ul>
<li>快照</li>
</ul>
<p>这里的快照的含义就是将我们的系统拍一张照片，然后某一时刻系统出问题，这时拍摄过的快照就派上了用场，我们可以还原快照还原到现在这个模样，话不多说，我们来拍摄快照吧。我们在终端中输入”shutdown +0”立刻关机。然后在VMwark中点击你自己这个虚拟机，然后上面一栏中找到“虚拟机”，点击之后再点击“快照“，在点击”拍摄快照“，将快照保存下来，想还原快照就可以在快照管理器中查看拍摄过的快照。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.RHEL 7.4 实验环境搭建/" data-id="ck6akysd000018wu6sj2jexdl"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux基础/">linux基础</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-1.python--python基础理论讲解" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.python--python基础理论讲解/"
    >python基础理论讲解</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.python--python基础理论讲解/" class="article-date">
  <time datetime="2019-08-29T15:44:18.510Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"👆以上是不完整的我"</span>) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>一种面向对象的解释型计算机程序设计语言</strong></p>
<ul>
<li><strong>解释类：解释器</strong><ul>
<li>通过解释器来翻译，类似于同声传译人员</li>
<li>优点：更灵活</li>
<li>缺点：效率相对低一些</li>
<li>python属于解释型</li>
</ul>
</li>
<li><strong>编译类：编译器</strong><ul>
<li>先通过高级语言把程序写出来通过编译器解释成计算机能够看读懂的语言</li>
<li>类似于笔译人员</li>
<li>优点：效率更高</li>
<li>缺点：内容有修改时需重新写，过程比较漫长</li>
</ul>
</li>
</ul>
<h2 id="python-历史"><a href="#python-历史" class="headerlink" title="python 历史"></a>python 历史</h2><ul>
<li><strong>作者：Guido van Rossum(龟叔)</strong></li>
<li>语言诞生：Python是“蟒蛇”的意思。在1989年圣诞节期间，Guido身处阿姆斯特<br> 丹。这个都市的美丽和繁华没能填满Guido空虚的内心，周边的喧闹使他内心的寂 寞无处安放（夜的黑已不再纯粹，哈哈）。为了打发这种无趣，Guido决心为他之前孕育的ABC语言开发一个插件，这个插件就是大名鼎鼎的Python（男人因为孤独而优秀啊！）。一个新的脚本解释程序就此诞生。在给这个孩子起名字的时候，Guido取其所爱的一个叫Monty Python的喜剧团体的“Python”。</li>
<li>版本：Python2.0版本将会在2020年停止维护，Python3.0版本将是学习和开发的主流。</li>
</ul>
<p><strong>设计哲学与定位</strong></p>
<ul>
<li>优雅</li>
<li>简单</li>
<li>明确</li>
</ul>
<h2 id="python-特点"><a href="#python-特点" class="headerlink" title="python 特点"></a>python 特点</h2><ul>
<li>1.易于学习：Python有相对较少的关键字，结构简单，和一个明确定义的语法，学习起来更加简单。</li>
<li>2.易于阅读：Python代码定义的更清晰。</li>
<li>3.易于维护：Python的成功在于它的源代码是相当容易维护的。</li>
<li>4.一个广泛的标准库：Python的最大的优势之一是丰富的库，跨平台的，在UNIX，Windows和Macintosh兼容很好。</li>
<li>5.互动模式：互动模式的支持，您可以从终端输入执行代码并获得结果的语言，互动的测试和调试代码片断。</li>
<li>6.可移植：基于其开放源代码的特性，Python已经被移植（也就是使其工作）到许多平台。</li>
<li>7.可扩展：如果你需要一段运行很快的关键代码，或者是想要编写一些不愿开放的算法，你可以使用C或C++完成那部分程序，然后从你的Python程序中调用。</li>
<li>8.数据库：Python提供所有主要的商业数据库的接口。</li>
<li>9.GUI编程：Python支持GUI可以创建和移植到许多系统调用。</li>
<li>10.可嵌入: 你可以将Python嵌入到C/C++程序，让你的程序的用户获得”脚本化”的能力。</li>
</ul>
<h2 id="Python应用场景"><a href="#Python应用场景" class="headerlink" title="Python应用场景"></a>Python应用场景</h2><ul>
<li>数据分析</li>
<li>人工智能</li>
<li>网络爬虫</li>
<li>自动化运维</li>
<li>GUI（桌面编程）</li>
<li>WEB编程（网站后台开发 PHP、JSP、.net）</li>
<li>数据库编程</li>
<li>数学及科学计算（大数据领域）</li>
</ul>
<h2 id="编程特性"><a href="#编程特性" class="headerlink" title="编程特性"></a>编程特性</h2><p>• 面向过程<br> • 面向对象<br> • 函数式编程</p>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><p> 数据结构就是通过某种方式（例如对元素进行编号）组织在一起的数据元素的集合。这些数据元素可以是数字或者字符，甚至可以是其它类型的嵌套的数据结构</p>
<p>  python的最基本数据结构是序列</p>
<p>  序列中的每个元素被分配一个序号——即元素的位置，也称为索引。索引从0开始编号</p>
<p>  python包含6种内建的数据序列：</p>
<p>​    列表</p>
<p>​    元组</p>
<p>​    字符串</p>
<p>​    Unicode字符串</p>
<p>​    buffer对象</p>
<p>​    xrange对象</p>
<blockquote>
<p>基本的几种数据类型</p>
<p>1Intergral类型：</p>
<p>​    整型：不可变类型（-257，201624583371143）</p>
<p>​    布尔型：True、False</p>
<p>  2 浮点类型：</p>
<p>​    浮点数（3.1415926）</p>
<p>​    复数（3+6j）</p>
<p>​    十进制数字</p>
<p>  3.字符串：不可变类型</p>
<p>​    ‘GNU is Not Unix’,”hello”,’’’world’’’</p>
</blockquote>
<h2 id="程序执行过程"><a href="#程序执行过程" class="headerlink" title="程序执行过程"></a>程序执行过程</h2><p><img src="https://s3.51cto.com/wyfs02/M00/8C/21/wKioL1hjRnjggNxGAABZ4RoPwvU877.jpg" alt></p>
<h2 id="编写与执行python代码"><a href="#编写与执行python代码" class="headerlink" title="编写与执行python代码"></a>编写与执行python代码</h2><p><strong>可以通过两种方式来执行python代码：</strong> </p>
<ul>
<li><p>交互式解释器</p>
</li>
<li><p>python程序文件</p>
<p><strong>交互式解释器与python程序文件的利弊：</strong></p>
</li>
</ul>
<p>​    交互式模式下的程序执行完后难以再次运行，但是执行的代码可以立马看到效果；</p>
<p>​    将编写的程序保存至文件（.py）中可以方便多次运行，但无法立马看到执行效果。</p>
<p>  <strong>python的程序文件分类：</strong></p>
<p>​    包含一系列预编写好的语句的程序文件称作“模块”；</p>
<p>​    能够直接运行的模块文件通常称作脚本（即程序的顶层文件）</p>
<h2 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h2><p>  and  与</p>
<p>  or   或</p>
<p>  not  非</p>
<h2 id="控制流语句"><a href="#控制流语句" class="headerlink" title="控制流语句"></a>控制流语句</h2><p>  if、for、while、try</p>
<h2 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h2><p>  +、-、<em>、/、+=、-=、</em>=、/=</p>
<h2 id="语句和语法"><a href="#语句和语法" class="headerlink" title="语句和语法"></a>语句和语法</h2><p>​    <strong>注释：</strong></p>
<p>​      #：可以从一行的任何地方开始</p>
<p>​    <strong>续行：</strong></p>
<p>​      \：只能在行尾</p>
<p>​      ‘’’：闭合操作符，单一语句跨多行。实现多行注释、内置文档等功能</p>
<p>​    <strong>代码组：</strong></p>
<p>​      缩进相同的一组语句构成的一个代码块</p>
<p>​      首行以关键字开始，如if、while等，以冒号结束</p>
<p>​      python使用缩进来分隔代码组，同一代码组的代码行必须严格左对齐，否则会造成语法错误</p>
<p>​    <strong>同一行放置多个语句：</strong></p>
<p>​      ;：以分号作为分隔符</p>
<p>​    <strong>模块：</strong></p>
<p>​      每个python脚本文件都可以被当成是一个模块</p>
<p>​      模块里的代码可以是一段直接执行的脚本，也可以是一些类似库函数的代码从而可由别的模块执行导入（import）</p>
<p>​      每一个模块被导入时会被直接执行（仅第一次），因此纯模块文件中通常不会定义函数以外的代码，否则在import时就会被执行</p>
<p>  <strong>标识符</strong></p>
<p>​    标识符是计算机语言中允许作为名字的有效字符串集合：</p>
<p>​      其中有一部分是关键字，它们是语言的标识符，因此是保留字，不能用于其它用途</p>
<p>​        python3的关键字有以下这些：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">False</span> <span class="class"><span class="keyword">class</span> <span class="title">finally</span> <span class="title">is</span> <span class="title">return</span> <span class="title">None</span> <span class="title">continue</span>	<span class="title">for</span>	<span class="title">lambda</span> <span class="title">try</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">True</span> <span class="title">def</span> <span class="title">from</span> <span class="title">nonlocal</span> <span class="title">while</span> <span class="title">and</span> <span class="title">del</span> <span class="title">global</span>	<span class="title">not</span>	<span class="title">with</span> <span class="title">as</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">elif</span> <span class="title">if</span>	<span class="title">or</span> <span class="title">yield</span> <span class="title">assert</span>	<span class="title">else</span> <span class="title">import</span>	<span class="title">pass</span> <span class="title">break</span> <span class="title">except</span> <span class="title">in</span> <span class="title">raise</span></span></span><br></pre></td></tr></table></figure>

<p>​     python还有称为”内建”的标识符集合，虽不是保留字，仍不推荐使用这些特别的名字</p>
<p>​    <strong>python标识符：</strong></p>
<p>​      第一个字符只能使用字母或下划线；</p>
<p>​      余下的字符可以使用字母、数字或下划线；</p>
<p>​      区分字符大小写</p>
<p>  <strong>基本编程风格</strong></p>
<p>​    注释：既不能缺少注释，亦要避免过度注释</p>
<p>​    文档：python允许通过<strong>doc</strong>动态获得文档字串</p>
<p>​    缩进：统一缩进4个字串</p>
<p>​    标识符名称：见名知义</p>
<h2 id="python的变量取名"><a href="#python的变量取名" class="headerlink" title="python的变量取名"></a>python的变量取名</h2><ul>
<li><p>变量名应该做到见名知义</p>
</li>
<li><p>变量名区分大小写</p>
</li>
<li><p>变量名中有多个单词时有两种方式表示</p>
<ul>
<li>单词间使用下划线分隔（官方推荐）</li>
<li>首单词小写，后面单词的首字母大写</li>
</ul>
</li>
<li><p>变量名只能是由下划线、数字、字母组成，不能是空格或者特殊字符（#？&lt;.,$!&amp;*^~）</p>
</li>
<li><p>不能以中文做变量名</p>
</li>
<li><p>不能是保留字</p>
<ul>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">as  assert  <span class="built_in">break</span>  class  <span class="built_in">continue</span>  def  del  <span class="keyword">elif</span>  <span class="keyword">else</span>  except  <span class="built_in">exec</span>  finally  <span class="keyword">for</span>  from  global  <span class="keyword">if</span>  import  <span class="keyword">in</span>  is  lamda  not  or  pass  <span class="built_in">print</span>  raise  <span class="built_in">return</span>  try  <span class="keyword">while</span>  with  yield</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>所有字母都是大写表示常量</p>
</li>
</ul>
<h2 id="python的变量赋值"><a href="#python的变量赋值" class="headerlink" title="python的变量赋值"></a>python的变量赋值</h2><p>​    name = ‘tom’</p>
<p>​    Name2 = name</p>
<ul>
<li>把变量名理解为门牌号，而把其值理解为某一个房间内存回收机制</li>
<li>变量引用值为0时自动进行内存回收</li>
<li>如何·使用变量引用值变为0</li>
<li>del 变量名</li>
<li>重新给变量赋值新值</li>
</ul>
<blockquote>
<p>最后，给大家来一个简单的python游戏–<code>猜数字.py</code></p>
</blockquote>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment">#!/usr/bin/python</span></span><br><span class="line">&gt; print(<span class="string">"-------这是一个猜数字的小游戏-----------"</span>)</span><br><span class="line">&gt; guess= int(input(<span class="string">"猜数字:"</span>))</span><br><span class="line">&gt; i=<span class="number">0</span></span><br><span class="line">&gt; <span class="keyword">while</span>(guess!=<span class="number">8</span> <span class="keyword">and</span> i&lt;<span class="number">3</span>):</span><br><span class="line">&gt;     i=i+<span class="number">1</span></span><br><span class="line">&gt;     print(i)</span><br><span class="line">&gt;     <span class="keyword">if</span> guess&gt;<span class="number">8</span>:</span><br><span class="line">&gt;         print(<span class="string">'大了'</span>)</span><br><span class="line">&gt;         <span class="keyword">if</span> i==<span class="number">3</span>:</span><br><span class="line">&gt;             i=i+<span class="number">1</span></span><br><span class="line">&gt;         <span class="keyword">else</span>:</span><br><span class="line">&gt;             guess=int(input(<span class="string">'请重新输入：'</span>))</span><br><span class="line">&gt;     <span class="keyword">else</span>:</span><br><span class="line">&gt;         print(<span class="string">'小了'</span>)</span><br><span class="line">&gt;         <span class="keyword">if</span> i==<span class="number">3</span>:</span><br><span class="line">&gt;             i=i+<span class="number">1</span></span><br><span class="line">&gt;         <span class="keyword">else</span>:</span><br><span class="line">&gt;             guess=int(input(<span class="string">'请重新输入:'</span>))</span><br><span class="line">&gt;     <span class="keyword">if</span> guess==<span class="number">8</span>:</span><br><span class="line">&gt;         print(<span class="string">'猜对了，结束此游戏'</span>)</span><br><span class="line">&gt;     <span class="keyword">else</span>:</span><br><span class="line">&gt;         print(<span class="string">'你的次数已到'</span>)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h2><p>以上文本部分选自 <a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener">廖雪峰</a>老师的博客</p>
<p><strong>廖雪峰</strong>：十年软件开发经验，业余产品经理，精通Java/Python/Ruby/Scheme/Objective C等，对开源框架有深入研究，著有《Spring 2.0核心技术与最佳实践》一书，多个业余开源项目托管在<a href="https://github.com/michaelliao">GitHub</a></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.python--python基础理论讲解/" data-id="ck6akyseg000w8wu62r7vn1pc"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-1.linux--初步熟悉RHEL 8" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.linux--初步熟悉RHEL 8/"
    >初步熟悉RHEL 8</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.linux--初步熟悉RHEL 8/" class="article-date">
  <time datetime="2019-08-29T15:44:18.473Z" itemprop="datePublished">2019-08-29</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="RHEL-8-配置网络"><a href="#RHEL-8-配置网络" class="headerlink" title="RHEL 8 配置网络"></a>RHEL 8 配置网络</h2><blockquote>
<p>在RHEL 8中将再次支持service</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># service NetworkManager status</span></span><br><span class="line">Redirecting to /bin/systemctl status NetworkManager.service</span><br><span class="line">● NetworkManager.service - Network Manager</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; ven&gt;</span><br><span class="line">   Active: active (running) since Fri 2019-05-24 17:46:36 CST; 8min ago</span><br><span class="line">     Docs: man:NetworkManager(8)</span><br><span class="line"> Main PID: 1041 (NetworkManager)</span><br><span class="line">    Tasks: 3 (<span class="built_in">limit</span>: 12389)</span><br><span class="line">   Memory: 12.3M</span><br><span class="line">   CGroup: /system.slice/NetworkManager.service</span><br><span class="line">           └─1041 /usr/sbin/NetworkManager --no-daemon</span><br></pre></td></tr></table></figure>

<blockquote>
<p>相关服务已经转移到NetworkManager  ， network时代已经一去不复返</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl status net</span></span><br><span class="line">netcf-transaction.service  network.service</span><br><span class="line">network-online.target      network.target</span><br><span class="line">network-pre.target         </span><br><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl status network</span></span><br><span class="line">Unit network.service could not be found.</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl status NetworkManager</span></span><br><span class="line">● NetworkManager.service - Network Manager</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; ven&gt;</span><br><span class="line">   Active: active (running) since Fri 2019-05-24 17:46:36 CST; 11min ago</span><br><span class="line">     Docs: man:NetworkManager(8)</span><br><span class="line"> Main PID: 1041 (NetworkManager)</span><br><span class="line">    Tasks: 3 (<span class="built_in">limit</span>: 12389)</span><br><span class="line">   Memory: 12.3M</span><br><span class="line">   CGroup: /system.slice/NetworkManager.service</span><br><span class="line">           └─1041 /usr/sbin/NetworkManager --no-daemon</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改IP地址不建议去修改配置文件，因为重启网卡后新IP是不生效的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.128  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe1c:4e0f:cc9b:30fb  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:b3:bd:c2  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1136  bytes 1250792 (1.1 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 237  bytes 19907 (19.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-ens33 </span></span><br><span class="line">TYPE=<span class="string">"Ethernet"</span></span><br><span class="line">PROXY_METHOD=<span class="string">"none"</span></span><br><span class="line">BROWSER_ONLY=<span class="string">"no"</span></span><br><span class="line">BOOTPROTO=<span class="string">"static"</span></span><br><span class="line">DEFROUTE=<span class="string">"yes"</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">"no"</span></span><br><span class="line">IPV6INIT=<span class="string">"yes"</span></span><br><span class="line">IPV6_AUTOCONF=<span class="string">"yes"</span></span><br><span class="line">IPV6_DEFROUTE=<span class="string">"yes"</span></span><br><span class="line">IPV6_FAILURE_FATAL=<span class="string">"no"</span></span><br><span class="line">IPV6_ADDR_GEN_MODE=<span class="string">"stable-privacy"</span></span><br><span class="line">NAME=<span class="string">"ens33"</span></span><br><span class="line">UUID=<span class="string">"fdb7da01-d972-42f3-b21c-1dbeb70d18ac"</span></span><br><span class="line">DEVICE=<span class="string">"ens33"</span></span><br><span class="line">ONBOOT=<span class="string">"yes"</span></span><br><span class="line">IPADDR=192.168.107.144</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.107.2</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl restart NetworkManager</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.128  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe1c:4e0f:cc9b:30fb  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:b3:bd:c2  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1152  bytes 1251752 (1.1 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 241  bytes 20249 (19.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从上面我们可以看出，更改IP后重启网卡，IP地址依然不会变</p>
<p>重启网卡需要<strong><code>nmcli connection down/up ens33</code></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up ens33 </span></span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/3）</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.144  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe1c:4e0f:cc9b:30fb  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:b3:bd:c2  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1187  bytes 1254035 (1.1 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 273  bytes 24045 (23.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此时IP就已经显示192.168.107.144</p>
</blockquote>
<blockquote>
<p>其实RHEL 8 中更加推荐去使用<code>nmcli connection modify ens33ipv4.addressesxxx.xxx.xxx.xxx/xx ipv4.method manual ipv4.gateway xxx.xxx.xxx.xxx ipv4.dns xxx.xxx.xxx.xxx</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@zhoulijie ~]<span class="comment"># nmcli connection modify ens33 ipv4.addresses 192.168.107.155/24 ipv4.method manual ipv4.gateway 192.168.107.2</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection down ens33 </span></span><br><span class="line">成功停用连接 <span class="string">"ens33"</span>（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/3）</span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up ens33 </span></span><br><span class="line">连接已成功激活（D-Bus 活动路径：/org/freedesktop/NetworkManager/ActiveConnection/4）</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.155  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe1c:4e0f:cc9b:30fb  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:b3:bd:c2  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1361  bytes 1264826 (1.2 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 308  bytes 28081 (27.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果您觉得命令不好记住，这些命令其实是都可以tab出来的，英语不好的人可以记住前几个字母</p>
</blockquote>
<blockquote>
<p>如果您觉得用的不顺手，忘不了RHEL 7，您可以安装这个包<strong><code>network-scripts</code></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost cdrom]<span class="comment"># dnf -y install network-scripts</span></span><br><span class="line">已安装:</span><br><span class="line">  network-scripts-10.00.1-1.el8.x86_64  network-scripts-team-1.27-10.el8.x86_64 </span><br><span class="line"></span><br><span class="line">完毕！</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl restart network</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.129  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe72:33a5:86f:3a59  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:dd:ef:e4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1808  bytes 1305614 (1.2 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 344  bytes 33518 (32.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h2 id="RHEL-8-配置yum源"><a href="#RHEL-8-配置yum源" class="headerlink" title="RHEL 8 配置yum源"></a>RHEL 8 配置yum源</h2><p>在RHEL8中把软件源分成了两部分</p>
<blockquote>
<p><strong>一个是BaseOS</strong></p>
<p><strong>一个是AppStream</strong> </p>
</blockquote>
<p>在RHEL 8中，统一的ISO自动加载BaseOS和AppStream安装源存储库，已经存在于光盘链接中，只不过要分别去配置.repo文件</p>
<p>BaseOS 存储库 - BaseOS 存储库以传统 RPM 包的形式提供底层核心 OS 内容</p>
<p>AppStream 存储库 - Application Stream 存储库提供您可能希望在给定用户空间中运行的所有应用程序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ls /mnt/cdrom/</span></span><br><span class="line">AppStream  EULA              images      RPM-GPG-KEY-redhat-beta</span><br><span class="line">BaseOS     extra_files.json  isolinux    RPM-GPG-KEY-redhat-release</span><br><span class="line">EFI        GPL               media.repo  TRANS.TBL</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/yum.repos.d/zhoulijie.repo </span></span><br><span class="line">[zhoulijie_App]</span><br><span class="line">name=AppStream</span><br><span class="line">baseurl=file:///mnt/cdrom/AppStream</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[zhoulijie]</span><br><span class="line">name=BaseOS</span><br><span class="line">baseurl=file:///mnt/cdrom/BaseOS</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># yum install -y nginx</span></span><br><span class="line">已安装:</span><br><span class="line">  nginx-1:1.14.1-8.module+el8+2505+fe936cef.x86_64                       </span><br><span class="line">  nginx-all-modules-1:1.14.1-8.module+el8+2505+fe936cef.noarch           </span><br><span class="line">  nginx-filesystem-1:1.14.1-8.module+el8+2505+fe936cef.noarch           </span><br><span class="line">  nginx-mod-http-image-filter-1:1.14.1-8.module+el8+2505+fe936cef.x86_64 </span><br><span class="line">  nginx-mod-http-perl-1:1.14.1-8.module+el8+2505+fe936cef.x86_64         </span><br><span class="line">  nginx-mod-http-xslt-filter-1:1.14.1-8.module+el8+2505+fe936cef.x86_6  </span><br><span class="line">  nginx-mod-mail-1:1.14.1-8.module+el8+2505+fe936cef.x86_64             </span><br><span class="line">  nginx-mod-stream-1:1.14.1-8.module+el8+2505+fe936cef.x86_64          </span><br><span class="line"></span><br><span class="line">完毕！</span><br></pre></td></tr></table></figure>

<h2 id="如何使用DNF"><a href="#如何使用DNF" class="headerlink" title="如何使用DNF"></a>如何使用DNF</h2><p>DNF包管理器克服了YUM包管理器的一些瓶颈，提升了包括用户体验，内存占用，依赖分析，运行速度等多方面的内容。DNF使用 RPM, libsolv 和hawkey 库进行包管理操作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">DNF 的发行日期是2015年5月11日。</span><br><span class="line"></span><br><span class="line">具体使用方法：</span><br><span class="line">查看系统中可用的 DNF 软件库</span><br><span class="line">dnf  repolist</span><br><span class="line">查看系统中可用和不可用的所有的 DNF 软件库</span><br><span class="line">dnf  repolist  all</span><br><span class="line">列出所有 RPM 包</span><br><span class="line">dnf  list</span><br><span class="line">列出所有安装了的 RPM 包</span><br><span class="line">dnf  list  installed</span><br><span class="line">列出所有可供安装的 RPM 包</span><br><span class="line">dnf  list  available</span><br><span class="line">搜索软件库中的 RPM 包</span><br><span class="line">dnf  search  nano</span><br><span class="line">查找某一文件的提供者</span><br><span class="line">dnf  provides  /bin/bash</span><br><span class="line">查看软件包详情</span><br><span class="line">dnf  info  nano</span><br><span class="line">安装软件包</span><br><span class="line">dnf  install nano</span><br><span class="line">删除软件包</span><br><span class="line">dnf  remove  nano</span><br><span class="line">删除无用孤立的软件包</span><br><span class="line">dnf  autoremove </span><br><span class="line">删除缓存的无用软件包</span><br><span class="line">dnf  clean  all</span><br><span class="line">获取有关某条命令的使用帮助</span><br><span class="line">dnf  <span class="built_in">help</span>  clean</span><br><span class="line">查看 DNF 命令的执行历史</span><br><span class="line">dnf  <span class="built_in">history</span></span><br><span class="line">查看所有的软件包组</span><br><span class="line">dnf  grouplist</span><br><span class="line">安装一个软件包组</span><br><span class="line">dnf  groupinstall ‘安全性工具’</span><br><span class="line">从特定的软件包库安装特定的软件</span><br><span class="line">dnf  -enablerepo=epel install nginx</span><br><span class="line">重新安装特定软件包</span><br><span class="line">dnf  reinstall  nano</span><br><span class="line">				----------此板块来源于CSDN社区</span><br></pre></td></tr></table></figure>

<h2 id="运维利器之cockpit"><a href="#运维利器之cockpit" class="headerlink" title="运维利器之cockpit"></a>运维利器之cockpit</h2><p><strong>cockpit</strong>人称飞机驾驶舱</p>
<p>在web浏览器中查看服务器并使用鼠标执行系统任务。很容易管理存储、配置网络和检查日志等操作。</p>
<ul>
<li>RHEL 8 自动安装了 <strong>Cockpit</strong>，<strong>Cockpit</strong> 所需的防火墙端口会自动打开</li>
<li><strong>Cockpit</strong> 界面可用于将基于策略的解密（PBD）规则应用于受管系统上的磁盘 </li>
<li>对于在身份管理（IdM）域中注册的系统，<strong>Cockpit</strong> 默认使用域的集中管理的 IdM 资源 </li>
<li><strong>Cockpit</strong> 菜单和页面可以在移劢浏览器上导航</li>
<li>可以从 <strong>Cockpit Web</strong> 界面创建和管理虚拟机</li>
<li>现在可以将“虚拟机”页面添加到 <strong>Cockpit</strong> 界面，该界面使用户可以创建和管理基于 libvirt 的虚拟机</li>
</ul>
<blockquote>
<p>安装cockpit</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># dnf -y install cockpit</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动cockpit</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># systemctl enable --now cockpit.socket</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在RHEL 8里面设置开机自启动以及同时开启服务用一条命令就可以解决</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用cockpit</p>
</blockquote>
<p>cockpit监听9090端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -atnpu | grep 9090</span></span><br><span class="line">tcp6       0      0 :::9090                 :::*                    LISTEN      1/systemd</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.107.129  netmask 255.255.255.0  broadcast 192.168.107.255</span><br><span class="line">        inet6 fe80::fe72:33a5:86f:3a59  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:dd:ef:e4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 2491  bytes 1348562 (1.2 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 383  bytes 37089 (36.2 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>步骤详解</p>
</blockquote>
<ul>
<li>打开火狐浏览器</li>
<li>输入<strong><code>https://192.168.107.129:9090</code></strong></li>
<li>点击<strong><code>Advanced</code></strong></li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFB57V.png" alt></p>
<ul>
<li>点击Add Exception…</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFDu4S.md.png" alt></p>
<ul>
<li>此处默认</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdYWj.png" alt></p>
<ul>
<li>输入用户名以及用户密码</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFddO0.png" alt></p>
<ul>
<li>右上角选择语言</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdNSs.png" alt></p>
<ul>
<li>已支持中文</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdBwT.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdyY4.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/05/24/VFd2lR.png" alt></p>
<ul>
<li>并且支持远程控制</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdR61.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/05/24/VFdhm6.png" alt></p>
<blockquote>
<p>cockpit小结</p>
</blockquote>
<p>将支持图形界面化操作，对管理存储，以及配置网络和检查日志等操作都有着及其强大的方便。</p>
<p>这将对年轻人有者极其强大的方便，使其更加的容易上手，更方便的去学习、倡导开源之路。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.linux--初步熟悉RHEL 8/" data-id="ck6akysek00108wu6y68v3ssj"
        class="article-share-link">分享</a>
        
      
    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-1.linux--openssh" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.linux--openssh/"
    >openssh</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.linux--openssh/" class="article-date">
  <time datetime="2019-08-29T15:44:18.470Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux进阶/">linux进阶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="openssh"><a href="#openssh" class="headerlink" title="openssh"></a>openssh</h2><p>[TOC]</p>
<h2 id="使用ssh访问远程命令行"><a href="#使用ssh访问远程命令行" class="headerlink" title="使用ssh访问远程命令行"></a>使用ssh访问远程命令行</h2><h3 id="openssh-简介"><a href="#openssh-简介" class="headerlink" title="openssh 简介"></a>openssh 简介</h3><p>OpenSSH 是 <a href="http://baike.baidu.com/view/16184.htm" target="_blank" rel="noopener">SSH</a> （Secure <a href="http://baike.baidu.com/view/849.htm" target="_blank" rel="noopener">SHell</a>） 协议的免费开源实现。SSH协议族可以用来进行远程控制， 或在计算机之间传送文件。而实现此功能的传统方式，如telnet(<a href="http://baike.baidu.com/view/190233.htm" target="_blank" rel="noopener">终端仿真</a>协议)、 rcp ftp、 rlogin、rsh都是极为不安全的，并且会使用明文传送密码。OpenSSH提供了服务端后台程序和客户端工具，用来加密远程控件和文件传输过程中的数据，并由此来代替原来的类似服务。</p>
<p>常见的远程登陆工具有：</p>
<ul>
<li>telnet</li>
<li>ssh</li>
<li>dropbear</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">telnet 远程登陆协议：23/TCP</span><br><span class="line">	认证明文</span><br><span class="line">	数据传输明文</span><br><span class="line">	</span><br><span class="line">ssh  全称:secure shell 是应用层协议，22/tcp</span><br><span class="line">	通过认证过程是加密的，主机认证</span><br><span class="line">	用户认证过程加密</span><br><span class="line">	数据传输过程加密</span><br><span class="line"></span><br><span class="line">dropbear 为嵌入式系统专用的ssh服务器端和客户端工具</span><br></pre></td></tr></table></figure>

<h3 id="ssh版本"><a href="#ssh版本" class="headerlink" title="ssh版本"></a>ssh版本</h3><p>openssh有两个版本，分别为v1和v2，其特点如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1版本：基于crc-32做mac，但没有其防范中间人的攻击</span><br><span class="line"><span class="comment"># 中间人含义解释：在主机以及网关中间，告诉主机我是网关，却又告诉网关我是主机</span></span><br><span class="line">v2版本：双方主机协议选择安全的mac方式。基于DH算法做密钥交换，基于RSA或者DSA算法实现身份认证</span><br></pre></td></tr></table></figure>

<h3 id="ssh认证方式"><a href="#ssh认证方式" class="headerlink" title="ssh认证方式"></a>ssh认证方式</h3><p>openssh有两种认证方式，分别是：</p>
<ul>
<li>基于口令认证</li>
<li>基于密钥认证</li>
</ul>
<h3 id="openssh的工作模式"><a href="#openssh的工作模式" class="headerlink" title="openssh的工作模式"></a>openssh的工作模式</h3><p>openssh是基于C/S架构工作的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C/S架构</span><br><span class="line"><span class="comment"># Client/Server架构，即客户端/服务器架构。</span></span><br><span class="line">B/S结构</span><br><span class="line"><span class="comment"># 即Browser/Server (浏览器/服务器) 结构</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">服务器端   sshd  配置文件在/etc/ssh/sshd_config</span><br><span class="line">客户端     ssh   配置文件在/etc/ssh/ssh_config</span><br><span class="line">	ssh-keygen  密钥生成器</span><br><span class="line">    ssh-copy-id 将公钥传输至远程服务器</span><br><span class="line">    scp         跨主机安全复制工具</span><br></pre></td></tr></table></figure>

<h3 id="secure-shell-示例"><a href="#secure-shell-示例" class="headerlink" title="secure shell 示例"></a>secure shell 示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">The authenticity of host <span class="string">'192.168.107.144 (192.168.107.144)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:ckD0Gi2156g1NjAR4mGFYX4gYlcI4IH4VWYHuz9bDSg.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:1b:f5:48:ce:e5:18:d2:fe:be:55:46:69:d6:67:06:4c.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>192.168.107.144<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.107.144'</span>s password:</span><br><span class="line">Last login: Mon May 20 03:21:23 2019 from 192.168.107.1</span><br><span class="line">[root@server ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//以当前用户身份创建远程交互式shell，然后在结束时使用<span class="built_in">exit</span>命令返回到之前的shell</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh 192.168.107.144</span></span><br><span class="line">root@192.168.107.144<span class="string">'s password:</span></span><br><span class="line"><span class="string">Last login: Mon May 20 03:23:00 2019 from 192.168.107.140</span></span><br><span class="line"><span class="string">[root@server ~]# exit</span></span><br><span class="line"><span class="string">登出</span></span><br><span class="line"><span class="string">Connection to 192.168.107.144 closed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//以远程用户身份（remoteuser）在远程主机（remotehost）上通过将输出返回到本地显示器的方式来执行单一命令</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ssh zhou@192.168.107.144 '</span>/usr/bin/cat /etc/hostname<span class="string">'</span></span><br><span class="line"><span class="string">zhou@192.168.107.144'</span>s password:</span><br><span class="line">144</span><br><span class="line"></span><br><span class="line">/w命令可以显示当前登录到计算机的用户列表。这对于显示哪些用户使用ssh从哪些远程位置进行了登录以及执行了何种操作等内容特别有用</span><br><span class="line">[root@server ~]<span class="comment"># w</span></span><br><span class="line"> 03:42:04 up  3:08,  3 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     :0       :0               00:34   ?xdm?  35.24s  0.13s /usr/libexec/gn</span><br><span class="line">root     pts/0    192.168.107.1    03:21    4.00s  0.03s  0.00s w</span><br><span class="line">zhou     pts/1    192.168.107.140  03:42    2.00s  0.02s  0.02s -bash</span><br></pre></td></tr></table></figure>

<h3 id="ssh主机密钥"><a href="#ssh主机密钥" class="headerlink" title="ssh主机密钥"></a>ssh主机密钥</h3><p>​    ssh通过公钥加密的方式保持通信的安全，当某一ssh客户端连接到ssh服务器时，在该客户端登录之前，服务器会向其发送公钥副本。这可用于为通信渠道设置安全加密，并可验证客户端的服务器。</p>
<p>​    当用户第一次使用<code>ssh</code>连接到特定服务器时，ssh命令可在用户的<del>/.ssh/known_hosts文件中存储该服务器的公钥。在此之后每当用户进行连接时，客户端都会通过对比</del>/.ssh/known_hosts文件中的服务器条目和服务器发送的公钥，确保从服务器获得相同的公钥。如果公钥不匹配，客户端会假定网络通信已遭劫持或服务器已被入侵，并且中断连接。</p>
<p>​    这意味着，如果服务器的公钥发生更改（由于硬盘出现故障导致公钥丢失，或者出于某些正当理由替换公钥），用户则需要更新其~/.ssh/known_hosts文件并删除旧的条目才能够进行登录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//主机ID存储在本地客户端系统上的 /root/.ssh/known_hosts 中</span><br><span class="line">[root@clirnt ~]<span class="comment"># cat .ssh/known_hosts</span></span><br><span class="line">192.168.107.144 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBNpzCsuRZmBI8gq7WVjQNzuVlNqukUQj9i62JhdGmBK9Tm38P+MXMJRfeRz2q2KpP5Klbdiwysxei6byi3KXCC8=</span><br><span class="line">192.168.107.140 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBB1oHAfCZcxVYWUygQ2PaN2NiVKs2+W/pT4xXUKXDK2etvkj1qEETkZGgVo4kTxQBmujhfCcdHl7/vfL6qVR7P4=</span><br><span class="line"></span><br><span class="line">//主机密钥存储在SSH服务器上的 /etc/ssh/ssh_host_key* 中</span><br><span class="line">[root@server ~]<span class="comment"># ls /etc/ssh/*key*</span></span><br><span class="line">/etc/ssh/ssh_host_ecdsa_key      /etc/ssh/ssh_host_ed25519_key.pub</span><br><span class="line">/etc/ssh/ssh_host_ecdsa_key.pub  /etc/ssh/ssh_host_rsa_key</span><br><span class="line">/etc/ssh/ssh_host_ed25519_key    /etc/ssh/ssh_host_rsa_key.pub</span><br></pre></td></tr></table></figure>

<h2 id="配置基于ssh密钥的身份验证"><a href="#配置基于ssh密钥的身份验证" class="headerlink" title="配置基于ssh密钥的身份验证"></a>配置基于ssh密钥的身份验证</h2><p>​    用户可通过使用公钥身份验证进行ssh登录身份验证。ssh允许用户使用私钥-公钥方案进行身份验证。这意味着将生成私钥和公钥这两个密钥。私钥文件用作身份验证凭据，像密码一样，必须妥善保管。公钥复制到用户希望登录的系统，用于验证私钥。公钥并不需要保密。拥有公钥的ssh服务器可以发布仅持有您私钥的系统才可解答的问题。因此，可以根据所持有的密钥进行验证。如此一来，就不必在每次访问系统时键入密码，但安全性仍能得到保证。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用ssh-keygen命令生成密码。将会生成私钥~/.ssh/id_rsa和公钥~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<blockquote>
<p>生成密钥时，系统将提供指定密码的选项，在访问私钥时必须提供该密码。如果私钥被偷，除颁发者之外的其他任何人很难使用该私钥，因为已使用密码对其进行保护。这样，在攻击者破解并使用私钥前，会有足够的时间生成新的密钥对并删除所有涉及旧密钥的内容。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生成ssh密钥后，密钥将默认存储在家目录下的.ssh/目录中。私钥和公钥的权限就分别为600和644。.ssh目录权限必须是700</span><br></pre></td></tr></table></figure>

<p>在可以使用基于密钥的身份验证前，需要将公钥复制到目标系统上。可以使用<code>ssh-copy-id</code>命令完成这一操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]<span class="comment"># ssh-copy-id root@192.168.107.144</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">"/root/.ssh/id_rsa.pub"</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line">root@192.168.107.144<span class="string">'s password: </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Number of key(s) added: 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Now try logging into the machine, with:   "ssh '</span>root@192.168.107.144<span class="string">'"</span></span><br><span class="line"><span class="string">and check to make sure that only the key(s) you wanted were added.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在通过ssh-copy-id将密钥复制到另一系统时，它默认复制~/.ssh/id_rsa.pub文件</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">//SSH密钥演示</span><br><span class="line">//使用 ssh-keygen 创建公钥-私钥对</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-keygen -t rsa</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line">/root/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:L382dyk3r5TizdnGKXJfikf3buKfzCbnTXe5Ufz5vqM root@140</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|               . |</span></span><br><span class="line"><span class="string">|        S       o|</span></span><br><span class="line"><span class="string">|         .    ..*|</span></span><br><span class="line"><span class="string">|        . . ..o*X|</span></span><br><span class="line"><span class="string">|         o o+@*&amp;/|</span></span><br><span class="line"><span class="string">|          .o=E^^&amp;|</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//使用 ssh-copy-id 将公钥复制到远程系统上的正确位置</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ls .ssh/</span></span><br><span class="line"><span class="string">id_rsa  id_rsa.pub  known_hosts</span></span><br><span class="line"><span class="string">[root@clirnt ~]# ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.107.144</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">root@192.168.107.144'</span>s password: </span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'root@192.168.107.144'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">//使用 ssh 命令无命令登录远程主机</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 06:30:57 2019 from 192.168.107.1</span><br><span class="line"></span><br><span class="line">//使用 scp 命令传送文件到远程主机</span><br><span class="line">[root@clirnt ~]<span class="comment"># scp 1 root@192.168.107.144:/root</span></span><br><span class="line">1                                                100%   18    15.4KB/s   00:00    </span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 07:06:44 2019 from 192.168.107.140</span><br><span class="line">[root@server ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  模板  图片  下载  桌面</span><br><span class="line">anaconda-ks.cfg  公共                  视频  文档  音乐</span><br><span class="line"></span><br><span class="line">//使用 scp 命令从远程主机上下载文件到本地</span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  公共  视频  文档  音乐</span><br><span class="line">anaconda-ks.cfg  root@192.168.107.144  模板  图片  下载  桌面</span><br><span class="line">[root@clirnt ~]<span class="comment"># rm -f 1</span></span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       root@192.168.107.144  模板  图片  下载  桌面</span><br><span class="line">initial-setup-ks.cfg  公共                  视频  文档  音乐</span><br><span class="line">[root@clirnt ~]<span class="comment"># scp root@192.168.107.144:/root/1 /root</span></span><br><span class="line">1                                                100%   18    22.3KB/s   00:00    </span><br><span class="line">[root@clirnt ~]<span class="comment"># ls</span></span><br><span class="line">1                initial-setup-ks.cfg  公共  视频  文档  音乐</span><br><span class="line">anaconda-ks.cfg  root@192.168.107.144  模板  图片  下载  桌面</span><br><span class="line"></span><br><span class="line">//scp命令常用选项</span><br><span class="line">    -r      //递归复制</span><br><span class="line">    -p      //保持权限</span><br><span class="line">    -P      //端口</span><br><span class="line">    -q      //静默模式</span><br><span class="line">    -a      //全部复制</span><br></pre></td></tr></table></figure>

<h2 id="自定义ssh服务配置"><a href="#自定义ssh服务配置" class="headerlink" title="自定义ssh服务配置"></a>自定义ssh服务配置</h2><p>虽然<code>OpenSSH</code>服务器通常无需修改，但会提供其他安全措施，可以在配置文件<code>/etc/ssh/sshd_config</code>中修改<code>OpenSSH</code>服务器的各个方面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin &#123;yes|no&#125;    //是否允许root用户远程登录系统</span><br><span class="line">PermitRootLogin without-password    //仅允许root用户基于密钥方式远程登录</span><br><span class="line">PasswordAuthentication &#123;yes|no&#125;     //是否启用密码身份验证，默认开启</span><br></pre></td></tr></table></figure>

<h2 id="ssh安全注意事项"><a href="#ssh安全注意事项" class="headerlink" title="ssh安全注意事项"></a>ssh安全注意事项</h2><ul>
<li>密码应该经常换且足够复杂</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@clirnt ~]#  tr -dc A-Za-z0-9_ &lt; /dev/urandom | head -c 30 |xargs   //生成30位的密码</span><br><span class="line">LYH9cbirdT6E_hbColMFjZNf9Kd6If</span><br><span class="line"></span><br><span class="line">[root@clirnt ~]# openssl rand 20 -base64</span><br><span class="line">Di9ry+dyV40xVvBHirsc3XpBOzg=    //生成20位随机密码</span><br></pre></td></tr></table></figure>

<ul>
<li>使用非默认端口</li>
<li>限制登录客户端地址</li>
<li>仅监听特定的IP地址</li>
<li>禁止管理员直接登录</li>
<li>仅允许有限制用户登录<ul>
<li>AllowUsers</li>
<li>AllowGroups</li>
</ul>
</li>
<li>使用基于密钥的认证</li>
<li>禁止使用空密码</li>
<li>禁止使用SSHv1版本</li>
<li>设定空闲会话超时时长</li>
<li>利用防火墙设置ssh访问策略</li>
<li>限制ssh的访问频度和并发在线数</li>
<li>做好日志的备份，经常分析（集中于某台服务器）</li>
</ul>
<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p>1.说明密钥认证的过程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一步：本地创建密钥对</span><br><span class="line">第二步：本地将公钥发到远端</span><br><span class="line">第三步：进行免登陆测试</span><br></pre></td></tr></table></figure>

<p>2.手动配置密钥认证登录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//使用 ssh-keygen 创建公钥-私钥对</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-keygen -t rsa</span></span><br><span class="line">            <span class="comment"># [回车三次 直至出现RSA 2048]</span></span><br><span class="line">//使用 ssh-copy-id 将公钥复制到远程系统上的正确位置</span><br><span class="line">[root@clirnt ~]<span class="comment"># ls .ssh/</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.107.144</span></span><br><span class="line">			<span class="comment">#[选择yes之后输入密码]</span></span><br><span class="line">//使用 ssh 命令无命令登录远程主机</span><br><span class="line">[root@clirnt ~]<span class="comment"># ssh root@192.168.107.144</span></span><br><span class="line">Last login: Mon May 20 06:30:57 2019 from 192.168.107.1</span><br></pre></td></tr></table></figure>


      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.linux--openssh/" data-id="ck6akysei000y8wu6w3tsytj0"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux进阶/">linux进阶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-1.linux--LNMP" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.linux--LNMP/"
    >LNMP</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.linux--LNMP/" class="article-date">
  <time datetime="2019-08-29T15:44:18.466Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux运维/">linux运维</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h1><p>LNMP代表的就是：Linux系统下Nginx+MySQL+PHP这种网站服务器架构。</p>
<p>Linux是一类Unix计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo等。</p>
<p><a href="https://baike.baidu.com/item/Nginx" target="_blank" rel="noopener">Nginx</a>是一个高性能的HTTP和<a href="https://baike.baidu.com/item/反向代理" target="_blank" rel="noopener">反向代理</a>服务器，也是一个IMAP/POP3/SMTP代理服务器。</p>
<p>Mysql是一个小型<a href="https://baike.baidu.com/item/关系型数据库管理系统" target="_blank" rel="noopener">关系型数据库管理系统</a>。</p>
<p><a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>是一种在服务器端执行的嵌入HTML文档的脚本语言。</p>
<p>这四种软件均为免费开源软件，组合到一起，成为一个免费、高效、扩展性强的网站服务系统。</p>
<h2 id="LNMP特点"><a href="#LNMP特点" class="headerlink" title="LNMP特点"></a>LNMP特点</h2><p>​        LNMP动态网站部署架构是一套由Linux + Nginx + MySQL + PHP组成的动态网站系统解决方案，具有免费、高效、扩展性强且资源消耗低等优良特性。</p>
<p>​        Nginx是一款相当优秀的用于部署动态网站的轻量级服务程序，它最初是为俄罗斯门户站点而开发的，因其稳定性、功能丰富、占用内存少且并发能力强而备受用户的信赖。目前国内诸如新浪、网易、腾讯等门户站点均已使用了此服务。</p>
<p>Nginx服务程序的稳定性源自于采用了分阶段的资源分配技术，降低了CPU与内存的占用率，所以使用Nginx程序部署的动态网站环境不仅十分稳定、高效，而且消耗的系统资源也很少。此外，Nginx具备的模块数量与Apache具备的模块数量几乎相同，而且现在已经完全支持proxy、rewrite、mod_fcgi、ssl、vhosts等常用模块。更重要的是，Nginx还支持热部署技术，可以7×24不间断提供服务，还可以在不暂停服务的情况下直接对Nginx服务程序进行升级。</p>
<p>坦白来讲，虽然Nginx程序的代码质量非常高，代码很规范，技术成熟，模块扩展也很容易，但依然存在不少问题，比如是由俄罗斯人开发的，所以在资料文档方面还并不完善，中文资料的质量更是鱼龙混杂。但是Nginx服务程序在近年来增长势头迅猛，相信会在轻量级Web服务器市场具有不错的未来。</p>
<p>​    </p>
<p>​        PHP（Hypertxt Preprocessor，超文本预处理器）是一种通用的开源脚本语言，发明于1995年，它吸取了C语言、Java语言及Perl语言的很多优点，具有开源、免费、快捷、跨平台性强、效率高等优良特性，是目前Web开发领域最常用的语言之一。</p>
<h2 id="LNMP优点"><a href="#LNMP优点" class="headerlink" title="LNMP优点"></a>LNMP优点</h2><p>作为 Web 服务器：相比 Apache，Nginx 使用更少的资源，支持更多的并发连接，体现更高的效率。</p>
<p>作为负载均衡服务器：Nginx 既可以在内部直接支持<a href="https://baike.baidu.com/item/Rails" target="_blank" rel="noopener">Rails</a>和<a href="https://baike.baidu.com/item/PHP" target="_blank" rel="noopener">PHP</a>，也可以支持作为 HTTP<a href="https://baike.baidu.com/item/代理服务器" target="_blank" rel="noopener">代理服务器</a>对外进行服务。Nginx 用C编写，不论是系统资源开销还是CPU使用效率都比Perlbal要好的多。</p>
<p>作为邮件代理服务器：Nginx同时也是一个非常优秀的邮件代理服务器（最早开发这个产品的目的之一也是作为邮件代理服务器），Last/fm 描述了成功并且美妙的使用经验。</p>
<p>Nginx 安装非常的简单，配置文件非常简洁（还能够支持<a href="https://baike.baidu.com/item/perl" target="_blank" rel="noopener">perl</a>语法）。Nginx支持平滑加载新的配置，还能够在不间断服务的情况下进行软件版本的升级。</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mpSbTK.jpg" alt></p>
<h2 id="源码包安装"><a href="#源码包安装" class="headerlink" title="源码包安装"></a>源码包安装</h2><p>在使用源码包安装服务程序之前，首先要让安装主机具备编译程序源码的环境，他需要具备C语言、C++语言、Perl语言的编译器，以及各种常见的编译支持函数库程序。因此请先配置妥当Yum软件仓库</p>
<h3 id="配置yum仓库"><a href="#配置yum仓库" class="headerlink" title="配置yum仓库"></a>配置yum仓库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# tail -n 1 /etc/fstab</span><br><span class="line">/dev/cdrom      /mnt/cdrom      iso9660                 defaults        0 0</span><br><span class="line">[root@server222 ~]# vim /etc/yum.repos.d/bendi.repo</span><br><span class="line">[root@server222 ~]# cat /etc/yum.repos.d/bendi.repo</span><br><span class="line">[bendi]</span><br><span class="line">name=///mnt/cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@server222 ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="安装软件包"><a href="#安装软件包" class="headerlink" title="安装软件包"></a>安装软件包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# yum install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* wget zlib-devel</span><br></pre></td></tr></table></figure>

<h3 id="下载源码包以及系统软件包"><a href="#下载源码包以及系统软件包" class="headerlink" title="下载源码包以及系统软件包"></a>下载源码包以及系统软件包</h3><p>​        然后我们安装LNMP动态网站部署架构所需的16个软件源码包和1个用于检查效果的论坛网站系统软件包</p>
<blockquote>
<p> 此处建议把要安装的软件包存放在/usr/local/src目录中。</p>
</blockquote>
<p>首先我们创建<code>/usr/local/src</code>目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# mkdir /usr/local/src</span><br></pre></td></tr></table></figure>

<p>源码包文件已经放到百度云盘里面，下载下来传到Linux系统里面<code>/usr/local/src</code>目录即可</p>
<blockquote>
<p>链接：<a href="https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA" target="_blank" rel="noopener">https://pan.baidu.com/s/1X-eh_SRBbpXcVuxcu62VTA</a><br>提取码：ox0w<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mCjFoT.png" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src</span></span><br><span class="line">[root@server222 src]<span class="comment"># ls</span></span><br><span class="line">cmake-2.8.11.2.tar.gz   libpng-1.6.12.tar.gz   php-5.5.14.tar.gz</span><br><span class="line">Discuz_X3.2_SC_GBK.zip  libvpx-v1.3.0.tar.bz2  t1lib-5.1.2.tar.gz</span><br><span class="line">freetype-2.5.3.tar.gz   mysql-5.6.19.tar.gz    tiff-4.0.3.tar.gz</span><br><span class="line">jpegsrc.v9a.tar.gz      nginx-1.6.0.tar.gz     yasm-1.2.0.tar.gz</span><br><span class="line">libgd-2.1.0.tar.gz      openssl-1.0.1h.tar.gz  zlib-1.2.8.tar.gz</span><br><span class="line">libmcrypt-2.5.8.tar.gz  pcre-8.35.tar.gz</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果是17个包就算OK，差一个都不行</p>
</blockquote>
<h2 id="安装编译工具"><a href="#安装编译工具" class="headerlink" title="安装编译工具"></a>安装编译工具</h2><p>cmake是Linux系统中一款常用的编译工具。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># tar xzvf cmake-2.8.11.2.tar.gz</span></span><br><span class="line">[root@server222 src]<span class="comment"># cd cmake-2.8.11.2/</span></span><br><span class="line">[root@server222 cmake-2.8.11.2]<span class="comment"># ./configure ; make ; make install</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>此处命令<code>./configure ; make ; make install</code> </p>
<p>格式为 <code>命令A ; 命令B ; 命令C</code></p>
<p>这里意思是先执行命令A再执行命令B最后执行命令C</p>
</blockquote>
<h2 id="配置MySQL服务"><a href="#配置MySQL服务" class="headerlink" title="配置MySQL服务"></a>配置MySQL服务</h2><p>​       在使用Yum软件仓库安装服务程序时，系统会自动根据RPM软件包中的指令集完整软件配置等工作。但是一旦选择使用源码包的方式来安装，这一切就需要自己来完成了。针对MySQL数据库来讲，我们需要在系统中创建一个名为mysql的用户，专门用于负责运行MySQL数据库。请记得要把这类账户的Bash终端设置成nologin解释器，避免黑客通过该用户登录到服务器中，从而提高系统安全性。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cmake-2.8.11.2]# cd ..</span><br><span class="line">[root@server222 src]# useradd mysql -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>​       创建一个用于保存MySQL数据库程序和数据库文件的目录，并把该目录的所有者和所属组身份修改为mysql。其中，/usr/local/mysql是用于保存MySQL数据库服务程序的目录，/usr/local/mysql/var则是用于保存真实数据库文件的目录。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# mkdir -p /usr/local/mysql/var</span><br><span class="line">[root@server222 src]# chown -Rf mysql:mysql /usr/local/mysql</span><br></pre></td></tr></table></figure>

<p>​        接下来解压、编译、安装MySQL数据库服务程序。在编译数据库时使用的是cmake命令</p>
<p>-DCMAKE_INSTALL_PREFIX参数用于定义数据库服务程序的保存目录</p>
<p>-DMYSQL_DATADIR参数用于定义真实数据库文件的目录</p>
<p>-DSYSCONFDIR则是定义MySQL数据库配置文件的保存目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf mysql-5.6.19.tar.gz</span><br><span class="line">[root@server222 src]# cd mysql-5.6.19/</span><br><span class="line">[root@server222 mysql-5.6.19]# cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etc ; make ; make install</span><br></pre></td></tr></table></figure>

<p>​        为了让MySQL数据库程序正常运转起来，需要先删除/etc目录中的默认配置文件，然后在MySQL数据库程序的保存目录scripts内找到一个名为mysql_install_db的脚本程序，执行这个脚本程序并使用–user参数指定MySQL服务的对应账号名称（在前面步骤已经创建），使用–basedir参数指定MySQL服务程序的保存目录，使用–datadir参数指定MySQL真实数据库的文件保存目录，这样即可生成系统数据库文件，也会生成出新的MySQL服务配置文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql-5.6.19]# rm -rf /etc/my.cnf</span><br><span class="line">[root@server222 mysql-5.6.19]# cd /usr/local/mysql</span><br><span class="line">[root@server222 mysql]# ./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure>

<p>​        把系统新生成的MySQL数据库配置文件链接到/etc目录中，然后把程序目录中的开机程序文件复制到/etc/rc.d/init.d目录中，以便通过service命令来管理MySQL数据库服务程序。记得把数据库脚本文件的权限修改成755以便于让用户有执行该脚本的权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# ln -s my.cnf /etc/my.cnf</span><br><span class="line">[root@server222 mysql]# cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line">[root@server222 mysql]# chmod 755 /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure>

<p>​        编辑刚复制的MySQL数据库脚本文件，把第46、47行的basedir与datadir参数分别修改为MySQL数据库程序的保存目录和真实数据库的文件内容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/rc.d/init.d/mysqld</span><br><span class="line"> 45 </span><br><span class="line"> 46 basedir=/usr/local/mysql</span><br><span class="line"> 47 datadir=/usr/local/mysql/var</span><br><span class="line"> 48</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu 查看行</p>
</blockquote>
<p>​        配置好脚本文件后便可以用service命令启动mysqld数据库服务了。mysqld是MySQL数据库程序的服务名称，注意不要写错。顺带再使用chkconfig命令把mysqld服务程序加入到开机启动项中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# service mysqld start</span><br><span class="line">Starting MySQL. SUCCESS!</span><br><span class="line">[root@server222 mysql]# chkconfig mysqld on</span><br></pre></td></tr></table></figure>

<p>​       MySQL数据库程序自带了许多命令，但是Bash终端的PATH变量并不会包含这些命令所存放的目录，因此我们也无法顺利地对MySQL数据库进行初始化，也就不能使用MySQL数据库自带的命令了。想要把命令所保存的目录永久性地定义到PATH变量中，需要编辑/etc/profile文件并写入追加的命令目录，这样当物理设备在下一次重启时就会永久生效了。如果不想通过重启设备的方式来生效，也可以使用source命令加载一下/ect/profile文件，此时新的PATH变量也可以立即生效了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 mysql]# source /etc/profile</span><br></pre></td></tr></table></figure>

<p>​        MySQL数据库服务程序还会调用到一些程序文件和函数库文件。由于当前是通过源码包方式安装MySQL数据库，因此现在也必须以手动方式把这些文件链接过来。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mkdir /var/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/lib/mysql /usr/lib/mysql</span><br><span class="line">[root@server222 mysql]# ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 mysql]# ln -s /usr/local/mysql/include/mysql /usr/include/mysql</span><br></pre></td></tr></table></figure>

<p>​        现在，MySQL数据库服务程序已经启动，调用的各个函数文件已经就位，PATH环境变量中也加入了MySQL数据库命令的所在目录。接下来准备对MySQL数据库进行初始化</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# mysql_secure_installation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MySQL to secure it, we'll need the current</span><br><span class="line">password for the root user.  If you've just installed MySQL, and</span><br><span class="line">you haven't set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MySQL</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y  （要为root管理员设置数据库的密码）</span><br><span class="line">New password:  输入要为root管理员设置的数据库密码</span><br><span class="line">Re-enter new password:   再输入一次密码</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MySQL installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MySQL without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y  （删除匿名账户）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from 'localhost'.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] y （禁止root管理员从远程登录）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named 'test' that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y （删除test数据库并取消对其的访问权限）</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y （刷新授权表，让初始化后的设定立即生效）</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">All done!  If you've completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MySQL!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure>

<h2 id="配置Nginx服务"><a href="#配置Nginx服务" class="headerlink" title="配置Nginx服务"></a>配置Nginx服务</h2><p>​        在正式安装Nginx服务程序之前，我们还需要为其解决相关的软件依赖关系，下面来解压、编译、生成、安装Nginx服务程序的源码文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf pcre-8.35.tar.gz</span><br><span class="line">[root@server222 src]# cd pcre-8.35</span><br><span class="line">[root@server222 pcre-8.35]# ./configure --prefix=/usr/local/pcre ；make ; make install</span><br></pre></td></tr></table></figure>

<p>​        openssl软件包是用于提供网站加密证书服务的程序文件，在安装该程序时需要自定义服务程序的安装目录，以便于稍后调用它们的时候更可控。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf openssl-1.0.1h.tar.gz</span><br><span class="line">[root@server222 src]# cd openssl-1.0.1h</span><br><span class="line">[root@server222 openssl-1.0.1h]# ./config --prefix=/usr/local/openssl ; make ; make install</span><br></pre></td></tr></table></figure>

<p>​        openssl软件包安装后默认会在/usr/local/openssl/bin目录中提供很多的可用命令，我们需要像前面的操作那样，将这个目录添加到PATH环境变量中，并写入到配置文件中，最后执行source命令以便让新的PATH环境变量内容可以立即生效：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# vim /etc/profile</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin:/usr/local/openssl/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line">[root@server222 openssl-1.0.1h]# source /etc/profile</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 使用:set  nu 命令显示数字        </p>
</blockquote>
<p>​        zlib软件包是用于提供压缩功能的函数库文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 openssl-1.0.1h]# cd /usr/local/src</span><br><span class="line">[root@server222 src]# tar xzvf zlib-1.2.8.tar.gz</span><br><span class="line">[root@server222 src]# cd zlib-1.2.8</span><br><span class="line">[root@server222 zlib-1.2.8]# ./configure --prefix=/usr/local/zlib ; make ; make install</span><br></pre></td></tr></table></figure>

<p>​        在安装部署好具有依赖关系的软件包之后，创建一个用于执行Nginx服务程序的账户。账户名称可以自定义，但一定别忘记，因为在后续需要用到</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zlib-1.2.8]# cd ..</span><br><span class="line">[root@server222 src]# useradd www -s /sbin/nologin</span><br></pre></td></tr></table></figure>

<p>​        在使用命令编译Nginx服务程序时，需要设置特别多的参数</p>
<p>–prefix参数用于定义服务程序稍后安装到的位置</p>
<p>–user与–group参数用于指定执行Nginx服务程序的用户名和用户组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]# tar xzvf nginx-1.6.0.tar.gz</span><br><span class="line">[root@server222 src]# cd nginx-1.6.0/</span><br><span class="line">[root@server222 nginx-1.6.0]# ./configure --prefix=/usr/local/nginx --without-http_memcached_module --user=www --group=www --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-openssl=/usr/local/src/openssl-1.0.1h --with-zlib=/usr/local/src/zlib-1.2.8 --with-pcre=/usr/local/src/pcre-8.35 ; make ; make install</span><br></pre></td></tr></table></figure>

<p>​        要想启动Nginx服务程序以及将其加入到开机启动项中，也需要有脚本文件。可惜的是，在安装完Nginx软件包之后默认并没有为用户提供脚本文件</p>
<blockquote>
<p>此处代码复制粘贴即可</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# vim /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# cat /etc/rc.d/init.d/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> chkconfig: - 85 15</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> description: Nginx is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> proxy and IMAP/POP3 proxy server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> processname: nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> config: /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pidfile: /usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Source <span class="keyword">function</span> library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"><span class="meta">#</span><span class="bash"> Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"><span class="meta">#</span><span class="bash"> Check that networking is up.</span></span><br><span class="line">[ "$NETWORKING" = "no" ] &amp;&amp; exit 0</span><br><span class="line">nginx="/usr/local/nginx/sbin/nginx"</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line">NGINX_CONF_FILE="/usr/local/nginx/conf/nginx.conf"</span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line">make_dirs() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash"> make required directories</span></span><br><span class="line">user=`$nginx -V 2&gt;&amp;1 | grep "configure arguments:" | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -`</span><br><span class="line">        if [ -z "`grep $user /etc/passwd`" ]; then</span><br><span class="line">                useradd -M -s /bin/nologin $user</span><br><span class="line">        fi</span><br><span class="line">options=`$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'`</span><br><span class="line">for opt in $options; do</span><br><span class="line">        if [ `echo $opt | grep '.*-temp-path'` ]; then</span><br><span class="line">                value=`echo $opt | cut -d "=" -f 2`</span><br><span class="line">                if [ ! -d "$value" ]; then</span><br><span class="line">                        # echo "creating" $value</span><br><span class="line">                        mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">start() &#123;</span><br><span class="line">[ -x $nginx ] || exit 5</span><br><span class="line">[ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">make_dirs</span><br><span class="line">echo -n $"Starting $prog: "</span><br><span class="line">daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">stop() &#123;</span><br><span class="line">echo -n $"Stopping $prog: "</span><br><span class="line">killproc $prog -QUIT</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">restart() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">stop</span><br><span class="line">sleep 1</span><br><span class="line">start</span><br><span class="line">&#125;</span><br><span class="line">reload() &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">configtest || <span class="built_in">return</span> $?</span></span><br><span class="line">echo -n $"Reloading $prog: "</span><br><span class="line">killproc $nginx -HUP</span><br><span class="line">RETVAL=$?</span><br><span class="line">echo</span><br><span class="line">&#125;</span><br><span class="line">force_reload() &#123;</span><br><span class="line">restart</span><br><span class="line">&#125;</span><br><span class="line">configtest() &#123;</span><br><span class="line"><span class="meta">$</span><span class="bash">nginx -t -c <span class="variable">$NGINX_CONF_FILE</span></span></span><br><span class="line">&#125;</span><br><span class="line">rh_status() &#123;</span><br><span class="line">status $prog</span><br><span class="line">&#125;</span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">restart|configtest)</span><br><span class="line"><span class="meta">$</span><span class="bash">1</span></span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">echo $"Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span><br><span class="line">exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>保存脚本文件后记得为其赋予755权限，以便能够执行这个脚本</p>
<p>然后以绝对路径的方式执行这个脚本，通过restart参数重启Nginx服务程序</p>
<p>最后再使用chkconfig命令将Nginx服务程序添加至开机启动项中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# chmod 755 /etc/rc.d/init.d/nginx</span><br><span class="line">[root@server222 nginx-1.6.0]# /etc/rc.d/init.d/nginx restart</span><br><span class="line">Reloading systemd:                                         [  确定  ]</span><br><span class="line">Restarting nginx (via systemctl):                          [  确定  ]</span><br><span class="line">[root@server222 nginx-1.6.0]# chkconfig nginx on</span><br></pre></td></tr></table></figure>

<p>Nginx服务程序在启动后就可以在浏览器中输入服务器的IP地址来查看到默认网页了。相较于Apache服务程序的红色默认页面，Nginx服务程序的默认页面显得更加简洁。</p>
<p><img src="https://s2.ax1x.com/2019/08/12/mp8724.png" alt></p>
<h2 id="配置PHP服务"><a href="#配置PHP服务" class="headerlink" title="配置PHP服务"></a>配置PHP服务</h2><p>解决PHP的程序包和其他软件的依赖关系。</p>
<p>需要先安装部署将近十个用于搭建网站页面的软件程序包，然后才能正式安装PHP程序。</p>
<blockquote>
<p><code>yasm  libmcrypt  libvpx  tiff  libpng  freetype  jpeg  libgd  t1lib</code></p>
</blockquote>
<p><code>yasm</code>源码包是一款常见的开源汇编器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 nginx-1.6.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf yasm-1.2.0.tar.gz</span><br><span class="line">[root@server222 src]# cd yasm-1.2.0</span><br><span class="line">[root@server222 yasm-1.2.0]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libmcrypt</code>源码包是用于加密算法的扩展库程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 yasm-1.2.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libmcrypt-2.5.8.tar.gz</span><br><span class="line">[root@server222 src]# cd libmcrypt-2.5.8</span><br><span class="line">[root@server222 libmcrypt-2.5.8]# ./configure ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libvpx</code>源码包是用于提供视频编码器的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libmcrypt-2.5.8]# cd ..</span><br><span class="line">[root@server222 src]# tar xjvf libvpx-v1.3.0.tar.bz2</span><br><span class="line">[root@server222 src]# cd libvpx-v1.3.0</span><br><span class="line">[root@server222 libvpx-v1.3.0]# ./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9 ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>tiff</code>源码包是用于提供标签图像文件格式的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libvpx-v1.3.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf tiff-4.0.3.tar.gz</span><br><span class="line">[root@server222 src]# cd tiff-4.0.3</span><br><span class="line">[root@server222 tiff-4.0.3]# ./configure --prefix=/usr/local/tiff --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libpng</code>源码包是用于提供png图片格式支持函数库的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 tiff-4.0.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libpng-1.6.12.tar.gz</span><br><span class="line">[root@server222 src]# cd libpng-1.6.12</span><br><span class="line">[root@server222 libpng-1.6.12]# ./configure --prefix=/usr/local/libpng --enable-shared ；make ; make install</span><br></pre></td></tr></table></figure>

<p><code>freetype</code>源码包是用于提供字体支持引擎的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libpng-1.6.12]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf freetype-2.5.3.tar.gz</span><br><span class="line">[root@server222 src]# cd freetype-2.5.3</span><br><span class="line">[root@server222 freetype-2.5.3]# ./configure --prefix=/usr/local/freetype --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>jpeg</code>源码包是用于提供jpeg图片格式支持函数库的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 freetype-2.5.3]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf jpegsrc.v9a.tar.gz</span><br><span class="line">[root@server222 src]# cd jpeg-9a</span><br><span class="line">[root@server222 jpeg-9a]# ./configure --prefix=/usr/local/jpeg --enable-shared ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>libgd</code>源码包是用于提供图形处理的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 jpeg-9a]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf libgd-2.1.0.tar.gz</span><br><span class="line">[root@server222 src]# cd libgd-2.1.0</span><br><span class="line">[root@server222 libgd-2.1.0]# ./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpx ; make ; make install</span><br></pre></td></tr></table></figure>

<p><code>t1lib</code>源码包是用于提供图片生成函数库的服务程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 libgd-2.1.0]# cd ..</span><br><span class="line">[root@server222 src]# tar zxvf t1lib-5.1.2.tar.gz</span><br><span class="line">[root@server222 src]# cd t1lib-5.1.2</span><br><span class="line">[root@server222 t1lib-5.1.2]# ./configure --prefix=/usr/local/t1lib --enable-shared ; make ; make install</span><br><span class="line">[root@server222 t1lib-5.1.2]# ln -s /usr/lib64/libltdl.so /usr/lib/libltdl.so</span><br><span class="line">[root@server222 t1lib-5.1.2]# cp -frp /usr/lib64/libXpm.so* /usr/lib/</span><br></pre></td></tr></table></figure>

<p>​        在开始编译php源码包之前，先定义一个名为LD_LIBRARY_PATH的全局环境变量，该环境变量的作用是帮助系统找到指定的动态链接库文件，这些文件是编译php服务源码包的必须元素之一。编译php服务源码包时，除了定义要安装到的目录以外，还需要依次定义配置php服务程序配置文件的保存目录、MySQL数据库服务程序所在目录、MySQL数据库服务程序配置文件所在目录，以及libpng、jpeg、freetype、libvpx、zlib、t1lib等服务程序的安装目录路径，并通过参数启动php服务程序的诸多默认功能</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 t1lib-5.1.2]# cd ..</span><br><span class="line">[root@server222 src]# tar -zvxf php-5.5.14.tar.gz</span><br><span class="line">[root@server222 src]# cd php-5.5.14</span><br><span class="line">[root@server222 php-5.5.14]# export LD_LIBRARY_PATH=/usr/local/libgd/lib</span><br><span class="line">[root@server222 php-5.5.14]# ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctype ; make ; make install</span><br></pre></td></tr></table></figure>

<p>​        在php源码包程序安装完成后，需要删除当前默认的配置文件，然后将php服务程序目录中相应的配置文件复制过来</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# rm -rf /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php.ini /etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line">[root@server222 php-5.5.14]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">[root@server222 php-5.5.14]# ln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf</span><br></pre></td></tr></table></figure>

<p>​        php-fpm.conf是php服务程序重要的配置文件之一，我们需要启用该配置文件中第25行左右的pid文件保存目录，然后分别将第148和149行的user与group参数分别修改为www账户和用户组名称</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php-fpm.conf</span><br><span class="line">24 ; Default Value: none</span><br><span class="line">25 pid = run/php-fpm.pid</span><br><span class="line">26 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">147 ; will be used.</span><br><span class="line">148 user = www</span><br><span class="line">149 group = www</span><br><span class="line">150</span><br></pre></td></tr></table></figure>

<blockquote>
<p>:set nu 可查看行数</p>
</blockquote>
<p>​        配置妥当后便可把用于管理php服务的脚本文件复制到/etc/rc.d/init.d中了。为了能够执行脚本，请记得为脚本赋予755权限。最后把php-fpm服务程序加入到开机启动项中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chmod 755 /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@server222 php-5.5.14]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure>

<p>​        由于php服务程序的配置参数直接会影响到Web服务服务的运行环境，因此，如果默认开启了一些不必要且高危的功能（如允许用户在网页中执行Linux命令），则会降低网站被入侵的难度，入侵人员甚至可以拿到整台Web服务器的管理权限。因此我们需要编辑php.ini配置文件，在305行的disable_functions参数后面追加上要禁止的功能。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/php/etc/php.ini</span><br><span class="line"></span><br><span class="line">304 ; http://php.net/disable-functions</span><br><span class="line">305 disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</span><br></pre></td></tr></table></figure>

<p>​        这样就把php服务程序配置妥当了。最后，还需要编辑Nginx服务程序的主配置文件，把第2行的井号（#）删除，然后在后面写上负责运行Nginx服务程序的账户名称和用户组名称；在第45行的index参数后面写上网站的首页名称。</p>
<p>​        最后是将第65～71行参数前的井号（#）删除来启用参数，主要是修改第69行的脚本名称路径参数，其中$document_root变量即为网站信息存储的根目录路径，若没有设置该变量，则Nginx服务程序无法找到网站信息，因此会提示“404页面未找到”的报错信息。在确认参数信息填写正确后便可重启Nginx服务与php-fpm服务。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line"> 1 </span><br><span class="line"> 2 user www www;</span><br><span class="line"> 3 worker_processes 1;</span><br><span class="line"> 4 </span><br><span class="line"> </span><br><span class="line"> 44 	root html;</span><br><span class="line"> 45 	index index.html index.htm index.php forum.php;</span><br><span class="line"> 46 &#125;</span><br><span class="line"> 47 </span><br><span class="line"> </span><br><span class="line"> 64         #</span><br><span class="line"> 65         location ~ \.php$ &#123;</span><br><span class="line"> 66             root           html;</span><br><span class="line"> 67             fastcgi_pass   127.0.0.1:9000;</span><br><span class="line"> 68             fastcgi_index  index.php;</span><br><span class="line"> 69         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line"> 70             include        fastcgi_params;</span><br><span class="line"> 71         &#125;</span><br><span class="line"> 72</span><br><span class="line"> 73         # deny access to .htaccess files, if Apache's document root</span><br><span class="line"></span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart nginx</span><br><span class="line">[root@server222 php-5.5.14]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从65行到71行的注释需要去掉</p>
</blockquote>
<p>至此，LNMP动态网站环境架构的配置实验全部结束。</p>
<h2 id="搭建Discuz-论坛"><a href="#搭建Discuz-论坛" class="headerlink" title="搭建Discuz!论坛"></a>搭建Discuz!论坛</h2><p>​        为了检验LNMP动态网站环境是否配置妥当，可以使用在上面部署Discuz!系统，然后查看结果。如果能够在LNMP动态网站环境中成功安装使用Discuz!论坛系统，也就意味着这套架构是可用的。Discuz! X3.2是国内最常见的社区论坛系统，在经过十多年的研发后已经成为了全球成熟度最高、覆盖率最广的论坛网站系统之一。</p>
<p>​        Discuz! X3.2软件包的后缀是.zip格式，因此应当使用专用的unzip命令来进行解压。解压后会在当前目录中出现一个名为upload的文件目录，这里面保存的就是Discuz！论坛的系统程序。我们把Nginx服务程序网站根目录的内容清空后，就可以把这些这个目录中的文件都复制进去了。记得把Nginx服务程序的网站根目录的所有者和所属组修改为本地的www用户，并为其赋予755权限以便于能够读、写、执行该论坛系统内的文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 php-5.5.14]# cd /usr/local/src/</span><br><span class="line">[root@server222 src]# unzip Discuz_X3.2_SC_GBK.zip</span><br><span class="line">[root@server222 src]# rm -rf /usr/local/nginx/html/&#123;index.html,50x.html&#125;*</span><br><span class="line">[root@server222 src]# mv upload/* /usr/local/nginx/html/</span><br><span class="line">[root@server222 src]# chown -Rf www:www /usr/local/nginx/html</span><br><span class="line">[root@server222 src]# chmod -Rf 755 /usr/local/nginx/html</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 之后在浏览器输入<code>192.168.176.222/install</code></p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPeM2n.png" alt></p>
<blockquote>
<p>依次按照傻瓜式步骤下一步</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe4Mt.png" alt></p>
<blockquote>
<p>使用admin管理员账户登录</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/13/mPe1K0.png" alt></p>
<blockquote>
<p> 到此结束LNMP动态网站部署，如果您觉得不懂，可私信给我，后期将写一些部署docker容器虚拟化平台</p>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.linux--LNMP/" data-id="ck6akysgw003f8wu69v9ugsbx"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux运维/">linux运维</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>喜欢就打赏吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['面朝大海，春暖花开','愿你一生努力，一生被爱','想要的都拥有，得不到的都释怀'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>