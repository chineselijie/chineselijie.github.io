<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

<link rel="alternate" href="/atom.xml" title="Li Jie's blog" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/chineselijie"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover3.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Li Jie&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†/"
    >Linuxç³»ç»Ÿç£ç›˜ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.590Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="ç£ç›˜åŸºæœ¬æ¦‚è¿°"><a href="#ç£ç›˜åŸºæœ¬æ¦‚è¿°" class="headerlink" title="ç£ç›˜åŸºæœ¬æ¦‚è¿°"></a>ç£ç›˜åŸºæœ¬æ¦‚è¿°</h2><h3 id="ç£ç›˜åˆ†ç±»"><a href="#ç£ç›˜åˆ†ç±»" class="headerlink" title="ç£ç›˜åˆ†ç±»"></a>ç£ç›˜åˆ†ç±»</h3><ul>
<li>å›ºæ€ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoKrq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoas1.jpg" alt></p>
<ul>
<li>æœºæ¢°ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoOLq.jpg" alt></p>
<p><img src="https://s2.ax1x.com/2019/04/28/EMoxoT.jpg" alt></p>
<ul>
<li>æœåŠ¡å™¨ç¡¬ç›˜</li>
</ul>
<p><img src="https://s2.ax1x.com/2019/04/28/EMT9W4.jpg" alt></p>
<h3 id="å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹"><a href="#å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹"></a>å›ºæ€ç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>è¯»å†™é€Ÿåº¦å¿«</li>
<li>é˜²éœ‡æŠ—æ‘”æ€§</li>
<li>ä½åŠŸè€—</li>
<li>æ— å™ªéŸ³</li>
<li>å·¥ä½œæ¸©åº¦èŒƒå›´å¤§</li>
<li>è½»ä¾¿</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>å®¹é‡å°</li>
<li>å¯¿å‘½æœ‰é™åˆ¶</li>
<li>å”®ä»·é«˜</li>
</ul>
<h3 id="Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼"><a href="#Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼" class="headerlink" title="Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼"></a>Linuxä¸­ç£ç›˜å‘½ä»¤æ–¹å¼</h3><p>Linuxä¸­ç£ç›˜çš„å‘½åæ–¹å¼ä¸ç£ç›˜çš„æ¥å£æœ‰å…³ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¼ ç»ŸIDEæ¥å£ç¡¬ç›˜ï¼š<code>/dev/hd[a-z]</code></li>
<li>SCISIæ¥å£ç¡¬ç›˜ï¼š<code>/dev/sd[a-z]</code></li>
<li>è™šæ‹ŸåŒ–ç¡¬ç›˜ï¼š<code>/dev/vd[a-z]</code></li>
</ul>
<p>åœ¨è®¾å¤‡åç§°çš„å®šä¹‰è§„åˆ™å¦‚ä¸‹, å…¶ä»–çš„åˆ†åŒºå¯ä»¥ä»¥æ­¤ç±»æ¨<br>ç³»ç»Ÿçš„ç¬¬ä¸€å—SCSIæ¥å£çš„ç¡¬ç›˜åç§°ä¸º<code>/dev/sda</code><br>ç³»ç»Ÿçš„ç¬¬äºŒå—SCSIæ¥å£çš„ç¡¬ç›˜åç§°ä¸º<code>/dev/sdb</code><br>ç³»ç»Ÿä¸­åˆ†åŒºç”±æ•°å­—ç¼–å·è¡¨ç¤º, 1-4ç•™ç»™ä¸»åˆ†åŒºä½¿ç”¨å’Œæ‰©å±•åˆ†åŒº, é€»è¾‘åˆ†åŒºä»5å¼€å§‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€å—ç£ç›˜</span><br><span class="line">/dev/sda</span><br><span class="line">//ç¬¬ä¸€å—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">/dev/sda1</span><br><span class="line">//ç¬¬äºŒå—ç£ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">/dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="MBRä¸GPT"><a href="#MBRä¸GPT" class="headerlink" title="MBRä¸GPT"></a>MBRä¸GPT</h3><p>åœ¨ä½¿ç”¨æ–°ç£ç›˜ä¹‹å‰ï¼Œä½ å¿…é¡»å¯¹å…¶è¿›è¡Œåˆ†åŒºã€‚MBRï¼ˆMaster Boot Recordï¼‰å’ŒGPTï¼ˆGUID Partition Tableï¼‰æ˜¯åœ¨ç£ç›˜ä¸Šå­˜å‚¨åˆ†åŒºä¿¡æ¯çš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚è¿™äº›åˆ†åŒºä¿¡æ¯åŒ…å«äº†åˆ†åŒºä»å“ªé‡Œå¼€å§‹çš„ä¿¡æ¯ï¼Œè¿™æ ·æ“ä½œç³»ç»Ÿæ‰çŸ¥é“å“ªä¸ªæ‰‡åŒºæ˜¯å±äºå“ªä¸ªåˆ†åŒºçš„ï¼Œä»¥åŠå“ªä¸ªåˆ†åŒºæ˜¯å¯ä»¥å¯åŠ¨çš„ã€‚åœ¨ç£ç›˜ä¸Šåˆ›å»ºåˆ†åŒºæ—¶ï¼Œä½ å¿…é¡»åœ¨MBRå’ŒGPTä¹‹é—´åšå‡ºé€‰æ‹©</p>
<p>MBRæ˜¯Master Boot Recordçš„ç®€ç§°ï¼Œä¹Ÿå°±æ˜¯ä¸»å¼•å¯¼è®°å½•ï¼Œæ˜¯ä½äºç£ç›˜æœ€å‰è¾¹çš„ä¸€æ®µå¼•å¯¼ï¼ˆLoaderï¼‰ä»£ç ï¼Œä¸»è¦ç”¨æ¥å¼•å¯¼æ“ä½œç³»ç»Ÿçš„åŠ è½½ä¸å¯åŠ¨ï¼Œåœ¨ä¼ ç»Ÿ<a href="https://www.baidu.com/s?wd=ç¡¬ç›˜&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">ç¡¬ç›˜</a>åˆ†åŒºæ¨¡å¼ä¸­ï¼Œå¼•å¯¼æ‰‡åŒºæ˜¯æ¯ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰çš„ç¬¬ä¸€æ‰‡åŒºï¼Œè€Œä¸»å¼•å¯¼æ‰‡åŒºæ˜¯ç¡¬ç›˜çš„ç¬¬ä¸€æ‰‡åŒºã€‚ä¸ºäº†æ–¹ä¾¿è®¡ç®—æœºè®¿é—®ç¡¬ç›˜ï¼ŒæŠŠç¡¬ç›˜ä¸Šçš„ç©ºé—´åˆ’åˆ†æˆè®¸è®¸å¤šå¤šçš„åŒºå—ï¼ˆè‹±æ–‡å«sectorsï¼Œå³æ‰‡åŒºï¼‰ï¼Œç„¶åç»™æ¯ä¸ªåŒºå—åˆ†é…ä¸€ä¸ªåœ°å€ï¼Œç§°ä¸ºé€»è¾‘å—åœ°å€ï¼ˆå³LBAï¼‰ã€‚</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>MBRæ”¯æŒæœ€å¤§2TBç£ç›˜ï¼Œå®ƒæ— æ³•å¤„ç†å¤§äº2TBå®¹é‡çš„ç£ç›˜</li>
<li>åªæ”¯æŒæœ€å¤š4ä¸ªä¸»åˆ†åŒºã€‚è‹¥æƒ³è¦æ›´å¤šåˆ†åŒºï¼Œéœ€è¦åˆ›å»ºæ‰©å±•åˆ†åŒºï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºé€»è¾‘åˆ†åŒº</li>
</ol>
</blockquote>
<p>GPTç£ç›˜æ˜¯æŒ‡ä½¿ç”¨GUIDåˆ†åŒºè¡¨çš„ç£ç›˜ï¼ŒGUIDç£ç›˜åˆ†åŒºè¡¨ï¼ˆGUID Partition Tableï¼Œç¼©å†™ï¼šGPTï¼‰å…¶å«ä¹‰ä¸ºâ€œå…¨å±€å”¯ä¸€æ ‡è¯†ç£ç›˜åˆ†åŒºè¡¨â€ï¼Œæ˜¯ä¸€ä¸ªå®ä½“ç¡¬ç›˜çš„åˆ†åŒºè¡¨çš„ç»“æ„å¸ƒå±€çš„æ ‡å‡†ï¼Œ</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>GPTå¯¹ç£ç›˜å¤§å°æ²¡æœ‰é™åˆ¶</li>
<li>æœ€å¤šå¯ä»¥åˆ›å»º128ä¸ªåˆ†åŒº</li>
</ol>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p>MBRä¸GPTä¹‹é—´äº’ç›¸è½¬æ¢ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±</p>
</blockquote>
<p><a href="https://baike.baidu.com/item/%E4%B8%BB%E5%BC%95%E5%AF%BC%E8%AE%B0%E5%BD%95/7612638?fromtitle=mbr&fromid=10473976" target="_blank" rel="noopener">MBR</a></p>
<p><a href="https://baike.baidu.com/item/GPT/15413476" target="_blank" rel="noopener">GPT</a></p>
<p><a href="https://blog.csdn.net/u011198997/article/details/78734628" target="_blank" rel="noopener">MBRå’ŒGPTåˆ†åŒºåŒºåˆ«</a></p>
<h2 id="ç£ç›˜å®¹é‡æ£€æŸ¥"><a href="#ç£ç›˜å®¹é‡æ£€æŸ¥" class="headerlink" title="ç£ç›˜å®¹é‡æ£€æŸ¥"></a>ç£ç›˜å®¹é‡æ£€æŸ¥</h2><p>ä½¿ç”¨<code>df</code>å‘½ä»¤æŸ¥çœ‹ç£ç›˜å®¹é‡ï¼Œä¸åŠ å‚æ•°ä»¥kä¸ºå•ä½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">df -i   //æŸ¥çœ‹inodeä½¿ç”¨æƒ…å†µ</span><br><span class="line">df -h   //ä»¥Gæˆ–è€…Tæˆ–è€…Mäººæ€§åŒ–æ–¹å¼æ˜¾ç¤º</span><br><span class="line">df -T   //æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨dfå‘½ä»¤æŸ¥çœ‹ç£ç›˜ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»æ¯åˆ—ä»€ä¹ˆå«ä¹‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>lsblk</code>æŸ¥çœ‹åˆ†åŒºæƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  lsblk</span></span><br><span class="line">NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda             8:0    0   20G  0 disk</span><br><span class="line">â”œâ”€sda1          8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2          8:2    0   19G  0 part</span><br><span class="line">  â”œâ”€rhel-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  â””â”€rhel-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sr0            11:0    1  3.8G  0 rom  /mnt/cdrom</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>du</code>å‘½ä»¤æŸ¥çœ‹ç›®å½•æˆ–è€…æ–‡ä»¶çš„å®¹é‡ï¼Œä¸åŠ å‚æ•°ä»¥kä¸ºå•ä½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -sh opt  //äººæ€§åŒ–è¾“å‡ºæ˜¾ç¤ºå¤§å°</span><br><span class="line">-sï¼šåˆ—å‡ºæ€»å’Œ</span><br><span class="line">-hï¼šäººæ€§åŒ–æ˜¾ç¤ºå®¹é‡ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŸ¥çœ‹etcç›®å½•çš„å¤§å°</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># du -sh /etc</span></span><br><span class="line">43M     /etc</span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜åˆ†åŒº"><a href="#ç£ç›˜åˆ†åŒº" class="headerlink" title="ç£ç›˜åˆ†åŒº"></a>ç£ç›˜åˆ†åŒº</h2><p>åˆ†åŒºä¹‹å‰, éœ€è¦å…ˆç»™è™šæ‹Ÿæœºæ·»åŠ ä¸€å—ç£ç›˜ï¼Œä»¥ä¾¿äºæˆ‘ä»¬åšåç»­çš„å®éªŒvmwareè™šæ‹Ÿæœºï¼Œè¯·æŒ‰å¦‚ä¸‹è¿›è¡Œæ“ä½œ:</p>
<blockquote>
<p>1.æ‰¾åˆ°å¯¹åº”è™šæ‹Ÿä¸»æœºç‚¹å‡»å³é”®, é€‰æ‹©è®¾ç½®<br>2.åœ¨ç¡¬ä»¶å‘å¯¼é‡Œé¢ç‚¹å‡»æ·»åŠ æŒ‰é’®, åœ¨ç¡¬ä»¶ç±»å‹ä¸­é€‰ä¸­â€œç¡¬ç›˜â€, ç‚¹å‡»ä¸‹ä¸€æ­¥<br>3.ç£ç›˜ç±»å‹é€‰æ‹©é»˜è®¤, ç„¶ååˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜, è°ƒæ•´å¤§å°(ä¸è¦å‹¾é€‰ç«‹å³åˆ†é…ç©ºé—´)<br>4.æœ€åç‚¹å‡»ä¸‹ä¸€æ­¥, å®Œæˆå³å¯</p>
</blockquote>
<p><strong>åˆ†åŒºå·¥å…·æœ‰fdiskå’Œgdiskï¼Œå½“ç¡¬ç›˜å°äº2Tçš„æ—¶å€™æˆ‘ä»¬åº”è¯¥ç”¨fdiskæ¥åˆ†åŒºï¼Œè€Œå½“ç¡¬ç›˜å¤§äº2Tçš„æ—¶å€™åˆ™åº”ç”¨gdiskæ¥è¿›è¡Œåˆ†åŒº</strong></p>
<h3 id="fdiskåˆ†åŒº"><a href="#fdiskåˆ†åŒº" class="headerlink" title="fdiskåˆ†åŒº"></a>fdiskåˆ†åŒº</h3><blockquote>
<p>ç”Ÿäº§åˆ†åŒºå»ºè®®ï¼šå¦‚æ— ç‰¹æ®Šå¸Œæ±‚ï¼Œç›´æ¥ä½¿ç”¨æ•´ä¸ªç£ç›˜å³å¯ï¼Œæ— éœ€åˆ†åŒº</p>
</blockquote>
<blockquote>
<p>å­¦ä¹ åˆ†åŒºå»ºè®®ï¼š 1P+1E(3L) 2P+1E(2L) 3P+1E(1L) (ä»…é€‚ç”¨äºç»ƒä¹ )</p>
<p>1P:ä¸€ä¸ªä¸»åˆ†åŒº</p>
<p>1E:ä¸€ä¸ªæ‰©å±•åˆ†åŒº</p>
<p>3L:ä¸‰ä¸ªé€»è¾‘åˆ†åŒº</p>
</blockquote>
<blockquote>
<p> <strong>æœ¬ç« åˆ‡è®° å­¦ä¹ åˆ†åŒºåŠ å…¥ä¸¤å—ç£ç›˜ï¼Œè™šæ‹Ÿæœºä¸­ä¼šå‡ºç°/dev/sdbï¼Œsdcï¼Œè¯·ä½¿ç”¨sdbæˆ–è€…sdcæ¥ç»ƒä¹ ï¼Œæœ€å¥½fdiskåˆ†åŒºä½¿ç”¨/dev/sdbï¼Œgdiskåˆ†åŒºä½¿ç”¨/dev/sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda</span></span><br><span class="line"></span><br><span class="line">ç£ç›˜ /dev/sdaï¼š21.5 GB, 21474836480 å­—èŠ‚ï¼Œ41943040 ä¸ªæ‰‡åŒº</span><br><span class="line">Units = æ‰‡åŒº of 1 * 512 = 512 bytes</span><br><span class="line">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span><br><span class="line">ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x000bf37c</span><br><span class="line"></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk /dev/sda</span></span><br><span class="line">æ¬¢è¿ä½¿ç”¨ fdisk (util-linux 2.23.2)ã€‚</span><br><span class="line"></span><br><span class="line">æ›´æ”¹å°†åœç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æ‚¨å†³å®šå°†æ›´æ”¹å†™å…¥ç£ç›˜ã€‚</span><br><span class="line">ä½¿ç”¨å†™å…¥å‘½ä»¤å‰è¯·ä¸‰æ€ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šm     //è¾“å…¥mè·å–å¸®åŠ©</span><br><span class="line">å‘½ä»¤æ“ä½œ</span><br><span class="line">   a   toggle a bootable flag     //åˆ‡æ¢åˆ†åŒºå¯åŠ¨æ ‡è®°</span><br><span class="line">   b   edit bsd disklabel          //ç¼–è¾‘sdbç£ç›˜æ ‡ç­¾ </span><br><span class="line">   c   toggle the dos compatibility flag   //åˆ‡æ¢doså…¼å®¹æ¨¡å¼ </span><br><span class="line">   d   delete a partition          //åˆ é™¤åˆ†åŒº</span><br><span class="line">   g   create a new empty GPT partition table   //åˆ›å»ºæ–°çš„ç©ºGPTåˆ†åŒºè¡¨</span><br><span class="line">   G   create an IRIX (SGI) partition table     //åˆ›å»ºIRIXï¼ˆSGIï¼‰åˆ†åŒºè¡¨</span><br><span class="line">   l   list known partition types     //æ˜¾ç¤ºåˆ†åŒºç±»å‹</span><br><span class="line">   m   <span class="built_in">print</span> this menu               //æ˜¾ç¤ºå¸®åŠ©èœå•</span><br><span class="line">   n   add a new partition           //æ–°å»ºåˆ†åŒº </span><br><span class="line">   o   create a new empty DOS partition table    //åˆ›å»ºæ–°çš„ç©ºç™½åˆ†åŒºè¡¨    </span><br><span class="line">   p   <span class="built_in">print</span> the partition table         //æ˜¾ç¤ºåˆ†åŒºè¡¨çš„ä¿¡æ¯</span><br><span class="line">   q   quit without saving changes        //ä¸ä¿å­˜é€€å‡º</span><br><span class="line">   s   create a new empty Sun disklabel   //åˆ›å»ºæ–°çš„Sunç£ç›˜æ ‡ç­¾</span><br><span class="line">   t   change a partition<span class="string">'s system id      //ä¿®æ”¹åˆ†åŒºID,å¯ä»¥é€šè¿‡læŸ¥çœ‹id</span></span><br><span class="line"><span class="string">   u   change display/entry units           //ä¿®æ”¹å®¹é‡å•ä½,ç£æŸ±æˆ–æ‰‡åŒº</span></span><br><span class="line"><span class="string">   v   verify the partition table          //æ£€éªŒåˆ†åŒºè¡¨ </span></span><br><span class="line"><span class="string">   w   write table to disk and exit         //ä¿å­˜é€€å‡º </span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)    //æ‹“å±•åŠŸèƒ½</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºä¸»åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn   //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (0 primary, 0 extended, 4 free)    //ä¸»åˆ†åŒº</span></span><br><span class="line"><span class="string">   e   extended       //æ‰©å±•åˆ†åŒº    </span></span><br><span class="line"><span class="string">Select (default p): p      //é€‰æ‹©ä¸»åˆ†åŒº  </span></span><br><span class="line"><span class="string">åˆ†åŒºå· (1-4ï¼Œé»˜è®¤ 1)ï¼š     //é»˜è®¤å›è½¦</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (2048-41943039ï¼Œé»˜è®¤ä¸º 2048)ï¼š   //é»˜è®¤æ‰‡åŒºå›è½¦</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 2048</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (2048-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š+505M  //åˆ†é…505M</span></span><br><span class="line"><span class="string">åˆ†åŒº 1 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 505 MiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºæ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn    //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 0 extended, 3 free)</span></span><br><span class="line"><span class="string">   e   extended</span></span><br><span class="line"><span class="string">Select (default p): e     //åˆ›å»ºæ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">åˆ†åŒºå· (2-4ï¼Œé»˜è®¤ 2)ï¼š     //é»˜è®¤å›è½¦</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (1036288-41943039ï¼Œé»˜è®¤ä¸º 1036288)ï¼š   //é»˜è®¤æ‰‡åŒºå›è½¦</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 1036288</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (1036288-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š     //é»˜è®¤åˆ’åˆ†æ‰€æœ‰ç©ºé—´ç»™æ‰©å±•åˆ†åŒº</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 41943039</span></span><br><span class="line"><span class="string">åˆ†åŒº 2 å·²è®¾ç½®ä¸º Extended ç±»å‹ï¼Œå¤§å°è®¾ä¸º 19.5 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># åˆ›å»ºé€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn   //æ–°å»ºåˆ†åŒº</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (1 primary, 1 extended, 2 free)</span></span><br><span class="line"><span class="string">   l   logical (numbered from 5)</span></span><br><span class="line"><span class="string">Select (default p): l      //åˆ›å»ºé€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">æ·»åŠ é€»è¾‘åˆ†åŒº 5</span></span><br><span class="line"><span class="string">èµ·å§‹ æ‰‡åŒº (1038336-41943039ï¼Œé»˜è®¤ä¸º 1038336)ï¼š</span></span><br><span class="line"><span class="string">å°†ä½¿ç”¨é»˜è®¤å€¼ 1038336</span></span><br><span class="line"><span class="string">Last æ‰‡åŒº, +æ‰‡åŒº or +size&#123;K,M,G&#125; (1038336-41943039ï¼Œé»˜è®¤ä¸º 41943039)ï¼š+10G   //åˆ†é…10Gçš„é€»è¾‘åˆ†åŒº</span></span><br><span class="line"><span class="string">åˆ†åŒº 5 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 10 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æŸ¥çœ‹åˆ†åŒºåˆ›å»º</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç£ç›˜ /dev/sdaï¼š21.5 GB, 21474836480 å­—èŠ‚ï¼Œ41943040 ä¸ªæ‰‡åŒº</span></span><br><span class="line"><span class="string">Units = æ‰‡åŒº of 1 * 512 = 512 bytes</span></span><br><span class="line"><span class="string">æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span></span><br><span class="line"><span class="string">I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x000bf37c</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span></span><br><span class="line"><span class="string">/dev/sda1            2048     1036287      517120   83  Linux</span></span><br><span class="line"><span class="string">/dev/sda2         1036288    41943039    20453376    5  Extended</span></span><br><span class="line"><span class="string">/dev/sda5         1038336    22009855    10485760   83  Linux</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># ä¿å­˜åˆ†åŒº</span></span><br><span class="line"><span class="string">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Calling ioctl() to re-read partition table.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING: Re-reading the partition table failed with error 16: è®¾å¤‡æˆ–èµ„æºå¿™.</span></span><br><span class="line"><span class="string">The kernel still uses the old table. The new table will be used at</span></span><br><span class="line"><span class="string">the next reboot or after you run partprobe(8) or kpartx(8)</span></span><br><span class="line"><span class="string">æ­£åœ¨åŒæ­¥ç£ç›˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ£€æŸ¥ç£ç›˜æ˜¯å¦æ˜¯MBRåˆ†åŒºæ–¹å¼</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# fdisk -l /dev/sda | grep ç±»å‹</span></span><br><span class="line"><span class="string">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"># å®‰è£…parted, åˆ·æ–°å†…æ ¸ç«‹å³ç”Ÿæ•ˆ,æ— éœ€é‡å¯</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# yum -y install parted</span></span><br><span class="line"><span class="string">[root@zhoulijie ~]# partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h3 id="gdiskåˆ†åŒº"><a href="#gdiskåˆ†åŒº" class="headerlink" title="gdiskåˆ†åŒº"></a>gdiskåˆ†åŒº</h3><blockquote>
<p><strong>åœ¨è¿™é‡Œå¯ä»¥æŠŠåˆšæ‰åŠ å…¥çš„ç£ç›˜æ‹¿å‡ºæ¥ä½¿ç”¨ï¼š/dev/sdcï¼Œä¸‹é¢sdaéƒ½çš†æ˜¯æŒ‡ä»£sdc</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…gdiskå·¥å…·</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install gdisk</span></span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># gdisk /dev/sda</span></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): n       //åˆ›å»ºæ–°åˆ†åŒº</span><br><span class="line">Partition number (1-128, default 1):     //é»˜è®¤å›è½¦ </span><br><span class="line">First sector (34-41943006, default = 2048) or &#123;+-&#125;size&#123;KMGTP&#125;:    //é»˜è®¤æ‰‡åŒºå›è½¦</span><br><span class="line">Last sector (2048-41943006, default = 41943006) or &#123;+-&#125;size&#123;KMGTP&#125;: +505M   //åˆ†é…505Mç©ºé—´   </span><br><span class="line">Current <span class="built_in">type</span> is <span class="string">'Linux filesystem'</span></span><br><span class="line">Hex code or GUID (L to show codes, Enter = 8300):     //é»˜è®¤å›è½¦ </span><br><span class="line">Changed <span class="built_in">type</span> of partition to <span class="string">'Linux filesystem'</span></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): p    //æ‰“å°æŸ¥çœ‹</span><br><span class="line">Disk /dev/sda: 41943040 sectors, 20.0 GiB</span><br><span class="line">Logical sector size: 512 bytes</span><br><span class="line">Disk identifier (GUID): 2EFF9F0B-87D9-4140-9ECE-AFBE23BB0C81</span><br><span class="line">Partition table holds up to 128 entries</span><br><span class="line">First usable sector is 34, last usable sector is 41943006</span><br><span class="line">Partitions will be aligned on 2048-sector boundaries</span><br><span class="line">Total free space is 40908733 sectors (19.5 GiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1            2048         1036287   505.0 MiB   8300  Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (? <span class="keyword">for</span> <span class="built_in">help</span>): w   //ä¿å­˜åˆ†åŒº</span><br><span class="line"></span><br><span class="line">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span><br><span class="line">PARTITIONS!!</span><br><span class="line"></span><br><span class="line">Do you want to proceed? (Y/N): y       //ç¡®è®¤</span><br><span class="line">OK; writing new GUID partition table (GPT) to /dev/sda.</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç£ç›˜æ˜¯å¦æ˜¯gptæ ¼å¼</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fdisk -l /dev/sda | grep ç±»å‹</span></span><br><span class="line">WARNING: fdisk GPT support is currently new, and therefore <span class="keyword">in</span> an experimental phase. Use at your own discretion.</span><br><span class="line">ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šgpt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…parted, åˆ·æ–°å†…æ ¸ç«‹å³ç”Ÿæ•ˆ,æ— éœ€é‡å¯</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># yum -y install parted</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># partprobe /dev/sda</span></span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜æ ¼å¼åŒ–"><a href="#ç£ç›˜æ ¼å¼åŒ–" class="headerlink" title="ç£ç›˜æ ¼å¼åŒ–"></a>ç£ç›˜æ ¼å¼åŒ–</h2><p>ä½¿ç”¨<code>mkfs</code>å‘½ä»¤æ ¼å¼åŒ–ç£ç›˜ï¼Œåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkfså¸¸ç”¨çš„é€‰é¡¹æœ‰</span></span><br><span class="line">-b  //è®¾å®šæ•°æ®åŒºå—å ç”¨ç©ºé—´å¤§å°ï¼Œç›®å‰æ”¯æŒ1024ã€2048ã€4096 bytesæ¯ä¸ªå—ã€‚</span><br><span class="line">-t  //ç”¨æ¥æŒ‡å®šä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æ˜¯ext3ï¼Œext4, xfs</span><br><span class="line">-i  //è®¾å®šinodeçš„å¤§å°</span><br><span class="line">-N  //è®¾å®šinodeæ•°é‡ï¼Œé˜²æ­¢Inodeæ•°é‡ä¸å¤Ÿå¯¼è‡´ç£ç›˜ä¸è¶³</span><br><span class="line">-L  //é¢„è®¾è¯¥åˆ†åŒºçš„æ ‡ç­¾label</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¦–å…ˆä½¿ç”¨lsblkï¼Œåˆ—å‡ºç£ç›˜åˆ†åŒºæƒ…å†µ</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># lsblk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–æ•´ä¸ªsdbç£ç›˜ä¸ºext4æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨-tæŒ‡å®šæ–¹å¼åˆ›å»ºext4æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs -t ext4  /dev/sdb1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥æ ¼å¼åŒ–sdb1åˆ†åŒºä¸ºxfsæ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.xfs  /dev/sdb1</span></span><br></pre></td></tr></table></figure>

<h2 id="ç£ç›˜æŒ‚è½½"><a href="#ç£ç›˜æŒ‚è½½" class="headerlink" title="ç£ç›˜æŒ‚è½½"></a>ç£ç›˜æŒ‚è½½</h2><p>åœ¨ä¸Šé¢çš„å†…å®¹ä¸­è®²åˆ°äº†ç£ç›˜çš„åˆ†åŒºå’Œæ ¼å¼åŒ–, é‚£ä¹ˆæ ¼å¼åŒ–å®Œäº†å, å¦‚ä½•ä½¿ç”¨, è¿™å°±æ¶‰åŠåˆ°äº†æŒ‚è½½è¿™å—ç£ç›˜</p>
<blockquote>
<p>æŒ‚è½½åˆ†åŒºå‰éœ€è¦åˆ›å»ºæŒ‚è½½ç‚¹, æŒ‚è½½ç‚¹ä»¥ç›®å½•å½¢å¼å‡ºç°<br>å¦‚æœå¾€æŒ‚è½½ç‚¹ç›®å½•å†™å…¥æ•°æ®, å®é™…ä¸Šä¼šå†™å…¥åˆ°è¯¥åˆ†åŒº<br>æŒ‚è½½ç‚¹å»ºè®®æ˜¯ç©ºç›®å½•, ä¸æ˜¯ä¹Ÿä¸å½±å“æŒ‚è½½åˆ†åŒºçš„ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šéšè—åŸæœ‰çš„æ–‡ä»¶</p>
</blockquote>
<h3 id="ä¸´æ—¶æŒ‚è½½ç£ç›˜"><a href="#ä¸´æ—¶æŒ‚è½½ç£ç›˜" class="headerlink" title="ä¸´æ—¶æŒ‚è½½ç£ç›˜"></a>ä¸´æ—¶æŒ‚è½½ç£ç›˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼šmountæŒ‚è½½ç£ç›˜ï¼Œå®è´¨ä¸ºæ–‡ä»¶ç³»ç»ŸæŒ‡å®šè®¿é—®å…¥å£</span><br><span class="line">mount -t       //æŒ‡å®šæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ†åŒºï¼Œå¦‚ext3ï¼Œext4, xfs</span><br><span class="line">mount -a       //é‡æ–°è¯»å–/etc/fstabé…ç½®æ–‡ä»¶çš„æ‰€æœ‰åˆ†åŒº</span><br><span class="line">mount -o       //æŒ‡å®šæŒ‚è½½å‚æ•°</span><br><span class="line"></span><br><span class="line"><span class="comment"># fstabè¢«æŸåæƒ…å†µä¸‹,è®©åªè¯»æ–‡ä»¶ç³»ç»Ÿå¯å†™ï¼ˆæ­£å¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">[root@localhost ~]<span class="comment">#mount -o rwï¼Œremount /  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½/dev/sdb1è‡³db1ç›®å½•</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /db1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t xfs /dev/sdb1  /db1</span></span><br></pre></td></tr></table></figure>

<h3 id="æ°¸ä¹…æŒ‚è½½ç£ç›˜"><a href="#æ°¸ä¹…æŒ‚è½½ç£ç›˜" class="headerlink" title="æ°¸ä¹…æŒ‚è½½ç£ç›˜"></a>æ°¸ä¹…æŒ‚è½½ç£ç›˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨blkidå‘½ä»¤è·å–å„åˆ†åŒºçš„UUID</span><br><span class="line">[root@localhost ~]# blkid |grep &quot;sdb1&quot;</span><br><span class="line">/dev/sdb1: UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; TYPE=&quot;xfs&quot;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨UUIDæŒ‚è½½ç£ç›˜sdb1åˆ†åŒºè‡³äºdb1, ä¸´æ—¶æŒ‚è½½</span><br><span class="line">[root@localhost ~]# mount UUID=&quot;e271b5b2-b1ba-4b18-bde5-66e394fb02d9&quot; /db1</span><br><span class="line"></span><br><span class="line">//ä¹Ÿå¯ä»¥æŠŠä¸‹é¢è¿™è¡Œå†™åˆ°/etc/fstabä¸­ï¼Œæ°¸ä¹…æŒ‚è½½, å¼€æœºè‡ªåŠ¨æŒ‚è½½</span><br><span class="line">[root@localhost ~]# tail -1 /etc/fstab    </span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1 xfs  defaults 0  0</span><br><span class="line"></span><br><span class="line">//åŠ è½½fstabé…ç½®æ–‡ä»¶, åŒæ—¶æ£€æµ‹è¯­æ³•æ˜¯å¦æœ‰é”™è¯¯</span><br><span class="line">[root@localhost ~]# mount â€“a</span><br></pre></td></tr></table></figure>

<p><code>fstab</code>é…ç½®æ–‡ä»¶ä»‹ç»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/fstab</span><br><span class="line"></span><br><span class="line">//åˆ†åŒºæ ‡è¯†(UUIDæˆ–è®¾å¤‡å)                    æŒ‚è½½ç‚¹ æ–‡ä»¶ç±»å‹    æŒ‚è½½å‚æ•°    ä¸æ£€æŸ¥ ä¸å¤‡ä»½</span><br><span class="line">UUID=e271b5b2-b1ba-4b18-bde5-66e394fb02d9 /db1     xfs     defaults    0     0</span><br><span class="line"></span><br><span class="line">//æŒ‚è½½å‚æ•°, å¯å†™fstabé…ç½®æ–‡ä»¶, ä¹Ÿå¯ä»¥mountæ—¶ä½¿ç”¨-oå‚æ•°æŒ‡å®š</span><br><span class="line">å‚æ•°              å‚æ•°æ„ä¹‰                               ç³»ç»Ÿé»˜è®¤å€¼</span><br><span class="line">async           ç³»ç»Ÿæ¯éš”ä¸€æ®µæ—¶é—´æŠŠå†…å­˜æ•°æ®å†™å…¥ç£ç›˜ä¸­ï¼Œ</span><br><span class="line">sync            æ—¶æ—¶åŒæ­¥å†…å­˜å’Œç£ç›˜ä¸­æ•°æ®ï¼›</span><br><span class="line">suidï¼Œnosuid     å…è®¸/ä¸å…è®¸åˆ†åŒºæœ‰suidå±æ€§                suid</span><br><span class="line">rwï¼Œro           å¯ä»¥æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿæ˜¯åªè¯»(ro)æˆ–å¯å†™(rw)       rw</span><br><span class="line">execï¼Œnoexec     å…è®¸/ä¸å…è®¸å¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œï¼Œä¸è¦æŒ‚è½½æ ¹åˆ†åŒº    exec</span><br><span class="line">userï¼Œnouser     å…è®¸/ä¸å…è®¸rootå¤–çš„å…¶ä»–ç”¨æˆ·æŒ‚è½½åˆ†åŒº        nouser</span><br><span class="line">autoï¼Œnoauto     å¼€æœºè‡ªåŠ¨æŒ‚è½½/ä¸è‡ªåŠ¨æŒ‚è½½                    auto</span><br><span class="line">default         é»˜è®¤æ–‡ä»¶ç³»ç»ŸæŒ‚è½½è®¾ç½® rw, suid, dev, exec, auto, nouser, async</span><br><span class="line"></span><br><span class="line">//åŠ è½½æ‰€æœ‰é…ç½®</span><br><span class="line">[root@localhost ~]# mount -a</span><br></pre></td></tr></table></figure>

<h3 id="å¸è½½æŒ‚è½½ç£ç›˜"><a href="#å¸è½½æŒ‚è½½ç£ç›˜" class="headerlink" title="å¸è½½æŒ‚è½½ç£ç›˜"></a>å¸è½½æŒ‚è½½ç£ç›˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">umount -lf  //å¼ºåˆ¶å¸è½½æŒ‚è½½</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨ç«™ç‚¹ç›®å½•å¸è½½</span><br><span class="line">[root@localhost ~]# umount /db1</span><br><span class="line">//ä½¿ç”¨è®¾å¤‡åå¸è½½/dev/sdb1</span><br><span class="line">[root@localhost ~]# umount /dev/sdb1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//umountä¸èƒ½å¸è½½çš„æƒ…å†µ</span><br><span class="line">[root@localhost db1]# umount /db1  </span><br><span class="line">umount: /db1: device is busy.</span><br><span class="line">        (In some cases useful info about processes that use</span><br><span class="line">         the device is found by lsof(8) or fuser(1)</span><br><span class="line">       </span><br><span class="line">//å¦‚ä¸Šæƒ…å†µè§£å†³åŠæ³•æœ‰ä¸¤ç§, åˆ‡æ¢è‡³å…¶ä»–ç›®å½• æˆ–ä½¿ç”¨&apos;-l&apos;é€‰é¡¹å¼ºåˆ¶å¸è½½    </span><br><span class="line">[root@localhost db1]# umount -l /db1</span><br></pre></td></tr></table></figure>

<h2 id="å­¦ä»¥è‡´ç”¨ç¯èŠ‚"><a href="#å­¦ä»¥è‡´ç”¨ç¯èŠ‚" class="headerlink" title="å­¦ä»¥è‡´ç”¨ç¯èŠ‚"></a>å­¦ä»¥è‡´ç”¨ç¯èŠ‚</h2><blockquote>
<p>åˆ›å»º/mnt/cdromç›®å½•ï¼Œé¦–å…ˆä¸´æ—¶æŒ‚è½½å…‰ç›˜é•œåƒï¼Œå…‰ç›˜é•œåƒåœ¨/dev/cdrom</p>
<p>å…¶æ¬¡å¸è½½æŒ‚è½½ç£ç›˜ï¼Œç„¶åæ°¸ä¹…æŒ‚è½½ï¼Œå†™å‡ºè¯¦ç»†çš„å‘½ä»¤</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount /dev/cdrom /mnt/cdrom</span></span><br><span class="line">mount: /dev/sr0 å†™ä¿æŠ¤ï¼Œå°†ä»¥åªè¯»æ–¹å¼æŒ‚è½½</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># umount /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/fstab | tail -n 1</span></span><br><span class="line">/dev/cdrom       /mnt/cdrom       iso9660               defaults        0 0</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount -a</span></span><br><span class="line">mount: /dev/sr0 å†™ä¿æŠ¤ï¼Œå°†ä»¥åªè¯»æ–¹å¼æŒ‚è½½</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># df -Th</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ              ç±»å‹      å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/mapper/rhel-root xfs        17G  3.4G   14G   20% /</span><br><span class="line">devtmpfs              devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                 tmpfs     993M  5.9M  987M    1% /dev/shm</span><br><span class="line">tmpfs                 tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                 tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                 tmpfs     199M   28K  199M    1% /run/user/0</span><br><span class="line">/dev/sr0              iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br></pre></td></tr></table></figure>

<h2 id="äº¤æ¢åˆ†åŒºswap"><a href="#äº¤æ¢åˆ†åŒºswap" class="headerlink" title="äº¤æ¢åˆ†åŒºswap"></a>äº¤æ¢åˆ†åŒºswap</h2><p>äº¤æ¢åˆ†åŒºSWAPå°±æ˜¯LINUXä¸‹çš„è™šæ‹Ÿå†…å­˜åˆ†åŒº,å®ƒçš„ä½œç”¨æ˜¯åœ¨ç‰©ç†å†…å­˜ä½¿ç”¨å®Œä¹‹å,å°†ç£ç›˜ç©ºé—´(ä¹Ÿå°±æ˜¯SWAPåˆ†åŒº)è™šæ‹Ÿæˆå†…å­˜æ¥ä½¿ç”¨ã€‚</p>
<p>äº¤æ¢åˆ†åŒºä¸€èˆ¬æŒ‡å®šè™šæ‹Ÿå†…å­˜çš„å¤§å°ä¸ºå®é™…å†…å­˜çš„1~1.5å€ã€‚å¦‚æœå®é™…å†…å­˜è¶…è¿‡8GBï¼Œå¯ä»¥ç›´æ¥åˆ’åˆ†16GBç»™è™šæ‹Ÿå†…å­˜å³å¯ï¼Œå¦‚æœè™šæ‹Ÿå†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µï¼Œé¡»å¢åŠ ä¸€ä¸ªè™šæ‹Ÿç£ç›˜ï¼Œç”±äºä¸èƒ½ç»™åŸæœ‰çš„ç£ç›˜é‡æ–°åˆ†åŒºï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©æ–°å»ºã€‚</p>
<h3 id="åˆ›å»ºswapfile"><a href="#åˆ›å»ºswapfile" class="headerlink" title="åˆ›å»ºswapfile"></a>åˆ›å»ºswapfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1M count=1024</span></span><br><span class="line">//<span class="keyword">if</span>ï¼šæŒ‡å®šæº  ä¸€èˆ¬å†™/dev/zero</span><br><span class="line">//ofï¼šæŒ‡å®šç›®æ ‡</span><br><span class="line">//bsï¼šå®šä¹‰å—å¤§å°</span><br><span class="line">//countï¼šæ•°é‡</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€èˆ¬é€‚ç”¨äºåˆ¶ä½œå…‰ç›˜</span></span><br></pre></td></tr></table></figure>

<h3 id="æ ¼å¼åŒ–swapåˆ†åŒº"><a href="#æ ¼å¼åŒ–swapåˆ†åŒº" class="headerlink" title="æ ¼å¼åŒ–swapåˆ†åŒº"></a>æ ¼å¼åŒ–swapåˆ†åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkswap -f /opt/newdisk</span></span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 1048572 KiB</span><br><span class="line">æ— æ ‡ç­¾ï¼ŒUUID=f8ce4f29-2c01-4d93-8e9c-f1f7d7349526</span><br></pre></td></tr></table></figure>

<h3 id="æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ"><a href="#æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ" class="headerlink" title="æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ"></a>æ£€æµ‹å½“å‰swapåˆ†åŒºæƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br></pre></td></tr></table></figure>

<h3 id="å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ"><a href="#å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ" class="headerlink" title="å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ"></a>å¼€å¯æ–°å»ºçš„swapåˆ†åŒºæƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapon /opt/newdisk</span></span><br><span class="line">swapon: /opt/newdiskï¼šä¸å®‰å…¨çš„æƒé™ 0644ï¼Œå»ºè®®ä½¿ç”¨ 0600ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        959M         77M         24M        947M        765M</span><br><span class="line">Swap:          3.0G         16K        3.0G</span><br><span class="line">        <span class="comment"># æ­¤æ—¶æ­¤åˆ»è¿™é‡Œå¤šå‡ºæ¥1G</span></span><br></pre></td></tr></table></figure>

<h3 id="å…³é—­æ–°å»ºçš„swapåˆ†åŒº"><a href="#å…³é—­æ–°å»ºçš„swapåˆ†åŒº" class="headerlink" title="å…³é—­æ–°å»ºçš„swapåˆ†åŒº"></a>å…³é—­æ–°å»ºçš„swapåˆ†åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># swapoff /opt/newdisk</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># free -h</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G        958M         78M         24M        947M        766M</span><br><span class="line">Swap:          2.0G         16K        2.0G</span><br><span class="line">          <span class="comment"># è¿˜åŸåˆ°åŸæ¥çš„2G</span></span><br></pre></td></tr></table></figure>

<h2 id="ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹"><a href="#ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹" class="headerlink" title="ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹"></a>ç”Ÿäº§ç£ç›˜æ•…éšœæ¡ˆä¾‹</h2><p>Inodeè¢«å æ»¡ï¼Œå¯¼è‡´ç£ç›˜æœ‰å¯ç”¨çš„å‰©ä½™ç©ºé—´ä¹Ÿæ— æ³•ç»§ç»­ä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dd if=/dev/zero of=/opt/newdisk bs=1k count=1024</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkfs.ext4 -i 1024 /opt/newdisk</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /data</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t ext4 -o loop /opt/newdisk /data/</span></span><br><span class="line"></span><br><span class="line">//inodeè¢«å æ»¡</span><br><span class="line">[root@localhost ~]<span class="comment"># touch &#123;1..20000&#125;</span></span><br><span class="line">touch: cannot touch `19997<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `19998'</span>: No space left on device</span><br><span class="line">touch: cannot touch `19999<span class="string">': No space left on device</span></span><br><span class="line"><span class="string">touch: cannot touch `20000'</span>: No space left on device</span><br><span class="line"></span><br><span class="line">//inodeè¢«å æ»¡ï¼Œå‰©ä½™blockä¹Ÿæ˜¯æ— æ³•ç»§ç»­ä½¿ç”¨</span><br><span class="line">[root@localhost ~]<span class="comment"># df -i|grep data</span></span><br><span class="line">/opt/newdisk      1024  1024       0  100% /data</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h|grep data</span></span><br><span class="line">/opt/newdisk    891K   34K  806K   5% /data</span><br></pre></td></tr></table></figure>

<p>Blockç©ºé—´å³å°†è¢«å æ»¡, ä½†åˆ é™¤å¤§æ–‡ä»¶ä¹Ÿæ²¡æœ‰é‡Šæ”¾ç©ºé—´</p>
<blockquote>
<p>å‡è®¾ç°åœ¨çº¿ä¸Šæ­£åœ¨è¿è¡ŒNginxæœåŠ¡, Nginxäº§ç”Ÿçš„æ—¥å¿—å·²ç»è¾¾åˆ°äº†20ä¸ªG, ç£ç›˜çœ¼çœ‹å°±çœ‹æ²¾æ»¡äº†, è¯·é—®ä¸é‡å¯Nginxçš„æ–¹å¼å¦‚ä½•å¤„ç†</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//æ˜¯ä¼šåˆ é™¤æ–‡ä»¶, ä½†NginxæŒç»­å ç”¨ç€æ–‡ä»¶, æ‰€ä»¥ç©ºé—´å¹¶ä¸ä¼šè¢«é‡Šæ”¾</span><br><span class="line">rm -f access.log</span><br><span class="line"></span><br><span class="line">//æ­£ç¡®åšæ³•å¦‚ä¸‹, æ¸…ç©ºè¯¥æ–‡ä»¶å³å¯é‡Šæ”¾æ–‡ä»¶å†…å®¹</span><br><span class="line">&gt; access.log</span><br><span class="line"><span class="comment"># æ„æ€å°±æ˜¯echo â€œâ€ &gt; access.log</span></span><br><span class="line"><span class="comment">#  æ ‡å‡†è¦†ç›–è¾“å‡º</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å­ï¼š ç»™ç³»ç»Ÿæ–°å¢åŠ ä¸€ä¸ªäº¤æ¢åˆ†åŒº(swap)</span><br><span class="line"></span><br><span class="line">è€ƒè¯•é¢˜ç›®ï¼šä¸€èˆ¬æ˜¯è¦æ±‚æ–°å»ºä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”æŠŠåˆ†åŒºä½œä¸ºswapåˆ†åŒºä½¿ç”¨</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å†…å­˜å’Œäº¤æ¢åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µ</span><br><span class="line"><span class="comment"># free -m</span></span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:          1841        613       1227         16          0        258</span><br><span class="line">-/+ buffers/cache:        354       1486</span><br><span class="line">Swap:            0          0          0  &lt;--- æ²¡æœ‰äº¤æ¢åˆ†åŒº</span><br><span class="line"></span><br><span class="line"><span class="comment"># swapon -s  ä¹Ÿèƒ½ç”¨è¯¥å‘½ä»¤æŸ¥çœ‹ï¼Œåªæ˜¯é»˜è®¤ä¹Ÿæ˜¯æ²¡æœ‰äº¤æ¢åˆ†åŒºæ‰€æœ‰æ²¡æœ‰è¾“å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  -l /dev/sdb</span></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   83  Linux  &lt;---å‡†å¤‡æŠŠè¯¥åˆ†åŒºä½œä¸ºäº¤æ¢åˆ†åŒº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1ã€æ–°å»ºä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”æŠŠåˆ†åŒºç±»å‹æ›´æ”¹ä¸º82 </span><br><span class="line">    æ–°åˆ†åŒºæˆ‘ä»¬åœ¨ä¸Šé¢çš„ç»ƒä¹ å·²ç»å®Œæˆäº†ï¼Œæ‰€ä»¥æœ¬ä¾‹å­ä¸ç”¨åˆ†åŒºï¼Œè€Œæ˜¯éœ€è¦ä¿®æ”¹è¯¥åˆ†åŒºçš„ç±»å‹</span><br><span class="line"></span><br><span class="line"><span class="comment"># fdisk  /dev/sdb</span></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šl  åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„åˆ†åŒºç±»å‹å¯¹åº”çš„id</span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼št  ä¿®æ”¹åˆ†åŒºid</span><br><span class="line">åˆ†åŒºå· (1-5ï¼Œé»˜è®¤ 5)ï¼š2  ä¿®æ”¹ç¬¬2ä¸ªåˆ†åŒº</span><br><span class="line">Hex ä»£ç (è¾“å…¥ L åˆ—å‡ºæ‰€æœ‰ä»£ç )ï¼š82  ä¿®æ”¹æˆidä¸º82</span><br><span class="line">å·²å°†åˆ†åŒºâ€œLinuxâ€çš„ç±»å‹æ›´æ”¹ä¸ºâ€œLinux swap / Solarisâ€</span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šp</span><br><span class="line"></span><br><span class="line">   è®¾å¤‡ Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     2099199     1048576   83  Linux</span><br><span class="line">/dev/sdb2         2099200     6293503     2097152   82  Linux swap / Solaris &lt;---ä¿®æ”¹æˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw</span><br><span class="line"></span><br><span class="line">å¼ºçƒˆå»ºè®®ï¼š å¯¹åˆ†åŒºåšäº†ä¿®æ”¹åéƒ½åˆ·æ–°ä¸€ä¸‹</span><br><span class="line"><span class="comment"># partprobe  /dev/sdb</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2ã€æŠŠsdb2æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒº</span><br><span class="line"><span class="comment"># mkswap  /dev/sdb2</span></span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 2097148 KiB</span><br><span class="line">æ— æ ‡ç­¾ï¼ŒUUID=ba08eb90-2003-44e6-9769-9a9351aebb05</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3ã€å¯åŠ¨äº¤æ¢åˆ†åŒº</span><br><span class="line"><span class="comment"># swapon /dev/sdb2  æˆ–è€…  # swanon -a  å¯åŠ¨æ‰€æœ‰äº¤æ¢åˆ†åŒº</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹</span><br><span class="line"><span class="comment"># swapon -s</span></span><br><span class="line">æ–‡ä»¶å             ç±»å‹      å¤§å°  å·²ç”¨  æƒé™</span><br><span class="line">/dev/sdb2                               partition   2097148 0   -1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4ã€æŒä¹…åŒ–ä¿å­˜äº¤æ¢åˆ†åŒºçš„ä½¿ç”¨</span><br><span class="line"><span class="comment"># blkid /dev/sdb2</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">"ba08eb90-2003-44e6-9769-9a9351aebb05"</span> TYPE=<span class="string">"swap"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/fstab </span></span><br><span class="line">/dev/mapper/rhel-root   /                       xfs     defaults        0 0</span><br><span class="line">UUID=cb3299d6-16e0-4644-9686-27907eefb8f3 /boot                   xfs     defaults        0 0</span><br><span class="line">UUID=ba08eb90-2003-44e6-9769-9a9351aebb05  swap         swap    defaults  0 0</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/13.linux--linuxç³»ç»Ÿç£ç›˜ç®¡ç†/" data-id="ck7ooyal7003d4su6bzh2znhx"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-12.linux--æºç å®‰è£…åŒ…ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/12.linux--æºç å®‰è£…åŒ…ç®¡ç†/"
    >æºç å®‰è£…ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/12.linux--æºç å®‰è£…åŒ…ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.587Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="æºç åŒ…åŸºæœ¬æ¦‚è¿°"><a href="#æºç åŒ…åŸºæœ¬æ¦‚è¿°" class="headerlink" title="æºç åŒ…åŸºæœ¬æ¦‚è¿°"></a>æºç åŒ…åŸºæœ¬æ¦‚è¿°</h2><p>åœ¨linuxç¯å¢ƒä¸‹é¢å®‰è£…æºç åŒ…æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œåœ¨æ—©æœŸè¿ç»´ç®¡ç†å·¥ä½œå½“ä¸­ï¼Œå¤§éƒ¨åˆ†è½¯ä»¶éƒ½æ˜¯é€šè¿‡æºç å®‰è£…çš„ã€‚é‚£ä¹ˆå®‰è£…ä¸€ä¸ªæºç åŒ…ï¼Œæ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±æŠŠæºä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>æºç åŒ…çš„ç¼–è¯‘ç”¨åˆ°äº†linuxç³»ç»Ÿé‡Œçš„ç¼–è¯‘å™¨ï¼Œé€šå¸¸æºç åŒ…éƒ½æ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ï¼Œè¿™ä¹Ÿæ˜¯å› ä¸ºCè¯­è¨€ä¸ºlinuxä¸Šæœ€æ ‡å‡†çš„ç¨‹åºè¯­è¨€ã€‚Linuxä¸Šçš„Cè¯­è¨€ç¼–è¯‘å™¨å«åšgccï¼Œåˆ©ç”¨å®ƒå°±å¯ä»¥æŠŠCè¯­è¨€å˜æˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ‰€ä»¥å¦‚æœä½ çš„æœºå™¨ä¸Šæ²¡æœ‰å®‰è£…gccå°±æ²¡æœ‰åŠæ³•å»ç¼–è¯‘æºç ã€‚å¯ä»¥ä½¿ç”¨<code>yum -y install gcc</code>æ¥å®Œæˆå®‰è£…ã€‚</p>
<h2 id="æºç åŒ…çš„å¥½å¤„"><a href="#æºç åŒ…çš„å¥½å¤„" class="headerlink" title="æºç åŒ…çš„å¥½å¤„"></a>æºç åŒ…çš„å¥½å¤„</h2><ul>
<li>è‡ªå®šä¹‰ä¿®æ”¹æºä»£ç </li>
<li>å®šåˆ¶éœ€è¦çš„ç›¸å…³åŠŸèƒ½</li>
<li>æ–°ç‰ˆè½¯ä»¶ä¼˜å…ˆæ›´æ–°æºç </li>
</ul>
<h2 id="æºç åŒ…çš„è·å–"><a href="#æºç åŒ…çš„è·å–" class="headerlink" title="æºç åŒ…çš„è·å–"></a>æºç åŒ…çš„è·å–</h2><p>å®˜æ–¹ç½‘ç«™, å¯ä»¥è·å¾—æœ€æ–°çš„è½¯ä»¶åŒ…</p>
<p><a href="http://www.apache.org/" target="_blank" rel="noopener">Apacheå®˜æ–¹ç½‘ç«™</a> </p>
<p><a href="http://nginx.org/" target="_blank" rel="noopener">Nginxå®˜æ–¹ç½‘ç«™</a></p>
<p> <a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">Mysqlå®˜æ–¹ç½‘ç«™</a></p>
<p>ä¾‹å¦‚åœ¨nginxå®˜ç½‘ä¸Šä¸‹è½½nginxå®‰è£…åŒ…</p>
<ul>
<li>é¦–å…ˆæˆ‘ä»¬æå‰åœ¨windowsä¸Šé¢è¿›å…¥nginxç½‘ç«™ï¼Œæ‰¾åˆ°ä¸‹è½½ï¼Œæ‰¾æ‰“ä¸€ä¸ªåŒ…å³é”®ï¼Œé€‰æ‹©å¤åˆ¶é“¾æ¥åœ°å€</li>
<li>è¿›å…¥Linuxç³»ç»Ÿï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># wget</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å°†å¤åˆ¶çš„åœ°å€ç²˜è´´ä¸Šå»</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># wget http://nginx.org/download/nginx-1.14.2.tar.gz</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨å½“å‰ç›®å½•å°±å¯ä»¥lså‡ºæˆ‘ä»¬ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg       nginx-1.14.2.tar.gz  æ¨¡æ¿  å›¾ç‰‡  ä¸‹è½½  æ¡Œé¢</span><br><span class="line">initial-setup-ks.cfg  å…¬å…±                 è§†é¢‘  æ–‡æ¡£  éŸ³ä¹</span><br></pre></td></tr></table></figure>

<h2 id="æºç åŒ…çš„åˆ†ç±»"><a href="#æºç åŒ…çš„åˆ†ç±»" class="headerlink" title="æºç åŒ…çš„åˆ†ç±»"></a>æºç åŒ…çš„åˆ†ç±»</h2><ul>
<li>æºç æ ¼å¼ï¼ˆéœ€è¦ç¼–è¯‘å®‰è£…ï¼‰</li>
<li>äºŒè¿›åˆ¶æ ¼å¼ï¼ˆè§£å‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼‰</li>
</ul>
<h2 id="æºç åŒ…çš„å®‰è£…"><a href="#æºç åŒ…çš„å®‰è£…" class="headerlink" title="æºç åŒ…çš„å®‰è£…"></a>æºç åŒ…çš„å®‰è£…</h2><p>ç¼–è¯‘éœ€è¦ç¼–è¯‘ç¯å¢ƒï¼Œå¼€å‘ç¯å¢ƒï¼Œå¼€å‘åº“ï¼Œå¼€å‘å·¥å…·ã€‚ å¸¸ç”¨çš„ç¼–è¯‘ç¯å¢ƒæœ‰cã€c++ã€perlã€javaã€python5ç§ cç¯å¢ƒçš„ç¼–è¯‘å™¨ï¼šgccï¼ˆGNU C Complierï¼‰ c++ç¯å¢ƒçš„ç¼–è¯‘å™¨ï¼šg++ makeï¼šcã€c++çš„ç»Ÿä¸€é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œç¼–è¯‘æ—¶æœ‰å¯èƒ½è°ƒç”¨gccä¹Ÿæœ‰å¯èƒ½è°ƒç”¨g++ã€‚ä½¿ç”¨makefileæ–‡ä»¶å®šä¹‰makeæŒ‰ä½•ç§æ¬¡åºå»ç¼–è¯‘æºç¨‹åºæ–‡ä»¶ä¸­çš„æºç¨‹åº</p>
<p><strong>æºç å®‰è£…ä¸‰éƒ¨æ›²ï¼ˆå¸¸è§ï¼‰ï¼š</strong><br><strong>ç¬¬ä¸€æ­¥: ./configureï¼ˆå®šåˆ¶ç»„ä»¶ï¼‰</strong></p>
<blockquote>
<p>1.æŒ‡å®šå®‰è£…è·¯å¾„ï¼Œä¾‹å¦‚ â€“prefix=/opt/nginx-1.12<br>2.å¯ç”¨æˆ–ç¦ç”¨æŸé¡¹åŠŸèƒ½, ä¾‹å¦‚ â€“enable-ssl<br>3.å’Œå…¶å®ƒè½¯ä»¶å…³è”ï¼Œä¾‹å¦‚â€“with-pcre<br>4.æ£€æŸ¥å®‰è£…ç¯å¢ƒï¼Œä¾‹å¦‚æ˜¯å¦æœ‰ç¼–è¯‘å™¨ gccï¼Œæ˜¯å¦æ»¡è¶³è½¯ä»¶çš„ä¾èµ–éœ€æ±‚<br>5.æ£€æµ‹é€šè¿‡åç”ŸæˆMakefileæ–‡ä»¶</p>
</blockquote>
<p><strong>ç¬¬äºŒæ­¥: make</strong></p>
<blockquote>
<p>1.æ‰§è¡Œmakeå‘½ä»¤è¿›è¡Œç¼–è¯‘, å¯ä»¥ä½¿ç”¨-jæŒ‡å®šCPUæ ¸å¿ƒæ•°è¿›è¡Œç¼–è¯‘<br>2.æŒ‰Makefileæ–‡ä»¶è¿›è¡Œç¼–è¯‘, ç¼–è¯‘æˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶<br>3.ç”Ÿæˆå„ç±»æ¨¡å—å’Œä¸»ç¨‹åº</p>
</blockquote>
<p><strong>ç¬¬ä¸‰æ­¥: make install</strong></p>
<blockquote>
<p>1.æŒ‰Makefileå®šä¹‰å¥½çš„è·¯å¾„æ‹·è´è‡³å®‰è£…ç›®å½•ä¸­</p>
</blockquote>
<p>ä¸Šé¢ä»‹ç»çš„æºç ä¸‰éƒ¨æ›²ä¸èƒ½ç™¾åˆ†ç™¾é€šç”¨äºæ‰€æœ‰æºç åŒ…, ä¹Ÿå°±æ˜¯è¯´æºç åŒ…çš„å®‰è£…å¹¶éå­˜åœ¨æ ‡å‡†å®‰è£…æ­¥éª¤ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æºç å®‰è£…éƒ½æ˜¯ç±»ä¼¼çš„æ­¥éª¤</p>
<p><strong>å»ºè®®:</strong><br>æ‹¿åˆ°æºç åŒ…è§£å‹åï¼Œç„¶åè¿›å…¥åˆ°ç›®å½•æ‰¾ç›¸å…³çš„å¸®åŠ©æ–‡æ¡£ï¼Œé€šå¸¸ä¼šä»¥INSTALLæˆ–è€…READMEä¸ºæ–‡ä»¶å</p>
<h4 id="configureè„šæœ¬çš„åŠŸèƒ½"><a href="#configureè„šæœ¬çš„åŠŸèƒ½" class="headerlink" title="configureè„šæœ¬çš„åŠŸèƒ½"></a>configureè„šæœ¬çš„åŠŸèƒ½</h4><ul>
<li>è®©ç”¨æˆ·é€‰å®šç¼–è¯‘ç‰¹æ€§</li>
<li>æ£€æŸ¥ç¼–è¯‘ç¯å¢ƒæ˜¯å¦ç¬¦åˆç¨‹åºç¼–è¯‘çš„åŸºæœ¬éœ€è¦</li>
</ul>
<h4 id="æºç åŒ…ç¼–è¯‘äº‹ä¾‹"><a href="#æºç åŒ…ç¼–è¯‘äº‹ä¾‹" class="headerlink" title="æºç åŒ…ç¼–è¯‘äº‹ä¾‹"></a>æºç åŒ…ç¼–è¯‘äº‹ä¾‹</h4><blockquote>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ç•ª</p>
<p>åœ¨linuxä¸­ç¼–è¯‘nginx å¯åŠ¨nginxæœåŠ¡</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># tar -xf nginx-1.14.2.tar.gz</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cd nginx-1.14.2/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æºç å®‰è£…ä¸‰éƒ¨æ›²</li>
</ul>
<p><strong>ç¬¬ä¸€æ­¥: ./configure</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># ./configure</span></span><br><span class="line">checking <span class="keyword">for</span> OS</span><br><span class="line"> + Linux 3.10.0-693.el7.x86_64 x86_64</span><br><span class="line">checking <span class="keyword">for</span> C compiler ... not found</span><br><span class="line"></span><br><span class="line">./configure: error: C compiler cc is not found</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å“¦éœï¼Œå®Œè›‹    å‡ºå¾æœªæ·èº«å…ˆæ­»ã€‚é‚£ä¹ˆå¾€ä¸‹çœ‹å§</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è§£å†³æ–¹æ³•</span><br><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># yum install -y gcc gcc-c++ make</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å†æ¬¡æ‰§è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># ./configure</span></span><br><span class="line">........................çœç•¥ä¸€å¤§ç‰‡....................</span><br><span class="line"></span><br><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either <span class="built_in">disable</span> the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the <span class="built_in">source</span> with nginx by using --with-pcre=&lt;path&gt; option.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸‹é¢æ¥çœ‹è§£å†³åŠæ³•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># yum install -y pcre-devel</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å†æ¬¡æ‰§è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># ./configure</span></span><br><span class="line">........................çœç•¥ä¸€å¤§ç‰‡....................</span><br><span class="line"></span><br><span class="line">./configure: error: the HTTP gzip module requires the zlib library.</span><br><span class="line">You can either <span class="built_in">disable</span> the module by using --without-http_gzip_module</span><br><span class="line">option, or install the zlib library into the system, or build the zlib library</span><br><span class="line">statically from the <span class="built_in">source</span> with nginx by using --with-zlib=&lt;path&gt; option.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸‹é¢æ¥çœ‹è§£å†³åŠæ³•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># yum -y install zlib-devel</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p> å†æ¬¡æ‰§è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># ./configure</span></span><br><span class="line">........................çœç•¥ä¸€å¤§ç‰‡....................</span><br><span class="line"></span><br><span class="line">  nginx pid file: <span class="string">"/usr/local/nginx/logs/nginx.pid"</span></span><br><span class="line">  nginx error <span class="built_in">log</span> file: <span class="string">"/usr/local/nginx/logs/error.log"</span></span><br><span class="line">  nginx http access <span class="built_in">log</span> file: <span class="string">"/usr/local/nginx/logs/access.log"</span></span><br><span class="line">  nginx http client request body temporary files: <span class="string">"client_body_temp"</span></span><br><span class="line">  nginx http proxy temporary files: <span class="string">"proxy_temp"</span></span><br><span class="line">  nginx http fastcgi temporary files: <span class="string">"fastcgi_temp"</span></span><br><span class="line">  nginx http uwsgi temporary files: <span class="string">"uwsgi_temp"</span></span><br><span class="line">  nginx http scgi temporary files: <span class="string">"scgi_temp"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‡ºç°è¿™æ ·å°±è¡¨ç¤ºå®Œæˆï¼Œå…¶å®è¿˜æœ‰ä¸€ç§é”™è¯¯ï¼Œè¿™é‡Œç”±äºæˆ‘å¯èƒ½å®‰è£…openssl-devel</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: SSL modules require the OpenSSL library.</span><br><span class="line">You can either <span class="keyword">do</span> not <span class="built_in">enable</span> the modules, or install the OpenSSL </span><br><span class="line">library into the system, or build the OpenSSL library statically</span><br><span class="line">from the <span class="built_in">source</span> with nginx by using --with-openssl=&lt;path&gt; option.</span><br><span class="line"></span><br><span class="line">// è§£å†³åŠæ³•</span><br><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒæ­¥ï¼šmake</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># make</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸‰æ­¥:  make instal</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># make install</span></span><br><span class="line"></span><br><span class="line">// æ­¤æ—¶æœªçŸ¥æ˜¯å¦å®‰è£…å¥½ï¼Œå¯ä»¥ä½¿ç”¨<span class="built_in">echo</span> $?</span><br><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line"><span class="comment">## 0ä»£è¡¨æ²¡æœ‰é”™è¯¯ 1ä»£è¡¨é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯åŠ¨nginx</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># ls</span></span><br><span class="line">[root@zhoulijie nginx-1.14.2]<span class="comment"># cd objs/</span></span><br><span class="line">[root@zhoulijie objs]<span class="comment"># ./nginx</span></span><br><span class="line">[root@zhoulijie objs]<span class="comment"># ss -antl</span></span><br><span class="line">State      Recv-Q Send-Q Local Address:Port               Peer Address:Port     </span><br><span class="line">LISTEN     0      128          *:111                      *:*</span><br><span class="line">LISTEN     0      128          *:80                       *:*</span><br><span class="line"></span><br><span class="line"><span class="comment">## nginx 80ç«¯å£</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®éªŒæˆæœ</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/04/27/EKz4bQ.png" alt></p>
<h4 id="ç¼–è¯‘å®‰è£…æ³¨æ„äº‹é¡¹"><a href="#ç¼–è¯‘å®‰è£…æ³¨æ„äº‹é¡¹" class="headerlink" title="ç¼–è¯‘å®‰è£…æ³¨æ„äº‹é¡¹"></a>ç¼–è¯‘å®‰è£…æ³¨æ„äº‹é¡¹</h4><ul>
<li>å¦‚æœå®‰è£…æ—¶ä¸æ˜¯ä½¿ç”¨çš„é»˜è®¤è·¯å¾„ï¼Œåˆ™å¿…é¡»è¦ä¿®æ”¹PATHç¯å¢ƒå˜é‡ï¼Œä»¥èƒ½å¤Ÿè¯†åˆ«æ­¤ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ï¼›<ul>
<li>ä¿®æ”¹/etc/profileæ–‡ä»¶æˆ–åœ¨/etc/profile.d/ç›®å½•å»ºç«‹ä¸€ä¸ªä»¥.shä¸ºåç¼€çš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å®šä¹‰export PATH=$PATH:/path/to/somewhere</li>
</ul>
</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæœç´¢åº“æ–‡ä»¶çš„è·¯å¾„åªæœ‰/libï¼Œ/usr/lib<ul>
<li>å¢æ·»é¢å¤–åº“æ–‡ä»¶æœç´¢è·¯å¾„æ–¹æ³•ï¼š<ul>
<li>åœ¨/etc/ld.so.conf.d/ä¸­åˆ›å»ºä»¥.confä¸ºåç¼€åçš„æ–‡ä»¶ï¼Œè€ŒåæŠŠè¦å¢æ·»çš„è·¯å¾„ç›´æ¥å†™è‡³æ­¤æ–‡ä»¶ä¸­ã€‚æ­¤æ—¶åº“æ–‡ä»¶å¢æ·»çš„æœç´¢è·¯å¾„é‡å¯åæœ‰æ•ˆï¼Œè‹¥è¦ä½¿ç”¨å¢æ·»çš„è·¯å¾„ç«‹å³ç”Ÿæ•ˆåˆ™è¦ä½¿ç”¨ldconfigå‘½ä»¤</li>
</ul>
</li>
<li>ldconfigï¼šé€šçŸ¥ç³»ç»Ÿé‡æ–°æœç´¢åº“æ–‡ä»¶</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/ld.so.confå’Œ/etc/ls.so.conf.d/*.conf    //é…ç½®æ–‡ä»¶</span><br><span class="line">/etc/ld.so.cache            //ç¼“å­˜æ–‡ä»¶</span><br><span class="line">-v      //æ˜¾ç¤ºé‡æ–°æœç´¢åº“çš„è¿‡ç¨‹</span><br><span class="line">-p      //æ‰“å°å‡ºç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½å¹¶ç¼“å­˜åˆ°å†…å­˜ä¸­çš„å¯ç”¨åº“æ–‡ä»¶ååŠæ–‡ä»¶è·¯å¾„æ˜ å°„å…³ç³»</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤´æ–‡ä»¶ï¼šè¾“å‡ºç»™ç³»ç»Ÿ<ul>
<li>é»˜è®¤ï¼šç³»ç»Ÿåœ¨/usr/includeä¸­æ‰¾å¤´æ–‡ä»¶ï¼Œè‹¥è¦å¢æ·»å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œä½¿ç”¨é“¾æ¥è¿›è¡Œ</li>
</ul>
</li>
<li>manæ–‡ä»¶è·¯å¾„ï¼šå®‰è£…åœ¨â€“prefixæŒ‡å®šçš„ç›®å½•ä¸‹çš„manç›®å½•<ul>
<li>é»˜è®¤ï¼šç³»ç»Ÿåœ¨/usr/share/manä¸­æ‰¾manæ–‡ä»¶ã€‚æ­¤æ—¶å› ä¸ºç¼–è¯‘å®‰è£…çš„æ—¶å€™ä¸æ˜¯å®‰è£…åˆ°é»˜è®¤è·¯å¾„ä¸‹ï¼Œå¦‚æœè¦æŸ¥æ‰¾manæ–‡ä»¶åˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š<ul>
<li>man -M /path/to/man_dir command</li>
<li>åœ¨/etc/man.configæ–‡ä»¶ä¸­æ·»åŠ ä¸€æ¡MANPATH</li>
</ul>
</li>
</ul>
</li>
</ul>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/12.linux--æºç å®‰è£…åŒ…ç®¡ç†/" data-id="ck7ooyadq000y4su6iluhq3cz"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/"
    >ç½‘ç»œè¿›é˜¶ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.585Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h3 id="é“¾è·¯èšåˆ"><a href="#é“¾è·¯èšåˆ" class="headerlink" title="é“¾è·¯èšåˆ"></a>é“¾è·¯èšåˆ</h3><p>ç½‘å¡çš„é“¾è·¯èšåˆå°±æ˜¯å°†å¤šå—ç½‘å¡è¿æ¥èµ·æ¥ï¼Œå½“ä¸€å—ç½‘å¡æŸåï¼Œç½‘ç»œä¾æ—§å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢å› ä¸ºç½‘å¡æŸåå¸¦æ¥çš„æŸå¤±ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜ç½‘ç»œè®¿é—®é€Ÿåº¦ã€‚ </p>
<h3 id="æ¡¥æ¥ç½‘ç»œ"><a href="#æ¡¥æ¥ç½‘ç»œ" class="headerlink" title="æ¡¥æ¥ç½‘ç»œ"></a>æ¡¥æ¥ç½‘ç»œ</h3><p>æ¡¥æ¥ç½‘ç»œä¹Ÿå³ç½‘æ¡¥ï¼Œå¯åŸºäºMACåœ°å€åœ¨ç½‘ç»œé—´è½¬å‘æµé‡ã€‚ç½‘æ¡¥è¯†åˆ«å“ªäº›ä¸»æœºè¿æ¥åˆ°æ¯ä¸ªç½‘ç»œï¼Œæ„å»ºMACåœ°å€è¡¨ï¼Œç„¶åæ ¹æ®è¯¥è¡¨åšå‡ºåŒ…è½¬å‘å†³ç­–ã€‚</p>
<p>è½¯ä»¶ç½‘æ¡¥çš„æœ€å¸¸è§åº”ç”¨æ˜¯åœ¨è™šæ‹ŸåŒ–åº”ç”¨ç¨‹åºä¸­ï¼Œç”¨äºåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè™šæ‹ŸNICä¸­å…±äº«ä¸€ä¸ªç¡¬ä»¶NICã€‚</p>
<h3 id="é“¾è·¯èšåˆé…ç½®"><a href="#é“¾è·¯èšåˆé…ç½®" class="headerlink" title="é“¾è·¯èšåˆé…ç½®"></a>é“¾è·¯èšåˆé…ç½®</h3><h4 id="é…ç½®bondèšåˆé“¾è·¯"><a href="#é…ç½®bondèšåˆé“¾è·¯" class="headerlink" title="é…ç½®bondèšåˆé“¾è·¯"></a>é…ç½®bondèšåˆé“¾è·¯</h4><h4 id="é…ç½®bong0"><a href="#é…ç½®bong0" class="headerlink" title="é…ç½®bong0"></a>é…ç½®bong0</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">eth1        ethernet  å·²æ–­å¼€  --     </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="åˆ›å»ºbond0ï¼Œ-æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie"><a href="#åˆ›å»ºbond0ï¼Œ-æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie" class="headerlink" title="åˆ›å»ºbond0ï¼Œ æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie"></a>åˆ›å»ºbond0ï¼Œ æ¨¡å¼ä¸ºbalance-rrï¼Œåå­—ä¸ºzhoulijie</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond mode balance-rr con-name zhoulijie ifname bond0 ipv4.method manual ipv4.addresses 192.168.83.250/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2</span></span><br><span class="line">è¿æ¥â€œzhoulijieâ€(99fe45cb-5d4a-4288-b0b1-1fd2202d25e1) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0"></a>æ·»åŠ ç‰©ç†ç½‘å¡è‡³bond0</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj ifname eth0 master bond0</span></span><br><span class="line">è¿æ¥â€œzljâ€(4a185231-5752-4e60-b20d-92fce9ed90e2) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj1 ifname eth1 master bond0</span></span><br><span class="line">è¿æ¥â€œzlj1â€(2883fd9a-2ce9-4e51-bde2-679b3920fae5) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹bondé…ç½®ä¿¡æ¯"><a href="#æŸ¥çœ‹bondé…ç½®ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹bondé…ç½®ä¿¡æ¯"></a>æŸ¥çœ‹bondé…ç½®ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cat /proc/net/bonding/bond0</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: load balancing (round-robin)</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth1</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:71</span><br><span class="line">Slave queue ID: 0</span><br></pre></td></tr></table></figure>

<h5 id="å…³é—­eth0ç½‘å¡-æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸"><a href="#å…³é—­eth0ç½‘å¡-æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸" class="headerlink" title="å…³é—­eth0ç½‘å¡, æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸"></a>å…³é—­eth0ç½‘å¡, æµ‹è¯•bond0æ˜¯å¦æ­£å¸¸</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device disconnect eth0</span></span><br><span class="line">æˆåŠŸæ–­å¼€è®¾å¤‡ <span class="string">'eth0'</span>ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®bong1"><a href="#é…ç½®bong1" class="headerlink" title="é…ç½®bong1"></a>é…ç½®bong1</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">eth1        ethernet  å·²æ–­å¼€  --     </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie"><a href="#åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie" class="headerlink" title="åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie"></a>åˆ›å»ºbond1ï¼Œæ¨¡å¼ä¸ºactive-backupï¼Œåå­—ä¸ºzhoulijie</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bond con-name zhoulijie ifname bond1 mode active-backup ipv4.method manual ipv4.addresses 192.168.83.250/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2</span><br><span class="line">è¿æ¥â€œzhoulijieâ€(c4c7078e-f912-46fd-af84-6c414267a45b) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1"></a>æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³bond1</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj ifname eth0 master bond1</span></span><br><span class="line">è¿æ¥â€œzljâ€(280b5deb-e05f-45f7-b771-1c2a325b63c7) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type bond-slave con-name zlj1 ifname eth1 master bond1</span></span><br><span class="line">è¿æ¥â€œzlj1â€(d0c28c77-5808-43cc-86f2-f2aefda5304f) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="å¯ç”¨è¿æ¥"><a href="#å¯ç”¨è¿æ¥" class="headerlink" title="å¯ç”¨è¿æ¥"></a>å¯ç”¨è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zhoulijie</span></span><br><span class="line">æˆåŠŸæ¿€æ´»ï¼ˆä¸»æœåŠ¡å™¨ç­‰å¾…ä»æœåŠ¡å™¨ï¼‰è¿æ¥ï¼ˆD-Bus æ¿€æ´»è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/7ï¼‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zlj</span></span><br><span class="line">è¿æ¥å·²æˆåŠŸæ¿€æ´»ï¼ˆD-Bus æ´»åŠ¨è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/9ï¼‰</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection up zlj1</span></span><br><span class="line">è¿æ¥å·²æˆåŠŸæ¿€æ´»ï¼ˆD-Bus æ´»åŠ¨è·¯å¾„ï¼š/org/freedesktop/NetworkManager/ActiveConnection/10ï¼‰</span><br></pre></td></tr></table></figure>

<h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cat /proc/net/bonding/bond1</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup)</span><br><span class="line">Primary Slave: None</span><br><span class="line">Currently Active Slave: eth0</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth0</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:67</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">Slave Interface: eth1</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:ab:cc:71</span><br><span class="line">Slave queue ID: 0</span><br></pre></td></tr></table></figure>

<h5 id="åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡"><a href="#åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡" class="headerlink" title="åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡"></a>åœæ­¢eth0ç‰©ç†ç½‘å¡è®¾å¤‡</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device disconnect eth0</span></span><br><span class="line">æˆåŠŸæ–­å¼€è®¾å¤‡ <span class="string">'eth0'</span>ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢"><a href="#eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢" class="headerlink" title="eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢"></a>eth1ç‰©ç†ç½‘å¡è®¾å¤‡ä¼šè¿›è¡Œè‡ªåŠ¨åˆ‡æ¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># grep "Currently Active Slave" /proc/net/bonding/bond1</span></span><br><span class="line">Currently Active Slave: eth1</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®teamèšåˆé“¾è·¯"><a href="#é…ç½®teamèšåˆé“¾è·¯" class="headerlink" title="é…ç½®teamèšåˆé“¾è·¯"></a>é…ç½®teamèšåˆé“¾è·¯</h4><p><code>centos/rhce7</code>ä½¿ç”¨<code>teaming</code>å®ç°èšåˆé“¾è·¯,èƒ½å¤Ÿæä¾›ç½‘å¡ç»‘å®šä¹‹åçš„ç½‘ç»œååæ€§èƒ½,å¹¶ä¸”æä¾›ç½‘å¡çš„æ•…éšœåˆ‡æ¢å¤„ç†èƒ½åŠ›ã€‚<br><code>Team</code>æ˜¯åŸºäºä¸€ä¸ªå°å‹å†…æ ¸é©±åŠ¨å®ç°èšåˆé“¾è·¯ï¼Œåœ¨ç”¨æˆ·å±‚æä¾›<code>teamd</code>å‘½ä»¤å®ç°é“¾è·¯ç®¡ç†ã€‚</p>
<p><code>teamd</code>å¯ä»¥å®ç°ä»¥ä¸‹æ¨¡å¼çš„èšåˆé“¾è·¯</p>
<blockquote>
<p>broadcast å¹¿æ’­å®¹é”™<br>roundrobin è´Ÿè½½è½®è¯¢<br>activebackup ä¸»å¤‡(å¿…è€ƒ)<br>loadbalance è´Ÿè½½å‡è¡¡<br>lacp éœ€è¦äº¤æ¢æœºæ”¯æŒlacpåè®®</p>
</blockquote>
<h5 id="è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š"><a href="#è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š" class="headerlink" title="è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š"></a>è¯·ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼Œå›¾å½¢ç•Œé¢é…ç½®ä¸ç¨³å®š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type team con-name team0 ifname team0 config &apos;&#123;&quot;runner&quot;:&#123;&quot;name&quot;:&quot;activebackup&quot;&#125;&#125;&apos; ipv4.addresses 192.168.83.222/24 ipv4.gateway 192.168.83.2 ipv4.dns 192.168.83.2 ipv4.method manual</span><br><span class="line">è¿æ¥â€œteam0â€(80474187-7e56-4874-9d24-e228cb39b851) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0"><a href="#æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0" class="headerlink" title="æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0"></a>æ·»åŠ ç‰©ç†ç½‘å¡è¿æ¥è‡³team0</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type team-slave con-name team0-port1 ifname eth1 master team0</span></span><br><span class="line">è¿æ¥â€œteam0-port1â€(4c6539de-8ea3-43fc-beb1-598587a8c05f) å·²æˆåŠŸæ·»åŠ ã€‚</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection add type team-slave con-name team0-port2 ifname eth2 master team0</span></span><br><span class="line">è¿æ¥â€œteam0-port2â€(0798fb06-daee-4b5f-bd1f-8ad455964cb6) å·²æˆåŠŸæ·»åŠ ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="æ£€æŸ¥team0çŠ¶æ€"><a href="#æ£€æŸ¥team0çŠ¶æ€" class="headerlink" title="æ£€æŸ¥team0çŠ¶æ€"></a>æ£€æŸ¥team0çŠ¶æ€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# ping -I team0 192.168.83.222</span><br><span class="line">[root@zhoulijie ~]# teamdctl team0 state</span><br></pre></td></tr></table></figure>

<h5 id="æ–­æ‰åæ£€æµ‹"><a href="#æ–­æ‰åæ£€æµ‹" class="headerlink" title="æ–­æ‰åæ£€æµ‹"></a>æ–­æ‰åæ£€æµ‹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli dev disconnect eth1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># teamdctl team0 state</span></span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼"><a href="#åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼" class="headerlink" title="åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼"></a>åŠ¨æ€ä¿®æ”¹teamæ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å¯¼å‡ºé…ç½®è¿›è¡Œä¿®æ”¹ (man teamd.conf)</span><br><span class="line">[root@zhoulijie ~]# teamdctl team0 config dump &gt; /tmp/team.conf</span><br><span class="line">[root@zhoulijie ~]# vim /tmp/team.conf</span><br><span class="line"></span><br><span class="line">//ä»¥æœ€æ–°ä¿®æ”¹çš„é…ç½®é€‰é¡¹ä¿®æ”¹team0å±æ€§</span><br><span class="line">[root@zhoulijie ~]# nmcli con mod team0 team.config /tmp/team.conf</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹ä¹‹åéœ€è¦é‡å¯team0</span><br><span class="line">[root@zhoulijie ~]# nmcli connection down team0;nmcli connection up team0 </span><br><span class="line">[root@zhoulijie ~]# nmcli connection up team0-port1</span><br><span class="line">[root@zhoulijie ~]# nmcli connection up team0-port2</span><br></pre></td></tr></table></figure>

<h3 id="æ¡¥æ¥ç½‘ç»œé…ç½®"><a href="#æ¡¥æ¥ç½‘ç»œé…ç½®" class="headerlink" title="æ¡¥æ¥ç½‘ç»œé…ç½®"></a>æ¡¥æ¥ç½‘ç»œé…ç½®</h3><h5 id="åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1"><a href="#åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1" class="headerlink" title="åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1"></a>åˆ›å»ºæ¡¥æ¥ç½‘ç»œbr1</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bridge con-name br1 ifname br1 ipv4.addresses 192.168.83.222/24 ipv4.method manual</span><br></pre></td></tr></table></figure>

<h5 id="æ¡¥æ¥è‡³eth1"><a href="#æ¡¥æ¥è‡³eth1" class="headerlink" title="æ¡¥æ¥è‡³eth1"></a>æ¡¥æ¥è‡³eth1</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# nmcli connection add type bridge-slave con-name br1-port1 ifname eth1 master br1 nmcli connection add type bridge-slave con-name br1-port1 ifname eth1 master br1</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ping -I br1 192.168.83.1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># brctl show</span></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/11.linux--ç½‘ç»œè¿›é˜¶ç®¡ç†/" data-id="ck7ooya2p00024su6j9szyitc"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/"
    >ç½‘ç»œåŸºç¡€ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.580Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="ç½‘å¡å‘½å"><a href="#ç½‘å¡å‘½å" class="headerlink" title="ç½‘å¡å‘½å"></a>ç½‘å¡å‘½å</h2><h3 id="ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶"><a href="#ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶" class="headerlink" title="ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶"></a>ä¼ ç»Ÿç½‘å¡å‘½åæœºåˆ¶</h3><blockquote>
<p>ä¼ ç»Ÿå‘½åï¼š </p>
<p>ä»¥å¤ªç½‘eth[0,1,2,â€¦] </p>
<p>wlan[0,1,2,â€¦] </p>
</blockquote>
<h3 id="redhat7ç½‘å¡å‘½åæœºåˆ¶"><a href="#redhat7ç½‘å¡å‘½åæœºåˆ¶" class="headerlink" title="redhat7ç½‘å¡å‘½åæœºåˆ¶"></a>redhat7ç½‘å¡å‘½åæœºåˆ¶</h3><blockquote>
<p>systemdå¯¹ç½‘ç»œè®¾å¤‡çš„å‘½åæ–¹å¼ï¼š</p>
<ol>
<li>å¦‚æœFirmwareæˆ–BIOSä¸ºä¸»æ¿ä¸Šé›†æˆçš„è®¾å¤‡æä¾›çš„ç´¢å¼•ä¿¡æ¯å¯ç”¨ï¼Œä¸”å¯é¢„æµ‹ï¼Œåˆ™æ ¹æ®æ­¤ç´¢å¼•è¿›è¡Œå‘½åï¼Œä¾‹å¦‚eno1</li>
<li>å¦‚æœFirmwareæˆ–BIOSä¸ºPCI-Eæ‰©å±•æ§½æ‰€æä¾›çš„ç´¢å¼•ä¿¡æ¯å¯ç”¨ï¼Œä¸”å¯é¢„æµ‹ï¼Œåˆ™æ ¹æ®æ­¤ç´¢å¼•è¿›è¡Œå‘½åï¼Œä¾‹å¦‚ens1</li>
<li>å¦‚æœç¡¬ä»¶æ¥å£çš„ç‰©ç†ä½ç½®ä¿¡æ¯å¯ç”¨ï¼Œåˆ™æ ¹æ®æ­¤ä¿¡æ¯è¿›è¡Œå‘½åï¼Œä¾‹å¦‚enp2s0</li>
<li>å¦‚æœç”¨æˆ·æ˜¾å¼å¯åŠ¨ï¼Œä¹Ÿå¯æ ¹æ®MACåœ°å€è¿›è¡Œå‘½åï¼Œä¾‹å¦‚enx2387a1dc56</li>
<li>ä¸Šè¿°å‡ä¸å¯ç”¨æ—¶ï¼Œåˆ™ä½¿ç”¨ä¼ ç»Ÿå‘½åæœºåˆ¶</li>
</ol>
</blockquote>
<p>ä¸Šè¿°å‘½åæœºåˆ¶ä¸­ï¼Œæœ‰çš„éœ€è¦biosdevnameç¨‹åºçš„å‚ä¸ã€‚æ‰€ä»¥å¿…é¡»å®‰è£…biosdevnameç¨‹åºä¸”å¯ç”¨å®ƒã€‚</p>
<h3 id="ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼"><a href="#ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼" class="headerlink" title="ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼"></a>ç½‘ç»œæ¥å£åç§°ç»„æˆæ ¼å¼</h3><h3 id="ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹"><a href="#ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹" class="headerlink" title="ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹"></a>ç½‘å¡è®¾å¤‡çš„å‘½åè¿‡ç¨‹</h3><ol>
<li>udevï¼Œè¾…åŠ©å·¥å…·ç¨‹åº/lib/udev/rename_deviceä¼šæ ¹æ®/usr/lib/udev/rules.d/60-net.rulesä¸­çš„ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
<li>biosdevnameä¼šæ ¹æ®/usr/lib/udev/rules.d/71-biosdevname.rulesä¸­çš„ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
<li>é€šè¿‡udevæ£€æµ‹ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œæ ¹æ®/usr/lib/udev/rules.d/75-net-descriptionä¸­çš„å˜é‡ä¿¡æ¯è®¾å®šç½‘å¡åç§°</li>
</ol>
<h3 id="å›å½’ä¼ ç»Ÿå‘½å"><a href="#å›å½’ä¼ ç»Ÿå‘½å" class="headerlink" title="å›å½’ä¼ ç»Ÿå‘½å"></a>å›å½’ä¼ ç»Ÿå‘½å</h3><h5 id="ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># mv ifcfg-ens33 ifcfg-eth0</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim ifcfg-eth0</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth0  //æ­¤å¤„è¦æŠŠens33æ”¹æˆeth0</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth0  //æ­¤å¤„è¦æŠŠens33æ”¹æˆeth0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.83.140</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.83.2</span><br><span class="line">DNS1=192.168.83.2</span><br></pre></td></tr></table></figure>

<h5 id="ç¼–è¾‘-etc-default-grubé…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘-etc-default-grubé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘/etc/default/grubé…ç½®æ–‡ä»¶"></a>ç¼–è¾‘/etc/default/grubé…ç½®æ–‡ä»¶</h5><blockquote>
<p>åœ¨ä»¥GRUB_CMDLINE_LINUXå¼€å¤´çš„è¡Œå†…rhgbçš„å‰é¢åŠ ä¸Šnet.ifnames=0 biosdevname=0 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim /etc/default/grub</span></span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=<span class="string">"<span class="variable">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span></span><br><span class="line">GRUB_DEFAULT=saved</span><br><span class="line">GRUB_DISABLE_SUBMENU=<span class="literal">true</span></span><br><span class="line">GRUB_TERMINAL_OUTPUT=<span class="string">"console"</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">"crashkernel=auto rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap net.ifnames=0 biosdevname=0 rhgb quiet"</span></span><br><span class="line">GRUB_DISABLE_RECOVERY=<span class="string">"true"</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶"><a href="#ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶"></a>ä¸ºgrub2ç”Ÿæˆå…¶é…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># grub2-mkconfig -o /etc/grub2.cfg</span></span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-3.10.0-693.el7.x86_64</span><br><span class="line">Found initrd image: /boot/initramfs-3.10.0-693.el7.x86_64.img</span><br><span class="line">Found linux image: /boot/vmlinuz-0-rescue-fd0bcf5782d24ba5b903b175c35f328e</span><br><span class="line">Found initrd image: /boot/initramfs-0-rescue-fd0bcf5782d24ba5b903b175c35f328e.img</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h5 id="é‡å¯ç³»ç»Ÿ"><a href="#é‡å¯ç³»ç»Ÿ" class="headerlink" title="é‡å¯ç³»ç»Ÿ"></a>é‡å¯ç³»ç»Ÿ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure>

<h2 id="ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤"><a href="#ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤"></a>ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤</h2><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h3><h5 id="æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£"><a href="#æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£" class="headerlink" title="æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£"></a>æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ‰€æœ‰ç½‘ç»œæ¥å£</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 694  bytes 64096 (62.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 435  bytes 53145 (51.8 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€"><a href="#ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€" class="headerlink" title="ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€"></a>ä»…æŸ¥çœ‹å•ä¸ªç½‘å¡çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig eth0</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 726  bytes 66886 (65.3 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 453  bytes 56481 (55.1 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯-åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨"><a href="#æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯-åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯, åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨"></a>æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€ä¿¡æ¯, åŒ…æ‹¬ç¦ç”¨å’Œå¯ç”¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ifconfig -a</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.83.140  netmask 255.255.255.0  broadcast 192.168.83.255</span><br><span class="line">        inet6 fe80::20c:29ff:feab:cc67  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ab:cc:67  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 763  bytes 70122 (68.4 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 475  bytes 60789 (59.3 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 18  bytes 1624 (1.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0-nic: flags=4098&lt;BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 52:54:00:f0:f8:b0  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<h5 id="ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹"><a href="#ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹" class="headerlink" title="ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹"></a>ç½‘å¡é…ç½®ä¿¡æ¯å«ä¹‰å¦‚ä¸‹</h5><blockquote>
<p> UP: ç½‘å¡å¤„äºæ´»åŠ¨çŠ¶æ€</p>
<p> BROADCAST: æ”¯æŒå¹¿æ’­</p>
<p> RUNNING: ç½‘çº¿å·²æ¥å…¥</p>
<p> MULTICAST: æ”¯æŒç»„æ’­</p>
<p> MTU: æœ€å¤§ä¼ è¾“å•å…ƒ(å­—èŠ‚),å³æ­¤æ¥å£ä¸€æ¬¡æ‰€èƒ½ä¼ è¾“çš„æœ€å¤§å°åŒ…</p>
<p> inet: æ˜¾ç¤ºIPv4åœ°å€è¡Œ</p>
<p> inet6: æ˜¾ç¤ºIPv6åœ°å€è¡Œ</p>
<p>link/enther: æŒ‡è®¾å¤‡ç¡¬ä»¶(MAC)åœ°å€</p>
<p> txqueuelen: ä¼ è¾“ç¼“å­˜åŒºé•¿åº¦å¤§å°</p>
<p>RX packets: æ¥æ”¶çš„æ•°æ®åŒ…</p>
<p>TX packets: å‘é€çš„æ•°æ®åŒ…</p>
<p>errors: æ€»çš„æ”¶åŒ…çš„é”™è¯¯æ•°é‡</p>
<p>dropped: ç”±äºå„ç§åŸå› , å¯¼è‡´æ‹·è´åœ¨å†…å­˜è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒ</p>
<p>collisions: ç½‘ç»œä¿¡å·å†²çªæƒ…å†µ, å€¼ä¸ä¸º0åˆ™å¯èƒ½å­˜åœ¨ç½‘ç»œæ•…éšœ</p>
</blockquote>
<h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><blockquote>
<p>//è¯­æ³•ï¼šip [ OPTIONS ] OBJECT { COMMAND | help }<br>OBJECTï¼š<br>    linkï¼šç½‘ç»œæ¥å£å±æ€§<br>    addrï¼šåè®®åœ°å€<br>    routeï¼šè·¯ç”± </p>
</blockquote>
<h5 id="æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€"><a href="#æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€"></a>æŸ¥çœ‹ç½‘ç»œæœ‰æ¥å£åœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip link show</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯"><a href="#æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯"></a>æ˜¾ç¤ºæŠ¥æ–‡ç»Ÿè®¡ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip -s link show</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    1624       18       0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    1624       18       0       0       0       0</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    35806      380      0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    27393      240      0       0       0       0</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast master virbr0 state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:f0:f8:b0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast</span><br><span class="line">    0          0        0       0       0       0</span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns</span><br><span class="line">    0          0        0       0       0       0</span><br></pre></td></tr></table></figure>

<h5 id="å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip-link-set-DEV-up-down"><a href="#å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip-link-set-DEV-up-down" class="headerlink" title="å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip link set DEV {up|down}"></a>å¯ç”¨æˆ–ç¦ç”¨ç½‘ç»œæ¥å£ip link set DEV {up|down}</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip link set lo down</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip link set lo up</span></span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€"><a href="#æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€"></a>æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ IPåœ°å€"><a href="#æ·»åŠ IPåœ°å€" class="headerlink" title="æ·»åŠ IPåœ°å€"></a>æ·»åŠ IPåœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr add 192.168.83.141/24 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 192.168.83.141/24 scope global secondary eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h5 id="åˆ é™¤IPåœ°å€"><a href="#åˆ é™¤IPåœ°å€" class="headerlink" title="åˆ é™¤IPåœ°å€"></a>åˆ é™¤IPåœ°å€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr del 192.168.83.141/24 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ip addr show eth0</span></span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ab:cc:67 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.83.140/24 brd 192.168.83.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:feab:cc67/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±ç®¡ç†"><a href="#è·¯ç”±ç®¡ç†" class="headerlink" title="è·¯ç”±ç®¡ç†"></a>è·¯ç”±ç®¡ç†</h3><blockquote>
<p>ip routeï¼šrouting table management</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ è·¯ç”±ï¼šip route add TARGET via GW dev IFACE src SOURCE_IP</span><br><span class="line">    TARGETï¼š</span><br><span class="line">        ä¸»æœºè·¯ç”±ï¼šIP</span><br><span class="line">        ç½‘ç»œè·¯ç”±ï¼šNETWORK/MASK </span><br><span class="line">        </span><br><span class="line">//åˆ é™¤è·¯ç”±ï¼šip route del TARGET</span><br><span class="line">    TARGETï¼š</span><br><span class="line">        ä¸»æœºè·¯ç”±ï¼šIP</span><br><span class="line">        ç½‘ç»œè·¯ç”±ï¼šNETWORK/MASK</span><br><span class="line">                        </span><br><span class="line">//æŸ¥çœ‹è·¯ç”±ï¼šip route show</span><br><span class="line"></span><br><span class="line">//åˆ·æ–°è·¯ç”±è¡¨ï¼šip route flush</span><br><span class="line">    [dev IFACE]</span><br><span class="line">    [via PREFIX]</span><br></pre></td></tr></table></figure>



<h3 id="route"><a href="#route" class="headerlink" title="route"></a>route</h3><p>Linuxä¸»æœºä¹‹é—´æ˜¯ä½¿ç”¨IPè¿›è¡Œé€šä¿¡, å‡è®¾Aä¸»æœºå’ŒBä¸»æœºåŒåœ¨ä¸€ä¸ªç½‘æ®µå†…ä¸”ç½‘å¡éƒ½å¤„äºæ¿€æ´»çŠ¶æ€, åˆ™Aå…·å¤‡å’ŒBç›´æ¥é€šä¿¡çš„èƒ½åŠ›, ä½†å¦‚æœAä¸»æœºå’ŒBä¸»æœºå¤„äºä¸¤ä¸ªä¸åŒçš„ç½‘æ®µ, åˆ™Aå¿…é¡»é€šè¿‡è·¯ç”±å™¨æ‰èƒ½å’ŒBé€šä¿¡, è·¯ç”±å™¨å±äºITè®¾å¤‡çš„åŸºç¡€è®¾æ–½, æ¯ä¸€ä¸ªç½‘æ®µéƒ½åº”è¯¥è‡³å°‘æœ‰ä¸€ä¸ªç½‘å…³ </p>
<h5 id="æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨"><a href="#æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨" class="headerlink" title="æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨"></a>æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         gateway         0.0.0.0         UG    100    0        0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U     100    0        0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯"><a href="#ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯" class="headerlink" title="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯"></a>ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºå„ä¸»æœºæˆ–ç«¯å£ç­‰ç›¸å…³ä¿¡æ¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route -n</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.83.2    0.0.0.0         UG    100    0        0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U     100    0        0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¢åŠ è·¯ç”±<br>è¯­æ³•ï¼šroute add [-net|-host] target [netmask Nm][gw Gw]  [[dev] If]</p>
</blockquote>
<h5 id="å¢åŠ ç½‘æ®µè·¯ç”±"><a href="#å¢åŠ ç½‘æ®µè·¯ç”±" class="headerlink" title="å¢åŠ ç½‘æ®µè·¯ç”±"></a>å¢åŠ ç½‘æ®µè·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route add -net 192.168.83.0/24 gw 192.168.83.2 dev eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># route add -net 0.0.0.0 gw 192.168.83.2 dev eth0</span></span><br></pre></td></tr></table></figure>

<h5 id="å¢åŠ ä¸»æœºè·¯ç”±"><a href="#å¢åŠ ä¸»æœºè·¯ç”±" class="headerlink" title="å¢åŠ ä¸»æœºè·¯ç”±"></a>å¢åŠ ä¸»æœºè·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route add -host 192.168.83.144 gw 192.168.83.2</span></span><br></pre></td></tr></table></figure>

<h5 id="åˆ é™¤è·¯ç”±"><a href="#åˆ é™¤è·¯ç”±" class="headerlink" title="åˆ é™¤è·¯ç”±"></a>åˆ é™¤è·¯ç”±</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># route del -net 192.168.83.0/24</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># route del -net 0.0.0.0/0 gw 192.168.83.2</span></span><br></pre></td></tr></table></figure>

<h3 id="hostnameä¸hostnamectl"><a href="#hostnameä¸hostnamectl" class="headerlink" title="hostnameä¸hostnamectl"></a>hostnameä¸hostnamectl</h3><p>ç”Ÿäº§ç¯å¢ƒä¸­å¿…é¡»é…ç½®ä¸»æœºå,åŒæ—¶ä¸»æœºåä¹Ÿéœ€è¦éµå¾ªä¸€å®šçš„è§„èŒƒ, æ¯”å¦‚: </p>
<table>
<thead>
<tr>
<th align="center">åœ°åŒº</th>
<th align="center">é¡¹ç›®</th>
<th align="center">ä¸šåŠ¡</th>
<th align="center">æœåŠ¡</th>
<th align="center">èŠ‚ç‚¹</th>
<th align="center">åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td align="center">wuhan</td>
<td align="center">Supermarket</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.1</td>
</tr>
<tr>
<td align="center">guangzhou</td>
<td align="center">Bank</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.111</td>
</tr>
<tr>
<td align="center">shanghai</td>
<td align="center">Street</td>
<td align="center">Library file</td>
<td align="center">mysql</td>
<td align="center">master01</td>
<td align="center">192.168.83.10</td>
</tr>
</tbody></table>
<h5 id="æŸ¥çœ‹ä¸»æœºå"><a href="#æŸ¥çœ‹ä¸»æœºå" class="headerlink" title="æŸ¥çœ‹ä¸»æœºå"></a>æŸ¥çœ‹ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># hostname</span></span><br><span class="line">zhoulijie</span><br></pre></td></tr></table></figure>

<h5 id="hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå"><a href="#hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå" class="headerlink" title="hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå"></a>hostnameä¸´æ—¶ä¿®æ”¹ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># hostname 123</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># bash</span></span><br><span class="line">[root@123 ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h5 id="è®¾ç½®æ°¸ä¹…ä¸»æœºå"><a href="#è®¾ç½®æ°¸ä¹…ä¸»æœºå" class="headerlink" title="è®¾ç½®æ°¸ä¹…ä¸»æœºå"></a>è®¾ç½®æ°¸ä¹…ä¸»æœºå</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@123 ~]<span class="comment"># vim /etc/hostname</span></span><br><span class="line">[root@123 ~]<span class="comment"># cat /etc/hostname</span></span><br><span class="line">zhoulijie</span><br><span class="line">[root@123 ~]<span class="comment"># bash</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨Linuxä¸­ä»¥å‘½ä»¤æ–¹å¼ä¿®æ”¹ç½‘ç»œé…ç½®åªåœ¨å½“å‰çŠ¶æ€æœ‰æ•ˆï¼Œé‡å¯åå°†å¤±æ•ˆã€‚æ•…è‹¥æƒ³ä½¿ä¿®æ”¹çš„é…ç½®é‡å¯åä¾ç„¶æœ‰æ•ˆï¼Œåˆ™å¿…é¡»ç¼–è¾‘é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®çš„ä¿®æ”¹ã€‚ </p>
</blockquote>
<h2 id="ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶"></a>ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶</h2><h3 id="ç½‘ç»œé…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œé…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œé…ç½®æ–‡ä»¶"></a>ç½‘ç»œé…ç½®æ–‡ä»¶</h3><blockquote>
<p>ç½‘ç»œé…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NETWORKING=&#123;yes|no&#125;ï¼šè®¾å®šæ•´ä¸ªç³»ç»Ÿæ˜¯å¦å¯ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œè‹¥è®¾ä¸ºnoï¼Œåˆ™ä¸è®ºç½‘å¡å¦‚ä½•è®¾ç½®éƒ½ä¸èƒ½ä½¿ç”¨ç½‘ç»œåŠŸèƒ½ã€‚</span><br><span class="line">HOSTNAMEï¼šè®¾ç½®ä¸»æœºå</span><br></pre></td></tr></table></figure>

<h4 id="ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶"><a href="#ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶" class="headerlink" title="ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶"></a>ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶</h4><p>ç½‘ç»œæ¥å£å³ç½‘å¡ï¼Œå…¶é…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/sysconfig/network-scripts/ifcfg-INTERFACE_NAME</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">TYPE=Ethernet                //æ¥å£ç±»å‹ã€‚å¸¸è§çš„æ¥å£ç±»å‹æœ‰ï¼šEthernetï¼ŒBridge</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static             //å¼•å¯¼åè®®ï¼Œå¯é€‰å€¼æœ‰ï½›staticï½œnoneï½œdhcpï½œbootpï½ã€‚å¦‚æœè¦ä½¿ç”¨é™æ€åœ°å€ï¼Œä½¿ç”¨staticæˆ–noneéƒ½å¯ä»¥</span><br><span class="line">DEFROUTE=yes                //å°†æ¥å£è®¾å®šä¸ºé»˜è®¤è·¯ç”±[yes|no]</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth0                   //è¿æ¥åç§°</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546     //è®¾å¤‡çš„æƒŸä¸€æ ‡è¯†</span><br><span class="line">DEVICE=eth0                 //å…³è”çš„è®¾å¤‡åç§°ï¼Œè¦ä¸æ–‡ä»¶åçš„ååŠéƒ¨&quot;INTERFACE_NAME&quot;ä¿æŒä¸€è‡´</span><br><span class="line">ONBOOT=yes                  //åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶æ˜¯å¦è‡ªåŠ¨æ¿€æ´»æ­¤ç½‘ç»œæ¥å£ï¼Œå¯é€‰å€¼æœ‰&#123; yes ï½œ no &#125;</span><br><span class="line">IPADDR=192.168.83.140       //å›ºå®šIPåœ°å€</span><br><span class="line">NETMASK=255.255.255.0       //å­ç½‘æ©ç </span><br><span class="line">GATEWAY=192.168.83.2        //é»˜è®¤ç½‘å…³</span><br><span class="line">DNS1=192.168.83.2           //ç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨æŒ‡å‘(è¿˜å¯ä»¥æœ‰DNS2ã€DNS3)</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±é…ç½®æ–‡ä»¶"><a href="#è·¯ç”±é…ç½®æ–‡ä»¶" class="headerlink" title="è·¯ç”±é…ç½®æ–‡ä»¶"></a>è·¯ç”±é…ç½®æ–‡ä»¶</h3><p>è·¯ç”±é…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/sysconfig/network-scripts/route-INTERFACE_NAME</code></p>
<p>æ·»åŠ æ ¼å¼1ï¼š</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">192.168.83.0/24 via 192.168.83.2</span><br></pre></td></tr></table></figure></code></pre><p>æ·»åŠ æ ¼å¼2ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cat /etc/sysconfig/network-scripts/route-eth0</span></span><br><span class="line">ADDRESS0=192.168.83.0</span><br><span class="line">NETMASK0=255.255.255.0</span><br><span class="line">GATEWAY0=192.168.83.2</span><br></pre></td></tr></table></figure>

<h3 id="DNSé…ç½®æ–‡ä»¶"><a href="#DNSé…ç½®æ–‡ä»¶" class="headerlink" title="DNSé…ç½®æ–‡ä»¶"></a>DNSé…ç½®æ–‡ä»¶</h3><p>DNSé…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯<code>/etc/resolv.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# vim /etc/resolv.conf</span><br><span class="line">[root@zhoulijie ~]# cat /etc/resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">nameserver 192.168.83.2</span><br></pre></td></tr></table></figure>

<h2 id="NerworkManagerç®¡ç†ç½‘ç»œ"><a href="#NerworkManagerç®¡ç†ç½‘ç»œ" class="headerlink" title="NerworkManagerç®¡ç†ç½‘ç»œ"></a>NerworkManagerç®¡ç†ç½‘ç»œ</h2><p><code>RHEL/CentOS7</code>ç³»ç»Ÿé»˜è®¤ä½¿ç”¨<code>NetworkManager</code>æ¥æä¾›ç½‘ç»œæœåŠ¡ï¼Œè¿™æ˜¯ä¸€ç§åŠ¨æ€ç®¡ç†ç½‘ç»œé…ç½®çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œèƒ½å¤Ÿè®©ç½‘ç»œè®¾å¤‡ä¿æŒè¿æ¥çŠ¶æ€ã€‚<br><code>NetworkManager</code>æä¾›çš„å‘½ä»¤è¡Œå’Œå›¾å½¢é…ç½®å·¥å…·å¯¹ç½‘ç»œè¿›è¡Œè®¾å®š, è®¾å®šä¿å­˜çš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/sysconfig/network-scripts</code>ç›®å½•ä¸‹, å·¥å…·æœ‰ <code>nmcli, nmtui, nm-connect-editor</code></p>
<p><code>device</code>ç‰©ç†è®¾å¤‡, ä¾‹å¦‚ <code>ens33,enp2s0,virbr0,team0</code><br><code>connection</code>è¿æ¥è®¾ç½®, å…·ä½“ç½‘ç»œé…ç½®æ–¹æ¡ˆ</p>
<blockquote>
<p>1.ä¸åŒçš„ç½‘ç»œè¿æ¥é…ç½®å¯ä»¥åº”ç”¨åˆ°ç›¸åŒçš„ç‰©ç†è®¾å¤‡ï¼Œä½†ç‰©ç†è®¾å¤‡åŒä¸€æ—¶é—´åªèƒ½åº”ç”¨å…¶ä¸­æŸä¸ªç½‘ç»œè¿æ¥<br>2.é’ˆå¯¹ç‰©ç†ç½‘ç»œæ¥å£, è®¾å®šä¸åŒçš„ç½‘ç»œè¿æ¥, åœ¨ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒä¸­æ¿€æ´»ç›¸åº”çš„ç½‘ç»œè¿æ¥ï¼Œå°±å¯ä»¥å®ç°ç½‘ç»œé…ç½®ä¿¡æ¯çš„è‡ªåŠ¨åˆ‡æ¢äº†</p>
</blockquote>
<p>ä½¿ç”¨<code>nmcli</code>å‘½ä»¤æŸ¥çœ‹è®¾å¤‡ä»¥åŠè¿æ¥æƒ…å†µ</p>
<h5 id="æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"><a href="#æŸ¥çœ‹è®¾å¤‡çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"></a>æŸ¥çœ‹è®¾å¤‡çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device</span></span><br><span class="line">è®¾å¤‡        ç±»å‹      çŠ¶æ€    è¿æ¥   </span><br><span class="line">virbr0      bridge    è¿æ¥çš„  virbr0 </span><br><span class="line">eth0        ethernet  è¿æ¥çš„  eth0   </span><br><span class="line">lo          loopback  æœªæ‰˜ç®¡  --     </span><br><span class="line">virbr0-nic  tun       æœªæ‰˜ç®¡  --</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€"><a href="#æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€"></a>æŸ¥çœ‹æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli device show eth0</span></span><br><span class="line">GENERAL.è®¾å¤‡:                           eth0</span><br><span class="line">GENERAL.ç±»å‹:                           ethernet</span><br><span class="line">GENERAL.ç¡¬ç›˜:                           00:0C:29:AB:CC:67</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">GENERAL.çŠ¶æ€:                           100 (è¿æ¥çš„)</span><br><span class="line">GENERAL.è¿æ¥:                           eth0</span><br><span class="line">GENERAL.è¿æ¥è·¯å¾„:                       /org/freedesktop/NetworkManager/ActiveConnection/1</span><br><span class="line">WIRED-PROPERTIES.è½½æ³¢:                  å¼€</span><br><span class="line">IP4.åœ°å€[1]:                            192.168.83.140/24</span><br><span class="line">IP4.ç½‘å…³:                               192.168.83.2</span><br><span class="line">IP4.è·¯ç”±[1]:                            dst = 192.168.83.144/32, nh = 192.168.83.2, mt = 0</span><br><span class="line">IP4.DNS[1]:                             192.168.83.2</span><br><span class="line">IP6.åœ°å€[1]:                            fe80::20c:29ff:feab:cc67/64</span><br><span class="line">IP6.ç½‘å…³:                               --</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹è¿æ¥çŠ¶æ€"><a href="#æŸ¥çœ‹è¿æ¥çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è¿æ¥çŠ¶æ€"></a>æŸ¥çœ‹è¿æ¥çŠ¶æ€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection</span></span><br><span class="line">åç§°    UUID                                  ç±»å‹            è®¾å¤‡   </span><br><span class="line">eth0    bb501ad9-f26f-4310-b857-14a1fc520546  802-3-ethernet  eth0   </span><br><span class="line">virbr0  d8b4e76e-b469-4ff4-8937-cef5cc254873  bridge          virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥"><a href="#æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥"></a>æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection show</span></span><br><span class="line">åç§°    UUID                                  ç±»å‹            è®¾å¤‡   </span><br><span class="line">eth0    bb501ad9-f26f-4310-b857-14a1fc520546  802-3-ethernet  eth0   </span><br><span class="line">virbr0  d8b4e76e-b469-4ff4-8937-cef5cc254873  bridge          virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ"><a href="#æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ"></a>æŸ¥çœ‹æŒ‡å®šè®¾å¤‡è¿æ¥çš„è¯¦ç»†æƒ…å†µ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># nmcli connection show eth0</span></span><br><span class="line">connection.id:                          eth0</span><br><span class="line">connection.uuid:                        bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">connection.stable-id:                   --</span><br><span class="line">connection.interface-name:              eth0</span><br><span class="line">connection.type:                        802-3-ethernet</span><br><span class="line">connection.autoconnect:                 yes</span><br><span class="line">connection.autoconnect-priority:        0</span><br><span class="line">connection.autoconnect-retries:         -1 (é»˜è®¤)</span><br><span class="line">connection.timestamp:                   1555937607</span><br><span class="line">connection.read-only:                   no</span><br><span class="line">connection.permissions:                 --</span><br><span class="line">connection.zone:                        --</span><br><span class="line">connection.master:                      --</span><br><span class="line">connection.slave-type:                  --</span><br><span class="line">connection.autoconnect-slaves:          -1 (é»˜è®¤)</span><br><span class="line">connection.secondaries:                 --</span><br><span class="line">connection.gateway-ping-timeout:        0</span><br><span class="line">connection.metered:                     æœªçŸ¥</span><br><span class="line">connection.lldp:                        -1 (default)</span><br><span class="line">802-3-ethernet.port:                    --</span><br><span class="line">802-3-ethernet.speed:                   0</span><br><span class="line">802-3-ethernet.duplex:                  --</span><br><span class="line">802-3-ethernet.auto-negotiate:          no</span><br><span class="line">802-3-ethernet.mac-address:             --</span><br><span class="line">802-3-ethernet.cloned-mac-address:      --</span><br><span class="line">802-3-ethernet.generate-mac-address-mask:--</span><br><span class="line">802-3-ethernet.mac-address-blacklist:   --</span><br><span class="line">802-3-ethernet.mtu:                     è‡ªåŠ¨</span><br><span class="line">802-3-ethernet.s390-subchannels:        --</span><br><span class="line">802-3-ethernet.s390-nettype:            --</span><br><span class="line">802-3-ethernet.s390-options:            --</span><br><span class="line">802-3-ethernet.wake-on-lan:             1 (default)</span><br><span class="line">802-3-ethernet.wake-on-lan-password:    --</span><br><span class="line">ipv4.method:                            manual</span><br><span class="line">ipv4.dns:                               192.168.83.2</span><br><span class="line">ipv4.dns-search:                        --</span><br><span class="line">ipv4.dns-options:                       ï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">ipv4.dns-priority:                      0</span><br><span class="line">ipv4.addresses:                         192.168.83.140/24</span><br><span class="line">ipv4.gateway:                           192.168.83.2</span><br><span class="line">ipv4.routes:                            --</span><br><span class="line">ipv4.route-metric:                      -1</span><br><span class="line">ipv4.ignore-auto-routes:                no</span><br><span class="line">ipv4.ignore-auto-dns:                   no</span><br><span class="line">ipv4.dhcp-client-id:                    --</span><br><span class="line">ipv4.dhcp-timeout:                      0</span><br><span class="line">ipv4.dhcp-send-hostname:                yes</span><br><span class="line">ipv4.dhcp-hostname:                     --</span><br><span class="line">ipv4.dhcp-fqdn:                         --</span><br><span class="line">ipv4.never-default:                     no</span><br><span class="line">ipv4.may-fail:                          yes</span><br><span class="line">ipv4.dad-timeout:                       -1 (é»˜è®¤)</span><br><span class="line">ipv6.method:                            ignore</span><br><span class="line">ipv6.dns:                               --</span><br><span class="line">ipv6.dns-search:                        --</span><br><span class="line">ipv6.dns-options:                       ï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">ipv6.dns-priority:                      0</span><br><span class="line">ipv6.addresses:                         --</span><br><span class="line">ipv6.gateway:                           --</span><br><span class="line">ipv6.routes:                            --</span><br><span class="line">ipv6.route-metric:                      -1</span><br><span class="line">ipv6.ignore-auto-routes:                no</span><br><span class="line">ipv6.ignore-auto-dns:                   no</span><br><span class="line">ipv6.never-default:                     no</span><br><span class="line">ipv6.may-fail:                          yes</span><br><span class="line">ipv6.ip6-privacy:                       -1 (æœªçŸ¥)</span><br><span class="line">ipv6.addr-gen-mode:                     stable-privacy</span><br><span class="line">ipv6.dhcp-send-hostname:                yes</span><br><span class="line">ipv6.dhcp-hostname:                     --</span><br><span class="line">ipv6.token:                             --</span><br><span class="line">proxy.method:                           none</span><br><span class="line">proxy.browser-only:                     no</span><br><span class="line">proxy.pac-url:                          --</span><br><span class="line">proxy.pac-script:                       --</span><br><span class="line">GENERAL.åç§°:                           eth0</span><br><span class="line">GENERAL.UUID:                           bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">GENERAL.è®¾å¤‡:                           eth0</span><br><span class="line">GENERAL.çŠ¶æ€:                           å·²æ¿€æ´»</span><br><span class="line">GENERAL.é»˜è®¤:                           æ˜¯</span><br><span class="line">GENERAL.é»˜è®¤6:                          å¦</span><br><span class="line">GENERAL.VPN å‚æ•°:                       å¦</span><br><span class="line">GENERAL.åŒº:                             --</span><br><span class="line">GENERAL.DBUSè·¯å¾„:                       /org/freedesktop/NetworkManager/ActiveConnection/1</span><br><span class="line">GENERAL.è¿æ¥è·¯å¾„:                       /org/freedesktop/NetworkManager/Settings/1</span><br><span class="line">GENERAL.æŒ‡å®šå¯¹è±¡:                       --</span><br><span class="line">GENERAL.ä¸»è·¯å¾„:                         --</span><br><span class="line">IP4.åœ°å€[1]:                            192.168.83.140/24</span><br><span class="line">IP4.ç½‘å…³:                               192.168.83.2</span><br><span class="line">IP4.è·¯ç”±[1]:                            dst = 192.168.83.144/32, nh = 192.168.83.2, mt = 0</span><br><span class="line">IP4.DNS[1]:                             192.168.83.2</span><br><span class="line">IP6.åœ°å€[1]:                            fe80::20c:29ff:feab:cc67/64</span><br><span class="line">IP6.ç½‘å…³:                               --</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ"><a href="#ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ" class="headerlink" title="ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ"></a>ä½¿ç”¨åŸç”Ÿnetworkç®¡ç†ç½‘ç»œ</h2><p><code>CentOS/RHEL</code>çš„ç½‘ç»œé…ç½®æ–‡ä»¶é»˜è®¤ç›®å½•ä¸º<code>/etc/sysconfig/network-scripts</code><br>é»˜è®¤ç¬¬ä¸€å—ç‰©ç†ç½‘å¡é…ç½®æ–‡ä»¶ä¸º<code>ifcfg-eth0</code>, å¦‚æœæœ‰ç¬¬äºŒå—ç‰©ç†ç½‘å¡, é…ç½®æ–‡ä»¶åˆ™ä¸º<code>ifcfg-eth1</code>ä»¥æ­¤ç±»æ¨ã€‚ æ³¨æ„: å¦‚æœæ–°å¢ç‰©ç†ç½‘å¡æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œå¯é€‰æ‹©å¤åˆ¶ç³»ç»Ÿé»˜è®¤çš„è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®NetworkMangerå¼€æœºä¸å¯åŠ¨, åŒæ—¶åœæ­¢NetworkMangeræœåŠ¡</span><br><span class="line">[root@zhoulijie ~]# systemctl disable NetworkManager</span><br><span class="line">[root@zhoulijie ~]# systemctl stop NetworkManager</span><br><span class="line"></span><br><span class="line">//æ·»åŠ ä¸€å—ç‰©ç†ç½‘å¡, ç„¶åæ–°å¢ç½‘ç»œè¿æ¥é…ç½®æ–‡ä»¶</span><br><span class="line">//å¤åˆ¶é…ç½®eth0é…ç½®æ–‡ä»¶ä¸ºeth1</span><br><span class="line">[root@zhoulijie ~]# cd /etc/sysconfig/network-scripts/</span><br><span class="line">[root@zhoulijie network-scripts]# cp ifcfg-eth0 ifcfg-eth1</span><br><span class="line"></span><br><span class="line">//ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶</span><br><span class="line">[root@zhoulijie ~]# vim /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth1</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth1</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.83.141</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.83.2</span><br><span class="line">DNS1=192.168.83.2</span><br><span class="line"></span><br><span class="line">//é‡å¯networkç½‘ç»œæœåŠ¡åŠ è½½ç½‘ç»œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</span><br><span class="line">[root@zhoulijie ~]# systemctl restart network</span><br><span class="line">[root@zhoulijie ~]# systemctl enable network</span><br></pre></td></tr></table></figure>

<h2 id="ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥"><a href="#ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥" class="headerlink" title="ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥"></a>ç½‘ç»œæ£€æµ‹å·¥å…·ä¸æ•…éšœæ’æŸ¥</h2><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p><code>ping</code>å‘½ä»¤çš„ç›®çš„åœ¨äºæµ‹è¯•å¦ä¸€å°ä¸»æœºæ˜¯å¦å¯è¾¾, å¦‚æœpingä¸åˆ°æŸå°ä¸»æœº,å°±è¯´æ˜å¯¹æ–¹ä¸»æœºå·²ç»å‡ºç°äº†é—®é¢˜, ä½†æ˜¯ä¸æ’é™¤ç”±äºé“¾è·¯ä¸­çš„é˜²ç«å¢™ã€pingè¢«ä¸¢å¼ƒç­‰åŸå› é€ æˆpingä¸é€šçš„æƒ…å†µ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//pingå‘½ä»¤å¸¸ç”¨é€‰é¡¹ï¼š</span><br><span class="line">    -c æŒ‡å®špingçš„æ¬¡æ•°</span><br><span class="line">    -i æŒ‡å®špingåŒ…çš„å‘é€é—´éš”</span><br><span class="line">    -w å¦‚æœpingæ²¡æœ‰å›åº”, åˆ™åœ¨æŒ‡å®šè¶…æ—¶æ—¶é—´åé€€å‡º</span><br></pre></td></tr></table></figure>

<h3 id="hostä¸nslookup"><a href="#hostä¸nslookup" class="headerlink" title="hostä¸nslookup"></a>hostä¸nslookup</h3><p><code>host/nslookup</code>å‘½ä»¤ç”¨äºæŸ¥è¯¢DNSè®°å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># host www.baidu.com</span></span><br><span class="line">www.baidu.com is an <span class="built_in">alias</span> <span class="keyword">for</span> www.a.shifen.com.</span><br><span class="line">www.a.shifen.com has address 180.97.33.107</span><br><span class="line">www.a.shifen.com has address 180.97.33.108</span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># nslookup  www.baidu.com</span></span><br><span class="line">Server:         192.168.83.2</span><br><span class="line">Address:        192.168.83.2<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.baidu.com   canonical name = www.a.shifen.com.</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 180.97.33.108</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 180.97.33.107</span><br></pre></td></tr></table></figure>

<h3 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h3><p><code>traceroute</code>å‘½ä»¤ç”¨äºè·¯ç”±è·Ÿè¸ª, æ£€æµ‹ç½‘ç»œæ•…éšœå‡ºç°åœ¨ISPè¿è¥å•†æˆ–æ˜¯å¯¹ç«¯æœåŠ¡æ— æ³•å“åº”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># traceroute www.baidu.com</span></span><br><span class="line">traceroute to www.baidu.com (180.97.33.107), 30 hops max, 60 byte packets</span><br><span class="line">1  gateway (192.168.83.2)  0.143 ms  0.066 ms  0.089 ms</span><br><span class="line"> 2  * * *</span><br><span class="line"> 3  * * *</span><br><span class="line"> 4  * * *</span><br><span class="line"> 5  * * *</span><br><span class="line"> 6  * * *</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æ­¦æ±‰åœ°åŒºï¼Œè·¯ç”±è¿½è¸ªè¢«è¿è¥å•†é™åˆ¶</p>
<p>åœ¨åŒ—ä¸Šå¹¿æ·±å¯ä»¥è·¯ç”±è¿½è¸ª</p>
</blockquote>
<h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p><code>netstat</code>ç”¨äºæŸ¥çœ‹ç½‘ç»œçŠ¶æ€</p>
<h5 id="æ˜¾ç¤ºè·¯ç”±è¡¨"><a href="#æ˜¾ç¤ºè·¯ç”±è¡¨" class="headerlink" title="æ˜¾ç¤ºè·¯ç”±è¡¨"></a>æ˜¾ç¤ºè·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -r</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">default         gateway         0.0.0.0         UG        0 0          0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U         0 0          0 eth0</span><br><span class="line">192.168.83.144  gateway         255.255.255.255 UGH       0 0          0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨"><a href="#ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨" class="headerlink" title="ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨"></a>ä»¥æ•°å­—æ–¹å¼æ˜¾ç¤ºè·¯ç”±è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -rn</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">0.0.0.0         192.168.83.2    0.0.0.0         UG        0 0          0 eth0</span><br><span class="line">192.168.83.0    0.0.0.0         255.255.255.0   U         0 0          0 eth0</span><br><span class="line">192.168.83.144  192.168.83.2    255.255.255.255 UGH       0 0          0 eth0</span><br><span class="line">192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥"><a href="#æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥" class="headerlink" title="æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥"></a>æ˜¾ç¤ºå»ºç«‹çš„tcpè¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -t</span></span><br><span class="line">Active Internet connections (w/o servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºudpè¿æ¥"><a href="#æ˜¾ç¤ºudpè¿æ¥" class="headerlink" title="æ˜¾ç¤ºudpè¿æ¥"></a>æ˜¾ç¤ºudpè¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -u</span></span><br><span class="line">Active Internet connections (w/o servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥"><a href="#æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥" class="headerlink" title="æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥"></a>æ˜¾ç¤ºç›‘å¬çŠ¶æ€çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -l</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN    </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h5 id="æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥"><a href="#æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥"></a>æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€çš„è¿æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -a</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN   </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸ç”¨é€‰é¡¹"><a href="#å¸¸ç”¨é€‰é¡¹" class="headerlink" title="å¸¸ç”¨é€‰é¡¹"></a>å¸¸ç”¨é€‰é¡¹</h5><blockquote>
<p> -antlp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -antlp</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:55033           0.0.0.0:*               LISTEN      1732/rpc.statd</span><br><span class="line">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      1726/rpcbind</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     </span><br><span class="line">..................ä»¥ä¸‹çœç•¥.......................</span><br></pre></td></tr></table></figure>

<h3 id="ss"><a href="#ss" class="headerlink" title="ss"></a>ss</h3><p><code>ss</code>æ˜¯ä¸€ç§ç½‘ç»œçŠ¶æ€æŸ¥çœ‹å·¥å…·ï¼Œå–ä»£netstat</p>
<blockquote>
<p>è¯­æ³•ï¼šss [options][ FILTER ]<br>å¸¸ç”¨çš„optionsï¼š<br>    -tï¼štcpåè®®ç›¸å…³<br>    -uï¼šudpåè®®ç›¸å…³<br>    -wï¼šè£¸å¥—æ¥å­—ç›¸å…³<br>    -xï¼šunixå¥—æ¥å­—ç›¸å…³<br>    -lï¼šlistençŠ¶æ€çš„è¿æ¥<br>    -aï¼šæ‰€æœ‰<br>    -nï¼šæ•°å­—æ ¼å¼<br>    -pï¼šç›¸å…³çš„ç¨‹åºåŠpid<br>    -eï¼šæ‰©å±•çš„ä¿¡æ¯<br>    -mï¼šå†…å­˜ç”¨é‡<br>    -oï¼šæ˜¾ç¤ºè®¡æ—¶å™¨ä¿¡æ¯</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å¸¸è§çš„FILTERï¼š</span><br><span class="line">    FILTER := [ state TCP-STATE ] [ EXPRESSION ]</span><br><span class="line">    å¦‚ï¼šss -tan state ESTABLISHED</span><br><span class="line">                        </span><br><span class="line">å¸¸è§çš„stateï¼š</span><br><span class="line">    //tcp finite state machineï¼šæœ‰é™çŠ¶æ€æœº</span><br><span class="line">        LISTENï¼šç›‘å¬</span><br><span class="line">        ESTABLISHEDï¼šå·²å»ºç«‹çš„è¿æ¥</span><br><span class="line">        </span><br><span class="line">EXPRESSIONï¼š</span><br><span class="line">	dport =</span><br><span class="line">	sport =</span><br><span class="line">ç¤ºä¾‹ï¼š&apos;( dport = :ssh or sport = :ssh)&apos;ï¼Œæ­¤å¤„çš„sshä¹Ÿå³æœåŠ¡åå¯ä»¥ä½¿ç”¨å…¶å¯¹åº”çš„ç«¯å£å·ä»£æ›¿ï¼Œç­‰å·ä¸¤è¾¹å¿…é¡»æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸ç”¨ç»„åˆ"><a href="#å¸¸ç”¨ç»„åˆ" class="headerlink" title="å¸¸ç”¨ç»„åˆ"></a>å¸¸ç”¨ç»„åˆ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -tan</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*</span><br><span class="line">ESTAB      0      0                     172.16.12.128:22                                  172.16.12.1:56187</span><br><span class="line">ESTAB      0      0                     172.16.12.128:22                                  172.16.12.1:53808</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -tanl</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -antlp</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">LISTEN     0      128                               *:22                                            *:*                   users:((<span class="string">"sshd"</span>,pid=889,fd=3))</span><br><span class="line">LISTEN     0      100                       127.0.0.1:25                                            *:*                   users:((<span class="string">"master"</span>,pid=1007,fd=13))</span><br><span class="line">LISTEN     0      128                              :::22                                           :::*                   users:((<span class="string">"sshd"</span>,pid=889,fd=4))</span><br><span class="line">LISTEN     0      100                             ::1:25                                           :::*                   users:((<span class="string">"master"</span>,pid=1007,fd=14))</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ss -anu</span></span><br><span class="line">State      Recv-Q Send-Q                Local Address:Port                               Peer Address:Port</span><br><span class="line">UNCONN     0      0                                 *:23511                                         *:*</span><br><span class="line">UNCONN     0      0                                 *:68                                            *:*</span><br><span class="line">UNCONN     0      0                                :::35299                                        :::*</span><br></pre></td></tr></table></figure>

<h5 id="å¸¸è§ç«¯å£"><a href="#å¸¸è§ç«¯å£" class="headerlink" title="å¸¸è§ç«¯å£"></a>å¸¸è§ç«¯å£</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http    80/tcp </span><br><span class="line">https   443/tcp </span><br><span class="line">ssh     22/tcp </span><br><span class="line">ftp     20,21/tcp</span><br><span class="line">mysql   3306/tcp</span><br><span class="line">rsync   873/rsync</span><br><span class="line">redis   6379/tcp</span><br></pre></td></tr></table></figure>

<h3 id="ç½‘ç»œæ•…éšœæ’æŸ¥"><a href="#ç½‘ç»œæ•…éšœæ’æŸ¥" class="headerlink" title="ç½‘ç»œæ•…éšœæ’æŸ¥"></a>ç½‘ç»œæ•…éšœæ’æŸ¥</h3><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­æ¯ä¸ªipçš„è¿æ¥æ•° </p>
<blockquote>
<p> netstat -ntu | awk â€˜{print $5}â€™ | cut -d: -f1 | sort | uniq -c | sort -n</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -ntu | awk '&#123;print $5&#125;' | cut -d: -f1 | sort | uniq -c | sort -n</span></span><br><span class="line">      1 Address</span><br><span class="line">      1 servers)</span><br></pre></td></tr></table></figure>

<p>2.è¯·åˆ—å‡ºä¸‹åˆ—æœåŠ¡ä½¿ç”¨çš„ç«¯å£,http,ftp,ssh,telnet,mysql,dns </p>
<blockquote>
<p> http      80 </p>
<p> ftp        20,21 </p>
<p> ssh       22</p>
<p> telnet    23</p>
<p> mysql    3306 </p>
<p> dns       53</p>
</blockquote>
<p>3.å¦‚ä½•åœ¨è™šæ‹Ÿæœºä¸Šæ–°å¢åŠ ä¸€å—ç½‘å¡ï¼Œå¹¶é…ç½®IPä¸º172.16.0.10ï¼ŒæŒ‡å®šç½‘å…³ä¸º172.16.0.1 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># cp ifcfg-eth0 ifcfg-eth1</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># vim ifcfg-eth1</span></span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># cat ifcfg-eth1</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=eth1      //æ­¤å¤„eth0æ”¹æˆeth1</span><br><span class="line">UUID=bb501ad9-f26f-4310-b857-14a1fc520546</span><br><span class="line">DEVICE=eth1    //æ­¤å¤„eth0æ”¹æˆeth1</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=172.16.0.10  //æ­¤å¤„æ›´æ”¹IP</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=172.16.0.1  //æ­¤å¤„æ›´æ”¹ç½‘å…³</span><br><span class="line">DNS1=172.16.0.1     //æ­¤å¤„æ›´æ”¹DNS1</span><br><span class="line">[root@zhoulijie network-scripts]<span class="comment"># systemctl restart network</span></span><br></pre></td></tr></table></figure>

<p>4.è¯¦ç»†æè¿°dnsè§£æè¿‡ç¨‹ï¼Œä»¥è®¿é—®<a href="http://www.baidu.comä¸ºä¾‹" target="_blank" rel="noopener">www.baidu.comä¸ºä¾‹</a> </p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ä¸€ä¸ªåŸŸå:<a href="http://www.baidu.comï¼Œè¿™æ—¶ï¼Œä½ ä½¿ç”¨çš„ç”µè„‘ä¼šå‘å‡ºä¸€ä¸ªDNSè¯·æ±‚åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœ¬åœ°DNSæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ç½‘ç»œæ¥å…¥æœåŠ¡å™¨å•†æä¾›ï¼Œæ¯”å¦‚ä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ã€‚" target="_blank" rel="noopener">www.baidu.comï¼Œè¿™æ—¶ï¼Œä½ ä½¿ç”¨çš„ç”µè„‘ä¼šå‘å‡ºä¸€ä¸ªDNSè¯·æ±‚åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœ¬åœ°DNSæœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ä½ çš„ç½‘ç»œæ¥å…¥æœåŠ¡å™¨å•†æä¾›ï¼Œæ¯”å¦‚ä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ã€‚</a></p>
<p>æŸ¥è¯¢<a href="http://www.baidu.comçš„DNSè¯·æ±‚åˆ°è¾¾æœ¬åœ°DNSæœåŠ¡å™¨ä¹‹åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¼šé¦–å…ˆæŸ¥è¯¢å®ƒçš„ç¼“å­˜è®°å½•ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ­¤æ¡è®°å½•ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚å¦‚æœæ²¡æœ‰ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨è¿˜è¦å‘DNSæ ¹æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚" target="_blank" rel="noopener">www.baidu.comçš„DNSè¯·æ±‚åˆ°è¾¾æœ¬åœ°DNSæœåŠ¡å™¨ä¹‹åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¼šé¦–å…ˆæŸ¥è¯¢å®ƒçš„ç¼“å­˜è®°å½•ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ­¤æ¡è®°å½•ï¼Œå°±å¯ä»¥ç›´æ¥è¿”å›ç»“æœã€‚å¦‚æœæ²¡æœ‰ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨è¿˜è¦å‘DNSæ ¹æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚</a></p>
<p>æ ¹DNSæœåŠ¡å™¨æ²¡æœ‰è®°å½•å…·ä½“çš„åŸŸåå’ŒIPåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œè€Œæ˜¯å‘Šè¯‰æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œä½ å¯ä»¥åˆ°åŸŸæœåŠ¡å™¨ä¸Šå»ç»§ç»­æŸ¥è¯¢ï¼Œå¹¶ç»™å‡ºåŸŸæœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<p>æœ¬åœ°DNSæœåŠ¡å™¨ç»§ç»­å‘åŸŸæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯·æ±‚çš„å¯¹è±¡æ˜¯.comåŸŸæœåŠ¡å™¨ã€‚.comåŸŸæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¹Ÿä¸ä¼šç›´æ¥è¿”å›åŸŸåå’ŒIPåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œè€Œæ˜¯å‘Šè¯‰æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œä½ çš„åŸŸåçš„è§£ææœåŠ¡å™¨çš„åœ°å€ã€‚</p>
<p>æœ€åï¼Œæœ¬åœ°DNSæœåŠ¡å™¨å‘åŸŸåçš„è§£ææœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè¿™æ—¶å°±èƒ½æ”¶åˆ°ä¸€ä¸ªåŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä¸ä»…è¦æŠŠIPåœ°å€è¿”å›ç»™ç”¨æˆ·ç”µè„‘ï¼Œè¿˜è¦æŠŠè¿™ä¸ªå¯¹åº”å…³ç³»ä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼Œä»¥å¤‡ä¸‹æ¬¡åˆ«çš„ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿”å›ç»“æœï¼ŒåŠ å¿«ç½‘ç»œè®¿é—®ã€‚</p>
</blockquote>
<p>5.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­è¿è¡Œäº†å¤šå°‘ä¸ªè¿›ç¨‹ </p>
<blockquote>
<p> ps -aux | wc -l</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie network-scripts]<span class="comment"># ps -aux | wc -l</span></span><br><span class="line">243</span><br></pre></td></tr></table></figure>

<p>6.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿä¸­å¯åŠ¨äº†å“ªäº›ç«¯å£</p>
<blockquote>
<p>ss -tan</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  ss -tan</span></span><br><span class="line">State      Recv-Q Send-Q                         Local Address:Port                                        Peer Address:Port              </span><br><span class="line">LISTEN     0      128                                        *:111                                                    *:*                  </span><br><span class="line">LISTEN     0      5                              192.168.122.1:53                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                        *:22                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                127.0.0.1:631                                                    *:*                  </span><br><span class="line">LISTEN     0      100                                127.0.0.1:25                                                     *:*                  </span><br><span class="line">LISTEN     0      128                                       :::111                                                   :::*                  </span><br><span class="line">LISTEN     0      128                                       :::22                                                    :::*                  </span><br><span class="line">LISTEN     0      128                                      ::1:631                                                   :::*                  </span><br><span class="line">LISTEN     0      100                                      ::1:25</span><br></pre></td></tr></table></figure>

<p>7.å¦‚ä½•æŸ¥çœ‹æ˜¯å¦å¼€å¯80ç«¯å£ï¼ŒåŠæŸ¥çœ‹sshdè¿›ç¨‹æ˜¯å¦å­˜åœ¨ </p>
<blockquote>
<p>netstat   -nultp | grep 80</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat   -nultp | grep 80</span></span><br><span class="line"></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ps -aux | grep sshd</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ps -aux | grep sshd</span></span><br><span class="line">root       1193  0.0  0.2 105996  4076 ?        Ss   18:48   0:00 /usr/sbin/sshd -D</span><br><span class="line">root       6448  0.0  0.0 112676   984 pts/0    R+   22:23   0:00 grep --color=auto sshd</span><br></pre></td></tr></table></figure>

<p>8.åˆ—å‡ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„tcpç«¯å£ </p>
<blockquote>
<p>netstat -l | grep tcp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -l | grep tcp</span></span><br><span class="line">tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 zhoulijie:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 [::]:sunrpc             [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 [::]:ssh                [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 localhost:ipp           [::]:*                  LISTEN     </span><br><span class="line">tcp6       0      0 localhost:smtp          [::]:*                  LISTEN</span><br></pre></td></tr></table></figure>

<p>9.æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£ä¿¡æ¯, åŒ…æ‹¬ PID å’Œè¿›ç¨‹åç§° </p>
<blockquote>
<p>netstat -antlp</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># netstat -antlp</span></span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      1/systemd           </span><br><span class="line">tcp        0      0 192.168.122.1:53        0.0.0.0:*               LISTEN      1391/dnsmasq        </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1193/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      1197/cupsd          </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1321/master         </span><br><span class="line">tcp6       0      0 :::111                  :::*                    LISTEN      1/systemd           </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      1193/sshd           </span><br><span class="line">tcp6       0      0 ::1:631                 :::*                    LISTEN      1197/cupsd          </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      1321/master</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/10.linux--ç½‘ç»œåŸºç¡€ç®¡ç†/" data-id="ck7ooyamu003x4su6nqoicvis"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-9.linux--linuxè¿›ç¨‹ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/"
    >linuxè¿›ç¨‹ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.571Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="è¿›ç¨‹åŸºæœ¬æ¦‚è¿°"><a href="#è¿›ç¨‹åŸºæœ¬æ¦‚è¿°" class="headerlink" title="è¿›ç¨‹åŸºæœ¬æ¦‚è¿°"></a>è¿›ç¨‹åŸºæœ¬æ¦‚è¿°</h2><p>è¿›ç¨‹æ˜¯å·²å¯åŠ¨çš„å¯æ‰§è¡Œç¨‹åºçš„è¿è¡Œä¸­å®ä¾‹ã€‚</p>
<p>/procç›®å½•ä¸‹ä»¥æ•°å­—ä¸ºåçš„ç›®å½•ï¼Œæ¯ä¸€ä¸ªç›®å½•ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä¿å­˜ç€è¿›ç¨‹çš„å±æ€§ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹çš„PIDæ˜¯å”¯ä¸€çš„ï¼Œå°±ç®—è¿›ç¨‹é€€å‡ºäº†ï¼Œå…¶å®ƒè¿›ç¨‹ä¹Ÿä¸ä¼šå ç”¨å…¶PIDã€‚</p>
<h4 id="è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†"><a href="#è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†"></a>è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†</h4><ul>
<li>å·²åˆ†é…å†…å­˜çš„åœ°å€ç©ºé—´</li>
<li>å®‰å…¨å±æ€§ï¼ŒåŒ…æ‹¬æ‰€æœ‰æƒå‡­æ®å’Œç‰¹æƒ</li>
<li>ç¨‹åºä»£ç çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ‰§è¡Œçº¿ç¨‹</li>
<li>è¿›ç¨‹çŠ¶æ€</li>
</ul>
<h4 id="è¿›ç¨‹çš„ç¯å¢ƒ"><a href="#è¿›ç¨‹çš„ç¯å¢ƒ" class="headerlink" title="è¿›ç¨‹çš„ç¯å¢ƒ"></a>è¿›ç¨‹çš„ç¯å¢ƒ</h4><ul>
<li>æœ¬åœ°å’Œå…¨å±€å˜é‡</li>
<li>å½“å‰è°ƒåº¦ä¸Šä¸‹æ–‡</li>
<li>åˆ†é…çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æ–‡ä»¶æè¿°ç¬¦å’Œç½‘ç»œç«¯å£</li>
</ul>
<h4 id="è¿›ç¨‹çš„äº§ç”Ÿ"><a href="#è¿›ç¨‹çš„äº§ç”Ÿ" class="headerlink" title="è¿›ç¨‹çš„äº§ç”Ÿ"></a>è¿›ç¨‹çš„äº§ç”Ÿ</h4><p>ç°æœ‰çš„ï¼ˆçˆ¶ï¼‰è¿›ç¨‹å¤åˆ¶è‡ªå·±çš„åœ°å€ç©ºé—´ï¼ˆforkï¼‰æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ˆå­ï¼‰è¿›ç¨‹ç»“æ„ã€‚ æ¯ä¸ªæ–°è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªå”¯ä¸€çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ï¼Œæ»¡è¶³è·Ÿè¸ªå’Œå®‰å…¨æ€§ä¹‹éœ€ã€‚PIDä¸çˆ¶è¿›ç¨‹IDï¼ˆPPIDï¼‰æ˜¯æ–°è¿›ç¨‹ç¯å¢ƒçš„å…ƒç´ ã€‚ ä»»ä½•è¿›ç¨‹å¯åˆ›å»ºå­è¿›ç¨‹ã€‚æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹çš„åä»£ã€‚RHEL7ä¸Šï¼Œç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹æ˜¯systemdã€‚ </p>
<p><img src="https://s2.ax1x.com/2019/04/09/AoEPY9.png" alt></p>
<p>é€šè¿‡forkä¾‹ç¨‹ï¼Œå­è¿›ç¨‹ç»§æ‰¿å®‰å…¨æ€§èº«ä»½ã€è¿‡å»å’Œå½“å‰çš„æ–‡ä»¶æè¿°ç¬¦ã€ç«¯å£å’Œèµ„æºç‰¹æƒã€ç¯å¢ƒå˜é‡ï¼Œä»¥åŠç¨‹åºä»£ç ã€‚éšåï¼Œå­è¿›ç¨‹å¯èƒ½execå…¶è‡ªå·±çš„ç¨‹åºä»£ç ã€‚é€šå¸¸ï¼Œçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹è¿è¡ŒæœŸé—´å¤„äºç¡çœ çŠ¶æ€ï¼Œè®¾ç½®ä¸€ä¸ªåœ¨å­è¿›ç¨‹å®Œæˆæ—¶å‘å‡ºä¿¡å·çš„è¯·æ±‚ï¼ˆwaitï¼‰ã€‚åœ¨é€€å‡ºæ—¶ï¼Œå­è¿›ç¨‹å¯èƒ½å·²ç»å…³é—­æˆ–ä¸¢å¼ƒäº†å…¶èµ„æºå’Œç¯å¢ƒï¼Œå‰©ä½™çš„éƒ¨åˆ†è¢«ç§°ä½œåƒµåœã€‚çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶æ”¶åˆ°ä¿¡å·è€Œè¢«å”¤é†’ï¼Œæ¸…ç†å‰©ä½™ç»“æ„ï¼Œç„¶åç»§ç»­æ‰§è¡Œå…¶è‡ªå·±çš„ç¨‹åºä»£ç ã€‚ </p>
<h4 id="è¿›ç¨‹çš„åˆ†ç±»"><a href="#è¿›ç¨‹çš„åˆ†ç±»" class="headerlink" title="è¿›ç¨‹çš„åˆ†ç±»"></a>è¿›ç¨‹çš„åˆ†ç±»</h4><ul>
<li>å‰å°è¿›ç¨‹ï¼šä¸ç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ï¼Œé€šè¿‡ç»ˆç«¯å¯åŠ¨çš„è¿›ç¨‹ <ul>
<li>æ³¨æ„ï¼šä¹Ÿå¯æŠŠåœ¨å‰å°å¯åŠ¨çš„è¿›ç¨‹é€å¾€åå°ï¼Œä»¥å®ˆæŠ¤æ¨¡å¼è¿è¡Œ</li>
</ul>
</li>
</ul>
<ul>
<li>å®ˆæŠ¤è¿›ç¨‹ï¼šdaemonï¼Œä¸ç»ˆç«¯æ— å…³çš„è¿›ç¨‹ï¼ˆå¦‚å†…æ ¸ï¼‰ï¼Œåœ¨ç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ä¸­å¯åŠ¨çš„è¿›ç¨‹</li>
</ul>
<h2 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h2><p><img src="https://s2.ax1x.com/2019/04/09/AoE86P.png" alt></p>
<blockquote>
<p>Excuting                          //è¿è¡Œæ€<br>Ready                              //å°±ç»ªæ€ï¼Œä¹Ÿå¯ä»¥ç§°ä½œç¡çœ æ€<br>Uninterruptible sleep   //ä¸å¯ä¸­æ–­çš„ç¡çœ ã€‚ä¸å¯éšæ—¶å”¤é†’ï¼Œåªæœ‰å½“IOèµ„æºåŠ è½½æˆåŠŸåæ‰èƒ½å”¤é†’<br>Interruptible sleep      //å¯ä¸­æ–­çš„ç¡çœ ã€‚å¯éšæ—¶å”¤é†’<br>Zombie                        //åƒµå°¸è¿›ç¨‹ã€‚æ­£å¸¸è¿è¡Œç»“æŸäº†ï¼Œä½†æ˜¯ä¸é‡Šæ”¾å æ®çš„å†…å­˜<br>Stopped                       //åœæ­¢æ€ï¼Œæš‚åœäºå†…å­˜ä¸­ï¼Œä½†ä¸ä¼šè¢«è°ƒåº¦ï¼Œé™¤éæ‰‹åŠ¨å¯åŠ¨ä¹‹</p>
</blockquote>
<blockquote>
<p>è¿›ç¨‹ç¡çœ çš„åŸå› ï¼š å½“ä¸€ä¸ªæ‰§è¡Œä¸­çš„è¿›ç¨‹ï¼Œéœ€è¦åŠ è½½é¢å¤–çš„IOèµ„æºçš„æ—¶å€™ï¼Œç”±äºIOè®¾å¤‡çš„é€Ÿåº¦å¤ªæ…¢ï¼Œæ‰€ä»¥ä¼šè½¬å…¥ç¡çœ çŠ¶æ€ç­‰å¾…ï¼Œäº¤å‡ºCPUç»™å…¶ä»–è¿›ç¨‹ï¼Œä»¥å…æµªè´¹å‰©ä½™æ‰§è¡Œæ—¶é—´ </p>
</blockquote>
<p>åœ¨å¤šä»»åŠ¡å¤„ç†æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªCPUï¼ˆæˆ–CPUæ ¸å¿ƒï¼‰åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šå¤„ç†ä¸€ä¸ªè¿›ç¨‹ã€‚åœ¨è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå®ƒå¯¹CPUæ—¶é—´å’Œèµ„æºåˆ†é…çš„ç›´æ¥è¦æ±‚ä¼šæœ‰å˜åŒ–ã€‚è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒéšç€ç¯å¢ƒè¦æ±‚è€Œæ”¹å˜ã€‚ </p>
<h6 id="Linuxè¿›ç¨‹çŠ¶æ€"><a href="#Linuxè¿›ç¨‹çŠ¶æ€" class="headerlink" title="Linuxè¿›ç¨‹çŠ¶æ€"></a>Linuxè¿›ç¨‹çŠ¶æ€</h6><table>
<thead>
<tr>
<th>æ ‡å¿—</th>
<th>å†…æ ¸å®šä¹‰çš„çŠ¶æ€åç§°å’Œæè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>R</td>
<td>TASK_RUNNINGï¼šè¿›ç¨‹æ­£åœ¨CPUä¸Šæ‰§è¡Œï¼Œæˆ–è€…æ­£åœ¨ç­‰å¾…è¿è¡Œã€‚å¤„äºè¿è¡Œä¸­ï¼ˆæˆ–å¯è¿è¡Œï¼‰çŠ¶æ€æ—¶ï¼Œè¿›ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œç”¨æˆ·ä¾‹ç¨‹æˆ–å†…æ ¸ä¾‹ç¨‹ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Œæˆ–è€…å·²æ’é˜Ÿå¹¶å°±ç»ª</td>
</tr>
<tr>
<td>S</td>
<td>TASK_INTERRUPTIBLEï¼šè¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ä¸”æ­£åœ¨ç­‰å¾…æŸä¸€æ¡ä»¶ï¼šç¡¬ä»¶è¯·æ±‚ã€ç³»ç»Ÿèµ„æºè®¿é—®æˆ–ä¿¡å·ã€‚å½“äº‹ä»¶æˆ–ä¿¡å·æ»¡è¶³è¯¥æ¡ä»¶æ—¶ï¼Œè¯¥è¿›ç¨‹å°†è¿”å›åˆ°è¿è¡Œä¸­</td>
</tr>
<tr>
<td>D</td>
<td>TASK_UNINTERRUPTIBLEï¼šæ­¤è¿›ç¨‹ä¹Ÿåœ¨ç¡çœ ï¼Œä½†ä¸SçŠ¶æ€ä¸åŒï¼Œä¸ä¼šå“åº”ä¼ é€’çš„ä¿¡å·ã€‚ä»…åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œå…¶ä¸­è¿›ç¨‹ä¸­æ–­å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„è®¾å¤‡çŠ¶æ€</td>
</tr>
<tr>
<td>K</td>
<td>TASK_KILLABLEï¼šè¿›ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œä¸ä¸å¯ä¸­æ–­çš„DçŠ¶æ€ç›¸åŒï¼Œä½†æœ‰æ‰€ä¿®æ”¹ï¼Œå…è®¸ç­‰å¾…ä¸­çš„ä»»åŠ¡é€šè¿‡å“åº”ä¿¡å·è€Œè¢«ä¸­æ–­ï¼ˆå½»åº•é€€å‡ºï¼‰ã€‚å®ç”¨ç¨‹åºé€šå¸¸å°†å¯ä¸­æ–­çš„è¿›ç¨‹æ˜¾ç¤ºä¸ºDçŠ¶æ€</td>
</tr>
<tr>
<td>T</td>
<td>TASK_STOPPEDï¼šè¿›ç¨‹å·²è¢«åœæ­¢ï¼ˆæš‚åœï¼‰ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç”¨æˆ·æˆ–å…¶ä»–è¿›ç¨‹å‘å‡ºçš„ä¿¡å·ã€‚è¿›ç¨‹å¯ä»¥é€šè¿‡å¦ä¸€ä¿¡å·è¿”å›åˆ°è¿è¡Œä¸­çŠ¶æ€ï¼Œç»§ç»­æ‰§è¡Œï¼ˆæ¢å¤ï¼‰</td>
</tr>
<tr>
<td>T</td>
<td>TASK_TRACEDï¼šæ­£åœ¨è¢«è°ƒè¯•çš„è¿›ç¨‹ä¹Ÿä¼šä¸´æ—¶åœæ­¢ï¼Œå¹¶ä¸”å…±äº«åŒä¸€ä¸ªTçŠ¶æ€æ ‡å¿—</td>
</tr>
<tr>
<td>Z</td>
<td>EXIT_ZOMBIEï¼šå­è¿›ç¨‹åœ¨é€€å‡ºæ—¶å‘çˆ¶è¿›ç¨‹å‘å‡ºä¿¡å·ã€‚é™¤è¿›ç¨‹èº«ä»½ï¼ˆPIDï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ„æºéƒ½å·²é‡Šæ”¾</td>
</tr>
<tr>
<td>X</td>
<td>EXIT_DEADï¼šå½“çˆ¶è¿›ç¨‹æ¸…ç†ï¼ˆè·å–ï¼‰å‰©ä½™çš„å­è¿›ç¨‹ç»“æ„æ—¶ï¼Œè¿›ç¨‹ç°åœ¨å·²å½»åº•é‡Šæ”¾ã€‚æ­¤çŠ¶æ€ä»ä¸ä¼šåœ¨è¿›ç¨‹åˆ—å‡ºå®ç”¨ç¨‹åºä¸­çœ‹åˆ°</td>
</tr>
<tr>
<td>&lt;</td>
<td>é«˜ä¼˜å…ˆçº§è¿›ç¨‹</td>
</tr>
<tr>
<td>N</td>
<td>ä½ä¼˜å…ˆçº§è¿›ç¨‹</td>
</tr>
<tr>
<td>+</td>
<td>å‰å°è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹</td>
</tr>
<tr>
<td>|</td>
<td>å¤šçº¿ç¨‹è¿›ç¨‹</td>
</tr>
<tr>
<td>s</td>
<td>ä¼šè¯è¿›ç¨‹é¦–è¿›ç¨‹</td>
</tr>
</tbody></table>
<h2 id="è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h2><h4 id="linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡"><a href="#linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡" class="headerlink" title="linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡"></a>linuxè¿›ç¨‹è°ƒåº¦ä¸å¤šä»»åŠ¡</h4><p>ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­æ—¢åŒ…å«æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤çš„ä½ç«¯å¤„ç†å™¨ï¼Œä¹ŸåŒ…å«é«˜æ€§èƒ½è¶…çº§è®¡ç®—æœºï¼Œè¿™äº›è¶…çº§è®¡ç®—æœºæ¯å°é…å¤‡æ•°ç™¾ä¸ªCPUï¼Œæ¯ä¸ªCPUä¸Šå…·æœ‰å¤šä¸ªæ ¸å¿ƒï¼Œå®ƒä»¬å¯ä»¥å¹¶è¡Œæ‰§è¡Œæ•°ä»¥ç™¾è®¡çš„æŒ‡ä»¤ã€‚ä½†æ˜¯æ‰€æœ‰è¿™äº›ç³»ç»Ÿå¾€å¾€å…·æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬éœ€è¦è¿è¡Œçš„è¿›ç¨‹æ•°é‡æ€»æ˜¯è¶…å‡ºå®é™…å…·æœ‰çš„æ ¸å¿ƒæ•°ã€‚</p>
<p>é€šè¿‡æ—¶é—´åˆ†ç‰‡æŠ€æœ¯ï¼ŒLinuxï¼ˆå’Œå…¶ä»–æ“ä½œç³»ç»Ÿï¼‰å®é™…èƒ½å¤Ÿè¿è¡Œçš„è¿›ç¨‹æ•°ï¼ˆå’Œçº¿ç¨‹æ•°ï¼‰å¯ä»¥è¶…å‡ºå¯ç”¨çš„å®é™…å¤„ç†å•å…ƒæ•°ã€‚æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦ç¨‹åºå°†åœ¨å•ä¸ªæ ¸å¿ƒä¸Šçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œå¿«é€Ÿåˆ‡æ¢ï¼Œä»è€Œç»™ç”¨æˆ·ä¸€ç§æœ‰å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œçš„å°è±¡ã€‚</p>
<p>æ‰§è¡Œæ­¤åˆ‡æ¢çš„Linuxå†…æ ¸éƒ¨åˆ†ç§°ä¸ºè¿›ç¨‹è°ƒåº¦ç¨‹åºã€‚</p>
<h4 id="è¿›ç¨‹ä¼˜å…ˆçº§-1"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§-1" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§"></a>è¿›ç¨‹ä¼˜å…ˆçº§</h4><ul>
<li>è¿›ç¨‹ä¼˜å…ˆçº§èŒƒå›´ï¼š0-139ï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ <ul>
<li>0-99ï¼šå®æ—¶ä¼˜å…ˆçº§ï¼Œå†…æ ¸è°ƒæ•´</li>
<li>100-139ï¼šé™æ€ä¼˜å…ˆçº§ï¼Œç”¨æˆ·å¯æ§åˆ¶</li>
</ul>
</li>
<li>è¿›ç¨‹ä¼˜å…ˆçº§é«˜çš„ç‰¹ç‚¹ï¼š <ul>
<li>è·å¾—æ›´å¤šçš„CPUè¿è¡Œæ—¶é—´</li>
<li>æ›´ä¼˜å…ˆè·å¾—CPUè¿è¡Œçš„æœºä¼š</li>
</ul>
</li>
</ul>
<p>è¦ä¿®æ”¹è¿›ç¨‹çš„ä¼˜å…ˆçº§å¯ä»¥é€šè¿‡è°ƒæ•´è¿›ç¨‹çš„niceå€¼æ¥å®ç°ï¼Œniceå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼š niceå€¼çš„èŒƒå›´æ˜¯ï¼ˆ-20ï¼Œ19ï¼‰ï¼Œ-20å¯¹åº”100ï¼Œ19å¯¹åº”139 </p>
<h4 id="ç›¸å¯¹ä¼˜å…ˆçº§"><a href="#ç›¸å¯¹ä¼˜å…ˆçº§" class="headerlink" title="ç›¸å¯¹ä¼˜å…ˆçº§"></a>ç›¸å¯¹ä¼˜å…ˆçº§</h4><p>ç”±äºä¸æ˜¯æ¯ç§è¿›ç¨‹éƒ½ä¸å…¶ä»–è¿›ç¨‹åŒæ ·é‡è¦ï¼Œå¯å‘ŠçŸ¥è°ƒåº¦ç¨‹åºä¸ºä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ã€‚å¸¸è§„ç³»ç»Ÿä¸Šè¿è¡Œçš„å¤§å¤šæ•°è¿›ç¨‹æ‰€ä½¿ç”¨çš„è°ƒåº¦ç­–ç•¥ç§°ä¸º<code>SCHED_OTHER</code>(ä¹Ÿç§°ä¸º<code>SCHED_NORMAL</code>)ï¼Œä½†è¿˜æœ‰ä¸€äº›å…¶ä»–ç­–ç•¥å¯ç”¨äºä¸åŒçš„ç›®çš„ã€‚</p>
<p>ç”±äºå¹¶éæ‰€æœ‰è¿›ç¨‹éƒ½ä»¥åŒæ ·çš„æ–¹å¼åˆ›å»ºï¼Œå¯ä¸ºé‡‡ç”¨<code>SCHED_NORMAL</code>ç­–ç•¥è¿è¡Œçš„è¿›ç¨‹æŒ‡å®šç›¸å¯¹ä¼˜å…ˆçº§ã€‚æ­¤ä¼˜å…ˆçº§ç§°ä¸ºè¿›ç¨‹çš„<code>nice</code>å€¼ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰40ç§ä¸åŒçº§åˆ«çš„<code>nice</code>å€¼ã€‚</p>
<p>è¿™äº›<code>nice</code>çº§åˆ«çš„èŒƒå›´æ˜¯ä»-20åˆ°19ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹å°†ç»§æ‰¿å…¶çˆ¶è¿›ç¨‹çš„<code>nice</code>çº§åˆ«ï¼Œé€šå¸¸ä¸º0</p>
<blockquote>
<p><code>nice</code>çº§åˆ«è¶Šé«˜ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§è¶Šä½ï¼ˆè¯¥è¿›ç¨‹å®¹æ˜“å°†å…¶CPUä½¿ç”¨é‡è®©ç»™å…¶ä»–è¿›ç¨‹ï¼‰<br><code>nice</code>çº§åˆ«è¶Šä½ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ï¼ˆè¯¥è¿›ç¨‹æ›´åŠ ä¸å€¾å‘äºè®©å‡ºCPUï¼‰<br>å¦‚æœä¸å­˜åœ¨èµ„æºäº‰ç”¨ï¼ˆä¾‹å¦‚å½“æ´»åŠ¨è¿›ç¨‹æ•°å°‘äºå¯ç”¨CPUæ ¸å¿ƒæ•°æ—¶ï¼‰ï¼Œå³ä½¿<code>nice</code>çº§åˆ«é«˜çš„è¿›ç¨‹ä¹Ÿå°†ä»ä½¿ç”¨å®ƒä»¬å¯ä½¿ç”¨çš„æ‰€æœ‰å¯ç”¨CPUèµ„æºã€‚ä½†å½“è¯·æ±‚CPUæ—¶é—´çš„è¿›ç¨‹æ•°è¶…è¿‡å¯ç”¨æ ¸å¿ƒæ•°æ—¶ï¼Œ<code>nice</code>çº§åˆ«è¾ƒé«˜çš„è¿›ç¨‹å°†æ¯”<code>nice</code>çº§åˆ«è¾ƒä½çš„è¿›ç¨‹æ”¶åˆ°æ›´å°‘çš„CPUæ—¶é—´</p>
</blockquote>
<h4 id="niceçº§åˆ«ä¸æƒé™"><a href="#niceçº§åˆ«ä¸æƒé™" class="headerlink" title="niceçº§åˆ«ä¸æƒé™"></a>niceçº§åˆ«ä¸æƒé™</h4><p>ä¸ºå¾ˆå CPUèµ„æºçš„è¿›ç¨‹è®¾ç½®è¾ƒä½çš„<code>nice</code>çº§åˆ«å¯èƒ½ä¼šå¯¹åŒä¸€ç³»ç»Ÿä¸Šè¿è¡Œçš„å…¶ä»–è¿›ç¨‹çš„æ€§èƒ½é€ æˆè´Ÿé¢å½±å“ï¼Œæ‰€ä»¥ä»…å…è®¸rootç”¨æˆ·è®¾ç½®è´Ÿ<code>nice</code>çº§åˆ«ä»¥åŠé™ä½ç°æœ‰è¿›ç¨‹çš„<code>nice</code>çº§åˆ«ã€‚</p>
<p>æ™®é€šéç‰¹æƒç”¨æˆ·ä»…å…è®¸è®¾ç½®æ­£çš„<code>nice</code>çº§åˆ«ã€‚åªèƒ½å¯¹ç°æœ‰è¿›ç¨‹æå‡<code>nice</code>çº§åˆ«ï¼Œè€Œä¸èƒ½é™ä½<code>nice</code>çº§åˆ«ã€‚</p>
<h4 id="è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´"></a>è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´</h4><p>è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´ï¼šè°ƒæ•´niceå€¼</p>
<blockquote>
<p>//è°ƒæ•´å·²ç»å¯åŠ¨çš„è¿›ç¨‹çš„niceå€¼ï¼š<br>    renice NI PIDï¼ˆä¾‹ï¼šrenice 3 3704ï¼‰<br>//åœ¨å¯åŠ¨æ—¶æŒ‡å®šniceå€¼ï¼šï¼ˆ-20ï¼Œ19ï¼‰<br>    nice -n NI COMMAND</p>
</blockquote>
<h2 id="è¿›ç¨‹ç®¡ç†å‘½ä»¤"><a href="#è¿›ç¨‹ç®¡ç†å‘½ä»¤" class="headerlink" title="è¿›ç¨‹ç®¡ç†å‘½ä»¤"></a>è¿›ç¨‹ç®¡ç†å‘½ä»¤</h2><p>Linuxç³»ç»Ÿå„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯å‡ä¿å­˜åœ¨/proc/PIDç›®å½•ä¸‹çš„å„æ–‡ä»¶ä¸­ </p>
<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><p>pså‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹çŠ¶æ€</p>
<blockquote>
<p>-a  æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ï¼‰ </p>
<p>-u  ç”¨æˆ·ä»¥åŠå…¶ä»–è¯¦ç»†ä¿¡æ¯ </p>
<p>-x  æ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ </p>
</blockquote>
<p>Linuxç³»ç»Ÿä¸­æ—¶åˆ»è¿è¡Œç€è®¸å¤šè¿›ç¨‹ï¼Œå¦‚æœèƒ½å¤Ÿåˆç†åœ°ç®¡ç†å®ƒä»¬ï¼Œåˆ™å¯ä»¥ä¼˜åŒ–ç³»ç»Ÿçš„æ€§èƒ½ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæœ‰5ç§å¸¸è§çš„è¿›ç¨‹çŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºè¿è¡Œã€ä¸­æ–­ã€ä¸å¯ä¸­æ–­ã€åƒµæ­»ä¸åœæ­¢ï¼Œå…¶å„è‡ªå«ä¹‰å¦‚ä¸‹æ‰€ç¤ºã€‚ </p>
<blockquote>
<p><strong>Rï¼ˆè¿è¡Œï¼‰ï¼š</strong>è¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</p>
<p><strong>Sï¼ˆä¸­æ–­ï¼‰ï¼š</strong>è¿›ç¨‹å¤„äºä¼‘çœ ä¸­ï¼Œå½“æŸä¸ªæ¡ä»¶å½¢æˆåæˆ–è€…æ¥æ”¶åˆ°ä¿¡å·æ—¶ï¼Œåˆ™è„±ç¦»è¯¥   çŠ¶æ€ã€‚</p>
<p><strong>Dï¼ˆä¸å¯ä¸­æ–­ï¼‰ï¼š</strong>è¿›ç¨‹ä¸å“åº”ç³»ç»Ÿå¼‚æ­¥ä¿¡å·ï¼Œå³ä¾¿ç”¨killå‘½ä»¤ä¹Ÿä¸èƒ½å°†å…¶ä¸­æ–­ã€‚</p>
<p><strong>Zï¼ˆåƒµæ­»ï¼‰ï¼š</strong>è¿›ç¨‹å·²ç»ç»ˆæ­¢ï¼Œä½†è¿›ç¨‹æè¿°ç¬¦ä¾ç„¶å­˜åœ¨, ç›´åˆ°çˆ¶è¿›ç¨‹è°ƒç”¨wait4()ç³»ç»Ÿå‡½æ•°åå°†è¿›ç¨‹é‡Šæ”¾ã€‚</p>
<p><strong>Tï¼ˆåœæ­¢ï¼‰ï¼š</strong>è¿›ç¨‹æ”¶åˆ°åœæ­¢ä¿¡å·ååœæ­¢è¿è¡Œã€‚</p>
</blockquote>
<p>å½“æ‰§è¡Œps auxå‘½ä»¤åé€šå¸¸ä¼šçœ‹åˆ°å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># ps aux</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.0  0.3  50776  7212 ?        Ss   4æœˆ08   0:01 /usr/lib/syst</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [kthreadd]</span><br><span class="line">root          3  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [ksoftirqd/0]</span><br><span class="line">root          5  0.0  0.0      0     0 ?        S&lt;   4æœˆ08   0:00 [kworker/0:0H</span><br><span class="line">root          7  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [migration/0]</span><br><span class="line">root          8  0.0  0.0      0     0 ?        S    4æœˆ08   0:00 [rcu_bh]</span><br><span class="line">...............................ä»¥ä¸‹çœç•¥...............................</span><br></pre></td></tr></table></figure>

<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><p>pstreeç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸Šçš„è¿›ç¨‹æ ‘ </p>
<blockquote>
<p> å¦‚æœæ²¡æœ‰ ä½¿ç”¨yumå®‰è£…</p>
<p>yum install -y psmisc</p>
</blockquote>
<h4 id="pgrep"><a href="#pgrep" class="headerlink" title="pgrep"></a>pgrep</h4><p>ä»¥grepé£æ ¼æŒ‡å®šåªæ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Œåœ¨å½“å‰ç³»ç»Ÿä¸­æ‰¾ç¬¦åˆæŸäº›ç‰¹æ€§çš„è¿›ç¨‹ã€‚åªæ˜¾ç¤ºè¿›ç¨‹å· </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># pgrep vim</span></span><br><span class="line">3469</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps aux | grep vim</span></span><br><span class="line">root       3469  0.0  0.2 151920  5036 pts/0    S+   01:24   0:00 vim 1</span><br><span class="line">root       3502  0.0  0.0 112656   988 pts/2    R+   01:32   0:00 grep --color=auto vim</span><br></pre></td></tr></table></figure>

<h4 id="pidof"><a href="#pidof" class="headerlink" title="pidof"></a>pidof</h4><p>pidofå‘½ä»¤ç”¨äºæŸ¥è¯¢æŸä¸ªæŒ‡å®šæœåŠ¡è¿›ç¨‹çš„PIDå€¼</p>
<p>æ¯ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·ç å€¼ï¼ˆPIDï¼‰æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡PIDæ¥åŒºåˆ†ä¸åŒçš„è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥è¯¢æœ¬æœºä¸Šæ­£åœ¨è¿è¡Œçš„vimçš„PIDï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸Šè¾“å…¥ï¼š</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># vim a</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸Šè¾“å…¥ï¼š</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># pidof vim</span></span><br><span class="line">3358</span><br></pre></td></tr></table></figure>

<h4 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h4><p>è™šæ‹Ÿå†…å­˜çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ </p>
<blockquote>
<p>vmstat 2        //è¡¨ç¤ºæ¯2ç§’åˆ·æ–°ä¸€æ¬¡<br>vmstat 2   5      //è¡¨ç¤ºæ¯2ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œåˆ·æ–°5æ¬¡åé€€å‡º</p>
<p> -s          //æ˜¾ç¤ºå†…å­˜çš„ç»Ÿè®¡æ•°æ®  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vmstat</span></span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 2  0      0 1489572   1524 152768    0    0     8     2   12   21  0  0 100  0  0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>procsï¼š<br>    rï¼ˆrunningï¼‰  //è¡¨ç¤ºç­‰å¾…è¿è¡Œçš„é˜Ÿåˆ—é•¿åº¦ï¼Œä¹Ÿå³ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹çš„ä¸ªæ•°<br>    bï¼ˆblockï¼‰    //è¡¨ç¤ºé˜»å¡é˜Ÿåˆ—é•¿åº¦ï¼Œä¹Ÿå³å¤„äºä¸å¯ä¸­æ–­ç¡çœ æ€çš„è¿›ç¨‹ä¸ªæ•°<br>memoryï¼š<br>    swpd        //äº¤æ¢å†…å­˜çš„ä½¿ç”¨æ€»é‡<br>    free        //ç©ºé—²ç‰©ç†å†…å­˜æ€»é‡<br>    buffer      //ç”¨äºbufferçš„å†…å­˜æ€»é‡<br>    cache       //ç”¨äºcacheçš„å†…å­˜æ€»é‡<br>swapï¼š<br>    siï¼ˆswap inï¼‰     //è¡¨ç¤ºä»ç‰©ç†å†…å­˜æœ‰å¤šå°‘é¡µé¢æ¢è¿›swapï¼Œä¹Ÿå³æ•°æ®è¿›å…¥swapçš„æ•°æ®é€Ÿç‡ï¼ˆkb/sï¼‰<br>    soï¼ˆswap outï¼‰    //è¡¨ç¤ºä»swapæœ‰å¤šå°‘é¡µé¢æ¢è¿›ç‰©ç†å†…å­˜ï¼Œä¹Ÿå³æ•°æ®ç¦»å¼€swapçš„æ•°æ®é€Ÿç‡ï¼ˆkb/sï¼‰<br>ioï¼š<br>    biï¼ˆblock inï¼‰    //è¡¨ç¤ºç£ç›˜å—æœ‰å¤šå°‘ä¸ªè¢«è°ƒå…¥å†…å­˜ä¸­ï¼Œä¹Ÿå³ä»å—è®¾å¤‡è¯»å…¥æ•°æ®åˆ°ç³»ç»Ÿçš„é€Ÿç‡ï¼ˆkb/sï¼‰<br>    boï¼ˆblock outï¼‰   //è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªç£ç›˜å—ä»å†…å­˜ä¸­è¢«åŒæ­¥åˆ°ç¡¬ç›˜ä¸Šå»äº†ï¼Œä¹Ÿå³ä¿å­˜æ•°æ®è‡³å—è®¾å¤‡çš„é€Ÿç‡ï¼ˆkb/sï¼‰<br>systemï¼š<br>    inï¼ˆ interruptsï¼‰     //è¡¨ç¤ºä¸­æ–­çš„ä¸ªæ•°ï¼Œä¹Ÿå³ä¸­æ–­é€Ÿç‡ï¼ˆkb/sï¼‰<br>    csï¼ˆcontext switchï¼‰  //è¡¨ç¤ºä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¬¡æ•°ï¼Œä¹Ÿå³è¿›ç¨‹åˆ‡æ¢é€Ÿç‡ï¼ˆkb/sï¼‰<br>CPUï¼š<br>    us      //è¡¨ç¤ºç”¨æˆ·ç©ºé—´<br>    sy      //è¡¨ç¤ºå†…æ ¸ç©ºé—´<br>    id      //è¡¨ç¤ºç©ºé—²ç™¾åˆ†æ¯”<br>    wa      //è¡¨ç¤ºç­‰å¾…IOå®Œæˆæ‰€å æ®çš„æ—¶é—´ç™¾åˆ†æ¯”<br>    st      //è¡¨ç¤ºstealï¼Œè¢«è™šæ‹ŸåŒ–æŠ€æœ¯å·èµ°çš„æ—¶é—´ï¼ˆæ¯”å¦‚è¿è¡Œè™šæ‹Ÿæœºï¼‰</p>
</blockquote>
<h2 id="æ§åˆ¶ä½œä¸š"><a href="#æ§åˆ¶ä½œä¸š" class="headerlink" title="æ§åˆ¶ä½œä¸š"></a>æ§åˆ¶ä½œä¸š</h2><h4 id="ä½œä¸šä¸ä¼šè¯"><a href="#ä½œä¸šä¸ä¼šè¯" class="headerlink" title="ä½œä¸šä¸ä¼šè¯"></a>ä½œä¸šä¸ä¼šè¯</h4><p>ä½œä¸šæ§åˆ¶æ˜¯<code>shell</code>çš„ä¸€ç§åŠŸèƒ½ï¼Œå®ƒå…è®¸å•ä¸ªshellå®ä¾‹è¿è¡Œå’Œç®¡ç†å¤šä¸ªå‘½ä»¤ã€‚</p>
<p>ä½œä¸šä¸åœ¨<code>shell</code>æç¤ºç¬¦ä¸­è¾“å…¥çš„æ¯ä¸ªç®¡é“ç›¸å…³è”ã€‚è¯¥ç®¡é“ä¸­çš„æ‰€æœ‰è¿›ç¨‹å‡æ˜¯ä½œä¸šçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ç»„çš„æˆå‘˜ã€‚ï¼ˆå¦‚æœåœ¨<code>shell</code>æç¤ºç¬¦ä¸­ä»…è¾“å…¥äº†ä¸€æ¡å‘½ä»¤ï¼Œåˆ™è¿™æ¡å‘½ä»¤å¯è§†ä¸ºå‘½ä»¤çš„æœ€å°ç®¡é“ã€‚è¯¥å‘½ä»¤å°†æ˜¯è¯¥ä½œä¸šçš„å”¯ä¸€æˆå‘˜ï¼‰</p>
<p>ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªä½œä¸šä»ç‰¹å®šç»ˆç«¯çª—å£è¯»å–è¾“å…¥å’Œé”®ç›˜ç”Ÿæˆçš„ä¿¡å·ã€‚å±äºè¯¥ä½œä¸šçš„è¿›ç¨‹æ˜¯è¯¥æ§åˆ¶ç»ˆç«¯çš„å‰å°è¿›ç¨‹ã€‚</p>
<p>è¯¥æ§åˆ¶ç»ˆç«¯çš„åå°è¿›ç¨‹æ˜¯ä¸è¯¥ç»ˆç«¯ç›¸å…³è”çš„ä»»ä½•å…¶ä»–ä½œä¸šçš„æˆå‘˜ã€‚ç»ˆç«¯çš„åå°è¿›ç¨‹æ— æ³•ä»ç»ˆç«¯è¯»å–è¾“å…¥æˆ–æ¥æ”¶é”®ç›˜ç”Ÿæˆçš„ä¸­æ–­ï¼Œä½†å¯ä»¥å†™å…¥ç»ˆç«¯ã€‚åå°ä¸­çš„ä½œä¸šå¯èƒ½å·²åœæ­¢ï¼ˆæš‚åœï¼‰ï¼Œä¹Ÿå¯èƒ½æ­£åœ¨è¿è¡Œã€‚å¦‚æœæŸä¸ªæ­£åœ¨è¿è¡Œçš„åå°ä½œä¸šå°è¯•ä»ç»ˆç«¯è¯»å–å†…å®¹ï¼Œåˆ™è¯¥ä½œä¸šå°†è‡ªåŠ¨æš‚åœã€‚</p>
<p>æ¯ä¸ªç»ˆç«¯æ˜¯å…¶è‡ªèº«çš„ä¼šè¯ï¼Œå¹¶ä¸”å¯ä»¥å…·æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹å’Œå¤šä¸ªç‹¬ç«‹çš„åå°è¿›ç¨‹ã€‚ä¸€ä¸ªä½œä¸šåªèƒ½å±äºä¸€ä¸ªä¼šè¯ï¼Œä¹Ÿå°±æ˜¯å±äºå…¶æ§åˆ¶ç»ˆç«¯çš„ä¼šè¯ã€‚</p>
<h4 id="ä½œä¸šåˆ†ç±»"><a href="#ä½œä¸šåˆ†ç±»" class="headerlink" title="ä½œä¸šåˆ†ç±»"></a>ä½œä¸šåˆ†ç±»</h4><p>Linuxä½œä¸šåˆ†ä¸ºå‰å°ä½œä¸šä¸åå°ä½œä¸šä¸¤ç§ã€‚å…¶å„è‡ªçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‰å°ä½œä¸šï¼šé€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä¸”å¯åŠ¨åä¸€ç›´å æ®äº†å‘½ä»¤æç¤ºç¬¦</li>
<li>åå°ä½œä¸šï¼šå¯ä»¥é€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä½†å¯åŠ¨ä¹‹åï¼Œé‡Šæ”¾å‘½ä»¤æç¤ºç¬¦ï¼Œåç»­çš„æ“ä½œåœ¨åå°å®Œæˆ<ul>
<li>æ­¤ç±»ä½œä¸šè™½ç„¶è¢«é€å¾€åå°è¿è¡Œï¼Œä½†å…¶ä¾ç„¶ä¸ç»ˆç«¯ç›¸å…³ã€‚å¦‚æœå¸Œæœ›é€å¾€åå°åï¼Œå‰¥ç¦»ä¸ç»ˆç«¯çš„å…³ç³»éœ€è¦æ‰§è¡Œï¼ˆnohup COMMAND &amp;ï¼‰</li>
</ul>
</li>
</ul>
<h4 id="åœ¨åå°è¿è¡Œä½œä¸š"><a href="#åœ¨åå°è¿è¡Œä½œä¸š" class="headerlink" title="åœ¨åå°è¿è¡Œä½œä¸š"></a>åœ¨åå°è¿è¡Œä½œä¸š</h4><p>åœ¨å‘½ä»¤åè·Ÿä¸Š&amp;ç¬¦å·å¯ä»¥ç”Ÿæˆä¸€ä¸ªåå°ä½œä¸š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># sleep 1000 &amp;</span></span><br><span class="line">[1] 3538</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># sleep 1000 &amp;</span></span><br><span class="line">[2] 3540</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3475 pts/2    00:00:00 bash</span><br><span class="line">  3538 pts/2    00:00:00 sleep</span><br><span class="line">  3540 pts/2    00:00:00 sleep</span><br><span class="line">  3541 pts/2    00:00:00 ps</span><br></pre></td></tr></table></figure>

<p>jobså‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„åå°ä½œä¸š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<p>fgå‘½ä»¤ç”¨äºå°†åå°ä½œä¸šè°ƒè‡³å‰å°è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fg</span></span><br><span class="line">sleep 1000</span><br></pre></td></tr></table></figure>

<blockquote>
<p> å½“åªæœ‰ä¸€ä¸ªåå°ä½œä¸šæ—¶ï¼Œç›´æ¥ä½¿ç”¨fgå‘½ä»¤ï¼Œä¸è·Ÿä»»ä½•å‚æ•°å³å¯å°†åå°ä½œä¸šè°ƒè‡³å‰å°è¿è¡Œï¼Œä½†æ˜¯å½“æœ‰å¤šä¸ªä½œä¸šæ—¶åˆ™å¿…é¡»è·Ÿä¸Š%+ä½œä¸šå·ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å‘½ä»¤æ‰§è¡Œç»“æœä¸­ä»¥[]æ‹¬èµ·æ¥çš„æ•°å­—ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> ä½¿ç”¨ctrl+zå¯å°†å‰å°è¿›ç¨‹å‘é€åˆ°åå°ï¼Œæ­¤æ—¶ä½œä¸šå°†å¤„äºåœæ­¢çŠ¶æ€</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">sleep 1000</span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               sleep 1000</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨bgå‘½ä»¤+ä½œä¸šå·å¯ä½¿åå°å·²åœæ­¢çš„ä½œä¸šé‡æ–°è¿è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># bg %1</span></span><br><span class="line">[1]+ sleep 1000 &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>killåŠ ä¸Šä½œä¸šå·å¯ä»¥æ‰‹åŠ¨æ€æ­»æŒ‡å®šä½œä¸š</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># kill %1</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]-  å·²ç»ˆæ­¢               sleep 1000</span><br><span class="line">[2]+  è¿è¡Œä¸­               sleep 1000 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> jobså‘½ä»¤çš„ç»“æœä¸­</p>
<ul>
<li>//å‘½ä»¤å°†é»˜è®¤æ“ä½œçš„ä½œä¸š<ul>
<li>//å‘½ä»¤å°†ç¬¬äºŒä¸ªé»˜è®¤æ“ä½œçš„ä½œä¸š</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="è¿›ç¨‹é—´é€šä¿¡"><a href="#è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡"></a>è¿›ç¨‹é—´é€šä¿¡</h2><p>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼šInter Process Communicationï¼‰</p>
<p>è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼š</p>
<ul>
<li><p>åŒä¸€ä¸»æœº</p>
<ul>
<li>å…±äº«å†…å­˜</li>
<li>ä¿¡å·ï¼šSignal</li>
</ul>
</li>
<li><p>ä¸åŒä¸»æœº</p>
<ul>
<li><p>rpcï¼šremote procecure call</p>
<ul>
<li><p>åŸºäºsocketå®ç°è¿›ç¨‹é—´é€šä¿¡</p>
<blockquote>
<p>socket å¥—æ¥å­—  ipåŠ æ¥å£   ss -natl</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹"><a href="#ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹" class="headerlink" title="ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹"></a>ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹</h2><p>ä¿¡å·æ˜¯ä¼ é€’è‡³è¿›ç¨‹çš„è½¯ä»¶ä¸­æ–­ã€‚ä¿¡å·å‘æ‰§è¡Œä¸­çš„ç¨‹åºæŠ¥å‘Šäº‹ä»¶ã€‚ç”Ÿæˆä¿¡å·çš„äº‹ä»¶å¯ä»¥æ˜¯é”™è¯¯æˆ–å¤–éƒ¨äº‹ä»¶ï¼ˆå¦‚I/Oè¯·æ±‚æˆ–è®¡æ—¶å™¨è¿‡æœŸï¼‰ï¼Œæˆ–è€…æ¥è‡ªäºæ˜ç¡®è¯·æ±‚ï¼ˆå¦‚ä½¿ç”¨ä¿¡å·å‘é€å‘½ä»¤ï¼‰</p>
<p>ä¸‹è¡¨åˆ—å‡ºäº†ç³»ç»Ÿç®¡ç†å‘˜ç”¨äºæ—¥å¸¸è¿›ç¨‹ç®¡ç†çš„åŸºæœ¬ä¿¡å·ã€‚è¯·é€šè¿‡çŸ­åç§°ï¼ˆHUPï¼‰æˆ–æ­£ç¡®åç§°ï¼ˆSIGHUPï¼‰æŒ‡ä»£ä¿¡å·ã€‚</p>
<ul>
<li>æŒ‡å®šä¸€ä¸ªä¿¡å·çš„æ–¹æ³•ï¼š <ul>
<li>ä¿¡å·å·ç ï¼ˆæ•°å­—æ ‡è¯†ï¼‰ï¼š<code>kill -1</code></li>
<li>ä¿¡å·å®Œæ•´åç§°ï¼š<code>kill -SIGKILL</code></li>
<li>ä¿¡å·ç®€å†™åç§°ï¼š<code>kill -TERMæˆ–kill -KILLæˆ–kill -INTæˆ–kill -HUP</code></li>
</ul>
</li>
</ul>
<p>åŸºæœ¬è¿›ç¨‹ç®¡ç†ä¿¡å· </p>
<table>
<thead>
<tr>
<th>ä¿¡å·ç¼–å· ID</th>
<th>çŸ­åç§°</th>
<th>å®šä¹‰</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>HUP</td>
<td>æŒ‚èµ·</td>
<td>è®©ä¸€ä¸ªè¿›ç¨‹ä¸ç”¨é‡å¯å°±å¯ä»¥é‡è¯»é…ç½®æ–‡ä»¶ï¼Œå¹¶è®©æ–°çš„é…ç½®ä¿¡æ¯ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>2</td>
<td>INT</td>
<td>é”®ç›˜ä¸­æ–­</td>
<td>ä¸­æ–­ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚ctrl+cå°±æ˜¯ç”¨çš„SIGINTä¿¡å·</td>
</tr>
<tr>
<td>9</td>
<td>KILL</td>
<td>ä¸­æ–­ï¼Œæ— æ³•æ‹¦æˆª</td>
<td>å¯¼è‡´ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚æ— æ³•è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†</td>
</tr>
<tr>
<td>15 é»˜è®¤å€¼</td>
<td>TERM</td>
<td>ç»ˆæ­¢</td>
<td>å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚å’ŒSIGKILLä¸åŒï¼Œå¯ä»¥è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†ã€‚è¦æ±‚ç¨‹åºç»ˆæ­¢çš„å‹å¥½æ–¹å¼ï¼Œå…è®¸è‡ªæˆ‘æ¸…ç†</td>
</tr>
</tbody></table>
<p>ç”¨æˆ·å¯ä»¥ä¸­æ–­è‡ªå·±çš„è¿›ç¨‹ï¼Œä½†åªæœ‰rootæ‰èƒ½ç»ˆæ­¢ç”±å…¶ä»–äººæ‹¥æœ‰çš„è¿›ç¨‹ã€‚</p>
<h4 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h4><p>killå‘½ä»¤æ ¹æ®IDå‘è¿›ç¨‹å‘é€ä¿¡å·ã€‚è™½å…¶åç§°ä¸ºkillï¼Œä½†è¯¥å‘½ä»¤å¯ç”¨äºå‘é€ä»»ä½•ä¿¡å·ï¼Œè€Œä¸ä»…ä»…æ˜¯ç»ˆæ­¢ç¨‹åºçš„ä¿¡å·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># kill -l</span></span><br><span class="line"> 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP</span><br><span class="line"> 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1</span><br><span class="line">11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM</span><br><span class="line">16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span><br><span class="line">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR</span><br><span class="line">31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1  64) SIGRTMAX</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># kill 3571</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3475 pts/2    00:00:00 bash</span><br><span class="line">  3610 pts/2    00:00:00 ps</span><br><span class="line">[2]+  å·²ç»ˆæ­¢               sleep 1000</span><br></pre></td></tr></table></figure>

<h2 id="ç›‘æ§è¿›ç¨‹æ´»åŠ¨"><a href="#ç›‘æ§è¿›ç¨‹æ´»åŠ¨" class="headerlink" title="ç›‘æ§è¿›ç¨‹æ´»åŠ¨"></a>ç›‘æ§è¿›ç¨‹æ´»åŠ¨</h2><h4 id="IOè´Ÿè½½"><a href="#IOè´Ÿè½½" class="headerlink" title="IOè´Ÿè½½"></a>IOè´Ÿè½½</h4><p>è´Ÿè½½å¹³å‡å€¼ä»£è¡¨ä¸€æ®µæ—¶é—´å†…æ„ŸçŸ¥çš„ç³»ç»Ÿè´Ÿè½½ã€‚Linuxé€šè¿‡é¢„æœŸæœåŠ¡ç­‰å¾…æ—¶é—´çš„è¡¨ç¤ºæ¥å®æ–½å¹³å‡è´Ÿè½½è®¡ç®—ã€‚</p>
<p>Linuxä¸ä»…è®¡ç®—è¿›ç¨‹æ•°ï¼Œä¹Ÿä½œä¸ºç‹¬ç«‹çš„ä»»åŠ¡è®¡ç®—çº¿ç¨‹æ•°ã€‚è¿è¡Œä¸­çº¿ç¨‹å’Œç­‰å¾…I/Oèµ„æºçš„çº¿ç¨‹çš„CPUè¯·æ±‚é˜Ÿåˆ—å¯¹åº”äºRå’ŒDè¿›ç¨‹çŠ¶æ€ã€‚ç­‰å¾…I/OåŒ…æ‹¬å¤„äºç¡çœ è€Œç­‰å¾…é¢„æœŸç£ç›˜å’Œç½‘ç»œå“åº”çš„ä»»åŠ¡ã€‚</p>
<p>è´Ÿè½½æ•°å±äºå…¨å±€è®¡æ•°å™¨è®¡ç®—ï¼Œæ˜¯æ‰€æœ‰CPUçš„æ€»å’Œæ•°ã€‚ç”±äºä»ç¡çœ è¿”å›çš„ä»»åŠ¡å¯èƒ½ä¼šé‡æ–°è°ƒåº¦åˆ°ä¸åŒçš„CPUï¼Œéš¾ä»¥ç²¾ç¡®çš„æ¯CPUè®¡æ•°ï¼Œä½†ç´¯è®¡æ•°çš„å‡†ç¡®åº¦å¯ä»¥ä¿éšœã€‚æ˜¾ç¤ºçš„å¹³å‡è´Ÿè½½ä»£è¡¨æ‰€æœ‰çš„CPUã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># grep 'model name' /proc/cpuinfo</span></span><br><span class="line">model name      : Intel(R) Core(TM) i7-7500U CPU @ 2.70GHz</span><br></pre></td></tr></table></figure>

<p>ä¸€äº›UNIXç³»ç»Ÿä»…è€ƒè™‘CPUä½¿ç”¨ç‡æˆ–è¿è¡Œé˜Ÿåˆ—é•¿åº¦æ¥æŒ‡ç¤ºç³»ç»Ÿè´Ÿè½½ã€‚ç”±äºå…·æœ‰ç©ºé—²CPUçš„ç³»ç»Ÿå¯èƒ½ä¼šå› ä¸ºç£ç›˜æˆ–ç½‘ç»œèµ„æºå¿™è€Œé‡åˆ°å¾ˆé•¿æ—¶é—´çš„ç­‰å¾…ï¼Œå› æ­¤Linuxè´Ÿè½½å¹³å‡å€¼ä¸­åŒ…å«äº†å¯¹I/Oçš„è€ƒé‡ã€‚é‡åˆ°è´Ÿè½½å¹³å‡å€¼å¾ˆé«˜ä½†CPUæ´»åŠ¨å¾ˆä½æ—¶ï¼Œè¯·æ£€æŸ¥ç£ç›˜å’Œç½‘ç»œæ´»åŠ¨ã€‚</p>
<p>Linuxä¸­å¯ä»¥ä½¿ç”¨<code>top</code>ã€<code>uptime</code>æ˜¾ç¤ºè´Ÿè½½å¹³å‡å€¼çš„æƒ…å†µã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># uptime</span></span><br><span class="line"> 02:11:29 up  5:54,  3 users,  load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure>

<p>å°†æ˜¾ç¤ºçš„è´Ÿè½½å¹³å‡å€¼é™¤ä»¥ç³»ç»Ÿä¸­çš„é€»è¾‘CPUæ•°ã€‚å½“å€¼ä½äº1è¡¨ç¤ºèµ„æºåˆ©ç”¨ç‡è¾ƒå¥½ï¼Œç­‰å¾…æ—¶é—´å¾ˆçŸ­ã€‚å½“å€¼é«˜äº1è¡¨ç¤ºèµ„æºé¥±å’Œï¼Œè€Œä¸”æœ‰ä¸€å®šçš„æœåŠ¡ç­‰å¾…æ—¶é—´ã€‚</p>
<p>ç©ºé—²CPUé˜Ÿåˆ—çš„è´Ÿè½½æ•°ä¸º0ã€‚æ¯ä¸ªå°±ç»ªå’Œç­‰å¾…çš„çº¿ç¨‹ä½¿è®¡æ•°å¢åŠ 1ã€‚æ€»é˜Ÿåˆ—æ•°ä¸º1æ—¶ï¼Œèµ„æºï¼ˆCPUã€ç£ç›˜æˆ–ç½‘ç»œï¼‰æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œä½†æ²¡æœ‰è¯·æ±‚æŠŠæ—¶é—´èŠ±åœ¨ç­‰å¾…ä¸Šã€‚å¢åŠ çš„è¯·æ±‚æ•°ä¼šç´¯ç§¯è¯¥è®¡æ•°ï¼Œä½†ç”±äºè®¸å¤šè¯·æ±‚å¯ä»¥åœ¨æ—¶é™å†…å¤„ç†ï¼Œèµ„æºä½¿ç”¨ç‡ä¼šå¾ˆé«˜ï¼Œè€Œç­‰å¾…æ—¶é—´åˆ™ä¸ä¼šã€‚</p>
<p>å› ä¸ºç£ç›˜æˆ–ç½‘ç»œèµ„æºå¿™ç¢Œç­‰å¾…I/Oè€Œå¤„äºç¡çœ çš„è¿›ç¨‹åŒ…å«åœ¨è¯¥è®¡æ•°å†…ï¼Œè€Œä¸”ä½¿è´Ÿè½½å¹³å‡å€¼å¢å¤§ã€‚è™½ç„¶ä¸èƒ½è¡¨ç¤ºCPUä½¿ç”¨ç‡ï¼Œé˜Ÿåˆ—æ•°ä¾ç„¶è¡¨æ˜ç”¨æˆ·å’Œç¨‹åºæ­£åœ¨ç­‰å¾…èµ„æºæœåŠ¡ã€‚</p>
<p>åœ¨èµ„æºé¥±å’Œå‰ï¼Œå¹³å‡è´Ÿè½½å°†ä¿æŒåœ¨1ä»¥ä¸‹ï¼Œå› ä¸ºå‡ ä¹ä¸ä¼šåœ¨é˜Ÿåˆ—ä¸­å‘ç°ç­‰å¾…çš„ä»»åŠ¡ã€‚åªæœ‰èµ„æºé¥±å’Œå¯¼è‡´è¯·æ±‚ç•™åœ¨æ’é˜ŸçŠ¶æ€å¹¶ä¸”è¢«è´Ÿè½½è®¡ç®—ä¾‹ç¨‹è®¡æ•°æ—¶ï¼Œè´Ÿè½½å¹³å‡æ‰ä¼šå¢å¤§ã€‚å½“èµ„æºä½¿ç”¨ç‡æ¥è¿‘100%æ—¶ï¼Œæ¯ä¸ªå¢åŠ çš„è¯·æ±‚å°†å¼€å§‹é­é‡æœåŠ¡ç­‰å¾…æ—¶é—´ã€‚</p>
<h4 id="å®æ—¶è¿›ç¨‹ç›‘æ§"><a href="#å®æ—¶è¿›ç¨‹ç›‘æ§" class="headerlink" title="å®æ—¶è¿›ç¨‹ç›‘æ§"></a>å®æ—¶è¿›ç¨‹ç›‘æ§</h4><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><p>topå‘½ä»¤ç”¨äºåŠ¨æ€åœ°ç›‘è§†è¿›ç¨‹æ´»åŠ¨ä¸ç³»ç»Ÿè´Ÿè½½ç­‰ä¿¡æ¯ </p>
<blockquote>
<p>topå‘½ä»¤ç›¸å½“å¼ºå¤§ï¼Œèƒ½å¤ŸåŠ¨æ€åœ°æŸ¥çœ‹ç³»ç»Ÿè¿ç»´çŠ¶æ€ï¼Œå®Œå…¨å°†å®ƒçœ‹ä½œLinuxä¸­çš„â€œå¼ºåŒ–ç‰ˆçš„Windowsä»»åŠ¡ç®¡ç†å™¨â€ .</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">top - 01:07:42 up  4:50,  4 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks: 412 total,   2 running, 410 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem:   1870760 total,   323388 used,  1547372 free,      780 buffers</span><br><span class="line">KiB Swap:  2097148 total,        0 used,  2097148 free.   101676 cached Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">     1 root      20   0   50776   7212   2480 S  0.0  0.4   0:01.26 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd</span><br><span class="line">     3 root      20   0       0      0      0 S  0.0  0.0   0:00.04 ksoftirqd/0</span><br><span class="line">     5 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kworker/0:+</span><br><span class="line">     7 root      rt   0       0      0      0 S  0.0  0.0   0:00.00 migration/0</span><br><span class="line">     8 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcu_bh</span><br><span class="line">     9 root      20   0       0      0      0 S  0.0  0.0   0:00.00 rcuob/0</span><br><span class="line">...............................ä»¥ä¸‹çœç•¥..................................</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç¬¬1è¡Œï¼šç³»ç»Ÿæ—¶é—´ã€è¿è¡Œæ—¶é—´ã€ç™»å½•ç»ˆç«¯æ•°ã€ç³»ç»Ÿè´Ÿè½½ï¼ˆä¸‰ä¸ªæ•°å€¼åˆ†åˆ«ä¸º1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿå†…çš„å¹³å‡å€¼ï¼Œæ•°å€¼è¶Šå°æ„å‘³ç€è´Ÿè½½è¶Šä½ï¼‰ã€‚</p>
<p>ç¬¬2è¡Œï¼šè¿›ç¨‹æ€»æ•°ã€è¿è¡Œä¸­çš„è¿›ç¨‹æ•°ã€ç¡çœ ä¸­çš„è¿›ç¨‹æ•°ã€åœæ­¢çš„è¿›ç¨‹æ•°ã€åƒµæ­»çš„è¿›ç¨‹æ•°ã€‚</p>
<p>ç¬¬3è¡Œï¼šç”¨æˆ·å ç”¨èµ„æºç™¾åˆ†æ¯”ã€ç³»ç»Ÿå†…æ ¸å ç”¨èµ„æºç™¾åˆ†æ¯”ã€æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹èµ„æºç™¾åˆ†æ¯”ã€ç©ºé—²çš„èµ„æºç™¾åˆ†æ¯”ç­‰ã€‚å…¶ä¸­æ•°æ®å‡ä¸ºCPUæ•°æ®å¹¶ä»¥ç™¾åˆ†æ¯”æ ¼å¼æ˜¾ç¤ºï¼Œä¾‹å¦‚â€œ97.1 idâ€æ„å‘³ç€æœ‰97.1%çš„CPUå¤„ç†å™¨èµ„æºå¤„äºç©ºé—²ã€‚</p>
<p>ç¬¬4è¡Œï¼šç‰©ç†å†…å­˜æ€»é‡ã€å†…å­˜ä½¿ç”¨é‡ã€å†…å­˜ç©ºé—²é‡ã€ä½œä¸ºå†…æ ¸ç¼“å­˜çš„å†…å­˜é‡ã€‚</p>
<p>ç¬¬5è¡Œï¼šè™šæ‹Ÿå†…å­˜æ€»é‡ã€è™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ã€è™šæ‹Ÿå†…å­˜ç©ºé—²é‡ã€å·²è¢«æå‰åŠ è½½çš„å†…å­˜é‡ã€‚</p>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p><strong>å†™å‡ºä»¥ä¸‹æè¿°å¯¹åº”çš„è¿›ç¨‹çŠ¶æ€æ ‡å¿—ï¼š</strong></p>
<table>
<thead>
<tr>
<th>æè¿°</th>
<th align="center">çŠ¶æ€æ ‡å¿—</th>
</tr>
</thead>
<tbody><tr>
<td>è¿›ç¨‹å·²è¢«åœæ­¢(æš‚åœ)</td>
<td align="center">T</td>
</tr>
<tr>
<td>è¿›ç¨‹å·²é‡Šæ”¾äº†å…¶æ‰€æœ‰èµ„æº(pidé™¤å¤–)</td>
<td align="center">Z</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£åœ¨CPUä¸Šè¿è¡Œæˆ–è€…æ­£åœ¨ç­‰å¾…äºCPUä¸Šè¿è¡Œ</td>
<td align="center">R</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£å¤„äºç¡çœ çŠ¶æ€ï¼Œç›´è‡³æ»¡è¶³æŸäº›æ¡ä»¶åæ‰ä¼šå¯åŠ¨</td>
<td align="center">S</td>
</tr>
<tr>
<td>è¿›ç¨‹æ­£åœ¨ç­‰å¾…I/Oæˆ–æŸäº›æ¡ä»¶å¾—åˆ°æ»¡è¶³ï¼Œå¹¶ä¸”ç»å¯¹ä¸ä¼šå½±å“ä¿¡å·</td>
<td align="center">D</td>
</tr>
</tbody></table>
<p><strong>æŒ‰ä»¥ä¸‹é¡ºåºç»ƒä¹ åå°ä¸å‰å°è¿›ç¨‹æ“ä½œï¼š</strong></p>
<p>å¹¶æ’æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼Œåˆ†åˆ«ç§°ä¸ºå·¦çª—å£å’Œå³çª—å£</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä»¥ä¸€ç§’ä¸ºé—´éš”æŒç»­å‘~/outfileæ–‡ä»¶é™„åŠ å•è¯â€rockâ€å’Œä¸€ä¸ªç©ºæ ¼ã€‚æ•´ä¸ªå‘½ä»¤é›†å¿…é¡»åŒ…å«åœ¨æ‹¬å·å†…ï¼Œä»¥ä¾¿ä½œä¸šæ§åˆ¶å¯ä»¥å°†è¯¥é›†åˆè§£è¯‘ä¸ºä¸€ä¸ªä½œä¸š</p>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜rock â€˜ &gt;&gt; ~/outfile;sleep 1;done)</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># (while true;do echo -n 'rock ' &gt;&gt; ~/outfile;sleep 1;done)</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å³çª—å£ä¸­ï¼Œä½¿ç”¨<code>tail</code>ç¡®è®¤æ–°è¿›ç¨‹æ­£åœ¨å†™å…¥è¯¥æ–‡ä»¶</p>
<blockquote>
<p> [root@localhost ~]# tail -f ~/outfile</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># tail -f ~/outfile</span></span><br><span class="line">rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock rock</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨<code>ctrl+z</code>å¿«æ·é”®æš‚åœæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚<code>shell</code>å°†è¿”å›ä½œä¸šIDå¹¶ç”¨æ–¹æ‹¬å·æ‹¬èµ·ã€‚åœ¨å³çª—å£ä¸­ç¡®è®¤è¿›ç¨‹è¾“å‡ºå·²ç»åœæ­¢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'rock ' &gt;&gt; ~/outfile;sleep 1;done)</span></span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼ŒæŸ¥çœ‹jobsåˆ—è¡¨ã€‚+è¡¨ç¤ºå½“å‰çš„ä½œä¸šã€‚ä½¿ç”¨<code>bg</code>å‘½ä»¤åœ¨åå°é‡æ–°å¯åŠ¨è¯¥ä½œä¸šï¼Œå¹¶å†æ¬¡æŸ¥çœ‹jobsåˆ—è¡¨ï¼Œåœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤è¿›ç¨‹è¾“å‡ºå†æ¬¡å¤„äºæ´»åŠ¨çŠ¶æ€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># bg</span></span><br><span class="line">[1]+ ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œå†å¯åŠ¨ä¸¤ä¸ªè¿›ç¨‹ï¼Œä»¥ä¾¿å‘åŒä¸€è¾“å‡ºæ–‡ä»¶é™„åŠ å†…å®¹ã€‚å°†â€rockâ€æ›¿æ¢ä¸ºâ€paperâ€ï¼Œå†æ›¿æ¢ä¸ºâ€scissorsâ€ã€‚è¦å°†è¿›ç¨‹æ­£ç¡®ç½®äºåå°ï¼Œæ•´ä¸ªå‘½ä»¤é›†å¿…é¡»åŒ…å«åœ¨æ‹¬å·å†…ï¼Œå¹¶ä¸”ä»¥&amp;ç¬¦å·ç»“å°¾</p>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜paper â€˜ &gt;&gt; ~/outfile;sleep 1;done) &amp;</p>
</blockquote>
<blockquote>
<p>[root@localhost ~]# (while true;do echo -n â€˜scissors â€˜ &gt;&gt; ~/outfile;sleep 1;done) &amp;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'paper ' &gt;&gt; ~/outfile;sleep 1;done) &amp;</span></span><br><span class="line">[3] 3858</span><br><span class="line">[root@zhoulijie ~]<span class="comment">#  (while true;do echo -n 'scissors ' &gt;&gt; ~/outfile;sleep 1;done) &amp;</span></span><br><span class="line">[4] 3887</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œæ£€æŸ¥jobsï¼Œä»¥æŸ¥çœ‹æ‰€æœ‰ä¸‰ä¸ªè¿›ç¨‹éƒ½åœ¨è¿è¡Œä¸­ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤æ‰€æœ‰ä¸‰ä¸ªè¿›ç¨‹éƒ½é™„åŠ å†…å®¹åˆ°æ–‡ä»¶ä¸­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]   è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[2]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[3]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br></pre></td></tr></table></figure>

<p>ä»…ä½¿ç”¨ä¹‹å‰å­¦ä¹ çš„å‘½ä»¤ï¼Œæš‚åœâ€rockâ€è¿›ç¨‹ã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨ä»jobsåˆ—è¡¨ä¸­ç¡®å®šçš„ä½œä¸šIDä½¿ä½œä¸šè¿›å…¥å‰å°ï¼Œç„¶åä½¿ç”¨ctrl+zæš‚åœè¯¥ä½œä¸šï¼Œç¡®è®¤â€rockâ€è¿›ç¨‹ä¸ºå·²åœæ­¢ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤â€rockâ€è¾“å‡ºä¸å†æ´»åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]   è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[2]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[3]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^Z</span><br><span class="line">[1]+  å·²åœæ­¢               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'rock '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br></pre></td></tr></table></figure>

<p>ç»ˆæ­¢â€paperâ€è¿›ç¨‹ã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ä½œä¸šè¿›å…¥å‰å°ï¼Œç„¶åä½¿ç”¨ctrl+cç»ˆæ­¢è¯¥ä½œä¸šï¼Œç¡®è®¤â€paperâ€è¿›ç¨‹å·²ç»æ¶ˆå¤±ã€‚åœ¨å³çª—å£ä¸­ï¼Œç¡®è®¤â€paperâ€è¾“å‡ºä¸å†æ´»åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[3]-  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[4]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %4</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'paper '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^C</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors scissors</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¦çª—å£ä¸­ï¼Œä½¿ç”¨psæŸ¥çœ‹å‰©ä½™çš„ä½œä¸šã€‚æš‚åœä¸­çš„ä½œä¸šå…·æœ‰çŠ¶æ€Tæ ‡å¿—ã€‚å…¶ä»–åå°ä½œä¸šä¸ºç¡çœ ä¸­(S)ï¼Œå› ä¸ºpsåœ¨æ˜¾ç¤ºæ—¶å¤„äºâ€CPUä¸Šâ€(R)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# ps j</span><br><span class="line">  PPID    PID   PGID    SID TTY       TPGID STAT   UID   TIME COMMAND</span><br><span class="line">   960   2580   2580   2580 tty1       2580 Ss+      0   0:00 -bash</span><br><span class="line">  3333   3337   3337   3337 pts/0      4653 Ss       0   0:00 -bash</span><br><span class="line">  3470   3475   3475   3475 pts/2      5657 Ss       0   0:00 -bash</span><br><span class="line">  3337   3690   3690   3337 pts/0      4653 T        0   0:00 tail -f /root/outfil</span><br><span class="line">  3337   4653   4653   3337 pts/0      4653 S+       0   0:00 tail -f /root/outfil</span><br><span class="line">  3475   4699   4699   3475 pts/2      5657 S        0   0:00 -bash</span><br><span class="line">  4699   5656   4699   3475 pts/2      5657 S        0   0:00 sleep 1</span><br><span class="line">  3475   5657   5657   3475 pts/2      5657 R+       0   0:00 ps j</span><br></pre></td></tr></table></figure>

<p>åœæ­¢å‰©ä½™çš„ä¸¤ä¸ªä½œä¸šã€‚åœ¨å·¦çª—å£ä¸­ï¼Œä½¿å…¶ä¸­ä¸€ä¸ªä½œä¸šè¿›å…¥å‰å°ã€‚ä½¿ç”¨ctrl+cå°†å…¶ç»ˆæ­¢ï¼Œå¯¹å‰©ä½™çš„ä½œä¸šé‡å¤æ­¤æ“ä½œã€‚åœæ­¢çš„ä½œä¸šåœ¨å‰å…¥å‰å°æ—¶ä¼šä¸´æ—¶é‡æ–°å¯åŠ¨ã€‚ç¡®è®¤æ²¡æœ‰å‰©ä½™çš„ä½œä¸šï¼Œè¾“å‡ºä¹Ÿå·²åœæ­¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  è¿è¡Œä¸­               ( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> ) &amp;</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># fg %1</span></span><br><span class="line">( <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">'scissors '</span> &gt;&gt; ~/outfile; sleep 1;</span><br><span class="line"><span class="keyword">done</span> )</span><br><span class="line">^C</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># jobs</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å³çª—å£ä¸­ï¼Œåœæ­¢tailå‘½ä»¤ã€‚å…³é—­å¤šä½™çš„ç»ˆç«¯çª—å£</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3337 pts/0    00:00:00 bash</span><br><span class="line">  3690 pts/0    00:00:00 tail</span><br><span class="line">  5870 pts/0    00:00:00 ps</span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># kill 3690</span></span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  5876 pts/0    00:00:00 bash</span><br><span class="line">  5897 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/9.linux--linuxè¿›ç¨‹ç®¡ç†/" data-id="ck7ooyalk003i4su6wznu84g5"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-8.linux--è½¯ä»¶ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/"
    >è½¯ä»¶ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.566Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="è½¯ä»¶åŒ…çš„é€”å¾„"><a href="#è½¯ä»¶åŒ…çš„é€”å¾„" class="headerlink" title="è½¯ä»¶åŒ…çš„é€”å¾„"></a>è½¯ä»¶åŒ…çš„é€”å¾„</h2><h2 id="è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£"><a href="#è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£"></a>è½¯ä»¶åŒ…ç®¡ç†çš„èŒè´£</h2><ul>
<li>å°†äºŒè¿›åˆ¶ç¨‹åºï¼Œåº“æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œå¸®åŠ©æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼›</li>
<li>å®‰è£…è½¯ä»¶æ—¶æŒ‰éœ€å°†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåº“æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œå¸®åŠ©æ–‡ä»¶æ”¾åˆ°ç›¸åº”çš„ä½ç½®ï¼›</li>
<li>ç”Ÿæˆæ•°æ®åº“ï¼Œè¿½è¸ªæ‰€å®‰è£…çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼›</li>
<li>è½¯ä»¶å¸è½½æ—¶æ ¹æ®å®‰è£…æ—¶ç”Ÿæˆçš„æ•°æ®åº“å°†å¯¹åº”çš„æ–‡ä»¶åˆ é™¤</li>
</ul>
<h2 id="è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½"><a href="#è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½"></a>è½¯ä»¶åŒ…ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½</h2><ul>
<li>åˆ¶ä½œè½¯ä»¶åŒ…</li>
<li>å®‰è£…è½¯ä»¶</li>
<li>å¸è½½è½¯ä»¶</li>
<li>å‡çº§è½¯ä»¶</li>
<li>æŸ¥è¯¢è½¯ä»¶</li>
<li>æ ¡éªŒè½¯ä»¶</li>
</ul>
<h2 id="è½¯ä»¶åŒ…ç®¡ç†"><a href="#è½¯ä»¶åŒ…ç®¡ç†" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†"></a>è½¯ä»¶åŒ…ç®¡ç†</h2><h2 id="è½¯ä»¶åŒ…åˆ†ç±»"><a href="#è½¯ä»¶åŒ…åˆ†ç±»" class="headerlink" title="è½¯ä»¶åŒ…åˆ†ç±»"></a>è½¯ä»¶åŒ…åˆ†ç±»</h2><h2 id="è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"><a href="#è½¯ä»¶åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"></a>è½¯ä»¶åŒ…ç®¡ç†å·¥å…·</h2><h2 id="è½¯ä»¶å®‰è£…æ–¹å¼"><a href="#è½¯ä»¶å®‰è£…æ–¹å¼" class="headerlink" title="è½¯ä»¶å®‰è£…æ–¹å¼"></a>è½¯ä»¶å®‰è£…æ–¹å¼</h2><ul>
<li>é€šè¿‡å‰ç«¯å·¥å…·å®‰è£…</li>
<li>é€šè¿‡åç«¯å·¥å…·å®‰è£…</li>
<li>ç¼–è¯‘å®‰è£…</li>
</ul>
<h2 id="rpmåŒ…å‘½åè§„èŒƒ"><a href="#rpmåŒ…å‘½åè§„èŒƒ" class="headerlink" title="rpmåŒ…å‘½åè§„èŒƒ"></a>rpmåŒ…å‘½åè§„èŒƒ</h2><p><img src="https://s2.ax1x.com/2019/04/23/EErG2q.jpg" alt></p>
<h2 id="rpmåŒ…ç®¡ç†"><a href="#rpmåŒ…ç®¡ç†" class="headerlink" title="rpmåŒ…ç®¡ç†"></a>rpmåŒ…ç®¡ç†</h2><h2 id="ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨"><a href="#ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨"></a>ä»€ä¹ˆæ˜¯rpmåŒ…åŠå…¶ä½œç”¨</h2><p>rpmæ˜¯Redhat Package Managerçš„ç®€ç§°ï¼Œç”¨äºç®¡ç†è½¯ä»¶åŒ…ã€‚ rpmæœ‰ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“/var/lib/rpmã€‚ rpmçš„ç®¡ç†å·¥ä½œåŒ…æ‹¬è½¯ä»¶çš„å®‰è£…ã€å¸è½½ã€å‡çº§ã€æŸ¥è¯¢ã€æ ¡éªŒã€é‡å»ºæ•°æ®åº“ã€éªŒè¯è½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§ç­‰ç­‰ã€‚</p>
<h4 id="rpmåŒ…å®‰è£…"><a href="#rpmåŒ…å®‰è£…" class="headerlink" title="rpmåŒ…å®‰è£…"></a>rpmåŒ…å®‰è£…</h4><blockquote>
<p>è¯­æ³•: rpm -ivh /PATH/TO/PACKAGE_FILE â€¦</p>
<p>å¸¸ç”¨é€‰é¡¹ï¼š<br>    -i: å®‰è£…<br>    -v: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<br>    -h: æ˜¾ç¤ºå®‰è£…è¿›åº¦æ¡<br>    â€“test: æµ‹è¯•å®‰è£…ï¼Œä½†ä¸çœŸæ­£æ‰§è¡Œå®‰è£…è¿‡ç¨‹<br>    â€“nodeps: å¿½ç•¥ä¾èµ–å…³ç³»<br>    â€“replacepkgs: é‡æ–°å®‰è£…ï¼Œæ›¿æ¢åŸæœ‰å®‰è£…<br>    â€“oldpackage: é™çº§<br>    â€“force: å¼ºè¡Œå®‰è£…ï¼Œå¯ä»¥å®ç°é‡è£…æˆ–é™çº§<br>    â€“nodigest: ä¸æ£€æŸ¥åŒ…çš„å®Œæ•´æ€§<br>    â€“nosignature: ä¸æ£€æŸ¥åŒ…çš„æ¥æºåˆæ³•æ€§<br>    â€“noscripts: ä¸æ‰§è¡Œç¨‹åºåŒ…è„šæœ¬ç‰‡æ–­<br>        %preï¼šå®‰è£…å‰è„šæœ¬    â€“nopre<br>        %postï¼šå®‰è£…åè„šæœ¬    â€“nopost<br>        %preunï¼šå¸è½½å‰è„šæœ¬    â€“nopreun<br>        %postunï¼šå¸è½½åè„šæœ¬    â€“nopostun</p>
</blockquote>
<h6 id="å®‰è£…è½¯ä»¶åŒ…-éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„"><a href="#å®‰è£…è½¯ä»¶åŒ…-éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…, éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„"></a>å®‰è£…è½¯ä»¶åŒ…, éœ€è¦æŒ‡å®šè½¯ä»¶åŒ…ç»å¯¹è·¯å¾„</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„"><a href="#åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„" class="headerlink" title="åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„"></a>åœ¨è½¯ä»¶åŒ…æ‰€åœ¨ç›®å½•ä¸‹å¯ä»¥ä¸æŒ‡å®šç»å¯¹è·¯å¾„</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /mnt/cdrom/Packages/</span></span><br><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼štree-1.6.0-10.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:tree-1.6.0-10.el7                <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…"><a href="#æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…" class="headerlink" title="æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…"></a>æµ‹è¯•ä¸€ä¸ªè½¯ä»¶åŒ…æ˜¯å¦èƒ½åœ¨è¯¥ç³»ç»Ÿä¸Šå®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --test vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br><span class="line">è­¦å‘Šï¼š/mnt/cdrom/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">	è½¯ä»¶åŒ… vsftpd-3.0.2-22.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h6 id="å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨-å¼ºåˆ¶å†æ¬¡å®‰è£…"><a href="#å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨-å¼ºåˆ¶å†æ¬¡å®‰è£…" class="headerlink" title="å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨, å¼ºåˆ¶å†æ¬¡å®‰è£…"></a>å¦‚æœè½¯ä»¶åŒ…å­˜åœ¨, å¼ºåˆ¶å†æ¬¡å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --force vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h6 id="å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶-ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…"><a href="#å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶-ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…" class="headerlink" title="å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶, ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…"></a>å®‰è£…sambaæœåŠ¡éœ€è¦ä¾èµ–å…¶ä»–ç»„ä»¶, ä½¿ç”¨â€“nodepså¯é‡æ–°å¼ºåˆ¶å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --nodeps tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼štree-1.6.0-10.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          <span class="comment">################################# [100%]</span></span><br><span class="line">	è½¯ä»¶åŒ… tree-1.6.0-10.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…æŸ¥è¯¢"><a href="#rpmåŒ…æŸ¥è¯¢" class="headerlink" title="rpmåŒ…æŸ¥è¯¢"></a>rpmåŒ…æŸ¥è¯¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rpm -q PACKAGE_NAME                 //æŸ¥è¯¢æŒ‡å®šçš„åŒ…æ˜¯å¦å·²å®‰è£…</span><br><span class="line">rpm -qa                             //æŸ¥è¯¢å·²ç»å®‰è£…çš„æ‰€æœ‰åŒ…</span><br><span class="line">rpm -qi PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…çš„è¯´æ˜ä¿¡æ¯</span><br><span class="line">rpm -ql PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…å®‰è£…åç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">rpm -qf /path/to/somefile           //æŸ¥è¯¢æŒ‡å®šçš„æ–‡ä»¶æ˜¯ç”±å“ªä¸ªrpmåŒ…å®‰è£…ç”Ÿæˆçš„</span><br><span class="line">rpm -qc PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…å®‰è£…çš„é…ç½®æ–‡ä»¶</span><br><span class="line">rpm -qd PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šåŒ…å®‰è£…çš„å¸®åŠ©æ–‡ä»¶</span><br><span class="line">rpm -q --scripts PACKAGE_NAME       //æŸ¥è¯¢æŒ‡å®šåŒ…ä¸­åŒ…å«çš„è„šæœ¬</span><br><span class="line">rpm -q --whatprovides CAPABILITY    //æŸ¥è¯¢æŒ‡å®šçš„CAPABILITYï¼ˆèƒ½åŠ›ï¼‰ç”±å“ªä¸ªåŒ…æ‰€æä¾›</span><br><span class="line">    å¦‚ï¼šrpm -q --whatprovides /bin/cat</span><br><span class="line">rpm -q --whatrequires CAPABILITY    //æŸ¥è¯¢æŒ‡å®šçš„CAPABILITYè¢«å“ªä¸ªåŒ…æ‰€ä¾èµ–</span><br><span class="line">rpm -q --changelog COMMAND          //æŸ¥è¯¢COMMANDçš„åˆ¶ä½œæ—¥å¿—</span><br><span class="line">rpm -q --scripts PACKAGE_NAME       //æŸ¥è¯¢æŒ‡å®šè½¯ä»¶åŒ…åŒ…å«çš„æ‰€æœ‰è„šæœ¬æ–‡ä»¶</span><br><span class="line">rpm -qR PACKAGE_NAME                //æŸ¥è¯¢æŒ‡å®šçš„è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„CAPABILITY</span><br><span class="line">rpm -q --provides PACKAGE_NAME      //åˆ—å‡ºæŒ‡å®šè½¯ä»¶åŒ…æ‰€æä¾›çš„CAPABILITY</span><br><span class="line"></span><br><span class="line">rpm -qpi /PATH/TO/PACKAGE_FILE      //æŸ¥è¯¢æŒ‡å®šæœªå®‰è£…åŒ…çš„è¯´æ˜ä¿¡æ¯</span><br><span class="line">rpm -qpl /PATH/TO/PACKAGE_FILE      //æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…"><a href="#æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…" class="headerlink" title="æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…"></a>æŸ¥è¯¢vsftpdè¿™ä¸ªrpmåŒ…æ˜¯å¦å®‰è£…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -q vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…"><a href="#æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…" class="headerlink" title="æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…"></a>æ¨¡ç³ŠæŸ¥æ‰¾ç³»ç»Ÿå·²å®‰è£…çš„rpmåŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qa |grep vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯"><a href="#æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯"></a>æŸ¥è¯¢vsftpdè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qi vsftpd</span></span><br><span class="line">Name        : vsftpd</span><br><span class="line">Version     : 3.0.2</span><br><span class="line">Release     : 22.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: 2019å¹´04æœˆ23æ—¥ æ˜ŸæœŸäºŒ 21æ—¶46åˆ†42ç§’</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 356220</span><br><span class="line">License     : GPLv2 with exceptions</span><br><span class="line">Signature   : RSA/SHA256, 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†48ç§’, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM  : vsftpd-3.0.2-22.el7.src.rpm</span><br><span class="line">Build Date  : 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶01åˆ†19ç§’</span><br><span class="line">Build Host  : x86-034.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor      : Red Hat, Inc.</span><br><span class="line">URL         : https://security.appspot.com/vsftpd.html</span><br><span class="line">Summary     : Very Secure Ftp Daemon</span><br><span class="line">Description :</span><br><span class="line">vsftpd is a Very Secure FTP daemon. It was written completely from</span><br><span class="line">scratch.</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶"><a href="#æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶"></a>æŸ¥è¯¢rpmåŒ…æ‰€å®‰è£…çš„æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line">/etc/vsftpd/vsftpd_conf_migrate.sh</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚çœç•¥ä»¥ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶"><a href="#æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶"></a>æŸ¥è¯¢rpmåŒ…ç›¸å…³çš„é…ç½®æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qc vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…"><a href="#æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…" class="headerlink" title="æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…"></a>æŸ¥è¯¢é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤æ¥è‡ªäºå“ªä¸ªrpmåŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /usr/sbin/vsftpd</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶"><a href="#æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶" class="headerlink" title="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶"></a>æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶åŒ…ä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qlp vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line">/etc/vsftpd/vsftpd_conf_migrate.sh</span><br><span class="line">/usr/lib/systemd/system-generators/vsftpd-generator</span><br><span class="line">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚çœç•¥ä»¥ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯"><a href="#æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯"></a>æŸ¥è¯¢æœªå®‰è£…çš„è½¯ä»¶è¯´æ˜ä¿¡æ¯</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qip vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">Name        : vsftpd</span><br><span class="line">Version     : 3.0.2</span><br><span class="line">Release     : 22.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: (not installed)</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 356220</span><br><span class="line">License     : GPLv2 with exceptions</span><br><span class="line">Signature   : RSA/SHA256, 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†48ç§’, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM  : vsftpd-3.0.2-22.el7.src.rpm</span><br><span class="line">Build Date  : 2017å¹´03æœˆ23æ—¥ æ˜ŸæœŸå›› 22æ—¶01åˆ†19ç§’</span><br><span class="line">Build Host  : x86-034.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor      : Red Hat, Inc.</span><br><span class="line">URL         : https://security.appspot.com/vsftpd.html</span><br><span class="line">Summary     : Very Secure Ftp Daemon</span><br><span class="line">Description :</span><br><span class="line">vsftpd is a Very Secure FTP daemon. It was written completely from</span><br><span class="line">scratch.</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…å‡çº§"><a href="#rpmåŒ…å‡çº§" class="headerlink" title="rpmåŒ…å‡çº§"></a>rpmåŒ…å‡çº§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh /PATH/TO/NEW_PACKAGE_FILE  //å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œåˆ™å®‰è£…</span><br><span class="line">rpm -Fvh /PATH/TO/NEW_PACKAGE_FILE  //å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œé€€å‡º</span><br><span class="line">    --oldpackageï¼šé™çº§</span><br><span class="line">    </span><br><span class="line">[root@zhoulijie Packages]# rpm -Uvh vsftpd-3.0.2-22.el7.x86_64.rpm </span><br><span class="line">è­¦å‘Šï¼švsftpd-3.0.2-22.el7.x86_64.rpm: å¤´V3 RSA/SHA256 Signature, å¯†é’¥ ID fd431d51: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          ################################# [100%]</span><br><span class="line">	è½¯ä»¶åŒ… vsftpd-3.0.2-22.el7.x86_64 å·²ç»å®‰è£…</span><br></pre></td></tr></table></figure>

<h4 id="rpmåŒ…å¸è½½"><a href="#rpmåŒ…å¸è½½" class="headerlink" title="rpmåŒ…å¸è½½"></a>rpmåŒ…å¸è½½</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//è¯­æ³•ï¼šrpm -e PACKAGE_NAME</span><br><span class="line"></span><br><span class="line">//å…ˆæŸ¥è¯¢, ç„¶åå¸è½½ </span><br><span class="line">[root@zhoulijie Packages]# rpm -qa | grep vsftpd</span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br><span class="line">[root@zhoulijie Packages]# rpm -e vsftpd</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong>å¦‚æœå…¶ä»–åŒ…ä¾èµ–äºè¦å¸è½½çš„åŒ…ï¼Œè¿™ä¸ªè¢«ä¾èµ–çš„åŒ…æ˜¯æ— æ³•å¸è½½çš„ï¼Œé™¤éå¼ºåˆ¶å¸è½½ï¼Œå¼ºåˆ¶å¸è½½åä¾èµ–äºè¿™ä¸ªåŒ…çš„å…¶ä»–ç¨‹åºå°†æ— æ³•æ­£å¸¸å·¥ä½œ</p>
<h4 id="rpmåŒ…æ ¡éªŒ"><a href="#rpmåŒ…æ ¡éªŒ" class="headerlink" title="rpmåŒ…æ ¡éªŒ"></a>rpmåŒ…æ ¡éªŒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ— å†…å®¹è¾“å‡ºè¯´æ˜æ­¤åŒ…æœªè¢«ä¿®æ”¹è¿‡</span><br><span class="line">[root@localhost ~]# rpm -V vsftpd</span><br><span class="line">S.5....T.  c /etc/pam.d/vsftpd</span><br><span class="line">.......T.  c /etc/vsftpd/ftpusers</span><br><span class="line">S.5....T.  c /etc/vsftpd/vsftpd.conf</span><br><span class="line">.M.......    /var/ftp/pub</span><br><span class="line"></span><br><span class="line">S   //æ–‡ä»¶çš„å®¹é‡å¤§å°æ˜¯å¦è¢«æ”¹å˜</span><br><span class="line">M   //æ–‡ä»¶çš„ç±»å‹æˆ–è€…æ–‡ä»¶çš„å±æ€§æ˜¯å¦è¢«ä¿®æ”¹</span><br><span class="line">5   //MD5è¿™ä¸€ç§æŒ‡çº¹åŠ å¯†çš„å†…å®¹å·²ç»ä¸åŒ</span><br><span class="line">D   //è£…ç½®çš„ä¸»/æ¬¡ä»£ç å·²ç»æ”¹å˜</span><br><span class="line">L   //è·¯å¾„å·²ç»è¢«æ”¹å˜</span><br><span class="line">U   //æ–‡ä»¶çš„æ‰€å±ä¸»å·²è¢«ä¿®æ”¹</span><br><span class="line">G   //æ–‡ä»¶çš„æ‰€å±ç»„å·²è¢«ä¿®æ”¹</span><br><span class="line">T   //æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´å·²è¢«æ”¹å˜</span><br></pre></td></tr></table></figure>

<h4 id="rpmé‡å»ºæ•°æ®åº“"><a href="#rpmé‡å»ºæ•°æ®åº“" class="headerlink" title="rpmé‡å»ºæ•°æ®åº“"></a>rpmé‡å»ºæ•°æ®åº“</h4><p>æ•°æ®åº“ä¿¡æ¯åœ¨/var/lib/rpmç›®å½•ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm --rebuilddb     //é‡å»ºæ•°æ®åº“ï¼Œä¸€å®šä¼šé‡æ–°å»ºç«‹</span><br><span class="line">rpm --initdb        //åˆå§‹åŒ–æ•°æ®åº“ï¼Œæ²¡æœ‰æ‰å»ºç«‹ï¼Œæœ‰å°±ä¸ç”¨å»ºç«‹</span><br></pre></td></tr></table></figure>

<h4 id="æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§"><a href="#æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§" class="headerlink" title="æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§"></a>æ£€å¯Ÿè½¯ä»¶åŒ…æ¥æºåˆæ³•æ€§å’Œå®Œæ•´æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">åŠ å¯†ç±»å‹ï¼š</span><br><span class="line">    å¯¹ç§°åŠ å¯†    //åŠ å¯†è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥</span><br><span class="line">    å…¬é’¥åŠ å¯†    //ä¸€å¯¹å¯†é’¥ï¼Œå…¬é’¥å’Œç§é’¥ã€‚å…¬é’¥éšå«äºç§é’¥ä¸­ï¼Œå¯ä»¥æå–å‡ºæ¥å¹¶å…¬å¸ƒå‡ºå»</span><br><span class="line">    å•å‘åŠ å¯†    //åªèƒ½åŠ å¯†ä¸èƒ½è§£å¯†</span><br><span class="line">    </span><br><span class="line">/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release     //çº¢å¸½å®˜æ–¹å…¬é’¥</span><br><span class="line"></span><br><span class="line">rpm -K PACKAGE_FILE     //æ£€æŸ¥æŒ‡å®šåŒ…æœ‰æ— å¯†é’¥ä¿¡æ¯</span><br><span class="line">    dsaï¼Œgpg            //éªŒè¯æ¥æºåˆæ³•æ€§ï¼Œä¹Ÿå³éªŒè¯ç­¾åã€‚å¯ä»¥ä½¿ç”¨--nosignatrueç•¥è¿‡æ­¤é¡¹</span><br><span class="line">    sha1ï¼Œmd5           //éªŒè¯è½¯ä»¶åŒ…å®Œæ•´æ€§ã€‚å¯ä»¥ä½¿ç”¨--nodigestç•¥è¿‡æ­¤é¡¹</span><br><span class="line">rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release    //å¯¼å…¥å¯†é’¥æ–‡ä»¶</span><br><span class="line">    CentOS 7å‘è¡Œç‰ˆå…‰ç›˜æä¾›çš„å¯†é’¥æ–‡ä»¶    //RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>å¦‚ä½•æŸ¥è¯¢ util-linux è½¯ä»¶åŒ…å®‰è£…äº†å“ªäº›æ–‡ä»¶ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql util-linux</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æŸ¥è¯¢ mkdir å‘½ä»¤æ˜¯ç”±å“ªä¸ª RPM è½¯ä»¶åŒ…å®‰è£…çš„ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qf /usr/bin/mkdir</span></span><br></pre></td></tr></table></figure>

<p>å‡çº§è½¯ä»¶åŒ…æ—¶ï¼Œ-Fã€-Ué€‰é¡¹æœ‰ä½•åŒºåˆ«ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œåˆ™å®‰è£…</span><br><span class="line">rpm -Fvh å¦‚æœè£…æœ‰è€ç‰ˆæœ¬çš„ï¼Œåˆ™å‡çº§ï¼›å¦åˆ™ï¼Œé€€å‡º</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -q vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…æ‰€æœ‰çš„æ–‡ä»¶å­˜æ”¾ç›®å½•?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ql vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ£€æŸ¥vsftpdè½¯ä»¶åŒ…çš„é…ç½®æ–‡ä»¶?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -qc vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå®‰è£…vsftpdæœåŠ¡?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå¼ºåˆ¶å®‰è£…ä¾èµ–åŒ…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -ivh --force vsftpd-3.0.2-22.el7.x86_64.rpm</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨rpmå¸è½½vsftpdè½¯ä»¶åŒ…?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie Packages]<span class="comment"># rpm -e vsftpd</span></span><br></pre></td></tr></table></figure>

<p>å°†æœ¬ç« å­¦ä¹ åˆ°çš„rpmå‘½ä»¤æ•´ç†æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå†™æ˜æ¯ä¸ªå‘½ä»¤çš„ä½œç”¨</p>
<table>
<thead>
<tr>
<th align="center">å®‰è£…è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</th>
<th align="center">rpm -ivh RPMå®‰è£…åŒ…</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å‡çº§è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -Uvh  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">å¸è½½è½¯ä»¶çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -e  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">æŸ¥è¯¢è½¯ä»¶æè¿°ä¿¡æ¯çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qpi  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">åˆ—å‡ºè½¯ä»¶æ–‡ä»¶ä¿¡æ¯çš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qpl  RPMå®‰è£…åŒ…</td>
</tr>
<tr>
<td align="center">æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªRPMçš„å‘½ä»¤æ ¼å¼</td>
<td align="center">rpm -qf  RPMå®‰è£…åŒ…</td>
</tr>
</tbody></table>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/8.linux--è½¯ä»¶ç®¡ç†/" data-id="ck7ooyaif002f4su6y716pblc"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-7.linux--ç”¨æˆ·å’Œç»„ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/7.linux--ç”¨æˆ·å’Œç»„ç®¡ç†/"
    >ç”¨æˆ·å’Œç»„ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/7.linux--ç”¨æˆ·å’Œç»„ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.557Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="ç”¨æˆ·å’Œç»„ç®¡ç†"><a href="#ç”¨æˆ·å’Œç»„ç®¡ç†" class="headerlink" title="ç”¨æˆ·å’Œç»„ç®¡ç†"></a>ç”¨æˆ·å’Œç»„ç®¡ç†</h1><p>[TOC]</p>
<h2 id="ä½•ä¸ºç”¨æˆ·ä½•ä¸ºç»„ï¼Ÿ"><a href="#ä½•ä¸ºç”¨æˆ·ä½•ä¸ºç»„ï¼Ÿ" class="headerlink" title="ä½•ä¸ºç”¨æˆ·ä½•ä¸ºç»„ï¼Ÿ"></a>ä½•ä¸ºç”¨æˆ·ä½•ä¸ºç»„ï¼Ÿ</h2><h4 id="ç”¨æˆ·å’Œç»„çš„æ¦‚å¿µ"><a href="#ç”¨æˆ·å’Œç»„çš„æ¦‚å¿µ" class="headerlink" title="ç”¨æˆ·å’Œç»„çš„æ¦‚å¿µ"></a>ç”¨æˆ·å’Œç»„çš„æ¦‚å¿µ</h4><p>ä¾‹å¦‚ï¼šå°æ˜å’Œä»–çš„å®¶äºº</p>
<p>å°æ˜å°±æ˜¯ç”¨æˆ·ï¼Œä»–çš„å®¶å°±æ˜¯è¿™ä¸ªç»„ï¼Œä»–çš„å®¶äººå°±æ˜¯è¿™ä¸ªç»„é‡Œé¢çš„ç»„å‘˜</p>
<p>*<em>ç”¨æˆ·å­˜åœ¨çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°èµ„æºçš„åˆ†æ´¾ã€‚ *</em></p>
<p>å°æ˜åœ¨å®¶é‡Œæœ‰çŸ¥è¯†ï¼Œå¯ä»¥æ•™ç»™å°æ˜çš„çˆ¸çˆ¸å¦ˆå¦ˆï¼Œå°æ˜çš„å¦ˆå¦ˆä¼šåšé¥­ï¼Œå¯ä»¥åšçš„é¥­ç»™å°æ˜å’Œå°æ˜çˆ¸çˆ¸åƒï¼Œå°æ˜çš„çˆ¸çˆ¸æœ‰é’±ï¼Œå¯ä»¥ç»™å°æ˜å’Œå°æ˜å¦ˆå¦ˆèŠ±ã€‚</p>
<h4 id="ç”¨æˆ·åˆ†ç±»"><a href="#ç”¨æˆ·åˆ†ç±»" class="headerlink" title="ç”¨æˆ·åˆ†ç±»"></a>ç”¨æˆ·åˆ†ç±»</h4><p>Linuxç”¨æˆ·åˆ†ä¸ºç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ä¸¤ç§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">ç”¨æˆ·ç±»åˆ«</th>
<th align="center">ç”¨æˆ·ID</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ç®¡ç†å‘˜</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">æ™®é€šç”¨æˆ·</td>
<td align="center">1-65535</td>
</tr>
</tbody></table>
<p>å…¶ä¸­æ™®é€šç”¨æˆ·åˆåˆ†ä¸ºç³»ç»Ÿç”¨æˆ·å’Œç™»å½•ç”¨æˆ·ä¸¤ç§ï¼š </p>
<table>
<thead>
<tr>
<th align="center">ç”¨æˆ·ç±»åˆ«</th>
<th align="center">ç”¨æˆ·ID</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ç³»é€šç”¨æˆ·</td>
<td align="center">1-999ï¼ˆä¸º å®ˆæŠ¤ç±»è¿›ç¨‹è·å–ç³»ç»Ÿèµ„æºè€Œå®Œæˆæƒé™æŒ‡æ´¾çš„ç”¨æˆ· ï¼‰</td>
</tr>
<tr>
<td align="center">ç™»é™†ç”¨æˆ·</td>
<td align="center">1000-60000ï¼ˆä¸ºäº†å®Œæˆäº¤äº’å¼ç™»å½•ä½¿ç”¨çš„ç”¨æˆ·ï¼‰</td>
</tr>
</tbody></table>
<h4 id="Linuxå®‰å…¨ä¸Šä¸‹æ–‡"><a href="#Linuxå®‰å…¨ä¸Šä¸‹æ–‡" class="headerlink" title="Linuxå®‰å…¨ä¸Šä¸‹æ–‡"></a>Linuxå®‰å…¨ä¸Šä¸‹æ–‡</h4><blockquote>
<p> è¿è¡Œä¸­çš„ç¨‹åºï¼šè¿›ç¨‹</p>
<p>ä»¥è¿›ç¨‹å‘èµ·è€…çš„èº«ä»½è¿è¡Œ</p>
<p>è¿›ç¨‹æ‰€èƒ½å¤Ÿè®¿é—®çš„æ‰€æœ‰èµ„æºçš„æƒé™å–å†³äºè¿›ç¨‹çš„å‘èµ·è€…çš„èº«ä»½</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆæˆ‘ä»¬æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯é‡Œè¾“å…¥</span></span><br><span class="line">[root@MR ~]<span class="comment"># cd /tmp</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls</span></span><br><span class="line">shadow</span><br><span class="line">[root@MR tmp]<span class="comment"># touch 123</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls -l</span></span><br><span class="line">æ€»ç”¨é‡ 4</span><br><span class="line">-rw-r--r--. 1 root root   0 3æœˆ  27 07:37 123</span><br><span class="line">----------. 1 root root 608 3æœˆ   8 15:48 shadow</span><br><span class="line"><span class="comment"># åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°rootæ˜¯å¯è¯»å¯å†™çš„æƒé™</span></span><br><span class="line"><span class="comment"># åœ¨ç¬¬äºŒä¸ªç»ˆç«¯é‡Œè¾“å…¥</span></span><br><span class="line">[root@MR ~]<span class="comment"># su - zhou</span></span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šä¸‰ 3æœˆ 27 04:27:47 CST 2019pts/1 ä¸Š</span><br><span class="line">[zhou@MR ~]$ <span class="built_in">cd</span> /tmp</span><br><span class="line">[zhou@MR tmp]$ ls -l</span><br><span class="line">æ€»ç”¨é‡ 4</span><br><span class="line">-rw-r--r--. 1 root root   0 3æœˆ  27 07:37 123</span><br><span class="line">----------. 1 root root 608 3æœˆ   8 15:48 shadow</span><br><span class="line">[zhou@MR tmp]$ vim 123</span><br><span class="line">~</span><br><span class="line"><span class="string">"123"</span> [åªè¯»] 0L, 0C                                           0,0-1        å…¨éƒ¨</span><br><span class="line"><span class="comment"># ç„¶åæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯é‡Œè¾“å…¥</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ps aux | grep vim</span></span><br><span class="line">zhou       4946  0.1  0.2 151916  5004 pts/0    S+   07:40   0:00 vim 123</span><br><span class="line">root       4948  0.0  0.0 112656   992 pts/2    R+   07:40   0:00 grep --color=auto vim</span><br><span class="line"><span class="comment"># åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° vim 123 æ˜¯ç”±zhouç”¨æˆ·å‘èµ·çš„è¿›ç¨‹</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯æˆ‘ä»¬å­å•Šç¬¬äºŒæ­¥éª¤é‡Œé¢å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶åªæ˜¯ä¸€ä¸ªåªè¯»æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Linuxé€šè¿‡å®‰å…¨ä¸Šä¸‹æ–‡çš„æ¦‚å¿µå®Œæˆç”¨æˆ·æƒé™çš„æŒ‡æ´¾ã€‚</p>
<p>å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ˜¯æŸæ–‡ä»¶çš„å±ä¸»</p>
<p>å†åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å±äºæŸä¸ªç»„</p>
<p>æœ€åå®šå…¶ä¸ºå…¶ä»–ç”¨æˆ·</p>
</blockquote>
<h4 id="Linuxç”¨æˆ·ç»„ç±»åˆ«"><a href="#Linuxç”¨æˆ·ç»„ç±»åˆ«" class="headerlink" title="Linuxç”¨æˆ·ç»„ç±»åˆ«"></a>Linuxç”¨æˆ·ç»„ç±»åˆ«</h4><table>
<thead>
<tr>
<th align="center">ç”¨æˆ·ç»„ç±»åˆ«</th>
<th align="center">ç‰¹å¾</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ç§æœ‰ç»„</td>
<td align="center">åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸ºå…¶æŒ‡å®šæ‰€å±çš„ç»„ï¼Œ ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå…¶åˆ›å»ºä¸€ä¸ªä¸ç”¨æˆ·åç›¸åŒçš„ç»„</td>
</tr>
<tr>
<td align="center">åŸºæœ¬ç»„</td>
<td align="center">ç”¨æˆ·çš„é»˜è®¤ç»„</td>
</tr>
<tr>
<td align="center">é™„åŠ ç»„(é¢å¤–ç»„)</td>
<td align="center">é»˜è®¤ç»„ä»¥å¤–çš„å…¶å®ƒç»„</td>
</tr>
</tbody></table>
<h2 id="Linux-ç”¨æˆ·å’Œç»„ç›¸å…³çš„é…ç½®æ–‡ä»¶"><a href="#Linux-ç”¨æˆ·å’Œç»„ç›¸å…³çš„é…ç½®æ–‡ä»¶" class="headerlink" title="Linux ç”¨æˆ·å’Œç»„ç›¸å…³çš„é…ç½®æ–‡ä»¶"></a>Linux ç”¨æˆ·å’Œç»„ç›¸å…³çš„é…ç½®æ–‡ä»¶</h2><h4 id="å„é…ç½®æ–‡ä»¶çš„è¯´æ˜"><a href="#å„é…ç½®æ–‡ä»¶çš„è¯´æ˜" class="headerlink" title="å„é…ç½®æ–‡ä»¶çš„è¯´æ˜"></a>å„é…ç½®æ–‡ä»¶çš„è¯´æ˜</h4><table>
<thead>
<tr>
<th align="center">é…ç½®æ–‡ä»¶</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">/etc/passwd</td>
<td align="center">ç”¨æˆ·åŠå…¶å±æ€§ä¿¡æ¯ï¼ˆåç§°ã€uidã€åŸºæœ¬ç»„idç­‰ç­‰ï¼‰</td>
</tr>
<tr>
<td align="center">/etc/group</td>
<td align="center">ç»„åŠå…¶å±æ€§ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">/etc/shadow</td>
<td align="center">ç”¨æˆ·å¯†ç åŠå…¶ç›¸å…³å±æ€§</td>
</tr>
<tr>
<td align="center">/etc/gshadow</td>
<td align="center">ç»„å¯†ç åŠå…¶ç›¸å…³å±æ€§ã€‚åœ¨ç”¨æˆ·æ‰§è¡ŒåŸºæœ¬ç»„åˆ‡æ¢æ—¶ä½¿ç”¨</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/passwd</span></span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">zhou:x:1000:1000::/home/zhou:/bin/bash</span><br><span class="line">wangqing:x:1001:1003:wu liang tian zun:/opt/123:/bin/csh</span><br><span class="line">openstack:x:1002:1005::/home/openstack:/bin/bash</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">taoist:x:1001:wangqing</span><br><span class="line">tianzun:x:1002:wangqing</span><br><span class="line">wangqing:x:1003:</span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>é…ç½®æ–‡ä»¶</th>
<th align="center">/etc/passwd</th>
<th align="center">/etc/group</th>
</tr>
</thead>
<tbody><tr>
<td>ç¬¬ä¸€å­—æ®µ</td>
<td align="center">ç”¨æˆ·å</td>
<td align="center">ç»„å</td>
</tr>
<tr>
<td>ç¬¬äºŒå­—æ®µ</td>
<td align="center">å¯†ç å ä½ç¬¦å·</td>
<td align="center">ç»„å</td>
</tr>
<tr>
<td>ç¬¬ä¸‰å­—æ®µ</td>
<td align="center">UID</td>
<td align="center">ç»„å¯†ç </td>
</tr>
<tr>
<td>ç¬¬å››å­—æ®µ</td>
<td align="center">GID</td>
<td align="center">GID</td>
</tr>
<tr>
<td>ç¬¬äº”å­—æ®µ</td>
<td align="center">ç”¨æˆ·çš„æè¿°ä¿¡æ¯</td>
<td align="center">ä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨(åˆ†éš”ç¬¦ä¸ºé€—å·)</td>
</tr>
<tr>
<td>ç¬¬å…­å­—æ®µ</td>
<td align="center">ç”¨æˆ·å®¶ç›®å½•</td>
<td align="center"></td>
</tr>
<tr>
<td>ç¬¬ä¸ƒå­—æ®µ</td>
<td align="center">ç”¨æˆ·çš„ç™»å½•shell</td>
<td align="center"></td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/shadow</span></span><br><span class="line">postfix:!!:17961::::::</span><br><span class="line">sshd:!!:17961::::::</span><br><span class="line">zhou:!!:17981:0:99999:7:::</span><br><span class="line">wangqing:!!:17981:0:99999:3::17986:</span><br><span class="line">openstack:!!:17981:0:99999:7:::</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/gshadow</span></span><br><span class="line">taoist:!::wangqing</span><br><span class="line">tianzun:!::</span><br><span class="line">wangqing:!::</span><br><span class="line">123:<span class="variable">$6</span><span class="variable">$f3I23</span>/woA<span class="variable">$DV6eA</span>/Qc0KsZkbwOo1uqC3YRx30riDKd/ZOtrEulPnct2knx4gBakc8rFYwnCOXFKaG4H7Cdf1alzK/V6fpTl/::</span><br><span class="line">openstack:!::</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">é…ç½®æ–‡ä»¶</th>
<th align="center">/etc/shadow</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ç¬¬ä¸€å­—æ®µ</td>
<td align="center">ç™»å½•å</td>
</tr>
<tr>
<td align="center">ç¬¬äºŒå­—æ®µ</td>
<td align="center">åŠ å¯†åçš„å¯†ç </td>
</tr>
<tr>
<td align="center">ç¬¬ä¸‰å­—æ®µ</td>
<td align="center">æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç çš„æ—¥æœŸ</td>
</tr>
<tr>
<td align="center">ç¬¬å››å­—æ®µ</td>
<td align="center">å¯†ç çš„æœ€å°ä½¿ç”¨æœŸé™</td>
</tr>
<tr>
<td align="center">ç¬¬äº”å­—æ®µ</td>
<td align="center">å¯†ç çš„æœ€å¤§ä½¿ç”¨æœŸé™</td>
</tr>
<tr>
<td align="center">ç¬¬å…­å­—æ®µ</td>
<td align="center">å¯†ç è­¦å‘Šæ—¶é—´æ®µ</td>
</tr>
<tr>
<td align="center">ç¬¬ä¸ƒå­—æ®µ</td>
<td align="center">å¯†ç ç¦ç”¨æœŸ</td>
</tr>
<tr>
<td align="center">ç¬¬å…«å­—æ®µ</td>
<td align="center">å¸å·çš„è¿‡æœŸæ—¥æœŸ</td>
</tr>
<tr>
<td align="center">ç¬¬ä¹å­—æ®µ</td>
<td align="center">ä¿ç•™å­—æ®µ</td>
</tr>
</tbody></table>
<blockquote>
<p> ä»¥ä¸Šé…ç½®æ–‡ä»¶å‡å¯ç”¨vim è¿›è¡Œæ”¹åŠ¨</p>
</blockquote>
<h4 id="åŠ å¯†æ–¹æ³•"><a href="#åŠ å¯†æ–¹æ³•" class="headerlink" title="åŠ å¯†æ–¹æ³•"></a>åŠ å¯†æ–¹æ³•</h4><ul>
<li>å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ </li>
<li>å…¬é’¥åŠ å¯†ï¼šæ¯ä¸ªå¯†ç éƒ½æˆå¯¹å‡ºç°ï¼Œä¸€ä¸ªä¸ºç§é’¥ï¼ˆsecret keyï¼‰ï¼Œä¸€ä¸ªä¸ºå…¬é’¥ï¼ˆpublic keyï¼‰</li>
<li>å•å‘åŠ å¯†ï¼šä¹Ÿå«æ•£åˆ—åŠ å¯†ï¼Œæå–æ•°æ®ç‰¹å¾ç ï¼Œèƒ½åŠ å¯†ä¸èƒ½è§£å¯†ï¼Œå¸¸ç”¨äºåšæ•°æ®å®Œæ•´æ€§æ ¡éªŒ </li>
</ul>
<p>å•å‘åŠ å¯†çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>é›ªå´©æ•ˆåº”ï¼ˆåˆå§‹æ¡ä»¶çš„å¾®å°æ”¹å˜ï¼Œå°†ä¼šå¼•èµ·ç»“æœçš„å·¨å¤§æ”¹å˜ï¼‰</p>
</li>
<li><p>å®šé•¿è¾“å‡º </p>
<p>â€‹    1.MD5ï¼š128ä½å®šé•¿è¾“å‡º</p>
<p>â€‹    2.SHA1ï¼š160ä½å®šé•¿è¾“å‡º</p>
<p>â€‹    3.SHA224ï¼š224ä½å®šé•¿è¾“å‡º</p>
<p>â€‹    4.SHA256ï¼š256ä½å®šé•¿è¾“å‡º</p>
<p>â€‹    5.SHA384ï¼š384ä½å®šé•¿è¾“å‡º</p>
<p>â€‹    6.SHA512ï¼š512ä½å®šé•¿è¾“å‡º</p>
</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬æˆ‘ä»¬åªç”¨MD5è¿›è¡ŒåŠ å¯†</p>
</blockquote>
<h4 id="Linuxç”¨æˆ·å¯†ç åŠ å¯†æ–¹å¼"><a href="#Linuxç”¨æˆ·å¯†ç åŠ å¯†æ–¹å¼" class="headerlink" title="Linuxç”¨æˆ·å¯†ç åŠ å¯†æ–¹å¼"></a>Linuxç”¨æˆ·å¯†ç åŠ å¯†æ–¹å¼</h4><blockquote>
<p> Linuxå¯†ç æ˜¯ä½¿ç”¨çš„å•å‘åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ å¯† </p>
<p>æ„æ€æ˜¯æ¯ä¸ªå¯†ç éƒ½ä¸ä¸€æ ·ï¼Œåœ¨åŠ å¯†å‰ç»™ç”¨æˆ·è®¾ç½®çš„å¯†ç åŠ ä¸Šä¸€ç‚¹æ‚è´¨ï¼Œå†å¯¹è¿™ä¸ªæ‚è´¨+ç”¨æˆ·å¯†ç ä¸€èµ·ä½¿ç”¨å•å‘åŠ å¯†ã€‚ç”±äºå•å‘åŠ å¯†çš„é›ªå´©æ•ˆåº”ï¼Œå°±ç®—ä¸¤äººè®¾ç½®çš„å¯†ç æ˜¯ä¸€æ ·çš„ï¼Œä½†å› ä¸ºæ‚è´¨çš„ä¸åŒï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿä¼šæˆªç„¶ä¸åŒ</p>
</blockquote>
<p>å¯†ç å¤æ‚æ€§ç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨æ•°å­—ã€å¤§å†™å­—æ¯ã€å°å†™å­—æ¯åŠç‰¹æ®Šå­—ç¬¦ä¸­è‡³å°‘3ç§</li>
<li>è¶³å¤Ÿé•¿</li>
<li>ä½¿ç”¨éšæœºå¯†ç ï¼Œä¸è¦ä½¿ç”¨æœ‰æ„ä¹‰çš„å•è¯æˆ–æ•°å­—</li>
<li>å®šæœŸæ›´æ¢ï¼Œä¸è¦ä½¿ç”¨æœ€è¿‘æ›¾ç»ä½¿ç”¨è¿‡çš„å¯†ç </li>
</ul>
<h2 id="ç”¨æˆ·å’Œç»„ç›¸å…³çš„å‘½ä»¤"><a href="#ç”¨æˆ·å’Œç»„ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="ç”¨æˆ·å’Œç»„ç›¸å…³çš„å‘½ä»¤"></a>ç”¨æˆ·å’Œç»„ç›¸å…³çš„å‘½ä»¤</h2><h4 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h4><h6 id="ç”¨æˆ·åˆ›å»ºå‘½ä»¤useradd"><a href="#ç”¨æˆ·åˆ›å»ºå‘½ä»¤useradd" class="headerlink" title="ç”¨æˆ·åˆ›å»ºå‘½ä»¤useradd"></a>ç”¨æˆ·åˆ›å»ºå‘½ä»¤useradd</h6><p>-u æŒ‡å®šuid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># cd</span></span><br><span class="line">[root@MR ~]<span class="comment"># useradd -u 8888 yue</span></span><br><span class="line">[root@MR ~]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=8888(yue) ç»„=8888(yue)</span><br></pre></td></tr></table></figure>

<p>-g æŒ‡å®šgid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">taoist:x:1001:wangqing</span><br><span class="line">tianzun:x:1002:wangqing</span><br><span class="line">wangqing:x:1003:</span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">[root@MR home]<span class="comment"># useradd -g tianzun yue</span></span><br><span class="line">[root@MR home]<span class="comment"># id yue</span></span><br><span class="line">uid=1003(yue) gid=1002(tianzun) ç»„=1002(tianzun)</span><br></pre></td></tr></table></figure>

<p>-G æŒ‡å®šé™„åŠ ç»„ï¼Œç»„ä¸ç»„ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼Œè®°ä½é™„åŠ ç»„å¿…é¡»å­˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">taoist:x:1001:wangqing</span><br><span class="line">tianzun:x:1002:wangqing</span><br><span class="line">wangqing:x:1003:</span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">[root@MR home]<span class="comment"># useradd -G tianzun,taoist yue</span></span><br><span class="line">[root@MR home]<span class="comment"># id yue</span></span><br><span class="line">uid=1003(yue) gid=1006(yue) ç»„=1006(yue),1001(taoist),1002(tianzun)</span><br></pre></td></tr></table></figure>

<p>-c æ·»åŠ æ³¨é‡Šä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># useradd -c"hahahahahaha" yue</span></span><br><span class="line">[root@MR home]<span class="comment"># tail -n5 /etc/passwd</span></span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">zhou:x:1000:1000::/home/zhou:/bin/bash</span><br><span class="line">wangqing:x:1001:1003:wu liang tian zun:/opt/123:/bin/csh</span><br><span class="line">openstack:x:1002:1005::/home/openstack:/bin/bash</span><br><span class="line">yue:x:1003:1006:hahahahahaha:/home/yue:/bin/bash</span><br></pre></td></tr></table></figure>

<p>-d æŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># cd /tmp</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls</span></span><br><span class="line">123  shadow</span><br><span class="line">[root@MR tmp]<span class="comment"># mkdir abc</span></span><br><span class="line">[root@MR tmp]<span class="comment"># useradd -d /tmp/abc yue</span></span><br><span class="line">useraddï¼šè­¦å‘Šï¼šæ­¤ä¸»ç›®å½•å·²ç»å­˜åœ¨ã€‚</span><br><span class="line">ä¸ä» skel ç›®å½•é‡Œå‘å…¶ä¸­å¤åˆ¶ä»»ä½•æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure>

<p>-s æŒ‡å®šshellï¼Œä½†è¿™ä¸ªshellå¿…é¡»åœ¨/etc/shellsé‡Œé¢å­˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># useradd -s /sbin/nologin yue</span></span><br><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/passwd</span></span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">zhou:x:1000:1000::/home/zhou:/bin/bash</span><br><span class="line">wangqing:x:1001:1003:wu liang tian zun:/opt/123:/bin/csh</span><br><span class="line">openstack:x:1002:1005::/home/openstack:/bin/bash</span><br><span class="line">yue:x:1003:1006::/home/yue:/sbin/nologin</span><br></pre></td></tr></table></figure>

<p>-M åˆ›å»ºç”¨æˆ·æ—¶ä¸ç»™å…¶åˆ›å»ºå®¶ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># useradd -M yue</span></span><br><span class="line">[root@MR /]<span class="comment"># ls /home</span></span><br><span class="line">openstack  wangqing  zhou</span><br></pre></td></tr></table></figure>

<h6 id="ç”¨æˆ·åˆ é™¤å‘½ä»¤userdel"><a href="#ç”¨æˆ·åˆ é™¤å‘½ä»¤userdel" class="headerlink" title="ç”¨æˆ·åˆ é™¤å‘½ä»¤userdel"></a>ç”¨æˆ·åˆ é™¤å‘½ä»¤userdel</h6><p>-r åˆ é™¤ç”¨æˆ·çš„åŒæ—¶åˆ é™¤å…¶å®¶ç›®å½•ï¼ˆuserdelé»˜è®¤ä¸ä¼šåˆ é™¤å…¶å®¶ç›®å½•ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># useradd yue</span></span><br><span class="line">[root@MR /]<span class="comment"># ls /home</span></span><br><span class="line">openstack  wangqing  yue  zhou</span><br><span class="line">[root@MR /]<span class="comment"># userdel -r yue</span></span><br><span class="line">[root@MR /]<span class="comment"># ls /home</span></span><br><span class="line">openstack  wangqing  zhou</span><br></pre></td></tr></table></figure>

<h6 id="æŸ¥çœ‹ç”¨æˆ·è´¦å·çš„ä¿¡æ¯å‘½ä»¤id"><a href="#æŸ¥çœ‹ç”¨æˆ·è´¦å·çš„ä¿¡æ¯å‘½ä»¤id" class="headerlink" title="æŸ¥çœ‹ç”¨æˆ·è´¦å·çš„ä¿¡æ¯å‘½ä»¤id"></a>æŸ¥çœ‹ç”¨æˆ·è´¦å·çš„ä¿¡æ¯å‘½ä»¤id</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># id zhou</span></span><br><span class="line">uid=1000(zhou) gid=1000(zhou) ç»„=1000(zhou),0(root)</span><br></pre></td></tr></table></figure>

<h6 id="ä¿®æ”¹ç”¨æˆ·è´¦å·å±æ€§çš„å‘½ä»¤usermod"><a href="#ä¿®æ”¹ç”¨æˆ·è´¦å·å±æ€§çš„å‘½ä»¤usermod" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·è´¦å·å±æ€§çš„å‘½ä»¤usermod"></a>ä¿®æ”¹ç”¨æˆ·è´¦å·å±æ€§çš„å‘½ä»¤usermod</h6><p>-u ä¿®æ”¹uid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=1003(yue) gid=1006(yue) ç»„=1006(yue)</span><br><span class="line">[root@MR /]<span class="comment"># usermod -u 8888 yue</span></span><br><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=1006(yue) ç»„=1006(yue)</span><br></pre></td></tr></table></figure>

<p>-g ä¿®æ”¹gid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=1006(yue) ç»„=1006(yue)</span><br><span class="line">[root@MR /]<span class="comment"># groupadd -g 7777 hah</span></span><br><span class="line">[root@MR /]<span class="comment"># usermod -g 7777 yue</span></span><br><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=7777(hah) ç»„=7777(hah)</span><br></pre></td></tr></table></figure>

<p>-a -G  ä¸ä½¿ç”¨-aé€‰é¡¹ï¼Œä¼šè¦†ç›–æ­¤å‰çš„é™„åŠ ç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=7777(hah) ç»„=7777(hah)</span><br><span class="line">[root@MR /]<span class="comment"># usermod -a -G yue yue</span></span><br><span class="line">[root@MR /]<span class="comment"># id yue</span></span><br><span class="line">uid=8888(yue) gid=7777(hah) ç»„=7777(hah),1006(yue)</span><br></pre></td></tr></table></figure>

<p>-d -m  æ”¹å˜ç”¨æˆ·å®¶ç›®å½•çš„åŒæ—¶æŠŠåŸæ¥å®¶ç›®å½•çš„æ–‡ä»¶ç§»åŠ¨åˆ°æ–°çš„å®¶ç›®å½•ä¸­</p>
<blockquote>
<p>åˆ‡è®°-dåœ¨-måé¢</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># ls /home</span></span><br><span class="line">openstack  wangqing  yue  zhou</span><br><span class="line">[root@MR /]<span class="comment"># cd /home/yue</span></span><br><span class="line">[root@MR yue]<span class="comment"># touch 123</span></span><br><span class="line">[root@MR yue]<span class="comment"># ls</span></span><br><span class="line">123</span><br><span class="line">[root@MR yue]<span class="comment"># cd /tmp</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls</span></span><br><span class="line">abc  shadow</span><br><span class="line">[root@MR tmp]<span class="comment"># mkdir qqq</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls</span></span><br><span class="line">abc  qqq  shadow</span><br><span class="line">[root@MR tmp]<span class="comment"># usermod -md /tmp/qqq yue</span></span><br><span class="line">usermodï¼šç›®å½• /tmp/qqq ä¸å­˜åœ¨</span><br><span class="line">[root@MR tmp]<span class="comment"># tail -n5 /etc/passwd</span></span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">zhou:x:1000:1000::/home/zhou:/bin/bash</span><br><span class="line">wangqing:x:1001:1003:wu liang tian zun:/opt/123:/bin/csh</span><br><span class="line">openstack:x:1002:1005::/home/openstack:/bin/bash</span><br><span class="line">yue:x:1003:1006::/tmp/qqq:/bin/bash</span><br></pre></td></tr></table></figure>

<h6 id="åˆ‡æ¢ç”¨æˆ·å‘½ä»¤su"><a href="#åˆ‡æ¢ç”¨æˆ·å‘½ä»¤su" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·å‘½ä»¤su"></a>åˆ‡æ¢ç”¨æˆ·å‘½ä»¤su</h6><table>
<thead>
<tr>
<th>åˆ‡æ¢ç”¨æˆ·çš„æ–¹å¼</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>su USERNAME</td>
<td>éç™»å½•å¼åˆ‡æ¢ï¼Œå³ä¸ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>su - USERNAME</td>
<td>ç™»å½•å¼åˆ‡æ¢ï¼Œå³ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ã€‚å®Œå…¨åˆ‡æ¢</td>
</tr>
<tr>
<td>su -</td>
<td>ä¸æŒ‡å®šç”¨æˆ·æ—¶é»˜è®¤åˆ‡æ¢è‡³rootç”¨æˆ·</td>
</tr>
</tbody></table>
<blockquote>
<p>root suè‡³å…¶ä»–ç”¨æˆ·ä¸éœ€è¦å¯†ç ï¼Œérootç”¨æˆ·suè‡³å…¶ä»–ç”¨æˆ·æ—¶éœ€è¦è¾“å…¥ç›®æ ‡ç”¨æˆ·çš„å¯†ç  </p>
</blockquote>
<p>bashçš„é…ç½®æ–‡ä»¶:</p>
<table>
<thead>
<tr>
<th align="center">é…ç½®æ–‡ä»¶ç±»å‹</th>
<th align="center">é…ç½®æ–‡ä»¶è·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å…¨å±€é…ç½®</td>
<td align="center">/etc/profile /etc/profile.d/*.sh /etc/bashrc</td>
</tr>
<tr>
<td align="center">ä¸ªäººé…ç½®</td>
<td align="center">~/.bash_profile ï½/.bashrc</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">é…ç½®æ–‡ä»¶ç±»å‹</th>
<th align="center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">profileç±»</td>
<td align="center">ä¸ºäº¤äº’å¼ç™»å½•çš„shellæä¾›é…ç½®ï¼Œç”¨æ¥è®¾å®šç¯å¢ƒå˜é‡ã€è¿è¡Œå‘½ä»¤æˆ–è„šæœ¬</td>
</tr>
<tr>
<td align="center">bashrcç±»</td>
<td align="center">ä¸ºéäº¤äº’å¼ç™»å½•çš„shellæä¾›é…ç½®ï¼Œç”¨æ¥è®¾å®šæœ¬åœ°å˜é‡ã€å®šä¹‰å‘½ä»¤åˆ«å</td>
</tr>
</tbody></table>
<p>ç™»å½•å¼shellå¦‚ä½•è¯»å–é…ç½®æ–‡ä»¶</p>
<blockquote>
<p> /etc/profile â€“&gt; /etc/profile.d/*.sh â€“&gt; ~/.bash_profile â€“&gt; ~/.bashrc â€“&gt; /etc/bashrc</p>
</blockquote>
<p>éç™»å½•å¼shellå¦‚ä½•è¯»å–é…ç½®æ–‡ä»¶</p>
<blockquote>
<p>~/.bashrc â€“&gt; /etc/bashrc â€“&gt; /etc/profile.d/*.sh</p>
</blockquote>
<h4 id="å¯†ç ç®¡ç†"><a href="#å¯†ç ç®¡ç†" class="headerlink" title="å¯†ç ç®¡ç†"></a>å¯†ç ç®¡ç†</h4><h6 id="å¯†ç ç®¡ç†å‘½ä»¤passwd"><a href="#å¯†ç ç®¡ç†å‘½ä»¤passwd" class="headerlink" title="å¯†ç ç®¡ç†å‘½ä»¤passwd"></a>å¯†ç ç®¡ç†å‘½ä»¤passwd</h6><p>â€“stdin ä»æ ‡å‡†è¾“å…¥è·å–ç”¨æˆ·å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR qqq]<span class="comment"># useradd yue</span></span><br><span class="line">[root@MR qqq]<span class="comment"># echo "123456" | passwd --stdin yue</span></span><br><span class="line">æ›´æ”¹ç”¨æˆ· yue çš„å¯†ç  ã€‚</span><br><span class="line">passwdï¼šæ‰€æœ‰çš„èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ã€‚</span><br></pre></td></tr></table></figure>

<h6 id="æ”¹å˜ç”¨æˆ·å¯†ç è¿‡æœŸä¿¡æ¯å‘½ä»¤chage"><a href="#æ”¹å˜ç”¨æˆ·å¯†ç è¿‡æœŸä¿¡æ¯å‘½ä»¤chage" class="headerlink" title="æ”¹å˜ç”¨æˆ·å¯†ç è¿‡æœŸä¿¡æ¯å‘½ä»¤chage"></a>æ”¹å˜ç”¨æˆ·å¯†ç è¿‡æœŸä¿¡æ¯å‘½ä»¤chage</h6><p>-E è¿‡æœŸæ—¶é—´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># chage -E 2019-05-31 yue</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/shadow</span></span><br><span class="line">sshd:!!:17961::::::</span><br><span class="line">zhou:!!:17981:0:99999:7:::</span><br><span class="line">wangqing:!!:17981:0:99999:3::17986:</span><br><span class="line">openstack:!!:17981:0:99999:7:::</span><br><span class="line">yue:<span class="variable">$6</span><span class="variable">$BRQKiE3H</span><span class="variable">$Ns7arFcpyOipUDWQ9CzJJlxvodMKEDN9iGfSYxo1V0PsW7OF5DU7cFpdCAi8EbyPv7KoVl1</span>.PXnSUatlRU2jN/:17982:0:99999:7::18047:</span><br><span class="line"><span class="comment"># æ­¤æ—¶é—´ä»£è¡¨ä»1970å¹´1æœˆ1æ—¥å¼€å§‹çš„å¤šå°‘å¤©</span></span><br></pre></td></tr></table></figure>

<p>-w è­¦å‘Šæ—¶é—´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æå‰7å¤©è­¦å‘Š</span></span><br><span class="line">[root@MR ~]<span class="comment"># chage -W 3 yue</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/shadow</span></span><br><span class="line">sshd:!!:17961::::::</span><br><span class="line">zhou:!!:17981:0:99999:7:::</span><br><span class="line">wangqing:!!:17981:0:99999:3::17986:</span><br><span class="line">openstack:!!:17981:0:99999:7:::</span><br><span class="line">yue:<span class="variable">$6</span><span class="variable">$BRQKiE3H</span><span class="variable">$Ns7arFcpyOipUDWQ9CzJJlxvodMKEDN9iGfSYxo1V0PsW7OF5DU7cFpdCAi8EbyPv7KoVl1</span>.PXnSUatlRU2jN/:17982:0:99999:3::18047:</span><br></pre></td></tr></table></figure>

<h6 id="å¯†ç ç”Ÿæˆå·¥å…·openssl"><a href="#å¯†ç ç”Ÿæˆå·¥å…·openssl" class="headerlink" title="å¯†ç ç”Ÿæˆå·¥å…·openssl"></a>å¯†ç ç”Ÿæˆå·¥å…·openssl</h6><p>version  æŸ¥çœ‹ç¨‹åºç‰ˆæœ¬å·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># openssl version</span></span><br><span class="line">OpenSSL 1.0.1e-fips 11 Feb 2013</span><br></pre></td></tr></table></figure>

<p> dgst   æå–ç‰¹å¾ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># openssl dgst -md5 /home/yue</span></span><br><span class="line">Read Error <span class="keyword">in</span> /home/yue</span><br><span class="line">139969262737312:error:0200B015:system library:fread:Is a directory:bss_file.c:24                                5:</span><br><span class="line">139969262737312:error:20082002:BIO routines:FILE_READ:system lib:bss_file.c:246:</span><br></pre></td></tr></table></figure>

<p> passwd   ç”Ÿæˆå¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># openssl passwd -1 -salt hello</span></span><br><span class="line">Password:</span><br><span class="line"><span class="variable">$1</span><span class="variable">$hello</span><span class="variable">$bs8EXZ2u6YMHz8lF7E05u0</span></span><br></pre></td></tr></table></figure>

<p>  rand    ç”Ÿæˆä¼ªéšæœºæ•°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># openssl rand -base64 30</span></span><br><span class="line">J7oxn34FkHcdxdTvmtsyf3VCUaZf/SU8I5jprwMS</span><br></pre></td></tr></table></figure>

<h4 id="ç»„ç®¡ç†"><a href="#ç»„ç®¡ç†" class="headerlink" title="ç»„ç®¡ç†"></a>ç»„ç®¡ç†</h4><h6 id="åˆ›å»ºç»„å‘½ä»¤groupadd"><a href="#åˆ›å»ºç»„å‘½ä»¤groupadd" class="headerlink" title="åˆ›å»ºç»„å‘½ä»¤groupadd"></a>åˆ›å»ºç»„å‘½ä»¤groupadd</h6><p>-g æŒ‡å®šGID</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># groupadd -g 6666 natasha</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">hah:x:7777:</span><br><span class="line">yue:x:7778:</span><br><span class="line">natasha:x:6666:</span><br></pre></td></tr></table></figure>

<h6 id="ä¿®æ”¹ç»„å‘½ä»¤groupmod"><a href="#ä¿®æ”¹ç»„å‘½ä»¤groupmod" class="headerlink" title="ä¿®æ”¹ç»„å‘½ä»¤groupmod"></a>ä¿®æ”¹ç»„å‘½ä»¤groupmod</h6><p>-g ä¿®æ”¹gid</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># groupmod -g 4444 natasha</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">hah:x:7777:</span><br><span class="line">yue:x:7778:</span><br><span class="line">natasha:x:4444:</span><br></pre></td></tr></table></figure>

<p>-n ä¿®æ”¹ç»„å</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># groupmod -n hahahaha natasha</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">hah:x:7777:</span><br><span class="line">yue:x:7778:</span><br><span class="line">hahahaha:x:4444:</span><br></pre></td></tr></table></figure>

<h6 id="åˆ é™¤ç»„å‘½ä»¤groupdel"><a href="#åˆ é™¤ç»„å‘½ä»¤groupdel" class="headerlink" title="åˆ é™¤ç»„å‘½ä»¤groupdel"></a>åˆ é™¤ç»„å‘½ä»¤groupdel</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># groupdel hahahaha</span></span><br><span class="line">[root@MR ~]<span class="comment"># tail -n5 /etc/group</span></span><br><span class="line">wangqing:x:1003:</span><br><span class="line">123:x:1004:</span><br><span class="line">openstack:x:1005:</span><br><span class="line">hah:x:7777:</span><br><span class="line">yue:x:7778:</span><br></pre></td></tr></table></figure>

<p>ç»™ç»„è®¾å®šå¯†ç å‘½ä»¤gpasswd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># gpasswd hahahaha</span></span><br><span class="line">æ­£åœ¨ä¿®æ”¹ hahahaha ç»„çš„å¯†ç </span><br><span class="line">æ–°å¯†ç ï¼š</span><br><span class="line">è¯·é‡æ–°è¾“å…¥æ–°å¯†ç ï¼š</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.åˆ›å»ºç”¨æˆ·wangqingï¼Œé™„åŠ ç»„ä¸ºtaoistå’Œtianzunï¼Œé»˜è®¤shellä¸º/bin/cshï¼Œæ³¨é‡Šä¿¡æ¯ä¸ºâ€œwu liang tian zunâ€ </p>
<p><strong>groupadd taoist</strong></p>
<p><strong>groupadd tianzun</strong></p>
<p><strong>useradd -G taoist,tianzun -câ€wu liang tian zunâ€ -s /bin/csh wangqing</strong></p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/7.linux--ç”¨æˆ·å’Œç»„ç®¡ç†/" data-id="ck7ooyakg00364su69gtpv78p"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-6.linux--yumå·¥å…·çš„ä½¿ç”¨" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/6.linux--yumå·¥å…·çš„ä½¿ç”¨/"
    >yumå·¥å…·çš„ä½¿ç”¨</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/6.linux--yumå·¥å…·çš„ä½¿ç”¨/" class="article-date">
  <time datetime="2019-08-29T15:44:18.552Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[toc]</p>
<h2 id="rpmçš„å¼Šç«¯"><a href="#rpmçš„å¼Šç«¯" class="headerlink" title="rpmçš„å¼Šç«¯"></a>rpmçš„å¼Šç«¯</h2><p>rpmå¼Šç«¯æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå½“ç”¨rpmå®‰è£…è½¯ä»¶æ—¶ï¼Œè‹¥é‡åˆ°æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶ï¼Œå¿…é¡»å…ˆå®‰è£…ä¾èµ–çš„è½¯ä»¶æ‰èƒ½ç»§ç»­å®‰è£…æˆ‘ä»¬è¦å®‰è£…çš„è½¯ä»¶ï¼Œå½“ä¾èµ–å…³ç³»å¾ˆå¤æ‚çš„æƒ…å†µä¸‹ï¼Œè¿™ç§å®‰è£…æ–¹å¼å°±å¾ˆæ°”äººï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¦ä¸€ç§å®‰è£…æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”-yumå·¥å…·çš„ä½¿ç”¨</p>
<h2 id="yumçš„ä¼˜åŠ£åŠ¿"><a href="#yumçš„ä¼˜åŠ£åŠ¿" class="headerlink" title="yumçš„ä¼˜åŠ£åŠ¿"></a>yumçš„ä¼˜åŠ£åŠ¿</h2><ul>
<li>yumæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯èƒ½å¤Ÿè§£å†³rpmçš„ä¾èµ–é—®é¢˜ï¼Œyumèƒ½å¤Ÿè‡ªåŠ¨è§£å†³è½¯ä»¶å®‰è£…æ—¶çš„ä¾èµ–å…³ç³»ã€‚</li>
<li>yumçš„ç¼ºé™·å°±æ˜¯å¦‚æœåœ¨æœªå®Œæˆå®‰è£…çš„æƒ…å†µä¸‹å¼ºè¡Œä¸­æ­¢å®‰è£…è¿‡ç¨‹ï¼Œä¸‹æ¬¡å†å®‰è£…æ—¶å°†æ— æ³•è§£å†³ä¾èµ–å…³ç³»ï¼Œ</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯yumåŠå…¶ä½œç”¨"><a href="#ä»€ä¹ˆæ˜¯yumåŠå…¶ä½œç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯yumåŠå…¶ä½œç”¨"></a>ä»€ä¹ˆæ˜¯yumåŠå…¶ä½œç”¨</h2><p>yumæ˜¯yellowdog update managerçš„ç®€ç§°ï¼Œå®ƒèƒ½å¤Ÿå®ç°rpmç®¡ç†çš„æ‰€æœ‰æ“ä½œï¼Œå¹¶èƒ½å¤Ÿè‡ªåŠ¨è§£å†³å„rpmåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚yumæ˜¯rpmçš„å‰ç«¯å·¥å…·ï¼Œæ˜¯åŸºäºrpmæ¥å®ç°è½¯ä»¶çš„ç®¡ç†çš„ä¸€ä¸ªå·¥å…·ã€‚</p>
<ul>
<li><p>æŒ‚è½½å…‰ç›˜</p>
</li>
<li><p>æ’å…¥å…‰ç›˜</p>
</li>
<li><p>æ‰§è¡ŒæŒ‚è½½å‘½ä»¤</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /mnt/cdrom</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># mount /dev/cdrom /mnt/cdrom/</span></span><br><span class="line">mount: /dev/sr0 å†™ä¿æŠ¤ï¼Œå°†ä»¥åªè¯»æ–¹å¼æŒ‚è½½</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ls /mnt/cdrom/</span></span><br><span class="line">addons            GPL       media.repo               RPM-GPG-KEY-redhat-release</span><br><span class="line">EFI               images    Packages                 TRANS.TBL</span><br><span class="line">EULA              isolinux  repodata</span><br><span class="line">extra_files.json  LiveOS    RPM-GPG-KEY-redhat-beta</span><br></pre></td></tr></table></figure>

<h2 id="yumçš„åŸç†"><a href="#yumçš„åŸç†" class="headerlink" title="yumçš„åŸç†"></a>yumçš„åŸç†</h2><p><img src="https://s2.ax1x.com/2019/04/27/EM9y59.png" alt></p>
<p>yumçš„å·¥ä½œéœ€è¦ä¸¤éƒ¨åˆ†æ¥åˆä½œï¼Œä¸€éƒ¨åˆ†æ˜¯yumæœåŠ¡å™¨ï¼Œå¦ä¸€éƒ¨åˆ†å°±æ˜¯clientçš„yumå·¥å…·ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸¤éƒ¨åˆ†å·¥ä½œåŸç†ã€‚</p>
<h6 id="yumæœåŠ¡å™¨ç«¯å·¥ä½œåŸç†"><a href="#yumæœåŠ¡å™¨ç«¯å·¥ä½œåŸç†" class="headerlink" title="yumæœåŠ¡å™¨ç«¯å·¥ä½œåŸç†"></a>yumæœåŠ¡å™¨ç«¯å·¥ä½œåŸç†</h6><p>æ‰€æœ‰è¦å‘è¡Œçš„rpmåŒ…éƒ½æ”¾åœ¨yumæœåŠ¡å™¨ä¸Šä»¥æä¾›åˆ«äººæ¥ä¸‹è½½ï¼ŒrpmåŒ…æ ¹æ®kernelçš„ç‰ˆæœ¬å·ï¼Œcpuçš„ç‰ˆæœ¬å·åˆ†åˆ«ç¼–è¯‘å‘å¸ƒã€‚yumæœåŠ¡å™¨åªè¦æä¾›ç®€å•çš„ä¸‹è½½å°±å¯ä»¥äº†ï¼Œftpæˆ–è€…httpçš„å½¢å¼éƒ½å¯ä»¥ã€‚yumæœåŠ¡å™¨æœ‰ä¸€ä¸ªæœ€é‡è¦çš„ç¯èŠ‚å°±æ˜¯æ•´ç†å‡ºæ¯ä¸ªrpmåŒ…çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬rpmåŒ…å¯¹åº”çš„ç‰ˆæœ¬å·ã€confæ–‡ä»¶ã€binaryä¿¡æ¯ï¼Œä»¥åŠå¾ˆå…³é”®çš„ä¾èµ–ä¿¡æ¯ã€‚åœ¨yumæœåŠ¡å™¨ä¸Šæä¾›äº†createrepoå·¥å…·ï¼Œç”¨äºæŠŠrpmåŒ…çš„åŸºæœ¬æ¦‚è¦ä¿¡æ¯åšæˆä¸€å¼ â€œæ¸…å•â€ï¼Œè¿™å¼ â€œæ¸…å•â€å°±æ˜¯æè¿°æ¯ä¸ªrpmåŒ…çš„specæ–‡ä»¶ä¸­ä¿¡æ¯ã€‚</p>
<h5 id="clientç«¯å·¥ä½œåŸç†"><a href="#clientç«¯å·¥ä½œåŸç†" class="headerlink" title="clientç«¯å·¥ä½œåŸç†"></a>clientç«¯å·¥ä½œåŸç†</h5><p>clientæ¯æ¬¡è°ƒç”¨yum installæˆ–è€…searchçš„æ—¶å€™ï¼Œéƒ½ä¼šå»è§£æ/etc/yum.repos.dä¸‹é¢æ‰€æœ‰ä»¥.repoç»“å°¾çš„é…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶æŒ‡å®šäº†yumæœåŠ¡å™¨çš„åœ°å€ã€‚yumä¼šå®šæœŸå»æ›´æ–°yumæœåŠ¡å™¨ä¸Šçš„rpmåŒ…æ¸…å•ï¼Œç„¶åæŠŠæ¸…å•ä¸‹è½½ä¿å­˜åˆ°yumå®¢æˆ·ç«¯è‡ªå·±çš„cacheé‡Œé¢ï¼Œæ ¹æ®/etc/yum.confé‡Œé…ç½®ï¼ˆé»˜è®¤æ˜¯/var/cache/yumä¸‹é¢ï¼‰ï¼Œæ¯æ¬¡è°ƒç”¨yumè£…åŒ…çš„æ—¶å€™éƒ½ä¼šå»è¿™ä¸ªcacheç›®å½•ä¸‹å»æ‰¾æ¸…å•ï¼Œæ ¹æ®æ¸…å•é‡Œçš„rpmåŒ…æè¿°ä»è€Œæ¥ç¡®å®šå®‰è£…åŒ…çš„åå­—ã€ç‰ˆæœ¬å·ã€æ‰€éœ€è¦çš„ä¾èµ–åŒ…ç­‰ï¼Œç„¶åå†å»yumæœåŠ¡å™¨ä¸‹è½½rpmå®‰è£…ã€‚ï¼ˆå‰ææ˜¯ä¸å­˜åœ¨rpmåŒ…çš„cacheï¼‰</p>
<h2 id="yumçš„å…ƒæ•°æ®"><a href="#yumçš„å…ƒæ•°æ®" class="headerlink" title="yumçš„å…ƒæ•°æ®"></a>yumçš„å…ƒæ•°æ®</h2><h4 id="yumçš„é…ç½®æ–‡ä»¶"><a href="#yumçš„é…ç½®æ–‡ä»¶" class="headerlink" title="yumçš„é…ç½®æ–‡ä»¶"></a>yumçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[bendiyum]      //ä»“åº“åç§°</span><br><span class="line">name=bendiyum    //æå†™ä¿¡æ¯</span><br><span class="line">baseurl=file:///mnt/cdrom     //ä»“åº“å…·ä½“è·¯å¾„ï¼Œå¯å¡«ä»¥ä¸‹ä¸‰ç§</span><br><span class="line">							ftp://</span><br><span class="line">							http://</span><br><span class="line">							file:///</span><br><span class="line">enabled=1      //å¯é€‰1æˆ–è€…0ï¼Œ1ä¸ºå¯ç”¨æ­¤ä»“åº“ï¼Œ0ä¸ºç¦ç”¨æ­¤ä»“åº“</span><br><span class="line">gpgcheck=0     //å¯é€‰1æˆ–è€…0ï¼Œ1ä¸ºæ£€æŸ¥è½¯ä»¶å’Œå‘æ€§ï¼Œ0ä¸ºä¸æ£€æŸ¥æ¥æº</span><br><span class="line">			è‹¥gpgcheck=1ï¼Œåˆ™å¿…é¡»ç”¨gpgkeyå®šä¹‰å¯†é’¥æ–‡ä»¶çš„å…·ä½“è·¯å¾„</span><br><span class="line"> gpgkey=</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># vim /etc/yum.conf</span></span><br><span class="line">[main]  </span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span>     //ç¼“å­˜ç›®å½•</span><br><span class="line">keepcache=0         //ç¼“å­˜è½¯ä»¶åŒ…, 1å¯åŠ¨ 0 å…³é—­</span><br><span class="line">debuglevel=2        //è°ƒè¯•çº§åˆ«</span><br><span class="line">logfile=/var/<span class="built_in">log</span>/yum.log       //æ—¥å¿—è®°å½•ä½ç½®</span><br><span class="line">exactarch=1          //æ£€æŸ¥å¹³å°æ˜¯å¦å…¼å®¹</span><br><span class="line">obsoletes=1         //æ£€æŸ¥åŒ…æ˜¯å¦åºŸå¼ƒ</span><br><span class="line">gpgcheck=1         //æ£€æŸ¥æ¥æºæ˜¯å¦åˆæ³•,éœ€è¦æœ‰åˆ¶ä½œè€…çš„å…¬é’¥ä¿¡æ¯</span><br><span class="line">plugins=1           //æ˜¯å¦å¯ç”¨æ’ä»¶</span><br><span class="line">installonly_limit=3</span><br><span class="line"></span><br><span class="line">This is the default, <span class="keyword">if</span> you make this bigger yum won<span class="string">'t see if the metadata</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">is newer on the remote and so you'</span>ll <span class="string">"gain"</span> the bandwidth of not having to</span><br><span class="line"></span><br><span class="line">download the new metadata and <span class="string">"pay"</span> <span class="keyword">for</span> it by yum not having correct</span><br><span class="line"></span><br><span class="line">information.</span><br><span class="line"></span><br><span class="line">It is esp. important, to have correct metadata, <span class="keyword">for</span> distributions like</span><br><span class="line"></span><br><span class="line">Fedora <span class="built_in">which</span> don<span class="string">'t keep old packages around. If you don'</span>t like this checking</span><br><span class="line"></span><br><span class="line">interupting your <span class="built_in">command</span> line usage, it<span class="string">'s much better to have something</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">manually check the metadata once an hour (yum-updatesd will do this).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">metadata_expire=90m         //æ¯å°æ—¶æ‰‹åŠ¨æ£€æŸ¥å…ƒæ•°æ®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PUT YOUR REPOS HERE OR IN separate files named file.repo</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">in /etc/yum.repos.d         //åŒ…å«repos.dç›®å½•</span></span><br></pre></td></tr></table></figure>

<h2 id="yumä»“åº“ç®¡ç†"><a href="#yumä»“åº“ç®¡ç†" class="headerlink" title="yumä»“åº“ç®¡ç†"></a>yumä»“åº“ç®¡ç†</h2><h4 id="yumæœ¬åœ°ä»“åº“"><a href="#yumæœ¬åœ°ä»“åº“" class="headerlink" title="yumæœ¬åœ°ä»“åº“"></a>yumæœ¬åœ°ä»“åº“</h4><ul>
<li>å¤‡ä»½æŒ‚è½½ç›®å½•</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /opt/myrepo</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cp -r /mnt/cdrom /opt/myrepo/</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ls /opt/myrepo/</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># ls /opt/myrepo/cdrom</span></span><br><span class="line">addons            GPL       media.repo               RPM-GPG-KEY-redhat-release</span><br><span class="line">EFI               images    Packages                 TRANS.TBL</span><br><span class="line">EULA              isolinux  repodata</span><br><span class="line">extra_files.json  LiveOS    RPM-GPG-KEY-redhat-beta</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®repoæ–‡ä»¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># vim bendiyum.repo</span></span><br><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># cat bendiyum.repo</span></span><br><span class="line">[bendiyum]</span><br><span class="line">name=bendiyum</span><br><span class="line">baseurl=file:////opt/myrepo/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¸…ç©ºyumæœ¬åœ°ç¼“å­˜</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">å·²åŠ è½½æ’ä»¶ï¼šlangpacks, product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered with an entitlement server. You can use subscription-manager to register.</span><br><span class="line">æ­£åœ¨æ¸…ç†è½¯ä»¶æºï¼š bendiyum</span><br><span class="line">Cleaning up everything</span><br><span class="line">Maybe you want: rm -rf /var/cache/yum, to also free up space taken by orphaned data from disabled or removed repos</span><br></pre></td></tr></table></figure>

<ul>
<li>æ£€éªŒyumæœ¬åœ°ä»“åº“</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie yum.repos.d]<span class="comment"># yum list | wc -l</span></span><br><span class="line">5096</span><br></pre></td></tr></table></figure>

<h4 id="yumç½‘ç»œä»“åº“"><a href="#yumç½‘ç»œä»“åº“" class="headerlink" title="yumç½‘ç»œä»“åº“"></a>yumç½‘ç»œä»“åº“</h4><ul>
<li>å®˜æ–¹ç½‘ç»œyumä»“åº“ï¼ˆå›½å¤–ï¼‰</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure>

<ul>
<li>é˜¿é‡Œäº‘yumä»“åº“</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.aliyun.com/repo/Centos-5.repo</span><br></pre></td></tr></table></figure>

<ul>
<li>163yumä»“åº“</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.163.com/.<span class="built_in">help</span>/CentOS6-Base-163.repo</span><br></pre></td></tr></table></figure>

<ul>
<li>xxå¤§å­¦yumä»“åº“</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mirror.tuna.tsinghua.edu.cn/<span class="built_in">help</span>/centos/</span><br></pre></td></tr></table></figure>

<ul>
<li>epelæº</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å›½å¤–</span><br><span class="line">yum -y install epel-release</span><br><span class="line"></span><br><span class="line">//é˜¿é‡Œ</span><br><span class="line">wget http://mirrors.aliyun.com/repo/epel-7.repo</span><br></pre></td></tr></table></figure>

<h6 id="è½¯ä»¶å®˜æ–¹ä»“åº“"><a href="#è½¯ä»¶å®˜æ–¹ä»“åº“" class="headerlink" title="è½¯ä»¶å®˜æ–¹ä»“åº“"></a>è½¯ä»¶å®˜æ–¹ä»“åº“</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// æºæŸ¥æ‰¾æ–¹å¼åŸºæœ¬ä¸€è‡´,zabbix,mysql,saltstack,openstackç­‰ç­‰ï¼Œä¸Šå®˜ç½‘æ‰¾</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/yum.repos.d/nginx.repo</span></span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo </span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/<span class="variable">$basearch</span>/ </span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p>redhat7ä½¿ç”¨centos7çš„yumæº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.å¸è½½çº¢å¸½yumæº</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e $(rpm -qa|grep yum) --nodeps</span></span><br><span class="line"></span><br><span class="line">2.åˆ é™¤æ‰€æœ‰repoç›¸å…³æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -f /etc/yum.conf</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rm -rf /etc/yum.repos.d/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rm -rf /var/cache/yum</span></span><br><span class="line"></span><br><span class="line">3.ä¸‹è½½centosç›¸å…³yumç»„ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-154.el7.centos.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-updateonboot-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">//å¦‚æœæ²¡æœ‰wgetå‘½ä»¤åˆ™ä½¿ç”¨curlå‘½ä»¤</span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o yum-utils-1.1.31-42.el7.noarch.rpm  https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o yum-3.4.3-154.el7.centos.noarch.rpm  https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-154.el7.centos.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o yum-metadata-parser-1.1.4-10.el7.x86_64.rpm  https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o yum-plugin-fastestmirror-1.1.31-42.el7.noarch.rpm   https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o yum-updateonboot-1.1.31-42.el7.noarch.rpm https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-updateonboot-1.1.31-42.el7.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">3.å®‰è£…æ‰€æœ‰ç›¸å…³ç»„ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -ivh yum-* --nodeps</span></span><br><span class="line"></span><br><span class="line">4.ä¸‹è½½baseå’Œepelä»“åº“</span><br><span class="line">[root@localhost ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sed -i 's#\$releasever#7#g' /etc/yum.repos.d/CentOS-Base.repo</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br></pre></td></tr></table></figure>

<h2 id="yumç®¡ç†è½¯ä»¶"><a href="#yumç®¡ç†è½¯ä»¶" class="headerlink" title="yumç®¡ç†è½¯ä»¶"></a>yumç®¡ç†è½¯ä»¶</h2><h4 id="yumå‘½ä»¤è¯­æ³•ï¼š"><a href="#yumå‘½ä»¤è¯­æ³•ï¼š" class="headerlink" title="yumå‘½ä»¤è¯­æ³•ï¼š"></a>yumå‘½ä»¤è¯­æ³•ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [<span class="built_in">command</span>] [package ...]</span><br></pre></td></tr></table></figure>

<h6 id="å¸¸ç”¨çš„é€‰é¡¹"><a href="#å¸¸ç”¨çš„é€‰é¡¹" class="headerlink" title="å¸¸ç”¨çš„é€‰é¡¹"></a>å¸¸ç”¨çš„é€‰é¡¹</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">--nogpgcheck                //å¦‚æœä»ç½‘ä¸Šä¸‹è½½åŒ…æœ‰æ—¶ä¼šæ£€æŸ¥gpgkeyï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤è·³è¿‡gpgkeyçš„æ£€æŸ¥</span><br><span class="line">-y                          //è‡ªåŠ¨å›ç­”ä¸º<span class="string">"yes"</span></span><br><span class="line">-q                          //é™é»˜æ¨¡å¼ï¼Œå®‰è£…æ—¶ä¸è¾“å‡ºä¿¡æ¯è‡³æ ‡å‡†è¾“å‡º</span><br><span class="line">--disablerepo=repoidglob    //ä¸´æ—¶ç¦ç”¨æ­¤å¤„æŒ‡å®šçš„repo</span><br><span class="line">--enablerepo=repoidglob     //ä¸´æ—¶å¯ç”¨æ­¤å¤„æŒ‡å®šçš„repo</span><br><span class="line">--noplugins                 //ç¦ç”¨æ‰€æœ‰æ’ä»¶</span><br><span class="line">```bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###### å¸¸ç”¨çš„å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">list            //åˆ—è¡¨</span><br><span class="line">    all         //é»˜è®¤é¡¹</span><br><span class="line">    available   //åˆ—å‡ºä»“åº“ä¸­æœ‰çš„ï¼Œä½†å°šæœªå®‰è£…çš„æ‰€æœ‰å¯ç”¨çš„åŒ…</span><br><span class="line">    installed   //åˆ—å‡ºå·²ç»å®‰è£…çš„åŒ…</span><br><span class="line">    updates     //å¯ç”¨çš„å‡çº§</span><br><span class="line">    </span><br><span class="line">clean           //æ¸…ç†ç¼“å­˜</span><br><span class="line">    packages</span><br><span class="line">    headers</span><br><span class="line">    metadata</span><br><span class="line">    dbcache</span><br><span class="line">    all</span><br><span class="line">    </span><br><span class="line">repolist        //æ˜¾ç¤ºrepoåˆ—è¡¨åŠå…¶ç®€è¦ä¿¡æ¯</span><br><span class="line">    all</span><br><span class="line">    enabled     //é»˜è®¤é¡¹</span><br><span class="line">    disabled</span><br><span class="line">    </span><br><span class="line">install         //å®‰è£…</span><br><span class="line">    yum install packages [...]</span><br><span class="line">    </span><br><span class="line">update          //å‡çº§</span><br><span class="line">    yum update packages [...]</span><br><span class="line">update_to       //å‡çº§ä¸ºæŒ‡å®šç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">downgrade package1 [package2 ...]   //é™çº§</span><br><span class="line"></span><br><span class="line">remove|erase    //å¸è½½</span><br><span class="line"></span><br><span class="line">info    //æ˜¾ç¤ºrpm -qi packageçš„ç»“æœ</span><br><span class="line">    yum info packages</span><br><span class="line">    </span><br><span class="line">provides|whatprovides   //æŸ¥çœ‹æŒ‡å®šçš„æ–‡ä»¶æˆ–ç‰¹æ€§æ˜¯ç”±å“ªä¸ªåŒ…å®‰è£…ç”Ÿæˆçš„</span><br><span class="line"></span><br><span class="line">search string1 [string2 ...]    //ä»¥æŒ‡å®šçš„å…³é”®å­—æœç´¢ç¨‹åºåŒ…ååŠsummaryä¿¡æ¯</span><br><span class="line"></span><br><span class="line">deplist package [package2 ...]  //æ˜¾ç¤ºæŒ‡å®šåŒ…çš„ä¾èµ–å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="built_in">history</span>     //æŸ¥çœ‹yumçš„å†å²äº‹åŠ¡ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">localinstall    //å®‰è£…æœ¬åœ°rpmåŒ…ï¼Œè‡ªåŠ¨è§£å†³ä¾èµ–å…³ç³»</span><br><span class="line"></span><br><span class="line">grouplist       //åˆ—å‡ºå¯ç”¨çš„ç»„</span><br><span class="line"></span><br><span class="line">groupinstall <span class="string">"group name"</span>   //å®‰è£…ä¸€ç»„è½¯ä»¶</span><br><span class="line">        </span><br><span class="line">createrepoå‘½ä»¤    //åˆ›å»ºyumä»“åº“çš„å…ƒæ•°æ®ä¿¡æ¯</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install createrepo -y</span></span><br><span class="line">[root@localhost ~]<span class="comment"># createrepo [options] &lt;directory&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### å…·ä½“å®ä¾‹</span></span><br><span class="line"><span class="comment">###### æœç´¢è½¯ä»¶åŒ…</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">//åˆ—å‡ºè½¯ä»¶ä»“åº“ä¸­å¯ç”¨çš„è½¯ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># yum list all</span></span><br><span class="line"></span><br><span class="line">//è¿›è¡Œæ¨¡ç³ŠæŸ¥æ‰¾</span><br><span class="line">[root@localhost ~]<span class="comment"># yum list | grep ftp</span></span><br><span class="line"></span><br><span class="line">//åˆ—å‡ºè½¯ä»¶åŒ…è¯¦æƒ…</span><br><span class="line">[root@localhost ~]<span class="comment"># yum info ftp</span></span><br></pre></td></tr></table></figure>

<h6 id="å®‰è£…è½¯ä»¶åŒ…"><a href="#å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…è½¯ä»¶åŒ…"></a>å®‰è£…è½¯ä»¶åŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//å®‰è£…è½¯ä»¶åªéœ€è¦ç»™å‡ºè½¯ä»¶åç§°</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install traceroute</span></span><br><span class="line"></span><br><span class="line">//å®‰è£…è¿‡ç¨‹ä¸­åˆ†æä¾èµ–å…³ç³»å, ç›´æ¥å®‰è£…, æ— éœ€äº¤äº’</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install php</span></span><br><span class="line"></span><br><span class="line">//å®‰è£…æœ¬åœ°çš„rpmåŒ…, å¦‚æœæœ‰ä¾èµ–å…³ç³», ä¼šè‡ªåŠ¨ä»è½¯ä»¶ä»“åº“ä¸­ä¸‹è½½æ‰€éœ€ä¾èµ–ï¼ˆéæ¥è‡ª.repoå®šä¹‰çš„è½¯ä»¶ä»“åº“ï¼‰</span><br><span class="line">[root@localhost ~]<span class="comment"># yum localinstall /mnt/Packages/bind-9.9.4-50.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line">//å®‰è£…ç½‘ç»œä¸ŠrpmåŒ…</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm</span></span><br></pre></td></tr></table></figure>

<h6 id="é‡è£…è½¯ä»¶åŒ…"><a href="#é‡è£…è½¯ä»¶åŒ…" class="headerlink" title="é‡è£…è½¯ä»¶åŒ…"></a>é‡è£…è½¯ä»¶åŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//æ£€æŸ¥è½¯ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -q vsftpd</span></span><br><span class="line">vsftpd-2.2.2-24.el6.x86_64</span><br><span class="line"></span><br><span class="line">//æ£€æŸ¥vsftpdè½¯ä»¶é…ç½®æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qc vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line">//ä¸å°å¿ƒåˆ é™¤vsftpdé…ç½®æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -f /etc/vsftpd/vsftpd.conf</span></span><br><span class="line"></span><br><span class="line">//é‡æ–°å®‰è£…è½¯ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># yum reinstall vsftpd</span></span><br><span class="line"></span><br><span class="line">//å†æ¬¡æ£€æŸ¥</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qc vsftpd</span></span><br><span class="line">/etc/logrotate.d/vsftpd</span><br><span class="line">/etc/pam.d/vsftpd</span><br><span class="line">/etc/vsftpd/ftpusers</span><br><span class="line">/etc/vsftpd/user_list</span><br><span class="line">/etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°è½¯ä»¶åŒ…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹æ¯”Linuxå·²å®‰è£…çš„è½¯ä»¶å’Œyumä»“åº“ä¸­çš„è½¯ä»¶, æœ‰å“ªäº›éœ€è¦å‡çº§</span><br><span class="line">[root@localhost ~]<span class="comment"># yum check-update</span></span><br><span class="line"></span><br><span class="line">//æ›´æ–°è½¯ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment">#  yum update acl -y</span></span><br></pre></td></tr></table></figure>

<h6 id="åˆ é™¤è½¯ä»¶åŒ…"><a href="#åˆ é™¤è½¯ä»¶åŒ…" class="headerlink" title="åˆ é™¤è½¯ä»¶åŒ…"></a>åˆ é™¤è½¯ä»¶åŒ…</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å…ˆå®‰è£…ä¸€ä¸ªsambaè½¯ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install samba</span></span><br><span class="line"></span><br><span class="line">//åˆ é™¤è¯¥è½¯ä»¶åŒ…,ä¸ä¼šåˆ é™¤ä¾èµ–, ä½†æ˜¯æˆ‘ä»¬å°½å¯èƒ½ä¸è¦ä½¿ç”¨åˆ é™¤è½¯ä»¶æ“ä½œ</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y erase samba</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y remove samba</span></span><br></pre></td></tr></table></figure>

<h6 id="ä¸ä»“åº“ç›¸å…³çš„å‘½ä»¤"><a href="#ä¸ä»“åº“ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="ä¸ä»“åº“ç›¸å…³çš„å‘½ä»¤"></a>ä¸ä»“åº“ç›¸å…³çš„å‘½ä»¤</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//åˆ—å‡ºyumæºå¯ç”¨çš„è½¯ä»¶ä»“åº“</span><br><span class="line">[root@localhost ~]<span class="comment"># yum repolist</span></span><br><span class="line"></span><br><span class="line">//åˆ—å‡ºå…¨éƒ¨yumæºå¯ç”¨å’Œç¦ç”¨çš„ä»“åº“</span><br><span class="line">[root@localhost ~]<span class="comment"># yum repolist all</span></span><br><span class="line"></span><br><span class="line">//æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æˆ–å‘½ä»¤å±äºå“ªä¸ªåŒ…</span><br><span class="line">[root@localhost ~]<span class="comment"># yum provides /etc/my.cnf</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum provides cd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum provides *bin/pstree</span></span><br></pre></td></tr></table></figure>

<h6 id="ä¸ç¼“å­˜ç›¸å…³çš„å‘½ä»¤"><a href="#ä¸ç¼“å­˜ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="ä¸ç¼“å­˜ç›¸å…³çš„å‘½ä»¤"></a>ä¸ç¼“å­˜ç›¸å…³çš„å‘½ä»¤</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//ç¼“å­˜yumæºè½¯ä»¶ä»“åº“, xmlå…ƒæ•°æ®æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line">//ç¼“å­˜è½¯ä»¶åŒ…, ä¿®æ”¹yumå…¨å±€é…ç½®æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/yum.conf</span></span><br><span class="line">[main]</span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span></span><br><span class="line">keepcache=1 //å¯åŠ¨ç¼“å­˜</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æŸ¥çœ‹ç¼“å­˜çš„xmlæ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /var/cache/yum/x86_64/7/base/</span></span><br><span class="line"></span><br><span class="line">//æŸ¥çœ‹ç¼“å­˜è½¯ä»¶åŒ…è·¯å¾„</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /var/cache/yum/x86_64/7/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦ä¸€ç§ç¼“å­˜rpmåŒ…æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">//1.å®‰è£…æ’ä»¶æ”¯æŒåªä¸‹è½½è½¯ä»¶åŒ…ä¸å®‰è£…</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install yum-plugin-downloadonly</span></span><br><span class="line">//2.å°†è½¯ä»¶ä¸‹è½½è‡³æŒ‡å®šç›®å½•</span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install --downloadonly --downloaddir=/tmp httpd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ¸…é™¤æ‰€æœ‰yumç¼“å­˜</span><br><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br><span class="line"></span><br><span class="line">//åªæ¸…é™¤ç¼“å­˜çš„è½¯ä»¶åŒ…</span><br><span class="line">[root@localhost ~]<span class="comment"># yum clean packages</span></span><br></pre></td></tr></table></figure>

<h6 id="ä¸åŒ…ç»„ç›¸å…³çš„å‘½ä»¤"><a href="#ä¸åŒ…ç»„ç›¸å…³çš„å‘½ä»¤" class="headerlink" title="ä¸åŒ…ç»„ç›¸å…³çš„å‘½ä»¤"></a>ä¸åŒ…ç»„ç›¸å…³çš„å‘½ä»¤</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//åˆ—å‡ºå·²ç»å®‰è£…å’Œæ‰€æœ‰å¯ä½¿ç”¨çš„è½¯ä»¶ç»„</span><br><span class="line">[root@localhost ~]<span class="comment"># yum groups list</span></span><br><span class="line"></span><br><span class="line">//å®‰è£…ä¸€æ•´ä¸ªç»„çš„è½¯ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># yum groups install Development tools \</span></span><br><span class="line">Compatibility libraries \</span><br><span class="line">Base Debugging Tools</span><br><span class="line"></span><br><span class="line">//yumåˆ é™¤åŒ…ç»„</span><br><span class="line">[root@localhost ~]<span class="comment"># yum groups remove  -y Base</span></span><br></pre></td></tr></table></figure>

<p>####### ä¸å†å²è®°å½•ç›¸å…³çš„å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥çœ‹å†å²æ‰§è¡Œyumå‘½ä»¤</span><br><span class="line">[root@localhost ~]<span class="comment"># yum history</span></span><br><span class="line"></span><br><span class="line">//æŸ¥è¯¢å†å²æ‰§è¡Œyumå‘½ä»¤IDè¯¦ç»†ä¿¡æ¯</span><br><span class="line">[root@localhost ~]<span class="comment"># yum history info N</span></span><br><span class="line"></span><br><span class="line">//æ’¤é”€å†å²æ‰§è¡Œè¿‡çš„yumå‘½ä»¤</span><br><span class="line">[root@localhost ~]<span class="comment"># yum history undo N</span></span><br></pre></td></tr></table></figure>

<h6 id="YUMç­¾åæ£€æŸ¥æœºåˆ¶"><a href="#YUMç­¾åæ£€æŸ¥æœºåˆ¶" class="headerlink" title="YUMç­¾åæ£€æŸ¥æœºåˆ¶"></a>YUMç­¾åæ£€æŸ¥æœºåˆ¶</h6><ul>
<li>rpmè½¯ä»¶æä¾›ç»„ç»‡redhatåœ¨æ„å»ºrpmåŒ…æ—¶, ä½¿ç”¨å…¶ç§é’¥private keyå¯¹ rpmè¿›è¡Œç­¾å</li>
<li>å®¢æˆ·ç«¯åœ¨ä½¿ç”¨rpmä¸ºäº†éªŒè¯å…¶åˆæ³•æ€§, å¯ä»¥ä½¿ç”¨redhatæä¾›çš„å…¬é’¥public keyè¿›è¡Œç­¾åæ£€æŸ¥</li>
</ul>
<p>æ–¹å¼1ï¼šæŒ‡å®šå…¬é’¥ä½ç½®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /etc/yum.repos.d/CentOS-Base.repo</span></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base mirrorlist=http://mirrorlist.centos.org/?release=<span class="variable">$releasever</span>&amp;arch=<span class="variable">$basearch</span>&amp;repo=os&amp;infra=<span class="variable">$infra</span> <span class="comment">#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼2ï¼šæå‰å¯¼å…¥å…¬é’¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/yum.repos.d/CentOS-Base.repo</span></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base </span><br><span class="line">mirrorlist=http://mirrorlist.centos.org/?release=<span class="variable">$releasever</span>&amp;arch=<span class="variable">$basearch</span>&amp;repo=os&amp;infra=<span class="variable">$infra</span></span><br><span class="line">baseurl=http://mirror.centos.org/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼3ï¼šä¸è¿›è¡Œç­¾åéªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ä¸æ£€æŸ¥è½¯ä»¶åŒ…çš„ç­¾å</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install httpd --nogpgcheck</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>å¦‚ä½•é…ç½®æœ¬åœ°å…‰ç›˜yumä»“åº“ä»¥åŠç½‘ç»œyumä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/cdrom</span><br><span class="line">mount /dev/cdrom /mnt/cdrom</span><br><span class="line"></span><br><span class="line">vim /etc/yum.repo.d/bendiyum.repo</span><br><span class="line">[bendiyum]</span><br><span class="line">name=bendiyum</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">yum clean all</span><br><span class="line">yum list | wc -l</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆäº†è§£åˆ°ç½‘ç»œæºçš„ä½ç½®</span><br><span class="line">ä½¿ç”¨wgetä¸‹è½½</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨yumå®‰è£… httpd php nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y httpd php nginx</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•é…ç½®yumç¼“å­˜rpmåŒ…ï¼ˆè‡³å°‘é˜è¿°ä¸¤ç§æ–¹å¼ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall /mnt/Packages/<span class="built_in">bind</span>-9.9.4-50.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">yum install http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨yumå®‰è£…æœ¬åœ°ç¼“å­˜å¥½çš„rpmåŒ…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall /mnt/Packages/<span class="built_in">bind</span>-9.9.4-50.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨yumåˆ é™¤httpdè½¯ä»¶åŒ…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove httpd</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•æ„å»ºä¼ä¸šå†…éƒ¨yumä»“åº“æœåŠ¡(è¯·å†™å‡ºè¯¦ç»†æ­¥éª¤,è‡³å°‘å‡†å¤‡ä¸¤å°è™šæ‹Ÿæœºï¼Œä½¿ç”¨httpæ–¹å¼)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/6.linux--yumå·¥å…·çš„ä½¿ç”¨/" data-id="ck7ooyake00334su6mreqt6q8"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-5.linux--linuxè®¡åˆ’ä»»åŠ¡" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/5.linux--linuxè®¡åˆ’ä»»åŠ¡/"
    >Linuxè®¡åˆ’ä»»åŠ¡</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/5.linux--linuxè®¡åˆ’ä»»åŠ¡/" class="article-date">
  <time datetime="2019-08-29T15:44:18.541Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°"><a href="#crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°"></a>crondè®¡åˆ’ä»»åŠ¡æ¦‚è¿°</h2><p>crond æ˜¯linuxä¸‹ç”¨æ¥å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›äº‹ä»¶çš„ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä¸windowsä¸‹çš„è®¡åˆ’ä»»åŠ¡ç±»ä¼¼ï¼Œå½“å®‰è£…å®Œæˆæ“ä½œç³»ç»Ÿåï¼Œé»˜è®¤ä¼šå®‰è£…æ­¤æœåŠ¡ å·¥å…·ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å¯åŠ¨crondè¿›ç¨‹ï¼Œcrondè¿›ç¨‹æ¯åˆ†é’Ÿä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œåˆ™è‡ªåŠ¨æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Schedule one-time tasks with at.   ä¸€æ¬¡æ€§è°ƒåº¦æ‰§è¡Œ at</span><br><span class="line">Schedule recurring jobs with cron. å¾ªç¯è°ƒåº¦æ‰§è¡Œ cron</span><br><span class="line">Schedule recurring system jobs. æ‰€æœ‰è®¡åˆ’ä»»åŠ¡æ‰§è¡Œä¸­çš„è¾“å‡ºéƒ½ä¼šä»¥é‚®ä»¶çš„æ–¹å¼å‘é€ç»™æŒ‡å®šç”¨æˆ·, é™¤éé‡å®šå‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å¾ªç¯è°ƒåº¦æ‰§è¡Œcron è¿›ç¨‹æ¯åˆ†é’Ÿä¼šå¤„ç†ä¸€æ¬¡è®¡åˆ’ä»»åŠ¡</span><br><span class="line">[root@zhoulijie ~]# systemctl status crond</span><br><span class="line">[root@zhoulijie ~]# ps aux | grep crond</span><br><span class="line">root       1238  0.0  0.0 126236  1672 ?        Ss   00:27   0:00 /usr/sbin/crond -n</span><br><span class="line">root      16029  0.0  0.0 112680   984 pts/0    S+   21:58   0:00 grep --color=auto crond</span><br></pre></td></tr></table></figure>

<p><strong>è®¡åˆ’ä»»åŠ¡åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</strong></p>
<ul>
<li><p>ç³»ç»Ÿçº§åˆ«çš„å®šæ—¶ä»»åŠ¡:</p>
<blockquote>
<p>æ¸…ç†ç³»ç»Ÿç¼“å­˜<br>ä¸´æ—¶æ–‡ä»¶æ¸…ç†<br>ç³»ç»Ÿä¿¡æ¯é‡‡é›†<br>æ—¥å¿—æ–‡ä»¶åˆ‡å‰²</p>
</blockquote>
</li>
<li><p>ç”¨æˆ·çº§åˆ«çš„å®šæ—¶ä»»åŠ¡:</p>
<blockquote>
<p>å®šæ—¶åŒæ­¥äº’è”ç½‘æ—¶é—´<br>å®šæ—¶å¤‡ä»½ç³»ç»Ÿé…ç½®æ–‡ä»¶<br>å®šæ—¶å¤‡ä»½æ•°æ®åº“æ–‡ä»¶</p>
</blockquote>
</li>
</ul>
<h2 id="crondé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#crondé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="crondé…ç½®æ–‡ä»¶è¯¦è§£"></a>crondé…ç½®æ–‡ä»¶è¯¦è§£</h2><ul>
<li><p>Linuxä¸‹çš„ä»»åŠ¡è°ƒåº¦åˆ†ä¸ºä¸¤ç±»ï¼Œç³»ç»Ÿä»»åŠ¡è°ƒåº¦å’Œç”¨æˆ·ä»»åŠ¡è°ƒåº¦ã€‚</p>
</li>
<li><p>ç³»ç»Ÿä»»åŠ¡è°ƒåº¦ï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚åœ¨/etcç›®å½•ä¸‹æœ‰ä¸€ä¸ªcrontabæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶              è¯´æ˜</span><br><span class="line">/etc/crontab        //crontabé…ç½®æ–‡ä»¶</span><br><span class="line">/etc/cron.deny      //è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·ä¸å…è®¸ä½¿ç”¨crontabå‘½ä»¤</span><br><span class="line">/var/spool/cron/*   //æ‰€æœ‰ç”¨æˆ·å®šæ—¶æ–‡ä»¶éƒ½å­˜æ”¾æ­¤ç›®å½•,æ–‡ä»¶ä»¥ç”¨æˆ·åå‘½å</span><br><span class="line">/var/log/cron       //å®šæ—¶ä»»åŠ¡æ‰§è¡Œåçš„æ—¥å¿—æ–‡ä»¶,å¯ç”¨æ¥å›æº¯</span><br></pre></td></tr></table></figure>

<h2 id="crondè®¡åˆ’ä»»åŠ¡ç®¡ç†"><a href="#crondè®¡åˆ’ä»»åŠ¡ç®¡ç†" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡ç®¡ç†"></a>crondè®¡åˆ’ä»»åŠ¡ç®¡ç†</h2><p><strong>crondä»»åŠ¡ç®¡ç†</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°          å«ä¹‰                æŒ‡å®šç¤ºä¾‹</span><br><span class="line">-e      ç¼–è¾‘crontabæ–‡ä»¶å†…å®¹       crontab -e</span><br><span class="line">-l      æŸ¥çœ‹crontabæ–‡ä»¶å†…å®¹       crontab -l</span><br><span class="line">-r      åˆ é™¤crontabæ–‡ä»¶å†…å®¹       crontab -r</span><br><span class="line">-u      ç®¡ç†å…¶ä»–ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡   crontab -u zhou -l</span><br><span class="line">æ³¨æ„: crontab &#123;-l -e&#125;å®é™…ä¸Šå°±æ˜¯åœ¨æ“ä½œ/var/spool/cron/username</span><br></pre></td></tr></table></figure>

<p><strong>crondæ—¶é—´å«ä¹‰</strong></p>
<p><img src="https://img-blog.csdn.net/20180301122140123" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59) //åˆ†é’Ÿ</span><br><span class="line"># |  .------------- hour (0 - 23)   //å°æ—¶</span><br><span class="line"># |  |  .---------- day of month (1 - 31)   //æ—¥æœŸ</span><br><span class="line"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr //æœˆä»½</span><br><span class="line"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat  //æ˜ŸæœŸ</span><br><span class="line"># |  |  |  |  |</span><br><span class="line"># *  *  *  *  *   command to be executed</span><br><span class="line"></span><br><span class="line">// *    è¡¨ç¤ºä»»æ„çš„(åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨)æ—¶é—´éƒ½æ‰§è¡Œ</span><br><span class="line">// -    è¡¨ç¤ºä¸€ä¸ªæ—¶é—´èŒƒå›´æ®µ, å¦‚5-7ç‚¹</span><br><span class="line">// ,    è¡¨ç¤ºåˆ†éš”æ—¶æ®µ, å¦‚6,0,4è¡¨ç¤ºå‘¨å…­ã€æ—¥ã€å››</span><br><span class="line">// */n  è¡¨ç¤ºæ¯éš”nå•ä½æ—¶é—´, å¦‚*/10 æ¯10åˆ†é’Ÿ</span><br></pre></td></tr></table></figure>

<p><strong>crondç¼–å†™ç¤ºä¾‹</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">00 02 * * * command      //æ¯å¤©2:00æ•´ </span><br><span class="line">00 02 1 * * command      //æ¯æœˆ1å·2:00æ•´ </span><br><span class="line">00 02 14 2 * command     //æ¯å¹´2æœˆ14å·2:00æ•´ </span><br><span class="line">00 02 * * 7 command      //æ¯å‘¨æ—¥2:00æ•´ </span><br><span class="line">00 02 * 6 5 command      //æ¯å¹´6æœˆçš„å‘¨äº”2:00æ•´</span><br><span class="line">00 02 14 * 7 command     //æ¯æœˆ14å·2:00æ•´æˆ–æ¯å‘¨æ—¥2:00æ•´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´éƒ½æ‰§è¡Œ</span><br><span class="line">00 02 14 2 7 command     //æ¯å¹´ 2 æœˆ 14 å· 2:00 æ•´ æˆ–è€… æ¯å‘¨æ—¥ 2:00 æ•´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´éƒ½æ‰§è¡Œ </span><br><span class="line">00 02 * * * command      //æ¯å¤©2:00æ•´</span><br><span class="line">*  02 * * * command      //æ¯å¤©2:00ä¸­çš„æ¯ä¸€åˆ†é’Ÿ (é”™è¯¯ç¤ºèŒƒ)</span><br><span class="line">* * * * *  command       //æ¯åˆ†é’Ÿæ‰§è¡Œ ls</span><br><span class="line">* * 14 2 *  command      //2æœˆ14å·çš„æ¯åˆ†é’Ÿ(é”™è¯¯ç¤ºèŒƒ)</span><br><span class="line">*/5 * * * *  command     //æ¯éš”5åˆ†é’Ÿ </span><br><span class="line">00 02 * 1,5,8 * command  //æ¯å¹´1,5,8æœˆçš„æ¯å¤©2:00æ•´ </span><br><span class="line">00 02 1-8 * *  command   //æ¯æœˆ1åˆ°8å·çš„2:00æ•´</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdn.net/20180510204632418?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NhdGVycGlsbGFyNw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt></p>
<p><strong>crondä¹¦å†™è§„èŒƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//1.ä¸ºè®¡åˆ’ä»»åŠ¡å¢åŠ å¿…è¦çš„æ³¨é‡Š</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">no crontab for root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">##time sync</span><br><span class="line">*/5 * * * * /usr/sbin/ntpdate time1.aliyun.com &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line">//2.è§„èŒƒè®¡åˆ’ä»»åŠ¡æ‰§è¡Œè„šæœ¬å­˜æ”¾çš„è·¯å¾„/scripts/</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">##backup www to /backup</span><br><span class="line">30 01 * * * /bin/sh /scripts/www_backup.sh &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line">//3.æ‰§è¡Œshellè„šæœ¬ä»»åŠ¡å‰åŠ /bin/sh, è„šæœ¬ç»“å°¾åŠ &amp;&gt;/dev/null</span><br><span class="line">//è°ƒè¯•å¥½ååº”å±è”½debugè¾“å‡ºä¿¡æ¯,é¿å…äº§ç”Ÿç³»ç»Ÿåƒåœ¾å ç”¨è¿‡å¤šinode, å¦‚éœ€è¾“å‡ºæ—¥å¿—, å¯é‡å®šå‘è‡³æ—¥å¿—æ–‡ä»¶</span><br><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]# crontab -l</span><br><span class="line">####backup www to /backup</span><br><span class="line">30 01 * * * /bin/sh /scripts/www_backup.sh &amp;&gt;/tmp/www_backup.log</span><br></pre></td></tr></table></figure>

<h2 id="crondé…ç½®ç¼–å†™å®ä¾‹"><a href="#crondé…ç½®ç¼–å†™å®ä¾‹" class="headerlink" title="crondé…ç½®ç¼–å†™å®ä¾‹"></a>crondé…ç½®ç¼–å†™å®ä¾‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]# crontab -e</span><br><span class="line"></span><br><span class="line">#æ¯å¤©å‡Œæ™¨åˆ‡å‰²nginxæ—¥å¿—</span><br><span class="line">05 00 * * * /bin/bash -x /scripts/cut_nginx.sh &amp;&gt; /scripts/log/nginx.log</span><br><span class="line"></span><br><span class="line">#æ¯å¤©5ç‚¹å¤‡ä»½æ•°æ®åº“</span><br><span class="line">00 05 * * * /bin/bash -x /scripts/dump_sql.sh &amp;&gt;/scripts/log/mysql.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ³¨æ„ï¼š</span><br><span class="line">1.æˆ‘ä»¬æ‰€æœ‰çš„crondæœåŠ¡æ˜¯è¿è¡Œçš„ç¨‹åºã€‚è€Œcrontabå‘½ä»¤ç”¨æˆ·ç”¨æ¥è®¾ç½®å®šæ—¶è§„åˆ™çš„å‘½ä»¤ã€‚</span><br><span class="line">2.crondæœåŠ¡æ˜¯ä¼ä¸šç”Ÿäº§å·¥ä½œä¸­å¸¸ç”¨çš„é‡è¦æœåŠ¡ï¼Œatå¾ˆå°‘ä½¿ç”¨ï¼Œå¯ä»¥å¿½ç•¥ã€‚</span><br><span class="line">3.å‡ ä¹æ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šç”¨åˆ°crondæœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•"><a href="#crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•" class="headerlink" title="crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•"></a>crondè®¡åˆ’ä»»åŠ¡è°ƒè¯•</h2><blockquote>
<ol>
<li>è°ƒæ•´ä»»åŠ¡æ¯åˆ†é’Ÿæ‰§è¡Œ, æ£€æµ‹æ˜¯å¦æ˜¯å¦æ­£å¸¸, æœ‰äº›ä»»åŠ¡ä¸è¦é¢‘ç¹æ‰§è¡Œ</li>
<li>è°ƒæ•´ç³»ç»Ÿæ—¶é—´ç„¶ååœ¨æ£€æµ‹ä»»åŠ¡, ç”Ÿäº§ä¸å»ºè®®ç›´æ¥ä½¿ç”¨æ­¤æ–¹å¼</li>
<li>æ‰§è¡Œè„šæœ¬, å°†è„šæœ¬æ‰§è¡Œè¾“å‡ºå†™å…¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶, è§‚å¯Ÿæ—¥å¿—å†…å®¹æ˜¯å¦æ­£å¸¸</li>
<li>æ³¨æ„ä¸€äº›ä»»åŠ¡å‘½ä»¤å¸¦æ¥çš„é—®é¢˜echo â€œwangqingâ€ &gt;&gt;/tmp/test.log &amp;&gt;/dev/null</li>
<li>å‘½ä»¤ä½¿ç”¨ç»å¯¹è·¯å¾„, é˜²æ­¢æ— æ³•æ‰¾åˆ°å‘½ä»¤å¯¼è‡´å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ•…éšœ</li>
<li>æŸ¥çœ‹/var/log/cronæ—¥å¿—è¿›è¡Œè°ƒè¯•</li>
</ol>
</blockquote>
<p>å»ºè®®: å°†éœ€è¦å®šæœŸæ‰§è¡Œçš„ä»»åŠ¡å†™å…¥è„šæœ¬ä¸­, å»ºç«‹/scriptsç›®å½•ç»Ÿä¸€å­˜æ”¾è„šæœ¬, è„šæœ¬ä¸­å‘½ä»¤å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„,æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬æ£€æµ‹è¾“å‡ºæ˜¯å¦æ­£å¸¸, ç„¶åå°†è„šæœ¬åŠ å…¥è®¡åˆ’ä»»åŠ¡æµ‹è¯•, æµ‹è¯•åæ— é—®é¢˜å°†è„šæœ¬è¾“å‡ºå†™å…¥å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶ä¸­å³å¯ã€‚</p>
<p>è®¡åˆ’ä»»åŠ¡æ·»åŠ æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰‹åŠ¨æ‰§è¡Œä¿ç•™æ‰§è¡Œå‘½ä»¤çš„æ­£ç¡®ç»“æœ</li>
<li>ç¼–å†™è„šæœ¬<ul>
<li>è„šæœ¬éœ€è¦ç»Ÿä¸€è·¯å¾„/scripts</li>
<li>è„šæœ¬å¼€å¤´å»ºè®®å¡«å†™æ³¨é‡Šä¿¡æ¯, åŒ…æ‹¬æ‰§è¡Œæ—¶é—´ã€å‘¨æœŸã€ä»»åŠ¡</li>
<li>è„šæœ¬å†…å®¹å¤åˆ¶æ‰§è¡ŒæˆåŠŸçš„å‘½ä»¤è‡³è„šæœ¬æ–‡ä»¶ä¸­(å‡å°‘æ¯ä¸ªç¯èŠ‚å‡ºé”™å‡ ç‡)</li>
<li>è„šæœ¬å†…å®¹å°½å¯èƒ½çš„ä¼˜åŒ–, ä½¿ç”¨ä¸€äº›å˜é‡æˆ–ä½¿ç”¨ç®€å•çš„åˆ¤æ–­è¯­å¥</li>
<li>è„šæœ¬æ‰§è¡Œçš„è¾“å‡ºä¿¡æ¯ä¸è¦éšæ„æ‰“å°, å¯ä»¥é‡å®šå‘è‡³å…¶ä»–ä½ç½®ä¿ç•™æˆ–ä¸¢å…¥é»‘æ´</li>
</ul>
</li>
<li>æ‰§è¡Œè„šæœ¬<ul>
<li>ä½¿ç”¨bashæ‰§è¡Œ, é˜²æ­¢è„šæœ¬æ²¡æœ‰å¢åŠ æ‰§è¡Œæƒé™(/bin/bash)</li>
<li>æ‰§è¡Œå‘½ä»¤ä»¥åŠè„šæœ¬æˆåŠŸåå¹¶å¤åˆ¶è¯¥å‘½ä»¤</li>
</ul>
</li>
<li>ç¼–å†™è®¡åˆ’ä»»åŠ¡<ul>
<li>åŠ ä¸Šå¿…è¦çš„æ³¨é‡Šä¿¡æ¯, äººã€æ—¶é—´ã€ä»»åŠ¡</li>
<li>è®¾å®šè®¡åˆ’ä»»åŠ¡æ‰§è¡Œçš„å‘¨æœŸ</li>
<li>åŠ å…¥æ‰§è¡Œè„šæœ¬çš„å‘½ä»¤</li>
</ul>
</li>
<li>è°ƒè¯•è®¡åˆ’ä»»åŠ¡<ul>
<li>å¢åŠ ä»»åŠ¡é¢‘ç‡æµ‹è¯•ã€è°ƒæ•´ç³»ç»Ÿæ—¶é—´æµ‹è¯•(ä¸èƒ½ç”¨äºç”Ÿäº§)</li>
<li>æ£€æŸ¥ç¯å¢ƒå˜é‡é—®é¢˜ã€æ£€æŸ¥crondæœåŠ¡äº§ç”Ÿæ—¥å¿—è¿›è¡Œæ’æŸ¥</li>
</ul>
</li>
</ol>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1.åœ¨linuxç³»ç»Ÿä¸­å¤‡ä»½è„šæœ¬backup.shéœ€è¦å†æ¯å‘¨1-5çš„æ¯å¤©ä¸‹åˆ1ç‚¹å’Œæ™šä¸Š8ç‚¹æ‰§è¡Œï¼Œä¸‹åˆ—å“ªä¸ªcronå‘½ä»¤å¯ä»¥å®Œæˆï¼ˆDï¼‰</p>
<p>a. 00 13,20 * 1-5 * backup.sh </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯å¹´çš„1-5æœˆçš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>b. 0 13,20 1,5 * * backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯æœˆçš„1å·å’Œ5å·çš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>c. * 13,20 * * 1-5 backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯æ˜¾ç¤º</span><br></pre></td></tr></table></figure>

<p>d. 00 13,20 * * 1-5 backup.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯å‘¨ä¸€-å‘¨äº”çš„13ç‚¹å’Œ20ç‚¹æ‰§è¡Œbackup.sh</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ä»¥ä¸Šç­”æ¡ˆæ¯ä¸€è¡Œæ˜¯ä»€ä¹ˆå«ä¹‰</p>
<p>2.æ–°å»º/scripts/httpd.shæ–‡ä»¶ï¼Œå¹¶è®©/scripts/httpd.shè„šæœ¬åœ¨æ¯å¤©çš„00:10åˆ†æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /scripts</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># touch /scripts/httpd.sh</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># whereis sh</span></span><br><span class="line">sh: /usr/bin/sh /usr/share/man/man1/sh.1.gz /usr/share/man/man1p/sh.1p.gz</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">10 00 * * * /usr/bin/sh /scripts/httpd.sh</span><br></pre></td></tr></table></figure>

<p>3.æ–°å»º/backupç›®å½•,æ¯å‘¨ä¸€ä¸‹åˆ5:50å°†/backupç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…æˆ backup.tar.gz</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># mkdir /bachup</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># whereis tar</span></span><br><span class="line">tar: /usr/bin/tar /usr/share/man/man1/tar.1.gz /usr/share/man/man5/tar.5.gz</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">50 17 * * 1 /usr/bin/tar -czf backup.tar.gz /backup</span><br></pre></td></tr></table></figure>

<p>4.å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©0ç‚¹5åˆ†æŠŠ/var/log/nginxä¸‹7å¤©å‰çš„æ–‡ä»¶è½¬ç§»åˆ°/backup/2018_xx_xxçš„ç›®å½•ä¸­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -l</span></span><br><span class="line">5 0 * * * /usr/bin/find /var/<span class="built_in">log</span>/nginx -mtime +7 | xargs /usr/bin/mv &#123;&#125; /backup/$(date <span class="string">'+%Y_%m_%d'</span>)</span><br></pre></td></tr></table></figure>

<p>5.ç³»ç»Ÿè„šæœ¬/scripts/which.shï¼Œå¦‚ä½•å®šæ—¶æ¯éš”7åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># crontab -e</span></span><br><span class="line">*/7 * * * *</span><br></pre></td></tr></table></figure>

<p>6.å¦‚ä½•ä¸å°å¿ƒåˆ é™¤äº†/var/spool/cron/rootæ–‡ä»¶ï¼Œè¯¥å¦‚ä½•æ¢å¤ã€‚</p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/5.linux--linuxè®¡åˆ’ä»»åŠ¡/" data-id="ck7ooyai900284su6b0olw5tn"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-4.linux--æƒé™ç®¡ç†" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/4.linux--æƒé™ç®¡ç†/"
    >æƒé™ç®¡ç†</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/4.linux--æƒé™ç®¡ç†/" class="article-date">
  <time datetime="2019-08-29T15:44:18.536Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linuxåŸºç¡€/">linuxåŸºç¡€</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p><strong>å‘¨ææ°</strong>ï¼Œæœ€åä¸€æ‰¹90åï¼Œç°å±…<strong>æ¹–åŒ—æ­¦æ±‰</strong></p>
<p>å­¤ç‹¬æ‚£è€…ï¼Œæ‡’ç™Œä¸­æœŸï¼Œæ— è„‘å¹»æƒ³è€…ã€‚ä½†å´äººç•œæ— å®³ï¼Œæ— éœ€è¿œç¦»ã€‚</p>
<p>å…´è¶£ä¼—å¤šï¼Œç„¶æ— ä¸€ç²¾é€šã€‚æ­£åŠªåŠ›æˆä¸ºä¸€ä¸ªæœ‰è¶£çš„äººã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;ğŸ‘†ä»¥ä¸Šæ˜¯ä¸å®Œæ•´çš„æˆ‘&quot;) //è¯·æˆ‘åƒå¤§é¤å°†ä¼šäº†è§£æ›´å¤š</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h1><p>[TOC]</p>
<h2 id="æƒé™ç®€ä»‹"><a href="#æƒé™ç®€ä»‹" class="headerlink" title="æƒé™ç®€ä»‹"></a>æƒé™ç®€ä»‹</h2><p>1.æ–‡ä»¶çš„æƒé™ä¸»è¦é’ˆå¯¹ä¸‰ç±»å¯¹è±¡è¿›è¡Œå®šä¹‰ï¼š</p>
<ul>
<li>ownerï¼šå±ä¸»ï¼Œu</li>
<li>groupï¼šå±ç»„ï¼Œg</li>
<li>otherï¼šå…¶å®ƒï¼Œo</li>
</ul>
<blockquote>
<p> æˆ‘ä»¬å¯ä»¥æŠŠowner å½“æˆå°æ˜ï¼Œgroupå½“æˆå°æ˜ä»–å®¶é‡Œäººï¼Œotherå½“æˆéš”å£è€ç‹</p>
</blockquote>
<p>2.æ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ä¸ªè®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§æƒé™ï¼š</p>
<table>
<thead>
<tr>
<th align="center">æƒé™</th>
<th align="center">å¯¹åº”çš„æ“ä½œå¯¹è±¡</th>
<th align="center">æƒé™è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">r</td>
<td align="center">æ–‡ä»¶</td>
<td align="center">å¯è¯»ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼catç­‰å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">æ–‡ä»¶</td>
<td align="center">å¯å†™ï¼Œå¯ä»¥ç¼–è¾‘æˆ–åˆ é™¤æ­¤æ–‡ä»¶</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">æ–‡ä»¶</td>
<td align="center">å¯æ‰§è¡Œï¼ŒeXacutableï¼Œå¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹å½“ä½œå‘½ä»¤æäº¤ç»™å†…æ ¸è¿è¡Œ</td>
</tr>
<tr>
<td align="center">r</td>
<td align="center">ç›®å½•</td>
<td align="center">å¯ä»¥å¯¹æ­¤ç›®å½•æ‰§è¡Œlsä»¥åˆ—å‡ºå†…éƒ¨çš„æ‰€æœ‰æ–‡ä»¶</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">ç›®å½•</td>
<td align="center">å¯ä»¥åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œä¹Ÿå¯åˆ é™¤æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">ç›®å½•</td>
<td align="center">å¯ä»¥ä½¿ç”¨cdåˆ‡æ¢è¿›æ­¤ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ls -læŸ¥çœ‹å†…éƒ¨æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</td>
</tr>
</tbody></table>
<p>3.æƒé™çš„å…«è¿›åˆ¶ä¸åè¿›åˆ¶è½¬æ¢ï¼š</p>
<p>|æƒé™|å…«è¿›åˆ¶|åè¿›åˆ¶|<br>|â€”|000|0|<br>|â€“x|001|1|<br>|-w-|010|2|<br>|-wx|011|3|<br>|râ€“|100|4|<br>|r-x|101|5|<br>|rw-|110|6|<br>|rwx|111|7|</p>
<h2 id="æƒé™ç®¡ç†å‘½ä»¤"><a href="#æƒé™ç®¡ç†å‘½ä»¤" class="headerlink" title="æƒé™ç®¡ç†å‘½ä»¤"></a>æƒé™ç®¡ç†å‘½ä»¤</h2><h4 id="ä¿®æ”¹æƒé™çš„å‘½ä»¤chmod"><a href="#ä¿®æ”¹æƒé™çš„å‘½ä»¤chmod" class="headerlink" title="ä¿®æ”¹æƒé™çš„å‘½ä»¤chmod"></a>ä¿®æ”¹æƒé™çš„å‘½ä»¤chmod</h4><p>-R é€’å½’ä¿®æ”¹æƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># ls</span></span><br><span class="line">123  abc  qqq  shadow</span><br><span class="line">[root@MR tmp]<span class="comment"># ls -l abc</span></span><br><span class="line">æ€»ç”¨é‡ 0</span><br><span class="line">-rw-r--r--. 1 root root 0 3æœˆ  27 09:54 123</span><br><span class="line">-rw-r--r--. 1 root root 0 3æœˆ  27 09:54 3445</span><br><span class="line">-rw-r--r--. 1 root root 0 3æœˆ  27 09:55 efsf</span><br><span class="line">[root@MR tmp]<span class="comment"># chmod -R 666 abc</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls -l abc</span></span><br><span class="line">æ€»ç”¨é‡ 0</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:54 123</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:54 3445</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:55 efsf</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹æ–‡ä»¶å±ä¸»å’Œå±ç»„çš„å‘½ä»¤chown"><a href="#ä¿®æ”¹æ–‡ä»¶å±ä¸»å’Œå±ç»„çš„å‘½ä»¤chown" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å±ä¸»å’Œå±ç»„çš„å‘½ä»¤chown"></a>ä¿®æ”¹æ–‡ä»¶å±ä¸»å’Œå±ç»„çš„å‘½ä»¤chown</h4><p>-R ä¿®æ”¹ç›®å½•åŠå…¶å†…éƒ¨æ–‡ä»¶çš„å±ä¸»(ä¸­é—´ç”¨å†’å·æˆ–è€…é€—å·éš”å¼€)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MR tmp]<span class="comment"># ls -l abc</span></span><br><span class="line">æ€»ç”¨é‡ 0</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:54 123</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:54 3445</span><br><span class="line">-rw-rw-rw-. 1 root root 0 3æœˆ  27 09:55 efsf</span><br><span class="line">[root@MR tmp]<span class="comment"># chown -R zhou:zhou abc</span></span><br><span class="line">[root@MR tmp]<span class="comment"># ls -l abc</span></span><br><span class="line">æ€»ç”¨é‡ 0</span><br><span class="line">-rw-rw-rw-. 1 zhou zhou 0 3æœˆ  27 09:54 123</span><br><span class="line">-rw-rw-rw-. 1 zhou zhou 0 3æœˆ  27 09:54 3445</span><br><span class="line">-rw-rw-rw-. 1 zhou zhou 0 3æœˆ  27 09:55 efsf</span><br></pre></td></tr></table></figure>

<h2 id="é®ç½©ç "><a href="#é®ç½©ç " class="headerlink" title="é®ç½©ç "></a>é®ç½©ç </h2><p>ä¸ºä»€ä¹ˆæ–‡ä»¶åˆ›å»ºä»¥åé»˜è®¤æƒé™æ˜¯644ï¼Ÿ<br>ä¸ºä»€ä¹ˆç›®å½•åˆ›å»ºä»¥åé»˜è®¤æƒé™æ˜¯755ï¼Ÿ</p>
<p>è¿™æ˜¯ç”±é®ç½©ç umaskæ¥æ§åˆ¶çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat /usr/bin/umask</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">umask</span> <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure>

<p>ä»åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œé®ç½©ç umaskæ˜¯ç”¨æ¥éšè—ä¸€äº›æƒé™çš„ã€‚ä¸¾ä¾‹ï¼šå¦‚æœä½ ä¸æƒ³è®©äººå®¶è®¤å‡ºä½ ï¼Œä½ ä¼šæ€ä¹ˆåŠï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># umask</span></span><br><span class="line">0022</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶æœ€ç»ˆçš„æƒé™ä¸ºï¼š</p>
<ul>
<li>666-umask</li>
</ul>
<p>ç›®å½•æœ€ç»ˆçš„æƒé™ä¸ºï¼š</p>
<ul>
<li>777-umask</li>
</ul>
<blockquote>
<p>æ–‡ä»¶é»˜è®¤æ˜¯ä¸èƒ½å…·æœ‰æ‰§è¡Œæƒé™çš„ï¼Œå¦‚æœç®—å¾—çš„ç»“æœæœ‰æ‰§è¡Œæƒé™åˆ™å°†å…¶æƒé™æ•´ä½“åŠ 1</p>
</blockquote>
<h2 id="Linuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç‰¹æ®Šæƒé™"><a href="#Linuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç‰¹æ®Šæƒé™" class="headerlink" title="Linuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç‰¹æ®Šæƒé™"></a>Linuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç‰¹æ®Šæƒé™</h2><h4 id="Linuxå®‰å…¨ä¸Šä¸‹æ–‡"><a href="#Linuxå®‰å…¨ä¸Šä¸‹æ–‡" class="headerlink" title="Linuxå®‰å…¨ä¸Šä¸‹æ–‡"></a>Linuxå®‰å…¨ä¸Šä¸‹æ–‡</h4><p>å‰æï¼šè¿›ç¨‹æœ‰å±ä¸»å’Œå±ç»„ï¼›æ–‡ä»¶æœ‰å±ä¸»å’Œå±ç»„ </p>
<ul>
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼Œå–å†³äºå‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰å¯æ‰§è¡Œæƒé™ï¼›</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºå‘èµ·è€…ï¼Œå±ç»„ä¸ºå‘èµ·è€…æ‰€å±çš„ç»„</li>
<li>è¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶çš„æƒé™å–å†³äºè¿›ç¨‹çš„å‘èµ·è€…ï¼š <ul>
<li>è¿›ç¨‹çš„å‘èµ·è€…æ˜¯æ–‡ä»¶çš„å±ä¸»æ—¶ï¼Œåˆ™åº”ç”¨æ–‡ä»¶å±ä¸»æƒé™</li>
<li>è¿›ç¨‹çš„å‘èµ·è€…æ˜¯æ–‡ä»¶çš„å±ç»„æ—¶ï¼Œåˆ™åº”ç”¨æ–‡ä»¶å±ç»„æƒé™</li>
<li>åº”ç”¨æ–‡ä»¶â€œå…¶å®ƒâ€æƒé™</li>
</ul>
</li>
</ul>
<h4 id="ç‰¹æ®Šæƒé™"><a href="#ç‰¹æ®Šæƒé™" class="headerlink" title="ç‰¹æ®Šæƒé™"></a>ç‰¹æ®Šæƒé™</h4><p>linuxé»˜è®¤æƒé™æ˜¯æ ¹æ®linuxå®‰å…¨ä¸Šä¸‹æ–‡çš„æ–¹å¼æ¥æ§åˆ¶çš„ï¼Œè€Œç‰¹æ®Šæƒé™çš„å­˜åœ¨æ‰“ç ´äº†linuxå®‰å…¨ä¸Šä¸‹æ–‡çš„è§„åˆ™ã€‚ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SUID(4)     //è¿è¡Œç¨‹åºæ—¶ï¼Œè¿™ä¸ªç¨‹åºå¯åŠ¨çš„è¿›ç¨‹çš„å±ä¸»æ˜¯ç¨‹åºæ–‡ä»¶è‡ªèº«çš„å±ä¸»ï¼Œè€Œä¸æ˜¯å¯åŠ¨è€…ä¸ºå±ä¸»</span><br><span class="line">    chmod u+s file</span><br><span class="line">    chmod u<span class="_">-s</span> file</span><br><span class="line">    //å¦‚æœfileæœ¬èº«åŸæ¥å°±æœ‰æ‰§è¡Œæƒé™ï¼Œåˆ™SUIDæ˜¾ç¤ºä¸ºsï¼Œå¦åˆ™æ˜¾ç¤ºä¸ºS</span><br><span class="line">    </span><br><span class="line">SGID(2)     //è¿è¡Œç¨‹åºæ—¶ï¼Œè¿™ä¸ªç¨‹åºå¯åŠ¨çš„è¿›ç¨‹çš„å±ç»„æ˜¯ç¨‹åºæ–‡ä»¶è‡ªèº«çš„å±ç»„ï¼Œè€Œä¸æ˜¯å¯åŠ¨è€…æ‰€å±çš„åŸºæœ¬ç»„</span><br><span class="line">    //é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå…¶å±ç»„ä¸ºæ­¤ç”¨æˆ·æ‰€å±çš„åŸºæœ¬ç»„ï¼›</span><br><span class="line">    //ä¸€æ—¦æŸç›®å½•è¢«è®¾å®šäº†SGIDï¼Œåˆ™å¯¹æ­¤ç›®å½•æœ‰å†™æƒé™çš„ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå…¶æ‰€å±çš„ç»„ \</span><br><span class="line">    //ä¸ºæ­¤è®¾å®šäº†SGIDçš„ç›®å½•çš„å±ç»„</span><br><span class="line">    chmod g+s DIR</span><br><span class="line">    chmod g<span class="_">-s</span> DIR</span><br><span class="line">    //å¦‚æœfileæœ¬èº«åŸæ¥å°±æœ‰æ‰§è¡Œæƒé™ï¼Œåˆ™SGIDæ˜¾ç¤ºä¸ºsï¼Œå¦åˆ™æ˜¾ç¤ºä¸ºS</span><br><span class="line">    </span><br><span class="line">Sticky(1)       //åœ¨ä¸€ä¸ªå…¬å…±ç›®å½•ï¼Œæ¯ä¸ªäººéƒ½èƒ½åˆ›å»ºæ–‡ä»¶ï¼Œåˆ é™¤è‡ªå·±çš„æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½åˆ é™¤åˆ«äººåˆ›å»ºçš„æ–‡ä»¶</span><br><span class="line">    chmod o+t DIR</span><br><span class="line">    chmod o-t DIR</span><br><span class="line">    //å¦‚æœDIRæœ¬èº«åŸæ¥å°±æœ‰æ‰§è¡Œæƒé™ï¼Œåˆ™Stickyæ˜¾ç¤ºä¸ºtï¼Œå¦åˆ™æ˜¾ç¤ºä¸ºT</span><br><span class="line">    </span><br><span class="line">4755    //æœ‰SUIDï¼Œæ–‡ä»¶æƒé™ä¸º755</span><br><span class="line">2755    //æœ‰SGIDï¼Œæ–‡ä»¶æƒé™ä¸º755</span><br><span class="line">1755    //æœ‰Stickyï¼Œæ–‡ä»¶æƒé™ä¸º755</span><br><span class="line">7755    //æœ‰SUIDã€SGIDã€Stickyï¼Œæ–‡ä»¶æƒé™ä¸º755</span><br><span class="line">//è¿™é‡Œå‰é¢çš„4ã€2ã€1åˆ†åˆ«è¡¨ç¤ºSUIDã€SGIDã€Sticky</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶ç³»é€šè®¿é—®æ§åˆ¶åˆ—è¡¨facl"><a href="#æ–‡ä»¶ç³»é€šè®¿é—®æ§åˆ¶åˆ—è¡¨facl" class="headerlink" title="æ–‡ä»¶ç³»é€šè®¿é—®æ§åˆ¶åˆ—è¡¨facl"></a>æ–‡ä»¶ç³»é€šè®¿é—®æ§åˆ¶åˆ—è¡¨facl</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//è¯­æ³•ï¼šsetfacl [-bkndRLP] &#123; -m|-M|-x|-X ... &#125; file ...</span><br><span class="line">    -m      //è®¾å®š</span><br><span class="line">        u:UID:perm</span><br><span class="line">        g:GID:perm</span><br><span class="line">    //setfacl -m u:test:rw file</span><br><span class="line">    //setfacl -m g:test:rw file</span><br><span class="line">    //å¦‚æœè¦ä¸ºæŸä¸ªç›®å½•è®¾å®šé»˜è®¤çš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œåªéœ€è¦è®¾å®šæ—¶åœ¨uæˆ–gå‰é¢åŠ ä¸Šdå³å¯ã€‚ å¦‚ï¼š\</span><br><span class="line">    //setfacl -m du:test:rw fileï¼Œæ­¤æ—¶åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶å‡ç»§æ‰¿æ­¤è®¿é—®æ§åˆ¶åˆ—è¡¨æ‰€è®¾ç½®çš„æƒé™</span><br><span class="line">    -x      //å–æ¶ˆ</span><br><span class="line">        u:UID</span><br><span class="line">        g:GID</span><br><span class="line">    //setfacl -x u:test file</span><br><span class="line">    //setfacl -x g:test file</span><br><span class="line">    -b      //Remove all</span><br><span class="line">        </span><br><span class="line">//è¯­æ³•ï¼šgetfacl [-aceEsRLPtpndvh] file ...</span><br><span class="line">//getfacl file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ–‡ä»¶æƒé™åº”ç”¨æ¬¡åºï¼š</span><br><span class="line">//é»˜è®¤æƒ…å†µä¸‹ï¼š</span><br><span class="line">    Owner --&gt; Group --&gt; Other</span><br><span class="line">//æœ‰è®¾ç½®faclçš„æƒ…å†µä¸‹ï¼š</span><br><span class="line">    Owner --&gt; facl,user --&gt; Group --&gt; facl,group --&gt; Other</span><br></pre></td></tr></table></figure>

<h2 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h2><p>sudoå¯ä»¥å®ç°æŸä¸ªç”¨æˆ·èƒ½å¤Ÿä»¥å¦å¤–å“ªä¸€ä¸ªç”¨æˆ·çš„èº«ä»½é€šè¿‡å“ªäº›ä¸»æœºæ‰§è¡Œä»€ä¹ˆå‘½ä»¤</p>
<p>sudoçš„é…ç½®æ–‡ä»¶ï¼š/etc/sudoers</p>
<p>ä½¿ç”¨visudoå‘½ä»¤è¿›è¡Œsudoçš„é…ç½®ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªsudoæ¡ç›®ï¼Œæ¡ç›®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>who which_hosts=(runas) command<ul>
<li>whoï¼šUser_Aliasï¼Œè¡¨ç¤ºè¿è¡Œå‘½ä»¤è€…çš„èº«ä»½</li>
<li>which_hostsï¼šHost_Aliasï¼Œé€šè¿‡å“ªäº›ä¸»æœº</li>
<li>runasï¼šRunas_Aliasï¼Œä»¥å“ªä¸ªç”¨æˆ·çš„èº«ä»½</li>
<li>commandï¼šCmnd_Aliasï¼Œè¿è¡Œå“ªäº›å‘½ä»¤   </li>
</ul>
</li>
</ul>
<p><strong>åˆ«åå¿…é¡»å…¨éƒ¨è€Œä¸”åªèƒ½ä½¿ç”¨å¤§å†™è‹±æ–‡å­—æ¯çš„ç»„åˆï¼Œå¯ä»¥ä½¿ç”¨æ„Ÿå¹å·å–å</strong></p>
<p><strong>åˆ«ååˆ†ç±»ï¼š</strong></p>
<ul>
<li><p>ç”¨æˆ·åˆ«åï¼š</p>
<ul>
<li>User_Alias NETWORKADMIN =<ul>
<li>ç”¨æˆ·çš„ç”¨æˆ·å</li>
<li>ç»„åï¼Œä½¿ç”¨%å¼•å¯¼</li>
<li>è¿˜å¯ä»¥å…¶å®ƒå·²ç»å®šä¹‰çš„ç”¨æˆ·åˆ«å</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸»æœºåˆ«åï¼š</p>
<ul>
<li>Host_Alias =<ul>
<li>ä¸»æœºå</li>
<li>IPåœ°å€</li>
<li>ç½‘ç»œåœ°å€</li>
<li>å…¶å®ƒä¸»æœºåˆ«å</li>
</ul>
</li>
</ul>
</li>
<li><p>Runasåˆ«åï¼š </p>
<ul>
<li>Runas_Alias =<ul>
<li>ç”¨æˆ·å</li>
<li>%ç»„å</li>
<li>å…¶å®ƒçš„Runasåˆ«å</li>
</ul>
</li>
</ul>
</li>
<li><p>å‘½ä»¤åˆ«åï¼š</p>
<ul>
<li>Cmnd_Alias =<ul>
<li>å‘½ä»¤è·¯å¾„</li>
<li>ç›®å½•ï¼ˆæ­¤ç›®å½•å†…çš„æ‰€æœ‰å‘½ä»¤ï¼‰</li>
<li>å…¶å®ƒå·²å®šä¹‰çš„å‘½ä»¤åˆ«å</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudoå‘½ä»¤è¯­æ³•ï¼šsudo [options] COMMAND</span><br><span class="line">    -V      //æ˜¾ç¤ºç‰ˆæœ¬ç¼–å·</span><br><span class="line">    -h      //ä¼šæ˜¾ç¤ºç‰ˆæœ¬ç¼–å·åŠæŒ‡ä»¤çš„ä½¿ç”¨æ–¹å¼è¯´æ˜</span><br><span class="line">    -l      //åˆ—å‡ºå½“å‰ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„æ‰€æœ‰sudoç±»å‘½ä»¤</span><br><span class="line">    -v      //å› ä¸ºsudoåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æˆ–æ˜¯åœ¨Nåˆ†é’Ÿå†…æ²¡æœ‰æ‰§è¡Œï¼ˆNé»˜è®¤ä¸º5ï¼‰ä¼šé—®å¯†ç ï¼Œè¿™ä¸ªå‚æ•° \</span><br><span class="line">            //æ˜¯é‡æ–°åšä¸€æ¬¡ç¡®è®¤ï¼Œå¦‚æœè¶…è¿‡Nåˆ†é’Ÿï¼Œä¹Ÿä¼šé—®å¯†ç </span><br><span class="line">    -k      //è®©è®¤è¯ä¿¡æ¯å¤±æ•ˆï¼Œå¦‚æœä¸æŒ‡å®š-kï¼Œé»˜è®¤è®¤è¯ä¿¡æ¯åœ¨5åˆ†é’Ÿåå¤±æ•ˆ</span><br><span class="line">    -b      //å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤æ”¾åœ¨åå°æ‰§è¡Œ</span><br><span class="line">    -u USERNAME     //ä»¥æŒ‡å®šçš„ç”¨æˆ·åæ‰§è¡Œå‘½ä»¤ï¼Œé»˜è®¤ä¸ºroot</span><br></pre></td></tr></table></figure>

<h2 id="ç®¡ç†å‘½ä»¤"><a href="#ç®¡ç†å‘½ä»¤" class="headerlink" title="ç®¡ç†å‘½ä»¤"></a>ç®¡ç†å‘½ä»¤</h2><p>w æ˜¾ç¤ºå½“å‰ç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ·æœ‰å“ªäº›ï¼Œä»¥åŠå…¶æ­£åœ¨åšä»€ä¹ˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zhou@zhoulijie ~]$ w</span><br><span class="line"> 20:36:03 up 18 min,  2 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY        LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1      20:18   17:47   0.02s  0.02s -bash</span><br><span class="line">root     pts/0     20:18    3.00s  0.13s  0.04s w</span><br></pre></td></tr></table></figure>

<p> sleep   //ç¡çœ </p>
<blockquote>
<p>   s:ç§’ï¼Œé»˜è®¤<br>   mï¼šåˆ†<br>   hï¼šå°æ—¶<br>   dï¼šå¤©</p>
</blockquote>
<p>last   æ˜¾ç¤º/var/log/wtmpæ–‡ä»¶ï¼Œæ˜¾ç¤ºç”¨æˆ·ç™»å½•å†å²åŠç³»ç»Ÿé‡å¯å†å² </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zhou@zhoulijie ~]$ last</span><br><span class="line">root     pts/0        192.168.83.1     Mon Apr  8 20:18   still logged <span class="keyword">in</span></span><br><span class="line">root     tty1                          Mon Apr  8 20:18   still logged <span class="keyword">in</span></span><br><span class="line">reboot   system boot  3.10.0-123.el7.x Mon Apr  8 20:17 - 20:37  (00:19)</span><br><span class="line">............................ä»¥ä¸‹çœç•¥............................</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â€‹     -n #  æ˜¾ç¤ºæœ€è¿‘#æ¬¡çš„ç›¸å…³ä¿¡æ¯    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zhou@zhoulijie ~]$ last -n 2</span><br><span class="line">root     pts/0        192.168.83.1     Mon Apr  8 20:18   still logged <span class="keyword">in</span></span><br><span class="line">root     tty1                          Mon Apr  8 20:18   still logged <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">wtmp begins Wed Mar  6 16:48:05 2019</span><br></pre></td></tr></table></figure>

<p> lastb  æ˜¾ç¤º/var/log/btmpæ–‡ä»¶ï¼Œæ˜¾ç¤ºç”¨æˆ·é”™è¯¯çš„ç™»å½•å°è¯•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># lastb</span></span><br><span class="line">root     ssh:notty    192.168.83.1     Wed Mar 27 09:48 - 09:48  (00:00)</span><br><span class="line">root     pts/0                         Wed Mar  6 17:16 - 17:16  (00:00)</span><br><span class="line">root     tty1                          Wed Mar  6 16:48 - 16:48  (00:00)</span><br><span class="line"></span><br><span class="line">btmp begins Wed Mar  6 16:48:38 2019</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â€‹     -n #  æ˜¾ç¤ºæœ€è¿‘#æ¬¡çš„ç›¸å…³ä¿¡æ¯    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># lastb -n 2</span></span><br><span class="line">root     ssh:notty    192.168.83.1     Wed Mar 27 09:48 - 09:48  (00:00)</span><br><span class="line">root     pts/0                         Wed Mar  6 17:16 - 17:16  (00:00)</span><br><span class="line"></span><br><span class="line">btmp begins Wed Mar  6 16:48:38 2019</span><br></pre></td></tr></table></figure>

<p>lastlog   æ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·æœ€è¿‘ä¸€æ¬¡æˆåŠŸç™»å½•ä¿¡æ¯  </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># lastlog</span></span><br><span class="line">ç”¨æˆ·å           ç«¯å£     æ¥è‡ª             æœ€åç™»é™†æ—¶é—´</span><br><span class="line">root             pts/0                     ä¸€ 4æœˆ  8 20:42:13 +0800 2019</span><br><span class="line">bin                                        **ä»æœªç™»å½•è¿‡**</span><br><span class="line">daemon                                     **ä»æœªç™»å½•è¿‡**</span><br><span class="line">adm                                        **ä»æœªç™»å½•è¿‡**</span><br><span class="line">lp                                         **ä»æœªç™»å½•è¿‡**</span><br><span class="line">sync                                       **ä»æœªç™»å½•è¿‡**</span><br><span class="line">shutdown                                   **ä»æœªç™»å½•è¿‡**</span><br><span class="line">............................ä»¥ä¸‹çœç•¥............................</span><br></pre></td></tr></table></figure>

<blockquote>
<p> -u username     //æ˜¾ç¤ºç‰¹å®šç”¨æˆ·æœ€è¿‘çš„ç™»å½•ä¿¡æ¯      </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># lastlog -u zhou</span></span><br><span class="line">ç”¨æˆ·å           ç«¯å£     æ¥è‡ª             æœ€åç™»é™†æ—¶é—´</span><br><span class="line">zhou             pts/0                     ä¸€ 4æœˆ  8 20:28:24 +0800 2019</span><br></pre></td></tr></table></figure>

<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>1ã€æ–°å»ºä¸€ä¸ªæ²¡æœ‰å®¶ç›®å½•çš„ç”¨æˆ·openstack</p>
<p><strong>useradd -M openstack</strong></p>
<p> 2ã€å¤åˆ¶/etc/skelä¸º/home/openstack</p>
<p><strong>cp -r -p /etc/skel /home/openstack</strong></p>
<p> 3ã€æ”¹å˜/home/openstackåŠå…¶å†…éƒ¨æ–‡ä»¶çš„å±ä¸»å±ç»„å‡ä¸ºopenstack</p>
<p><strong>chown -R openstack:openstack /home/openstack/</strong></p>
<p> 4ã€è®¾ç½®/home/openstackåŠå…¶å†…éƒ¨çš„æ–‡ä»¶ï¼Œå±ç»„å’Œå…¶å®ƒç”¨æˆ·æ²¡æœ‰ä»»ä½•è®¿é—®æƒé™ </p>
<p><strong>chmod -R 700 /home/openstack</strong></p>

      
      <!-- æ‰“èµ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/4.linux--æƒé™ç®¡ç†/" data-id="ck7ooyahs00234su62njcizpg"
        class="article-share-link">åˆ†äº«</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linuxåŸºç¡€/">linuxåŸºç¡€</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">ä¸‹ä¸€é¡µ</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer.png" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>å–œæ¬¢å°±æ‰“èµå§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['é¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€','æ„¿ä½ ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±','æƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>