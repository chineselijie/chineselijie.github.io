<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Li Jie&#39;s blog
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover3.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Li Jie&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-4.linux--NFS服务" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/4.linux--NFS服务/"
    >NFS服务</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/4.linux--NFS服务/" class="article-date">
  <time datetime="2019-08-29T15:44:18.534Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux进阶/">linux进阶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="NFS简介"><a href="#NFS简介" class="headerlink" title="NFS简介"></a>NFS简介</h2><h3 id="NFS特点"><a href="#NFS特点" class="headerlink" title="NFS特点"></a>NFS特点</h3><ul>
<li><p><a href="https://baike.baidu.com/item/NFS/812203?fr=aladdin" target="_blank" rel="noopener">NFS（Network File System)</a>即<a href="https://baike.baidu.com/item/网络文件系统/9719420" target="_blank" rel="noopener">网络文件系统</a>，是FreeBSD支持的文件系统中的一种，它允许网络中的计算机之间共享资源。在NFS的应用中，本地NFS的客户端应用可以透明地读写位于远端NFS服务器上的文件，就像访问本地文件一样。</p>
</li>
<li><p>NFS适用于Linux与unix之间实现文件共享，不能实现Linux与Windows之间的文件共享</p>
</li>
<li><p>NFS运行在应用层的协议上，其监听于2049/tcp和2049/udp套接字上</p>
</li>
</ul>
<p>注意：NFS服务只能基于IP进行认证</p>
<h3 id="使用NFS的好处"><a href="#使用NFS的好处" class="headerlink" title="使用NFS的好处"></a>使用NFS的好处</h3><ul>
<li>节省本地存储空间，将常用的数据存放在一台NFS服务器上且可以通过网络访问，那么本地终端将可以减少自身存储空间的使用。</li>
<li>用户不需要在网络中的每个机器上都建有Home目录，Home目录可以放在NFS服务器上且可以在网络上被访问使用。</li>
<li>一些存储设备如软驱、CDROM和Zip（一种高储存密度的磁盘驱动器与磁盘）等都可以在网络上被别的机器使用。这可以减少整个网络上可移动介质设备的数量。</li>
</ul>
<h3 id="NFS的体系组成"><a href="#NFS的体系组成" class="headerlink" title="NFS的体系组成"></a>NFS的体系组成</h3><p>NFS体系至少有两个主要部分：</p>
<p><a href="https://baike.baidu.com/pic/NFS/812203/0/0df3d7ca7bcb0a46faeb868c6863f6246a60afbd?fr=lemma&ct=single" target="_blank" rel="noopener"><img src="https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=83208b998401a18bf4eb154dae2e0761/0df3d7ca7bcb0a46faeb868c6863f6246a60afbd.jpg" alt="img"></a></p>
<p>一台NFS服务器和若干台客户机，如上图所示。</p>
<p>客户机通过TCP/IP网络远程访问存放在NFS服务器上的数据。</p>
<p>在NFS服务器正式启用前，需要根据实际环境和需求，配置一些NFS参数。</p>
<h3 id="NFS的应用场景"><a href="#NFS的应用场景" class="headerlink" title="NFS的应用场景"></a>NFS的应用场景</h3><ol>
<li><p>多个机器共享一台CDROM或者其他设备。这对于在多台机器中安装软件来说更加便宜跟方便。</p>
</li>
<li><p>在大型网络中，配置一台中心 NFS 服务器用来放置所有用户的home目录可能会带来便利。这些目录能被输出到网络以便用户不管在哪台工作站上登录，总能得到相同的home目录。</p>
</li>
<li><p>不同客户端可在NFS上观看影视文件，节省本地空间。</p>
</li>
<li><p>在客户端完成的工作数据，可以备份保存到NFS服务器上用户自己的路径下。</p>
</li>
</ol>
<ul>
<li>NFS是运行在应用层的协议。随着NFS多年的发展和改进，NFS既可以用于局域网也可以用于广域网，且与操作系统和硬件无关，可以在不同的计算机或系统上运行。</li>
</ul>
<h3 id="NFS挂载原理"><a href="#NFS挂载原理" class="headerlink" title="NFS挂载原理"></a>NFS挂载原理</h3><p><img src="https://images2017.cnblogs.com/blog/1054216/201709/1054216-20170901171038202-1066682924.jpg" alt></p>
<ul>
<li><p>​    当我们在NFS服务器设置好一个共享目录/home/public后，其他的有权访问NFS服务器的NFS客户端就可以将这个目录挂载到自己文件系统的某个挂载点，这个挂载点可以自己定义，如上图客户端A与客户端B挂载的目录就不相同。并且挂载好后我们在本地能够看到服务端/home/public的所有数据。如果服务器端配置的客户端只读，那么客户端就只能够只读。如果配置读写，客户端就能够进行读写。挂载后，NFS客户端查看磁盘信息命令：#df –h。</p>
</li>
<li><p>既然NFS是通过网络来进行服务器端和客户端之间的数据传输，那么两者之间要传输数据就要有想对应的网络端口，NFS服务器到底使用哪个端口来进行数据传输呢？基本上NFS这个服务器的端口开在2049,但由于文件系统非常复杂。因此NFS还有其他的程序去启动额外的端口，这些额外的用来传输数据的端口是随机选择的，是小于1024的端口；既然是随机的那么客户端又是如何知道NFS服务器端到底使用的是哪个端口呢？这时就需要通过远程过程调用（Remote Procedure Call,RPC）协议来实现了！</p>
</li>
</ul>
<h2 id="NFS的工作机制"><a href="#NFS的工作机制" class="headerlink" title="NFS的工作机制"></a>NFS的工作机制</h2><p>NFS是基于rpc来实现网络文件系统共享的。</p>
<h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><p><a href="[https://baike.baidu.com/item/%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E5%8D%8F%E8%AE%AE/6893245?fromtitle=RPC&fromid=609861&fr=aladdin](https://baike.baidu.com/item/远程过程调用协议/6893245?fromtitle=RPC&fromid=609861&fr=aladdin)">RPC（Remote Procedure Call）</a>—<a href="https://baike.baidu.com/item/远程过程调用/7854346" target="_blank" rel="noopener">远程过程调用</a>，它是一种通过<a href="https://baike.baidu.com/item/网络/143243" target="_blank" rel="noopener">网络</a>从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。<a href="https://baike.baidu.com/item/RPC协议" target="_blank" rel="noopener">RPC协议</a>假定某些<a href="https://baike.baidu.com/item/传输协议/8048821" target="_blank" rel="noopener">传输协议</a>的存在，如TCP或UDP，为通信程序之间携带信息数据。在OSI<a href="https://baike.baidu.com/item/网络通信/9636548" target="_blank" rel="noopener">网络通信</a>模型中，RPC跨越了<a href="https://baike.baidu.com/item/传输层/4329536" target="_blank" rel="noopener">传输层</a>和<a href="https://baike.baidu.com/item/应用层/4329788" target="_blank" rel="noopener">应用层</a>。RPC使得开发包括网络<a href="https://baike.baidu.com/item/分布式" target="_blank" rel="noopener">分布式</a>多程序在内的应用程序更加容易。</p>
<p>RPC采用客户机/服务器模式。请求程序就是一个客户机，而服务提供程序就是一个服务器。首先，客户机调用进程发送一个有进程参数的调用信息到服务进程，然后等待应答信息。在服务器端，进程保持睡眠状态直到调用信息到达为止。当一个调用信息到达，服务器获得进程参数，计算结果，发送答复<a href="https://baike.baidu.com/item/信息/111163" target="_blank" rel="noopener">信息</a>，然后等待下一个调用信息，最后，客户端调用进程接收答复信息，获得进程结果，然后调用执行继续进行。</p>
<h4 id="RPC工作原理"><a href="#RPC工作原理" class="headerlink" title="RPC工作原理"></a>RPC工作原理</h4><p>运行时，一次客户机对服务器的RPC调用，其内部操作大致有如下十步：</p>
<p>1.调用客户端句柄；执行传送参数</p>
<p>2.调用本地系统<a href="https://baike.baidu.com/item/内核" target="_blank" rel="noopener">内核</a>发送网络消息</p>
<p>3.<a href="https://baike.baidu.com/item/消息传送" target="_blank" rel="noopener">消息传送</a>到远程<a href="https://baike.baidu.com/item/主机" target="_blank" rel="noopener">主机</a></p>
<p>4.服务器句柄得到消息并取得参数</p>
<p>5.执行远程过程</p>
<p><a href="https://baike.baidu.com/pic/远程过程调用协议/6893245/0/18d8bc3eb13533fadd93e964a9d3fd1f41345b56?fr=lemma&ct=single" target="_blank" rel="noopener"><img src="https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=7e27f7747aec54e745ec1d1c89399bfd/18d8bc3eb13533fadd93e964a9d3fd1f41345b56.jpg" alt="img"></a></p>
<p>6.执行的过程将结果返回服务器句柄</p>
<p>7.服务器句柄返回结果，调用远程系统<a href="https://baike.baidu.com/item/内核" target="_blank" rel="noopener">内核</a></p>
<p>8.消息传回<a href="https://baike.baidu.com/item/本地主机" target="_blank" rel="noopener">本地主机</a></p>
<p>9.客户句柄由内核接收消息</p>
<p>10.客户接收句柄返回的数据</p>
<h3 id="NIS"><a href="#NIS" class="headerlink" title="NIS"></a>NIS</h3><p><a href="https://baike.baidu.com/item/NIS/9085264?fr=aladdin" target="_blank" rel="noopener">NIS（Network Information Service）</a>—–网络信息服务，是<a href="https://baike.baidu.com/item/诺顿网络安全特警/10753322" target="_blank" rel="noopener">诺顿网络安全特警</a>简称，同时NIS是Sun Microsystem于1985年发布的一项目录服务技术（Diretory Service），用来<a href="https://baike.baidu.com/item/集中控制/1051216" target="_blank" rel="noopener">集中控制</a>几个系统管理数据库的网络用品。简化了UNIX和<a href="https://baike.baidu.com/item/LINUX/27050" target="_blank" rel="noopener">LINUX</a>桌面客户的管理工作，客户端利用它可以使用中心服务器的管理文件。</p>
<h3 id="NFS的工作机制-1"><a href="#NFS的工作机制-1" class="headerlink" title="NFS的工作机制"></a>NFS的工作机制</h3><p>NFS服务器端运行着四个进程：</p>
<ul>
<li>nfsd      nfs的守护进程，监听在2049/tcp和2049/udp端口上；不负责文件的存储（由NFS服务器本地内核负责调度存储），用于理解客户端发起的RPC请求，并将其转交给本地内核，然后存储在指定的文件系统上</li>
<li>mountd     用于验证客户端是否在允许访问此NFS文件系统的客户端列表中，如果在的话就允许访问（发放一个指令，携带指令去寻找nfsd）;   mountd的服务端口是随机的，由rpc服务提供随机的端口号</li>
<li>idmapd     实现用户账号的集中映射，把所有的账号都映射为nfsnobody，但是在访问时却能以本地用户的身份去访问</li>
<li>portmapper     NFS服务器的RPC服务，其监听于111/tcp和111/UDP套接字上，用于管理远程过程中调用RPC</li>
</ul>
<h2 id="exports文件的格式"><a href="#exports文件的格式" class="headerlink" title="exports文件的格式"></a>exports文件的格式</h2><p>nfs的主配置文件是/etc/exports，在此文件中，可以定义NFS系统的输出目录（即共享目录）、访问权限和允许访问的主机等参数。该文件默认为空，没有配置输出任何共享目录，这是基于安全性的考虑，如此即使系统启动了NFS服务也不会输出任何共享资源。</p>
<p>exports文件中每一行提供了一个共享目录的设置，其命令格式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;输出目录&gt; [客户端1(选项1,选项2,...)] [客户端2(选项1,选项2,...)]</span><br></pre></td></tr></table></figure>

<p>其中，除输出目录是必选参数外，其他参数均是可选项。另外，格式中的输出目录和客户端之间、客户端与客户端之间都使用空格分隔，但客户端与选项之间不能有空格。</p>
<p>客户端是指网络中可以访问这个NFS共享目录的计算机。客户端的指定非常灵活，可为单个主机的IP或域名，亦可为某个子网或域中的主机等。</p>
<p><strong>客户端地址的设置主要有以下几种方式：</strong></p>
<ul>
<li>可以使用完整的IP或者是网络号，例如192.168.107.140 或 192.168.107.0/24</li>
<li>可以使用主机名，但这个主机名必须要在/etc/hosts内，或可以使用DNS找到该名称才行，反正重点是可找到IP就行，如果是主机名的话，还可以支持通配符，例如‘*’或‘？’均可接受。</li>
</ul>
<p><strong>选项用来设置共享目录的访问权限、用户映射等。exports文件中的选项比较多，一般可分为三类：</strong></p>
<ul>
<li>访问权限选项（用于控制共享目录的访问权限）</li>
<li>用户映射选项<ul>
<li>默认情况下，当客户端访问NFS服务器时，若远程访问的用户是root用户，则NFS服务器会将其映射成一个本地的匿名用户（该用户为nfsnobody），并将其所属的用户组也映射成匿名用户组（该用户组也为nfsnobody），如此有助于提高系统的安全性。</li>
</ul>
</li>
<li>其他选项</li>
</ul>
<p><strong>访问权限选项：</strong></p>
<table>
<thead>
<tr>
<th align="center">访问权限选项</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ro</td>
<td align="left">设置输出目录只读</td>
</tr>
<tr>
<td align="center">rw</td>
<td align="left">设置输出目录可读写</td>
</tr>
</tbody></table>
<p><strong>用户映射选项：</strong></p>
<table>
<thead>
<tr>
<th align="center">用户映射选项</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">all_squash</td>
<td align="left">将远程访问的所有普通用户及所属组都映射为匿名用户或用户组(nfsnobody)</td>
</tr>
<tr>
<td align="center">no_all_squash</td>
<td align="left">不将远程访问的所有普通用户及所属用户组都映射为匿名用户或用户组(默认设置)</td>
</tr>
<tr>
<td align="center">root_squash</td>
<td align="left">将root用户及所属用户组都映射为匿名用户或用户组(默认设置)</td>
</tr>
<tr>
<td align="center">no_root_squash</td>
<td align="left">不将root用户及所属用户组都映射为匿名用户或用户组</td>
</tr>
<tr>
<td align="center">anonuid=xxx</td>
<td align="left">将远程访问的所有用户都映射为匿名用户，并指定该匿名用户为本地用户帐户(UID=xxx)</td>
</tr>
<tr>
<td align="center">anongid=xxx</td>
<td align="left">将远程访问的所有用户组都映射为匿名用户组，并指定该匿名用户组为本地用户组(GID=xxx)</td>
</tr>
</tbody></table>
<p><strong>常用的其他选项：</strong></p>
<table>
<thead>
<tr>
<th align="left">其他选项</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">secure</td>
<td align="left">限制客户端只能从小于1024的TCP/IP端口连接NFS服务器(默认设置)</td>
</tr>
<tr>
<td align="left">insecure</td>
<td align="left">允许客户端从大于1024的TCP/IP端口连接NFS服务器</td>
</tr>
<tr>
<td align="left">sync</td>
<td align="left">将数据同步写入内存缓冲区或磁盘中，效率较低，但可保证数据一致性</td>
</tr>
<tr>
<td align="left">async</td>
<td align="left">将数据先保存在内存缓冲区中，必要时才写入磁盘</td>
</tr>
<tr>
<td align="left">wdelay</td>
<td align="left">检查是否有相关的写操作，如果有则这些写操作一起执行，可提高效率(默认设置)</td>
</tr>
<tr>
<td align="left">no_wdelay</td>
<td align="left">若有写操作则立即执行，应与sync配置使用</td>
</tr>
<tr>
<td align="left">subtree_check</td>
<td align="left">若输出目录是一个子目录，则NFS服务器将检查其父目录的权限(默认设置)</td>
</tr>
<tr>
<td align="left">no_subtree_check</td>
<td align="left">即使输出目录是一个子目录，NFS服务亦不检查其父目录的权限，可提高效率</td>
</tr>
<tr>
<td align="left">nohide</td>
<td align="left">若将一个目录挂载到另一个目录之上，则原来的目录通常就被隐藏起来或看起来像空的一样。要禁用这种行为，需启用hide选项</td>
</tr>
</tbody></table>
<h2 id="NFS管理"><a href="#NFS管理" class="headerlink" title="NFS管理"></a>NFS管理</h2><ul>
<li>安装NFS</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum -y install nfs*</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl restart nfs-server rpcbind</span><br><span class="line">或者 systemctl start nfs-server rpcbind</span><br><span class="line"><span class="comment">#查看启动状态</span></span><br><span class="line">systemctl status nfs</span><br></pre></td></tr></table></figure>

<ul>
<li>使用showmount命令测试NFS服务器的输出目录状态</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">语法：showmount [选项] [NFS服务器名称或地址]</span><br><span class="line">常用的选项：</span><br><span class="line">	-a	显示指定NFS服务器的所有客户端主机及其所连接的目录</span><br><span class="line">	-d	显示指定的NFS服务器中已被客户端连接的所有输出目录</span><br><span class="line">	-e	显示指定的NFS服务器上所有输出的共享目录</span><br><span class="line">	</span><br><span class="line">[root@client ~]# showmount -a 192.168.176.222</span><br><span class="line">All mount points on 192.168.176.222:</span><br><span class="line">[root@client ~]# showmount -d 192.168.176.222</span><br><span class="line">Directories on 192.168.176.222:</span><br><span class="line">[root@client ~]# showmount -e 192.168.176.222</span><br><span class="line">Export list for 192.168.176.222:</span><br><span class="line">/123 192.168.176.111</span><br></pre></td></tr></table></figure>

<ul>
<li>在客户端挂载NFS文件系统</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount -t nfs 服务器的IP地址：服务端的地址目录 本地挂载地址目录</span><br><span class="line"></span><br><span class="line">[root@client ~]<span class="comment"># mount -t nfs 192.168.176.222:/123 /nfs</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在客户端设置开机自动挂在NFS</li>
</ul>
<p>首先编辑/etc/fstab</p>
<p>添加内容如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">服务器的IP地址：服务端的地址目录 本地挂载地址目录 nfs defaults,_netdev 0 0</span><br><span class="line"></span><br><span class="line">192.168.176.222:/123    /nfs    nfs     defaults,_netdev        0 0</span><br></pre></td></tr></table></figure>

<ul>
<li>客户端挂载时可以使用的特殊选项：<ul>
<li>rsize：其值是从服务器读取的字节数（缓冲）。默认为1024。若使用比较高的值，如8192，可以提高传输速度</li>
<li>wsize：其值是写入到服务器的字节数（缓冲）。默认为1024。若使用比较高的值，如8192，可以提高传输速度</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">exportfs	维护exports文件导出的文件系统表的专用工具</span><br><span class="line">	-a	输出在/etc/exports文件中所设置的所有目录</span><br><span class="line">	-r	重新读取/etc/exports文件中的设置，并使其立即生效，无需重启服务</span><br><span class="line">	-u	停止输出某一目录</span><br><span class="line">	-v	在输出目录时将目录显示到屏幕上</span><br></pre></td></tr></table></figure>

<p><strong>检查输出目录所使的选项：</strong></p>
<p>​     在配置文件/etc/exports中，即使在命令行中只设置了一两个选项，但在真正输出目录时，实际上还带有很多默认的选项。通过查看<code>/var/lib/nfs/etab</code>文件，可以看到具体使用了何选项</p>
<h2 id="NFS配置演示"><a href="#NFS配置演示" class="headerlink" title="NFS配置演示"></a>NFS配置演示</h2><blockquote>
<p>服务端地址为：192.168.176.222</p>
<p>客服端地址为：192.168.176.111</p>
</blockquote>
<p><strong>服务端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]<span class="comment"># yum install nfs* rpcbind -y</span></span><br><span class="line">[root@server ~]<span class="comment"># systemctl restart nfs rpcbind</span></span><br><span class="line">[root@server ~]<span class="comment"># mkdir /123</span></span><br><span class="line">[root@server ~]<span class="comment"># vim /etc/exports</span></span><br><span class="line">[root@server ~]<span class="comment"># cat /etc/exports</span></span><br><span class="line">/123    192.168.176.111(rw)</span><br><span class="line">[root@server ~]<span class="comment"># systemctl restart nfs rpcbind</span></span><br><span class="line"><span class="comment">#服务端已经配置完成，转到客户端之前请确认服务端以及客户端SELinux以及防火墙关闭</span></span><br><span class="line">[root@server ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@server ~]<span class="comment"># setenforce 0</span></span><br></pre></td></tr></table></figure>

<p><strong>客户端：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@client ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@client ~]<span class="comment"># showmount -e 192.168.176.222</span></span><br><span class="line">Export list <span class="keyword">for</span> 192.168.176.222:</span><br><span class="line">/123 192.168.176.111</span><br><span class="line">[root@client ~]<span class="comment"># mkdir /nfs</span></span><br><span class="line">[root@client ~]<span class="comment"># mount -t nfs 192.168.176.222:/123 /nfs</span></span><br><span class="line">[root@client ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.1G   16G    6% /</span><br><span class="line">devtmpfs                devtmpfs  982M     0  982M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  8.7M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M   13% /boot</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">192.168.176.222:/123    nfs4       17G  1.3G   16G    8% /nfs</span><br><span class="line">[root@client /]<span class="comment"># cd /nfs</span></span><br><span class="line">[root@client nfs]<span class="comment"># ls</span></span><br><span class="line">[root@client nfs]<span class="comment"># mkdir abc</span></span><br><span class="line">mkdir: 无法创建目录<span class="string">"abc"</span>: 权限不够</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时我们要修改服务端的文件权限</span></span><br><span class="line">[root@client nfs]<span class="comment"># ssh root@192.168.176.222</span></span><br><span class="line">Last login: Tue Jun 25 15:49:36 2019 from 192.168.176.111</span><br><span class="line">[root@server ~]<span class="comment">#</span></span><br><span class="line">[root@server ~]<span class="comment"># cd /</span></span><br><span class="line">[root@server /]<span class="comment"># ls -ld 123</span></span><br><span class="line">drwxr-xr-x. 2 root root 6 6月  25 16:45 123</span><br><span class="line">[root@server /]<span class="comment"># chmod 777 123</span></span><br><span class="line">[root@server /]<span class="comment"># exit</span></span><br><span class="line">登出</span><br><span class="line">Connection to 192.168.176.222 closed.</span><br><span class="line">[root@client nfs]<span class="comment"># mkdir abc</span></span><br><span class="line">[root@client nfs]<span class="comment"># ls -l</span></span><br><span class="line">drwxr-xr-x. 2 nfsnobody nfsnobody 6 6月  25 17:21 abc</span><br><span class="line"></span><br><span class="line"><span class="comment">## 或者我们修改服务端的文件的所属者</span></span><br><span class="line">[root@client nfs]<span class="comment"># ssh root@192.168.176.222</span></span><br><span class="line">Last login: Tue Jun 25 17:25:35 2019 from 192.168.176.111</span><br><span class="line">[root@server ~]<span class="comment"># cd /</span></span><br><span class="line">[root@server /]<span class="comment"># ls -ld 123</span></span><br><span class="line">drwxrwxrwx. 3 root root 17 6月  25 17:26 123</span><br><span class="line">[root@server /]<span class="comment"># chmod 755 123</span></span><br><span class="line">[root@server /]<span class="comment"># ls -ld 123</span></span><br><span class="line">drwxr-xr-x. 3 root root 17 6月  25 17:26 123</span><br><span class="line">[root@server /]<span class="comment"># chown nfsnobody /123</span></span><br><span class="line">[root@server /]<span class="comment"># ls -ld 123</span></span><br><span class="line">drwxr-xr-x. 3 nfsnobody root 17 6月  25 17:26 123</span><br><span class="line">[root@server /]<span class="comment"># exit</span></span><br><span class="line">登出</span><br><span class="line">Connection to 192.168.176.222 closed.</span><br><span class="line">[root@client nfs]<span class="comment"># rm -rf abc</span></span><br><span class="line">[root@client nfs]<span class="comment"># mkdir eerefsf</span></span><br><span class="line">[root@client nfs]<span class="comment"># ls</span></span><br><span class="line">eerefsf</span><br></pre></td></tr></table></figure>

<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p>1.手动搭建一个nfs服务器</p>
<ul>
<li>开放/nfs/shared目录，供所有用户查阅资料</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server /]<span class="comment"># mkdir /nfs/shared</span></span><br><span class="line">[root@server /]<span class="comment"># chmod -R 777 /nfs/shared</span></span><br></pre></td></tr></table></figure>

<ul>
<li>开放/nfs/upload目录为192.168.176.0/24（或者自己主机网段）网段的数据上传目录，并将所有用户及所属的用户组都映射为nfs-upload，其UID与GID均为300</li>
</ul>
<p>2.通过脚本搭建nfs并在客户端上挂载</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/4.linux--NFS服务/" data-id="ck627jzvx002tu4u6mqkb4568"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux进阶/">linux进阶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-3.zabbix" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/3.zabbix/"
    >zabbix</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/3.zabbix/" class="article-date">
  <time datetime="2019-08-29T15:44:18.532Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux运维/">linux运维</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="zabbix"><a href="#zabbix" class="headerlink" title="zabbix"></a>zabbix</h2><p>官方网站：<a href="http://www.zabbix.com/" target="_blank" rel="noopener">zabbix</a></p>
<p><strong>zabbix</strong>（[`zæbiks]）是一个基于WEB界面的提供分布式<a href="https://baike.baidu.com/item/系统监视" target="_blank" rel="noopener">系统监视</a>以及网络监视功能的企业级的开源解决方案。</p>
<p>zabbix能监视各种网络参数，保证<a href="https://baike.baidu.com/item/服务器系统/2997788" target="_blank" rel="noopener">服务器系统</a>的安全运营；并提供灵活的通知机制以让<a href="https://baike.baidu.com/item/系统管理员/1503845" target="_blank" rel="noopener">系统管理员</a>快速定位/解决存在的各种问题。</p>
<p>zabbix由2部分构成，zabbix server与可选组件zabbix agent。</p>
<p>zabbix server可以通过<a href="https://baike.baidu.com/item/SNMP" target="_blank" rel="noopener">SNMP</a>，zabbix agent，<a href="https://baike.baidu.com/item/ping/6235" target="_blank" rel="noopener">ping</a>，端口监视等方法提供对远程服务器/网络状态的监视，<a href="https://baike.baidu.com/item/数据收集/2245693" target="_blank" rel="noopener">数据收集</a>等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。</p>
<p><strong>zabbix</strong>（音同 zæbix）是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。</p>
<p>zabbix能监视各种网络参数，保证服务器系统的安全运营；并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。</p>
<p>zabbix由2部分构成，zabbix server与可选组件zabbix agent</p>
<p><strong>zabbix server</strong>可以通过SNMP，zabbix agent，ping，端口监视等方法提供对远程服务器/网络状态的监视，数据收集等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。</p>
<p><strong>zabbix agent</strong>需要安装在被监视的目标服务器上，它主要完成对硬件信息或与操作系统有关的内存，CPU等信息的收集。</p>
<p><strong>zabbix server</strong>可以单独监视远程服务器的服务状态；同时也可以与zabbix agent配合，可以轮询zabbix agent主动接收监视数据（trapping方式），同时还可被动接收zabbix agent发送的数据（trapping方式）。</p>
<h2 id="zabbix主要特点"><a href="#zabbix主要特点" class="headerlink" title="zabbix主要特点"></a>zabbix主要特点</h2><ul>
<li>安装与配置简单，学习成本低</li>
<li>支持多语言（包括中文）</li>
<li>免费开源</li>
<li>自动发现服务器与网络设备</li>
<li>分布式监视以及WEB集中管理功能</li>
<li>可以无agent监视</li>
<li>用户安全认证和柔软的授权方式</li>
<li>通过WEB界面设置或查看监视结果</li>
<li>email等通知功能</li>
</ul>
<h2 id="zabbix主要功能"><a href="#zabbix主要功能" class="headerlink" title="zabbix主要功能"></a>zabbix主要功能</h2><ul>
<li>CPU负荷</li>
<li>内存使用</li>
<li>磁盘使用</li>
<li>网络状况</li>
<li>端口监视</li>
<li>日志监视</li>
<li>插件开发自定义</li>
</ul>
<h2 id="zabbix运行机制"><a href="#zabbix运行机制" class="headerlink" title="zabbix运行机制"></a>zabbix运行机制</h2><p>Zabbix Server 和 Zabbix agent</p>
<p>Zabbix Server 可以通过 SNMP，Zabbix agent，Ping，端口监视等你方法提供对远程服务器/网络状态的 监视，数据收集功能，可以在运行 Linux，Solaris，HP-UX，AIX，FreeBSD，OpenBSD，OX X，Windows 多 平台。</p>
<p>Zabbix Agent 安装在需要被监控的目标服务器上，主要完成对硬件信息与操作系统有关的内存，CPU 等你 信息收集。</p>
<p>Zabbix Server 可以单独监视远程服务器的服务状态，同时也可以与 Zabbix Agent 结合。可以轮询 Zabbix Agent 主动接收监视数据（trapping 传递 方式），同时还可以被动接收 Zabbix Agent 发送的数据。</p>
<h2 id="zabbix运行过程图"><a href="#zabbix运行过程图" class="headerlink" title="zabbix运行过程图"></a>zabbix运行过程图</h2><p><img src="https://s2.ax1x.com/2019/08/26/mfbKJJ.png" alt></p>
<p>Zabbix 支持多种网络方式下的监控，可以通过分布式的部署和安装监控代理 Zabbix，通过 C/S 模式采集数据，通过 B/S 模式在 Web 端展示和配置！Agent 监控端口 10050</p>
<p>服务端安装 Zabbix Server 和 Zabbix Agent 两个服务，客户端只安装 Zabbix Agent 一个服务，监控原理 就是 Zabbix Agent 服务将从系统中获取的相关数据传送给 Zabbix Server，然后 Zabbix Server 服务奖数据分 析之后以 PHP 页面展示出来！</p>
<h2 id="源码编译LNMP"><a href="#源码编译LNMP" class="headerlink" title="源码编译LNMP"></a>源码编译LNMP</h2><blockquote>
<p>如果不知道LNMP是什么的，可以看下这篇博文：<a href="https://chineselijie.github.io/2019/08/22/1.linux--LNMP/" target="_blank" rel="noopener">搭建LNMP</a></p>
</blockquote>
<h2 id="搭建网易yum源"><a href="#搭建网易yum源" class="headerlink" title="搭建网易yum源"></a>搭建网易yum源</h2><blockquote>
<p>此处如果不搭建网易的yum源，后面安装依赖包有一个在本地yum源中是没有的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span></span><br><span class="line">[root@server222 ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">[root@server222 yum.repos.d]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure>

<h2 id="zabbix安装"><a href="#zabbix安装" class="headerlink" title="zabbix安装"></a>zabbix安装</h2><p><strong>安装依赖包</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum -y install net-snmp-devel libevent-devel</span></span><br></pre></td></tr></table></figure>

<p><strong>上传zabbix源码包到<code>/usr/local/src/</code>目录</strong></p>
<blockquote>
<p>源码包：</p>
<p>链接：<a href="https://pan.baidu.com/s/1g2fs-4VRmsnjk1egj9VQJQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1g2fs-4VRmsnjk1egj9VQJQ</a><br>提取码：euq4<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p>
</blockquote>
<p><strong>解压zabbix</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># cd /usr/local/src/</span></span><br><span class="line">[root@server222 src]<span class="comment"># tar -zxvf zabbix-4.0.3.tar.gz</span></span><br></pre></td></tr></table></figure>

<p><strong>创建用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># groupadd zabbix</span></span><br><span class="line">[root@server222 src]<span class="comment"># useradd -s /sbin/nologin -g zabbix zabbix</span></span><br></pre></td></tr></table></figure>

<p><strong>配置zabbix数据库</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 src]<span class="comment"># mysql -uroot -p123456</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 13</span><br><span class="line">Server version: 5.6.19 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; create database zabbix;</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant all on zabbix.* to zabbix@localhost identified by <span class="string">'zabbix'</span>;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line">[root@server222 src]<span class="comment"># cd zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/schema.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/images.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># mysql -uzabbix -pzabbix zabbix &lt; database/mysql/data.sql</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><strong>编译安装zabbix</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mysql]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># ./configure --prefix=/usr/local/zabbix --enable-server --enable-agent --with-mysql=/usr/local/mysql/bin/mysql_config --with-net-snmp --with-libcurl</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果出现这样一个界面就表示编译完成</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; ***********************************************************</span><br><span class="line">&gt; *            Now run <span class="string">'make install'</span>                       *</span><br><span class="line">&gt; *                                                         *</span><br><span class="line">&gt; *            Thank you <span class="keyword">for</span> using Zabbix!                  *</span><br><span class="line">&gt; *              &lt;http://www.zabbix.com&gt;                    *</span><br><span class="line">&gt; ***********************************************************</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># make install</span></span><br></pre></td></tr></table></figure>

<p><strong>编译成功会产生</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># ls /usr/local/zabbix/</span></span><br><span class="line">bin  etc  lib  sbin  share</span><br></pre></td></tr></table></figure>

<h2 id="配置zabbix"><a href="#配置zabbix" class="headerlink" title="配置zabbix"></a>配置zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/zabbix/etc/zabbix_server.conf</span></span><br><span class="line"></span><br><span class="line">85 DBHost=localhost</span><br><span class="line"></span><br><span class="line">94 DBName=zabbix</span><br><span class="line"></span><br><span class="line">110 DBUser=zabbix</span><br><span class="line"></span><br><span class="line">118 DBPassword= zabbix</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/zabbix/etc/zabbix_agentd.conf</span></span><br><span class="line"> </span><br><span class="line">94 Server=127.0.0.1</span><br><span class="line"> </span><br><span class="line">135 ServerActive=127.0.0.1</span><br><span class="line"></span><br><span class="line">146 Hostname=Zabbix server</span><br><span class="line"></span><br><span class="line">281 UnsafeUserParameters=1</span><br></pre></td></tr></table></figure>

<h2 id="启动zabbix"><a href="#启动zabbix" class="headerlink" title="启动zabbix"></a>启动zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/zabbix/sbin/zabbix_server</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/zabbix/sbin/zabbix_agentd</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># netstat -antup | grep zabbix</span></span><br><span class="line">tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      120622/zabbix_agent</span><br><span class="line">tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      120471/zabbix_serve</span><br></pre></td></tr></table></figure>

<blockquote>
<p>server 运行端口 10051</p>
</blockquote>
<h2 id="或者脚本启动zabbix"><a href="#或者脚本启动zabbix" class="headerlink" title="或者脚本启动zabbix"></a>或者脚本启动zabbix</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 etc]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/misc/init.d/</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># cp fedora/core/*  /etc/rc.d/init.d/</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># vim /etc/init.d/zabbix_server </span></span><br><span class="line"><span class="comment"># BASEDIR=/usr/local/zabbix  #找到此行，并修改</span></span><br><span class="line"> 21         <span class="comment"># Zabbix-Directory</span></span><br><span class="line"> 22         BASEDIR=/usr/<span class="built_in">local</span>/zabbix</span><br><span class="line">[root@server222 init.d]<span class="comment"># vim /etc/init.d/zabbix_agentd</span></span><br><span class="line"><span class="comment"># BASEDIR=/usr/local/zabbix  #找到此行，并修改</span></span><br><span class="line"> 21         <span class="comment"># Zabbix-Directory</span></span><br><span class="line"> 22         BASEDIR=/usr/<span class="built_in">local</span>/zabbix</span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/zabbix_agentd start</span></span><br><span class="line">Reloading systemd:                                         [  确定  ]</span><br><span class="line">Starting zabbix_agentd (via systemctl):                    [  确定  ]</span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/zabbix_server start</span></span><br><span class="line">Starting zabbix_server (via systemctl):                    [  确定  ]</span><br><span class="line">[root@server222 init.d]<span class="comment"># chkconfig zabbix_server on</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># chkconfig zabbix_agentd on</span></span><br></pre></td></tr></table></figure>

<h2 id="zabbix的web界面"><a href="#zabbix的web界面" class="headerlink" title="zabbix的web界面"></a>zabbix的web界面</h2><p><strong>编辑PHP页面</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 etc]<span class="comment"># cd /usr/local/src/zabbix-4.0.3/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># cp -r /usr/local/src/zabbix-4.0.3/frontends/php/* /usr/local/nginx/html/</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line"> 43         location / &#123;</span><br><span class="line"> 44             root   html;</span><br><span class="line"> 45             index index.html index.htm index.php;</span><br><span class="line"> 46         &#125;</span><br></pre></td></tr></table></figure>

<p><strong>重启nginx服务与php-fpm服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /usr/local/nginx/sbin/nginx -s reload;</span></span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /etc/init.d/zabbix_server restart</span></span><br><span class="line">[root@server222 init.d]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>火狐浏览器打开输入：<code>192.168.176.222/index.php</code></p>
<p><img src="https://s2.ax1x.com/2019/08/28/mH6BFJ.png" alt></p>
<blockquote>
<p>点击下一步</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/28/mH6ReO.png" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># vim /usr/local/php/etc/php.ini</span></span><br><span class="line">375 max_execution_time = 300</span><br><span class="line">.......</span><br><span class="line">385 max_input_time = 300</span><br><span class="line">.......</span><br><span class="line">663 post_max_size = 16M</span><br><span class="line">.......</span><br><span class="line">689 always_populate_raw_post_data = On</span><br><span class="line">.......</span><br><span class="line">913 date.timezone = Asia/Shanghai</span><br><span class="line">.......</span><br><span class="line">1188 mysqli.default_socket = /var/lib/mysql/mysql.sock</span><br><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将页面刷新</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/28/mHc10O.png" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 zabbix-4.0.3]<span class="comment"># cd /usr/local/src/php-5.5.14/ext/</span></span><br><span class="line">[root@server222 ext]<span class="comment"># cd ldap/</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># /usr/local/php/bin/phpize</span></span><br><span class="line">Configuring <span class="keyword">for</span>:</span><br><span class="line">PHP Api Version:         20121113</span><br><span class="line">Zend Module Api No:      20121212</span><br><span class="line">Zend Extension Api No:   220121212</span><br><span class="line">[root@server222 ldap]<span class="comment"># ./configure --with-php-config=/usr/local/php/bin/php-config --with-ldap</span></span><br><span class="line">........</span><br><span class="line">configure: error: Cannot find ldap libraries <span class="keyword">in</span> /usr/lib.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此时会提醒报错</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># yum install openldap-devel openldap -y</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># rsync -avz /usr/lib64/libldap* /usr/lib/</span></span><br><span class="line">sending incremental file list</span><br><span class="line">libldap-2.3.so.0 -&gt; libldap-2.3.so.0.2.31</span><br><span class="line">libldap-2.3.so.0.2.31</span><br><span class="line">libldap-2.4.so.2 -&gt; libldap-2.4.so.2.10.7</span><br><span class="line">libldap-2.4.so.2.10.7</span><br><span class="line">libldap.so -&gt; libldap-2.4.so.2.10.7</span><br><span class="line">libldap_r-2.3.so.0 -&gt; libldap_r-2.3.so.0.2.31</span><br><span class="line">libldap_r-2.3.so.0.2.31</span><br><span class="line">libldap_r-2.4.so.2 -&gt; libldap_r-2.4.so.2.10.7</span><br><span class="line">libldap_r-2.4.so.2.10.7</span><br><span class="line">libldap_r.so -&gt; libldap_r-2.4.so.2.10.7</span><br><span class="line"></span><br><span class="line">sent 564824 bytes  received 106 bytes  1129860.00 bytes/sec</span><br><span class="line">total size is 1277076  speedup is 2.26</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这时我们再进行编译</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># ./configure --with-php-config=/usr/local/php/bin/php-config --with-ldap</span></span><br><span class="line">[root@server222 ldap]<span class="comment"># make ; make install</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ldap]<span class="comment"># vim /usr/local/php/etc/php.ini</span></span><br><span class="line"><span class="comment"># 在文件的末尾处添加</span></span><br><span class="line">1940 extension=ldap.so</span><br><span class="line"></span><br><span class="line">[root@server222 ldap]<span class="comment"># /etc/init.d/php-fpm restart</span></span><br><span class="line">Gracefully shutting down php-fpm . <span class="keyword">done</span></span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/08/28/mHgi8A.png" alt></p>
<blockquote>
<p>然后点击下一步</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">密码：zabbix</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/08/28/mHgEKP.png" alt></p>
<blockquote>
<p>然后点击下一步</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/28/mHgdPJ.png" alt></p>
<p>先点击<code>Download the configuration file</code>下载文件</p>
<blockquote>
<p>我下载之后在<code>下载</code>目录里面</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 下载]<span class="comment"># mv zabbix.conf.php /usr/local/nginx/html/conf/zabbix.conf.php</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>然后我们点击刷新</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/28/mHgBx1.png" alt></p>
<blockquote>
<p>然后点击下一步</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用admin账号登陆，密码zabbix</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/08/28/mHgOiQ.png" alt></p>
<blockquote>
<p>点击登陆</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">点击右上角用户，进行更改语言</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/08/28/mHRGAU.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/08/28/mHRDHK.png" alt></p>
<p>》 点击人头像，再点击<code>Language</code>，选择中文，最后点击<code>update</code></p>
<blockquote>
<p>最后的界面</p>
</blockquote>
<p><img src="https://s2.ax1x.com/2019/08/28/mHWl2d.png" alt></p>
<p><img src="https://s2.ax1x.com/2019/08/28/mHWXJe.png" alt></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/3.zabbix/" data-id="ck627jzv4001wu4u6aurjkvd5"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux运维/">linux运维</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-3.python--第一章" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/3.python--第一章/"
    >python第一章</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/3.python--第一章/" class="article-date">
  <time datetime="2019-08-29T15:44:18.530Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"👆以上是不完整的我"</span>) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h1 id="python第一章"><a href="#python第一章" class="headerlink" title="python第一章"></a>python第一章</h1><h2 id="第一个python程序"><a href="#第一个python程序" class="headerlink" title="第一个python程序"></a>第一个python程序</h2><p> <strong>python程序的文件以.py结尾</strong></p>
<p><strong>python程序的文件名以后最好不要有中文</strong></p>
<blockquote>
<p> 何为交互模式，何为命令模式？</p>
</blockquote>
<h3 id="交互模式"><a href="#交互模式" class="headerlink" title="交互模式"></a>交互模式</h3><p>在Windows系统上按下win键+R键输入cmd打开黑屏终端</p>
<p> 黑屏终端输入 python 进入交互模式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python</span><br><span class="line">Python <span class="number">3.6</span><span class="number">.0</span> (v3<span class="number">.6</span><span class="number">.0</span>:<span class="number">41</span>df79263a11, Dec <span class="number">23</span> <span class="number">2016</span>, <span class="number">08</span>:<span class="number">06</span>:<span class="number">12</span>) [MSC v<span class="number">.1900</span> <span class="number">64</span> bit (AMD64)] on win32</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p> 输入 exit() 退出交互模式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;</span><br></pre></td></tr></table></figure>

<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>输出  将引号内的字符串输出到黑屏终端上</p>
<p>在E盘创建一个文件夹python，在文件夹中创建一个以.py结尾的文件(文件名自己命名)，输入下列代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"This is the first Python program"</span>)</span><br></pre></td></tr></table></figure>

<p> 执行 进入程序所在目录，执行 python 文件名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python <span class="string">"E:\python\the first python program.py"</span></span><br><span class="line">This <span class="keyword">is</span> the first Python program</span><br></pre></td></tr></table></figure>

<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p><strong>单行注释</strong></p>
<p><code>#</code> 只能注释一行</p>
<p><strong>多行注释</strong></p>
<p>根据对象的引用计数器，对象创建会给对象一个引用计数器属性，如果该属性的值为0，那么该对象会被释放。创建了一个字符串对象，但是没有任何的引用，所以计数器为0。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">print("hello world!")</span></span><br><span class="line"><span class="string">print("这两行是多行注释!")</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(<span class="string">"上面两行是注释，看不到!"</span>)</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">print(&quot;hello world!&quot;)</span><br><span class="line">print(&quot;这两行是多行注释!&quot;)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">print(&quot;上面两行是注释，看不到!&quot;)</span><br></pre></td></tr></table></figure>

<p>我们分别来执行这两个</p>
<p>命名为<code>1notes.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\<span class="number">1</span>notes.py</span><br><span class="line">上面两行是注释，看不到!</span><br></pre></td></tr></table></figure>

<p>命名为<code>2notes.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\<span class="number">2</span>notes.py</span><br><span class="line">上面两行是注释，看不到!</span><br></pre></td></tr></table></figure>

<h2 id="输入与输出"><a href="#输入与输出" class="headerlink" title="输入与输出"></a>输入与输出</h2><p>输出：打印到屏幕上一些信息</p>
<p>可以接受多个字符串，用逗号分隔</p>
<p>切记：在写python程序时切记不要使用中文字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"hello world!"</span>)</span><br></pre></td></tr></table></figure>

<p>输入：从外部获取变量的值</p>
<p>input：阻塞，等待输入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = input()</span><br><span class="line">telephone = input()</span><br><span class="line">print(<span class="string">"---------------------"</span>)</span><br><span class="line">print(name)</span><br><span class="line">print(<span class="string">"---------------------"</span>)</span><br><span class="line">print(telephone)</span><br></pre></td></tr></table></figure>

<p>命名为<code>output and lnput.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python <span class="string">"E:\python\output and lnput.py"</span></span><br><span class="line">hello world!</span><br><span class="line">natasha</span><br><span class="line"><span class="number">12345678901</span></span><br><span class="line">---------------------</span><br><span class="line">natasha</span><br><span class="line">---------------------</span><br><span class="line"><span class="number">12345678901</span></span><br></pre></td></tr></table></figure>

<h2 id="Python数据类型"><a href="#Python数据类型" class="headerlink" title="Python数据类型"></a>Python数据类型</h2><p><strong>数据类型</strong>：计算机存储或处理的数据可以是各种类型，比如文本、图形、音频、视频等等。所以需要不同的数据类型的变量</p>
<ul>
<li><p>Number（数字）</p>
<ul>
<li>整数</li>
<li>浮点数</li>
<li>复数</li>
</ul>
</li>
<li><p>String（字符串）</p>
</li>
</ul>
<p>​    <code>&quot;hello world&quot;</code></p>
<p>​    <code>&#39;hello world&#39;</code></p>
<ul>
<li>Boolean（布尔值）</li>
</ul>
<p>​    表示真假的值</p>
<ul>
<li><p>None（空值）</p>
</li>
<li><p>list（列表）</p>
</li>
<li><p>tuple（元组）</p>
</li>
<li><p>dict（字典）</p>
</li>
<li><p>set（集合）</p>
</li>
</ul>
<h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><p><strong>标识符的作用</strong>：给变量、函数等命名的</p>
<p><strong>什么是标识符</strong>：是一串字符串(注意：字符串未必是标识符)</p>
<p><strong>标识符的规则</strong>：</p>
<ul>
<li><p>只能由字母、数字、下划线组成</p>
</li>
<li><p>开头不能是数字</p>
</li>
<li><p>不能是python的关键字  </p>
</li>
</ul>
<blockquote>
<p>可使用代码来查看python的关键字</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">import</span> keyword</span><br><span class="line">&gt; print(keyword.kwlist)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>执行结果为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; C:\Users\Administrator&gt;python E:\python\Keyword.py</span><br><span class="line">&gt; [<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>区分大小写</p>
</li>
<li><p>见名知意</p>
</li>
</ul>
<p>​    <strong>注意</strong>：在python3中，非ASCII标识符也是允许的了(但是慎用)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">啊啊啊 = <span class="string">"aaa"</span></span><br><span class="line">print(啊啊啊)</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\aaa.py</span><br><span class="line">aaa</span><br></pre></td></tr></table></figure>

<p>虽然语法没有报错，但是不合理，以后不要使用</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li><p>程序可操作的存储区名称</p>
</li>
<li><p>程序运行过程期间能改变的数据</p>
</li>
<li><p>每个变量都有特定的类型</p>
</li>
</ul>
<p><strong>作用</strong>：将不同类型的数据存储到内存</p>
<p><strong>定义变量</strong>：变量名 = 数据值</p>
<p><strong>注意</strong>：变量在使用前必须先定义，否则会出现错误</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># num = 170305333</span></span><br><span class="line">print(<span class="string">"num ="</span>, num)</span><br></pre></td></tr></table></figure>

<p>如果这样程序就会报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\variable.py</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:\python\variable.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    print(<span class="string">"num ="</span>, num)</span><br><span class="line">NameError: name <span class="string">'num'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<p>在这里python会清晰的、友好的提醒你在第二行这个num没有定义，之后我们去把<code>#</code>去掉，再执行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\variable.py</span><br><span class="line">num = <span class="number">170305333</span></span><br></pre></td></tr></table></figure>

<p><strong>删除变量</strong>：del 变量名</p>
<p><strong>注意</strong>：删除后变量无法引用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">170305333</span></span><br><span class="line">print(<span class="string">"num ="</span>, num)</span><br><span class="line"><span class="keyword">del</span> num</span><br><span class="line">print(<span class="string">"num ="</span>, num)</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\variable.py</span><br><span class="line">num = <span class="number">170305333</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:\python\variable.py"</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    print(<span class="string">"num ="</span>, num)</span><br><span class="line">NameError: name <span class="string">'num'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<p>很显然第三行删除了变量，导致第四行执行报错</p>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p><strong>何为常量</strong>：</p>
<p>程序运行期间不能改变的数据</p>
<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><ul>
<li>由变量、常量和运算符组成的式子称为表达式</li>
<li>阅读表达式：<ul>
<li>阅读表达式的功能</li>
<li>阅读表达式的值</li>
</ul>
</li>
</ul>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符："><a href="#算术运算符：" class="headerlink" title="算术运算符："></a>算术运算符：</h3><p><code>+  -  *  /  %    **   //</code></p>
<p>加  减  乘  除  取模  求幂   取整</p>
<h3 id="算术运算表达式"><a href="#算术运算表达式" class="headerlink" title="算术运算表达式:"></a>算术运算表达式:</h3><p><strong>功能</strong>：进行符号对应的算术运算，不会修改变量的值</p>
<p><strong>值</strong>：相关算术运算的结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1 = <span class="number">10</span></span><br><span class="line">num2 = <span class="number">3</span></span><br><span class="line">print(<span class="string">"加"</span>, num1 + num2)</span><br><span class="line">print(<span class="string">"减"</span>, num1 - num2)</span><br><span class="line">print(<span class="string">"乘"</span>, num1 * num2)</span><br><span class="line">print(<span class="string">"除"</span>, num1 / num2)</span><br><span class="line">print(<span class="string">"取模"</span>, num1 % num2)</span><br><span class="line">print(<span class="string">"求幂"</span>, num1 ** num2)</span><br><span class="line">print(<span class="string">"取整"</span>, num1 // num2)</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\Count.py</span><br><span class="line">加 <span class="number">13</span></span><br><span class="line">减 <span class="number">7</span></span><br><span class="line">乘 <span class="number">30</span></span><br><span class="line">除 <span class="number">3.3333333333333335</span></span><br><span class="line">取模 <span class="number">1</span></span><br><span class="line">求幂 <span class="number">1000</span></span><br><span class="line">取整 <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><p>赋值运算符   <code>=</code></p>
<h3 id="赋值运算表达式"><a href="#赋值运算表达式" class="headerlink" title="赋值运算表达式"></a>赋值运算表达式</h3><p><strong>格式</strong>：变量 = 表达式</p>
<p><strong>功能</strong>：计算右侧表达式的值，并赋值给等号左侧的变量</p>
<p><strong>值</strong>：赋值结束后变量的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">num3 = <span class="number">10</span></span><br><span class="line">num4 = num3 + <span class="number">2</span></span><br><span class="line">print(num3)</span><br><span class="line">print(num4)</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\assignment.py</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<h3 id="复合运算符"><a href="#复合运算符" class="headerlink" title="复合运算符"></a>复合运算符</h3><p><code>+=   -=    *=   /=    %=    **=    //=</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a += b  --&gt;  a = a + b</span><br><span class="line">a -= b  --&gt;  a = a - b</span><br><span class="line">a *= b  --&gt;  a = a * b</span><br><span class="line">a /= b  --&gt;  a = a / b</span><br><span class="line">a %= b  --&gt;  a = a % b</span><br><span class="line">a **= b  --&gt;  a = a ** b</span><br><span class="line">a //= b  --&gt;  a = a // b</span><br></pre></td></tr></table></figure>

<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p><code>&amp;</code>  按位与运算符：参与运算的两个值，如果两个相应位都为1，则该位结果为1，否则为0</p>
<p><code>|</code>  按位或运算符：参与运算的两个值，如果两个相应位有一个为1时，则该位结果为1，否则为0</p>
<p><code>^</code> 按位异或运算符：参与运算的两个值，如果两个相应不同时，则该位结果为1，否则为0</p>
<p><code>~</code>  按位取反运算符：对数据的每个二进制位进行取反操作，把1变为0，把0变为1</p>
<p><code>&lt;&lt;</code> 左移运算符：运算数的各二进制全部左移若干位，由&lt;&lt;右侧数字指定移动位数，高位丢弃，低位补0</p>
<p><code>&gt;&gt;</code> 右移运算符：运算数的各二进制全部右移若干位，由&gt;&gt;右侧数字指定移动位数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"按位与运算符"</span>, <span class="number">5</span> &amp; <span class="number">7</span>)</span><br><span class="line">print(<span class="string">"按位或运算符"</span>, <span class="number">5</span> | <span class="number">7</span>)</span><br><span class="line">print(<span class="string">"按位异或运算符"</span>, <span class="number">5</span> ^ <span class="number">7</span>)</span><br><span class="line">print(<span class="string">"按位取反运算符"</span>, ~<span class="number">5</span>)</span><br><span class="line">print(<span class="string">"左移运算符"</span>, <span class="number">2</span> &lt;&lt; <span class="number">2</span>)</span><br><span class="line">print(<span class="string">"右移运算符"</span>, <span class="number">11</span> &gt;&gt; <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;python E:\python\position.py</span><br><span class="line">按位与运算符 <span class="number">5</span></span><br><span class="line">按位或运算符 <span class="number">7</span></span><br><span class="line">按位异或运算符 <span class="number">2</span></span><br><span class="line">按位取反运算符 <span class="number">-6</span></span><br><span class="line">左移运算符 <span class="number">8</span></span><br><span class="line">右移运算符 <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><p>格式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式:</span><br><span class="line"></span><br><span class="line">	语句</span><br></pre></td></tr></table></figure>

<p>逻辑：</p>
<p>​    当程序运行到if语句时，首先计算“表达式”的值，如果表达式的值为真，则执行“语句”，如果表达式的值为假，则结束if语句继续向下执行</p>
<p>何为真假？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">假：<span class="number">0</span>  <span class="number">0.0</span>  <span class="string">''</span>  <span class="literal">None</span>  <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">真：除了假就是真</span><br></pre></td></tr></table></figure>

<p>例如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">"hello,world!"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="if-else语句"><a href="#if-else语句" class="headerlink" title="if-else语句"></a>if-else语句</h2><p>格式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式:</span><br><span class="line">	语句<span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	语句<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>逻辑：</p>
<p>​    当程序运行到if-else语句时，首先计算“表达式”的值，如果表达式的值为真，则执行语句1。如果表达式的值我假，则执行语句2</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flag = int(input(<span class="string">"请输入0或者1:"</span>))</span><br><span class="line"><span class="keyword">if</span> flag:</span><br><span class="line">	print(<span class="string">"hello world!"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"world hello!"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="关系运算符与关系运算表达式"><a href="#关系运算符与关系运算表达式" class="headerlink" title="关系运算符与关系运算表达式"></a>关系运算符与关系运算表达式</h2><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">==		!=		&gt;		&lt;		&gt;=		&lt;=</span><br><span class="line">等于    不等于  大于     小于    大于等于  小于等于</span><br></pre></td></tr></table></figure>

<h3 id="关系运算表达式"><a href="#关系运算表达式" class="headerlink" title="关系运算表达式"></a>关系运算表达式</h3><p>格式：表达式1 关系运算符 表达式2</p>
<p>功能：计算表达式1和表达式2的值</p>
<p>值：</p>
<p>​    如果关系成立，则整个关系运算表达式的值为真，如果关系不成立，则整个关系运算表达式的值为假</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">1</span>==<span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"This is an apple."</span>)</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p><strong>逻辑与</strong>    <strong>逻辑或</strong>   <strong>逻辑非</strong></p>
<h3 id="逻辑与"><a href="#逻辑与" class="headerlink" title="逻辑与"></a>逻辑与</h3><p><strong>逻辑与符号</strong>：<code>and</code></p>
<h3 id="逻辑与运算表达式"><a href="#逻辑与运算表达式" class="headerlink" title="逻辑与运算表达式"></a>逻辑与运算表达式</h3><p>格式：表达式1 and 表达式2</p>
<p>功能：首先计算“表达式1”的值，若表达式1的值为真则计算“表达式2”的值</p>
<p>值：</p>
<p>​    1、如果表达式1的值为真，表达式2的值为真，则逻辑与运算表达式的值为真</p>
<p>​    2、如果表达式1的值为真，表达式2的值为假，则逻辑与运算表达式的值为假</p>
<p>​    3、如果表达式1的值为假，表达式2的值为真，则逻辑与运算表达式的值为假</p>
<p>​    4、如果表达式1的值为假，表达式2的值为假，则逻辑与运算表达式的值为假</p>
<p>总结：有一个为假就为假</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">2</span></span><br><span class="line">b = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> a - <span class="number">1</span> <span class="keyword">and</span> b + <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"This is an apple."</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"This is a banana."</span>)</span><br></pre></td></tr></table></figure>

<h3 id="逻辑或"><a href="#逻辑或" class="headerlink" title="逻辑或"></a>逻辑或</h3><p><strong>逻辑或符号</strong>：<code>or</code></p>
<h3 id="逻辑或运算表达式"><a href="#逻辑或运算表达式" class="headerlink" title="逻辑或运算表达式"></a>逻辑或运算表达式</h3><p>格式：表达式1 or 表达式2</p>
<p>功能：首先计算“表达式1”的值，如果表达式1的值为假，则继续计算“表达式2”的值</p>
<p>值：</p>
<p>​    1、如果表达式1的值为真，表达式2的值为真，则逻辑或运算表达式的值为真</p>
<p>​    2、如果表达式1的值为真，表达式2的值为假，则逻辑或运算表达式的值为真</p>
<p>​    3、如果表达式1的值为假，表达式2的值为真，则逻辑或运算表达式的值为真</p>
<p>​    4、如果表达式1的值为假，表达式2的值为假，则逻辑或运算表达式的值为假</p>
<p>总结：有一个为真就为真</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c = <span class="number">2</span></span><br><span class="line">d = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> c - <span class="number">1</span> <span class="keyword">or</span> print(<span class="string">"123"</span>):</span><br><span class="line">    print(<span class="string">"This is an apple."</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"This is a banana."</span>)</span><br></pre></td></tr></table></figure>

<h3 id="逻辑与、逻辑或的特性"><a href="#逻辑与、逻辑或的特性" class="headerlink" title="逻辑与、逻辑或的特性"></a>逻辑与、逻辑或的特性</h3><p>短路原则：</p>
<p>​    表达式1 and 表达式2 and 表达式3 and …… and 表达式n</p>
<p>​        从左至右依次计算表达式的值，直到遇到某个表达式的值为假就停止计算</p>
<p>​    表达式1 or 表达式2 or 表达式3 or …… or 表达式n</p>
<p>​        从左至右依次计算表达式的值，直到遇到某个表达式的值为真就停止计算</p>
<h3 id="逻辑非"><a href="#逻辑非" class="headerlink" title="逻辑非"></a>逻辑非</h3><p><strong>逻辑非符号</strong>：<code>not</code></p>
<h3 id="逻辑非运算表达式"><a href="#逻辑非运算表达式" class="headerlink" title="逻辑非运算表达式"></a>逻辑非运算表达式</h3><p>格式：not 表达式</p>
<p>值：</p>
<p>​    1、如果“表达式”的值为真，则逻辑非运算表达式的值为假</p>
<p>​    2、如果“表达式”的值为假，则逻辑非运算表达式的值为真</p>
<p>总结：颠倒黑白</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> e:</span><br><span class="line">    print(<span class="string">"This is an apple."</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"This is a banana."</span>)</span><br></pre></td></tr></table></figure>

<h3 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h3><p>格式： x in seq        x not in seq</p>
<p>in：如果在指定的序列中找到值则返回真，否则返回假</p>
<p>not in：如果在指定的序列中没有找打值则返回真，否则返回假</p>
<h3 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h3><p>格式： obj1 is obj2      obj1 is not obj2</p>
<p>is：判断两个标识符是否引用同一个对象，相同返回真，否则返回假</p>
<p>is not：判断两个标识符是否引用不同对象，不同返回真，否则返回假</p>
<h2 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">**              指数</span><br><span class="line">~ + -           按位取反和一元加减号</span><br><span class="line">*  /  %  // </span><br><span class="line">+ -             加法减法</span><br><span class="line">&lt;&lt;  &gt;&gt;</span><br><span class="line">&amp;</span><br><span class="line">| ^</span><br><span class="line">&lt;  &gt;  &lt;=  &gt;=</span><br><span class="line">==  !=   &lt;&gt;</span><br><span class="line">=  *=  /=  %=  //%  +=  -=  **=</span><br><span class="line"><span class="keyword">is</span>       <span class="keyword">is</span> <span class="keyword">not</span></span><br><span class="line"><span class="keyword">in</span>       <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">or</span> <span class="keyword">not</span></span><br></pre></td></tr></table></figure>

<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1.从控制台输入一个数字，如果是偶数则输入出偶数，否则输出奇数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num1=int(input(<span class="string">"请输入一个数字："</span>))</span><br><span class="line"><span class="keyword">if</span> num1 % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">"您输入的是偶数！"</span>)</span><br><span class="line"><span class="keyword">elif</span> num1 % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"您输入的是奇数！"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"您输入的不是数字!"</span>)</span><br></pre></td></tr></table></figure>

<p>2.从控制台输入一个5位数，判断是否位回文数（12321）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">num2=int(input(<span class="string">"请输入一个5位数的数字："</span>))</span><br><span class="line"></span><br><span class="line">w = num2 // <span class="number">10000</span>   <span class="comment"># 1</span></span><br><span class="line">q = num2 // <span class="number">1000</span> % <span class="number">10</span>   <span class="comment"># 2</span></span><br><span class="line">b = num2 // <span class="number">100</span> % <span class="number">10</span>    <span class="comment"># 3</span></span><br><span class="line">s = num2 // <span class="number">10</span> % <span class="number">10</span>  <span class="comment"># 2</span></span><br><span class="line">g = num2 % <span class="number">10</span>   <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> w + <span class="number">1</span> != q:</span><br><span class="line">    print(num2, <span class="string">"不是回文数！"</span>)</span><br><span class="line"><span class="keyword">if</span> q + <span class="number">1</span> != b:</span><br><span class="line">    print(num2, <span class="string">"不是回文数！"</span>)</span><br><span class="line"><span class="keyword">if</span> b - <span class="number">1</span> != s:</span><br><span class="line">    print(num2, <span class="string">"不是回文数！"</span>)</span><br><span class="line"><span class="keyword">if</span> s - <span class="number">1</span> == g:</span><br><span class="line">    print(num2, <span class="string">"是回文数！"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(num2, <span class="string">"不是回文数！"</span>)</span><br></pre></td></tr></table></figure>

<p>3.从控制台输入一个3位数，判断是否是<a href="https://baike.baidu.com/item/水仙花数/2746160?fr=aladdin" target="_blank" rel="noopener">水仙花数</a></p>
<p>另：三位的水仙花数共有4个：153，370，371，407；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.从控制台输入一个3位数，判断是否是水仙花数</span></span><br><span class="line"><span class="comment">#三位的水仙花数共有4个：153，370，371，407；</span></span><br><span class="line">num3=int(input(<span class="string">"请输入一个三位数的数字："</span>))</span><br><span class="line"></span><br><span class="line">bai = num3 // <span class="number">100</span>   <span class="comment"># 1</span></span><br><span class="line">shi = num3 // <span class="number">10</span> % <span class="number">10</span>   <span class="comment"># 5</span></span><br><span class="line">ge = num3 % <span class="number">10</span>  <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">num4 = bai ** <span class="number">3</span> + shi ** <span class="number">3</span> + ge ** <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num3 == num4:</span><br><span class="line">    print(num3,<span class="string">"是水仙花数！"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(num3, <span class="string">"不是水仙花数！"</span>)</span><br></pre></td></tr></table></figure>


      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/3.python--第一章/" data-id="ck627jzv1001ru4u68dgu8ijs"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-3.linux--samba服务" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/3.linux--samba服务/"
    >samba服务</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/3.linux--samba服务/" class="article-date">
  <time datetime="2019-08-29T15:44:18.527Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux进阶/">linux进阶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="samba简介"><a href="#samba简介" class="headerlink" title="samba简介"></a>samba简介</h2><p><a href="https://baike.baidu.com/item/samba/455025?fr=aladdin" target="_blank" rel="noopener">Samba</a>是在Linux和UNIX系统上实现<a href="https://baike.baidu.com/item/SMB协议" target="_blank" rel="noopener">SMB协议</a>的一个免费软件，由服务器及客户端程序构成。<a href="https://baike.baidu.com/item/SMB" target="_blank" rel="noopener">SMB</a>（Server Messages Block，信息服务块）是一种在<a href="https://baike.baidu.com/item/局域网" target="_blank" rel="noopener">局域网</a>上共享文件和打印机的一种<a href="https://baike.baidu.com/item/通信协议/3351624" target="_blank" rel="noopener">通信协议</a>，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机/服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置“NetBIOS over TCP/IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。</p>
<p>samba监听端口有：</p>
<p>TCP：139    445</p>
<p>UDP：137·    138</p>
<p>tcp端口相对应的服务是smbd服务，其作用是提供对服务器中文件、打印资源的共享访问。<br>udp端口相对应的服务是nmbd服务，其作用是提供基于NetBIOS主机名称的解析。</p>
<p><strong>samba进程：</strong></p>
<table>
<thead>
<tr>
<th align="center">进程</th>
<th align="center">对应</th>
</tr>
</thead>
<tbody><tr>
<td align="center">nmbd</td>
<td align="center">对应netbios</td>
</tr>
<tr>
<td align="center">smbd</td>
<td align="center">对应cifs协议</td>
</tr>
<tr>
<td align="center">winbindd + ldap</td>
<td align="center">对应Windows AD活动目录</td>
</tr>
</tbody></table>
<p><strong>samba用户：</strong></p>
<table>
<thead>
<tr>
<th align="center">帐号</th>
<th align="center">密码</th>
</tr>
</thead>
<tbody><tr>
<td align="center">都是系统用户 /etc/passwd</td>
<td align="center">Samba服务自有密码文件 通过smbpasswd -a USERNAME命令设置</td>
</tr>
</tbody></table>
<h3 id="smbpasswd命令"><a href="#smbpasswd命令" class="headerlink" title="smbpasswd命令"></a>smbpasswd命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-a		添加系统用户为samba用户并为其设置密码</span><br><span class="line">-d		禁用用户账号</span><br><span class="line">-e		启动用户账号</span><br><span class="line">-x		删除用户账号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@server ~]<span class="comment"># yum -y install samba*</span></span><br><span class="line">[root@server ~]<span class="comment"># useradd 123</span></span><br><span class="line">[root@server ~]<span class="comment"># smbpasswd -a 123</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype new SMB password:</span><br><span class="line">Added user 123.</span><br><span class="line">[root@server ~]<span class="comment"># smbpasswd -d 123</span></span><br><span class="line">Disabled user 123.</span><br><span class="line">[root@server ~]<span class="comment"># smbpasswd -e 123</span></span><br><span class="line">Enabled user 123.</span><br><span class="line">[root@server ~]<span class="comment"># smbpasswd -x 123</span></span><br><span class="line">Deleted user 123.</span><br></pre></td></tr></table></figure>

<p><strong>Samba安全级别：</strong><br>Samba服务器的安全级别有三个，分别是user，server，domain</p>
<table>
<thead>
<tr>
<th align="left">安全级别</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">user</td>
<td align="left">基于本地的验证</td>
</tr>
<tr>
<td align="left">server</td>
<td align="left">由另一台指定的服务器对用户身份进行认证</td>
</tr>
<tr>
<td align="left">domain</td>
<td align="left">由域控进行身份验证</td>
</tr>
</tbody></table>
<blockquote>
<p>以前的samba版本支持的安全级别有四个，分别是share，user，server，domain<br>share是用来设置匿名访问的，但现在的版本已经不支持share了，但是还是可以实现匿名访问的（share在7版本中已经不支持）<br>只是配置方式变了</p>
</blockquote>
<p><strong>samba配置文件：</strong></p>
<ul>
<li>/etc/samba/smb.conf(主配置文件)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@server samba]<span class="comment"># ls</span></span><br><span class="line">lmhosts  smb.conf  smb.conf.example</span><br><span class="line">[root@server samba]<span class="comment"># vim smb.conf</span></span><br><span class="line"><span class="comment"># See smb.conf.example for a more detailed config file or</span></span><br><span class="line"><span class="comment"># read the smb.conf manpage.</span></span><br><span class="line"><span class="comment"># Run 'testparm' to verify the config is correct after</span></span><br><span class="line"><span class="comment"># you modified it.</span></span><br><span class="line"></span><br><span class="line">[global]  <span class="comment"># 全局配置，此处的设置项对整个samba服务器都有效</span></span><br><span class="line">    workgroup = SAMBA	<span class="comment"># 表示设置工作组名称</span></span><br><span class="line">    security = user		<span class="comment"># 表示设置安全级别，其值可为user、server、domain</span></span><br><span class="line">    passdb backend = tdbsam		<span class="comment"># 表示设置共享帐户文件的类型，其值可为tdbsam（tdb数据库文件）、ldapsam（LDAP目录认证）、smbpasswd（兼容旧版本samba密码文件）</span></span><br><span class="line">    printing = cups</span><br><span class="line">    printcap name = cups</span><br><span class="line">    load printers = yes</span><br><span class="line">    cups options = raw</span><br><span class="line"></span><br><span class="line">[homes] <span class="comment"># 宿主目录共享设置，此处用来设置Linux用户的默认共享，对应用户的宿主目录。当用户访问服务器中与自己用户名同名的共享目录时，通过验证后将会自动映射到该用户的宿主目录中</span></span><br><span class="line">    comment = Home Directories	<span class="comment"># 表示设置对应共享目录的注释，说明信息，即文件共享名</span></span><br><span class="line">    valid users = %S, %D%w%S  <span class="comment"># 设置可以访问的用户和组，例如 valid users = root,@root</span></span><br><span class="line">    browseable = No		<span class="comment"># 表示设置共享是否可见</span></span><br><span class="line">    <span class="built_in">read</span> only = No </span><br><span class="line">    inherit acls = Yes</span><br><span class="line"></span><br><span class="line">[printers] <span class="comment"># 打印共享设置</span></span><br><span class="line">    comment = All Printers	 <span class="comment"># 表示设置对应共享目录的注释，说明信息，即文件共享名</span></span><br><span class="line">    path = /var/tmp		<span class="comment"># 表示共享目录的路径</span></span><br><span class="line">    printable = Yes		<span class="comment"># 表示设置是否为打印机</span></span><br><span class="line">    create mask = 0600</span><br><span class="line">    browseable = No		<span class="comment"># 表示设置共享是否可见</span></span><br><span class="line"></span><br><span class="line">[<span class="built_in">print</span>$]</span><br><span class="line">    comment = Printer Drivers	<span class="comment"># 表示设置对应共享目录的注释，说明信息，即文件共享名</span></span><br><span class="line">    path = /var/lib/samba/drivers	<span class="comment"># 表示共享目录的路径</span></span><br><span class="line">    write list = root	<span class="comment"># 表示设置允许写的用户和组，组要用@表示，例如 write list = root,@root</span></span><br><span class="line">    create mask = 0664</span><br><span class="line">    directory mask = 0775</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># server string 表示描述samba服务器</span></span><br><span class="line"><span class="comment"># writable 表示设置目录是否可写</span></span><br><span class="line"><span class="comment"># guest ok 表示设置是否所有人均可访问共享目录</span></span><br><span class="line"><span class="comment"># public 表示设置是否允许匿名用户访问</span></span><br><span class="line"><span class="comment"># hosts deny 设置拒绝哪台主机访问，例如 hosts deny = 192.168.176.111</span></span><br><span class="line"><span class="comment"># hosts allow 设置允许哪台主机访问，例如 hosts allow = 192.168.176.222</span></span><br><span class="line"><span class="comment"># printable 表示设置是否为打印机</span></span><br></pre></td></tr></table></figure>

<p><strong>常用配置文件参数：</strong></p>
<blockquote>
<p>可使用testparm命令检测是否有语法错误</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]# testparm</span><br><span class="line">Load smb config files from /etc/samba/smb.conf</span><br><span class="line">rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)</span><br><span class="line">Processing section &quot;[homes]&quot;</span><br><span class="line">Processing section &quot;[printers]&quot;</span><br><span class="line">Processing section &quot;[print$]&quot;</span><br><span class="line">Loaded services file OK.</span><br><span class="line">Server role: ROLE_STANDALONE</span><br><span class="line"></span><br><span class="line">Press enter to see a dump of your service definitions</span><br></pre></td></tr></table></figure>

<h2 id="samba访问"><a href="#samba访问" class="headerlink" title="samba访问"></a>samba访问</h2><blockquote>
<p>服务器地址：192.168.176.222</p>
<p>客户端地址：192.168.176.111</p>
</blockquote>
<p>服务端：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]<span class="comment"># yum install samba* -y</span></span><br><span class="line">[root@server ~]<span class="comment"># cd /etc/samba/</span></span><br><span class="line">[root@server samba]<span class="comment"># ls</span></span><br><span class="line">lmhosts  smb.conf  smb.conf.example</span><br><span class="line">[root@server ~]<span class="comment"># cd /</span></span><br><span class="line">[root@server /]<span class="comment"># mkdir samba</span></span><br><span class="line">[root@server /]<span class="comment"># vim /etc/samba/smb.conf</span></span><br><span class="line">[root@server /]<span class="comment"># tail -n 5 /etc/samba/smb.conf</span></span><br><span class="line"></span><br><span class="line">[share]</span><br><span class="line">        path = /samba</span><br><span class="line">        browseable = Yes</span><br><span class="line">        valid users = 123</span><br><span class="line">[root@server /]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server /]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@server /]<span class="comment"># setenforce 0</span></span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<ul>
<li>交互式访问</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]<span class="comment"># yum install -y samba-client</span></span><br><span class="line">[root@client ~]<span class="comment"># smbclient -L 192.168.176.222 -U 123</span></span><br><span class="line">Enter SAMBA\123<span class="string">'s password:123321</span></span><br><span class="line"><span class="string">Domain=[SEVER] OS=[Windows 6.1] Server=[Samba 4.6.2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Sharename       Type      Comment</span></span><br><span class="line"><span class="string">        ---------       ----      -------</span></span><br><span class="line"><span class="string">        print$          Disk      Printer Drivers</span></span><br><span class="line"><span class="string">        IPC$            IPC       IPC Service (Samba 4.6.2)</span></span><br><span class="line"><span class="string">        123             Disk      Home Directories</span></span><br><span class="line"><span class="string">Domain=[SEVER] OS=[Windows 6.1] Server=[Samba 4.6.2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Server               Comment</span></span><br><span class="line"><span class="string">        ---------            -------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Workgroup            Master</span></span><br><span class="line"><span class="string">        ---------            -------</span></span><br><span class="line"><span class="string">        SAMBA                SEVER</span></span><br><span class="line"><span class="string"># 交互式访问共享资源</span></span><br><span class="line"><span class="string">[root@client ~]# smbclient //192.168.176.222/123 -U 123</span></span><br><span class="line"><span class="string">Enter SAMBA\123'</span>s password:</span><br><span class="line">Domain=[SEVER] OS=[Windows 6.1] Server=[Samba 4.6.2]</span><br><span class="line">smb: \&gt; ls</span><br><span class="line">  .                                   D        0  Wed Jun 26 10:17:59 2019</span><br><span class="line">  ..                                  D        0  Wed Jun 26 10:17:59 2019</span><br><span class="line">  .bash_logout                        H       18  Thu Aug  3 05:11:00 2017</span><br><span class="line">  .bash_profile                       H      193  Thu Aug  3 05:11:00 2017</span><br><span class="line">  .bashrc                             H      231  Thu Aug  3 05:11:00 2017</span><br><span class="line"></span><br><span class="line">                17811456 blocks of size 1024. 16485268 blocks available</span><br><span class="line">smb: \&gt;</span><br><span class="line"><span class="comment"># 可用？来查看当前状态可用哪些命令</span></span><br></pre></td></tr></table></figure>

<ul>
<li>挂载方式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@client ~]<span class="comment"># mount -t cifs //192.168.176.222/share /media -o username=123,password=123321</span></span><br><span class="line">[root@client ~]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@client ~]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">//192.168.176.222/share /media  cifs defaults,username=123,password=123321 0 0</span><br><span class="line">[root@client ~]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root   xfs        17G  3.8G   14G   22% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">//192.168.176.222/share cifs       17G  3.9G   14G   23% /media</span><br></pre></td></tr></table></figure>

<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><ul>
<li>用户映射</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 服务端</span></span><br><span class="line">[root@client ~]<span class="comment"># cd /etc/samba/</span></span><br><span class="line">[root@client samba]<span class="comment"># vim smbusers</span></span><br><span class="line">[root@client samba]<span class="comment"># cat smbusers</span></span><br><span class="line">123 = haha</span><br><span class="line">[root@client samba]<span class="comment"># vim /etc/samba/smb.conf</span></span><br><span class="line">[global]</span><br><span class="line">        workgroup = SAMBA</span><br><span class="line">        security = user</span><br><span class="line">        username map = /etc/samba/smbusers <span class="comment"># 找到global，将此行添加上去</span></span><br><span class="line"></span><br><span class="line">[root@client samba]<span class="comment"># cd /</span></span><br><span class="line">[root@client /]<span class="comment"># mkdir camba</span></span><br><span class="line">[root@client /]<span class="comment"># vim /etc/samba/smb.conf</span></span><br><span class="line">[root@client /]<span class="comment"># tail -n 3 /etc/samba/smb.conf</span></span><br><span class="line">        path = /samba</span><br><span class="line">        browseable = Yes</span><br><span class="line">        valid users = 123</span><br><span class="line"></span><br><span class="line">[root@client samba]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 客户端</span></span><br><span class="line">[root@client media]<span class="comment"># smbclient -L 192.168.107.144 -U haha</span></span><br><span class="line">Enter SAMBA\haha<span class="string">'s password:</span></span><br><span class="line"><span class="string">Domain=[SEVER] OS=[Windows 6.1] Server=[Samba 4.6.2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Sharename       Type      Comment</span></span><br><span class="line"><span class="string">        ---------       ----      -------</span></span><br><span class="line"><span class="string">        print$          Disk      Printer Drivers</span></span><br><span class="line"><span class="string">        share           Disk</span></span><br><span class="line"><span class="string">        IPC$            IPC       IPC Service (Samba 4.6.2)</span></span><br><span class="line"><span class="string">        123             Disk      Home Directories</span></span><br><span class="line"><span class="string">Domain=[SEVER] OS=[Windows 6.1] Server=[Samba 4.6.2]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Server               Comment</span></span><br><span class="line"><span class="string">        ---------            -------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Workgroup            Master</span></span><br><span class="line"><span class="string">        ---------            -------</span></span><br><span class="line"><span class="string">        SAMBA</span></span><br><span class="line"><span class="string">[root@client media]# vim /etc/fstab</span></span><br><span class="line"><span class="string">[root@client media]# tail -n 1 /etc/fstab</span></span><br><span class="line"><span class="string">//192.168.107.144/share /media  cifs    defaults,useradd=haha,password=123321 0 0</span></span><br><span class="line"><span class="string">[root@client media]# df -Th</span></span><br><span class="line"><span class="string">文件系统                类型      容量  已用  可用 已用% 挂载点</span></span><br><span class="line"><span class="string">/dev/mapper/rhel-root   xfs        17G  3.8G   14G   22% /</span></span><br><span class="line"><span class="string">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span></span><br><span class="line"><span class="string">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span></span><br><span class="line"><span class="string">tmpfs                   tmpfs     993M  9.1M  984M    1% /run</span></span><br><span class="line"><span class="string">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span></span><br><span class="line"><span class="string">/dev/sr0                iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span></span><br><span class="line"><span class="string">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span></span><br><span class="line"><span class="string">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span></span><br><span class="line"><span class="string">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span></span><br><span class="line"><span class="string">//192.168.107.144/share cifs       17G  3.9G   14G   23% /media</span></span><br></pre></td></tr></table></figure>

<ul>
<li>匿名访问</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 服务端</span></span><br><span class="line">[root@server ~]<span class="comment"># cd /etc/samba/</span></span><br><span class="line">[root@server samba]<span class="comment"># vim smbusers</span></span><br><span class="line">[root@server samba]<span class="comment"># cat smbusers</span></span><br><span class="line">123 = haha</span><br><span class="line">[root@server samba]<span class="comment"># vim /etc/samba/smb.conf</span></span><br><span class="line">[global]</span><br><span class="line">        workgroup = SAMBA</span><br><span class="line">        security = user</span><br><span class="line">        map to guest = Bad User <span class="comment"># 找到global，将此行添加上去</span></span><br><span class="line"><span class="comment"># 加入下列6行     </span></span><br><span class="line">[share] </span><br><span class="line">        path = /samba</span><br><span class="line">        browseable = Yes</span><br><span class="line">        guest ok = yes</span><br><span class="line">        public = yes</span><br><span class="line">        writable = yes</span><br><span class="line"></span><br><span class="line">[root@server samba]<span class="comment"># systemctl restart smb nmb</span></span><br><span class="line">[root@server samba]<span class="comment"># chmod 777 /samba</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 客户端</span></span><br><span class="line">[root@client media]<span class="comment"># vim /etc/fstab</span></span><br><span class="line">[root@client media]<span class="comment"># tail -n 1 /etc/fstab</span></span><br><span class="line">//192.168.107.144/share /media  cifs    defaults,username=<span class="string">'BadUser'</span> 0 0</span><br><span class="line">[root@client media]<span class="comment"># mount -a</span></span><br><span class="line">\[root@client media]<span class="comment"># df -Th</span></span><br><span class="line">文件系统                类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root   xfs        17G  3.8G   14G   22% /</span><br><span class="line">devtmpfs                devtmpfs  977M     0  977M    0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  9.1M  984M    1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0                iso9660   3.8G  3.8G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1               xfs      1014M  161M  854M   16% /boot</span><br><span class="line">tmpfs                   tmpfs     199M   12K  199M    1% /run/user/42</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M    0% /run/user/0</span><br><span class="line">//192.168.107.144/share cifs       17G  3.9G   14G   23% /media</span><br></pre></td></tr></table></figure>

<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1.搭建匿名用户共享服务器<br>2.搭建用户认证共享服务器</p>
<p>要求：<br>1.不论是匿名用户还是用户认证共享，均要在客户机验证结果<br>2.用户认证共享需要映射系统用户为一个虚拟用户</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/3.linux--samba服务/" data-id="ck627jzv0001nu4u6n6atnqhr"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux进阶/">linux进阶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-3.linux--linux基础" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/3.linux--linux基础/"
    >Linux基础</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/3.linux--linux基础/" class="article-date">
  <time datetime="2019-08-29T15:44:18.525Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux基础/">linux基础</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><p>[TOC]</p>
<h2 id="Linux的基本原则"><a href="#Linux的基本原则" class="headerlink" title="Linux的基本原则"></a>Linux的基本原则</h2><ul>
<li>由目的单一的小程序组成，组成小程序来完成复杂的任务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat CentOS-Base.repo | wc -l</span></span><br><span class="line">62</span><br></pre></td></tr></table></figure>

<ul>
<li>Linux里一切皆是文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># file anaconda-ks.cfg</span></span><br><span class="line">anaconda-ks.cfg: ASCII text</span><br><span class="line">[root@MR ~]<span class="comment"># file /dev</span></span><br><span class="line">/dev: directory</span><br></pre></td></tr></table></figure>

<ul>
<li>一些配置文件都是保存成纯文本格式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># file anaconda-ks.cfg</span></span><br><span class="line">anaconda-ks.cfg: ASCII text</span><br></pre></td></tr></table></figure>

<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><ul>
<li>什么是shell呢，英语翻译shell就是一个外壳，他可以理解为用户的工作环境，在window中shell就是桌面，那在Linux中呢，我们常用的终端就是一个shell</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>常见的shell有两种形式，一种是图形界面，即GUI，例如window就是一种GUI。还有一种就是命令行终端，即CLI，Linux系统中的bash就是CLI，接下来就会写到bash</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># cat /etc/shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/usr/sbin/nologin</span><br><span class="line"><span class="comment"># 以上是本系统支持的shell</span></span><br></pre></td></tr></table></figure>

<h2 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h2><h3 id="bash的特性："><a href="#bash的特性：" class="headerlink" title="bash的特性："></a>bash的特性：</h3><ul>
<li>支持命令历史、命令补全、路径补全</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># history</span></span><br><span class="line">  .........以上省略........... </span><br><span class="line">  693  cat /etc/shells</span><br><span class="line">  694  <span class="built_in">history</span></span><br><span class="line">[root@MR /]<span class="comment"># !693</span></span><br><span class="line">cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/usr/sbin/nologin</span><br><span class="line">[root@MR /]<span class="comment"># history -c</span></span><br><span class="line">[root@MR /]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># pa</span></span><br><span class="line">packer               parted               paste</span><br><span class="line">pam_console_apply    partprobe            pathchk</span><br><span class="line">pam_tally2           partx</span><br><span class="line">pam_timestamp_check  passwd</span><br><span class="line">[root@MR /]<span class="comment"># passwd</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># cd /etc/sys</span></span><br><span class="line">sysconfig/          sysctl.d/           system-release</span><br><span class="line">sysctl.conf         systemd/            system-release-cpe</span><br><span class="line">[root@MR /]<span class="comment"># cd /etc/sysconfig/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>支持管道、重定向</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> | 如同任意门</span><br><span class="line">[root@MR ~]<span class="comment"># cat CentOS-Base.repo | wc -l</span></span><br><span class="line">62</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo '12344321' &gt; 15</span></span><br><span class="line">[root@MR ~]<span class="comment"># cat 15</span></span><br><span class="line">12344321</span><br></pre></td></tr></table></figure>

<ul>
<li>支持命令行编辑</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span>   快捷命令操作</span><br><span class="line">[root@MR ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@MR ~]<span class="comment"># alias passwd='cat /etc/passwd'</span></span><br><span class="line">[root@MR ~]<span class="comment"># passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（如果你先重启电脑还能使用的话，请往下看）</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls -a</span></span><br><span class="line">[root@MR ~]<span class="comment"># vim .bashrc</span></span><br><span class="line">(按字母“i”进入编辑模式)</span><br><span class="line"><span class="comment"># .bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific aliases and functions</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">'rm -i'</span></span><br><span class="line"><span class="built_in">alias</span> cp=<span class="string">'cp -i'</span></span><br><span class="line"><span class="built_in">alias</span> mv=<span class="string">'mv -i'</span></span><br><span class="line"><span class="built_in">alias</span> network=<span class="string">'cd /etc/sysconfig/network-scripts'</span></span><br><span class="line"><span class="built_in">alias</span> passwd=<span class="string">'cat /etc/passwd'</span> <span class="comment">#（将此行命令添加进去）</span></span><br><span class="line"><span class="comment"># Source global definitions</span></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . /etc/bashrc <span class="comment">#（如果你想任何用户都可以使用得话，请添加之此文本文件/etc/bashrc）</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">（狂按‘esc键’输入<span class="string">":wq"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">快捷操作键：</span><br><span class="line">ctrl+a 命令回到开始</span><br><span class="line">ctrl+e 命令回到最后</span><br><span class="line">ctrl+w 命令一节一节得删除</span><br></pre></td></tr></table></figure>

<ul>
<li>支持命令行展开</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（首先你要yum install tree -y 来安装tree）</span></span><br><span class="line">[root@MR ~]<span class="comment"># mkdir -p a/&#123;b/&#123;d,e/&#123;f,g&#125;&#125;,c&#125;</span></span><br><span class="line">[root@MR ~]<span class="comment"># tree a</span></span><br><span class="line">a</span><br><span class="line">├── b</span><br><span class="line">│   ├── d</span><br><span class="line">│   └── e</span><br><span class="line">│       ├── f</span><br><span class="line">│       └── g</span><br><span class="line">└── c</span><br><span class="line"></span><br><span class="line">6 directories, 0 files</span><br></pre></td></tr></table></figure>

<ul>
<li>支持文件名通配</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（a*可以匹配当前目录下所有a开头的文件）</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls a*  </span></span><br><span class="line">anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line">a:</span><br><span class="line">b  c</span><br></pre></td></tr></table></figure>

<ul>
<li>支持变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># a=3</span></span><br><span class="line">[root@MR ~]<span class="comment"># echo $a</span></span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<ul>
<li>支持编程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># vim shijian.sh</span></span><br><span class="line"><span class="comment"># 将date加如进去</span></span><br><span class="line">[root@MR ~]<span class="comment"># bash shijian.sh</span></span><br><span class="line">2019年 03月 23日 星期六 11:31:45 CST</span><br></pre></td></tr></table></figure>

<h3 id="bash支持的引号"><a href="#bash支持的引号" class="headerlink" title="bash支持的引号"></a>bash支持的引号</h3><p>“ ` ”反引号  用于命令替换 反引号里面的命令取出来是它们的值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br><span class="line">[root@MR ~]<span class="comment"># echo `pwd`</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<p>“ ‘ ” 单引号   取本身，不完成命令替换 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo 'pwd'</span></span><br><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<p>“ “ ” 双引号  实现命令替换，支持变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># a=1</span></span><br><span class="line">[root@MR ~]<span class="comment"># echo "$a"</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 另：单引号取出来是本身</p>
<p>反引号和双引号取出来是他们的值</p>
</blockquote>
<h3 id="bash的快捷操作"><a href="#bash的快捷操作" class="headerlink" title="bash的快捷操作"></a>bash的快捷操作</h3><ul>
<li>ctrl+a  跳到行头</li>
<li>ctrl+e  跳到行尾</li>
<li>ctrl+u 删除光标前面的内容</li>
<li>ctrl+k 删除光标后面的内容</li>
<li>ctrl+&lt;– </li>
<li>ctrl+L 清屏</li>
</ul>
<h3 id="bash的命令历史"><a href="#bash的命令历史" class="headerlink" title="bash的命令历史"></a>bash的命令历史</h3><p>history 查看命令历史</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  ls</span><br><span class="line">    2  <span class="built_in">history</span></span><br><span class="line">    3  <span class="built_in">echo</span> `<span class="variable">$a</span>`</span><br><span class="line">    4  <span class="built_in">cd</span> /etc/sysconfig/network-scripts/</span><br><span class="line">    ......以下省略.........</span><br></pre></td></tr></table></figure>

<p>常用选项</p>
<p>​    -c 清除历史命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history -c</span></span><br><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<p>​    -d 一般后接参数，删除第几条命名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br><span class="line">    2  <span class="built_in">cd</span></span><br><span class="line">    3  <span class="built_in">pwd</span></span><br><span class="line">    4  ls</span><br><span class="line">    5  mv</span><br><span class="line">    6  <span class="built_in">history</span></span><br><span class="line">[root@MR ~]<span class="comment"># history -d 4</span></span><br><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br><span class="line">    2  <span class="built_in">cd</span></span><br><span class="line">    3  <span class="built_in">pwd</span></span><br><span class="line">    4  mv</span><br><span class="line">    5  <span class="built_in">history</span></span><br><span class="line">    6  <span class="built_in">history</span> -d 4</span><br><span class="line">    7  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<p>​    -w 保存文件到当前用户下的/.bash_history 中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history -w</span></span><br><span class="line">[root@MR ~]<span class="comment"># cat .bash_history</span></span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">mv</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"><span class="built_in">history</span> -d 4</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"><span class="built_in">history</span> -w</span><br></pre></td></tr></table></figure>

<p>​    !n 再次执行历史命令中的第n条历史命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br><span class="line">    2  <span class="built_in">cd</span></span><br><span class="line">    3  <span class="built_in">pwd</span></span><br><span class="line">    4  mv</span><br><span class="line">    5  <span class="built_in">history</span></span><br><span class="line">    6  <span class="built_in">history</span> -d 4</span><br><span class="line">    7  <span class="built_in">history</span></span><br><span class="line">    8  <span class="built_in">history</span> -w</span><br><span class="line">    9  cat bash_history</span><br><span class="line">   10  cat .bash_history</span><br><span class="line">   11  <span class="built_in">history</span></span><br><span class="line">[root@MR ~]<span class="comment"># !3</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<p>​    !-n 再次执行历史命令中倒数第n条命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    .......以上省略........</span><br><span class="line">   15  <span class="built_in">stat</span> a</span><br><span class="line">   16  <span class="built_in">cd</span></span><br><span class="line">   17  ls</span><br><span class="line">   18  <span class="built_in">history</span></span><br><span class="line">[root@MR ~]<span class="comment"># !-3</span></span><br><span class="line"><span class="built_in">cd</span></span><br></pre></td></tr></table></figure>

<p>​    !!  执行上一条命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cd /etc/</span></span><br><span class="line">[root@MR etc]<span class="comment"># !!</span></span><br><span class="line"><span class="built_in">cd</span> /etc/</span><br></pre></td></tr></table></figure>

<p>​    !stat 执行历史命令中最近一个以stat开头的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">..........以上省略..........</span><br><span class="line">   28  <span class="built_in">stat</span> a</span><br><span class="line">   29  <span class="built_in">cd</span></span><br><span class="line">   30  ls</span><br><span class="line">   31  <span class="built_in">stat</span> a</span><br><span class="line">   32  ls</span><br><span class="line">   33  <span class="built_in">cd</span></span><br><span class="line">   34  <span class="built_in">pwd</span></span><br><span class="line">   35  historiy</span><br><span class="line">   36  <span class="built_in">history</span></span><br><span class="line">[root@MR ~]<span class="comment"># !stat</span></span><br><span class="line"><span class="built_in">stat</span> a</span><br><span class="line">  文件：<span class="string">"a"</span></span><br><span class="line">  大小：22              块：0          IO 块：4096   目录</span><br><span class="line">设备：fd00h/64768d      Inode：694         硬链接：4</span><br><span class="line">权限：(0755/drwxr-xr-x)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">环境：unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">最近访问：2019-03-17 15:19:50.679860493 +0800</span><br><span class="line">最近更改：2019-03-17 15:19:43.697860882 +0800</span><br><span class="line">最近改动：2019-03-17 15:19:43.697860882 +0800</span><br><span class="line">创建时间：-</span><br></pre></td></tr></table></figure>

<p>​    !$ 引用前一条命令的最后一个参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat /etc/hostname</span></span><br><span class="line">MR.ZLJ</span><br><span class="line"></span><br><span class="line">[root@MR ~]<span class="comment"># vim !$</span></span><br><span class="line">vim /etc/hostname</span><br></pre></td></tr></table></figure>

<p>​    esc . 引用前一条命令的最后一个参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat /etc/hostname</span></span><br><span class="line">MR.ZLJ</span><br><span class="line"></span><br><span class="line">[root@MR ~]<span class="comment"># vim /etc/hostname   #此处按一下esc键然后在按"."键</span></span><br></pre></td></tr></table></figure>

<h3 id="bash的命令、路径补全"><a href="#bash的命令、路径补全" class="headerlink" title="bash的命令、路径补全"></a>bash的命令、路径补全</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># pa</span></span><br><span class="line">packer               parted               paste</span><br><span class="line">pam_console_apply    partprobe            pathchk</span><br><span class="line">pam_tally2           partx</span><br><span class="line">pam_timestamp_check  passwd</span><br><span class="line">[root@MR /]<span class="comment"># passwd</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR /]<span class="comment"># cd /etc/sys</span></span><br><span class="line">sysconfig/          sysctl.d/           system-release</span><br><span class="line">sysctl.conf         systemd/            system-release-cpe</span><br><span class="line">[root@MR /]<span class="comment"># cd /etc/sysconfig/</span></span><br></pre></td></tr></table></figure>

<h3 id="bash命令别名"><a href="#bash命令别名" class="headerlink" title="bash命令别名"></a>bash命令别名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span>   快捷命令操作</span><br><span class="line">[root@MR ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@MR ~]<span class="comment"># alias passwd='cat /etc/passwd'</span></span><br><span class="line">[root@MR ~]<span class="comment"># passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（如果你先重启电脑还能使用的话，请往下看）</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls -a</span></span><br><span class="line">[root@MR ~]<span class="comment"># vim .bashrc</span></span><br><span class="line">(按字母“i”进入编辑模式)</span><br><span class="line"><span class="comment"># .bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific aliases and functions</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">'rm -i'</span></span><br><span class="line"><span class="built_in">alias</span> cp=<span class="string">'cp -i'</span></span><br><span class="line"><span class="built_in">alias</span> mv=<span class="string">'mv -i'</span></span><br><span class="line"><span class="built_in">alias</span> network=<span class="string">'cd /etc/sysconfig/network-scripts'</span></span><br><span class="line"><span class="built_in">alias</span> passwd=<span class="string">'cat /etc/passwd'</span> <span class="comment">#（将此行命令添加进去）</span></span><br><span class="line"><span class="comment"># Source global definitions</span></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . /etc/bashrc <span class="comment">#（如果你想任何用户都可以使用得话，请添加之此文本文件/etc/bashrc）</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">（狂按‘esc键’输入<span class="string">":wq"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="bash中的命令替换"><a href="#bash中的命令替换" class="headerlink" title="bash中的命令替换"></a>bash中的命令替换</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo $(pwd)</span></span><br><span class="line">/root</span><br><span class="line">[root@MR ~]<span class="comment"># echo `pwd`</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<blockquote>
<p>另谨记单引号取出来是本身，反引号和双引号取出来是他们的值</p>
</blockquote>
<h3 id="bash命令展开"><a href="#bash命令展开" class="headerlink" title="bash命令展开"></a>bash命令展开</h3><p>~：展开为用户的家目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cd ~</span></span><br><span class="line">[root@MR ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<p>~USERNAME：展开为指定用户USERNAME的家目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># cd ~zhou</span></span><br><span class="line">[root@MR zhou]<span class="comment"># ls</span></span><br></pre></td></tr></table></figure>

<p>{}：可承载一个以逗号分隔的列表，并将其展开为多个路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p a/&#123;b/&#123;d,f&#125;,c&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bash环境变量"><a href="#bash环境变量" class="headerlink" title="bash环境变量"></a>bash环境变量</h3><p>PATH 命令搜索路径</p>
<p>which 哪里</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># which ls</span></span><br><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br><span class="line">        /usr/bin/ls</span><br></pre></td></tr></table></figure>

<p>HISTSIZE 定义命令历史能存多少条，默认为1000条</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">1000</span><br><span class="line">[root@MR ~]<span class="comment"># HISTSIZE=100</span></span><br><span class="line">[root@MR ~]<span class="comment"># echo $HISTSIZE</span></span><br><span class="line">100</span><br></pre></td></tr></table></figure>

<p>SHELL 当前系统中使用的shell</p>
<p>常见的SHELL在/etc/shells中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat /etc/shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/usr/sbin/nologin</span><br></pre></td></tr></table></figure>

<h2 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h2><p>（命令）{选项} 【参数】</p>
<p>选项：可以没有，也可以很多个</p>
<p>​    短格式之间可以合并</p>
<p>​    长格式之间不能合并</p>
<p>参数：命令的对象，可以没有，也可以有多个</p>
<h2 id="命令类型"><a href="#命令类型" class="headerlink" title="命令类型"></a>命令类型</h2><ul>
<li>内部命令：shell内置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># type pwd</span></span><br><span class="line"><span class="built_in">pwd</span> 是 shell 内嵌</span><br></pre></td></tr></table></figure>

<ul>
<li>外部命令：在某一个路径下面有一个和命令名称相对应的可执行文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># type mv</span></span><br><span class="line">mv 是 `mv -i<span class="string">' 的别名</span></span><br><span class="line"><span class="string">[root@MR ~]# type passwd</span></span><br><span class="line"><span class="string">passwd 是 /usr/bin/passwd</span></span><br></pre></td></tr></table></figure>

<h2 id="ls：列出指定目录的内容"><a href="#ls：列出指定目录的内容" class="headerlink" title="ls：列出指定目录的内容"></a>ls：列出指定目录的内容</h2><p>​    -l 长格式显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">drwxr-xr-x. 2 root root  43 3月  10 00:15 1111111</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br></pre></td></tr></table></figure>

<p>​    -h 做单位转换</p>
<p>​    -a 显示所有文件（包括隐藏文件）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -alh</span></span><br><span class="line">总用量 48K</span><br><span class="line">dr-xr-x---.  3 root root 4.0K 3月  23 17:50 .</span><br><span class="line">drwxr-xr-x. 17 root root 4.0K 3月  23 14:47 ..</span><br><span class="line">drwxr-xr-x.  2 root root   43 3月  10 00:15 1111111</span><br><span class="line">-rw-------.  1 root root  810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">-rw-------.  1 root root 5.8K 3月  23 17:14 .bash_history</span><br><span class="line">-rw-r--r--.  1 root root   18 12月 29 2013 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root  176 12月 29 2013 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root  224 3月   7 21:59 .bashrc</span><br><span class="line">-rw-r--r--.  1 root root  100 12月 29 2013 .cshrc</span><br><span class="line">-rw-r--r--.  1 root root  129 12月 29 2013 .tcshrc</span><br><span class="line">-rw-------.  1 root root 5.4K 3月  23 16:43 .viminfo</span><br></pre></td></tr></table></figure>

<p>​    -d 显示目录自身的属性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -ld</span></span><br><span class="line">dr-xr-x---. 3 root root 4096 3月  23 17:50 .</span><br></pre></td></tr></table></figure>

<p>​    -t 以时间排序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -tl /</span></span><br><span class="line">总用量 28</span><br><span class="line">drwxrwxrwt.   7 root root  101 3月  26 17:25 tmp</span><br><span class="line">drwxr-xr-x.  76 root root 8192 3月  26 17:04 etc</span><br><span class="line">drwxr-xr-x.  23 root root  720 3月  26 17:03 run</span><br><span class="line">drwxr-xr-x.  20 root root 3180 3月  26 17:03 dev</span><br><span class="line">dr-xr-xr-x.  13 root root    0 3月  26 17:03 sys</span><br><span class="line">drwxr-xr-x.  21 root root 4096 3月  26 17:03 var</span><br><span class="line">dr-xr-xr-x. 418 root root    0 3月  26 17:03 proc</span><br><span class="line">dr-xr-x---.   4 root root 4096 3月  10 00:17 root</span><br><span class="line">drwxr-xr-x.   2 root root    6 3月   8 19:55 home</span><br><span class="line">drwxr-xr-x.   3 root root   18 3月   8 17:59 mnt</span><br><span class="line">dr-xr-xr-x.   3 root root 4096 3月   6 16:48 boot</span><br><span class="line">drwxr-xr-x.  13 root root 4096 3月   6 16:30 usr</span><br><span class="line">lrwxrwxrwx.   1 root root    9 3月   6 16:30 lib64 -&gt; usr/lib64</span><br></pre></td></tr></table></figure>

<p>​    -r 逆序显示</p>
<figure class="highlight plain"><figcaption><span>~]# ls -lar</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]# ls -lar</span><br><span class="line">总用量 48</span><br><span class="line">-rw-------.  1 root root 5528 3月  23 16:43 .viminfo</span><br><span class="line">-rw-r--r--.  1 root root  129 12月 29 2013 .tcshrc</span><br><span class="line">-rw-r--r--.  1 root root  100 12月 29 2013 .cshrc</span><br><span class="line">-rw-r--r--.  1 root root  224 3月   7 21:59 .bashrc</span><br><span class="line">-rw-r--r--.  1 root root  176 12月 29 2013 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root   18 12月 29 2013 .bash_logout</span><br><span class="line">-rw-------.  1 root root 5844 3月  23 17:14 .bash_history</span><br><span class="line">-rw-------.  1 root root  810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x.  2 root root   43 3月  10 00:15 1111111</span><br><span class="line">drwxr-xr-x. 17 root root 4096 3月  23 14:47 ..</span><br><span class="line">dr-xr-x---.  3 root root 4096 3月  23 17:50 .</span><br></pre></td></tr></table></figure>

<h2 id="cd：切换目录"><a href="#cd：切换目录" class="headerlink" title="cd：切换目录"></a>cd：切换目录</h2><h2 id="pwd：打印当前所在目录"><a href="#pwd：打印当前所在目录" class="headerlink" title="pwd：打印当前所在目录"></a>pwd：打印当前所在目录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR home]<span class="comment"># pwd</span></span><br><span class="line">/home</span><br><span class="line">[root@MR home]<span class="comment"># cd /etc</span></span><br><span class="line">[root@MR etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br></pre></td></tr></table></figure>

<h2 id="mkdir：创建目录"><a href="#mkdir：创建目录" class="headerlink" title="mkdir：创建目录"></a>mkdir：创建目录</h2><p>  -p：创建目录时若父目录不存在则自动创建</p>
<p>  -v：显示创建目录的过程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># mkdir -vp a/&#123;b/&#123;d,e&#125;,c&#125;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"a"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"a/b"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"a/b/d"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"a/b/e"</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">"a/c"</span></span><br></pre></td></tr></table></figure>

<h2 id="touch：创建空文件-更新文件时间）"><a href="#touch：创建空文件-更新文件时间）" class="headerlink" title="touch：创建空文件(更新文件时间）"></a>touch：创建空文件(更新文件时间）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">再次创建文件就是更新时间戳</span><br><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root   0 3月  23 18:05 1</span><br><span class="line">drwxr-xr-x. 2 root root  43 3月  10 00:15 1111111</span><br><span class="line">drwxr-xr-x. 4 root root  22 3月  23 17:58 a</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">[root@MR ~]<span class="comment"># touch 1</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root   0 3月  23 18:06 1</span><br><span class="line">drwxr-xr-x. 2 root root  43 3月  10 00:15 1111111</span><br><span class="line">drwxr-xr-x. 4 root root  22 3月  23 17:58 a</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br></pre></td></tr></table></figure>

<h2 id="stat：显示文件或文件系统的状态"><a href="#stat：显示文件或文件系统的状态" class="headerlink" title="stat：显示文件或文件系统的状态"></a>stat：显示文件或文件系统的状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># stat 1</span></span><br><span class="line">  文件：<span class="string">"1"</span></span><br><span class="line">  大小：0               块：0          IO 块：4096   普通空文件</span><br><span class="line">设备：fd00h/64768d      Inode：68184559    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">环境：unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">最近访问：2019-03-23 18:06:15.458598473 +0800</span><br><span class="line">最近更改：2019-03-23 18:06:15.458598473 +0800</span><br><span class="line">最近改动：2019-03-23 18:06:15.458598473 +0800</span><br><span class="line">创建时间：-</span><br></pre></td></tr></table></figure>

<h2 id="rm：删除文件"><a href="#rm：删除文件" class="headerlink" title="rm：删除文件"></a>rm：删除文件</h2><p>  -r：递归删除，删除目录时必须使用此选项</p>
<p>  -f：强制删除，不询问</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root   0 3月  23 18:06 1</span><br><span class="line">drwxr-xr-x. 2 root root  43 3月  10 00:15 1111111</span><br><span class="line">drwxr-xr-x. 4 root root  22 3月  23 17:58 a</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">[root@MR ~]<span class="comment"># rm -rf a</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  1111111  anaconda-ks.cfg</span><br></pre></td></tr></table></figure>

<h2 id="cp：复制文件"><a href="#cp：复制文件" class="headerlink" title="cp：复制文件"></a>cp：复制文件</h2><blockquote>
<p>一个文件到一个文件，多个文件到一个目录</p>
</blockquote>
<p>  -a：归档复制，常用于备份</p>
<p>  -r：递归拷贝，拷贝目录时必须使用此选项</p>
<p>  -p：拷贝时保留原权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  A  anaconda-ks.cfg  b</span><br><span class="line">[root@MR ~]<span class="comment"># cp 1 2 3 A</span></span><br><span class="line">[root@MR ~]<span class="comment"># cd A</span></span><br><span class="line">[root@MR A]<span class="comment"># ls</span></span><br><span class="line">1  2  3</span><br><span class="line"></span><br><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">drwxr-xr-x. 2 root root   6 3月  23 18:12 A</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">[root@MR ~]<span class="comment"># cp -arp A b</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">drwxr-xr-x. 2 root root   6 3月  23 18:12 A</span><br><span class="line">-rw-------. 1 root root 810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root   6 3月  23 18:12 b</span><br></pre></td></tr></table></figure>

<h2 id="mv：移动文件-重命名"><a href="#mv：移动文件-重命名" class="headerlink" title="mv：移动文件(重命名)"></a>mv：移动文件(重命名)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  A  anaconda-ks.cfg  b</span><br><span class="line">[root@MR ~]<span class="comment"># mv A B</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  anaconda-ks.cfg  b  B</span><br><span class="line">[root@MR ~]<span class="comment"># mv b B</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls B</span></span><br><span class="line">1  2  3  b</span><br></pre></td></tr></table></figure>

<h2 id="cat：顺序查看文本内容"><a href="#cat：顺序查看文本内容" class="headerlink" title="cat：顺序查看文本内容"></a>cat：顺序查看文本内容</h2><p>拼接文件内容并输出至标准输出(屏幕)</p>
<p>  -n：显示行号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat -n anaconda-ks.cfg</span></span><br><span class="line">     1  <span class="comment">#version=RHEL7</span></span><br><span class="line">     2  <span class="comment"># System authorization information</span></span><br><span class="line">     3  auth --enableshadow --passalgo=sha512</span><br><span class="line">     4</span><br><span class="line">     5  <span class="comment"># Use CDROM installation media</span></span><br><span class="line">     6  cdrom</span><br><span class="line">     7  <span class="comment"># Run the Setup Agent on first boot</span></span><br><span class="line">............以下省略.............</span><br></pre></td></tr></table></figure>

<h2 id="tac：逆序查看文件内容"><a href="#tac：逆序查看文件内容" class="headerlink" title="tac：逆序查看文件内容"></a>tac：逆序查看文件内容</h2><p>连接文件并倒序打印内容至标准输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># tac anaconda-ks.cfg</span></span><br><span class="line"></span><br><span class="line">%end</span><br><span class="line"></span><br><span class="line">@core</span><br><span class="line">%packages</span><br><span class="line"></span><br><span class="line">clearpart --none --initlabel</span><br><span class="line"><span class="comment"># Partition clearing information</span></span><br></pre></td></tr></table></figure>

<h3 id="more：全屏查看文本文件内容"><a href="#more：全屏查看文本文件内容" class="headerlink" title="more：全屏查看文本文件内容"></a>more：全屏查看文本文件内容</h3><p>只能从前往后看,百分比查看，看完自动退出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># more anaconda-ks.cfg</span></span><br><span class="line"><span class="comment">#version=RHEL7</span></span><br><span class="line"><span class="comment"># System authorization information</span></span><br><span class="line">auth --enableshadow --passalgo=sha512</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use CDROM installation media</span></span><br><span class="line">cdrom</span><br><span class="line"><span class="comment"># Run the Setup Agent on first boot</span></span><br><span class="line"></span><br><span class="line">--More--(34%)</span><br></pre></td></tr></table></figure>

<h2 id="less：全屏查看文本文件内容"><a href="#less：全屏查看文本文件内容" class="headerlink" title="less：全屏查看文本文件内容"></a>less：全屏查看文本文件内容</h2><p>可从前往后看亦可从后往前看，看完不会自动退出</p>
<p>(往上是b，往下是空格，退出是q)</p>
<h2 id="head：从前往后查看一定行数"><a href="#head：从前往后查看一定行数" class="headerlink" title="head：从前往后查看一定行数"></a>head：从前往后查看一定行数</h2><blockquote>
<p>默认下显示前十行，我们也可以输入-n 【输入一个数字】来查看你想要看到的前多少行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># head CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line">......................以下省略7条........................</span><br><span class="line">[root@MR ~]<span class="comment"># head -n 1 CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br></pre></td></tr></table></figure>

<h2 id="tail：从后往前查看一定行数"><a href="#tail：从后往前查看一定行数" class="headerlink" title="tail：从后往前查看一定行数"></a>tail：从后往前查看一定行数</h2><blockquote>
<p>默认下只显示后十行，我们也可以输入-n 【输入一个数字】来查看你想要看到的后多少行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># tail CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#contrib - packages by Centos Users</span></span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Contrib - mirrors.aliyun.com</span><br><span class="line">......................以下省略7条........................</span><br><span class="line">[root@MR ~]<span class="comment"># tail -n 1 CentOS-Base.repo</span></span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>

<p>  -f：实时查看文件的更新</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat 1</span></span><br><span class="line">123</span><br><span class="line">456</span><br><span class="line">789</span><br><span class="line">[root@MR ~]<span class="comment"># tail -f 1</span></span><br><span class="line">123</span><br><span class="line">456</span><br><span class="line">789</span><br><span class="line"><span class="comment">#此时我们另开一个终端</span></span><br><span class="line">[root@MR ~]<span class="comment"># vim 1</span></span><br><span class="line"><span class="comment">#把789改为444</span></span><br><span class="line">此时另外一个终端就会变</span><br><span class="line">[root@MR ~]<span class="comment"># tail -f 1</span></span><br><span class="line">123</span><br><span class="line">456</span><br><span class="line">444</span><br></pre></td></tr></table></figure>

<h2 id="wc：用于统计文本文件的行数、字数、字节数"><a href="#wc：用于统计文本文件的行数、字数、字节数" class="headerlink" title="wc：用于统计文本文件的行数、字数、字节数"></a>wc：用于统计文本文件的行数、字数、字节数</h2><blockquote>
<p>用于统计指定文本的行数、字数、字节数</p>
<p>-l 只显示行数</p>
<p>-w 只显示单词数</p>
<p>-c 只显示字节数</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例如我现在来统计刚才这个1文本</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -l 1</span></span><br><span class="line">1 1</span><br><span class="line"><span class="comment">#1这个文本只有一行</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -w 1</span></span><br><span class="line">4 1</span><br><span class="line"><span class="comment">#1这个文本只有4个单词</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -c 1</span></span><br><span class="line">9 1</span><br><span class="line"><span class="comment">#1这个文本只有9个字节</span></span><br></pre></td></tr></table></figure>

<h2 id="du：查看文件或目录占用的磁盘空间大小"><a href="#du：查看文件或目录占用的磁盘空间大小" class="headerlink" title="du：查看文件或目录占用的磁盘空间大小"></a>du：查看文件或目录占用的磁盘空间大小</h2><p>  -s：显示总的占用空间大小</p>
<p>  -h：单位转换，以更友好的方式显示大小</p>
<p>一般两者组合使用 du -sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># du -sh anaconda-ks.cfg</span></span><br><span class="line">4.0K    anaconda-ks.cfg</span><br></pre></td></tr></table></figure>

<h2 id="df：报告文件系统磁盘空间使用情况"><a href="#df：报告文件系统磁盘空间使用情况" class="headerlink" title="df：报告文件系统磁盘空间使用情况"></a>df：报告文件系统磁盘空间使用情况</h2><p>  -h：单位转换，以更友好的方式显示大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># df -h</span></span><br><span class="line">文件系统               容量  已用  可用 已用% 挂载点</span><br><span class="line">/dev/mapper/rhel-root   18G  937M   17G    6% /</span><br><span class="line">devtmpfs               908M     0  908M    0% /dev</span><br><span class="line">tmpfs                  914M     0  914M    0% /dev/shm</span><br><span class="line">tmpfs                  914M  8.6M  905M    1% /run</span><br><span class="line">tmpfs                  914M     0  914M    0% /sys/fs/cgroup</span><br><span class="line">/dev/sr0               3.5G  3.5G     0  100% /mnt/cdrom</span><br><span class="line">/dev/sda1              497M   96M  401M   20% /boot</span><br></pre></td></tr></table></figure>

<h2 id="hostname：查看或临时修改主机名，重开终端有效，重启失效"><a href="#hostname：查看或临时修改主机名，重开终端有效，重启失效" class="headerlink" title="hostname：查看或临时修改主机名，重开终端有效，重启失效"></a>hostname：查看或临时修改主机名，重开终端有效，重启失效</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># hostname 123</span></span><br><span class="line">[root@MR ~]<span class="comment"># bash</span></span><br><span class="line">[root@123 ~]<span class="comment"># reboot</span></span><br><span class="line"><span class="comment">#重启之后</span></span><br><span class="line">[root@MR ~]<span class="comment"># hostname</span></span><br><span class="line">MR.ZLJ</span><br></pre></td></tr></table></figure>

<h2 id="hostnamectl：查看或永久修改主机名，重开终端有效，重启依然有效"><a href="#hostnamectl：查看或永久修改主机名，重开终端有效，重启依然有效" class="headerlink" title="hostnamectl：查看或永久修改主机名，重开终端有效，重启依然有效"></a>hostnamectl：查看或永久修改主机名，重开终端有效，重启依然有效</h2><blockquote>
<p>可在/etc/hostname中配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># vim /etc/hostname</span></span><br></pre></td></tr></table></figure>

<h2 id="clear：清屏"><a href="#clear：清屏" class="headerlink" title="clear：清屏"></a>clear：清屏</h2><blockquote>
<p>输入到屏幕后，屏幕会被清空</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># clear</span></span><br></pre></td></tr></table></figure>

<h2 id="whoami：显示当前登录用户"><a href="#whoami：显示当前登录用户" class="headerlink" title="whoami：显示当前登录用户"></a>whoami：显示当前登录用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># whoami</span></span><br><span class="line">root</span><br></pre></td></tr></table></figure>

<h2 id="w：显示当前在线用户并显示其正在运行的命令"><a href="#w：显示当前在线用户并显示其正在运行的命令" class="headerlink" title="w：显示当前在线用户并显示其正在运行的命令"></a>w：显示当前在线用户并显示其正在运行的命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># w</span></span><br><span class="line"> 20:57:35 up 4 min,  1 user,  load average: 0.02, 0.10, 0.05</span><br><span class="line">USER     TTY        LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0     20:53    7.00s  0.02s  0.01s w</span><br></pre></td></tr></table></figure>

<h2 id="who：查看当前在线用户"><a href="#who：查看当前在线用户" class="headerlink" title="who：查看当前在线用户"></a>who：查看当前在线用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># who</span></span><br><span class="line">root     pts/0        2019-03-23 20:53 (192.168.83.1)</span><br></pre></td></tr></table></figure>

<h2 id="which：显示指定命令的绝对路径"><a href="#which：显示指定命令的绝对路径" class="headerlink" title="which：显示指定命令的绝对路径"></a>which：显示指定命令的绝对路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># which pwd</span></span><br><span class="line">/usr/bin/<span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<h2 id="cal：显示日历"><a href="#cal：显示日历" class="headerlink" title="cal：显示日历"></a>cal：显示日历</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie ~]<span class="comment"># cal</span></span><br><span class="line">     March 2019</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">                1  2</span><br><span class="line"> 3  4  5  6  7  8  9</span><br><span class="line">10 11 12 13 14 15 16</span><br><span class="line">17 18 19 20 21 22 23</span><br><span class="line">24 25 26 27 28 29 30</span><br><span class="line">31</span><br><span class="line"><span class="comment"># 在cal 后面更上年份，就显示那一年</span></span><br><span class="line">[root@zhoulijie ~]<span class="comment"># cal 2018</span></span><br><span class="line">                               2018</span><br><span class="line"></span><br><span class="line">       January               February                 March</span><br><span class="line">Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa</span><br><span class="line">    1  2  3  4  5  6                1  2  3                1  2  3</span><br><span class="line"> 7  8  9 10 11 12 13    4  5  6  7  8  9 10    4  5  6  7  8  9 10</span><br><span class="line">14 15 16 17 18 19 20   11 12 13 14 15 16 17   11 12 13 14 15 16 17</span><br><span class="line">21 22 23 24 25 26 27   18 19 20 21 22 23 24   18 19 20 21 22 23 24</span><br><span class="line">28 29 30 31            25 26 27 28            25 26 27 28 29 30 31</span><br><span class="line">....................以下省略.................................</span><br></pre></td></tr></table></figure>

<h2 id="ldd：查看指定程序有哪些依赖库文件"><a href="#ldd：查看指定程序有哪些依赖库文件" class="headerlink" title="ldd：查看指定程序有哪些依赖库文件"></a>ldd：查看指定程序有哪些依赖库文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ldd /usr/bin/pwd</span></span><br><span class="line">        linux-vdso.so.1 =&gt;  (0x00007fff58dfe000)</span><br><span class="line">        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f093cc15000)</span><br><span class="line">        /lib64/ld-linux-x86-64.so.2 (0x00007f093cfdc000)</span><br></pre></td></tr></table></figure>

<h2 id="date：显示示或设置日期与时间"><a href="#date：显示示或设置日期与时间" class="headerlink" title="date：显示示或设置日期与时间"></a>date：显示示或设置日期与时间</h2><p>  -s：以字符串方式设置时间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># date</span></span><br><span class="line">2019年 03月 23日 星期六 20:59:54 CST</span><br><span class="line">[root@MR ~]<span class="comment"># date -s "2019-03-23 21:00:00"</span></span><br><span class="line">2019年 03月 23日 星期六 21:00:00 CST</span><br></pre></td></tr></table></figure>

<p>  格式化输出时间：</p>
<p>+%Y：年  %m：月  %d：日  %H：时  %M：分  %S：秒</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># mkdir $(date '+%Y-%m-%d'-测试)</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">index.html.1      111_file    anaconda-ks.cfg   </span><br><span class="line">2019-03-23-测试  </span><br><span class="line">[root@MR ~]<span class="comment"># mkdir `date '+%Y-%m-%d-%H:%M:%S'-测试`</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line"> 2019-03-23-测试 </span><br><span class="line">111_file  2019-03-09-测试   index.html.1 </span><br><span class="line">2019-03-23-11:56:35-测试  anaconda-ks.cfg</span><br></pre></td></tr></table></figure>

<h2 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h2><p>内部命令：help 【命令】</p>
<p>外部命令：【命令】–help</p>
<p>man手册：man【命令】</p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>*：匹配任意长度的任意字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie opt]<span class="comment"># ls</span></span><br><span class="line">123456789  185dcdvdv  1cshcd  acvbfv  bgfdbdsgv</span><br><span class="line">[root@zhoulijie opt]<span class="comment"># rm -rf 1*</span></span><br><span class="line">[root@zhoulijie opt]<span class="comment"># ls</span></span><br><span class="line">acvbfv  bgfdbdsgv</span><br></pre></td></tr></table></figure>

<p>？：是匹配任意单个字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie opt]<span class="comment"># ls</span></span><br><span class="line">acvbfv  al  bgfdbdsgv</span><br><span class="line">[root@zhoulijie opt]<span class="comment"># ls a?</span></span><br><span class="line">al</span><br></pre></td></tr></table></figure>

<p>[]：是匹配指定范围内的单个字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie wen]<span class="comment"># ls</span></span><br><span class="line">1  2  3  4  5  6  7  8  9  a  b  c  d  e  f  g  h  i  j  k  l  m</span><br><span class="line">[root@zhoulijie wen]<span class="comment"># ls [1-9]</span></span><br><span class="line">1  2  3  4  5  6  7  8  9</span><br><span class="line">[root@zhoulijie wen]<span class="comment"># ls [1,a]</span></span><br><span class="line">1  a</span><br><span class="line">[root@zhoulijie wen]<span class="comment"># ls [a-h]</span></span><br><span class="line">a  b  c  d  e  f  g  h</span><br></pre></td></tr></table></figure>

<p>[^]：是匹配指定范围之外的任意单个字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie wen]<span class="comment"># ls [^a-m]</span></span><br><span class="line">1  2  3  4  5  6  7  8  9</span><br><span class="line">[root@zhoulijie wen]<span class="comment"># ls [^1-9]</span></span><br><span class="line">a  b  c  d  e  f  g  h  i  j  k  l  m</span><br></pre></td></tr></table></figure>

<h3 id="常见的归档与压缩文档格式"><a href="#常见的归档与压缩文档格式" class="headerlink" title="常见的归档与压缩文档格式"></a>常见的归档与压缩文档格式</h3><ul>
<li>.gz</li>
<li>.bz2</li>
<li>.xz</li>
<li>.zip</li>
<li>.z</li>
</ul>
<h3 id="归档工具–tar"><a href="#归档工具–tar" class="headerlink" title="归档工具–tar"></a>归档工具–tar</h3><blockquote>
<p>常见的选项：</p>
<ul>
<li>-c：创建归档文件</li>
<li>-f file.tar：指定要操作的归档文件</li>
<li>-x：还原归档文件</li>
<li>-v：显示归档过程</li>
<li>-p：归档时保留权限信息。只有管理员才有此权限用此选项</li>
<li>-C：指定还原归档或解压时的目录</li>
<li>-tf：不展开归档，直接查看归档了哪些文件</li>
</ul>
</blockquote>
<p>常用的组合项：  </p>
<ul>
<li>-zcf abc.tar.gz：归档并调用gzip进行压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  anaconda-ks.cfg  B</span><br><span class="line">[root@MR ~]<span class="comment"># tar -zcf abc.tar.gz 1 2 3</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  abc.tar.gz  anaconda-ks.cfg  B</span><br></pre></td></tr></table></figure>

<ul>
<li>-jcf abc.tar.bz2：归档并调用bzip2进行压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># tar -jcf abc.tar.bz2 1 2 3</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  abc.tar.bz2  abc.tar.gz  anaconda-ks.cfg  B</span><br></pre></td></tr></table></figure>

<ul>
<li>-Jcf abc.tar.xz：归档并调用xz进行压缩</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># tar -Jcf abc.tar.xz 1 2 3</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls</span></span><br><span class="line">1  2  3  abc.tar.bz2  abc.tar.gz  abc.tar.xz  anaconda-ks.cfg  B</span><br></pre></td></tr></table></figure>

<ul>
<li>-xf  abc.tar.gz：解压</li>
<li>-C 是指定解压后的文件放哪里</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># mkdir q</span></span><br><span class="line">[root@MR ~]<span class="comment"># tar -xf abc.tar.bz2 -C q</span></span><br><span class="line">[root@MR ~]<span class="comment"># ls q</span></span><br><span class="line">1  2  3</span><br></pre></td></tr></table></figure>

<h3 id="文本排序命令sort"><a href="#文本排序命令sort" class="headerlink" title="文本排序命令sort"></a>文本排序命令sort</h3><ul>
<li>-n 以数值大小进行排序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># vim 123</span></span><br><span class="line">12</span><br><span class="line">3</span><br><span class="line">10</span><br><span class="line">4</span><br><span class="line">7</span><br><span class="line">1</span><br><span class="line">[root@MR ~]<span class="comment"># sort -n 123</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">7</span><br><span class="line">10</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<ul>
<li>-u：去重，排序后相同的行只显示一次</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 1</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">1</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">3</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># sort -u 1</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br></pre></td></tr></table></figure>

<h3 id="文本去重命令uniq"><a href="#文本去重命令uniq" class="headerlink" title="文本去重命令uniq"></a>文本去重命令uniq</h3><blockquote>
<p>此命令要结合前面的一个命令sort -n 排序后才能使用</p>
</blockquote>
<p>​    -c：显示文件中行重复的次数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 1</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">1</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">3</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># sort -n 1 | uniq -c</span></span><br><span class="line">      2 1</span><br><span class="line">      2 3</span><br><span class="line">      1 5</span><br><span class="line">      2 7</span><br><span class="line">      2 9</span><br></pre></td></tr></table></figure>

<p>​    -d：只显示重复的行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 1</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">1</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">3</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># sort -n 1 | uniq -d</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">7</span><br><span class="line">9</span><br></pre></td></tr></table></figure>

<p>​    -u：只显示未重复的行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 1</span></span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">1</span><br><span class="line">7</span><br><span class="line">9</span><br><span class="line">3</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># sort -n 1 | uniq -u</span></span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<h3 id="cut-提取"><a href="#cut-提取" class="headerlink" title="cut 提取"></a>cut 提取</h3><blockquote>
<p>-d：指定字段为分隔符，默认是空格</p>
<p>-f：指定要显示的字段，可以是“，”，也可以是“—”</p>
<p>​    -f 1,5  显示一和五行</p>
<p>​    -f1-5   显示一到五行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cut -d: -f 1,5 /etc/passwd</span></span><br><span class="line">root:root</span><br><span class="line">bin:bin</span><br><span class="line">daemon:daemon</span><br><span class="line">adm:adm</span><br><span class="line">lp:lp</span><br><span class="line">sync:sync</span><br><span class="line">shutdown:shutdown</span><br><span class="line">halt:halt</span><br><span class="line">mail:mail</span><br><span class="line">operator:operator</span><br><span class="line">.........以下省略。。。。。。。。。。</span><br></pre></td></tr></table></figure>

<h3 id="awk-高级提取"><a href="#awk-高级提取" class="headerlink" title="awk 高级提取"></a>awk 高级提取</h3><blockquote>
<p>-F：指定字段为分隔符，默认是空格</p>
<p>NR==  ：后接数字，代表第几行</p>
<p>$ ：后接数字，代表第几列，多列之间用“，”隔开</p>
</blockquote>
<blockquote>
<p>在ifconfig中查找IP地址</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ifconfig | awk -F' ' 'NR==2 &#123;print $2&#125;'</span></span><br><span class="line">172.17.206.240</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment">#  ip a | awk 'NR==9 &#123; print $2 &#125;'| awk -F/ '&#123;print $1&#125;'</span></span><br><span class="line">192.168.83.130</span><br></pre></td></tr></table></figure>

<h3 id="sed-高级替换"><a href="#sed-高级替换" class="headerlink" title="sed 高级替换"></a>sed 高级替换</h3><blockquote>
<p>替换格式为：sed -i ‘s/需要替换的字符/替换的字符/y’ 后接文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]# cat abc</span><br><span class="line">hello nihao</span><br><span class="line">hello 123</span><br><span class="line">hello 456</span><br><span class="line">hello nihao</span><br><span class="line"></span><br><span class="line">[root@MR ~]# sed -i &apos;s/nihao/hi/g&apos; abc</span><br><span class="line">[root@MR ~]# cat abc</span><br><span class="line">hello hi</span><br><span class="line">hello 123</span><br><span class="line">hello 456</span><br><span class="line">hello hi</span><br></pre></td></tr></table></figure>

<h3 id="文件命名规范"><a href="#文件命名规范" class="headerlink" title="文件命名规范"></a>文件命名规范</h3><ul>
<li>长度不能超过255字符</li>
<li>不能使用/当文件名</li>
<li>严格区分大小写</li>
</ul>
<h3 id="文本过滤grep"><a href="#文本过滤grep" class="headerlink" title="文本过滤grep"></a>文本过滤grep</h3><blockquote>
<p>grep命令广泛用于在文本中执行关键词搜索，并且显示匹配结果</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># grep /bin/bash  /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">zhang:x:998:997::/home/zhang:/bin/bash</span><br><span class="line">zhou:x:1000:1000::/home/zhou:/bin/bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此命令广泛用于与管道符相结合使用</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat anaconda-ks.cfg | grep password</span></span><br><span class="line"><span class="comment"># Root password</span></span><br></pre></td></tr></table></figure>

<h3 id="文件查找命令find"><a href="#文件查找命令find" class="headerlink" title="文件查找命令find"></a>文件查找命令find</h3><blockquote>
<p>用于按照指定条件来查找文件</p>
</blockquote>
<ul>
<li>-name  匹配名称</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># find / -name fstab</span></span><br><span class="line">/etc/fstab</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># find / -name sda</span></span><br><span class="line">/dev/sda</span><br><span class="line">/sys/devices/pci0000:00/0000:00:10.0/host7/target7:0:0/7:0:0:0/block/sda</span><br><span class="line">/sys/block/sda</span><br><span class="line">/sys/class/block/sda</span><br></pre></td></tr></table></figure>

<ul>
<li>-user 匹配所有者</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># find / -user zhou</span></span><br><span class="line">find: ‘/proc/3238/task/3238/fd/6’: 没有那个文件或目录</span><br><span class="line">find: ‘/proc/3238/task/3238/fdinfo/6’: 没有那个文件或目录</span><br><span class="line">find: ‘/proc/3238/fd/6’: 没有那个文件或目录</span><br><span class="line">find: ‘/proc/3238/fdinfo/6’: 没有那个文件或目录</span><br><span class="line">/var/spool/mail/zhou</span><br><span class="line">/home/zhou</span><br><span class="line">/home/zhou/.bash_logout</span><br><span class="line">/home/zhou/.bash_profile</span><br><span class="line">/home/zhou/.bashrc</span><br></pre></td></tr></table></figure>

<ul>
<li>xargs 通过管道符将查找到的内容给xargs处理，后接命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># ls a</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># find / -name fstab | xargs cp -t a</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># ls a</span></span><br><span class="line">fstab</span><br></pre></td></tr></table></figure>

<h2 id="文件的层级系统"><a href="#文件的层级系统" class="headerlink" title="文件的层级系统"></a>文件的层级系统</h2><p>FHS：文件层级系统</p>
<ul>
<li>/：根分区</li>
<li>/boot：开机所需文件——内核、开机菜单以及所需要配置文件等</li>
<li>/dev：以文件形式存放任何设备与接口</li>
<li>/etc：配置文件</li>
<li>/home：普通用户的家目录</li>
<li>/root：系统管理员的家目录</li>
<li>/bin：存放单用户模式下还可以操作的命令</li>
<li>/lib：开机时用到的函数库，以及/bin与/sbin下面的命令要调用的函数</li>
<li>/sbin：开机过程中需要的命令</li>
<li>/media：挂载点目录，通常用来挂载移动硬盘</li>
<li>/mnt：挂载点目录，通常用来挂载额外的临时文件系统</li>
<li>/opt：放置第三方的软件</li>
<li>/sys：伪文件系统，跟硬盘设备文键相关的属性映射文件，不能单独分区</li>
<li>/srv：一些网络服务的数据文件目录</li>
<li>/tmp：任何人均可以使用的“共享”临时目录</li>
<li>/proc：虚拟文件系统，例如系统内核、进程、外部设备及网络状态等</li>
<li>/usr：全局共享只读文件。提供操作系统核心功能，可以单独分区</li>
<li>/usr/local：用户自行安装的软件</li>
<li>/usr/sbin：Linux系统开机时不会使用到的软件/命令/脚本</li>
<li>/usr/share：帮助与说明文档，也可放置共享文件</li>
<li>/var：主要存放经常变化的文件，如日志</li>
<li>/lost+found：当文件系统发生错误时，将一些丢失的文件片段存放在这里</li>
</ul>
<blockquote>
<p>/etc、/bin、/sbin、/lib等目录内时系统启动就需要用到的程序，这些目录不能挂载额外的分区，必须在根文件系统的分区上</p>
</blockquote>
<blockquote>
<p>/usr/bin、/usr/sbin、/usr/lib提供操作系统核心功能，/usr可以单独分区 </p>
</blockquote>
<blockquote>
<p>/usr/local/bin、/usr/local/sbin、/usr/local/lib、/usr/local/etc、/usr/local/man等等在/usr/local目录下的内容都是第三方软件，建议单独分区 </p>
</blockquote>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>【覆盖输出】：&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># ls</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># echo "1234" &gt; 123</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># ls</span></span><br><span class="line">123</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 123</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure>

<p>【追加输出】：&gt;&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 123</span></span><br><span class="line">1234</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># echo "5678" &gt;&gt; 123</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 123</span></span><br><span class="line">1234</span><br><span class="line">5678</span><br></pre></td></tr></table></figure>

<p>【错误覆盖输出】：2&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># ls</span></span><br><span class="line">123</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># ls abc</span></span><br><span class="line">ls: 无法访问abc: 没有那个文件或目录</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># ls abc 2&gt; 123</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># cat 123</span></span><br><span class="line">ls: 无法访问abc: 没有那个文件或目录</span><br></pre></td></tr></table></figure>

<p>【标准覆盖输出和错误覆盖输出到同一文件里面】：&amp;&gt;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># ls</span></span><br><span class="line">123</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># ls -l 123 abc &amp;&gt; qqq</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># cat qqq</span></span><br><span class="line">ls: 无法访问abc: 没有那个文件或目录</span><br><span class="line">-rw-r--r--. 1 root root 10 3月  25 18:38 123</span><br></pre></td></tr></table></figure>

<p>【输入重定向】：&lt;</p>
<blockquote>
<p>此输入重定向适用于mysql语句中恢复sql</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># mysql &lt; 1.sql</span></span><br></pre></td></tr></table></figure>

<h2 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h2><blockquote>
<p>命令A |命令B</p>
<p>意思就是前一个命令的结果交给后一个命令去处理</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@zhoulijie tmp]<span class="comment"># cat anaconda-ks.cfg | grep password</span></span><br><span class="line"><span class="comment"># Root password</span></span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># touch a | ls -l | tee a</span></span><br><span class="line">总用量 12</span><br><span class="line">-rw-r--r--. 1 root root  10 3月  25 18:38 123</span><br><span class="line">-rw-r--r--. 1 root root   0 3月  25 18:59 a</span><br><span class="line">-rw-------. 1 root root 810 3月  25 18:55 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  95 3月  25 18:39 qqq</span><br><span class="line">[root@zhoulijie tmp]<span class="comment"># cat a</span></span><br><span class="line">总用量 12</span><br><span class="line">-rw-r--r--. 1 root root  10 3月  25 18:38 123</span><br><span class="line">-rw-r--r--. 1 root root   0 3月  25 18:59 a</span><br><span class="line">-rw-------. 1 root root 810 3月  25 18:55 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  95 3月  25 18:39 qqq</span><br></pre></td></tr></table></figure>

<h2 id="linux下的编辑器"><a href="#linux下的编辑器" class="headerlink" title="linux下的编辑器"></a>linux下的编辑器</h2><p>linux中常见的文本编辑器有：</p>
<ul>
<li>emacs</li>
<li>pico</li>
<li>nano</li>
<li>joe</li>
<li>jed</li>
<li>vi/vim</li>
</ul>
<h3 id="vi-vim编辑器"><a href="#vi-vim编辑器" class="headerlink" title="vi/vim编辑器"></a>vi/vim编辑器</h3><blockquote>
<p>vi/vim编辑器是linux和unix上最基本的文本编辑器，工作在字符模式下。由于不需要图形界面，vi/vim是效率很高的文本编辑器。尽管在linux上也有很多图形界面的编辑器可用，但vi/vim在系统和服务器管理中的功能是那些图形编辑器所无法比拟的</p>
</blockquote>
<blockquote>
<p>vi/vim编辑器可以执行输出、删除、查找、替换、块操作等众多文本操作，而且用户可以根据自己的需要对其进行定制，这是其他编辑程序所没有的.</p>
</blockquote>
<blockquote>
<p>vim是vi的增强版，比vi更容易使用。vi的命令几乎都可以在vim上使用。</p>
</blockquote>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>vi/vim是一种纯文本编辑器，它不像word可以排版，可以调整字体大小，可以改变字体等等</li>
<li>vi/vim只是一个文本编辑工具，只能对文本的内容进行操作，比如新增内容、修改内容、删除内容等等</li>
<li>全屏幕显示</li>
</ul>
<h4 id="vi-vim的三种编辑模式"><a href="#vi-vim的三种编辑模式" class="headerlink" title="vi/vim的三种编辑模式"></a>vi/vim的三种编辑模式</h4><ul>
<li>末行模式</li>
<li>命令模式</li>
<li>输入模式</li>
</ul>
<p>三者的作用：</p>
<ul>
<li>末行模式：用于查找文本、保存修改等等</li>
<li>命令模式：用户执行，比如复制、粘贴行等等</li>
<li>输入模式：用于输入文本、修改文本等等</li>
</ul>
<h4 id="vi-vim三者之间的切换方式"><a href="#vi-vim三者之间的切换方式" class="headerlink" title="vi/vim三者之间的切换方式"></a>vi/vim三者之间的切换方式</h4><ul>
<li>命令模式到输入模式</li>
</ul>
<p>按”i”跳转到当前光标所在行的行首</p>
<p>按”a”调转到当前光标所在行的行位</p>
<p>按”o”在当前光标所在行的下方再新建一行并跳转到那一行</p>
<ul>
<li>输入模式到命令模式</li>
</ul>
<p>按”Esc”键</p>
<ul>
<li>命令模式到末行模式</li>
</ul>
<p>按ctrl“+”:”键</p>
<ul>
<li>末行模式到命令模式</li>
</ul>
<p>狂按”Esc”键</p>
<h4 id="关闭文件方式"><a href="#关闭文件方式" class="headerlink" title="关闭文件方式"></a>关闭文件方式</h4><p>在末行文件下关闭文件：</p>
<ul>
<li>q   退出</li>
<li>w   保存</li>
<li>wq  保存并退出</li>
<li>q!  强制退出</li>
</ul>
<p>在命令模式下关闭文件</p>
<ul>
<li>zz</li>
</ul>
<h4 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h4><ul>
<li>K ：向上移动</li>
<li>J ：向下移动</li>
<li>H：向左移动</li>
<li>L：向右移动</li>
<li>10 gg 跳转到10行（输入数字几，再按gg就代表跳多少行</li>
</ul>
<ul>
<li>dd ：删除当前光标所在行一整行</li>
<li>1,3d ：表示删除第一行到第三行</li>
</ul>
<ul>
<li>复制命令：yy</li>
<li>粘贴命令：p</li>
</ul>
<ul>
<li>替换：r</li>
</ul>
<p>r#：将当前光标的字符替换成为#，这里的#可以是任意字符</p>
<ul>
<li>撤销：u</li>
</ul>
<p>ctrl+r：还原最近一次撤销操作</p>
<ul>
<li>重复前一次编辑操作：.</li>
</ul>
<ul>
<li>文本查找：/字符 或者 ？字符</li>
</ul>
<p>/ 字符：从上往下查找这个字符并高亮显示</p>
<p>？字符：从下往上查找这个字符并高亮显示</p>
<ul>
<li>查找并替换：s///g</li>
</ul>
<blockquote>
<p>此命令只能在末行模式下使用 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line">5678</span><br><span class="line">1234</span><br><span class="line">5678</span><br><span class="line">1234</span><br><span class="line">5678</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">:1,4 s/1234/abcd/g</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">abcd</span><br><span class="line">5678</span><br><span class="line">abcd</span><br><span class="line">5678</span><br><span class="line">1234</span><br><span class="line">5678</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">:1,4 s/1234/abcd/g                                            3,1          全部</span><br></pre></td></tr></table></figure>

<ul>
<li>末行模式下显示或取消显示行号</li>
</ul>
<p>set nu    显示行号</p>
<p>set nonu   取消显示行号</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/3.linux--linux基础/" data-id="ck627jzwl003vu4u6wcoe5mbe"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux基础/">linux基础</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-2.基础linux命令" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/2.基础linux命令/"
    >Linux基础命令</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/2.基础linux命令/" class="article-date">
  <time datetime="2019-08-29T15:44:18.523Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux基础/">linux基础</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="man-查询命令"><a href="#man-查询命令" class="headerlink" title="man 查询命令"></a>man 查询命令</h3><blockquote>
<p>man是一种查询帮助命令，当你不知道这么命令后的参数，可用man命令来查看。</p>
<p>例如下面我输出了”man ls” 查询ls-man的帮助文档（里面介绍了ls各种详细信息)。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># man ls</span></span><br><span class="line">LS(1)                            User Commands                           LS(1)</span><br><span class="line">NAME</span><br><span class="line">       ls - list directory contents</span><br><span class="line">SYNOPSIS</span><br><span class="line">       ls [OPTION]... [FILE]...</span><br><span class="line"></span><br><span class="line">-a, --all</span><br><span class="line">              <span class="keyword">do</span> not ignore entries starting with .</span><br><span class="line">       -A, --almost-all</span><br><span class="line">              <span class="keyword">do</span> not list implied . and ..</span><br></pre></td></tr></table></figure>

<h3 id="echo-输出"><a href="#echo-输出" class="headerlink" title="echo 输出"></a>echo 输出</h3><blockquote>
<p>echo 就是一个输出命令，可别小看这个输出命令，在后面脚本文件运用的可相当多。</p>
<p>例如下面我将输入echo的一些简单用法</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># echo 123</span></span><br><span class="line">123</span><br><span class="line">[root@MR ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br><span class="line">[root@MR ~]<span class="comment"># [ $USER = root ] &amp;&amp; echo "Admin" || echo "User"</span></span><br><span class="line">Admin   <span class="comment">#在此解析此含义：此时用户是不是root，如果是，则输出“Admin”，反之则输出“user”</span></span><br></pre></td></tr></table></figure>

<h3 id="date-显示时间"><a href="#date-显示时间" class="headerlink" title="date 显示时间"></a>date 显示时间</h3><blockquote>
<p>date为显示时间命令，单独输入显示如下</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># date</span></span><br><span class="line">2019年 03月 13日 星期三 02:18:20 CST</span><br></pre></td></tr></table></figure>

<blockquote>
<p>哇，怎么才13号凌晨两点钟，现在才是北京时间14号18点50分啊</p>
<p>那我们就来更改一下吧</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># date -s "20190314 18:50:00"</span></span><br><span class="line">2019年 03月 14日 星期四 18:50:00 CST</span><br></pre></td></tr></table></figure>

<h3 id="reboot-重启"><a href="#reboot-重启" class="headerlink" title="reboot 重启"></a>reboot 重启</h3><blockquote>
<p>用于重启系统，这个就在此不演示</p>
</blockquote>
<h3 id="poweroff-关机"><a href="#poweroff-关机" class="headerlink" title="poweroff 关机"></a>poweroff 关机</h3><blockquote>
<p>关机命令，但我习惯使用“shutdown +0” ，后面加几就代表几分钟后面关机，加0就是立马关机，例如下面我设置100分钟后关机</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># shutdown +100</span></span><br><span class="line">Shutdown scheduled <span class="keyword">for</span> 四 2019-03-14 20:46:02 CST, use <span class="string">'shutdown -c'</span> to cancel.    <span class="comment">#含义就是将在20点46分执行关机，如果你想取消请执行'shutdown -c'</span></span><br><span class="line">[root@MR ~]<span class="comment"># shutdown -c</span></span><br><span class="line">Broadcast message from root@MR.ZLJ (Thu 2019-03-14 19:07:19 CST):</span><br><span class="line">The system shutdown has been cancelled at Thu 2019-03-14 19:08:19 CST!</span><br><span class="line"><span class="comment"># 这里就提示了系统关闭已于2019-03-14星期四19:08:19 CST取消！</span></span><br></pre></td></tr></table></figure>

<h3 id="wget-下载"><a href="#wget-下载" class="headerlink" title="wget 下载"></a>wget 下载</h3><blockquote>
<p>下载命令，后接下载地址，下面介绍一些常用的参数</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># wget http://mirrors.aliyun.com/repo/Centos-6.repo</span></span><br><span class="line"><span class="comment"># 直接下载</span></span><br><span class="line">[root@MR ~]<span class="comment"># wget -O CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</span></span><br><span class="line"><span class="comment"># -O CentOS-Base.repo表示下载之后以CentOS-Base.repo来命名</span></span><br><span class="line">[root@MR ~]<span class="comment"># wget -r -p http://mirrors.aliyun.com</span></span><br><span class="line"><span class="comment"># -r -p递归下载网站里所有内容</span></span><br></pre></td></tr></table></figure>

<h3 id="ps-显示进程"><a href="#ps-显示进程" class="headerlink" title="ps 显示进程"></a>ps 显示进程</h3><blockquote>
<p>含义：查看系统中进程状态</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ps</span></span><br><span class="line">   PID TTY          TIME CMD</span><br><span class="line">  3492 pts/0    00:00:00 bash</span><br><span class="line">  3514 pts/0    00:00:00 ps</span><br><span class="line">  <span class="comment"># 单独输出是这样</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面主要用于查看哪些东西在运行，然后我们不要的可以用Kill+PID来结束</p>
<p>ps有三个常用参数：</p>
<p>-a:显示所有进程（包括其他用户的进程）   </p>
<p>-u:用户以及其他详细信息   </p>
<p>-x:显示没有控制终端的进程</p>
<p>大多数情况，我们都是将-a、-u、-x连在一起使用：-aux</p>
<p>下面我们来敲打吧。。。。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ps -aux</span></span><br><span class="line">  USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">  root          1  0.0  0.3  49988  6412 ?        Ss   15:01   0:01 /usr/lib/syste</span><br><span class="line">  root          2  0.0  0.0      0     0 ?        S    15:01   0:00 [kthreadd]</span><br><span class="line">  root          3  0.0  0.0      0     0 ?        S    15:01   0:00 [ksoftirqd/0]</span><br><span class="line">  root          5  0.0  0.0      0     0 ?        S&lt;   15:01   0:00 [kworker/0:0H]</span><br><span class="line">  ......................以下省略好多条........................</span><br></pre></td></tr></table></figure>

<blockquote>
<p>? 这么多，让我看到猴年马月吗？</p>
<p>然而并不是，其实ps是与后面管道符搭配使用，用来抓取与某一个指定服务进程相对应的PID号码。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left"><strong>USER：进程的所有者</strong></th>
<th align="left"><strong>TTY：所在终端</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>PID：进程ID号</strong></td>
<td align="left"><strong>STAT：进程状态</strong></td>
</tr>
<tr>
<td align="left"><strong>%CPU：运算器占用率</strong></td>
<td align="left"><strong>START：被启动的时间</strong></td>
</tr>
<tr>
<td align="left"><strong>%MEM：内存占用率</strong></td>
<td align="left"><strong>TIME：实际使用CPU的时间</strong></td>
</tr>
<tr>
<td align="left"><strong>VSZ：虚拟内存使用量（KB）</strong></td>
<td align="left"><strong>COMMAND：命令名称与参数</strong></td>
</tr>
<tr>
<td align="left"><strong>RSS：占用的固定内存量（KB）</strong></td>
<td align="left"></td>
</tr>
</tbody></table>
<blockquote>
<p>上面这些含义我们只需要混一个脸熟就可以了，下面这就就需要我们详细的记住了：</p>
<p>R(运行)：进程正在运行或在运行队列中等待 </p>
<p>S(中断)：进程处于休眠中，当某个条件形成后或者接收到信号时，则脱离该状态</p>
<p>D(不可中断)：进程不响应系统异步信号，即便用kill命令也不能将其中断</p>
<p>Z(僵尸)：进程已经终止，但进程描述符依然存在, 直到父进程调用wait4()系统函数后将进程释放 </p>
<p>T(停止)：进程收到停止信号后停止运行 </p>
</blockquote>
<h3 id="top-动态显示进程"><a href="#top-动态显示进程" class="headerlink" title="top 动态显示进程"></a>top 动态显示进程</h3><blockquote>
<p>动态监视进程活动与系统负载，我们亲切地称之它为强化版的windows中的任务管理器，怎么个强化法，往下看吧。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># top</span></span><br><span class="line">top - 20:30:05 up  5:28,  3 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks: 407 total,   2 running, 405 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem:   1870760 total,   313124 used,  1557636 free,      780 buffers</span><br><span class="line">KiB Swap:  2097148 total,        0 used,  2097148 free.   100424 cached Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">     1 root      20   0   49988   6412   3716 S  0.0  0.3   0:01.62 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S  0.0  0.0   0:00.02 kthreadd</span><br><span class="line">     3 root      20   0       0      0      0 S  0.0  0.0   0:00.01 ksoftirqd/0</span><br><span class="line">     5 root       0 -20       0      0      0 S  0.0  0.0   0:00.00 kworker/0:+</span><br><span class="line"><span class="comment"># 此时我这里就一个进程在启用，其余为0的都为停止或者等待为用户服务</span></span><br><span class="line"><span class="comment"># -20 所代表优先级最高</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>第1行：系统时间、运行时间、登录终端数、系统负载（三个数值分别为1分钟、5分钟、15分钟内负载情况，</p>
<p>第2行：进程总数、运行中的进程数、睡眠中的进程数、停止的进程数、僵死的进程数 </p>
<p>第3行：用户占用资源百分比、系统内核占用资源百分比、正在占用的百分比、资源空闲百分比 </p>
<p>第4行：物理内存总量、内存使用量、内存空闲量、作为内核缓存的内存量</p>
<p>第5行：虚拟内存总量、虚拟内存使用量、虚拟内存空闲量、已被提前加载的内存量 </p>
</blockquote>
<h3 id="pidof-后面接服务来查看PID"><a href="#pidof-后面接服务来查看PID" class="headerlink" title="pidof 后面接服务来查看PID"></a>pidof 后面接服务来查看PID</h3><blockquote>
<p>用于查询某个服务进程的PID，每个PID如同身份证一样是唯一的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># pidof top</span></span><br><span class="line">3645</span><br></pre></td></tr></table></figure>

<h3 id="kill-终止PID"><a href="#kill-终止PID" class="headerlink" title="kill 终止PID"></a>kill 终止PID</h3><blockquote>
<p>用于终止某个服务进程的PID</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># kill 3685</span></span><br><span class="line">[root@MR ~]<span class="comment"># pidof top</span></span><br><span class="line">[root@MR ~]<span class="comment">#</span></span><br><span class="line"><span class="comment">#终止之后，我们在来查看，这里就看不到top正在运行了</span></span><br></pre></td></tr></table></figure>

<h3 id="killall终止服务所有PID"><a href="#killall终止服务所有PID" class="headerlink" title="killall终止服务所有PID"></a>killall终止服务所有PID</h3><blockquote>
<p>有些服务，它的进程PID值远远不止一个，怎样去结束他们呢，我们可用killall来终止这种服务，那么顾名思义，killall就是某个服务的全部进程</p>
</blockquote>
<h3 id="ifconfig-查看网卡配置"><a href="#ifconfig-查看网卡配置" class="headerlink" title="ifconfig 查看网卡配置"></a>ifconfig 查看网卡配置</h3><blockquote>
<p>用于获取网卡配置与网络状态等信息 </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eno16777736: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:0c:29:b6:10:19 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.233.132/24 brd 192.168.233.255 scope global dynamic eno16777736</span><br><span class="line">       valid_lft 1290sec preferred_lft 1290sec</span><br><span class="line">    inet6 fe80::20c:29ff:feb6:1019/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"># 由于我使用的是文本界面，是不带GUI的，所以只能使用&quot;ip a&quot;供大家查看，具体可以在图形化界面中输入&quot;ifconfig&quot;查看</span><br></pre></td></tr></table></figure>

<h3 id="uname-查看内核信息"><a href="#uname-查看内核信息" class="headerlink" title="uname 查看内核信息"></a>uname 查看内核信息</h3><blockquote>
<p>用于查看内核与版本信息，常常在后面接 -a</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># uname</span></span><br><span class="line">Linux</span><br><span class="line">[root@MR ~]<span class="comment"># uname -a</span></span><br><span class="line">Linux MR.ZLJ 3.10.0-123.el7.x86_64 <span class="comment">#1 SMP Mon May 5 11:16:57 EDT 2014 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure>

<h3 id="uptime-显示top的第一行"><a href="#uptime-显示top的第一行" class="headerlink" title="uptime 显示top的第一行"></a>uptime 显示top的第一行</h3><blockquote>
<p>查看系统的内核负载信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># uptime</span></span><br><span class="line"> 21:22:18 up  6:20,  3 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">   时间     运行了多久  开了几个终端       最近1分钟，5分钟，15分钟 </span><br><span class="line"><span class="comment">#此命令相当于top命令的第一行</span></span><br></pre></td></tr></table></figure>

<h3 id="free-查看内存信息"><a href="#free-查看内存信息" class="headerlink" title="free 查看内存信息"></a>free 查看内存信息</h3><blockquote>
<p>显示当前系统中内存的使用量信息 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># free</span></span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:       1870760     327300    1543460       8752        792     113392</span><br><span class="line">-/+ buffers/cache:     213116    1657644</span><br><span class="line">Swap:      2097148          0    2097148</span><br></pre></td></tr></table></figure>

<blockquote>
<p>天啊！这是啥，我怎么看不懂，这要一个个的数单位吗？</p>
<p>其实不用，下面我将会 用”-h” 人性化的角度来显示</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># free -h</span></span><br><span class="line">            内存总量    已用量      可用量 进程共享的内存量 磁盘缓存的内存量 缓存的内存量</span><br><span class="line">             total       used    free      shared          buffers        cached</span><br><span class="line">Mem:          1.8G       319M    1.5G       8.5M             792K          110M</span><br><span class="line">-/+ buffers/cache:       208M    1.6G</span><br><span class="line">Swap:         2.0G         0B    2.0G</span><br></pre></td></tr></table></figure>

<h3 id="who-谁（此时为哪个用户）"><a href="#who-谁（此时为哪个用户）" class="headerlink" title="who 谁（此时为哪个用户）"></a>who 谁（此时为哪个用户）</h3><blockquote>
<p>用于查看当前登入主机的用户终端信息 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># who</span></span><br><span class="line">root     tty1         2019-03-12 22:34</span><br><span class="line">root     pts/0        2019-03-14 19:44 (192.168.233.1)</span><br><span class="line"><span class="comment"># 我正在使用putty.exe 远程链接此系统</span></span><br></pre></td></tr></table></figure>

<h3 id="last-查看当前系统的登陆记录"><a href="#last-查看当前系统的登陆记录" class="headerlink" title="last  查看当前系统的登陆记录"></a>last  查看当前系统的登陆记录</h3><blockquote>
<p>用于查看所有系统的登录记录 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># last</span></span><br><span class="line">root     pts/1        192.168.233.1    Thu Mar 14 21:03 - 21:03  (00:00)</span><br><span class="line">root     pts/1        192.168.233.1    Thu Mar 14 20:57 - 20:58  (00:00)</span><br><span class="line">root     pts/1        192.168.233.1    Thu Mar 14 20:55 - 20:57  (00:01)</span><br><span class="line">......................以下省略好多条........................</span><br><span class="line">wtmp begins Wed Mar  6 16:48:05 2019</span><br><span class="line"><span class="comment">#于2019年3月6日星期三16:48:05开始</span></span><br></pre></td></tr></table></figure>

<h3 id="history-查看历史命令"><a href="#history-查看历史命令" class="headerlink" title="history  查看历史命令"></a>history  查看历史命令</h3><blockquote>
<p>用于显示历史执行过的命令 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  sudo useradd huangbichun</span><br><span class="line">    2  <span class="built_in">cd</span> huangbichun</span><br><span class="line">......................以下省略好多条........................</span><br><span class="line">  543  who</span><br><span class="line">  544  last</span><br><span class="line">  545  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>再次执行那一条命令可以用”!+数字 “</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># !543</span></span><br><span class="line">who</span><br><span class="line">root     tty1         2019-03-12 22:34</span><br><span class="line">root     pts/0        2019-03-14 19:44 (192.168.233.1)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>清除历史命令可用”history -c”</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># history -c</span></span><br><span class="line">[root@MR ~]<span class="comment"># history</span></span><br><span class="line">    1  <span class="built_in">history</span></span><br></pre></td></tr></table></figure>

<h3 id="sosreport-收集系统信息"><a href="#sosreport-收集系统信息" class="headerlink" title="sosreport  收集系统信息"></a>sosreport  收集系统信息</h3><blockquote>
<p>用于收集系统配置及架构信息并输出诊断文档 </p>
</blockquote>
<h3 id="pwd-显示当前所在目录"><a href="#pwd-显示当前所在目录" class="headerlink" title="pwd  显示当前所在目录"></a>pwd  显示当前所在目录</h3><blockquote>
<p>显示用户当前所处的工作目录 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br><span class="line">[root@MR ~]<span class="comment"># cd /home</span></span><br><span class="line">[root@MR home]<span class="comment"># pwd</span></span><br><span class="line">/home</span><br></pre></td></tr></table></figure>

<h3 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd  切换目录"></a>cd  切换目录</h3><blockquote>
<p>用于切换工作路径 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cd /home</span></span><br></pre></td></tr></table></figure>

<h3 id="ls-列出当前目录下的文件"><a href="#ls-列出当前目录下的文件" class="headerlink" title="ls  列出当前目录下的文件"></a>ls  列出当前目录下的文件</h3><blockquote>
<p>用于显示目录中的文件信息 </p>
<p>-a :查看全部文件（包括隐藏文件）</p>
<p>-l：查看文件的属性、大小等详细信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># ls -a</span></span><br><span class="line">.                .bash_history </span><br><span class="line">..               .bash_logout   .cshrc .tcshrc</span><br><span class="line">2019-03-09-测试  .bash_profile   .viminfo</span><br><span class="line">anaconda-ks.cfg  .bashrc         </span><br><span class="line">[root@MR ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 24</span><br><span class="line">drwxr-xr-x. 2 root root     6 3月  12 22:38 2019-03-09-测试</span><br><span class="line">-rw-------. 1 root root   810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">[root@MR ~]<span class="comment"># ls -al</span></span><br><span class="line">总用量 68</span><br><span class="line">dr-xr-x---.  5 root root  4096 3月  14 19:17 .</span><br><span class="line">drwxr-xr-x. 17 root root  4096 3月  15 18:09 ..</span><br><span class="line">drwxr-xr-x.  2 root root     6 3月  12 22:38 2019-03-09-测试</span><br><span class="line">-rw-------.  1 root root   810 3月   6 16:33 anaconda-ks.cfg</span><br><span class="line">-rw-------.  1 root root  7368 3月  14 22:16 .bash_history</span><br><span class="line">-rw-r--r--.  1 root root    18 12月 29 2013 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root   176 12月 29 2013 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root   224 3月   7 21:59 .bashrc</span><br><span class="line">-rw-r--r--.  1 root root   100 12月 29 2013 .cshrc</span><br><span class="line">-rw-r--r--.  1 root root    15 3月   7 21:44 passwod</span><br><span class="line">-rw-r--r--.  1 root root   129 12月 29 2013 .tcshrc</span><br><span class="line">-rw-------.  1 root root  5656 3月  11 17:44 .viminfo</span><br></pre></td></tr></table></figure>

<h3 id="cat-查看文本文件（适用于短文本）"><a href="#cat-查看文本文件（适用于短文本）" class="headerlink" title="cat  查看文本文件（适用于短文本）"></a>cat  查看文本文件（适用于短文本）</h3><blockquote>
<p>查看纯文本文件 (适合内容较少)</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line">......................以下省略好多条........................</span><br></pre></td></tr></table></figure>

<blockquote>
<p>天啊！这么多，我只想要中间的一行，怎么办，没事，Linux中每一个命令都有参数，那么我们接下来看吧。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat -n CentOS-Base.repo</span></span><br><span class="line">     1  <span class="comment"># CentOS-Base.repo</span></span><br><span class="line">     2  <span class="comment">#</span></span><br><span class="line">     3  <span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line">......................以下省略好多条........................</span><br><span class="line">    61  enabled=0</span><br><span class="line">    62  gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样我们就可以清晰的看到有多少行数据了</p>
</blockquote>
<h3 id="more-查看文本文件-适用于长文本"><a href="#more-查看文本文件-适用于长文本" class="headerlink" title="more  查看文本文件(适用于长文本)"></a>more  查看文本文件(适用于长文本)</h3><blockquote>
<p> 以百分比、翻页形式查看</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># more CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line">--More--(32%)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果我们不想看，可以按下字母q退出，或者按ctrl+c</p>
</blockquote>
<h3 id="head-查看一定行数"><a href="#head-查看一定行数" class="headerlink" title="head  查看一定行数"></a>head  查看一定行数</h3><blockquote>
<p>默认下显示前十行，我们也可以输入-n 【输入一个数字】来查看你想要看到的前多少行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># head CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line">......................以下省略7条........................</span><br><span class="line">[root@MR ~]<span class="comment"># head -n 1 CentOS-Base.repo</span></span><br><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br></pre></td></tr></table></figure>

<h3 id="tail-查看一定行数"><a href="#tail-查看一定行数" class="headerlink" title="tail   查看一定行数"></a>tail   查看一定行数</h3><blockquote>
<p>默认下只显示后十行，我们也可以输入-n 【输入一个数字】来查看你想要看到的后多少行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># tail CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#contrib - packages by Centos Users</span></span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Contrib - mirrors.aliyun.com</span><br><span class="line">......................以下省略7条........................</span><br><span class="line">[root@MR ~]<span class="comment"># tail -n 1 CentOS-Base.repo</span></span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>

<h3 id="tr-替换文本文件中的字符"><a href="#tr-替换文本文件中的字符" class="headerlink" title="tr  替换文本文件中的字符"></a>tr  替换文本文件中的字符</h3><blockquote>
<p>用于替换文本文件文件中的字符</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cat 1</span></span><br><span class="line">a b c d</span><br><span class="line">[root@MR ~]<span class="comment"># cat 1 | tr [a-d] [A-D]</span></span><br><span class="line">A B C D</span><br></pre></td></tr></table></figure>

<h3 id="wc-用于统计文本文件的行数、字数、字节数"><a href="#wc-用于统计文本文件的行数、字数、字节数" class="headerlink" title="wc 用于统计文本文件的行数、字数、字节数"></a>wc 用于统计文本文件的行数、字数、字节数</h3><blockquote>
<p>用于统计指定文本的行数、字数、字节数</p>
<p>-l 只显示行数</p>
<p>-w 只显示单词数</p>
<p>-c 只显示字节数</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例如我现在来统计刚才这个1文本</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -l 1</span></span><br><span class="line">1 1</span><br><span class="line"><span class="comment">#1这个文本只有一行</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -w 1</span></span><br><span class="line">4 1</span><br><span class="line"><span class="comment">#1这个文本只有4个单词</span></span><br><span class="line">[root@MR ~]<span class="comment"># wc -c 1</span></span><br><span class="line">9 1</span><br><span class="line"><span class="comment">#1这个文本只有9个字节</span></span><br></pre></td></tr></table></figure>

<h3 id="stat-查看文件的时间"><a href="#stat-查看文件的时间" class="headerlink" title="stat   查看文件的时间"></a>stat   查看文件的时间</h3><blockquote>
<p>用于查看文件的具体储存信息和时间等信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># stat 1</span></span><br><span class="line">  文件：<span class="string">"1"</span></span><br><span class="line">  大小：9               块：8          IO 块：4096   普通文件</span><br><span class="line">设备：fd00h/64768d      Inode：68107948    硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">环境：unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">最近访问：2019-03-16 18:12:24.024958722 +0800</span><br><span class="line">最近更改：2019-03-16 18:12:24.024958722 +0800</span><br><span class="line">最近改动：2019-03-16 18:12:24.025958722 +0800</span><br><span class="line">创建时间：-</span><br></pre></td></tr></table></figure>

<h3 id="cut-按列来提取文本字符"><a href="#cut-按列来提取文本字符" class="headerlink" title="cut   按列来提取文本字符"></a>cut   按列来提取文本字符</h3><blockquote>
<p>以一列两列来提取文本里面的信息</p>
<p>-d 后接某一字节符号来设置间隔</p>
<p>-f 后接数字来提取多少列</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># cut -d: -f1 /etc/passwd</span></span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line">sync</span><br><span class="line">shutdown</span><br><span class="line">......................以下省略........................</span><br></pre></td></tr></table></figure>

<h3 id="diff-用于对比文本文件的差异"><a href="#diff-用于对比文本文件的差异" class="headerlink" title="diff  用于对比文本文件的差异"></a>diff  用于对比文本文件的差异</h3><blockquote>
<p>用于对比文件的差异</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># ls</span></span><br><span class="line">a  A</span><br><span class="line">[root@MR 12]<span class="comment"># cat a</span></span><br><span class="line">a b c d</span><br><span class="line">[root@MR 12]<span class="comment"># cat A</span></span><br><span class="line">A B C D</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># diff --brief a A</span></span><br><span class="line">文件 a 和 A 不同</span><br><span class="line"></span><br><span class="line">[root@MR 12]<span class="comment"># diff -c a A</span></span><br><span class="line">*** a   2019-03-16 18:24:24.139918637 +0800</span><br><span class="line">--- A   2019-03-16 18:24:38.922917814 +0800</span><br><span class="line">***************</span><br><span class="line">*** 1 ****</span><br><span class="line">! a b c d</span><br><span class="line">--- 1 ----</span><br><span class="line">! A B C D</span><br></pre></td></tr></table></figure>

<h3 id="touch-创建文本文件"><a href="#touch-创建文本文件" class="headerlink" title="touch   创建文本文件"></a>touch   创建文本文件</h3><blockquote>
<p>用于创建文本文件，并且可以结合date创建以时间开头的文本文件</p>
</blockquote>
<blockquote>
<p>-a 只修改读取时间</p>
<p>-m 只修改修改时间</p>
<p>-d 同时修改读取时间又修改修改时间</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># touch 5</span></span><br><span class="line">[root@MR 12]<span class="comment"># ls -l 5</span></span><br><span class="line">-rw-r--r--. 1 root root 0 3月  16 18:29 5</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># echo “132ewfwefwef” &gt;&gt; 5</span></span><br><span class="line">[root@MR 12]<span class="comment"># cat 5</span></span><br><span class="line">“132ewfwefwef”</span><br><span class="line">[root@MR 12]<span class="comment"># ls -l 5</span></span><br><span class="line">-rw-r--r--. 1 root root 19 3月  16 18:32 5</span><br><span class="line">[root@MR 12]<span class="comment"># touch -d "18:29" 5</span></span><br><span class="line">[root@MR 12]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 19 3月  16 18:29 5</span><br></pre></td></tr></table></figure>

<h3 id="mkdir-创建文件夹"><a href="#mkdir-创建文件夹" class="headerlink" title="mkdir   创建文件夹"></a>mkdir   创建文件夹</h3><blockquote>
<p>用于创建空白的目录</p>
<p>-p 一次性创建多个目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># mkdir 10</span></span><br><span class="line">[root@MR 12]<span class="comment"># ls</span></span><br><span class="line">10  5</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 10]<span class="comment"># mkdir -p a/&#123;b,c/&#123;d,e&#125;&#125;</span></span><br><span class="line">[root@MR 10]<span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">└── a</span><br><span class="line">    ├── b</span><br><span class="line">    └── c</span><br><span class="line">        ├── d</span><br><span class="line">        └── e</span><br><span class="line"></span><br><span class="line">5 directories, 0 files</span><br></pre></td></tr></table></figure>

<h3 id="cp-复制"><a href="#cp-复制" class="headerlink" title="cp   复制"></a>cp   复制</h3><blockquote>
<p>复制命令   可以复制文件，也可以复制目录</p>
</blockquote>
<blockquote>
<p>-p 保留原始文件的属性</p>
<p>-d 若对象为“链接文件”，则保留该“链接文件”的属性 </p>
<p>-r 递归持续复制（用于目录）</p>
<p>-i 若目标文件存在则询问是否覆盖</p>
<p>-a 相当于-pdr（p、d、r为上述参数）</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 10]<span class="comment"># cp 1 2</span></span><br><span class="line">[root@MR 10]<span class="comment"># ls</span></span><br><span class="line">1  2  a</span><br></pre></td></tr></table></figure>

<h3 id="mv-剪切（移动）"><a href="#mv-剪切（移动）" class="headerlink" title="mv   剪切（移动）"></a>mv   剪切（移动）</h3><blockquote>
<p>剪切文件或者移动文件或者将文件重命名</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 10]<span class="comment"># mv 1 3</span></span><br><span class="line">[root@MR 10]<span class="comment"># ls</span></span><br><span class="line">2  3  a</span><br></pre></td></tr></table></figure>

<h3 id="rm-删除"><a href="#rm-删除" class="headerlink" title="rm   删除"></a>rm   删除</h3><blockquote>
<p>用于删除文件的命令，这个命令就不用我过多介绍吧</p>
<p>-r 删除目录</p>
<p>-f 强制删除</p>
</blockquote>
<h3 id="dd-类似于提取"><a href="#dd-类似于提取" class="headerlink" title="dd  类似于提取"></a>dd  类似于提取</h3><blockquote>
<p>按照指定大小和个数的数据块来复制文件或转换文件</p>
<p>if 输入的文件名称</p>
<p>of 输出的文件名称</p>
<p>bs 设置每个‘块’大小</p>
<p>count 设置要复制‘块’的个数</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># dd if=/dev/sda of=111_file count=1 bs=125M</span></span><br><span class="line">记录了1+0 的读入</span><br><span class="line">记录了1+0 的写出</span><br><span class="line">131072000字节(131 MB)已复制，3.35874 秒，39.0 MB/秒</span><br></pre></td></tr></table></figure>

<h3 id="file-查看文件类型"><a href="#file-查看文件类型" class="headerlink" title="file   查看文件类型"></a>file   查看文件类型</h3><blockquote>
<p>用于查看文件的类型 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@MR ~]<span class="comment"># file /home</span></span><br><span class="line">/home: directory</span><br><span class="line">[root@MR ~]<span class="comment"># file 1</span></span><br><span class="line">1: ASCII text</span><br></pre></td></tr></table></figure>

<h3 id="tar-压缩（解压）"><a href="#tar-压缩（解压）" class="headerlink" title="tar   压缩（解压）"></a>tar   压缩（解压）</h3><blockquote>
<p>-c   创建压缩文件 </p>
<p>-x   解开压缩文件  </p>
<p>-z   用Gzip压缩或解压 </p>
<p>-v  显示压缩或解压的过程 </p>
<p>-f   目标文件名</p>
<p>-C  指定解压到的目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">压缩：</span><br><span class="line">[root@MR 12]<span class="comment"># tar -czvf 10.tar.gz 10</span></span><br><span class="line">10/</span><br><span class="line">10/a/</span><br><span class="line">10/a/b/</span><br><span class="line">10/a/c/</span><br><span class="line">10/a/c/d/</span><br><span class="line">10/a/c/e/</span><br><span class="line">10/2</span><br><span class="line">10/3</span><br><span class="line">[root@MR 12]<span class="comment"># ls</span></span><br><span class="line">10  10.tar.gz  5</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">解压至/home目录：</span><br><span class="line">[root@MR 12]<span class="comment"># tar xzvf 10.tar.gz -C /home</span></span><br><span class="line">10/</span><br><span class="line">10/a/</span><br><span class="line">10/a/b/</span><br><span class="line">10/a/c/</span><br><span class="line">10/a/c/d/</span><br><span class="line">10/a/c/e/</span><br><span class="line">10/2</span><br><span class="line">10/3</span><br><span class="line">[root@MR 12]<span class="comment"># ls /home</span></span><br><span class="line">10  zhou</span><br></pre></td></tr></table></figure>

<h3 id="grep-在文本文件中执行关键词搜索"><a href="#grep-在文本文件中执行关键词搜索" class="headerlink" title="grep   在文本文件中执行关键词搜索"></a>grep   在文本文件中执行关键词搜索</h3><blockquote>
<p>-d  将可执行文件（binary）当作文本文件（text）来搜索</p>
<p>-c   仅显示找到的行数</p>
<p>-i    忽略大小写 </p>
<p>-n   显示行号</p>
<p>-v   反向选择—仅列出没有“关键词”的行 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># grep /sbin/nologin /etc/passwd</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">......................以下省略........................</span><br></pre></td></tr></table></figure>

<h3 id="find-按照指定的条件来查找文件"><a href="#find-按照指定的条件来查找文件" class="headerlink" title="find   按照指定的条件来查找文件"></a>find   按照指定的条件来查找文件</h3><table>
<thead>
<tr>
<th>-name</th>
<th>匹配名称</th>
</tr>
</thead>
<tbody><tr>
<td>-perm</td>
<td>匹配权限（mode为完全匹配，-mode为包含即可）</td>
</tr>
<tr>
<td>-user</td>
<td>匹配所有者</td>
</tr>
<tr>
<td>-group</td>
<td>匹配所有组</td>
</tr>
<tr>
<td>-mtime -n +n</td>
<td>匹配修改内容的时间（-n指n天以内，+n指n天以前）</td>
</tr>
<tr>
<td>-atime -n +n</td>
<td>匹配访问文件的时间（-n指n天以内，+n指n天以前）</td>
</tr>
<tr>
<td>-ctime -n +n</td>
<td>匹配修改文件权限的时间（-n指n天以内，+n指n天以前）</td>
</tr>
<tr>
<td>-nouser</td>
<td>匹配无所有者的文件</td>
</tr>
<tr>
<td>-nogroup</td>
<td>匹配无所有组的文件</td>
</tr>
<tr>
<td>-newer f1 !f2 ent–&gt;</td>
<td>匹配比文件f1新但比f2旧的文件</td>
</tr>
<tr>
<td>–type b/d/c/p/l/f</td>
<td>匹配文件类型（后面的字母参数依次表示块设备、目录、字符设备、管道、链接文件、文本文件）</td>
</tr>
<tr>
<td>-size</td>
<td>匹配文件的大小（+50KB为查找超过50KB的文件，而-50KB为查找小于50KB的文件）</td>
</tr>
<tr>
<td>-prune</td>
<td>忽略某个目录</td>
</tr>
<tr>
<td>-exec …… {};</td>
<td>后面可跟用于进一步处理搜索结果的命令（下文会有演示）</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># find /etc -name "host*" -print</span></span><br><span class="line">/etc/host.conf</span><br><span class="line">/etc/hosts</span><br><span class="line">/etc/hosts.allow</span><br><span class="line">/etc/hosts.deny</span><br><span class="line">/etc/avahi/hosts</span><br><span class="line">/etc/selinux/targeted/modules/active/modules/hostname.pp</span><br><span class="line">/etc/hostname</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MR 12]<span class="comment"># find / -perm -4000 -print</span></span><br><span class="line">/usr/bin/mount</span><br><span class="line">/usr/bin/chage</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/su</span><br><span class="line">......................以下省略........................</span><br></pre></td></tr></table></figure>


      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/2.基础linux命令/" data-id="ck627jzvv002qu4u6az8nmkab"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux基础/">linux基础</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-2.rsync" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/2.rsync/"
    >rsync</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/2.rsync/" class="article-date">
  <time datetime="2019-08-29T15:44:18.521Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux运维/">linux运维</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h2><p>rsync是linux系统下的数据<a href="https://baike.baidu.com/item/镜像" target="_blank" rel="noopener">镜像</a><a href="https://baike.baidu.com/item/备份" target="_blank" rel="noopener">备份</a>工具。使用快速增量备份工具Remote Sync可以远程同步，支持本地复制，或者与其他SSH、rsync主机同步。</p>
<h2 id="rsync特性"><a href="#rsync特性" class="headerlink" title="rsync特性"></a>rsync特性</h2><p>它的特性如下：</p>
<ul>
<li><p>可以<a href="https://baike.baidu.com/item/镜像" target="_blank" rel="noopener">镜像</a>保存整个目录树和文件系统。</p>
</li>
<li><p>可以很容易做到保持原来文件的权限、时间、软硬链接等等。</p>
</li>
<li><p>无须特殊权限即可安装。</p>
</li>
<li><p>快速：第一次同步时 rsync 会复制全部内容，但在下一次只传输修改过的文件。rsync 在传输数据的过程中可以实行压缩及<a href="https://baike.baidu.com/item/解压缩" target="_blank" rel="noopener">解压缩</a>操作，因此可以使用更少的带宽。</p>
</li>
<li><p>安全：可以使用scp、ssh等方式来传输文件，当然也可以通过直接的socket连接。</p>
</li>
<li><p>支持匿名传输，以方便进行网站镜像。</p>
</li>
</ul>
<p>rsync官网：<a href="http://rsync.samba.org" target="_blank" rel="noopener">rsysc</a></p>
<h2 id="与scp命令比较"><a href="#与scp命令比较" class="headerlink" title="与scp命令比较"></a>与scp命令比较</h2><p>优点： </p>
<ul>
<li><p>支持增量备份。</p>
</li>
<li><p>选择性的保持 ： 符号链接，硬链接，文件属性，权限 及时间 等。</p>
</li>
<li><p>传输前执行压缩。适用亍异地备份 ，镜像服务器等应用 。</p>
</li>
<li><p>使用ssh做为传输端口。 sftp ，ssh</p>
</li>
</ul>
<p>区别：</p>
<p>当文件数据很大时候： </p>
<ul>
<li>scp 无法备份大量数据， 特点： 先统一信息，像windows复制。</li>
<li>rsync 边复制，边比较，边统计。</li>
</ul>
<p>端口： 873<br>模式：C/S 。 如果直接使用命令rsync，就是点到点传输。</p>
<h2 id="备份源"><a href="#备份源" class="headerlink" title="备份源"></a>备份源</h2><blockquote>
<p>何为备份源？</p>
<p>在远程同步任务中，负责发起rsync同步操作的客户机称为发起端，而负责响应来自客机的rsync同步操作的服务器称为备份源。</p>
</blockquote>
<h2 id="安装rsync"><a href="#安装rsync" class="headerlink" title="安装rsync"></a>安装rsync</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># rpm -qf `which rsync`</span></span><br><span class="line">rsync-3.0.9-18.el7.x86_64</span><br><span class="line">[root@server222 ~]<span class="comment"># rpm -ivh /mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.r            pm</span></span><br><span class="line">警告：/mnt/cdrom/Packages/rsync-3.0.9-18.el7.x86_64.rpm: 头V3 RSA/SHA256 Signatu            re, 密钥 ID f4a80eb5: NOKEY</span><br><span class="line">准备中...                          <span class="comment">################################# [100%]</span></span><br><span class="line">        软件包 rsync-3.0.9-18.el7.x86_64 已经安装</span><br></pre></td></tr></table></figure>

<h3 id="安装xinetd服务来管理rsync服务"><a href="#安装xinetd服务来管理rsync服务" class="headerlink" title="安装xinetd服务来管理rsync服务"></a>安装xinetd服务来管理rsync服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 cdrom]# rpm -ivh /mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm</span><br><span class="line">警告：/mnt/cdrom/Packages/xinetd-2.3.15-13.el7.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY</span><br><span class="line">准备中...                          ################################# [100%]</span><br><span class="line">正在升级/安装...</span><br><span class="line">   1:xinetd-2:2.3.15-13.el7           ################################# [100%]</span><br></pre></td></tr></table></figure>

<h2 id="开启rsync-服务"><a href="#开启rsync-服务" class="headerlink" title="开启rsync 服务"></a>开启rsync 服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]# systemctl restart rsyncd</span><br><span class="line">[root@server222 ~]# systemctl status rsyncd</span><br><span class="line">● rsyncd.service - fast remote file copy program daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rsyncd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since 四 2019-08-22 23:57:10 CST; 2s ago</span><br><span class="line"> Main PID: 14359 (rsync)</span><br><span class="line">   CGroup: /system.slice/rsyncd.service</span><br><span class="line">           └─14359 /usr/bin/rsync --daemon --no-detach</span><br><span class="line"></span><br><span class="line">8月 22 23:57:10 server222 systemd[1]: Started fast remote file copy program ...n.</span><br><span class="line">8月 22 23:57:10 server222 systemd[1]: Starting fast remote file copy program.....</span><br><span class="line">8月 22 23:57:11 server222 rsyncd[14359]: rsyncd version 3.0.9 starting, liste...3</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br></pre></td></tr></table></figure>

<h2 id="监听端口"><a href="#监听端口" class="headerlink" title="监听端口"></a>监听端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># netstat -antup | grep 873</span></span><br><span class="line">tcp        0      0 0.0.0.0:873             0.0.0.0:*               LISTEN      14359/rsync</span><br><span class="line">tcp6       0      0 :::873                  :::*                    LISTEN      14359/rsync</span><br></pre></td></tr></table></figure>

<h2 id="rsync-命令的基本用法"><a href="#rsync-命令的基本用法" class="headerlink" title="rsync 命令的基本用法"></a>rsync 命令的基本用法</h2><p>格式：<code>rsync</code> 【选项】 源文件 目标文件</p>
<p>常见的选项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-a，--archive(存档) 归档模式，表示以递归的方式传输文件，并且保持文件属性，等同亍加了参数-rlptgoD</span><br><span class="line">-r，–recursive 对子目彔以递归模式处理</span><br><span class="line">-l,--links 表示拷贝链接文件</span><br><span class="line">-p , --perms 表示保持文件原有权限</span><br><span class="line">-t , --<span class="built_in">times</span> 表示保持文件原有时间</span><br><span class="line">-g , --group 表示保持文件原有属用户组</span><br><span class="line">-o , --owner 表示保持文件原有属主</span><br><span class="line">-D , --devices 表示块设备文件信息</span><br><span class="line">-z , --compress 表示压缩传输</span><br><span class="line">-H 表示硬连接文件</span><br><span class="line">-A 保留ACL 属性信息</span><br><span class="line">-P 显示传输进度</span><br><span class="line">-u, --update 仅仅进行更新，也就是跳过所有已经存在亍目标位置，并且文件时间晚亍要备份的文件。(丌</span><br><span class="line">覆盖更新的文件)</span><br><span class="line">--port=PORT 指定其他的rsync服务端口 873</span><br><span class="line">--delete 删除那些目标位置有而原始位置没有的文件</span><br><span class="line">--password-file=FILE 从FILE 中得到密码</span><br><span class="line">--bwlimit=KBPS 限制I/O 带宽，Kbytes /second</span><br><span class="line">--filter “- 文件名”需要过滤的文件</span><br><span class="line">--exclude= ：需要过滤的文件</span><br><span class="line">-v 显示同步过程的详细信息</span><br></pre></td></tr></table></figure>

<blockquote>
<p>–delete 删除那些目标位置有而原始位置没有的文件</p>
<p>例如 目彔/web : /back a.txt</p>
</blockquote>
<h2 id="实战1："><a href="#实战1：" class="headerlink" title="实战1："></a>实战1：</h2><p>client111：192.168.176.111</p>
<p>server222：192.168.176.222</p>
<blockquote>
<p>备份server222的/mnt 目录到client111 的/root/mnt。<br>创建用户hary用于下载、读；创建用户natasha 用于上传、写。</p>
</blockquote>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># useradd hary</span></span><br><span class="line">[root@server222 ~]<span class="comment"># useradd natasha</span></span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin hary</span></span><br><span class="line">更改用户 hary 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@server222 ~]<span class="comment"># echo '123456' | passwd --stdin natasha</span></span><br><span class="line">更改用户 natasha 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br></pre></td></tr></table></figure>

<h3 id="设置权限"><a href="#设置权限" class="headerlink" title="设置权限"></a>设置权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:hary:r-x /mnt</span></span><br><span class="line"></span><br><span class="line">[root@server222 ~]<span class="comment"># setfacl -R -m user:natasha:rwx /mnt</span></span><br></pre></td></tr></table></figure>

<h3 id="创建测试数据"><a href="#创建测试数据" class="headerlink" title="创建测试数据"></a>创建测试数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 mnt]<span class="comment"># echo "123qwe" &gt; 123qwe</span></span><br><span class="line">[root@server222 mnt]<span class="comment"># ls</span></span><br><span class="line">123qwe  cdrom</span><br><span class="line">[root@server222 mnt]<span class="comment"># cat 123qwe</span></span><br><span class="line">123qwe</span><br></pre></td></tr></table></figure>

<h3 id="client111同步数据"><a href="#client111同步数据" class="headerlink" title="client111同步数据"></a>client111同步数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># mkdir /root/mnt</span></span><br><span class="line">[root@client111 ~]<span class="comment"># cd /root/mnt/</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># rsync -azP --delete natasha@192.168.176.222:/mnt/ /root/mnt</span></span><br><span class="line">natasha@192.168.176.222<span class="string">'s password:</span></span><br><span class="line"><span class="string">..........</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sent 74971 bytes  received 4361814808 bytes  10918372.41 bytes/sec</span></span><br><span class="line"><span class="string">total size is 4515096809  speedup is 1.04</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ls</span></span><br><span class="line"><span class="string">123qwe  cdrom</span></span><br><span class="line"><span class="string">[root@client111 mnt]# cat 123qwe</span></span><br><span class="line"><span class="string">123qwe</span></span><br></pre></td></tr></table></figure>

<h2 id="实战2："><a href="#实战2：" class="headerlink" title="实战2："></a>实战2：</h2><blockquote>
<p>使用ssh 密钥实现无交亏备份。做成脚本，将server222上的数据，定期备份到client111上。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh-keygen</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):<span class="comment">#直接回库</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):<span class="comment">#直接回库</span></span><br><span class="line">Enter same passphrase again:<span class="comment">#直接回库</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:SsPRWpKt+9+YLYH4IcfSGFsH/rKlKFxb3QzwqC/DdMs root@client111</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|       +o        |</span></span><br><span class="line"><span class="string">|      +.+=       |</span></span><br><span class="line"><span class="string">|     ..*+ +      |</span></span><br><span class="line"><span class="string">|      *XS= +     |</span></span><br><span class="line"><span class="string">|     .X+X = o    |</span></span><br><span class="line"><span class="string">|   . +o% B .     |</span></span><br><span class="line"><span class="string">|    o *.E .=     |</span></span><br><span class="line"><span class="string">|     . o..+.o    |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh copy id hary@192.168.176.222</span></span><br><span class="line"><span class="string">ssh: Could not resolve hostname copy: Name or service not known</span></span><br><span class="line"><span class="string">[root@client111 mnt]# ssh-copy-id hary@192.168.176.222</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">hary@192.168.176.222'</span>s password:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'hary@192.168.176.222'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>测试hary登陆server222</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># ssh hary@192.168.176.222</span></span><br><span class="line">Last failed login: Sat Aug 24 00:59:25 CST 2019 from 192.168.176.111 on ssh:notty</span><br><span class="line">There were 2 failed login attempts since the last successful login.</span><br><span class="line">[hary@server222 ~]$</span><br></pre></td></tr></table></figure>

<h3 id="编写脚本"><a href="#编写脚本" class="headerlink" title="编写脚本"></a>编写脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># vim /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># cat /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">rsync -az --delete hary@192.168.176.222:/mnt/ /root/mnt/</span><br></pre></td></tr></table></figure>

<h3 id="测试脚本"><a href="#测试脚本" class="headerlink" title="测试脚本"></a>测试脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 mnt]<span class="comment"># chmod +x /root/rsync-ssh-get-mnt.sh</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># rm -rf /root/mnt/*</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># pwd</span></span><br><span class="line">/root/mnt</span><br><span class="line">[root@client111 mnt]<span class="comment"># ls</span></span><br><span class="line">[root@client111 mnt]<span class="comment">#</span></span><br><span class="line">[root@client111 mnt]<span class="comment"># /root/rsync-ssh-get-mnt.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="定期备份"><a href="#定期备份" class="headerlink" title="定期备份"></a>定期备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># crontab -e</span></span><br><span class="line">no crontab <span class="keyword">for</span> root - using an empty one</span><br><span class="line">crontab: installing new crontab</span><br><span class="line">[root@client111 ~]<span class="comment"># crontab -l</span></span><br><span class="line">01 3 * * * /root/rsync-ssh-get-mnt.sh &amp;</span><br><span class="line"><span class="comment"># 每天的凌晨3点10分执行脚本</span></span><br></pre></td></tr></table></figure>


      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/2.rsync/" data-id="ck627jzuz001ku4u62e1p5ya6"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux运维/">linux运维</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-2.python--计算机数据存储与进制" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/2.python--计算机数据存储与进制/"
    >python 计算机数据存储与进制</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/2.python--计算机数据存储与进制/" class="article-date">
  <time datetime="2019-08-29T15:44:18.519Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"👆以上是不完整的我"</span>) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="计算机数据存储与进制"><a href="#计算机数据存储与进制" class="headerlink" title="计算机数据存储与进制"></a>计算机数据存储与进制</h1><p>[TOC]</p>
<h2 id="python软件安装"><a href="#python软件安装" class="headerlink" title="python软件安装"></a>python软件安装</h2><blockquote>
<p> 链接：<a href="https://pan.baidu.com/s/1WrbMwSLbyeXLyDWzhaFnLA" target="_blank" rel="noopener">https://pan.baidu.com/s/1WrbMwSLbyeXLyDWzhaFnLA</a><br> 提取码：wzvn </p>
</blockquote>
<p>内涵：pycharm专业版、python3.6以及安装介绍</p>
<h2 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h2><p>在前面 我们首先思考一下，</p>
<p><strong>1.为什么要使用计算机？</strong></p>
<p>当然是为了存储数据、处理数据</p>
<p><strong>2.数据存在哪里？</strong></p>
<p>数据存储在内存当中</p>
<p><strong>3.那么内存是如何存储数据的呢？</strong></p>
<p>首先得先要弄清楚怎么存储数字</p>
<h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p><strong>内存</strong>是计算机存储数据的一个<strong>介质</strong></p>
<p><strong>抽象内存</strong>：一个开关，有两种状态，一种为开，一种为关，我们把开对应为1，把关对应为0。把8个开关丢入到一个房间里，那么就可以称这个房间为一个字节。一个开关代表的是一位数，每个房间都有门牌号，可以看作成地址。把无数个房间罗列起来组成一个摩天大厦，把摩天大厦看做成内存。</p>
<p><strong>单位</strong>：</p>
<p>​    1bit    </p>
<p>​    8bit    ==    1字节</p>
<p>​    1024字节    ==    1K</p>
<p>​    1024K    ==    1M</p>
<p>​    1024M    ==    1G</p>
<p>​    1024G    ==    1T</p>
<h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><h3 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h3><p>​            逢二进一</p>
<p>​            0    1</p>
<p>​            1 + 1 = 10</p>
<h3 id="八进制"><a href="#八进制" class="headerlink" title="八进制"></a>八进制</h3><p>​            逢八进一</p>
<p>​            0    1    2    3    4    5    6    7</p>
<p>​            1 + 7 = 10</p>
<h3 id="十进制"><a href="#十进制" class="headerlink" title="十进制"></a>十进制</h3><p>​            逢十进一</p>
<p>​            0    1    2    3    4    5    6    7    8    9</p>
<p>​            1 + 9 = 10</p>
<h3 id="十六进制"><a href="#十六进制" class="headerlink" title="十六进制"></a>十六进制</h3><p>​            逢十六进一</p>
<p>​            0    1    2    3    4    5    6    7    8    9    a    b    c    d    e    f    </p>
<p>​            1 + f = 10</p>
<h2 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h2><h3 id="十进制转二进制"><a href="#十进制转二进制" class="headerlink" title="十进制转二进制"></a>十进制转二进制</h3><p>​    公式：倒除法，余数逆序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">55</span> </span><br><span class="line"><span class="number">55</span>除以<span class="number">2</span>得<span class="number">27</span>   余数<span class="number">1</span></span><br><span class="line"><span class="number">27</span>除以<span class="number">2</span>得<span class="number">13</span>   余数<span class="number">1</span></span><br><span class="line"><span class="number">13</span>除以<span class="number">2</span>得<span class="number">6</span>	 余数<span class="number">1</span></span><br><span class="line"><span class="number">6</span>除以<span class="number">2</span>得<span class="number">3</span>	 余数<span class="number">0</span></span><br><span class="line"><span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span>	 余数<span class="number">1</span></span><br><span class="line">那么逆序可得<span class="number">110111</span></span><br></pre></td></tr></table></figure>

<h3 id="二进制转十进制"><a href="#二进制转十进制" class="headerlink" title="二进制转十进制"></a>二进制转十进制</h3><p>​    公式：当前的数字(0、1)乘以2的位数次方，然后相加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">110111</span></span><br><span class="line"><span class="number">1</span> x <span class="number">2</span>^<span class="number">5</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">4</span> + <span class="number">0</span> x <span class="number">2</span>^<span class="number">3</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">1</span> + <span class="number">1</span> x <span class="number">2</span>^<span class="number">0</span></span><br><span class="line">= <span class="number">32</span> + <span class="number">16</span> + <span class="number">0</span> + <span class="number">4</span> + <span class="number">2</span> + <span class="number">1</span> </span><br><span class="line">= <span class="number">55</span></span><br></pre></td></tr></table></figure>

<h3 id="八进制转二进制"><a href="#八进制转二进制" class="headerlink" title="八进制转二进制"></a>八进制转二进制</h3><p>​    公式: [一转三位] 八进制的一位相当于二进制的三位，计算时按十进制转换，不足三位高位补0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">65</span></span><br><span class="line"><span class="number">6</span> _ _ _  计算：<span class="number">6</span>除以<span class="number">2</span>得<span class="number">3</span>，余数<span class="number">0</span>，<span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">1.</span> 那么<span class="number">6</span>可以化为 <span class="number">1</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">5</span> _ _ _  计算：<span class="number">5</span>除以<span class="number">2</span>得<span class="number">2</span>，余数<span class="number">1</span>，<span class="number">2</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">0.</span> 那么<span class="number">5</span>可以化为 <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">总结可得<span class="number">65</span>为<span class="number">110101</span></span><br></pre></td></tr></table></figure>

<h3 id="二进制转八进制"><a href="#二进制转八进制" class="headerlink" title="二进制转八进制"></a>二进制转八进制</h3><p>​    公式: [三位一取] 从低位开始，每三位得到一个八进制数字，最后高位不足则补0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">110101</span></span><br><span class="line"><span class="number">0110</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">1</span>x2^<span class="number">1</span>+<span class="number">0x2</span>^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">2</span>+<span class="number">0</span>=<span class="number">6</span></span><br><span class="line"><span class="number">0101</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">0x2</span>^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">0</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">综上述可得<span class="number">110101</span>为<span class="number">65</span></span><br></pre></td></tr></table></figure>

<h3 id="十六进制转二进制"><a href="#十六进制转二进制" class="headerlink" title="十六进制转二进制"></a>十六进制转二进制</h3><p>公式: [一转四位] 十六进制的一位相当于二进制的四位，计算时按十进制转换，不足四位高位补0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">75</span></span><br><span class="line"><span class="number">7</span> _ _ _ _ 计算：<span class="number">7</span>除以<span class="number">2</span>得<span class="number">3</span>，余数<span class="number">1</span>，<span class="number">3</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">1.</span> 那么<span class="number">7</span>可以化为 <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">5</span> _ _ _ _ 计算：<span class="number">5</span>除以<span class="number">2</span>得<span class="number">2</span>，余数<span class="number">1</span>，<span class="number">2</span>除以<span class="number">2</span>得<span class="number">1</span>，余数<span class="number">0.</span> 那么<span class="number">5</span>可以化为 <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">总结可得<span class="number">75</span>为<span class="number">01110101</span></span><br></pre></td></tr></table></figure>

<h3 id="二进制转十六进制"><a href="#二进制转十六进制" class="headerlink" title="二进制转十六进制"></a>二进制转十六进制</h3><p>公式: [四位一取] 从低位开始，每四位得到一个十六进制数字，最后高位不足则补0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如<span class="number">01110101</span></span><br><span class="line"><span class="number">0111</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">1</span>x2^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">2</span>+<span class="number">1</span>=<span class="number">7</span></span><br><span class="line"><span class="number">0101</span> _ 计算：<span class="number">0x2</span>^<span class="number">3</span>+<span class="number">1</span>x2^<span class="number">2</span>+<span class="number">0x2</span>^<span class="number">1</span>+<span class="number">1</span>x2^<span class="number">0</span> 得出<span class="number">0</span>+<span class="number">4</span>+<span class="number">0</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">综上述可得<span class="number">01110101</span>为<span class="number">75</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>其实我们可使用一个简便得方法</p>
<p>叫做8 4 2 1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; 例如 <span class="number">01100101</span></span><br><span class="line">&gt; <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">&gt; ---------------</span><br><span class="line">&gt; <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span> <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 可得出<span class="number">4</span>+<span class="number">2</span>=<span class="number">6</span> <span class="number">4</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">&gt; 得出<span class="number">65</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 例如 <span class="number">01110101</span></span><br><span class="line">&gt; <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">&gt; ---------------</span><br><span class="line">&gt; <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span> <span class="number">8</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; 可得出<span class="number">4</span>+<span class="number">2</span>+<span class="number">1</span>=<span class="number">7</span> <span class="number">4</span>+<span class="number">1</span>=<span class="number">5</span></span><br><span class="line">&gt; 得出<span class="number">75</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="进制对应表"><a href="#进制对应表" class="headerlink" title="进制对应表"></a>进制对应表</h3><table>
<thead>
<tr>
<th align="center">十进制</th>
<th align="center">二进制</th>
<th align="center">八进制</th>
<th align="center">十六进制</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">10</td>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">11</td>
<td align="center">3</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">100</td>
<td align="center">4</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">101</td>
<td align="center">5</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">110</td>
<td align="center">6</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">111</td>
<td align="center">7</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">1000</td>
<td align="center">10</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">1001</td>
<td align="center">11</td>
<td align="center">9</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">1010</td>
<td align="center">12</td>
<td align="center">a</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">1011</td>
<td align="center">13</td>
<td align="center">b</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">1100</td>
<td align="center">14</td>
<td align="center">c</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">1101</td>
<td align="center">15</td>
<td align="center">d</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">1110</td>
<td align="center">16</td>
<td align="center">e</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">1111</td>
<td align="center">17</td>
<td align="center">f</td>
</tr>
</tbody></table>
<h2 id="存储数据的方式"><a href="#存储数据的方式" class="headerlink" title="存储数据的方式"></a>存储数据的方式</h2><p>内存中存储的是数据的二进制形式<br>存储数据：<br>    1、计算机先开辟空间，在存储数据，计算机开辟空间的最小单位是字节<br>    2、在数据存储时，用最高位标识符号位，0表示正数，1表示复数</p>
<h2 id="原码"><a href="#原码" class="headerlink" title="原码"></a>原码</h2><p>原码：规定了字节数，写明了符号位，得到了数据的原码<br>    思考：内存是以数据原码的形式存储的吗？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">     <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+    <span class="number">1000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">---------------------------------------------------</span><br><span class="line">     <span class="number">1000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0010</span>   <span class="number">-2</span></span><br></pre></td></tr></table></figure>

<p>结论：不以原码的形式存储数据</p>
<h2 id="反码"><a href="#反码" class="headerlink" title="反码"></a>反码</h2><p>反码：正数的反码就是其原码，负数的反码事其原码的符号位不变其他位取反<br>    思考：内存是以数据反码的形式存储的吗？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+   <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1110</span></span><br><span class="line">--------------------------------------------------- </span><br><span class="line">    <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span></span><br></pre></td></tr></table></figure>

<p>结论：不以反码的形式存储数据</p>
<h2 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h2><p>补码：正数的补码是其原码(正数三码合一)，负数的补码是反码加1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0001</span></span><br><span class="line">+   <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span>  <span class="number">1111</span> <span class="number">1111</span></span><br><span class="line">---------------------------------------------------  </span><br><span class="line">  <span class="number">1</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span>  <span class="number">0000</span> <span class="number">0000</span></span><br><span class="line"><span class="comment"># 加法最后得到的1溢出了，没有存储到内存中</span></span><br></pre></td></tr></table></figure>

<p>结论：以补码的形式存储数据</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/2.python--计算机数据存储与进制/" data-id="ck627jzti0007u4u6j67kalfj"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-2.linux--FTP服务" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/2.linux--FTP服务/"
    >FTP服务</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/2.linux--FTP服务/" class="article-date">
  <time datetime="2019-08-29T15:44:18.517Z" itemprop="datePublished">2019-08-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux进阶/">linux进阶</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>[TOC]</p>
<h2 id="FTP简介"><a href="#FTP简介" class="headerlink" title="FTP简介"></a>FTP简介</h2><p>网络文件共享服务主流的主要有三种，分别是<strong>ftp</strong>、<strong>nfs</strong>、<strong>samba</strong></p>
<p><strong>FTP</strong>:<a href="https://baike.baidu.com/item/ftp/13839?fr=aladdin" target="_blank" rel="noopener"><strong>文件传输协议</strong>（英文：<strong>F</strong>ile <strong>T</strong>ransfer <strong>P</strong>rotocol，缩写：<strong>FTP</strong>）</a>是用于在<a href="https://baike.baidu.com/item/网络" target="_blank" rel="noopener">网络</a>上进行文件传输的一套标准协议，使用客户/服务器模式。它属于<a href="https://baike.baidu.com/item/网络传输协议" target="_blank" rel="noopener">网络传输协议</a>的<a href="https://baike.baidu.com/item/应用层" target="_blank" rel="noopener">应用层</a>。文件传送（file transfer）和文件访问（file access）之间的区别在于：前者由FTP提供，后者由如NFS等应用系统提供。</p>
<p>FTP是一个8位的客户端-服务器协议，能操作任何类型的文件而不需要进一步处理，就像MIME或Unicode一样。但是，FTP有着极高的延时，这意味着，从开始请求到第一次接收需求数据之间的时间，会非常长；并且不时的必须执行一些冗长的登录进程。</p>
<p>在使用FTP时候，用户经常会遇到两种概念：</p>
<ul>
<li>上传</li>
</ul>
<blockquote>
<p>将自己电脑上的文件拷贝到远端主机上</p>
</blockquote>
<ul>
<li>下载</li>
</ul>
<blockquote>
<p>从远端主机拷贝文件到自己的电脑上面</p>
</blockquote>
<h2 id="FTP架构"><a href="#FTP架构" class="headerlink" title="FTP架构"></a>FTP架构</h2><p>FTP工作于应用层，它监听tcp的21号端口，是一种c/s架构的应用程序。其有多种客户端和服务端的应用程序</p>
<ul>
<li><p>客户端工具</p>
<ul>
<li>ftp</li>
<li>liftp，lftpget</li>
<li>wget，curl</li>
<li>filezilla</li>
<li>gftp(linux GUI)</li>
<li>商业软件(flashftp,cuteftp)</li>
</ul>
</li>
<li><p>服务端软件</p>
<ul>
<li>wu-ftpd</li>
<li>proftpd(提供web接口的一种ftp服务端程序)</li>
<li>pureftp</li>
<li>vsftpd(Very Secure)</li>
<li>ServU(windows平台的一种强大ftp服务端程序)</li>
</ul>
</li>
</ul>
<h2 id="FTP数据连接模式"><a href="#FTP数据连接模式" class="headerlink" title="FTP数据连接模式"></a>FTP数据连接模式</h2><p>ftp有2种数据连接模式：</p>
<ul>
<li>命令连接：是指文件管理类命令，始终在线的持久性连接，直到用户退出登录为止</li>
<li>数据连接：是指数据传输，按需创建及关闭的连接<ul>
<li>数据传输格式：<ul>
<li>文件传输</li>
<li>二进制传输</li>
</ul>
</li>
<li>数据传输模式：<ul>
<li>主动模式：由服务器端创建数据连接</li>
<li>被动模式：由客户端创建数据连接</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>主动模式下</p>
<ul>
<li>命令连接：</li>
</ul>
<p>客户端以大于1023的随机端口去连接ftp服务端的21号端口</p>
<p>1024 –&gt; 21 建立命令连接</p>
<ul>
<li>数据连接：</li>
</ul>
<p>服务端以自己的20号端口去连接客户端建立命令连接时的端口+1的端口号</p>
<p>20 –&gt; 1025 建立数据连接 </p>
</li>
<li><p>被动模式下</p>
<ul>
<li>命令连接</li>
</ul>
<p>客户端以一个随机端口(1110)来连接服务器端的21号端口，之后服务器会返回一个告知客户端连接服务端的哪个端口号</p>
<p>1110 –&gt; 21 (告知客户端连接哪一个端口)</p>
<ul>
<li>数据连接</li>
</ul>
<p>客户端以创建命令连接的端口+1 (1110 + 1)的端口号去连接服务器端通过命令连接告知自己的一个随机端口号来创建数据连接</p>
<p>1111 –&gt; （服务端告知自己的端口）</p>
</li>
</ul>
<blockquote>
<p><strong>注意：</strong></p>
<p>主动模式有个弊端，因为客户端的端口是随机的，如果客户端开了防火墙，那么服务器端去连接客户端创建数据连接时就可能会被拒绝。</p>
</blockquote>
<h2 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h2><p>FTP的用户主要有三种：</p>
<ul>
<li>虚拟用户：仅用于访问某特定服务中的资源</li>
<li>系统用户：可以登录系统的真实用户</li>
<li>匿名用户</li>
</ul>
<h2 id="vsftpd"><a href="#vsftpd" class="headerlink" title="vsftpd"></a>vsftpd</h2><h3 id="vsftpd安装"><a href="#vsftpd安装" class="headerlink" title="vsftpd安装"></a>vsftpd安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># yum install -y vsftpd</span></span><br><span class="line">........</span><br><span class="line">已安装:</span><br><span class="line">  vsftpd.x86_64 0:3.0.2-22.el7</span><br><span class="line"></span><br><span class="line">完毕！</span><br></pre></td></tr></table></figure>

<h3 id="vsftpd配置"><a href="#vsftpd配置" class="headerlink" title="vsftpd配置"></a>vsftpd配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件目录</span></span><br><span class="line">[root@client111 ~]<span class="comment"># ls -ld /etc/vsftpd</span></span><br><span class="line">drwxr-xr-x. 2 root root 88 6月  27 15:45 /etc/vsftpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主配置文件</span></span><br><span class="line">[root@client111 ~]<span class="comment"># ls -l /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">-rw-------. 1 root root 5030 8月   3 2017 /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># vsftpd用户认证配置文件</span></span><br><span class="line">[root@client111 ~]<span class="comment"># ls -l /etc/pam.d/vsftpd</span></span><br><span class="line">-rw-r--r--. 1 root root 335 8月   3 2017 /etc/pam.d/vsftpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匿名用户（映射为ftp用户）的共享资源位置是/var/ftp</span></span><br><span class="line"><span class="comment"># 系统用户通过ftp访问的资源位置为用户的家目录</span></span><br><span class="line"><span class="comment"># 虚拟用户通过ftp访问的资源位置为给虚拟用户指定的映射成为的系统用户的家目录</span></span><br></pre></td></tr></table></figure>

 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=YES				启用匿名用户登陆</span><br><span class="line">anon_upload_enable=YES			允许匿名用户上传</span><br><span class="line">anon_mkdir_write_enable=YES		允许匿名用户创建目录，但是不能删除</span><br><span class="line">anon_other_write_enable=YES		允许匿名用户创建和删除目录</span><br><span class="line">local_enable=YES					启用本地用户登陆</span><br><span class="line">write_enable=YES					允许本地用户有写权限</span><br><span class="line">local_umask=022					通过FTP上传文件的默认遮罩码</span><br><span class="line">chroot_local_user=YES				禁锢所有FTP本地用户只能在其家目录中</span><br><span class="line">chroot_list_enable=YES			开启禁锢文件列表；需要与chroot_list_file参数一起使用</span><br><span class="line">chroot_list_file=/etc/vsftp/chroot_list	 指定禁锢列表文件路径；在此文件里面的用户将被禁锢在其家目录中</span><br><span class="line">allow_writeable_chroot=YES		允许被禁锢的用户家目录有写权限</span><br><span class="line">xferlog_enable=YES				是否启用传输日志，记录FTP传输过程</span><br><span class="line">xferlog_std_format=YES			传输日志是否使用标准格式</span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/xferlog		指定传输日志存储的位置</span><br><span class="line">chown_uploads=YES					是否启用改变上传文件属性的功能</span><br><span class="line">chown_username=whoever			指定要将上传的文件的属主改为哪个用户，此用户必须在系统中存在</span><br><span class="line">pam_service_name=vsftpd			指定vsftp使用/etc/pam.d下的哪个pam配置文件进行用户认证</span><br><span class="line">userlist_enable=YES				是否启用控制用户登陆的列表文件：默认为/etc/vsftpd/user_list文件</span><br><span class="line">userlist_deny=YES					是否拒绝userlist指定的列表文件中存在的用户登陆FTP</span><br><span class="line">max_cients=`<span class="comment">#`					最大并发连接数</span></span><br><span class="line">max_per_ip=`<span class="comment">#`					每个IP可同时发起的并发请求数</span></span><br><span class="line">anon_max_rate						匿名用户的最大传输速率，单位是‘字节/秒’</span><br><span class="line">local_max_rate					本地用户的最大传输速率，单位是‘字节/秒’</span><br><span class="line">dirmessage_enable=YES				启用某目录下的.message描述信息</span><br><span class="line"><span class="comment">#假设有一个目录，在此目录下面创建一个名为.message的文件，在此文件内写入一些描述信息之后切换出目录，目录会自动显示.message文件中的内容</span></span><br><span class="line"></span><br><span class="line">message_file						设置访问一个目录时获得的目录信息文件的文件名，默认是.message</span><br><span class="line">idle_session_timeout=600			设置默认的断开不活跃session的时间</span><br><span class="line">data_connection_timeout=120		设置数据传输超时时间</span><br><span class="line">ftpd_banner=<span class="string">"Welcome to chenlf FTP service."</span>	定制欢迎信息，登陆FTP时自动显示</span><br></pre></td></tr></table></figure>

<h3 id="vsftpd虚拟用户配置"><a href="#vsftpd虚拟用户配置" class="headerlink" title="vsftpd虚拟用户配置"></a>vsftpd虚拟用户配置</h3><ul>
<li><p>虚拟用户的配置：</p>
<ul>
<li>所有的虚拟用户会被统一映射为一个指定的系统账号，访问的共享位置即为此系统账号的家目录</li>
<li>各虚拟用户可被赋予不同的访问权限，通过匿名用户的权限控制参数进行指定</li>
<li>虚拟用户账号的存储方式：<ul>
<li>文件：编辑文件，此文件需要为<a href="https://baike.baidu.com/item/Hash/390310" target="_blank" rel="noopener">编码hash格式</a>。<ul>
<li>文件奇数行为用户</li>
<li>偶数行为密码</li>
</ul>
</li>
<li>关系型数据库的表中：<ul>
<li>通过即时查询数据库完成用户认证</li>
<li>mysql库：pam要依赖于pam_mysql软件，可以通过epel源yum安装</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>vsftpd虚拟用户的配置步骤：</p>
<ul>
<li>安装依赖的程序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span></span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># vim CentOS7-Base-163.repo</span></span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># tail -n 5 CentOS7-Base-163.repo</span></span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Plus - 163.com</span><br><span class="line">baseurl=http://mirrors.163.com/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   <span class="comment"># 此处将0改为1</span></span><br><span class="line">gpgkey=http://mirrors.163.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># yum install -y epel-release</span></span><br><span class="line">[root@client111 yum.repos.d]<span class="comment"># yum install -y vsftpd</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文本格式的用户名以及密码</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 yum.repos.d]<span class="comment"># cd /etc/vsftpd/</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># vim vu.list</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># cat vu.list</span></span><br><span class="line">123</span><br><span class="line">123321</span><br><span class="line">abc</span><br><span class="line">123321</span><br><span class="line"><span class="comment"># 用户和密码一一对应，前面为账户，后面为密码</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># id 123</span></span><br><span class="line">id: 123: no such user</span><br><span class="line">[root@client111 vsftpd]<span class="comment"># id abc</span></span><br><span class="line">id: abc: no such user</span><br><span class="line"><span class="comment"># 账户在系统中没有创建过</span></span><br></pre></td></tr></table></figure>

<ul>
<li>安装db4工具</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 vsftpd]<span class="comment"># yum install -y db4*</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用db4工具将刚才编辑的vu.list转换成数据库文件(vu.db)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-T 表示转换		-t 表示加密方式使用<span class="built_in">hash</span>算法加密</span><br><span class="line">[root@client111 vsftpd]<span class="comment"># db_load -T -t hash -f /etc/vsftpd/vu.list /etc/vsftpd/vu.db</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># ls</span></span><br><span class="line">ftpusers  user_list  vsftpd.conf  vsftpd_conf_migrate.sh  vu.db  vu.list</span><br><span class="line">[root@client111 vsftpd]<span class="comment"># file vu.*</span></span><br><span class="line">vu.db:   Berkeley DB (Hash, version 9, native byte-order)</span><br><span class="line">vu.list: ASCII text</span><br></pre></td></tr></table></figure>

<ul>
<li>为防止数据泄露，将文件权限设置为600</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 vsftpd]<span class="comment"># chmod 600 vu.*</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># ls -l vu.*</span></span><br><span class="line">-rw-------. 1 root root 12288 6月  27 17:16 vu.db</span><br><span class="line">-rw-------. 1 root root    22 6月  27 17:08 vu.list</span><br></pre></td></tr></table></figure>

<ul>
<li>添加虚拟用户的映射账号，创建ftp的根目录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 vsftpd]<span class="comment"># useradd -d /file -s /sbin/nologin vftp</span></span><br><span class="line">[root@client111 vsftpd]<span class="comment"># cd /</span></span><br><span class="line">[root@client111 /]<span class="comment"># ls -ld file</span></span><br><span class="line">drwx------. 3 vftp vftp 78 6月  27 17:32 file</span><br><span class="line">[root@client111 /]<span class="comment"># chmod 755 file</span></span><br><span class="line">[root@client111 /]<span class="comment"># ls -ld file</span></span><br><span class="line">drwxr-xr-x. 3 vftp vftp 78 6月  27 17:32 file</span><br></pre></td></tr></table></figure>

<ul>
<li>备份vsftpd用户认证配置文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 pam.d]<span class="comment"># cp /etc/pam.d/vsftpd&#123;,.bak&#125;</span></span><br><span class="line">[root@client111 pam.d]<span class="comment"># ls vsftpd*</span></span><br><span class="line">vsftpd  vsftpd.bak</span><br></pre></td></tr></table></figure>

<ul>
<li>为虚拟用户建立pam认证</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 pam.d]<span class="comment"># vim /etc/pam.d/vsftpd</span></span><br><span class="line">[root@client111 pam.d]<span class="comment"># cat /etc/pam.d/vsftpd</span></span><br><span class="line"><span class="comment">#%PAM-1.0</span></span><br><span class="line">auth required pam_userdb.so db=/etc/vsftpd/vu</span><br><span class="line">account required pam_userdb.so db=/etc/vsftpd/vu</span><br></pre></td></tr></table></figure>

<ul>
<li>修改vsftpd配置文件,添加虚拟用户支持</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 pam.d]<span class="comment"># vim /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">[root@client111 pam.d]<span class="comment"># tail -n 2 /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">guest_enable=YES</span><br><span class="line">guest_username=vftp</span><br></pre></td></tr></table></figure>

<ul>
<li>为不同的虚拟用户建立独立的配置文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 pam.d]<span class="comment"># vim /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">[root@client111 pam.d]<span class="comment"># tail -n 2 /etc/vsftpd/vsftpd.conf</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vusers_dir</span><br><span class="line">allow_writeable_chroot=YES</span><br></pre></td></tr></table></figure>

<p>上述配置配置完成之后，转到/etc/vsftpd/vusers_dir目录中为每个虚拟用户分别建立配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 pam.d]<span class="comment"># mkdir /etc/vsftpd/vusers_dir</span></span><br><span class="line">[root@client111 pam.d]<span class="comment"># cd /etc/vsftpd/vusers_dir</span></span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># ls</span></span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># touch 123</span></span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># touch abc</span></span><br></pre></td></tr></table></figure>

<ul>
<li>设置虚拟用户123能上传和下载，而abc可以上传文件和创建目录、以及下载。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 vusers_dir]<span class="comment"># vim 123</span></span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># vim abc</span></span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># cat 123</span></span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">[root@client111 vusers_dir]<span class="comment"># cat abc</span></span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br></pre></td></tr></table></figure>

<ul>
<li>重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 vusers_dir]<span class="comment"># systemctl restart vsftpd</span></span><br></pre></td></tr></table></figure>

<p>此时用另外一台主机去访问</p>
<ul>
<li>安装lftp</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># yum install -y lftp</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看lftp的帮助用法</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lftp --help</span></span><br><span class="line">用法: lftp [OPTS] &lt;site&gt;</span><br><span class="line">`lftp<span class="string">' 是在 rc 文件执行后 lftp 执行的第一个命令</span></span><br><span class="line"><span class="string"> -f &lt;file&gt;           执行文件中的命令后退出</span></span><br><span class="line"><span class="string"> -c &lt;cmd&gt;            执行命令后退出</span></span><br><span class="line"><span class="string"> --help              显示帮助信息后退出</span></span><br><span class="line"><span class="string"> --version           显示 lftp 版本后退出</span></span><br><span class="line"><span class="string"> 其他的选项同 `open'</span> 命令</span><br><span class="line"> -e &lt;cmd&gt;            在选择后执行命令</span><br><span class="line"> -u &lt;user&gt;[,&lt;pass&gt;]  使用指定的用户名/口令进行验证</span><br><span class="line"> -p &lt;port&gt;           连接指定的端口</span><br><span class="line"> &lt;site&gt;              主机名, URL 或书签的名字</span><br></pre></td></tr></table></figure>

<ul>
<li>连接192.168.176.111中的abc用户</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lftp -u abc,123321 192.168.176.111</span></span><br><span class="line">lftp abc@192.168.176.111:~&gt; ls</span><br><span class="line">lftp abc@192.168.176.111:/&gt; mkdir abc</span><br><span class="line">mkdir 成功, 建立 `abc<span class="string">'</span></span><br><span class="line"><span class="string">lftp abc@192.168.176.111:/&gt; ls</span></span><br><span class="line"><span class="string">drwx------    2 1001     1001            6 Jun 27 14:28 abc</span></span><br></pre></td></tr></table></figure>

<ul>
<li>可用help或者？来查看帮助命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">lftp abc@192.168.176.111:/&gt; <span class="built_in">help</span></span><br><span class="line">    !&lt;shell-command&gt;                     (commands)</span><br><span class="line">    <span class="built_in">alias</span> [&lt;name&gt; [&lt;value&gt;]]             attach [PID]</span><br><span class="line">    bookmark [SUBCMD]                    cache [SUBCMD]</span><br><span class="line">    cat [-b] &lt;files&gt;                     <span class="built_in">cd</span> &lt;rdir&gt;</span><br><span class="line">    chmod [OPTS] mode file...            close [-a]</span><br><span class="line">    [re]cls [opts] [path/][pattern]      debug [&lt;level&gt;|off] [-o &lt;file&gt;]</span><br><span class="line">    du [options] &lt;<span class="built_in">dirs</span>&gt;                  <span class="built_in">exit</span> [&lt;code&gt;|<span class="built_in">bg</span>]</span><br><span class="line">    get [OPTS] &lt;rfile&gt; [-o &lt;lfile&gt;]      glob [OPTS] &lt;cmd&gt; &lt;args&gt;</span><br><span class="line">    <span class="built_in">help</span> [&lt;cmd&gt;]                         <span class="built_in">history</span> -w file|-r file|-c|-l [cnt]</span><br><span class="line">    <span class="built_in">jobs</span> [-v] [&lt;job_no...&gt;]              <span class="built_in">kill</span> all|&lt;job_no&gt;</span><br><span class="line">    lcd &lt;ldir&gt;                           lftp [OPTS] &lt;site&gt;</span><br><span class="line">    ln [-s] &lt;file1&gt; &lt;file2&gt;              ls [&lt;args&gt;]</span><br><span class="line">    mget [OPTS] &lt;files&gt;                  mirror [OPTS] [remote [<span class="built_in">local</span>]]</span><br><span class="line">    mkdir [-p] &lt;<span class="built_in">dirs</span>&gt;                    module name [args]</span><br><span class="line">    more &lt;files&gt;                         mput [OPTS] &lt;files&gt;</span><br><span class="line">    mrm &lt;files&gt;                          mv &lt;file1&gt; &lt;file2&gt;</span><br><span class="line">    [re]nlist [&lt;args&gt;]                   open [OPTS] &lt;site&gt;</span><br><span class="line">    pget [OPTS] &lt;rfile&gt; [-o &lt;lfile&gt;]     put [OPTS] &lt;lfile&gt; [-o &lt;rfile&gt;]</span><br><span class="line">    <span class="built_in">pwd</span> [-p]                             queue [OPTS] [&lt;cmd&gt;]</span><br><span class="line">    quote &lt;cmd&gt;                          repeat [OPTS] [delay] [<span class="built_in">command</span>]</span><br><span class="line">    rm [-r] [-f] &lt;files&gt;                 rmdir [-f] &lt;<span class="built_in">dirs</span>&gt;</span><br><span class="line">    scache [&lt;session_no&gt;]                <span class="built_in">set</span> [OPT] [&lt;var&gt; [&lt;val&gt;]]</span><br><span class="line">    site &lt;site-cmd&gt;                      <span class="built_in">source</span> &lt;file&gt;</span><br><span class="line">    torrent [-O &lt;dir&gt;] &lt;file|URL&gt;...     user &lt;user|URL&gt; [&lt;pass&gt;]</span><br><span class="line">    <span class="built_in">wait</span> [&lt;jobno&gt;]                       zcat &lt;files&gt;</span><br><span class="line">    zmore &lt;files&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>进入192.168.176.111</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@client111 /]<span class="comment"># cd file/</span></span><br><span class="line">[root@client111 file]<span class="comment"># ls</span></span><br><span class="line">abc</span><br><span class="line">[root@client111 file]<span class="comment"># echo "1234567890" &gt; abc.txt</span></span><br><span class="line">[root@client111 file]<span class="comment"># ls</span></span><br><span class="line">abc  abc.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>进入192.168.176.222</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lftp -u abc,123321 192.168.176.111</span></span><br><span class="line">lftp abc@192.168.176.111:~&gt; ls</span><br><span class="line">drwx------    3 1001     1001           21 Jun 27 14:34 abc</span><br><span class="line">-rw-r--r--    1 0        0              11 Jun 27 14:39 abc.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>下载abc.txt</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@server222 ~]<span class="comment"># lftp -u abc,123321 192.168.176.111</span></span><br><span class="line">lftp abc@192.168.176.111:~&gt; ls</span><br><span class="line">drwx------    3 1001     1001           21 Jun 27 14:34 abc</span><br><span class="line">-rw-r--r--    1 0        0              11 Jun 27 14:39 abc.txt</span><br><span class="line">lftp abc@192.168.176.111:/&gt; get abc.txt -o /opt</span><br><span class="line">11 bytes transferred</span><br><span class="line">lftp abc@192.168.176.111:/&gt; <span class="built_in">exit</span></span><br><span class="line">[root@server222 ~]<span class="comment"># ll /opt</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 11 6月  27 22:39 abc.txt</span><br><span class="line">drwxr-xr-x. 2 root root  6 3月  26 2015 rh</span><br></pre></td></tr></table></figure>

<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>1.安装vsftpd<br>2.配置匿名用户ftp<br>3.配置虚拟用户ftp<br>4.配置系统用户ftp<br>5.写博客，要写明ftp的使用场景以及如何安装与配置</p>
<p>要求：<br>1.安装并配置完成后要使用ftp客户端工具登录验证</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/2.linux--FTP服务/" data-id="ck627jzuy001hu4u6zig2dv1g"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux进阶/">linux进阶</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-1.网络--子网划分" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/29/1.网络--子网划分/"
    >子网划分</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/29/1.网络--子网划分/" class="article-date">
  <time datetime="2019-08-29T15:44:18.515Z" itemprop="datePublished">2019-08-29</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p><strong>关于作者</strong></p>
<p><strong>周李杰</strong>，最后一批90后，现居<strong>湖北武汉</strong></p>
<p>孤独患者，懒癌中期，无脑幻想者。但却人畜无害，无需远离。</p>
<p>兴趣众多，然无一精通。正努力成为一个有趣的人。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; print(&quot;👆以上是不完整的我&quot;) //请我吃大餐将会了解更多</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h3><blockquote>
<p>半吊子水准，大神请赐教，小白请阅</p>
<p>​                                —写在前面的话</p>
</blockquote>
<p>不扯犊子，直接开始</p>
<p>首先，我们要懂得IP地址的类别</p>
<h5 id="IP地址："><a href="#IP地址：" class="headerlink" title="IP地址："></a>IP地址：</h5><ul>
<li>IP地址是可以局部表示唯一的主机</li>
<li>IP地址是由4个字节，每个字节有8位bit，共32位bit组成</li>
<li>IP地址分为网络部分和主机部分</li>
<li>IP地址分为A、B、C、D、E类地址，其中D、E类地址用于科研，我们平常使用的也只有A、B、C三类地址，所以在此我也只列出A、B、C三类地址</li>
</ul>
<h5 id="A类地址："><a href="#A类地址：" class="headerlink" title="A类地址："></a>A类地址：</h5><p>前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位</p>
<p>地址范围：1.0.0.0–126.255.255.255<br>(00000001.00000000.00000000.00000000–01111110.111111111.11111111.11111111）</p>
<p>A类私有地址:10.0.0.0–10.255.255.255</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(00000001.00000000.00000000.00000000--01111110.111111111.11111111.11111111）</span><br><span class="line"><span class="comment"># 此处不懂没关系，后面会讲到</span></span><br></pre></td></tr></table></figure>

<h5 id="B类地址："><a href="#B类地址：" class="headerlink" title="B类地址："></a>B类地址：</h5><p>前2个字节（前16位bit）为网络位，后2个字节（后16位bit）为主机位</p>
<p>地址范围：128.0.0.0–191.255.255.255<br>（10000000.00000000.00000000.00000000–10111111.11111111.11111111.11111111）</p>
<p>B类私有地址：172.16.0.0–172.31.255.255</p>
<h5 id="C类地址："><a href="#C类地址：" class="headerlink" title="C类地址："></a>C类地址：</h5><p>前3个字节（前24位bit）为网络位，后1个字节（后8位bit）为主机位</p>
<p>地址范围：192.0.0.0–223.255.255.255<br>（11000000.00000000.00000000.00000000–11011111.11111111.11111111.11111111）</p>
<p>C类私有地址：192.168.0.0–192.168.255.255</p>
<h5 id="环回地址："><a href="#环回地址：" class="headerlink" title="环回地址："></a>环回地址：</h5><p>地址范围：127.0.0.0–127.255.255.255<br>（01111111.00000000.00000000.00000000–01111111.11111111.11111111.11111111） #一般用于Windows系统，可检测电脑网卡是否正常</p>
<p>然后，我们来理解一下十进制与二进制之间的转换</p>
<h5 id="十进制与二进制之间的转换："><a href="#十进制与二进制之间的转换：" class="headerlink" title="十进制与二进制之间的转换："></a>十进制与二进制之间的转换：</h5><table>
<thead>
<tr>
<th align="center">第八位</th>
<th align="center">第七位</th>
<th align="center">第六位</th>
<th align="center">第五位</th>
<th align="center">第四位</th>
<th align="center">第三位</th>
<th align="center">第二位</th>
<th align="center">第一位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">128</td>
<td align="center">64</td>
<td align="center">32</td>
<td align="center">16</td>
<td align="center">8</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
</tbody></table>
<h6 id="十进制转二进制："><a href="#十进制转二进制：" class="headerlink" title="十进制转二进制："></a>十进制转二进制：</h6><p>例如：11001100</p>
<p>我们从右往左数，</p>
<p>第一位为0     第二位为0      第三位为1</p>
<p>第四位为1     第五位为0      第六位为0</p>
<p>第七位为1     第八位为1</p>
<p>我们可以把0看作没有，1看作有，然后我们对照着表中，把有的数字相加在一起，</p>
<p>所以就等于4+8+64+128=204</p>
<p>例如：11111111</p>
<p>从右往左数，都为1，所以我们对照表中，</p>
<p>依次相加就等于1+2+4+8+16+32+64+128=255</p>
<h6 id="二进制转十进制："><a href="#二进制转十进制：" class="headerlink" title="二进制转十进制："></a>二进制转十进制：</h6><p>例如：172</p>
<p>同等于消消乐，从左往右，只要剩余的数字能减这一位的数字则为1，不能减则为0，跳过去减下一位，直到减到没有，</p>
<p>第八位128 能减，则为1，172-128=44.</p>
<p>第七位64   不能减，则为0.</p>
<p>第六位32   能减，则为1，44-32=12.</p>
<p>第五位16   不能减，则为0.</p>
<p>第四位8     能减，则为1，12-8=4.</p>
<p>第三位4     能减，则为1，4-4=0.</p>
<p>第二位2     不能减，则为0.</p>
<p>第一位1     不能减，则为0.</p>
<p>那么即可得出：10101100</p>
<p>例如：192</p>
<p>第八位128 能减，则为1，192-128=64.</p>
<p>第七位64   能减，则为1，64-64=0.</p>
<p>第六位32   不能减，则为0.</p>
<p>第五位16   不能减，则为0.</p>
<p>第四位8     不能减，则为0.</p>
<p>第三位4     不能减，则为0.</p>
<p>第二位2     不能减，则为0.</p>
<p>第一位1     不能减，则为0.</p>
<p>那么即可得出：11000000</p>
<blockquote>
<p> 为什么要分类：合理的利用网络地址资源       # 网上一大片一大片的文章，其意思就是要合理的利用地址资源，避免浪费，可能他们的更官方，更实用</p>
</blockquote>
<h5 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h5><ul>
<li>子网掩码是用来区分网络部分和主机部分</li>
</ul>
<p>如何区分？网络部分为1，主机部分为0</p>
<p>例如：10.1.1.1</p>
<p>首先我们看出这个地址是一个A类地址【前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位】</p>
<p>IP地址：00001010.00000001.00000001.00000001</p>
<p>子网掩码：11111111.00000000.00000000.00000000 (255.0.0.0或者在IP地址后接/8)</p>
<blockquote>
<p>/8表示前8位为网络位</p>
</blockquote>
<p>例如：172.16.1.1</p>
<p>首先我们看出这个地址是一个B类地址【前2个字节（前16位bit）为网络位，后2个字节（后16位bit）为主机位】</p>
<p>IP地址：10101100.00010000.00000001.00000001</p>
<p>子网掩码：11111111.11111111.00000000.00000000 (255.255.0.0或者在IP地址后接/16)</p>
<blockquote>
<p> /16表示前16位为网络位</p>
</blockquote>
<p>例如：192.168.10.1</p>
<p>首先我们看出这是一个C类地址【前3个字节（前24位bit）为网络位，后1个字节（后8位bit）为主机位】</p>
<p>IP地址：11000000.10101000.00001010.00000001</p>
<p>子网掩码：11111111.11111111.11111111.00000000 (255.255.255.0或者在IP地址后接/24)</p>
<blockquote>
<p> /24表示前24位为网络位</p>
</blockquote>
<h5 id="网络地址与广播地址"><a href="#网络地址与广播地址" class="headerlink" title="网络地址与广播地址"></a>网络地址与广播地址</h5><ol>
<li>网络地址：网络位any（任意数），主机位为0</li>
<li>广播地址：网络位any（任意数），主机位为1</li>
</ol>
<p>例如：10.1.1.1</p>
<p>首先我们看出这是一个A类地址【前1个字节（前8位bit）为网络位，后3个字节（后24位bit）为主机位】</p>
<p>网络地址：00001010.00000001.00000001.00000001 (10.0.0.0)</p>
<p>广播地址：00001010.11111111.11111111.11111111 (10.255.255.255)</p>
<blockquote>
<p>网络地址相当于一个范围，不能用于主机。网络地址就是限制IP在本网络范围中</p>
</blockquote>
<p>例如：192.168.1.1的网络地址为192.168.1.0/24（/24代表前24位为网络位）</p>
<p>可用主机地址：1–254（主机为255，此为广播风暴，所以255不能用）</p>
<h5 id="子网划分五步骤"><a href="#子网划分五步骤" class="headerlink" title="子网划分五步骤"></a>子网划分五步骤</h5><ol>
<li><p>确定划分多少个网络，根据划分网络的数量来确定子网掩码</p>
<p>​    2的n次方(n代表借的主机位）</p>
<p>​    2的n次方大于或等于(要划分多少个子网)</p>
</li>
<li><p>确定每个子网容纳的IP地址数量</p>
<p> ​    2的n次方（n代表剩余的主机位）</p>
</li>
<li><p>确定可用的主机数量</p>
<p> ​    2的n次方减2（n代表剩余的主机位）</p>
</li>
<li><p>确定IP地址范围</p>
</li>
<li><p>确定网络地址与广播地址</p>
</li>
</ol>
<p>例如：192.168.1.0/24    这个网络要划分出4个子网，请写出4个子网的网络地址、子网掩码以及广播地址以及可容纳主机数。</p>
<p>192.168.1.00000000/24</p>
<p>第一步：借两位     2的2次方大于或等于4      </p>
<p>答：四个子网，需借走主机位两位来充当网络位，子网掩码为255.255.255.192</p>
<p>第二步：   8-2(借走了两位)=6       2的6次方 =64 </p>
<p>答：每个子网容纳的IP地址数量为64</p>
<p>第三部： 2的6次方-2=64-2=62 （减去一个网络地址，减去一个广播地址）</p>
<p>答：可用的主机数量为：62台主机</p>
<p>第四步：</p>
<p>IP地址范围：</p>
<ul>
<li>192.168.1.00000000/26–192.168.1.00111111/26  [192.168.1.0/26–192.168.1.63/26]</li>
<li>192.168.1.01000000/26–192.168.1.01111111/26  [192.168.1.64/26–192.168.1.127/26]</li>
<li>192.168.1.10000000/26–192.168.1.10111111/26  [192.168.1.128/26–192.168.1.191/26]</li>
<li>192.168.1.11000000/26–192.168.1.11111111/26  [192.168.1.192/26–192.168.1.255/26]</li>
</ul>
<p>第五步：</p>
<p>网络地址：192.168.1.0/26     192.168.1.64/26     192.168.1.128/26    192.168.1.192/26</p>
<p>广播地址：192.168.1.63/26   192.168.1.127/26   192.168.1.191/26    192.168.1.255/26</p>
<p>例如：192.168.1.0/24    这个网络要划分出4个子网，第一个子网要求能容纳100台电脑，第二个子网要求容纳50台电脑，第三个子网要求容纳25台电脑，第四个子网要求容纳20台电脑。请列出四个子网、子网掩码、网络地址、广播地址以及主机地址范围</p>
<ul>
<li>192.168.1.00000000/24–192.168.1.01111111/24 [192.168.1.0/24–192.168.1.127/24]</li>
</ul>
<p>网络地址：192.168.1.0/24            子网掩码：255.255.255.0      </p>
<p>广播地址：192.168.1.127/25        主机地址范围：1—126</p>
<ul>
<li>192.168.1.10000000/25–192.168.1.10111111/25 [192.168.1.128/25–192.168.1.191/25]</li>
</ul>
<p>网络地址：192.168.1.128/25            子网掩码：255.255.255.128     </p>
<p>广播地址：192.168.1.191/25            主机地址范围：129–190</p>
<ul>
<li>192.168.1.11000000/26–192.168.1.11011111/26 [192.168.1.192/26–192.168.1.223/26]</li>
</ul>
<p>网络地址：192.168.1.192/26            子网掩码：255.255.255.192    </p>
<p>广播地址：192.168.1.223/26            主机地址范围：193–222</p>
<ul>
<li>192.168.1.11100000/27–192.168.1. 11111111/27 [192.168.1.224/27–192.168.1.225/27]</li>
</ul>
<p>网络地址：192.168.1.224            子网掩码：255.255.255.224  </p>
<p>广播地址：192.168.1.255           主机地址范围：225–254</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote>
<p>有句俗话叫做师傅领进门，修行靠个人。说到底还得自己去学，只有不断地去做，孰能生巧，自然而然的你就会了子网划分，本篇博文2K左右，例题就占比一大部分，记录下一来是为了正在学习子网划分的小白一种参考，有可能写的不是很好。二来是为了我自生的巩固，只有当你把他写出来了，能讲出来，才证明你已经会了。</p>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/chineselijie/2019/08/29/1.网络--子网划分/" data-id="ck627jztz000ou4u6lld5bevn"
        class="article-share-link">分享</a>
        
      
    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        Li Jie
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Li Jie&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/旅行/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

<script src="/fancybox/jquery.fancybox.min.js"></script>



<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['面朝大海，春暖花开','愿你一生努力，一生被爱','想要的都拥有，得不到的都释怀'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>